# GNU/Linux å¸¸ç”¨å·¥å…·

    GNU æ”¶å½•è½¯ä»¶ï¼Œå¯æŸ¥æ‰‹å†Œ https://www.gnu.org/software/software.html

    Linux å‘½ä»¤é€ŸæŸ¥

        https://man7.org/linux/man-pages/index.html

        è¿™ä¸ªè€ç‚¹ https://linux.die.net/man/

    å„ç§linuxå¸®åŠ©æ‰‹å†Œé€ŸæŸ¥ https://manned.org/

    å†…æ ¸ç›¸å…³å·¥å…·å’Œä½¿ç”¨æ‰‹å†Œ https://docs.kernel.org/

## Linux å­—ç¬¦ç»ˆç«¯

å¾ˆå¤šç»ˆç«¯å·¥å…·éƒ½æ˜¯è·¨å¹³å°çš„ï¼Œå‚è§ç« èŠ‚ [å…¶ä»–ç»ˆç«¯æ¨¡æ‹Ÿå™¨]ã€‚

### ç»ˆç«¯çš„å†å²æ¼”è¿›

    https://devblogs.microsoft.com/commandline/windows-command-line-introducing-the-windows-pseudo-console-conpty/#in-the-beginning-was-the-tty

    https://zhuanlan.zhihu.com/p/99963508

    TTY æ˜¯ä»€ä¹ˆ https://zhuanlan.zhihu.com/p/447014333

    TTY é‡Œç¨‹ç¢‘ https://vt100.net/

åœ¨ 70 å¹´ä»£ä¸ªäººè®¡ç®—æœºå‡ºç°å‰ï¼Œç”µå­è®¡ç®—æœºå¤§å¤šæ•°æ˜¯å¤šç”¨æˆ·å¤§å‹æœº/å°å‹æœº/è¶…çº§è®¡ç®—æœºï¼Œç¨‹åºåœ¨å…¶ä¸Šè¿è¡Œï¼Œä¸€èˆ¬ç§° â€œä¸»æœº MainFrameâ€œã€‚

ä¸»æœºæœ‰ä¸€ä¸ªç»™ç®¡ç†å‘˜æä¾›äº¤äº’å¼æ“ä½œçš„å·¥ä½œå°ï¼Œç§°ä¸º â€œæ§åˆ¶å° consoleâ€ã€‚æ§åˆ¶å°æ˜¯ä¸€ä¸ªæœ‰ç‰¹å®šæƒé™çš„ç‰©ç†æˆ–é€»è¾‘è®¾å¤‡ï¼Œåæ¥æ¼”å˜ä¸ºè®¡ç®—æœºæœ¬èº«çš„ä¸€ä¸ªä¸“ç”¨ç‰©ç†æ¥å£ï¼Œé€šå¸¸ç›´æ¥è¿æ¥åˆ°è®¡ç®—æœºï¼Œä¾›ç³»ç»Ÿç®¡ç†å‘˜è¿›è¡Œåº•å±‚ç¡¬ä»¶ç®¡ç†ã€ç³»ç»Ÿå¯åŠ¨ã€è¯Šæ–­å’Œç»´æŠ¤ã€‚å®ƒæ‹¥æœ‰æœ€é«˜æƒé™ã€‚

æ¥è®¡ç®—æœºè¿›è¡Œåº•å±‚çš„ç®¡ç†æ“ä½œï¼Œæ­¥éª¤ä¸€èˆ¬ç§°ä¸º â€œç™»å½•æ§åˆ¶å°(console login)â€ å’Œè¿›å…¥ â€œæ§åˆ¶å°æ¨¡å¼ï¼ˆconsole modeï¼‰â€ã€‚

    åœ¨Linuxä¸­ï¼ŒæŒ‰Ctrl+Alt+F1-F6è¿›å…¥çš„è™šæ‹Ÿç»ˆç«¯ï¼Œæœ‰æ—¶è¢«ç§°ä¸ºâ€œæ§åˆ¶å°â€æˆ–â€œè™šæ‹Ÿæ§åˆ¶å°â€ï¼Œå®ƒä»¬æ¨¡æ‹Ÿäº†ç‰©ç†æ§åˆ¶å°çš„åŠŸèƒ½ã€‚

ç»ˆç«¯ æ˜¯æ™®é€šç”¨æˆ·ç”¨æ¥ä¸å¤§å‹æœºæˆ–å°å‹æœºäº¤äº’çš„è®¾å¤‡ã€‚ç”¨æˆ·é€šè¿‡ç»ˆç«¯ç™»å½•ä¸»æœºè¿›è¡Œæ“ä½œï¼Œç§°ä¸º ç™»å½• loginã€‚

åœ¨è®¡ç®—æœºæŠ€æœ¯å‘å±•åˆæœŸï¼Œè·Ÿè®¡ç®—æœºçš„äº¤äº’å¾ˆç®€é™‹ï¼Œç”¨æˆ·æƒ³æ‰§è¡Œå‘½ä»¤è¦åœ¨ä¸€æ¡çº¸å¸¦ä¸Šæ‰“å­”ï¼Œæ‰“å­”æŒ‰è§„å¾‹è¿›è¡Œç¼–ç ï¼Œç”¨æˆ·åœ¨çº¸å¸¦æœºæŠŠçº¸å¸¦è¾“å…¥ç»™è®¡ç®—æœºã€‚è®¡ç®—æœºè¯†åˆ«è¿™äº›ç¼–ç ï¼Œå¤„ç†ååœ¨å¦ä¸€æ¡çº¸å¸¦ä¸Šæ‰“å­”è¾“å‡ºæ‰§è¡Œç»“æœï¼Œç”¨æˆ·æŒ‰æ‰“å­”è§„å¾‹è§£è¯»

              è¾“å…¥çº¸å¸¦ -->
    user --->             çº¸å¸¦æœº <---> ä¸»æœº
              è¾“å‡ºçº¸å¸¦ <--              |
                                       |
    user administrator <---> æ§åˆ¶å° <--->|

åˆ©ç”¨äº† 1930 å¹´ä»£å‡ºç°çš„ â€œç”µä¼ æ‰“å­—æœºï¼ˆTeletype, ttyï¼‰â€ï¼Œå®ç°äº†äº¤äº’å¼çš„å­—ç¬¦è¾“å…¥ï¼ˆé”®ç›˜ï¼‰å’Œè¾“å‡ºï¼ˆæ‰“å°åœ¨çº¸å¸¦ä¸Šï¼‰ã€‚ç”¨æˆ·åœ¨ç”µä¼ æ‰“å­—æœºä¸Šæ‰“å­—ä½œä¸ºè¾“å…¥ï¼Œä¸»æœºæŠŠæ‰§è¡Œç»“æœç”¨å­—ç¬¦ä½œä¸ºè¾“å‡ºï¼Œè¢«ç”µä¼ æ‰“å­—æœºæ‰“å°åœ¨çº¸ä¸Šï¼Œè¿™æ ·æ¯”è¾ƒæ–¹ä¾¿

               é”®ç›˜  -->
             /
    user --->             tty <---> ä¸»æœº
             \                         |
               æ‰“å°çº¸ <--               |
                                       |
    user administrator <---> æ§åˆ¶å° <--->|

é€šè¿‡TTYæˆ–ç»ˆç«¯ä¸è®¡ç®—æœºè¿›è¡Œçš„å­—ç¬¦äº¤äº’ç•Œé¢ï¼Œç§°ä¸º â€œå‘½ä»¤è¡Œç•Œé¢â€ æˆ– â€œæ–‡æœ¬ç»ˆç«¯â€ï¼Œå‘½ä»¤è¡Œç•Œé¢æ˜¯å›¾å½¢ç•Œé¢å‡ºç°å‰æœ€ä¸»è¦çš„äº¤äº’æ–¹å¼ã€‚ä½¿ç”¨ä¸»æœºçš„å„ä¸ªç”¨æˆ·ï¼Œä¸€èˆ¬éƒ½æ˜¯åˆ©ç”¨å…·å¤‡ tty åŠŸèƒ½çš„è®¾å¤‡è¿æ¥åˆ°ä¸»æœºï¼Œä»¥å‘½ä»¤è¡Œç•Œé¢è·Ÿæ“ä½œç³»ç»Ÿäº¤äº’ã€‚å‘½ä»¤è¡Œç•Œé¢ä¹Ÿç§°â€œå‘½ä»¤è¡Œæ¨¡å¼â€ã€‚

ç›´åˆ°ç°åœ¨ï¼Œunixã€Linux æ“ä½œç³»ç»Ÿä»ç„¶ç”¨ tty æ¥è¡¨ç¤ºä½¿ç”¨å­—ç¬¦çš„è¾“å…¥è¾“å‡ºè®¾å¤‡ã€‚

éšç€ç”µå­æŠ€æœ¯çš„å‘å±•ï¼Œtty åŠŸèƒ½çš„è¾“å‡ºè®¾å¤‡ä»æ‰“å­—æœºçš„çº¸å¸¦å‘å±•åˆ°åˆ°ä¸åŒåˆ†è¾¨ç‡çš„ç”µå­æ˜¾ç¤ºå±ï¼Œç§ç±»ç¹å¤šã€‚å…·å¤‡ tty åŠŸèƒ½ï¼Œç»™ç”¨æˆ·æä¾›å­—ç¬¦è¾“å…¥å’Œæ˜¾ç¤ºè¾“å‡ºç»“æœçš„è®¾å¤‡ï¼Œè¢«ç§°ä¸º â€œç»ˆç«¯ Terminalâ€ã€‚

               é”®ç›˜  -->
             /
    user --->           ç»ˆç«¯Terminal <---> ä¸»æœº
             \                         |
               æ˜¾ç¤ºå™¨ <--               |
                                       |
    user administrator <---> æ§åˆ¶å° <--->|

è§†é¢‘ç»ˆç«¯ï¼ˆå¦‚è‘—åçš„VT100ï¼‰ï¼Œä½¿ç”¨ç”µå­æ˜¾ç¤ºå±ï¼Œå¯ä»¥è¾“å‡ºä¸åŒçš„æ˜¾ç¤ºè§„æ ¼çš„å­—ç¬¦ï¼Œæ¯”å¦‚å­—ä½“ã€å¤§å°ã€è¡Œå®½ã€åˆ—å®½ç­‰ã€‚

ç»ˆç«¯è®¾å¤‡ç”¨æ¥æ¥æ”¶ç”¨æˆ·ç•Œé¢çš„è¾“å…¥ä¼ é€’ç»™ä¸»æœºï¼Œæ¥æ”¶ä¸»æœºçš„è¾“å‡ºå±•ç°åœ¨ç”¨æˆ·ç•Œé¢ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­éœ€è¦å¯¹å­—ç¬¦è¿›è¡Œç¼–ç è½¬æ¢ä»¥ä¾¿äººä¸ä¸»æœºäº’ç›¸ â€œç†è§£â€ã€‚å­—ç¬¦çš„ç¼–ç æ ‡å‡†ï¼Œä»æ—©æœŸ 1960 å¹´ä»£ ASCII æ ‡å‡†å‘å±•è‡³ä»Šï¼Œä¸»æµè®¡ç®—æœºä»ç„¶ä¿æŒå¯¹æ­¤æ ‡å‡†çš„å…¼å®¹ã€‚

ä¸ªäººè®¡ç®—æœºï¼ˆPCï¼‰æœ¬èº«å°±æ˜¯ä¸€ä¸ªå®Œæ•´çš„è®¡ç®—æœºï¼Œå®ƒæ—¢å¯ä»¥ä½œä¸ºç‹¬ç«‹çš„â€œä¸»æœºâ€è¿è¡Œï¼Œä¹Ÿå¯ä»¥é€šè¿‡ç½‘ç»œä½œä¸ºâ€œå®¢æˆ·ç«¯â€å»è®¿é—®å…¶ä»–æœåŠ¡å™¨ï¼ˆä¸»æœºï¼‰ï¼Œç”šè‡³å¯ä»¥ä½œä¸ºè™šæ‹Ÿç»ˆç«¯è¿æ¥åˆ°ä¸»æœºã€‚

å‘å±•åˆ°ç°åœ¨æ¦‚å¿µæ¼”å˜äº†ï¼Œè¿æ¥çš„åŒæ–¹ï¼Œæˆ‘ä»¬æŠŠè¢«è¿æ¥æ–¹çš„è§’è‰²ç»Ÿä¸€ç§°ä¸º ä¸»æœº Host æˆ– Serverï¼Œè¿æ¥æ–¹ç§°ä¸º å®¢æˆ·æœºClientã€‚

    ç”¨æˆ·è¿æ¥ä¸»æœºç™»å½•ç§°ä¸º â€œç”¨æˆ·ç™»å½•ï¼ˆuser loginï¼‰â€ã€‚

    è€Œ â€œç”¨æˆ·ç™»å½•æ§åˆ¶å°â€ï¼Œä»ç”¨äºæ“ä½œä¸»æœºçš„ç®¡ç†ç•Œé¢ï¼Œæ¯”å¦‚ Unixã€Linux ç±»çš„æ“ä½œç³»ç»Ÿï¼Œå¯ä»¥ä½¿ç”¨ä¸€å°é€šç”¨è®¡ç®—æœºè¿æ¥ä¸»æœºçš„ä¸²è¡Œç«¯å£ï¼Œæˆ–åœ¨ä¸»æœºçš„å›¾å½¢ç•Œé¢ä½¿ç”¨ç‰¹æ®Šçš„å‘½ä»¤ç»„åˆå¦‚ ctrl+alt+F2ï¼Œè¿›å…¥ä¸€ä¸ªå‘½ä»¤è¡Œç•Œé¢ï¼Œåœ¨è¿™é‡Œé€šç”¨è®¡ç®—æœºä½¿ç”¨â€œè™šæ‹Ÿç»ˆç«¯â€ä½œä¸º ç»ˆç«¯ è§’è‰²è¿æ¥åˆ°äº†ä¸»æœºçš„æ§åˆ¶å°ï¼Œç”¨æˆ·å¯ä»¥æ‰§è¡Œå¯¹è®¡ç®—æœºè¿›è¡Œç®¡ç†ç»´æŠ¤çš„åº•å±‚æ“ä½œå‘½ä»¤ã€‚è€Œä¸”ç°åœ¨ä¸éœ€è¦ä¸“é—¨çš„ç»ˆç«¯è®¾å¤‡äº†ï¼Œå®¢æˆ·ç«¯ä¸€èˆ¬æ˜¯é€šç”¨è®¾å¤‡å¦‚å°å¼æœºæˆ–ç¬”è®°æœ¬ç”µè„‘ï¼Œé€šè¿‡ç½‘çº¿ã€ä¸²è¡Œç«¯å£ç”µç¼†ç­‰è¿æ¥ä¸»æœºï¼Œç”¨æˆ·åœ¨å®¢æˆ·ç«¯è®¾å¤‡ä¸Šè¿è¡Œç»ˆç«¯æ¨¡æ‹Ÿè½¯ä»¶è¿›è¡Œ â€œç”¨æˆ·ç™»å½•â€ï¼Œç„¶åå°±å¯ä»¥æ“ä½œä¸»æœºäº†ã€‚é€šè¿‡SSHæˆ–ç½‘ç»œç»ˆç«¯ç™»å½•ï¼Œé€šå¸¸è¢«è§†ä¸ºè¿œç¨‹ç»ˆç«¯ä¼šè¯ã€‚

å¯¹ç°ä»£äº’è”ç½‘æ¥è¯´ï¼Œç½‘ç»œä¸Šçš„ä¸»æœºç§°ä¸º Serverï¼Œç”¨æˆ·ä½¿ç”¨çš„å®¢æˆ·ç«¯è®¾å¤‡ç§°ä¸º Clientï¼Œæ³¨æ„åŒºåˆ†æ¦‚å¿µã€‚

#### TTY è®¾å¤‡

    https://zhuanlan.zhihu.com/p/613534348

    https://zhuanlan.zhihu.com/p/97018747

åœ¨ä»Šå¤©ï¼Œç±» unix æ“ä½œç³»ç»Ÿå¦‚ Linux/MacOS è¿˜æ˜¯åœ¨åˆ©ç”¨ tty è®¾å¤‡ä½œä¸ºä¸»æœºä¸ç”¨æˆ·ä¹‹é—´ä½¿ç”¨å­—ç¬¦æ“ä½œäº¤äº’çš„æ¡¥æ¢ï¼Œä¸»æœºä¸Šè¿è¡Œçš„ç¨‹åºï¼Œè¾“å…¥è¾“å‡ºé»˜è®¤æŒ‡å‘ä¸€ä¸ª tty è®¾å¤‡ã€‚

    ç”¨æˆ·ä½¿ç”¨ç»ˆç«¯è½¯ä»¶å¦‚ ssh ç™»å½•æœåŠ¡å™¨ï¼Œç”±æœåŠ¡å™¨åˆ†é…ä¸€ä¸ª tty è®¾å¤‡æ‰èƒ½è¿›è¡Œå‘½ä»¤è¡Œæ“ä½œï¼ˆssh æ”¯æŒè®¾ç½®ä¸ç»™è¿æ¥ç”¨æˆ·åˆ†é… tty è®¾å¤‡ä»¥æé«˜å®‰å…¨æ€§ï¼‰ã€‚

    æ¡Œé¢ç”¨æˆ·ä½¿ç”¨ç»ˆç«¯æ¨¡æ‹Ÿå™¨ï¼Œç”±ä¸»æœºåˆ†é…ä¸€ä¸ª tty è®¾å¤‡ç»™ç»ˆç«¯æ¨¡æ‹Ÿå™¨ï¼Œè¿æ¥æ“ä½œä¸»æœºã€‚

ä¸ºä¾¿äºç†è§£ï¼ŒæŸ¥çœ‹ä»¥ä¸‹ç¤ºä¾‹ï¼š

å‘½ä»¤ `who` å¯ä»¥æ˜¾ç¤ºå½“å‰ç”¨æˆ·æ‰“å¼€çš„å…¨éƒ¨ TTY è®¾å¤‡ï¼Œè€Œå‘½ä»¤ `tty` åˆ™å¯ä»¥æ˜¾ç¤ºå½“å‰çª—å£æ‰€ç”¨çš„ TTY è®¾å¤‡ã€‚å› ä¸º Linux çš„è®¾å¤‡éƒ½æ˜¯ç”¨æ–‡ä»¶çš„æ–¹å¼æ˜ å°„çš„ï¼Œæ‰€ä»¥åˆ©ç”¨è¿™ä¸¤ä¸ªå‘½ä»¤è·å–çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬æŠŠæ–‡æœ¬å†™å…¥ tty è®¾å¤‡ï¼Œå¯ä»¥å®ç°åœ¨ä¸€ä¸ª session ä¸­å‘å¦ä¸€ä¸ª session å‘é€æ¶ˆæ¯ï¼š

    # å½“å‰æœ‰å“ªäº›ç»ˆç«¯
    $ who
    pi       pts/0        2023-03-14 11:50 (::1)
    pi       pts/1        2023-02-07 22:52 (tmux(2044).%0)
    pi       pts/2        2023-02-07 22:52 (tmux(2044).%1)

    # å½“å‰ç”¨çš„å“ªä¸ªç»ˆç«¯
    $ tty
    /dev/pts/0

    # å¯¹æ–¹çš„å‘½ä»¤è¡Œè¾“å…¥å¤„ä¼šå‡ºç°è¯¥æ–‡æœ¬çš„å†…å®¹
    $ echo "message from 0 to 2" >/dev/pts/2

    è‡³äºä¸ºä½•æ˜¾ç¤º pts è€Œä¸æ˜¯ ptyï¼Œå› ä¸º ptyï¼ˆè§ä¸‹é¢ç« èŠ‚[ç»ˆç«¯æ¨¡æ‹Ÿå™¨ï¼ˆTerminal Emulatorï¼‰]ï¼‰ç”±ä¸¤éƒ¨åˆ†æ„æˆï¼Œpts æ˜¯ slave ç«¯ï¼Œptmx æ˜¯ master ç«¯ï¼Œå¯¹ç”¨æˆ·ç©ºé—´çš„ç¨‹åºæ¥è¯´ï¼Œæ“ä½œ pts å°±æ˜¯æ“ä½œ pty è®¾å¤‡ã€‚ä» pty è®¾å¤‡å†…éƒ¨æ¥çœ‹ï¼Œpts çš„ä¸€ç«¯è¿æ¥çš„æ˜¯ç”¨æˆ·ç©ºé—´çš„åº”ç”¨ç¨‹åºï¼Œå¦‚ sshdã€tmux ç­‰ï¼Œpts çš„å¦ä¸€ç«¯è¿æ¥çš„æ˜¯ ptmxã€‚è€Œ ptmx è¿æ¥çš„æ˜¯å†…æ ¸çš„ç»ˆç«¯æ¨¡æ‹Ÿå™¨ï¼Œå®ƒå’Œç»ˆç«¯æ¨¡æ‹Ÿå™¨éƒ½åªæ˜¯è´Ÿè´£ç»´æŠ¤ä¼šè¯å’Œè½¬å‘æ•°æ®åŒ…ï¼›å†…æ ¸ç»ˆç«¯æ¨¡æ‹Ÿå™¨çš„å¦ä¸€ç«¯è¿æ¥çš„æ˜¯å…·ä½“çš„ç¡¬ä»¶ï¼Œå¦‚é”®ç›˜å’Œæ˜¾ç¤ºå™¨ã€‚

å½“ç”¨æˆ·é€€å‡ºç»ˆç«¯ï¼ˆæ‰‹åŠ¨é€€å‡ºæˆ–è€…å› ä¸ºç½‘ç»œæ³¢åŠ¨æ–­ç½‘è€Œé€€å‡ºï¼‰æ—¶ï¼Œå‘é€äº†ä»€ä¹ˆï¼š

    ç³»ç»Ÿç»™è¿è¡Œä¸­çš„ç¨‹åºå‘é€äº† hangup ä¿¡å·ï¼Œå¦‚æœç¨‹åºä¸å¤„ç†å°†è¢«ç»ˆæ­¢ã€‚

    ç³»ç»Ÿå…³é—­äº†è¿™ä¸ªç»ˆç«¯å¯¹åº”çš„ TTY è®¾å¤‡ã€‚è€Œè¿™ä¸ª TTY è®¾å¤‡æ˜¯ç¨‹åºé»˜è®¤çš„è¾“å…¥ã€è¾“å‡ºæ¥æºã€‚æ­¤æ—¶ï¼Œå½“ç¨‹åºå°è¯•è¾“å…¥ã€è¾“å‡ºæ—¶ï¼Œå°±ä¼šé‡åˆ°é”™è¯¯ã€‚

å› æ­¤ï¼Œ`nohup` çš„å·¥ä½œåŸç†ä¹Ÿéå¸¸ç®€å•ï¼Œé€šè¿‡ `man nohup` å°±å¯ä»¥çœ‹åˆ°ï¼šnohup - run a command immune to hangups, with output to a non-ttyã€‚ç®€å•æ¥è¯´ï¼Œnohup è®©ç¨‹åºèƒ½å¤Ÿä¸å— hangup ä¿¡å·çš„å½±å“ï¼Œå¹¶ä¸”å°†è¾“å…¥è¾“å‡ºè½¬ç§»åˆ°ä¸€ä¸ªé TTY çš„æ–‡ä»¶ä¸Šï¼Œä»è€Œé¿å…ç¨‹åºè¢«å…³é—­ã€‚

åœ¨ tmux ä¸­å¼€å¯çš„ sessionï¼Œä¹Ÿä¸ä¼šå—åˆ°å½“å‰ç»ˆç«¯é€€å‡ºçš„å½±å“ã€‚è¿™æ˜¯å› ä¸º tmux ä¸­å¼€å¯çš„æ¯ä¸ª session éƒ½æœ‰è‡ªå·±çš„ TTY è®¾å¤‡ï¼Œå½“å‰ç”¨æˆ·é€€å‡ºæ—¶æ“ä½œç³»ç»Ÿå¹¶ä¸ä¼šåˆ é™¤ tmux çš„é‚£äº› tty è®¾å¤‡ã€‚

å½“æˆ‘ä»¬ä½¿ç”¨ `docker exec` æˆ–è€… `kubectl exec` ç­‰å‘½ä»¤è¿æ¥åˆ°æŸä¸ªå®¹å™¨æ—¶ï¼Œç»å¸¸ä¼šåŠ ä¸Š -it å‚æ•°ã€‚å…¶ä¸­çš„ -t çš„å«ä¹‰ï¼Œå°±æ˜¯åˆ†é…ä¸€ä¸ªTTYè®¾å¤‡ï¼š-t,--tty[=false] Allocate a pseudo-TTYã€‚äºæ˜¯ï¼Œæ‰§è¡Œå®Œè¿™äº›å‘½ä»¤åï¼Œå°±å¯åŠ¨äº†ä¸€ä¸ª TTY è®¾å¤‡è¿æ¥ï¼Œå¯ä»¥å½“åšä¸€ä¸ªæ­£å¸¸çš„ terminal æ¥ä½¿ç”¨ã€‚å¤§å®¶ä¹Ÿå¯ä»¥è¯•è¯•å»æ‰ -t å‚æ•°ï¼Œè¿™æ—¶å°±åƒä¸€ä¸ªæ™®é€šç¨‹åºä¸€æ ·ï¼Œä½ è¾“å…¥ä¸€ä¸ªå‘½ä»¤ï¼Œå®ƒè¾“å‡ºç›¸åº”å†…å®¹ï¼Œæ²¡æœ‰ tab è¡¥å…¨ï¼Œä¹Ÿæ²¡æœ‰å„ç§æ˜¾ç¤ºä¸é¢œè‰²ã€‚

tty è®¾å¤‡çš„æœªæ¥

    https://www.reddit.com/r/linux/comments/8yox3f/what_ever_happened_to_systemdconsoled_and_the/

wayland ç­‰åŸºäºå›¾å½¢åŒ–çš„æ¡†æ¶æˆç†Ÿåï¼ŒLinux å†…æ ¸çš„ VT å­ç³»ç»Ÿè½¬ä¸ºä½¿ç”¨ä¸€ä¸ªç”¨æˆ·ç©ºé—´çš„çª—å£ç³»ç»Ÿï¼Œè¯¥ç³»ç»Ÿèƒ½å¤Ÿè¿è¡Œå¤šä¸ªç»ˆç«¯ä»¿çœŸå™¨ä»¥åŠå…¶ä»–å®¢æˆ·ç«¯ï¼Œåœ¨å®ƒä»¬ä¹‹é—´åˆ‡æ¢ï¼Œå¹¶æ‰§è¡ŒåŸºæœ¬çš„ WM æ“ä½œï¼Œä¾‹å¦‚æœ€å¤§åŒ–è¾“å‡ºä¸Šçš„çª—å£ã€‚

#### ç»ˆç«¯æ¨¡æ‹Ÿå™¨ï¼ˆTerminal Emulatorï¼‰

80å¹´ä»£PCæµè¡Œä»¥æ¥ï¼Œä¸»è¦çš„è¿æ¥æ–¹å¼æ˜¯ç”¨æˆ·ä½¿ç”¨é€šç”¨è®¡ç®—æœºï¼Œé€šè¿‡ä¸²è¡Œç”µç¼†è¿æ¥ä¸»æœºï¼Œåˆ©ç”¨é€šç”¨è®¡ç®—æœºçš„æ˜¾ç¤ºå™¨å’Œé”®ç›˜ä¸ä¸»æœºäº¤äº’ï¼Œåœ¨ä¸»æœºä¸Šä½¿ç”¨å‘½ä»¤è¡Œç•Œé¢è¿›è¡Œæ“ä½œã€‚

éšç€å¤„ç†å™¨èƒ½åŠ›å‘å±•å¼ºå¤§ï¼ŒGUI å›¾å½¢åŒ–æ“ä½œç³»ç»Ÿçš„å‘å±•ï¼Œå¸¦æ¥äº†ä¸€ä¸ªæ–°çš„ä½¿ç”¨é—®é¢˜ï¼šå¦‚æœç”¨æˆ·ä½¿ç”¨å›¾å½¢åŒ–ç•Œé¢çš„ Terminalï¼Œéœ€è¦ä¸æœ¬æœºä¸Šè¿è¡Œçš„å¦ä¸€ä¸ªå‘½ä»¤è¡Œåº”ç”¨ç¨‹åºäº¤äº’ï¼Œé‚£ä¹ˆæœ¬æœºçš„ç¨‹åºéœ€è¦è¥é€ å‡ºä¸€ä¸ªç‰©ç†ç»ˆç«¯è®¾å¤‡çš„ä»¿çœŸç¯å¢ƒï¼Œä»¥ä¾¿åœ¨å‘½ä»¤è¡Œç•Œé¢è·Ÿä¸»æœºè¿›è¡Œäº¤äº’ï¼Œå³æ‰€è°“ç»ˆç«¯æ¨¡æ‹Ÿå™¨ï¼ˆTerminal Emulatorï¼‰ã€‚

UNIX/Linux å†…æ ¸ä½¿ç”¨ä¼ªç»ˆç«¯ï¼ˆpseudo ttyï¼Œç¼©å†™ä¸º ptyï¼‰è®¾å¤‡çš„æ¦‚å¿µï¼Œå®ç°è¿™ä¸ªä¼ªç»ˆç«¯åŠŸèƒ½çš„ç¨‹åºå³å¯æŠŠè‡ªå·±æ¨¡æ‹Ÿæˆä¸»æœºçš„ç»ˆç«¯ã€‚æˆ‘ä»¬ç°åœ¨è¯´çš„ç»ˆç«¯ï¼Œä¸€èˆ¬ä¸å†æ˜¯çœŸå®çš„ç¡¬ä»¶è®¾å¤‡ï¼Œè€Œæ˜¯æŒ‡è½¯ä»¶ç»ˆç«¯æ¨¡æ‹Ÿå™¨ã€‚ç›®å‰æµè¡Œçš„å­—ç¬¦ç»ˆç«¯æ¨¡æ‹Ÿå™¨æœ‰ minttyã€xtermã€puttyï¼ˆè¿œç¨‹ï¼‰ç­‰ï¼Œå›¾å½¢ç»ˆç«¯æ¨¡æ‹Ÿå™¨æœ‰ä½¿ç”¨ vncã€rdp åè®®çš„ tiger vnc/Remmina/mstsc ç­‰ã€‚åœ¨ä½¿ç”¨å­—ç¬¦ç»ˆç«¯æ¨¡æ‹Ÿå™¨çš„æ—¶å€™ï¼Œå¦‚æœä¸æ¸…æ¥šä¸»æœºç±»å‹ï¼Œç»ˆç«¯ç±»å‹å¯é€‰æ‹©æœ€å¸¸è§çš„ xtermã€‚

éšç€è®¡ç®—æœºç½‘ç»œçš„å‘å±•ï¼Œç½‘ç»œä¸Šçš„æœåŠ¡å™¨ï¼ˆServerï¼‰ä½œä¸ºä¸»æœºï¼Œå®¢æˆ·æœºï¼ˆClientï¼‰é€šè¿‡ç½‘ç»œè¿æ¥ä¸»æœºã€‚ä¸»æœºå’Œå®¢æˆ·æœºé—´å¯ä»¥ä½¿ç”¨å„ç§ä¸åŒç±»å‹çš„åè®®è¿›è¡Œè¿æ¥ï¼Œæ¯”å¦‚ ssh/telnet/ftp ç­‰éƒ½æœ‰å¯¹åº”çš„å‘½ä»¤è¡Œç¨‹åºã€‚è¿œç¨‹è¿æ¥ä½¿ç”¨çš„é€šä¿¡åè®®ä¸»è¦é‡‡ç”¨éå¯¹ç§°å¯†é’¥åŠ å¯†ç®—æ³•ï¼Œä¸€èˆ¬åˆ©ç”¨ ssh å»ºç«‹é€šä¿¡éš§é“ã€‚ä¸Šè¿°ç»ˆç«¯æ¨¡æ‹Ÿå™¨ä¸­ï¼Œxterm è¿æ¥æœ¬æœºï¼Œé€šè¿‡ ssh ç­‰ç¨‹åºè¿æ¥ç½‘ç»œä¸Šçš„ä¸»æœºã€‚putty ä¸»è¦ç”¨äº ssh åè®®è¿æ¥ç½‘ç»œä¸Šçš„ä¸»æœºï¼Œé€šè¿‡ ssh çš„æ–¹å¼ä¹Ÿå¯è¿æ¥æœ¬æœºï¼ˆéœ€è¦æœ¬æœºè¿è¡Œ sshd æœåŠ¡ï¼‰ï¼Œä¹Ÿæ”¯æŒæ¨¡æ‹Ÿ rs232 ä¸²å£æ–¹å¼è¿æ¥æœ¬æœºæ“ä½œç³»ç»Ÿ consoleã€‚

åœ¨ shell ä¸‹å¯¹ç»ˆç«¯è¿›è¡Œæ§åˆ¶çš„å¸¸ç”¨å‘½ä»¤

    tput å‘½ä»¤æŸ¥è¯¢æˆ–åˆ›å»ºäº¤äº’æ€§çš„ã€ä¸“ä¸šæ€§å¼ºçš„å±å¹•è¾“å‡ºï¼Œå¦‚ç§»åŠ¨æˆ–æ›´æ”¹å…‰æ ‡ã€æ›´æ”¹æ–‡æœ¬å±æ€§ï¼Œä»¥åŠæ¸…é™¤ç»ˆç«¯å±å¹•çš„ç‰¹å®šåŒºåŸŸ

    reset é‡ç½®ç»ˆç«¯çš„æ˜¾ç¤ºï¼Œé€‚ç”¨äº cat äº†ä¸€ä¸ªäºŒè¿›åˆ¶å‘½ä»¤ï¼Œå¯¼è‡´ç»ˆç«¯æ˜¾ç¤ºæ··ä¹±çš„æƒ…å†µä¸‹ã€‚

    ncurses åº“è¢«ç”¨äºåœ¨ Linux ä¸‹ç”ŸæˆåŸºäºæ–‡æœ¬çš„ç”¨æˆ·ç•Œé¢ï¼Œä½ çš„ç»ˆç«¯æ¨¡æ‹Ÿå™¨å¿…é¡»è¢«å®ƒå†…ç½®çš„ terminfo æ•°æ®åº“æ¥å—ï¼Œæ‰èƒ½åœ¨ tty ä¸‹æ­£å¸¸æ˜¾ç¤ºæ–‡æœ¬ï¼Œä¸€èˆ¬éƒ½ä¼šæŠŠè‡ªå·±æ¨¡æ‹Ÿæˆ xtermã€‚

#### ç™»å½•æ§åˆ¶å° tty login/console login

è™½ç„¶éƒ½æ˜¯è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œæœ¬åœ°ç™»å½•ä¸éœ€è¦ sshd æœåŠ¡ï¼ŒäºŒè€…ä¸æ˜¯ä¸€å›äº‹ã€‚

ç°ä»£æ“ä½œç³»ç»Ÿä¸­ï¼Œæœ¬åœ°ä½¿ç”¨ä¸»æœºçš„åœºæ™¯ï¼Œä¸€èˆ¬éƒ½æ”¯æŒä»æ§åˆ¶å°ç™»å½•çš„åŠŸèƒ½ï¼Œè¿™æ ·ç”¨æˆ·åœ¨ä¸»æœºå‰æ¥ä¸ªé”®ç›˜æ˜¾ç¤ºå™¨å³å¯ç»´æŠ¤åŸºæœ¬çš„æ“ä½œç³»ç»Ÿï¼Œå½“ç„¶ä¹Ÿå¯ä»¥è®¾ç½®å¼€æœºå¼•å¯¼åˆ°å›¾å½¢ç•Œé¢ç™»å½•ã€‚

    å¯¹ä¸»æœºæ¥è¯´ï¼Œç”±æœ¬åœ°ä¸»æœºåˆ†é…ä¸€ä¸ª tty è®¾å¤‡æ“ä½œä¸»æœºï¼Œç”¨æˆ·æœ€ç»ˆåœ¨å‘½ä»¤è¡Œç•Œé¢é‡Œè·å¾—ä¸€ä¸ª login shellã€‚ç±»ä¼¼ä½†æ˜¯è·Ÿæ™®é€šçš„ ssh ç™»å½•æ˜¯ä¸ä¸€æ ·çš„ï¼Œæ§åˆ¶å°ç™»å½•ä¸ä¾èµ– sshd æœåŠ¡ï¼Œè€Œä¸”ä¹Ÿä¸éœ€è¦ä½ å®‰è£…ä»€ä¹ˆç»ˆç«¯æ¨¡æ‹Ÿå™¨ï¼Œè¿™æ˜¯æ“ä½œç³»ç»Ÿè‡ªå¸¦çš„ä¸€ä¸ªç»ˆç«¯ç•Œé¢ã€‚

    è¿™æ ·çš„ç™»å½•æ–¹å¼ä¸€èˆ¬ä¼šæä¾›å¤šä¸ªæ§åˆ¶å°ï¼ŒæŒ‰ä¸‹ Alt+Fn é”®å¯åˆ‡æ¢å„ä¸ªæ§åˆ¶å°ã€‚å„ Unix ç³»ç»Ÿå’Œ Linux å‘è¡Œç‰ˆæœ‰åŒºåˆ«ï¼ŒæŒ¨ä¸ªè¯•è¯•å³å¯ã€‚

ç›®å‰å¸¸ç”¨çš„ç™»å½•æ§åˆ¶å°çš„æ–¹å¼ï¼š

1ã€æœ¬åœ°ä¸»æœºå¤–æ¥æ˜¾ç¤ºå™¨å’Œé”®ç›˜é¼ æ ‡ï¼Œå¼€æœºå¯åŠ¨å [æœ¬åœ°ç™»å½•åˆ‡æ¢å›¾å½¢æ¨¡å¼æˆ–æ§åˆ¶å°ç™»å½•]ï¼Œè·å¾— login shellã€‚

2ã€æœ¬åœ°æ¡Œé¢ç¯å¢ƒä¸‹ï¼Œæ”¯æŒå‘½ä»¤è¡Œä¸‹çš„é”®ç›˜å¿«æ·é”®ï¼Œæ¥å³æ—¶åˆ‡æ¢åˆ°å„ä¸ªæ§åˆ¶å° consoleï¼š

    CTRL + ALT + F1 â€“ é”å±
    CTRL + ALT + F2 â€“ TTY2ï¼Œå¦‚æœæœ‰ç”¨æˆ·ç™»å½•æ¡Œé¢ï¼Œåˆ™åˆ‡æ¢åˆ°å¯¹åº”çš„æ¡Œé¢ç¯å¢ƒ
    CTRL + ALT + F3 â€“ TTY3ï¼Œå¦‚æœæœ‰ç¬¬2ä¸ªç”¨æˆ·ç™»å½•æ¡Œé¢ï¼Œåˆ™åˆ‡æ¢åˆ°å¯¹åº”çš„æ¡Œé¢ç¯å¢ƒï¼Œä»¥ä¸‹ç±»æ¨
    CTRL + ALT + F4 â€“ TTY4
    CTRL + ALT + F5 â€“ TTY5
    CTRL + ALT + F6 â€“ TTY6

ç¨å¾®ç­‰ä¸€ä¼šå„¿å°±åˆ‡æ¢è¿‡å»äº†ï¼Œå½“å‰æ¡Œé¢ä¼šä¿æŒã€‚

è¿™æ˜¯çœŸæ­£çš„æ§åˆ¶å°å™¢ï¼Œè·Ÿå›¾å½¢ç•Œé¢ä¸‹çš„é‚£äº›ç»ˆç«¯æ¨¡æ‹Ÿå™¨æ¯”å¦‚ Gnome Terminal ä¹‹ç±»çš„æ²¡å…³ç³»ã€‚

å„å‘è¡Œç‰ˆçš„å®šä¹‰å¯èƒ½ä¸å¤§ä¸€æ ·ï¼Œæ‰€ä»¥æˆ‘éƒ½æ˜¯æš´åŠ›åˆ‡æ¢ï¼šå·¦æ‰‹æŒ‰ä½ ctl+altï¼Œå³æ‰‹é£ŸæŒ‡ä» F3 ä¸€æºœåˆ’åˆ° F10ï¼Œéšä¾¿è°å‡ºæ¥ã€‚ã€‚ã€‚

3ã€æ— å¤´æ¨¡å¼(Headless)å¼€æœºç›´æ¥ä¸²å£ç™»å½•æ§åˆ¶å°

ä¸»æœºæ²¡æœ‰è¿æ¥æ˜¾ç¤ºå™¨å’Œé”®ç›˜ç§°ä¸ºæ— å¤´æ¨¡å¼(Headless)ï¼Œä¸€èˆ¬åªèƒ½ç”¨å¦ä¸€å°ç¬”è®°æœ¬ç”µè„‘ç­‰è®¾å¤‡ï¼Œé€šè¿‡ä¸²å£è¿æ¥åˆ°è¯¥ä¸»æœºï¼Œè·å¾—ä¸€ä¸ª login shellã€‚

    ä»å“ç‰ŒæœåŠ¡å™¨åˆ°æ ‘è“æ´¾ç­‰å•æ¿è®¾å¤‡ï¼Œéƒ½æ”¯æŒç”±æœ¬åœ°ä¸»æœºåˆ†é…ä¸€ä¸ª tty è®¾å¤‡ç»™ä¸²å£ï¼Œæœ€ç»ˆåœ¨è¿æ¥ä¸²å£çš„ç»ˆç«¯æ¨¡æ‹Ÿå™¨é‡Œå¯ä»¥è·å¾—ä¸€ä¸ª login shellã€‚

    è¿™ä¸ª Serial Console(UART) æ–¹å¼å«åš serial tty loginï¼Œåœ¨ Linux é‡Œæ‰§è¡Œç™»å½•çš„ç¨‹åºåä¸€èˆ¬æ˜¯ gettyã€‚ç¤ºä¾‹å‚è§ç« èŠ‚ [é€šè¿‡ttlä¸²å£ç™»å½•æ ‘è“æ´¾](raspberry-pi think)ã€‚

    ä½¿ç”¨è™šæ‹Ÿæœºè½¯ä»¶å®‰è£…æ“ä½œç³»ç»Ÿæ—¶ï¼Œè™šæ‹Ÿæœºè½¯ä»¶æä¾›çš„æ˜¾ç¤ºç•Œé¢å…¶å®å°±æ˜¯æ¨¡æ‹Ÿçš„æœ¬åœ°çš„æ§åˆ¶å°ç™»å½•ã€‚åˆ©ç”¨æœ¬åœ°æ§åˆ¶å°ç™»å½•ï¼Œå³ä½¿è¿œç¨‹è¿æ¥æ•…éšœï¼Œä¹Ÿå¯ä»¥è¿æ¥æ“ä½œä½ çš„è™šæ‹Ÿæœºã€‚

å¦è§ç« èŠ‚ [ç»™æ§åˆ¶å°consoleè®¾ç½®ä¸­æ–‡å­—ä½“]ã€‚

### äº¤äº’å¼ç™»å½• shell

    https://www.cnblogs.com/pigwan7/p/9593540.html

shell æ˜¯ç»ˆç«¯ä¸‹ç”¨æˆ·ä¸æ“ä½œç³»ç»Ÿè¿›è¡Œäº¤äº’çš„åª’ä»‹ï¼Œbash æ˜¯ç›®å‰ Linux ç³»ç»Ÿä¸­æœ€å¸¸ç”¨çš„ shellã€‚

å¯ä»¥ä»ä¸¤ä¸ªä¸åŒç»´åº¦æ¥åˆ’åˆ† shellï¼šæ˜¯å¦äº¤äº’å¼ã€æ˜¯å¦ç™»å½•ã€‚

ä¸€ã€äº¤äº’å¼ shell å’Œéäº¤äº’å¼ shell

    äº¤äº’å¼æ¨¡å¼ï¼ˆinteractiveï¼‰ï¼šåœ¨ç»ˆç«¯ä¸Šæ‰§è¡Œï¼Œshell ç­‰å¾…ä½ çš„è¾“å…¥ï¼Œå¹¶ä¸”ç«‹å³æ‰§è¡Œä½ æäº¤çš„å‘½ä»¤ã€‚è¿™ç§æ¨¡å¼è¢«ç§°ä½œäº¤äº’å¼æ˜¯å› ä¸º shell ä¸ç”¨æˆ·è¿›è¡Œäº¤äº’ã€‚è¿™ç§æ¨¡å¼ä¹Ÿæ˜¯å¤§å¤šæ•°ç”¨æˆ·éå¸¸ç†Ÿæ‚‰çš„ï¼šç™»å½•ã€æ‰§è¡Œä¸€äº›å‘½ä»¤ã€é€€å‡ºã€‚å½“ä½ é€€å‡ºåï¼Œshellä¹Ÿç»ˆæ­¢äº†ã€‚

    éäº¤äº’å¼æ¨¡å¼ï¼ˆnon-interactiveï¼‰ï¼šä»¥ shell script æ–¹å¼æ‰§è¡Œã€‚åœ¨è¿™ç§æ¨¡å¼ ä¸‹ï¼Œshell ä¸ä¸ä½ è¿›è¡Œäº¤äº’ï¼Œè€Œæ˜¯è¯»å–å­˜æ”¾åœ¨è„šæœ¬æ–‡ä»¶ä¸­çš„å‘½ä»¤,å¹¶ä¸”æ‰§è¡Œå®ƒä»¬ã€‚å½“å®ƒè¯»åˆ°æ–‡ä»¶çš„ç»“å°¾ EOFï¼Œshell ä¹Ÿå°±ç»ˆæ­¢äº†ã€‚åœ¨ç®¡é“ä¸­æ‰§è¡Œçš„è„šæœ¬å°±å±äºéäº¤äº’æ¨¡å¼ã€‚

å¯ä»¥é€šè¿‡æ‰“å° â€œ$-â€ å˜é‡çš„å€¼ï¼ˆä»£è¡¨ç€å½“å‰shellçš„é€‰é¡¹æ ‡å¿—ï¼‰ï¼ŒæŸ¥çœ‹å…¶ä¸­æ˜¯å¦æœ‰å­—æ¯ â€œiâ€ (interactive shel) æ¥åŒºåˆ†äº¤äº’å¼ä¸éäº¤äº’å¼ shellã€‚

    $ echo $-
    himBHs

    $ [[ $- != *i* ]] && echo 'non-interactive' || echo 'interactive'

ç”¨æˆ·åœ¨æœ¬åœ°ä½¿ç”¨ç»ˆç«¯æ¨¡æ‹Ÿå™¨å’Œ ssh ç™»å½•è¿œç¨‹æœåŠ¡å™¨ï¼Œä½¿ç”¨çš„ shell éƒ½å±äºäº¤äº’å¼ã€‚

äºŒã€ç™»å½• shell å’Œéç™»å½• shell

    ç™»å½• shellï¼ˆloginï¼‰ï¼šéœ€è¦ç”¨æˆ·åã€å¯†ç ç™»å½•åæ‰èƒ½è¿›å…¥çš„ shellï¼Œæˆ–è€…å‘½ä»¤ `bash --login` æˆ– -l é€‰é¡¹ç”Ÿæˆçš„ shell

    éç™»å½•shellï¼ˆnon-loginï¼‰ï¼šä¸éœ€è¦è¾“å…¥ç”¨æˆ·åå’Œå¯†ç å³å¯æ‰“å¼€çš„ Shellï¼Œä¾‹å¦‚ï¼šç›´æ¥å‘½ä»¤ `bash` å°±æ˜¯æ‰“å¼€ä¸€ä¸ªæ–°çš„éç™»å½•shell

> è¯»å–ç™»å½•è„šæœ¬æ–‡ä»¶çš„åŒºåˆ«

ç™»å½• shellï¼š

    ç³»ç»Ÿçº§ï¼š
    /etc/profile
        --> /etc/bash.bashrc
        --> /etc/profile.d

            ç”¨æˆ·çº§ï¼š
            --> ~/.bash_profile
            --> ~/.bash_login
            --> ~/.profile

                --> $HOME/.bashrc -> /etc/bashrc
                    --> ~/.bash_logout

    ç‰¹æ®Šçš„ï¼Œ.profile(ç”± Bourne Shell å’Œ Korn Shell ä½¿ç”¨) å’Œ .bash_login (ç”± C Shell ä½¿ç”¨)ä¸¤ä¸ªæ–‡ä»¶æ˜¯ .bash_profile çš„åŒä¹‰è¯ï¼Œç›®çš„æ˜¯ä¸ºäº†å…¼å®¹å…¶å®ƒ Shellã€‚ç›®å‰ Debian ç³»ä½¿ç”¨ .profileï¼ŒRHEL ç³»ä½¿ç”¨ .bash_profileã€‚

    .bash_profile ä¸­ä¸€èˆ¬ä¼šæ‰§è¡Œ .bashrcï¼ŒBash é»˜è®¤çš„å‘½ä»¤æç¤ºç¬¦ã€ls å’Œ grep å‘½ä»¤çš„å½©è‰²æ˜¾ç¤ºåœ¨ ~/.bashrc çš„ä»£ç ä¸­è¿›è¡Œäº†è®¾ç½®

éç™»å½• shellï¼š $HOME/.bashrc -> /etc/bashrc

> è¿è¡Œæ—¶åŒºåˆ«

    ç™»å½• shellï¼Œå…¶ bash è¿›ç¨‹åä¸º "-bash"

    éç™»å½• shellï¼Œå…¶ bash è¿›ç¨‹åä¸º "bash"

    é€€å‡ºä¸€ä¸ªç™»å½•  shell çš„å‘½ä»¤ï¼šexit æˆ–è€… logoutï¼Œ
    é€€å‡ºä¸€ä¸ªéç™»å½• shell çš„å‘½ä»¤ï¼šåªèƒ½ exitã€‚

ç°åœ¨å¤§å¤šæ•°ç»ˆç«¯æ¨¡æ‹Ÿå™¨ï¼ŒåŒ…æ‹¬ Gnome æˆ– KDE ç­‰æ¡Œé¢ç¯å¢ƒä¸‹æ‰“å¼€çš„ç³»ç»Ÿè‡ªå¸¦çš„ â€œç»ˆç«¯â€ï¼ˆterminalï¼‰çª—å£ç¨‹åºï¼Œé»˜è®¤éƒ½å¯åŠ¨éç™»å½• shellï¼Œå³ä¸ä¼šæ‰§è¡Œä½ çš„ ~/.bash_profile æ–‡ä»¶ã€‚

ä¸‰ã€è®²äººè¯

ç™»å½•æœ¬åœ°ç»ˆç«¯ï¼š

    éœ€è¦åœ¨ä½ çš„ç»ˆç«¯æ¨¡æ‹Ÿå™¨è½¯ä»¶ä¸­å¼€å¯è®¾ç½®ï¼Œæ‰èƒ½åœ¨ç™»å½•æ—¶æ‰§è¡Œä½ çš„ ~/.bash_profile æ–‡ä»¶ï¼š

        æŒ‡å®šæ‰§è¡Œå‘½ä»¤ `/bin/bash -l`

        æˆ–å‹¾é€‰ 'Use Login Shell'

    å¦åˆ™åªèƒ½åœ¨è¿›å…¥ shell åæ‰‹åŠ¨æ‰§è¡Œ `source ~/.bash_profile`ã€‚

ssh ç™»å½•è¿œç¨‹æœåŠ¡å™¨ï¼š

    å±äºç™»å½• shellï¼Œssh ä¼šè‡ªåŠ¨æ‰§è¡Œè¿œç¨‹æœåŠ¡å™¨ç”¨æˆ·çš„ ~/.bash_profile æ–‡ä»¶ï¼Œé™¤éåœ¨ ssh å‘½ä»¤è¡ŒæŒ‡å®šä¸æ‰§è¡Œç™»å½•è„šæœ¬æ–‡ä»¶ã€‚

å››ã€crontab ä¸­æ‰§è¡Œ shellï¼Œæ—¢ä¸æ˜¯äº¤äº’å¼ shellï¼Œä¹Ÿä¸æ˜¯ç™»å½• shellï¼Œä¸ä¼šæ‰§è¡Œä¸Šè¿°çš„é…ç½®æ–‡ä»¶ï¼Œæœ‰å¦‚ä¸‹ä¸¤ç§å¤„ç†æ–¹æ³•ï¼š

    æŠŠ shebang æ”¹ä¸º `#!/bin/bash -l` è®©è„šæœ¬ç”¨ç™»å½• Shell æ¥è§£é‡Šæ‰§è¡Œï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæ‰§è¡Œè„šæœ¬è¦é‡‡ç”¨è·¯å¾„æ‰§è¡Œçš„æ–¹å¼

    è°ƒç”¨ Bash è§£é‡Šå™¨ï¼ŒåŠ  -l å‚æ•°ï¼Œå³ /bin/bash -l script

### å­—ç¬¦ç»ˆç«¯çš„åŒºåŸŸã€ç¼–ç ã€è¯­è¨€

    https://perlgeek.de/en/article/set-up-a-clean-utf8-environment

ç”¨å‘½ä»¤ locale æŸ¥çœ‹ï¼Œå˜é‡ä¾èµ–ä»å¤§åˆ°å°çš„é¡ºåºæ˜¯ï¼šLC_ALL, LC_CTYPE, LANG

    $ locale
    LANG=en_US.UTF-8
    LANGUAGE=en_US.UTF-8
    LC_CTYPE="en_US.UTF-8"
    LC_NUMERIC="en_US.UTF-8"
    LC_TIME="en_US.UTF-8"
    LC_COLLATE="en_US.UTF-8"
    LC_MONETARY="en_US.UTF-8"
    LC_MESSAGES="en_US.UTF-8"
    LC_PAPER="en_US.UTF-8"
    LC_NAME="en_US.UTF-8"
    LC_ADDRESS="en_US.UTF-8"
    LC_TELEPHONE="en_US.UTF-8"
    LC_MEASUREMENT="en_US.UTF-8"
    LC_IDENTIFICATION="en_US.UTF-8"
    LC_ALL=en_US.UTF-8

    æœªæ·»åŠ è¯­è¨€åŒ…æ—¶æ“ä½œç³»ç»Ÿåªæ”¯æŒæ¯”è¾ƒå°‘çš„å‡ ä¸ª POSIX æ ‡å‡†
    $ locale -a
    C
    C.utf8
    POSIX

åœ¨ env è®¾ç½®ï¼Œå¦‚

    LC_CTYPE=zh_CN.gbk; export LC_CTYPE

ä¸­æ–‡ Windows ä½¿ç”¨ ansi gbk ç¼–ç ï¼Œè®¾ç½®å˜é‡ï¼šLocaleã€Charset

    Locale=zh_CN
    Charset=GB18030

shellä¸­çš„å‘½ä»¤æ˜¾ç¤ºä¸­æ–‡ï¼ˆå¦‚æœæ”¯æŒçš„è¯ï¼‰å°±è®¾ç½® LANG

    export LANG=zh_CN.UTF-8

> stty å‘½ä»¤è®¾ç½®ç»ˆç«¯å‚æ•°

    https://www.cnblogs.com/goloving/p/15170646.html

è¿›ç¨‹å’Œç»ˆç«¯é—´çš„æ•°æ®ä¼ è¾“å’Œæ•°æ®å¤„ç†æ˜¯ç”±ç»ˆç«¯è®¾å¤‡é©±åŠ¨ç¨‹åºæ¥è´Ÿè´£çš„ï¼Œç»ˆç«¯é©±åŠ¨ç¨‹åºæ˜¯å†…æ ¸çš„ä¸€éƒ¨åˆ†ï¼Œstty å‘½ä»¤å¯ä»¥ä¿®æ”¹ç»ˆç«¯é©±åŠ¨ç¨‹åºé‡Œé¢çš„è®¾ç½®

    $ stty -a
    speed 38400 baud; rows 42; columns 176; line = 0;
    intr = ^C; quit = ^\; erase = ^?; kill = ^U; eof = ^D; eol = <undef>; eol2 = <undef>; swtch = <undef>; start = ^Q; stop = ^S; susp = ^Z; rprnt = ^R; werase = ^W; lnext = ^V;
    discard = ^O; min = 1; time = 0;
    -parenb -parodd -cmspar cs8 -hupcl -cstopb cread -clocal -crtscts
    -ignbrk -brkint -ignpar -parmrk -inpck -istrip -inlcr -igncr icrnl ixon -ixoff -iuclc -ixany -imaxbel iutf8
    opost -olcuc -ocrnl onlcr -onocr -onlret -ofill -ofdel nl0 cr0 tab0 bs0 vt0 ff0
    isig icanon iexten echo echoe echok -echonl -noflsh -xcase -tostop -echoprt echoctl echoke -flusho -extproc

tostop å±æ€§æ§åˆ¶åå°ä»»åŠ¡æ˜¯å¦èƒ½å†™ç»ˆç«¯

stty å‘½ä»¤ä¸å¸¦å‚æ•°å¯ä»¥æ‰“å°ç»ˆç«¯è¡Œè®¾ç½®ï¼ŒåŠ ä¸Š -a å‚æ•°å¯ä»¥æ‰“å°å¾—æ›´è¯¦ç»†äº›ã€‚

ã€€ã€€stty size ï¼šå¯ä»¥æ˜¾ç¤ºç»ˆç«¯çš„å¤§å°ï¼Œå³è¡Œæ•°å’Œåˆ—æ•°ã€‚

ã€€ã€€stty å‘½ä»¤è¿˜å¯ä»¥æ›´æ”¹ç»ˆç«¯è¡Œçš„è®¾ç½®ï¼Œæ ¼å¼å¦‚ä¸‹ï¼šstty SETTING CHAR

ã€€ã€€å…¶ä¸­ï¼ŒSETTINGå¯ä»¥æ˜¯å¦‚ä¸‹ï¼š

        eof : è¾“å…¥ç»“æŸï¼Œæ–‡ä»¶ç»“æŸï¼Œé»˜è®¤ä¸ºCtrl+Dã€‚æ¯”å¦‚ï¼šç”¨cat >fileæ¥åˆ›å»ºæ–‡ä»¶æ—¶ï¼ŒæŒ‰Ctrl+Dæ¥ç»“æŸè¾“å…¥ã€‚

        erase : å‘ååˆ é™¤å­—ç¬¦ï¼Œæ“¦é™¤æœ€åä¸€ä¸ªè¾“å…¥å­—ç¬¦ï¼Œé»˜è®¤ä¸ºCtrl+?ã€‚æ³¨æ„é»˜è®¤æƒ…å†µä¸‹é€€æ ¼é”®Backspaceä¸æ˜¯åˆ é™¤å­—ç¬¦ã€‚

        intr : ä¸­æ–­å½“å‰ç¨‹åºï¼Œé»˜è®¤ä¸ºCtrl+Cã€‚

        kill : åˆ é™¤æ•´æ¡å‘½ä»¤ï¼Œåˆ é™¤æ•´è¡Œï¼Œé»˜è®¤ä¸ºCtrl+Uã€‚

        quit :é€€å‡ºå½“å‰ç¨‹åºï¼Œé»˜è®¤ä¸ºCtrl+\æˆ–Ctrl+|ã€‚

        start : å¯åŠ¨å±å¹•è¾“å‡ºï¼Œé»˜è®¤ä¸ºCtrl+Qã€‚

        stop :åœæ­¢å±å¹•è¾“å‡ºï¼Œé»˜è®¤ä¸ºCtrl+Sã€‚

        susp : terminal stopå½“å‰ç¨‹åºï¼Œé»˜è®¤ä¸ºCtrl+Zã€‚è¿™æ ·å½“å‰è¿›ç¨‹å°±ä¼šå˜æˆåå°è¿›ç¨‹äº†ã€‚

        weraseï¼šåˆ é™¤æœ€åä¸€ä¸ªå•è¯ï¼Œé»˜è®¤ä¸ºCtrl+Wã€‚

stty å‘½ä»¤è¿˜æœ‰ä¸€äº›å…¶ä»–ç”¨æ³•ï¼Œå¦‚ï¼šstty -echo å…³é—­å›æ˜¾ï¼ˆæ¯”å¦‚åœ¨è„šæœ¬ä¸­ç”¨äºè¾“å…¥å¯†ç æ—¶ï¼‰ï¼Œç„¶åå†ç”¨ stty echo æ‰“å¼€å›æ˜¾ã€‚

    #åœ¨å‘½ä»¤è¡Œä¸‹ï¼Œç¦æ­¢è¾“å‡ºå¤§å†™çš„æ–¹æ³•ï¼š
    stty iuclc     #å¼€å¯
    stty -iuclc    #æ¢å¤

    #åœ¨å‘½ä»¤è¡Œä¸‹ç¦æ­¢è¾“å‡ºå°å†™ï¼š
    stty olcuc    #å¼€å¯
    stty -olcuc   #æ¢å¤

    #æ‰“å°å‡ºç»ˆç«¯çš„è¡Œæ•°å’Œåˆ—æ•°ï¼š
    stty size

    #æ”¹å˜Ctrl+Dçš„æ–¹æ³•:
    stty eof "string"
    #ç³»ç»Ÿé»˜è®¤æ˜¯Ctrl+Dæ¥è¡¨ç¤ºæ–‡ä»¶çš„ç»“æŸï¼Œè€Œé€šè¿‡è¿™ç§æ–¹æ³•ï¼Œå¯ä»¥æ”¹å˜ï¼

    #å±è”½æ˜¾ç¤ºï¼š
    stty -echo   #ç¦æ­¢å›æ˜¾
    stty echo    #æ‰“å¼€å›æ˜¾
    #æµ‹è¯•æ–¹æ³•:
    stty -echo;read;stty echo;read

    #å¿½ç•¥å›è½¦ç¬¦ï¼š
    stty igncr     #å¼€å¯
    stty -igncr    #æ¢å¤

> è®¾ç½®é€€æ ¼é”® Backspace çš„åˆ é™¤è¡Œä¸º

ã€€ã€€åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æŒ‰é€€æ ¼é”® Backspaceæ—¶ï¼Œä¼šåœ¨å±å¹•ä¸Šå›æ˜¾^Hï¼Œè€Œä¸æ˜¯æŠŠå‰ä¸€ä¸ªå­—ç¬¦åˆ é™¤ã€‚æ¯”å¦‚ä½¿ç”¨ sftp/ftp/sqlplus/ij ç­‰å‘½ä»¤æ—¶ï¼Œå°±ä¼šç¢°åˆ°è¿™ç§æƒ…å†µã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨sttyå‘½ä»¤æŠŠé€€æ ¼é”® Backspace çš„è¡Œä¸ºå˜æˆåˆ é™¤å‰ä¸€ä¸ªå­—ç¬¦

    sftp> get abc^H^H^H^H

    #ä¿®æ”¹åˆ é™¤è¡Œä¸º
    [root@web ~]# stty erase ^H

> ç»ˆæ­¢åå°è¿›ç¨‹å†™å…¥è¾“å‡º

æˆ‘ä»¬åœ¨ç»ˆç«¯å½“ä¸­ï¼Œé»˜è®¤æ˜¯å…è®¸è¿›ç¨‹å¾€ç»ˆç«¯å½“ä¸­è¿›è¡Œè¾“å‡ºçš„ï¼Œä½†æ˜¯å½“æˆ‘ä»¬ä½¿ç”¨å‘½ä»¤ stty tostop ä¹‹åï¼Œå¦‚æœè¿˜æœ‰åå°è¿›ç¨‹å¾€ç»ˆç«¯å½“ä¸­è¿›è¡Œè¾“å‡ºï¼Œé‚£ä¹ˆè¿™ä¸ªè¿›ç¨‹å°±ä¼šæ”¶åˆ°ä¸€ä¸ª SIGTTOU ä¿¡å·ã€‚

### ç»ˆç«¯æ¨¡æ‹Ÿå™¨å’Œè½¯ä»¶çš„çœŸå½©è‰²è®¾ç½®

    https://github.com/mintty/mintty/wiki/CtrlSeqs

    å†å²ä»‹ç»è§ https://zhuanlan.zhihu.com/p/566797565

è‡ª 1978 å¹´çš„ VT100 ä»¥æ¥ï¼ŒUnix/Linux ä¸€ç›´é€šç”¨ [ANSI escape codes å½©è‰²å­—ç¬¦æ–¹æ¡ˆ](http://en.wikipedia.org/wiki/ANSI_escape_code)ï¼šä½¿ç”¨å›ºå®šçš„æ–‡æœ¬ä»£ç ä½œä¸ºæ§åˆ¶å‘½ä»¤ï¼Œå¯¹å­—ç¬¦ç»ˆç«¯çš„æ–‡æœ¬è¿›è¡Œä¿®é¥°ï¼Œç”±ç»ˆç«¯æ¨¡æ‹Ÿå™¨å’Œè½¯ä»¶è§£é‡Šå¹¶å‘ˆç°å¯¹åº”çš„è‰²å½©ã€‚

å› ä¸ºç»ˆç«¯éƒ½æ˜¯æœ¬åœ°ä½¿ç”¨çš„ï¼Œå°±æ˜¯ Linux/Unix æœåŠ¡å™¨å¼€æœºæ—¶è¿›å…¥çš„å‘½ä»¤è¡Œæ¨¡å¼ï¼Œå¦‚æœæˆ‘ä»¬åœ¨ç™»å½•åçš„å‘½ä»¤è¡Œå˜é‡ $TERM è®¾ç½®ç»ˆç«¯ç±»å‹ï¼Œç»ˆç«¯æ¨¡æ‹Ÿå™¨ä¼šè¯»å–è¯¥å˜é‡è‡ªåŠ¨æ¨¡æ‹Ÿä¸ºæŒ‡å®šç±»å‹çš„ç»ˆç«¯ï¼Œä¸€èˆ¬é»˜è®¤ xtermã€‚

åœ¨ä½¿ç”¨ ssh å‘½ä»¤è¡Œè¿œç¨‹è¿æ¥ Linux/Unix æœåŠ¡å™¨æ—¶ï¼Œä¹Ÿæ˜¯åŒæ ·å¤„ç†çš„ã€‚

æœ€å¤è€çš„åŸºæœ¬é¢œè‰²æ¿ï¼ˆbasic colour paletteï¼‰ï¼Œå‰æ™¯è‰²å’ŒèƒŒæ™¯è‰²åˆ†åˆ«æœ‰ 8 ç§ï¼Œåˆè®¡16ç§å¦‚ä¸‹

    https://blog.csdn.net/Dreamhai/article/details/103432525

    https://zhuanlan.zhihu.com/p/570148970

    è‰²å½©      é»‘    çº¢    ç»¿    é»„    è“    æ´‹çº¢    é’    ç™½
    å‰æ™¯è‰²    30    31    32    33   34    35    36    37
    èƒŒæ™¯è‰²    40    41    42    43   44    45    46    47

æ‰€ä»¥ç›®å‰é€šç”¨çš„å‰æ™¯é¢œè‰²ä»£ç å°±æ˜¯16ç§ï¼ˆåŸºæœ¬8ç§ã€åŠ äº®8ç§ï¼‰ï¼Œåœ¨ bash ä¸‹ç”¨å¦‚ä¸‹å­—ç¬¦è¡¨ç¤ºï¼š

```bash

# ä¿®é¥°æ–‡æœ¬çš„é¢œè‰²ä»£ç ç”¨ \033[0 å¼€å¤´

plain="\033[0m"

black="\033[0;30m"
dark_gray="\033[1;30m"

red="\033[0;31m"
light_red="\033[1;31m"

green="\033[0;32m"
light_green="\033[1;32m"

yellow="\033[0;33m"
light_yellow="\033[1;33m"

blue="\033[0;34m"
light_blue="\033[1;34m"

# ä¹Ÿæœ‰å« purple çš„
magenta="\033[0;35m"
light_magenta="\033[1;35m"

cyan="\033[0;36m"
light_cyan="\033[1;36m"

white="\033[0;37m"
light_gray="\033[1;37m"

# éªŒè¯
echo -e "${red}Are you ${plain} ok?"

```

è¾“å‡ºç‰¹æ•ˆæ ¼å¼æ§åˆ¶ï¼š

```bash
\033[0m å…³é—­æ‰€æœ‰å±æ€§
\033[1m è®¾ç½®é«˜äº®åº¦
\03[4m ä¸‹åˆ’çº¿
\033[5m é—ªçƒ
\033[7m åæ˜¾
\033[8m æ¶ˆéš
\033[30m -- \033[37m è®¾ç½®å‰æ™¯è‰²
\033[40m -- \033[47m è®¾ç½®èƒŒæ™¯è‰²
```

å…‰æ ‡ä½ç½®ç­‰çš„æ ¼å¼æ§åˆ¶ï¼š

```bash
\033[nA å…‰æ ‡ä¸Šç§»nè¡Œ
\03[nB å…‰æ ‡ä¸‹ç§»nè¡Œ
\033[nC å…‰æ ‡å³ç§»nè¡Œ
\033[nD å…‰æ ‡å·¦ç§»nè¡Œ
\033[y;xHè®¾ç½®å…‰æ ‡ä½ç½®
\033[2J æ¸…å±
\033[K æ¸…é™¤ä»å…‰æ ‡åˆ°è¡Œå°¾çš„å†…å®¹
\033[s ä¿å­˜å…‰æ ‡ä½ç½®
\033[u æ¢å¤å…‰æ ‡ä½ç½®
\033[?25l éšè—å…‰æ ‡
\33[?25h æ˜¾ç¤ºå…‰æ ‡
```

å¦‚æœä½ çš„ç»ˆç«¯æ¨¡æ‹Ÿå™¨æ”¯æŒå½©è‰²ç­‰æ•ˆæœï¼Œé‚£ä¹ˆåœ¨ bash ä¸‹è¾“å…¥å¦‚ä¸‹ä»£ç ï¼Œä¼šçœ‹åˆ°è¾“å‡ºçº¢è‰²çš„æ–‡å­—

    # asciiè¡¨ä¸­ \e æˆ– \033 æˆ– \x1b
    # ä½¿ç”¨16è‰²ä»£ç è¡¨ åŸºæœ¬é¢œè‰²æ¿
    $ echo -en "\033[0;31m I am red\033[0m\n"

    # ä½¿ç”¨256è‰²ä»£ç è¡¨
    $ echo -en "\033[38:5:88m I am red\033[0m\n"

    # ä½¿ç”¨RGBçœŸå½©è‰²
    $ echo -en "\033[38:2:168:28:38m I am red\033[0m\n"

    #å‡‘æ•°çš„ï¼Œvscodeè¯­æ³•é«˜äº®å¾€ä¸‹åŒ¹é…äº†ï¼Œå¤ªä¹±]]]]]]

æ›´å¤šåº”ç”¨ç¤ºä¾‹å‚è§ (shellcmd.md) ä¸­ç»ˆç«¯ç™»å½•è„šæœ¬ä¸­é¢œè‰²è®¾ç½®çš„ä»£ç ã€‚

æ‰€ä»¥ï¼Œè¦èƒ½çœ‹åˆ°å½©è‰²çš„æ–‡æœ¬ï¼Œç»ˆç«¯æ¨¡æ‹Ÿå™¨åº”è¯¥è‡³å°‘åœ¨é€‰é¡¹è®¾ç½®ä¸­è®¾ç½®ä¸º xterm ç±»å‹ã€‚è‹¥ç»ˆç«¯å·¥å…·èƒ½æ”¯æŒ24ä½çœŸå½©è‰²ã€å¼€å¯é€æ˜é€‰é¡¹ï¼Œåˆ™æ˜¾ç¤ºçš„æ•ˆæœæ›´å¥½ã€‚

ä¸ºé˜²æ­¢ç»ˆç«¯æ¨¡æ‹Ÿå™¨è½¯ä»¶ä¸­æœªè®¾ç½®ç»ˆç«¯ç±»å‹ï¼Œæˆ–è½¯ä»¶é»˜è®¤ä½¿ç”¨çš„ç»ˆç«¯ç±»å‹æ¯”è¾ƒä¿å®ˆï¼Œä¸€èˆ¬å¯ä»¥åœ¨ç”¨æˆ·ç™»å½•è„šæœ¬ .bash_profile ä¸­è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œèµ·åˆ°ç›¸åŒçš„æ•ˆæœ

    # æ˜¾å¼è®¾ç½®ç»ˆç«¯å¯ç”¨256colorï¼Œé˜²æ­¢ç»ˆç«¯å·¥å…·æœªè®¾ç½®ã€‚è‹¥ç»ˆç«¯å·¥å…·èƒ½æ”¯æŒ24ä½çœŸå½©è‰²ã€å¼€å¯é€æ˜é€‰é¡¹ï¼Œåˆ™æ˜¾ç¤ºçš„æ•ˆæœæ›´å¥½
    export TERM="xterm-256color"

å¦‚æœç»ˆç«¯æ¨¡æ‹Ÿå™¨æ”¯æŒçœŸå½©è‰²ï¼Œè¿˜å¯ä»¥å¯¹16è‰²ä»£ç è¡¨çš„å®é™…å±•ç°æ•ˆæœè¿›è¡Œè‡ªå®šä¹‰è®¾ç½®ï¼Œä» 65536 ç§é¢œè‰²ä¸­é€‰å–ï¼šæ¯”å¦‚æŠŠçº¢è‰²ä»£ç  31 çš„å®é™…å±•ç°æ•ˆæœå®šä¹‰ä¸º RGB(168,28,38)ã€‚è¿™æ ·åšçš„ç›®çš„æ˜¯å…¼å®¹æ€§ï¼šç»å¤§å¤šæ•°çš„ shell è„šæœ¬å¯¹æ–‡å­—è¿›è¡Œé¢œè‰²ä¿®é¥°éƒ½é€šç”¨ 16 è‰²ä»£ç ï¼Œé™¤éè„šæœ¬çš„ä»£ç æ”¹é€ ä¸º RGB(x,x,x) çš„å½¢å¼æ‰èƒ½å‘ˆç°æ›´ä¸°å¯Œçš„è‰²å½©ã€‚æ‰€ä»¥ï¼Œä¸éœ€è¦ä¿®æ”¹è„šæœ¬çš„æŠ˜è¡·åŠæ³•æ˜¯ï¼Œç”±ç”¨æˆ·è®¾ç½®è‡ªå·±çš„ç»ˆç«¯æ¨¡æ‹Ÿå™¨æŠŠè¿™ 16 ç§é¢œè‰²è§£é‡Šä¸ºæ›´ä¸°å¯Œçš„é¢œè‰²ã€‚

åŸºæœ¬é¢œè‰²æ¿çš„è‡ªå®šä¹‰ï¼Œè¯¦è§å„ç»ˆç«¯æ¨¡æ‹Ÿå™¨çš„è®¾ç½®ã€‚

å¦‚æœéœ€è¦ç¡®å®šå½“å‰ç»ˆç«¯æ¨¡æ‹Ÿå™¨æ˜¯å¦æ”¯æŒçœŸå½©è‰²ï¼Œå‚è§ä¸‹é¢ç½‘å€ä¸­çš„çœŸå½©è‰²æ£€æµ‹ä»£ç 

    https://github.com/termstandard/colors
        https://gist.github.com/XVilka/8346728

ç»ˆç«¯æ¨¡æ‹Ÿå™¨å³ä½¿å¼€å¯äº† 24 ä½çœŸå½©ï¼Œå‡ºäºå…¼å®¹æ€§è€ƒè™‘ï¼Œé»˜è®¤çš„è‰²å½©ä¸»é¢˜ï¼Œå¯¹16ç§é¢œè‰²ä»£ç ä¹Ÿåªä¼šé€‰ç”¨ 16/256 è‰²ä¸­çš„é¢œè‰²ï¼Œå¯¼è‡´çœ‹ä¸å‡ºæ›´å¥½çœ‹çš„æ•ˆæœã€‚æ‰€ä»¥ï¼Œä¸ºäº†èƒ½çœ‹åˆ°æ›´ä¸°å¯Œçš„é¢œè‰²ï¼Œåº”è¯¥è‡ªå®šä¹‰è®¾ç½®ï¼Œé€‰æ‹©é¢œè‰²æ›´ä¸°å¯Œçš„å…¶å®ƒä¸»é¢˜ï¼Œæˆ–è‡ªå®šä¹‰è¿™16ç§é¢œè‰²ä»£ç çš„å®é™…å±•ç°é¢œè‰²ï¼Œè¯¦è§å„ç»ˆç«¯æ¨¡æ‹Ÿå™¨çš„è®¾ç½®ã€‚

#### æµ‹è¯•ç»ˆç«¯æ¨¡æ‹Ÿå™¨æ”¯æŒè‰²å½©çš„æƒ…å†µ

ä½¿ç”¨ä¸åŒç»ˆç«¯æ¨¡æ‹Ÿå™¨ï¼ˆmintty bashã€puttyã€Windows Terminal bashï¼‰, ç”¨ ssh ç™»å½•åŒä¸€ä¸ªæœåŠ¡å™¨ï¼Œ åˆ†åˆ«è¿›å…¥ bash/zsh+powerlevel10k ã€tmux ç¯å¢ƒ

æŸ¥çœ‹ç»ˆç«¯è®¾ç½®æ˜¯å¦é…ç½®å¥½äº†åŸºæœ¬çš„å˜é‡

    $ echo $TERM
    xterm-256color

    $ tput colors
    256

ä½¿ç”¨ vim æŸ¥çœ‹ä»£ç æ–‡ä»¶ï¼Œåœ¨ vim é‡Œæ‰§è¡Œ `:terminal` è¿›å…¥æ–°çš„ç»ˆç«¯ï¼Œå„ç§æƒ…å†µçš„ç»„åˆæµ‹è¯•ï¼š

è§‚å¯Ÿå½©è‰²æ–‡å­—çš„é¢œè‰²ã€çŠ¶æ€æ è‰²æ¡ï¼šå¦‚æœå½©è‰²æ–‡å­—çš„é¢œè‰²æ·±ä¸”æ˜äº®ã€çŠ¶æ€æ å·¥å…·çš„è‰²æ¡é¢œè‰²è¿‡æ¸¡æ–­è£‚ï¼Œè¯´æ˜åªæ”¯æŒ 256colorã€‚

        -    bash+vim   zsh+powerlevel10k+vim   tmux+bash+vim     tmux+zsh+powerlevel10k+vim
    ----------------------------------------------------------------------------------------
    mintty

    putty

    Windows Terminal

åŸºæœ¬ 16 è‰²æµ‹è¯•è„šæœ¬

    è¡Œä¸ºæ–‡å­—é¢œè‰²(å‰æ™¯è‰²16è‰²)ï¼Œåˆ—ä¸ºèƒŒæ™¯é¢œè‰²ï¼ˆ8è‰²ï¼‰ï¼Œåœ¨ bash ä¸‹æ‰§è¡Œå³å¯

        # curl -fsSL https://github.com/pablopunk/colortest/raw/master/colortest |bash

        ```bash

        T='gYw' # The test text

        echo -e "\n                 40m     41m     42m     43m\
             44m     45m     46m     47m";

        for FGs in '    m' '   1m' '  30m' '1;30m' '  31m' '1;31m' '  32m' \
                   '1;32m' '  33m' '1;33m' '  34m' '1;34m' '  35m' '1;35m' \
                   '  36m' '1;36m' '  37m' '1;37m';
          do FG=${FGs// /}
          echo -en " $FGs \033[$FG  $T  "
          for BG in 40m 41m 42m 43m 44m 45m 46m 47m;
            do echo -en "$EINS \033[$FG\033[$BG  $T  \033[0m";
          done
          echo;
        done
        echo

        ```

    16 è‰²ï¼Œå‰æ™¯å’ŒèƒŒæ™¯

        curl -fsSL https://github.com/mintty/utils/raw/master/colourscheme |bash

    16 è‰²ï¼Œå‰æ™¯å’ŒèƒŒæ™¯ï¼ŒåŠ ä¸Šæ–‡å­—ç²—ä½“é—ªçƒç­‰æ•ˆæœ

        curl -fsSL https://github.com/robertknight/konsole/raw/master/tests/colortest.sh |bash

    è·Ÿä¸Šé¢çš„ä»£ç åŠŸèƒ½ç›¸åŒçš„ä¸€ä¸ªç®€å•è„šæœ¬å®ç°

    ```bash
    # https://github.com/msys2/MSYS2-packages/issues/1684#issuecomment-570793998
    for x in {0..8}; do for i in {30..37}; do for a in {40..47}; do echo -ne "\e[$x;$i;$a""m\\\e[$x;$i;$a""m\e[0;37;40m "; done; echo; done; done; echo ""
    ```

256 color æµ‹è¯•è„šæœ¬

    256è‰²å±•ç¤ºï¼ŒæŒ‰æ¯ç§é¢œè‰²ç»„ç»‡

        curl -fsSL https://github.com/robertknight/konsole/raw/master/tests/color-spaces.pl |perl

True color(24bit) è‰²æ¡æµ‹è¯•è„šæœ¬ï¼Œå¦‚æœè‰²æ¡å‡ºç°æ˜æ˜¾çš„æ¡å¸¦åˆ†éš”ï¼Œé‚£è¯´æ˜åªæ”¯æŒ 256 color

    ç®€å•åœ¨ bash ä¸‹æ‰§è¡Œå³å¯

    ```bash

    awk 'BEGIN{
        printf "\x1b[38;2;255;100;0mTRUECOLOR\x1b[0m\n";

        s="/\\/\\/\\/\\/\\"; s=s s s s s s s s;
        for (colnum = 0; colnum<77; colnum++) {
            r = 255-(colnum*255/76);
            g = (colnum*510/76);
            b = (colnum*255/76);
            if (g>255) g = 510-g;
            printf "\033[48;2;%d;%d;%dm", r,g,b;
            printf "\033[38;2;%d;%d;%dm", 255-r,255-g,255-b;
            printf "%s\033[0m", substr(s,colnum+1,1);
        }
        printf "\n";
    }'

    ```

    è¿ç»­è¿‡æ¸¡çš„é¢œè‰²è‰²æ¡

        # å¦‚æœåœ¨ puttyã€Windows Terminal ä¸‹æ— è¾“å‡ºï¼Œæ¢ mintty è¯•è¯•
        curl -fsSL https://github.com/bitcrazed/24bit-color/raw/master/24-bit-color.sh |sh

    zsh è„šæœ¬

        for code ({000..255}) print -P -- "$code: %F{$code}æœ€å·¦ä¾§ä¸‰ä½æ•°å­—å³é¢œè‰²å€¼Text Color%f"

True color(24bit) ç»¼åˆæµ‹è¯• terminal-testdrive.sh

    æŠŠçœŸå½©è‰²å’Œå„ç§æ–‡å­—æ•ˆæœéƒ½æµ‹è¯•äº†ï¼Œå…¼å®¹æ€§å¥½ï¼Œåœ¨ minttyã€puttyã€Windows Terminal ä¸‹éƒ½å¯ä»¥æ­£å¸¸æ˜¾ç¤º

    éœ€è¦å…ˆå®‰è£… `apt install bc` æˆ–æ‰‹å·¥ä¿®æ”¹ä»£ç  `cols=24`

        # https://gist.github.com/hellricer/e514d9615d02838244d8de74d0ab18b3
            https://hellricer.github.io/2019/10/05/test-drive-your-terminal.html

        curl -fsSL https://gist.github.com/hellricer/e514d9615d02838244d8de74d0ab18b3/raw/7e5be20969b7274d64a550b9132fee5268cff2d8/terminal-testdrive.sh |sh

    ```sh
    #!/bin/sh

    echo "# 24-bit (true-color)"
    # based on: https://gist.github.com/XVilka/8346728
    term_cols="$(tput cols || echo 80)"
    cols=$(echo "2^((l($term_cols)/l(2))-1)" | bc -l 2> /dev/null)
    rows=$(( cols / 2 ))
    awk -v cols="$cols" -v rows="$rows" 'BEGIN{
        s="  ";
        m=cols+rows;
        for (row = 0; row<rows; row++) {
            for (col = 0; col<cols; col++) {
                i = row+col;
                r = 255-(i*255/m);
                g = (i*510/m);
                b = (i*255/m);
                if (g>255) g = 510-g;
                printf "\033[48;2;%d;%d;%dm", r,g,b;
                printf "\033[38;2;%d;%d;%dm", 255-r,255-g,255-b;
                printf "%s\033[0m", substr(s,(col+row)%2+1,1);
            }
            printf "\n";
        }
        printf "\n\n";
    }'

    echo "# text decorations"
    printf '\e[1mbold\e[22m\n'
    printf '\e[2mdim\e[22m\n'
    printf '\e[3mitalic\e[23m\n'
    printf '\e[4munderline\e[24m\n'
    printf '\e[4:1mthis is also underline\e[24m\n'
    printf '\e[21mdouble underline\e[24m\n'
    printf '\e[4:2mthis is also double underline\e[24m\n'
    printf '\e[4:3mcurly underline\e[24m\n'
    printf '\e[58;5;10;4mcolored underline\e[59;24m\n'
    printf '\e[5mblink\e[25m\n'
    printf '\e[7mreverse\e[27m\n'
    printf '\e[8minvisible\e[28m <- invisible (but copy-pasteable)\n'
    printf '\e[9mstrikethrough\e[29m\n'
    printf '\e[53moverline\e[55m\n'
    echo

    echo "# magic string (see https://en.wikipedia.org/wiki/Unicode#Web)"
    echo "Ã© Î” Ğ™ ×§ Ù… à¹— ã‚ å¶ è‘‰ ë§"
    echo

    echo "# emojis"
    echo "ğŸ˜ƒğŸ˜±ğŸ˜µ"
    echo

    echo "# right-to-left ('w' symbol should be at right side)"
    echo "×©×¨×”"
    echo

    echo "# sixel graphics"
    printf '\eP0;0;0q"1;1;64;64#0;2;0;0;0#1;2;100;100;100#1~{wo_!11?@FN^!34~^NB
    @?_ow{~$#0?BFN^!11~}wo_!34?_o{}~^NFB-#1!5~}{o_!12?BF^!25~^NB@??ow{!6~$#0!5?
    @BN^!12~{w_!25?_o{}~~NFB-#1!10~}w_!12?@BN^!15~^NFB@?_w{}!10~$#0!10?@F^!12~}
    {o_!15?_ow{}~^FB@-#1!14~}{o_!11?@BF^!7~^FB??_ow}!15~$#0!14?@BN^!11~}{w_!7?_
    w{~~^NF@-#1!18~}{wo!11?_r^FB@??ow}!20~$#0!18?@BFN!11~^K_w{}~~NF@-#1!23~M!4?
    _oWMF@!6?BN^!21~$#0!23?p!4~^Nfpw}!6~{o_-#1!18~^NB@?_ow{}~wo!12?@BFN!17~$#0!
    18?_o{}~^NFB@?FN!12~}{wo-#1!13~^NB@??_w{}!9~}{w_!12?BFN^!12~$#0!13?_o{}~~^F
    B@!9?@BF^!12~{wo_-#1!8~^NFB@?_w{}!19~{wo_!11?@BN^!8~$#0!8?_ow{}~^FB@!19?BFN
    ^!11~}{o_-#1!4~^NB@?_ow{!28~}{o_!12?BF^!4~$#0!4?_o{}~^NFB!28?@BN^!12~{w_-#1
    NB@???GM!38NMG!13?@BN$#0?KMNNNF@!38?@F!13NMK-\e\'

    ```

æˆ‘çš„æµ‹è¯•ç»“æœ

    mintty æ‰€æœ‰éªŒè¯æ¡ä»¶éƒ½å®Œç¾å‘ˆç°ã€‚

    putty å¯ä»¥é€šè¿‡çœŸå½©æµ‹è¯•ï¼Œä½†å¯¹å—çŠ¶å­—ç¬¦çš„æ¸²æŸ“æ–¹å¼æœ‰é—®é¢˜ï¼šzsh+powerlevel10k å‘½ä»¤æç¤ºç¬¦é¢œè‰²è¿‡æ¸¡æ˜æ˜¾æ–­è£‚ï¼Œtmux çŠ¶æ€æ é¢œè‰²ä¹Ÿå¦‚æ­¤ã€‚terminal-testdrive.sh æµ‹è¯•ä¸æ”¯æŒï¼šæ–‡å­—é—ªçƒã€sixel å›¾åƒã€‚

    Windows Terminal å¯ä»¥é€šè¿‡çœŸå½©æµ‹è¯•ï¼Œä½†å¯¹å—çŠ¶å­—ç¬¦çš„æ¸²æŸ“æ–¹å¼æœ‰é—®é¢˜ï¼šzsh+powerlevel10k å‘½ä»¤æç¤ºç¬¦é¢œè‰²è¿‡æ¸¡æ˜æ˜¾æ–­è£‚ï¼Œtmux çŠ¶æ€æ é¢œè‰²ä¹Ÿå¦‚æ­¤ã€‚terminal-testdrive.sh æµ‹è¯•ï¼šä¸æ”¯æŒ sixel å›¾åƒï¼Œå°‘äº†å‡ ä¸ªæ–‡å­—ä¿®é¥°æ•ˆæœã€‚

å¦‚æœè¦æµ‹è¯•åˆ·æ–°é€Ÿåº¦

    ```bash

    # çœ‹è°åˆ·çš„å¿« https://github.com/alacritty/alacritty/issues/289#issuecomment-340283908%29
    for i in {1..400000}; do
        echo -e '\r'
        echo -e '\033[0K\033[1mBold\033[0m \033[7mInvert\033[0m \033[4mUnderline\033[0m'
        echo -e '\033[0K\033[1m\033[7m\033[4mBold & Invert & Underline\033[0m'
        echo
        echo -e '\033[0K\033[31m Red \033[32m Green \033[33m Yellow \033[34m Blue \033[35m Magenta \033[36m Cyan \033[0m'
        echo -e '\033[0K\033[1m\033[4m\033[31m Red \033[32m Green \033[33m Yellow \033[34m Blue \033[35m Magenta \033[36m Cyan \033[0m'
        echo
        echo -e '\033[0K\033[41m Red \033[42m Green \033[43m Yellow \033[44m Blue \033[45m Magenta \033[46m Cyan \033[0m'
        echo -e '\033[0K\033[1m\033[4m\033[41m Red \033[42m Green \033[43m Yellow \033[44m Blue \033[45m Magenta \033[46m Cyan \033[0m'
        echo
        echo -e '\033[0K\033[30m\033[41m Red \033[42m Green \033[43m Yellow \033[44m Blue \033[45m Magenta \033[46m Cyan \033[0m'
        echo -e '\033[0K\033[30m\033[1m\033[4m\033[41m Red \033[42m Green \033[43m Yellow \033[44m Blue \033[45m Magenta \033[46m Cyan \033[0m'
    done

    ```

#### shellå†…ç½®å‘½ä»¤çš„é¢œè‰²æ–¹æ¡ˆ dir_colors

ç»ˆç«¯æ¨¡æ‹Ÿå™¨å®šä¹‰çš„é¢œè‰²æ–¹æ¡ˆï¼Œå½±å“çš„æ˜¯ shell ä¸‹ 16 ç§åŸºæœ¬é¢œè‰²çš„æ˜¾ç¤ºï¼Œå¦‚ lsã€grepã€systemctl ç­‰å‘½ä»¤è¾“å‡ºæ ‡å‡†çš„ 16 è‰²æ–‡å­—ä¿®é¥°ä»£ç ã€‚

ä½†å„å‘½ä»¤å¯¹è‡ªå·±çš„è¾“å‡ºä½¿ç”¨ä½•ç§é¢œè‰²ï¼Œæœ‰è‡ªå·±çš„æ–¹æ¡ˆï¼Œå¦‚ ls å‘½ä»¤å¯¹å­ç›®å½•æ˜¾ç¤ºè“è‰²ï¼Œå¯æ‰§è¡Œ .sh æ–‡ä»¶æ˜¾ç¤ºç»¿è‰²ï¼Œå¯¹ç‰¹å®šç±»å‹çš„æ–‡ä»¶ç”¨ä¸åŒçš„é¢œè‰²æ˜¾ç¤ºï¼Œéƒ½å¯ä»¥è®¾ç½®ä¸ºæ–¹æ¡ˆï¼šè¿™äº›å‘½ä»¤é€šè¿‡å˜é‡ $LS_COLORS è·å–é¢œè‰²å€¼ï¼Œç”±å‘½ä»¤æ‰€åœ¨çš„æœåŠ¡å™¨ç«¯çš„ dir_colors æ–‡ä»¶è®¾ç½®ï¼Œå‚è§ `man dir_colors`ã€‚å¦‚æœä½ å‘ç°ç™»å½•ä¸åŒçš„ Linux ä¸»æœºåï¼Œä½¿ç”¨ ls ç­‰å‘½ä»¤å¯¹ç‰¹å®šç±»å‹çš„æ–‡ä»¶æ˜¾ç¤ºé¢œè‰²æœ‰å·®åˆ«ï¼Œå°±æ˜¯ dir_colors æ–¹æ¡ˆä¸åŒå¯¼è‡´çš„ï¼Œå¹¶ä¸æ˜¯ä½ çš„ç»ˆç«¯æ¨¡æ‹Ÿå™¨è®¾ç½®çš„ 16 ç§åŸºæœ¬é¢œè‰²æœ‰é—®é¢˜ã€‚

    $ dircolors | tr ":" "\n"
    LS_COLORS='rs=0
    di=01;34
    ln=01;36
    mh=00
    pi=40;33
    ex=01;32
    *.tar=01;31
    *.tgz=01;31
    *.arc=01;31

dir_colors é¢œè‰²æ–¹æ¡ˆæ¨èä½¿ç”¨ Nord åŒ—æï¼Œå¯å½±å“ lsã€tree ç­‰å‘½ä»¤

    https://www.nordtheme.com/docs/ports/dircolors/type-support
        https://github.com/arcticicestudio/nord-dircolors

    curl -fsSLo ~/.dir_colors https://github.com/arcticicestudio/nord-dircolors/raw/develop/src/dir_colors

æ³¨æ„è¿™äº›é¢œè‰²æ–¹æ¡ˆè™½ç„¶ç»Ÿä¸€ï¼Œä½†æ•´ä½“ä»ç„¶å—ç»ˆç«¯æ¨¡æ‹Ÿå™¨å¯¹ 16 ç§åŸºæœ¬é¢œè‰²çš„è®¾ç½®æ§åˆ¶ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ç»ˆç«¯æ¨¡æ‹Ÿå™¨ä¸­ä½¿ç”¨é¢œè‰²æ–¹æ¡ˆï¼Œå¯ä»¥è¦†ç›– dir_colors ï¼Œæ¯”å¦‚ dir_colors å®šä¹‰ .tar æ–‡ä»¶ä¸ºçº¢è‰²ï¼Œä½†ç»ˆç«¯æ ¹æ® 16 ç§é¢œè‰²æ–¹æ¡ˆæ¥å‘ˆç°å…·ä½“ä½•ç§çº¢è‰²ã€‚

æœ‰äº›è½¯ä»¶æ”¯æŒè‡ªå®šä¹‰é¢œè‰²æ–¹æ¡ˆï¼Œè‰²å½©æ•ˆæœè¶…è¶Šç»ˆç«¯æ¨¡æ‹Ÿå™¨è®¾ç½®ï¼š

    æ¯”å¦‚ï¼Œtmuxã€vim æœ‰è‡ªå·±çš„è‰²å½©æ–¹æ¡ˆè®¾ç½®ã€‚

    è¦å¼€å¯è¿™äº›è½¯ä»¶è‡ªå·±çš„ 256color å’Œ RGB çœŸå½©è‰²ä¸¤ä¸ªé€‰é¡¹ï¼Œæœ€å¥½ä¸¤ä¸ªé€‰é¡¹éƒ½å¼€å¯ï¼Œå¦åˆ™åœ¨ä½¿ç”¨è¿™ä¸¤ä¸ªè½¯ä»¶æ—¶ï¼Œè¿˜æ˜¯æ— æ³•å‘ˆç°çœŸå½©è‰²ã€‚

è¯¦è§ä¸‹é¢ç« èŠ‚ä¸­çš„å„è½¯ä»¶è‡ªå·±çš„é…ç½®æ–‡ä»¶æ ·ä¾‹ï¼Œå¯å‚è€ƒ <https://lotabout.me/2018/true-color-for-tmux-and-vim/>ã€‚

è€Œä¸”ï¼ŒåŸºäºè·Ÿå‰é¢ç« èŠ‚æ‰€è¿°åŒæ ·çš„åŸå› ï¼Œä¸è¦ä½¿ç”¨ tmuxã€vim é»˜è®¤çš„ä¸»é¢˜é¢œè‰²ï¼Œåº”è¯¥è‡ªå®šä¹‰è®¾ç½®ï¼Œé€‰ç”¨é¢œè‰²æ›´ä¸°å¯Œçš„å…¶å®ƒä¸»é¢˜ï¼Œè¿™æ ·æ‰èƒ½çœ‹å‡ºæ¥çœŸå½©æ•ˆæœã€‚

#### base16 é¢œè‰²æ–¹æ¡ˆ

    https://github.com/chriskempson/base16

base16 æ˜¯è¯­æ³•é«˜äº®æ—¶çš„å®šä¹‰ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥ç›´æ¥ç»™ç»ˆç«¯æ¨¡æ‹Ÿå™¨çš„16è‰²æ–¹æ¡ˆä½¿ç”¨

    # https://github.com/chriskempson/base16/blob/main/styling.md
    base00 - Default Background
    base01 - Lighter Background (Used for status bars, line number and folding marks)
    base02 - Selection Background
    base03 - Comments, Invisibles, Line Highlighting
    base04 - Dark Foreground (Used for status bars)
    base05 - Default Foreground, Caret, Delimiters, Operators
    base06 - Light Foreground (Not often used)
    base07 - Light Background (Not often used)
    base08 - Variables, XML Tags, Markup Link Text, Markup Lists, Diff Deleted
    base09 - Integers, Boolean, Constants, XML Attributes, Markup Link Url
    base0A - Classes, Markup Bold, Search Text Background
    base0B - Strings, Inherited Class, Markup Code, Diff Inserted
    base0C - Support, Regular Expressions, Escape Characters, Markup Quotes
    base0D - Functions, Methods, Attribute IDs, Headings
    base0E - Keywords, Storage, Selector, Markup Italic, Diff Changed
    base0F - Deprecated, Opening/Closing Embedded Language Tags, e.g. <?php ?>

#### é…è‰²æ–¹æ¡ˆï¼šæ”¯æŒç»ˆç«¯æ¨¡æ‹Ÿå™¨å’Œå‘½ä»¤è¡Œè½¯ä»¶çš„ä¸»é¢˜ Nord theme ç­‰

å¼ºçƒˆæ¨è Nord themeï¼Œæ”¯æŒçš„è½¯ä»¶ä¼—å¤šï¼Œè¯¦è§å„è½¯ä»¶ä»‹ç»çš„ç¾åŒ–ç›¸å…³ç« èŠ‚å³å¯ã€‚è‡³å°‘ä½¿ç”¨åœ¨ç« èŠ‚ [å‘½ä»¤è¡Œè½¯ä»¶æ”¯æŒçœŸå½©è‰² dir_colors]ã€[mintty ç¾åŒ–]ã€[vim æ‰©å±•æ’ä»¶]çš„é¢œè‰²ä¸»é¢˜ã€[Linux æ¡Œé¢ä¸‹çš„ç»ˆç«¯æ¨¡æ‹Ÿå™¨]çš„ä¸»é¢˜è®¾ç½®ã€‚

Nord theme

    https://www.nordtheme.com/ports/
        https://github.com/arcticicestudio/

Dracula theme

    https://draculatheme.com/
        https://github.com/dracula/dracula-theme/tree/master/themes

æ”¯æŒ  Gnome Terminal, Pantheon Terminal, Tilix, and XFCE4 Terminal çš„å½©è‰²æ–¹æ¡ˆ

    https://gogh-co.github.io/Gogh/

å¯ä»¥ä½¿ç”¨ pywal è®©ç»ˆç«¯çš„æ–‡å­—é¢œè‰²è‡ªåŠ¨é€‚é…ä½ çš„æ¡Œé¢å›¾ç‰‡ï¼Œè¯¦è§ç« èŠ‚ [æ ¹æ®å›¾ç‰‡ç”Ÿæˆç›¸åŒé£æ ¼çš„é…è‰²æ–¹æ¡ˆ]ã€‚

é¢œè‰²æ–¹æ¡ˆï¼š

10è¿›åˆ¶

    # https://github.com/arcticicestudio/nord-mintty/blob/develop/src/nord.minttyrc
    # https://github.com/arcticicestudio/nord-konsole/blob/develop/src/nord.colorscheme
    BackgroundColour=46,52,64
    ForegroundColour=216,222,233
    CursorColour=216,222,233
    Black=59,66,82
    BoldBlack=76,86,106
    Red=191,97,106
    BoldRed=191,97,106
    Green=163,190,140
    BoldGreen=163,190,140
    Yellow=235,203,139
    BoldYellow=235,203,139
    Blue=129,161,193
    BoldBlue=129,161,193
    Magenta=180,142,173
    BoldMagenta=180,142,173
    Cyan=136,192,208
    BoldCyan=143,188,187
    White=229,233,240
    BoldWhite=236,239,244

16è¿›åˆ¶

    # https://github.com/arcticicestudio/nord-termite/blob/develop/src/config
    # https://github.com/arcticicestudio/nord-terminator/blob/develop/src/config

    [colors]
    cursor = #d8dee9
    cursor_foreground = #2e3440

    foreground = #d8dee9
    foreground_bold = #d8dee9
    background = #2e3440
    æ„Ÿè§‰å¤ªäº®å¯ä»¥æ”¹ä¸º #282C34ï¼Œå¯¹åº” RGB=40,44,52

    highlight = #4c566a

    è¿™é‡Œæ˜¯æ ‡å‡†çš„8ç§é¢œè‰²
    color0  = #3b4252
    color1  = #bf616a
    color2  = #a3be8c
    color3  = #ebcb8b
    color4  = #81a1c1
    color5  = #b48ead
    color6  = #88c0d0
    color7  = #e5e9f0

    è¿™é‡Œæ˜¯ä¸Šé¢8ç§é¢œè‰²å¯¹åº”çš„ Bold æˆ– bright
    color8  = #4c566a
    color9  = #bf616a
    color10 = #a3be8c
    color11 = #ebcb8b
    color12 = #81a1c1
    color13 = #b48ead
    color14 = #8fbcbb
    color15 = #eceff4

ä¸‰ç§æ¨¡å¼

    # https://github.com/arcticicestudio/nord-alacritty/blob/main/src/nord.yml

    colors:
    primary:
        background: '#2e3440'
        foreground: '#d8dee9'
        dim_foreground: '#a5abb6'
    cursor:
        text: '#2e3440'
        cursor: '#d8dee9'
    vi_mode_cursor:
        text: '#2e3440'
        cursor: '#d8dee9'
    selection:
        text: CellForeground
        background: '#4c566a'
    search:
        matches:
        foreground: CellBackground
        background: '#88c0d0'
        bar:
        background: '#434c5e'
        foreground: '#d8dee9'

    è¿™é‡Œæ˜¯æ ‡å‡†çš„8ç§é¢œè‰²
    normal:
        black: '#3b4252'
        red: '#bf616a'
        green: '#a3be8c'
        yellow: '#ebcb8b'
        blue: '#81a1c1'
        magenta: '#b48ead'
        cyan: '#88c0d0'
        white: '#e5e9f0'

    è¿™é‡Œæ˜¯ä¸Šé¢8ç§é¢œè‰²å¯¹åº”çš„ Bold æˆ– bright
    bright:
        black: '#4c566a'
        red: '#bf616a'
        green: '#a3be8c'
        yellow: '#ebcb8b'
        blue: '#81a1c1'
        magenta: '#b48ead'
        cyan: '#8fbcbb'
        white: '#eceff4'

    è¿™é‡Œæ˜¯ä¸€ä¸ªæš—æ·¡é£æ ¼çš„ nord themeï¼Œå…¶å®ƒåœ°æ–¹æœªè§
    dim:
        black: '#373e4d'
        red: '#94545d'
        green: '#809575'
        yellow: '#b29e75'
        blue: '#68809a'
        magenta: '#8c738c'
        cyan: '#6d96a5'
        white: '#aeb3bb'

##### æ ¹æ®å›¾ç‰‡ç”Ÿæˆç›¸åŒé£æ ¼çš„é…è‰²æ–¹æ¡ˆ

1ã€ pywal ä¸€æ¡å‘½ä»¤å®ç°æ ¹æ®æŒ‡å®šå›¾ç‰‡è‡ªåŠ¨è°ƒæ•´ä½ çš„ç»ˆç«¯æ¨¡æ‹Ÿå™¨çš„é¢œè‰²æ–¹æ¡ˆ

    https://itsfoss.com/pywal/

æ”¯æŒå¤šç§ç»ˆç«¯æ¨¡æ‹Ÿå™¨ï¼Œæ”¯æŒå¤šç§é£æ ¼å’Œä¸»é¢˜ï¼Œå½“å‰æ‰“å¼€çš„ç»ˆç«¯å³æ—¶ç”Ÿæ•ˆï¼Œæå…¶æ–¹ä¾¿

    # é»˜è®¤ä½ çš„Linuxè‡ªå¸¦ python3
    $ pip install pywal

    $ wal -i /path/to/wallpaper_file

åªæ˜¯åœ¨æˆ‘çš„ Fedora 38 ä¸‹æ²¡èƒ½è‡ªåŠ¨è®¾ç½®ä¸ºæ¡Œé¢èƒŒæ™¯ã€‚

ä½¿æ–°æ‰“å¼€çš„ç»ˆç«¯ä¹Ÿå¯ä»¥ç”Ÿæ•ˆï¼ŒæŠŠå¦‚ä¸‹è¯­å¥åŠ å…¥ .bashrc ç™»å½•è„šæœ¬å³å¯ï¼š

```bash
# Import colorscheme from 'wal' asynchronously
# &   # Run the process in the background.
# ( ) # Hide shell job control messages.
(cat ~/.cache/wal/sequences &)

# Alternative (blocks terminal for 0-3ms)
cat ~/.cache/wal/sequences

# To add support for TTYs this line can be optionally added.
source ~/.cache/wal/colors-tty.sh
```

è®¡ç®—æœºé‡å¯åä½¿ç”¨ä¸Šæ¬¡çš„é¢œè‰²æ–¹æ¡ˆ

    wal -R

2ã€schemer2 å¯ä»¥ç”¨è¯»å–æŒ‡å®šçš„å›¾ç‰‡ï¼Œç”Ÿæˆè¯¥å›¾ç‰‡ç”¨è‰²é£æ ¼çš„ base16 é…è‰²æ–¹æ¡ˆ

    https://github.com/thefryscorer/schemer2

    # æ™®é€šä½¿ç”¨ç”Ÿæˆ colors å³å¯ï¼Œæ ¼å¼å¯¹åº”ä¸Šé¢çš„ base16 åœ¨è¯­æ³•é«˜äº®æ—¶çš„å®šä¹‰
    schemer2 -format img::colors -in 111dark2.jpg -out colors.txt

ç»™ç»ˆç«¯æ¨¡æ‹Ÿå™¨ä½¿ç”¨ï¼Œè½¬æ¢ä¸º mintty çš„é¢œè‰²æ–¹æ¡ˆä½¿ç”¨å¦‚ä¸‹ python ä»£ç 

```python

# https://github.com/thefryscorer/schemer2
#   schemer2 -format img::colors -in 111dark2.jpg -out colors.txt
#   python3 colors_to_mintty.py
# æŸ¥çœ‹æ•´ä½“æ•ˆæœ curl -fsSL https://github.com/mintty/utils/raw/master/colourscheme |bash

mintty_template=(
    'Black=',
    'BoldBlack=',
    'Red=',
    'BoldRed=',
    'Green=',
    'BoldGreen=',
    'Yellow=',
    'BoldYellow=',
    'Blue=',
    'BoldBlue=',
    'Magenta=',
    'BoldMagenta=',
    'Cyan=',
    'BoldCyan=',
    'White=',
    'BoldWhite='
)

with open('./colors.txt', encoding="utf-8") as f:
    colorStringHex = f.readlines()

print('\nPut below into your .minttyrc file:\n')

for m in range(16):

    # From https://stackoverflow.com/questions/29643352/converting-hex-to-rgb-value-in-python
    rgb = tuple(str(int(colorStringHex[m].strip('#')[i:i+2], 16)) for i in (0, 2, 4))
    #print(rgb)

    mintty_rgb = mintty_template[m] + ','.join(rgb)
    print(mintty_rgb)

print('''\n
Then restart mintty to take effect, you can run

    `curl -fsSL https://github.com/mintty/utils/raw/master/colourscheme |bash`

to see the color scheme.''')

```

### bash å‘½ä»¤æç¤ºç¬¦ç¾åŒ–

bash ä¸‹æ–‡å­—æ˜¾ç¤ºå½©è‰²æœ‰ä¾èµ–ï¼Œè¯¦è§ç« èŠ‚ [ç»ˆç«¯æ¨¡æ‹Ÿå™¨å’Œè½¯ä»¶çš„çœŸå½©è‰²è®¾ç½®]ã€‚

ä½¿ç”¨ powerline å¯å®ç°åœ¨å‘½ä»¤æç¤ºç¬¦æ˜¾ç¤ºå„ç§çŠ¶æ€ï¼Œå‚è§ç« èŠ‚ [çŠ¶æ€æ å·¥å…· powerline]

    # å‘è¡Œç‰ˆå®‰è£…çš„åœ¨ /usr/share ä¸‹ï¼Œå¦‚æœæ˜¯ pip å®‰è£…çš„ç”¨ `pip show powerline-status` æŸ¥çœ‹è·¯å¾„
    source /usr/share/powerline/bindings/bash/powerline.sh

bash å†…ç½®å‘½ä»¤å’Œå¿«æ·é”®è§ (shellcmd.md) çš„ç›¸å…³ç« èŠ‚ã€‚

#### bash å‘½ä»¤è¡Œæç¤ºç¬¦æ˜¾ç¤º python ç¯å¢ƒå

è‡ªè¡Œå®ç°çš„åœ¨å‘½ä»¤è¡Œæç¤ºç¬¦æ˜¾ç¤º conda/virtualenv ç¯å¢ƒåï¼Œè§ [bash_profile.sh] ä¸­åŒè¡Œå½©è‰²å‘½ä»¤è¡Œæç¤ºç¬¦ï¼Œæ˜¾ç¤ºå½“å‰è·¯å¾„ã€gitåˆ†æ”¯ã€pythonç¯å¢ƒåéƒ¨åˆ†çš„ä»£ç æ®µè½ã€‚

    https://zhuanlan.zhihu.com/p/572716915

Anaconda åœ¨å®‰è£…æ—¶ä¼šé…ç½®ä½ çš„ bashï¼Œå½“ä½ è¿›å…¥å‘½ä»¤è¡Œæç¤ºç¬¦å³è‡ªåŠ¨æ‰§è¡Œ `conda activate` åˆ°é»˜è®¤çš„[base]ç¯å¢ƒï¼Œå¯ä»¥å…³æ‰è¿™ä¸ªç‰¹æ€§ï¼š

    $ conda config --set auto_activate_base false

    ä»¥åè¿›å…¥ç¯å¢ƒæ‰‹åŠ¨æ‰§è¡Œ `conda activate` å³å¯ã€‚

ä½¿ç”¨ conda å‘½ä»¤æ¿€æ´»ç¯å¢ƒæ—¶ï¼Œé»˜è®¤ä¼šä¿®æ”¹å‘½ä»¤è¡Œæç¤ºç¬¦ï¼Œæ¯”è¾ƒä¸‘ï¼ŒWindows cmd ä¸‹è¿˜å¥½ï¼Œåªæ˜¯å¢åŠ ä¸ªå‰ç¼€ (base) C:\>ï¼Œåœ¨ mintty bash ä¸‹æ˜¯ä¸ªä¸¤è¡Œçš„æ€ªç‰©ï¼Œè€Œä¸”é»˜è®¤ä¸æ”¯æŒ utf-8ã€‚

    ä»…ä¾›å‚è€ƒï¼Œbash ä¸‹ä½¿ç”¨ conda è‡ªå®šä¹‰ PS1 å˜é‡çš„å°è¯•è¿‡ç¨‹ï¼š

        bash ä½¿ç”¨ conda è‡ªå®šä¹‰ PS1

            $ conda env config vars set PS1='($CONDA_DEFAULT_ENV)[\u@\h:\W]$'

        è¿™æ ·è®¾ç½®åï¼Œè¿›å…¥ bash åä½¿ç”¨ conda çš„æ•ˆæœå¦‚ä¸‹ï¼š

        1ã€å¦‚æœå…ˆæ‰§è¡Œ conda activateï¼Œä¼šå¯¼è‡´æ¿€æ´»å…¶å®ƒç¯å¢ƒçš„åµŒå¥—æ˜¾ç¤º

            â”Œâ”€[your_bash_PS1]
            â””â”€â”€$ conda activate
            (base)[user_name@host_name:current_dir]$

        å†æ¿€æ´»å…¶å®ƒç¯å¢ƒï¼Œä¼šæœ‰ä¿©ç¯å¢ƒå

            (base)[user_name@host_name:current_dir]$conda activate p37
            (p37) (p37)[user_name@host_name:current_dir]$

        é€€å‡ºç¯å¢ƒæ—¶ä¹Ÿéœ€è¦æ‰§è¡Œä¸¤é conda deactivate

        2ã€å¦‚æœä¸å…ˆæ‰§è¡Œ conda activate ï¼Œç›´æ¥æ¿€æ´»æŒ‡å®šçš„ç¯å¢ƒï¼Œè¿™æ ·å‰ç¼€äº†ä¸€ä¸ªç¯å¢ƒåï¼Œä½†æ˜¯æ¢è¡Œäº†ã€‚ã€‚ã€‚

            â”Œâ”€[your_bash_PS1]
            â””â”€â”€$ conda activate p37
            (p37)
            ï¿½ï¿½ï¿½ï¿½[16:32:37 user_name@host_name:current_dir]
            ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½$

        3ã€å¤ªä¸‘äº†ï¼Œè¿˜æ˜¯å–æ¶ˆ conda è®¾ç½®çš„å‘½ä»¤è¡Œæç¤ºç¬¦å§

            # éœ€è¦è¿›å…¥ conda ç¯å¢ƒå†æ‰§è¡Œ
            conda env config vars unset PS1

æœ€ç»ˆæ–¹æ¡ˆï¼šç”¨ bash è‡ªå®šä¹‰ PS1 å˜é‡æ˜¾ç¤º conda ç¯å¢ƒå

1ã€æŠŠ conda çš„è‡ªå®šä¹‰ PS1 å˜é‡å…³æ‰

    è‡ªå®šä¹‰ conda çš„ç¯å¢ƒåæ ¼å¼ï¼Œéœ€è¦å…ˆä¿®æ”¹ conda çš„é»˜è®¤è®¾ç½®ï¼Œä¸å…è®¸ conda å‘½ä»¤ä¿®æ”¹ PS1 å˜é‡

    åœ¨ Anaconda cmd å‘½ä»¤è¡Œä¸‹æ‰§è¡Œï¼ˆæˆ–è€…cmdä¸‹æ‰‹å·¥æ¿€æ´»baseç¯å¢ƒï¼Œæ‰§è¡Œå‘½ä»¤ `conda activate`ï¼‰åšå¦‚ä¸‹çš„è®¾ç½®ï¼Œåªåšä¸€æ¬¡å³å¯

        è®© Anaconda å¯ä»¥ hook åˆ° .bash_profile

            $ conda init bash

            ä¼šè‡ªåŠ¨åœ¨ ~/.bashrc æˆ– .bash_profile.sh æ–‡ä»¶æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š
                eval "$(/home/uu/anaconda3/bin/conda shell.bash hook)"

        ç¦æ­¢ conda ä¿®æ”¹å‘½ä»¤è¡Œæç¤ºç¬¦ï¼Œä»¥é˜²æ­¢ä¿®æ”¹ PS1 å˜é‡

            $ conda config --set changeps1 False

        ç¦æ­¢ conda è¿›å…¥å‘½ä»¤è¡Œæç¤ºç¬¦æ—¶è‡ªåŠ¨æ¿€æ´»baseç¯å¢ƒï¼Œä»¥æ–¹ä¾¿æ£€æµ‹ $CONDA_DEFAULT_ENV å˜é‡

            $ conda config --set auto_activate_base false

    åœ¨ ~/.condarc æ–‡ä»¶ä¸­å¯ä»¥çœ‹åˆ°è®¾ç½®ç”Ÿæ•ˆï¼š

        changeps1: false
        auto_activate_base: false

    è¿™æ ·åœ¨ç”¨æˆ·ç™»å½•è¿›å…¥bashç¯å¢ƒåï¼Œæ‰§è¡Œ `conda activate` åè¯»å– $CONDA_DEFAULT_ENV å˜é‡å³å¯è·å–åˆ°å½“å‰ç¯å¢ƒåã€‚

2ã€virtualenv çš„å¤„ç†ç±»ä¼¼ conda

    å…ˆç¦æ­¢ virtualenv ç¯å¢ƒä¸­çš„ activate å‘½ä»¤åœ¨ PS1 å˜é‡æ·»åŠ ç¯å¢ƒåç§°

        export VIRTUAL_ENV_DISABLE_PROMPT=1

    è¿™æ ·åœ¨ç”¨æˆ·ç™»å½•è¿›å…¥bashç¯å¢ƒåï¼Œæ‰§è¡Œ `source activate` åè¯»å– $VIRTUAL_ENV å˜é‡å³å¯è·å–åˆ°å½“å‰ç¯å¢ƒåã€‚

3ã€åœ¨ PS1 å˜é‡çš„è®¾ç½®ä»£ç ä¸­è¯»å–äºŒè€…çš„ç¯å¢ƒåå˜é‡ï¼Œå…·ä½“å®ç°è¯¦è§ [bash_profile.sh] ä¸­çš„ PS1conda-env-name å’Œ PS1virtualenv-env-name ä»£ç æ®µè½ã€‚

### çŠ¶æ€æ å·¥å…· powerline

bash ä¸‹æ–‡å­—æ˜¾ç¤ºå½©è‰²æœ‰ä¾èµ–ï¼Œè¯¦è§ç« èŠ‚ [ç»ˆç«¯æ¨¡æ‹Ÿå™¨å’Œè½¯ä»¶çš„çœŸå½©è‰²è®¾ç½®]ã€‚

Powerline æœ€åˆæ˜¯ä¸€æ¬¾ Vim statusline çš„æ’ä»¶ï¼Œåæ¥å‘å±•åˆ°æ”¯æŒ bashã€vimã€tmux ç­‰ä¼—å¤šå·¥å…·åŠæ’ä»¶ï¼Œå®‰è£… powerline åéƒ½å¯é€‚é…è¿›è¡ŒçŠ¶æ€æ æ˜¾ç¤ºã€‚

    https://github.com/powerline/powerline/

    é…ç½®è¯´æ˜ https://powerline.readthedocs.io/en/master/configuration/reference.html

powerline æœ€å¤§çš„ä¼˜ç‚¹æ˜¯å®ƒä½¿ç”¨å›¾æ ‡å­—ä½“å›¾å½¢åŒ–çš„æ˜¾ç¤ºæ–‡ä»¶å¤¹ã€ç”µæ± ã€gitçŠ¶æ€ã€è¿›åº¦ç­‰ï¼Œæ’ä»¶åˆ¶åº¦éå¸¸çµæ´»ã€‚è¿™äº›å­—ä½“éœ€è¦å•ç‹¬å®‰è£…ï¼Œè¯¦è§ç« èŠ‚[å›¾æ ‡å­—ä½“]ã€‚

powerline çš„ç¼ºç‚¹æ˜¯å®ƒçš„ä»£ç  python2ã€3 æ··æ‚ï¼Œå®‰è£…å’Œä½¿ç”¨éƒ½å¾ˆéš¾é…ç½®ï¼Œæ‰€ä»¥ç°åœ¨æœ‰äº›æ’ä»¶ä¸ä½¿ç”¨å®ƒäº†ã€‚

æœ€ç®€å•çš„å®‰è£…æ–¹æ³•æ˜¯ç”¨å‘è¡Œç‰ˆè‡ªå¸¦çš„ï¼Œä¸€æ­¥åˆ°ä½ï¼Œé»˜è®¤çš„å®‰è£…åˆ° /usr/share/powerline/ ç›®å½•ä¸‹äº†

    $ sudo apt install powerline

æ‰‹å·¥å®‰è£…æœ€æ–°ç‰ˆï¼Œéœ€è¦å…ˆç¡®å®šä½ å½“å‰æ“ä½œç³»ç»Ÿçš„å‘½ä»¤ `python` æŒ‡å‘çš„æ˜¯ python2 è¿˜æ˜¯ python3ï¼Œæˆ‘çš„ Debian 10 é»˜è®¤æ˜¯ python2ã€‚å¦‚æœä» github å®‰è£…æœ€æ–°ç‰ˆçš„ powerline åªæ”¯æŒ python3ï¼Œæ‰€ä»¥å¾—æ”¹è®¾ç½®

    # https://askubuntu.com/questions/283908/how-can-i-install-and-use-powerline-plugin
    # https://powerline.readthedocs.io/en/latest/installation.html
    #
    # æœ€å¥½åˆ«ç”¨pipå®‰è£…ï¼Œæˆ‘æŠ˜è…¾äº†ä¸€ä¸Šåˆéƒ½æä¸å®šæœ€ç»ˆèµ·æ•ˆçš„è®¾ç½®
    # https://powerline.readthedocs.io/en/latest/installation.html
    # pip install powerline-status è¿™ä¸ªæ˜¯python2çš„ä¸€å †å‘
    # python3 -m pip install --user git+https://github.com/powerline/powerline
    #

å®‰è£…åæœ‰ä¸ªåå°è¿›ç¨‹

    # ç”± systemd è°ƒåº¦ç®¡ç† /etc/systemd/user/default.target.wants/powerline-daemon.service
    $ ps -ef|grep powerline
    00:00:00 /usr/bin/python3 /usr/bin/powerline-daemon --foreground

    TODO: ç ”ç©¶ä¸‹ç”¨ python å®ç°çš„ select()

ä½ ä½¿ç”¨çš„ç»ˆç«¯å·¥å…·çš„ Terminal ç›¸å…³å‚æ•°è®¾ç½®ä¸­è®¾ç½® xterm-256colorï¼Œé˜²æ­¢ç”¨æˆ·ç™»å½•è„šæœ¬æœªè®¾ç½®å˜é‡ $TERMï¼Œä»¥ä¿è¯å‘½ä»¤è¡Œæ˜¾ç¤ºçš„é¢œè‰²æ›´ä¸°å¯Œ

    # æ˜¾å¼è®¾ç½®ç»ˆç«¯å¯ç”¨256colorï¼Œé˜²æ­¢ç»ˆç«¯å·¥å…·æœªè®¾ç½®ã€‚è‹¥ç»ˆç«¯å·¥å…·èƒ½å¼€å¯é€æ˜é€‰é¡¹ï¼Œåˆ™æ˜¾ç¤ºçš„æ•ˆæœæ›´å¥½
    export TERM="xterm-256color"

#### ä½¿ç”¨ powerline-config å‘½ä»¤è¡Œå®‰è£…ä¸ºå„è½¯ä»¶çš„çŠ¶æ€æ æ’ä»¶

    $ powerline-config -h
    usage: powerline-config [-h] [-p PATH] {tmux,shell} ...

    Script used to obtain powerline configuration.

    positional arguments:
    {tmux,shell}
        tmux                Tmux-specific commands
        shell               Shell-specific commands

tmux:

    $ powerline-config tmux

å…¶å®ƒçš„shellï¼Œæˆ‘æ²¡å¼„å‡ºæ¥æ•ˆæœå‘¢ï¼Ÿ

    $ powerline-config shell -s bash uses prompt

    $ powerline-config shell -s zsh uses prompt

#### æ‰‹å·¥é…ç½®å„è½¯ä»¶çš„ç»‘å®š

å…ˆæŸ¥çœ‹ä½ å®‰è£… powerline çš„ä½ç½®ï¼Œæ‰¾åˆ°bindingsç›®å½•

    # å¦‚æœæ˜¯ pip å®‰è£…çš„æŸ¥çœ‹è·¯å¾„ç”¨ pip show powerline-status
    . /usr/lib/python3.7/site-packages/powerline/bindings/bash/powerline.sh

    # å¦‚æœæ˜¯ç”¨ apt å®‰è£…çš„ powerline
    $ ls /usr/share/powerline/bindings
    awesome  bar  bash  fish  i3  lemonbar  qtile  rc  shell  tcsh  tmux  zsh

ç„¶ååœ¨å„è½¯ä»¶çš„é…ç½®æ–‡ä»¶ä¸­è®¾ç½®æ’ä»¶ï¼ŒæŒ‡å‘è¿™ä¸ªbindingsç›®å½•ä¸‹çš„è„šæœ¬å³å¯ï¼Œè¯¦è§å„è½¯ä»¶çš„è¯´æ˜ã€‚

bash

    source /usr/share/powerline/bindings/bash/powerline.sh

zsh:

    source /usr/share/powerline/bindings/zsh/powerline.zsh

#### å®šåˆ¶ powerline çŠ¶æ€æ æ˜¾ç¤ºçš„æ®µSegment

ç¼–è¾‘æ–‡ä»¶

    # å¦‚æœæ˜¯ pip å®‰è£…çš„æŸ¥çœ‹è·¯å¾„ç”¨ pip show powerline-status
    /usr/share/powerline/config_files/themes/ç›¸å…³è½¯ä»¶å/xxx.json

æ›¿æ¢è‡ªå·±å–œæ¬¢çš„å‡½æ•°å³å¯

    å®˜æ–¹å‡½æ•°è¯´æ˜ https://powerline.readthedocs.io/en/master/configuration/segments.html

æƒ³è‡ªå·±åšä¸ªçŠ¶æ€æ å·¥å…·ï¼Œå‚è€ƒä¸‹è¿™ä¸ª

    https://github.com/agnoster/agnoster-zsh-theme

#### ç«å“ starship

starship é€šç”¨çš„çŠ¶æ€æ å·¥å…·ï¼Œæ”¯æŒ bashã€zshã€PowerShellã€cmd ç­‰ shell

    https://starship.rs/zh-CN/
        https://github.com/starship/starship

    https://sspai.com/post/72888

zsh ä¸‹æ¨èä½¿ç”¨ powerlevle10kï¼Œè¿™ä¸ªçŠ¶æ€æ å·¥å…·çš„å…¼å®¹æ€§å’Œæ˜¾ç¤ºæ•ˆæœç›´æ¥èµ·é£ï¼Œè§ç« èŠ‚ [æ¨èä¸»é¢˜powerlevel10k]ã€‚

### å›¾æ ‡å­—ä½“

    https://juejin.cn/post/6844904054322102285

    Font Awesome å›¾æ ‡å­—ä½“å·¥å…· ç»™å­—ä½“æ·»åŠ å›¾æ ‡çš„å·¥å…·

        https://fontawesome.com/v5/cheatsheet

    æ— å›¾æ ‡å­—ä½“çš„æ˜¾ç¤ºæ•ˆæœï¼Œåœ¨è¿™é‡ŒæŸ¥çœ‹

        https://coding-fonts.pages.dev/fonts/fira-code/

        https://www.programmingfonts.org/#meslo

ä½œä¸ºç¨‹åºå‘˜ï¼Œä½¿ç”¨ç»ˆç«¯æ¨¡æ‹Ÿå™¨è·Ÿå‘½ä»¤è¡Œæ‰“äº¤é“ï¼Œè®¾ç½®ä¸€ä¸ªèµå¿ƒæ‚¦ç›®çš„å‘½ä»¤è¡Œæç¤ºç¬¦ bash prompt æˆ– vimã€tmux çš„çŠ¶æ€æ ä¸»é¢˜å°±å¾ˆæœ‰å¿…è¦äº†ï¼Œä¸€èˆ¬è¿™äº›æ¼‚äº®çš„ä¸»é¢˜éƒ½ä¼šç”¨åˆ°ä¸€äº›å›¾æ ‡å­—ç¬¦ï¼ˆglyphsï¼‰ï¼Œæ¯”å¦‚ pythone ç¯å¢ƒçš„å°è›‡ï¼Œç³»ç»Ÿæ¸©åº¦çš„æ¸©åº¦è®¡ç­‰ã€‚

è€Œä¸»æµæ“ä½œç³»ç»Ÿï¼ˆWindows/Linuxï¼‰ä¸­å†…ç½®çš„æ™®é€šå­—ä½“ï¼Œå¾ˆå¤šç‰¹æ®Šå­—ç¬¦ä¸æ”¯æŒå¯¼è‡´æ˜¾ç¤ºä¸æ­£ç¡®ï¼Œè¿™ä¹Ÿæ˜¯å¾ˆå¤šäººåœ¨å®‰è£…ä¸€äº›ä¸»é¢˜åï¼Œæ˜¾ç¤ºæ•ˆæœä¸ç†æƒ³çš„åŸå› ã€‚

æ‰€ä»¥ï¼Œç¼–ç¨‹çˆ±å¥½è€…è‡ªè¡Œç»™æµè¡Œçš„å­—ä½“æ‰“è¡¥ä¸ï¼Œè¡¥é½äº†å›¾æ ‡å­—ç¬¦ï¼ˆglyphsï¼‰ï¼Œç§°ä¸º patch å­—ä½“ã€‚

æœ€æµè¡Œçš„æœ‰ Powerline fonts æˆ–è€… Nerd fonts è¿™äº›å­—ä½“é›†ï¼Œä»–ä»¬å¯¹å¤§é‡çš„æµè¡Œå­—ä½“ï¼ˆå°¤å…¶æ˜¯ç¼–ç¨‹ç”¨çš„ç­‰å®½ç±»ï¼‰æ‰“äº† patchï¼Œæ–°å¢å¾ˆå¤šå›¾æ ‡å­—ç¬¦ã€‚

åªæœ‰ä½ çš„æ“ä½œç³»ç»Ÿå®‰è£…äº†è¿™äº›è¡¥ä¸å­—ä½“ï¼Œç„¶åè®¾ç½®ä½ çš„ç»ˆç«¯æ¨¡æ‹Ÿå™¨ç¨‹åºä½¿ç”¨è¯¥è¡¥ä¸å­—ä½“ï¼Œé‚£äº›æ¼‚äº®çš„ä¸»é¢˜æ•ˆæœæ‰ä¼šå®Œç¾å‘ˆç°å‡ºæ¥ã€‚

è¡¥ä¸å­—ä½“è¦å®‰è£…åˆ°ä½ æœ¬åœ°ä½¿ç”¨çš„è®¡ç®—æœºä¸Šï¼Œç„¶åè®¾ç½®ä½ çš„ç»ˆç«¯æ¨¡æ‹Ÿå™¨æˆ–ç¼–è¾‘å™¨ä½¿ç”¨è¯¥å­—ä½“

    ä¸è¦æŠŠå­—ä½“å®‰è£…åˆ°è¿œç¨‹æœåŠ¡å™¨

    ä½ åœ¨ Windows ä¸‹ä½¿ç”¨ putty æˆ– mintty ç­‰ç»ˆç«¯å·¥å…·ï¼Œåˆ™è¡¥ä¸å­—ä½“è¦å®‰è£…åˆ°ä½ çš„ Windows ç³»ç»Ÿä¸­

    ä½ åœ¨ Linux ä¸‹ä½¿ç”¨ Gnome ç­‰æ¡Œé¢ç¯å¢ƒï¼Œåˆ™è¡¥ä¸å­—ä½“è¦å®‰è£…åˆ°ä½ çš„ Linux ç³»ç»Ÿä¸­

    ä½ åœ¨ MacOS ä¸‹ä½¿ç”¨ iTerm2 ç»ˆç«¯å·¥å…·ï¼Œåˆ™è¦åœ¨ä½ çš„è‹¹æœç”µè„‘ä¸Šå®‰è£…è¿™äº›è¡¥ä¸å­—ä½“

è¿™äº›è¡¥ä¸å­—ä½“éƒ½æ˜¯ä¼˜åŒ–çš„è‹±æ–‡å’Œæ•°å­—ç¬¦å·çš„æ˜¾ç¤ºï¼Œå¯¹ä¸­æ–‡å­—ç¬¦ä¼šå›è½åˆ°å½“å‰ç³»ç»Ÿçš„é»˜è®¤ä¸­æ–‡å­—ä½“ï¼Œè¯¦è§ [è®¾ç½®ä¸­æ–‡å­—ä½“]ã€‚

ç®€å•æµ‹è¯•å‡ ä¸ª unicode å­—ç¬¦çœ‹çœ‹èƒ½å¦æ˜¾ç¤ºä¸ºæ­£ç¡®çš„å›¾æ ‡

    $ echo -e "\ue0b0 \u00b1 \ue0a0 \u27a6 \u2718 \u26a1 \u2699"
    î‚° Â± î‚  â¦ âœ˜ âš¡ âš™

ç›®å‰å¾ˆå¤šç»ˆç«¯æ¨¡æ‹Ÿå™¨æˆ–æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œéƒ½å†…ç½®æ”¯æŒ powerline glyphsã€‚æ‰€ä»¥ï¼Œå¦‚æœæ˜¾ç¤ºçš„å›¾æ ‡è·Ÿä½ çš„å­—ä½“æ•ˆæœä¸ç¬¦ï¼Œä¸€èˆ¬æ˜¯å› ä¸ºå®ƒä»¬è‡ªè¡Œå®ç°äº†å­—ç¬¦æ•ˆæœï¼Œè€Œä¼šå¿½ç•¥ä½ é€‰æ‹©å­—ä½“çš„å­—ç¬¦æ•ˆæœã€‚

#### Powerline fonts

Nerd fonts æ˜¯ Powerline fonts çš„è¶…é›†ï¼Œå»ºè®®ç›´æ¥ä½¿ç”¨ Nerd fontï¼Œå‚è§ä¸‹é¢ç« èŠ‚ [Nerd font]ã€‚

    https://github.com/powerline/fonts

Powerline åœ¨ bash æ—¶æœŸéå¸¸æµè¡Œï¼Œä¸ºäº†æ˜¾ç¤ºå„ç§å¥½çœ‹çš„å›¾æ ‡ä½¿ç”¨äº†ç‰¹æ®Šçš„ icon å­—ç¬¦ã€‚powerline fonts å°±æ˜¯ç»™ Powerline é…å¥—çš„å­—ä½“é›†ï¼Œæœ¬è´¨æ˜¯å¯¹ä¸€äº›ç°æœ‰çš„å­—ä½“æ‰“ patchï¼ŒæŠŠ powerline icon å­—ç¬¦æ·»åŠ åˆ°è¿™äº›ç°æœ‰çš„å­—ä½“é‡Œå»ï¼Œç›®å‰å¯¹éå¸¸å¤šçš„ç¼–ç¨‹å­—ä½“æ‰“äº† patchã€‚

Powerline fonts å¯¹æ‰“è¿‡ patch çš„å­—ä½“åšäº†é‡å‘½åï¼Œåé¢éƒ½åŠ ä¸Šäº† for Powerline çš„åç¼€ï¼Œæ¯”å¦‚ Source Code Pro æ‰“å®Œ patch ååå­—æ”¹ä¸ºäº† Source Code Pro for Powerlineã€‚

å¾ˆå¤š Linux å‘è¡Œç‰ˆå¦‚ Debian éƒ½å¸¦ powerline å­—ä½“

    # Debian ç­‰å‘è¡Œç‰ˆè‡ªå¸¦
    $ sudo apt install fonts-powerline
    $ sudo apt install ttf-ancient-fonts

æ‰‹åŠ¨å®‰è£…æœ€æ–°ç‰ˆ

    $ git clone --depth=1 https://github.com/powerline/fonts.git

    $ cd fonts
    $ ./install.sh

    $ cd ..
    $ rm -rf fonts/

#### Nerd font

    https://www.nerdfonts.com/font-downloads
        https://github.com/ryanoasis/nerd-fonts

Nerd font æ˜¯ Powerline fonts çš„è¶…é›†ï¼Œä»–å‡ ä¹æŠŠç›®å‰å¸‚é¢ä¸Šä¸»æµçš„ icon å­—ç¬¦å…¨æ‰“è¿›å»äº†ï¼ŒåŒ…æ‹¬ä¸Šé¢æåˆ°çš„ powerline icon å­—ç¬¦ä»¥åŠ Font Awesome ç­‰å‡ åƒä¸ª icon å­—ç¬¦ã€‚

å­—ä½“åç§°åœ¨ patch åå¯¹åŠ äº†åç¼€ NF ä»¥ç¤ºåŒºåˆ«ï¼Œæ¯”å¦‚ Source Code Font ä¼šä¿®æ”¹ä¸º Sauce Code Nerd Font (Sauce Code å¹¶é typoï¼Œæ•…æ„ä¸ºä¹‹)ï¼ŒFira Code æ”¹åä¸º Fira Code NFã€‚

> Meslo LG-S NF å­—ä½“ï¼Œç”¨äºç»ˆç«¯æ¨¡æ‹Ÿå™¨ï¼Œå¦‚æœä½ çš„ç»ˆç«¯æ¨¡æ‹Ÿå™¨è¿˜æ”¯æŒé€æ˜æ•ˆæœï¼Œæ˜¾ç¤ºæ•ˆæœç›´æ¥èµ·é£ã€‚

è¿™ä¸ªæ˜¯ Powerlevel10k æ¨èçš„å­—ä½“

    https://github.com/romkatv/powerlevel10k#meslo-nerd-font-patched-for-powerlevel10k

    å‘å¸ƒç‰ˆ
        https://github.com/ryanoasis/nerd-fonts/releases æ‰¾ Meslo.tar.xz

    å¼€å‘ç‰ˆ
        https://github.com/ryanoasis/nerd-fonts/tree/master/patched-fonts/Meslo/S

é€‰ S çš„åŸå› æ˜¯è¦è¡Œé—´è·å°çš„ï¼Œåœ¨ç»ˆç«¯æ˜¾ç¤ºçš„æ—¶å€™æ­£å¥½ï¼Œå¦‚æœéœ€è¦å¢å¤§è¡Œé—´è·ï¼Œä¸å»ºè®®æ¢å­—ä½“ï¼Œåœ¨ç»ˆç«¯æ¨¡æ‹Ÿå™¨æˆ–ä½ çš„ç¼–è¾‘å™¨è®¾ç½®è¡Œè·æ›´å¥½ã€‚

é€ä¸ªç›®å½•é€‰æ‹©æ–‡ä»¶åæœ€çŸ­çš„ä¸‹è½½ï¼Œå³é€‰ MesloLGSNerdFont-*.ttfï¼Œä¸ä¸‹è½½ Mono å’Œ Propo ç±»å‹çš„

    æ–‡ä»¶ååŠ  Mono å­—æ ·çš„æ˜¯ç­‰å®½å˜å½¢ï¼Œæ˜¾ç¤ºæ—¶å¤ªæŒ¤äº†

    æ–‡ä»¶ååŠ  Propo å­—æ ·çš„æ˜¯å¤šè¡Œè¿çº¿ä¼˜åŒ–ï¼Œæ™®é€šåœºæ™¯ä¸éœ€è¦

ä¸Šæ¸¸æ¥æºå­—ä½“

    Meslo  https://github.com/andreberg/Meslo-Font
        Appleâ€™s Menlo-Regular
            Bitstream Vera Sans Mono

> FiraCode NF å­—ä½“ï¼Œç”¨äºä»£ç ç¼–è¾‘å™¨ï¼Œè¯¥å­—ä½“æ”¯æŒè¿å­—ç¬¦ï¼ŒWindows ç”¨æˆ·æ‰¾å¸¦ Windows å­—æ ·çš„ä¸‹è½½å³å¯

    å‘å¸ƒç‰ˆ
        https://github.com/ryanoasis/nerd-fonts/releases æ‰¾ FiraCode.tar.xz

    å¼€å‘ç‰ˆ
        https://github.com/ryanoasis/nerd-fonts/tree/master/patched-fonts/FiraCode

æ–‡ä»¶ååŠ  Mono å­—æ ·çš„æ˜¯ç­‰å®½å˜å½¢ä¸åŒ…å«è¿å­—ã€‚

ä¸Šæ¸¸æ¥æºå­—ä½“

    FiraCode https://github.com/tonsky/FiraCode

#### Fedora(SELinux) ä¸‹å®‰è£…ä¸‹è½½çš„å­—ä½“

å› ä¸ºå‘è¡Œç‰ˆçš„å­˜å‚¨åº“æ²¡æœ‰ nerd fontï¼Œåªèƒ½æ‰‹åŠ¨å®‰è£…ï¼Œåªæ˜¯å®‰è£…æ–¹æ³•æœ‰ç‚¹å¤æ‚ï¼š

    https://docs.fedoraproject.org/en-US/quick-docs/fonts/#system-fonts
        https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/desktop_migration_and_administration_guide/configure-fonts#add-extra-fonts

å…ˆä¸‹è½½å¹¶è§£å‹ä¸Šè¿°ä¸¤ä¸ªå­—ä½“æ–‡ä»¶

        $ curl -fsSLO https://github.com/ryanoasis/nerd-fonts/releases/download/v3.4.0/Meslo.tar.xz
        $ curl -fsSLO https://github.com/ryanoasis/nerd-fonts/releases/download/v3.4.0/FiraCode.tar.xz

        $ xz -d Meslo.tar.xz
        $ xz -d FiraCode.tar.xz

        $ tar xf Meslo.tar
        $ tar xf FiraCode.tar

æ–¹æ³•ä¸€ï¼šé€‚åˆæ‰¹é‡å®‰è£…å­—ä½“ï¼Œä¿å­˜åœ¨ç³»ç»Ÿç›®å½• /usr/share/fonts/ï¼Œå…¨å±€ç”Ÿæ•ˆ

```bash

sudo su

mkdir -p /usr/share/fonts/MesloLGSNF
mkdir -p /usr/share/fonts/FiraCodeNF

cp MesloLGSNerdFont-*.ttf /usr/share/fonts/MesloLGSNF/
cp FiraCodeNerdFont-*.ttf /usr/share/fonts/FiraCodeNF/

# Set permissions and update SELinux labels
chown -R root: /usr/share/fonts/MesloLGSNF
chmod 755 /usr/share/fonts/MesloLGSNF/
chmod 644 /usr/share/fonts/MesloLGSNF/*
restorecon -vFr /usr/share/fonts/MesloLGSNF

chown -R root: /usr/share/fonts/FiraCodeNF
chmod 755 /usr/share/fonts/FiraCodeNF/
chmod 644 /usr/share/fonts/FiraCodeNF/*
restorecon -vFr /usr/share/fonts/FiraCodeNF

# Update the font cache
fc-cache -v

```

æ–¹æ³•äºŒï¼šæ”¾åœ¨ç”¨æˆ·ç›®å½•ï¼Œä»…å½“å‰ç”¨æˆ·ç”Ÿæ•ˆ

Gnome æ¡Œé¢ç¯å¢ƒä¸‹åŒå‡»å­—ä½“æ–‡ä»¶ï¼Œä¼šè°ƒç”¨ gnome-font-viewer å›¾å½¢åŒ–ç¨‹åºï¼Œé€‰æ‹©å®‰è£…åä¼šè‡ªåŠ¨ä¿å­˜åœ¨

    # /usr/local/share/fonts/ è¿™ä¸ªç›®å½•æ²¡æœ‰è¢« SELinux é…ç½®é»˜è®¤è§„åˆ™ï¼ŒRHEL ç³»ä¸ä¼šç”Ÿæ•ˆã€‚
    $HOME/.local/share/fonts/ æˆ– $HOME/.font/

ç¡®è®¤ä¸‹å­—ä½“æ–‡ä»¶è®¾ç½®æƒé™

    /usr/share/fonts/ ä¸‹çš„ç›®å½•æ˜¯ 755ï¼Œå­—ä½“æ–‡ä»¶æ˜¯ 644

    $HOME/.local/share/fonts ä¸‹çš„å­—ä½“æ–‡ä»¶æ˜¯ 644

gnome-font-viewer å›¾å½¢åŒ–ç¨‹åºæœ‰ä¸ª bug è‡³ä»Šæœªæ”¹ï¼Œå­—ä½“å®‰è£…ä¸æç¤ºå®Œæˆï¼Œæ€»æ˜¯ installing...ï¼Œè’™ç€ç­‰ä¸€é˜µå…³äº†å®ƒå°±è¡Œã€‚ã€‚ã€‚

éªŒè¯ï¼šç®€å•æµ‹è¯•å‡ ä¸ª unicode æ‰©å±• NF å­—ç¬¦

    $ echo -e "\ue0b0 \u00b1 \ue0a0 \u27a6 \u2718 \u26a1 \u2699 \u2743 \uf70f \ue20a \ue350 \uf2c8"
    î‚° Â± î‚  â¦ âœ˜ âš¡ âš™ âƒ ïœ îˆŠ î ï‹ˆ

### ä½¿ç”¨ zsh

å•çº¯çš„ zsh å¹¶ä¸æ…¢ï¼Œåªè¦åˆ«è£… ohmyzshï¼Œæ²¡æœ‰ä»»ä½•åŠŸèƒ½æ€§æ’ä»¶çš„ä½¿ç”¨åœºæ™¯ä¾èµ–è¿™ä¸ª ohmyzshã€‚

    zsh æ‰‹å†Œ https://zsh.sourceforge.io/Doc/Release/Zsh-Line-Editor.html

    https://github.com/ohmyzsh/ohmyzsh/wiki/Installing-ZSH

    https://www.zhihu.com/question/21418449/answer/300879747

ä»è¯­æ³•ä¸Šæ¥è¯´ï¼Œzsh å’Œ bash æ˜¯ä¸å…¼å®¹çš„ï¼›ä½†æ˜¯ zsh æœ‰ä¸€ä¸ªä»¿çœŸæ¨¡å¼ï¼Œå¯ä»¥æ”¯æŒå¯¹ bash/sh è¯­æ³•çš„ä»¿çœŸï¼ˆä¹Ÿæœ‰å¯¹ csh çš„ä»¿çœŸï¼Œä½†æ˜¯æ”¯æŒä¸å®Œå–„ï¼Œä¸å»ºè®®ä½¿ç”¨ï¼‰ï¼š

    $ emulate bash
    æˆ–
    $ emulate sh

å®‰è£…

    $ sudo dnf install zsh zsh-autosuggestions zsh-syntax-highlighting
    $ sudo apt install zsh zsh-autosuggestions zsh-syntax-highlighting

å¦‚æœæ˜¯ç”¨ apt install å®‰è£…çš„å‘è¡Œç‰ˆï¼Œä½ç½®åœ¨ /usr/share/zsh

zsh é»˜è®¤ä½¿ç”¨çš„ç”¨æˆ·æ’ä»¶ä½ç½®ï¼Œåœ¨ ~/.zsh/plugin/

å¯è®¾ç½®å½“å‰ç”¨æˆ·é»˜è®¤ç™»å½•ä½¿ç”¨ zsh

    å…ˆçœ‹ä¸‹å½“å‰ç³»ç»Ÿçš„å„ä¸ªshellçš„ä½ç½®
    $ cat /etc/shells

    # å½“å‰ç”¨æˆ·ä¿®æ”¹è‡ªå·±çš„ç™»å½• shell
    $ sudo chsh -s /bin/zsh

    # ä¿®æ”¹æŒ‡å®šç”¨æˆ·çš„ç™»å½•shell
    $ sudo usermod -s /bin/zsh username

    é‡å¯åç™»å½•ç”Ÿæ•ˆ

æ’ä»¶å’Œä¸»é¢˜å¤ªå¤šäº†å®¹æ˜“æä¹±ç¯å¢ƒï¼Œä¿å®ˆç‚¹çš„ç”¨æ³•

    ç™»å½•ç¯å¢ƒé»˜è®¤è¿˜æ˜¯ç”¨ bashï¼Œç™»å½•åæ‰‹åŠ¨æ‰§è¡Œ `exec zsh` åˆ‡æ¢åˆ°zsh

    å¦‚æœæ‰§è¡Œ `zsh` åˆ™åœ¨ bash çš„åŸºç¡€ä¸Šè¿›å…¥ zshï¼Œæ‰§è¡Œ exit é€€å‡ºæ—¶ä¼šå…ˆé€€å‡ºåˆ° bashï¼Œç„¶åå†æ¬¡ exit æ‰æ˜¯æ–­å¼€è¿æ¥

å¦‚æœæ˜¯å®‰è£…ååˆæ¬¡è¿è¡Œ zshï¼Œæœ‰ä¸ªå¼•å¯¼ç¨‹åºè®¾ç½® zsh çš„é…ç½®æ–‡ ~/.zshrc æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨è°ƒç”¨

    $ zsh

    $ autoload -Uz zsh-newuser-install

    $ zsh-newuser-install -f

å¦‚æœä¹‹å‰ä½¿ç”¨ bashï¼Œåœ¨ ~/.zshrc æ–‡ä»¶ä¸­åŠ ä¸Š `source ~/.bash_profile`ï¼Œå¯ä»¥ç»§æ‰¿æ‰§è¡Œ bash çš„é…ç½®æ–‡ä»¶ã€‚

æœ‰äº›æ’ä»¶å’Œä¸»é¢˜ä¾èµ– python å’Œ gitï¼Œæ³¨æ„æå‰å®‰è£…å¥½ã€‚

zsh å‘½ä»¤æç¤ºç¬¦é»˜è®¤ä½¿ç”¨ç®€æ´çš„ pure ä¸»é¢˜

    https://github.com/sindresorhus/pure

    æƒ³è¦èŠ±å“¨çš„ï¼Œå®‰è£… powerlevel10k è¶³å¤Ÿäº†ï¼Œå‚è§ç« èŠ‚[æ¨èçŠ¶æ€æ å·¥å…· powerlevel10k]ï¼Œå®ƒä¹Ÿå¯è®¾ç½®ä¸º pure é£æ ¼ã€‚

zsh è‡ªå¸¦åŠŸèƒ½

    å‘½ä»¤å’Œç›®å½•æ™ºèƒ½è¡¥å…¨ï¼šç›¸å¯¹äº bashï¼Œä¸¤æ¬¡ TAB é”®åªèƒ½ç”¨äºæç¤ºç›®å½•ï¼Œåœ¨ zsh ä¸­è¾“å…¥é•¿å‘½ä»¤ï¼Œè¾“å…¥å¼€å¤´å­—æ¯åè¿ç»­æ•²å‡»ä¸¤æ¬¡ TAB é”® zsh ç»™ä½ ä¸€ä¸ªå¯èƒ½çš„åˆ—è¡¨ï¼Œç”¨tabæˆ–æ–¹å‘é”®é€‰æ‹©ï¼Œå›è½¦ç¡®è®¤ã€‚æ¯”å¦‚å·²ç»è¾“å…¥äº† svn commitï¼Œä½†æ˜¯æœ‰ä¸€ä¸ª commit çš„å‚æ•°æˆ‘å¿˜è®°äº†ï¼Œæˆ‘åªè®°å¾—ä¸¤ä¸ªå‡å·å¼€å¤´çš„ï¼Œåœ¨svn commit -- åé¢æŒ‰ä¸¤æ¬¡TABï¼Œä¼šåˆ—å‡ºæ‰€æœ‰å‘½ä»¤ã€‚

    å¿«é€Ÿè·³è½¬ï¼šè¾“å…¥ cd - æŒ‰ TABï¼Œä¼šåˆ—å‡ºå†å²è·¯å¾„æ¸…å•ä¾›é€‰æ‹©ã€‚

#### å®‰è£…å¸¸ç”¨çš„æ’ä»¶

ä¸‹é¢çš„å‡ ä¸ªå¸¸ç”¨æ’ä»¶æŒ¨ä¸ªè£…å¤ªå¤æ‚äº†ï¼Œæƒ³æ— è„‘å®‰è£…å‚è§ç« èŠ‚ [å¼€ç®±å³ç”¨ä¸€æ­¥åˆ°ä½çš„è½¯ä»¶åŒ… -- zsh4humans]ã€‚

é™¤äº† powerline å¤–ï¼Œå…¶å®ƒçš„æ’ä»¶éƒ½è¦è¿›å…¥ zsh åå†æ‰§è¡Œå®‰è£…

    powerlineï¼šè§ç« èŠ‚[çŠ¶æ€æ å·¥å…· powerline]ï¼Œå»ºè®®ä½¿ç”¨æ›¿ä»£å“è§ç« èŠ‚ [æ¨èçŠ¶æ€æ å·¥å…· powerlevel10k]ã€‚

    å‘½ä»¤è‡ªåŠ¨å®Œæˆï¼šè¾“å…¥å®Œ â€œtarâ€å‘½ä»¤ï¼Œåé¢å°±ç”¨ç°è‰²ç»™ä½ æç¤º tar å‘½ä»¤çš„å‚æ•°ï¼Œè€Œä¸”æ˜¯éšç€ä½ åŠ¨æ€è¾“å…¥å®Œæ¯ä¸€ä¸ªå­—æ¯ä¸æ–­ä¿®æ­£å˜åŒ–ï¼Œtar -c è¿˜æ˜¯ tar -x è·Ÿéšä½ çš„è¾“å…¥ä¸æ–­æç¤ºå¯ç”¨å‚æ•°ï¼Œè¿™ä¸ªå‘½ä»¤æç¤ºæ˜¯åŸºäºä½ çš„å†å²å‘½ä»¤æ•°æ®åº“è¿›è¡Œåˆ†æçš„ã€‚æŒ‰ TAB é”®å¿«é€Ÿè¿›å…¥ä¸‹ä¸€çº§ï¼Œæˆ–ç›´æ¥æŒ‰å³æ–¹å‘é”®ç¡®è®¤è¯¥æç¤ºã€‚æœ€æ–¹ä¾¿çš„ç”¨æ³•æ˜¯æŒ‰ alt+m æˆ– alt+l(viçš„å³æ–¹å‘é”®)è‡ªåŠ¨æ¥å—ç»“æœï¼Œå›è½¦å³æ‰§è¡Œï¼Œæ›´æ–¹ä¾¿ã€‚

        $ sudo dnf install zsh-autosuggestions
        $ sudo apt install zsh-autosuggestions

        # ä¸ä½¿ç”¨å‘è¡Œç‰ˆä»“åº“æ”¶å½•çš„ç‰ˆæœ¬ï¼Œä¹Ÿå¯è‡ªè¡Œå®‰è£…
        # git clone --depth=1 https://github.com/zsh-users/zsh-autosuggestions ~/.zsh/plugins/zsh-autosuggestions

    å‘½ä»¤è¯­æ³•é«˜äº®ï¼šæ ¹æ®ä½ è¾“å…¥çš„å‘½ä»¤æ˜¯å¦æ­£ç¡®çš„è‰²å½©é«˜äº®ï¼Œæ¯”å¦‚è¾“å…¥dateæŸ¥çœ‹æ—¶é—´ï¼Œé”™ä¸ºdataï¼Œå­—ä½“çš„é¢œè‰²ä¼šè·Ÿéšä½ çš„è¾“å…¥ä¸€ä¸ªå­—æ¯ä¸€ä¸ªå­—æ¯çš„å˜åŒ–ï¼Œé”™è¯¯ä¼šç›´æ¥å˜çº¢ã€‚

        $ sudo dnf install zsh-syntax-highlighting
        $ sudo apt install zsh-syntax-highlighting

        # ä¸ä½¿ç”¨å‘è¡Œç‰ˆä»“åº“æ”¶å½•çš„ç‰ˆæœ¬ï¼Œä¹Ÿå¯è‡ªè¡Œå®‰è£…
        # git clone --depth=1 https://github.com/zsh-users/zsh-syntax-highlighting ~/.zsh/plugins/zsh-syntax-highlighting

        ç«å“ https://github.com/zdharma-continuum/fast-syntax-highlighting

    å‘½ä»¤æ¨¡ç³ŠæŸ¥æ‰¾ï¼šè¾“å…¥é”™çš„ä¹Ÿæ²¡å…³ç³»ï¼Œç»™ä½ å€™é€‰å‘½ä»¤çš„æç¤ºï¼Œviæ¨¡å¼æ”¹è‰¯ä¸ºæŒ‰ä¸Šä¸‹é”®è¿›å…¥æœç´¢ï¼Œç›´æ¥è¾“å…¥å…³é”®å­—å³å¯

        # https://github.com/junegunn/fzf#fuzzy-completion-for-bash-and-zsh
        $ sudo apt install fzf

    å¿«é€Ÿè¿›å…¥ç›®å½• zoxide

        # https://github.com/ajeetdsouza/zoxide
        $ sudo apt install zoxide  # Debian æ›´æ–°å¤ªæ…¢ï¼Œå®˜æ–¹å»ºè®®ç›´æ¥è¿è¡Œæºä»£ç çš„ install.sh è¿›è¡Œå®‰è£…

ç®€å•å¯ç”¨æ’ä»¶å°±ç›´æ¥åœ¨ ~/.zshrc æ–‡ä»¶é‡Œä½¿ç”¨ source å‘½ä»¤å³å¯ï¼Œå®Œæ•´ç¤ºä¾‹è§ç« èŠ‚ [.zshrc é…ç½®æ–‡ä»¶æ ·ä¾‹]

    # æ˜¾å¼è®¾ç½®ç»ˆç«¯å¯ç”¨256colorï¼Œé˜²æ­¢ç»ˆç«¯å·¥å…·æœªè®¾ç½®ã€‚è‹¥ç»ˆç«¯å·¥å…·èƒ½å¼€å¯é€æ˜é€‰é¡¹ï¼Œåˆ™æ˜¾ç¤ºçš„æ•ˆæœæ›´å¥½
    export TERM="xterm-256color"

    # æœ‰æ’ä»¶ç®¡ç†è¿™ä¿©è®¾ç½®ä¸éœ€è¦
    # å¯ç”¨å½©è‰²æç¤ºç¬¦
    # autoload -U colors && colors
    # æ¯æ¬¡å‘½ä»¤è¡Œåˆ·æ–°æç¤ºç¬¦
    # setopt prompt_subst

    # å¦‚æœæ˜¯ç”¨ apt install å®‰è£…çš„å‘è¡Œç‰ˆæ’ä»¶ï¼Œä½ç½®åœ¨ /usr/share/ ç›®å½•
    # æ‰‹åŠ¨å®‰è£…çš„æ’ä»¶ï¼Œä½ç½®åœ¨ ~/.zsh/plugins/ ç›®å½•

    # å¯ç”¨æ’ä»¶ï¼šçŠ¶æ€æ å·¥å…·
    # å¦‚æœæ˜¯pipå®‰è£…çš„æŸ¥çœ‹è·¯å¾„ç”¨ pip show powerline-status
    source /usr/share/powerline/bindings/zsh/powerline.zsh

    # å¯ç”¨æ’ä»¶ï¼šå‘½ä»¤è‡ªåŠ¨å®Œæˆ
    # source ~/.zsh/plugins/zsh-autosuggestions/zsh-autosuggestions.zsh
    source /usr/share/zsh-autosuggestions/zsh-autosuggestions.zsh

    # å¯ç”¨æ’ä»¶ï¼šå‘½ä»¤è¯­æ³•é«˜äº®
    # å®˜ç½‘æç¤ºè¦åœ¨é…ç½®æ–‡ä»¶çš„æœ€åä¸€è¡Œ
    # source ~/.zsh/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh
    source /usr/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh

    # å‘½ä»¤è‡ªåŠ¨å®Œæˆçš„é¢œè‰²å¤ªæš—  # ,bg=cyan
    # https://github.com/zsh-users/zsh-autosuggestions#suggestion-highlight-style
    ZSH_AUTOSUGGEST_HIGHLIGHT_STYLE="fg=#006799,bold"

zshä¸‹ï¼Œå¦‚æœæƒ³ç ”ç©¶å“ªä¸ªæ’ä»¶è¿‡æ…¢å¯¼è‡´å‘½ä»¤è¡Œååº”è®©äººä¸çˆ½ï¼Œæœ‰ä¸“é—¨ææµ‹é‡çš„ zsh-bench

    https://github.com/romkatv/zsh-bench#conclusions

å®ƒçš„å»ºè®®æ˜¯çŠ¶æ€æ å·¥å…·ä½¿ç”¨ä¸»é¢˜ powerlevle10kï¼Œå¦‚æœè¿˜éœ€è¦è‡ªåŠ¨å®Œæˆå•¥çš„é‚£å‡ ä¸ªæ’ä»¶ï¼Œå°±ç›´æ¥å®‰è£… zsh4humansï¼Œè¿™äº›éƒ½å¸¦äº†è€Œä¸”æœ‰ä¼˜åŒ–ã€‚

è‡ªå·±ç®€å•æµ‹è¯•ä¸‹åŠ è½½zshçš„é€Ÿåº¦

    $ for i in $(seq 1 5); do /usr/bin/time /bin/zsh -i -c exit; done
    ...

#### çŠ¶æ€æ å·¥å…· powerlevel10k

zsh å‘½ä»¤è¡Œæç¤ºç¬¦å·¥å…·ï¼Œè¿™ä¸ªä¸»é¢˜å¯ä»¥å®Œå…¨æ›¿ä»£çŠ¶æ€æ å·¥å…· powerline ï¼Œè€Œä¸”æ›´ç®€å•ã€æ›´å¥½çœ‹

    https://github.com/romkatv/powerlevel10k

å‚è€ƒå›¾ç‰‡![powerlevel10k](https://raw.githubusercontent.com/romkatv/powerlevel10k-media/master/prompt-styles-high-contrast.png)

å¯å…ˆåœ¨dockerä¸­è¯•ç”¨ä¸‹

    docker run -e TERM -e COLORTERM -e LC_ALL=C.UTF-8 -it --rm alpine sh -uec '
        apk add git zsh nano vim
        git clone --depth=1 https://github.com/romkatv/powerlevel10k.git ~/powerlevel10k
        echo "source ~/powerlevel10k/powerlevel10k.zsh-theme" >>~/.zshrc
        cd ~/powerlevel10k
        exec zsh'

è¦åœ¨å­—ç¬¦ç•Œé¢æ˜¾ç¤ºç‚«é…·çš„å›¾æ ‡ï¼Œéœ€è¦åœ¨ä½ ä½¿ç”¨ç»ˆç«¯æ¨¡æ‹Ÿå™¨çš„è®¡ç®—æœºä¸Šå®‰è£… MesloLGS NF å­—ä½“ï¼Œè¯¦è§ç« èŠ‚[å›¾æ ‡å­—ä½“]ã€‚

ç»ˆç«¯æ¨¡æ‹Ÿå™¨æœ€å¥½æ˜ç¡®è®¾ç½® $TERM å˜é‡ï¼Œè¿™æ ·å„ä¸ªæ’ä»¶ä¼šè‡ªåŠ¨ä½¿ç”¨æ›´ä¸°å¯Œçš„é¢œè‰²

    # æˆ–è€…åœ¨ä½ çš„ç”¨æˆ·ç™»å½•è„šæœ¬ .bash_profile ä¸­æ˜¾å¼è®¾ç½®
    # æ˜¾å¼è®¾ç½®ç»ˆç«¯å¯ç”¨ 256colorï¼Œé˜²æ­¢ç»ˆç«¯å·¥å…·æœªè®¾ç½®ã€‚è‹¥ç»ˆç«¯å·¥å…·èƒ½å¼€å¯é€æ˜é€‰é¡¹ï¼Œåˆ™æ˜¾ç¤ºçš„æ•ˆæœæ›´å¥½
    export TERM="xterm-256color"

ä¾èµ–å¤šå½©è‰²è®¾ç½®ï¼Œè¯¦è§ç« èŠ‚ [ç»ˆç«¯æ¨¡æ‹Ÿå™¨å’Œè½¯ä»¶çš„çœŸå½©è‰²è®¾ç½®]ã€‚

å¦‚æœä½ çš„ç»ˆç«¯æ¨¡æ‹Ÿå™¨ä¸æ”¯æŒé€æ˜æ•ˆæœï¼Œä¸”æœªä½¿ç”¨ MesloLGS NF å­—ä½“çš„è¯ï¼Œæ˜¾ç¤ºé£æ ¼ä¼šæœ‰å·®åˆ«ï¼Œè¿™æ˜¯è®¾è®¡è€…åšäº†å…¼å®¹æ€§è€ƒè™‘ï¼Œä»¥é˜²æ­¢æ˜¾ç¤ºä¸æ­£å¸¸ã€‚

ç„¶åä» github å®‰è£… powerlevel10k

    # https://github.com/romkatv/powerlevel10k#manual
    $ git clone --depth=1 https://github.com/romkatv/powerlevel10k.git ~/powerlevel10k

    $ echo 'source ~/powerlevel10k/powerlevel10k.zsh-theme' >>~/.zshrc

å†æ¬¡è¿›å…¥ `zsh` å°±å¯ä»¥èµ·é£äº†ã€‚

åˆæ¬¡è¿›å…¥zshåä¼šè‡ªåŠ¨æç¤ºè®¾ç½®ä½¿ç”¨ä¹ æƒ¯ï¼Œä¹‹åå¯ä»¥æ‰§è¡Œå‘½ä»¤ `p10k configure` å†æ¬¡è®¾ç½®ã€‚

è¿™ä¸ªä¸»é¢˜è‡ªå¸¦ä¸€å †çŠ¶æ€æ’ä»¶åŒ…æ‹¬ gitã€virtualenv ç­‰ï¼Œéå¸¸å¥½ç”¨ã€‚å¦‚æœä¹‹å‰åœ¨ zsh çš„ plugin é‡Œé…ç½®ä¸‹è½½äº† git ç­‰æ’ä»¶ï¼Œå¯ä»¥åˆ é™¤ä»–ä»¬ã€‚

è‡ªå®šä¹‰å¯ç”¨å®ƒè‡ªå¸¦çš„å“ªäº›æ’ä»¶ï¼Œç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œç”¨ `echo $POWERLEVEL9K_CONFIG_FILE` æŸ¥çœ‹ï¼Œä¸€èˆ¬æ˜¯ ~/.p10k.zshï¼Œæœç´¢ `POWERLEVEL9K_RIGHT_PROMPT_ELEMENTS=` å³å¯ã€‚

##### è‡ªå®šä¹‰çŠ¶æ€æ æç¤ºæ®µï¼Œç›‘æ§æ ‘è“æ´¾æ¸©åº¦

å¯è¿è¡Œå‘½ä»¤æŸ¥çœ‹å¸®åŠ©è¯´æ˜

    p10k help segment

ç¼–è¾‘ ~/.p10k.zsh æ–‡ä»¶ï¼Œæœç´¢ prompt_exampleï¼Œå…ˆçœ‹è¯´æ˜

1ã€åœ¨çŠ¶æ€æ æç¤ºæ®µ POWERLEVEL9K_LEFT_PROMPT_ELEMENTS æ–°å¢ä¸€ä¸ªå¤„ç†å‡½æ•°

```shell

typeset -g POWERLEVEL9K_LEFT_PROMPT_ELEMENTS=(
    # =========================[ Line #1 ]=========================
    raspi_thermal_warn      # raspberry pi cpu temperature
    os_icon                 # os identifier
    ...
)

```

2ã€åœ¨å‡½æ•° prompt_example() åé¢è¿½åŠ ä¸ªæ–°çš„å‡½æ•°ï¼š

``` shell

  function prompt_raspi_thermal_warn() {
    which vcgencmd >/dev/null 2>&1 || return 0

    local CPUTEMP=$(cat /sys/class/thermal/thermal_zone0/temp)

    if [ "$CPUTEMP" -gt  "55000" ] && [ "$CPUTEMP" -lt  "65000" ]; then
      p10k segment -b yellow -f blue -i 'ï‹ˆ'

    elif [ "$CPUTEMP" -gt  "65000" ] && [ "$CPUTEMP" -lt  "70000" ]; then
      local CPUTEMP_WARN="CPU `vcgencmd measure_temp`!"
      p10k segment -b yellow -f blue -i 'ï‹‡' -t "$CPUTEMP_WARN"

    elif [ "$CPUTEMP" -gt  "70000" ];  then
      local CPUTEMP_WARN="CPU TOO HOT!`vcgencmd measure_temp`"
      p10k segment -b black -f red -i 'ï‹‡' -t "$CPUTEMP_WARN"
    fi
  }

```

å¦‚æœæ‹…å¿ƒ instant-prompt åŠŸèƒ½ä¼šåœ¨å‡ºç° y/n æç¤ºçš„æ—¶å€™æå‰è¾“å…¥yï¼Œé…Œæƒ…å…³æ‰è¿™ä¸ªåŠŸèƒ½ï¼Œç¼–è¾‘ ~/.zshrc æ³¨é‡Šæ‰è¯¥æ–‡ä»¶æœ€å‰é¢çš„å‡ è¡Œ

    if [[ -r "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh" ]]; then
        source "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh"
    fi

#### å¼€ç®±å³ç”¨çš„è½¯ä»¶åŒ… -- zsh4humans

ç›®å‰ä¸çŸ¥é“å“ªä¸ªåŠŸèƒ½ï¼Œç»å¸¸åœ¨ä½ æ‰“å­—çš„æ—¶å€™åŠ ç‚¹å­—ç¬¦ï¼Œè¿™ä¸ªæ²¡æ³•ç”¨å•Š

    https://github.com/romkatv/zsh4humans

å¼€ç®±å³ç”¨ï¼Œæœ€å¸¸ç”¨çš„å‡ ä¸ªæ’ä»¶éƒ½é…ç½®å¥½äº†ï¼šçŠ¶æ€æ å·¥å…·ã€è‡ªåŠ¨å®Œæˆã€è¯­æ³•é«˜äº®ã€å‘½ä»¤æ¨¡ç³ŠæŸ¥æ‰¾ï¼Œè€Œä¸”ä½œè€…è¿˜ä¸“é—¨ä¸ºé€Ÿåº¦è¿›è¡Œäº†ä¼˜åŒ–

    powerlevel10k
    zsh-autosuggestions
    zsh-syntax-highlighting
    fzf

èƒ½è·¨ä¸»æœºè®°å¿†å‘½ä»¤å†å²ï¼Œæ¯”å¦‚ä½ åœ¨æœ¬æœºsshæŸä¸ªä¸»æœºåæ‰§è¡Œçš„å‘½ä»¤ï¼Œåœ¨æœ¬æœºæˆ–å¦ä¸€ä¸ªsshä¸»æœºä¸Šçš„å‘½ä»¤å†å²é‡Œéƒ½å¯ä»¥è¢«å›å¿†åˆ°ï¼Œæ–¹ä¾¿ï¼

    https://github.com/romkatv/zsh4humans/blob/master/tips.md#ssh

æ³¨æ„ï¼šè¯¥åŠŸèƒ½çš„å®ç°æ–¹æ³•æ˜¯å¥—å£³ ssh å‘½ä»¤ï¼Œå½“ä½ åˆæ¬¡sshè¿æ¥æ–°çš„è¿œç¨‹ä¸»æœºï¼Œä¼šè‡ªåŠ¨åœ¨è¿œç¨‹ä¸»æœºä¸Šå®‰è£… zsh4human ç­‰è½¯ä»¶åŒ…ï¼Œç„¶åä¼ é€’è‡ªå·±æœ¬åœ°çš„å‘½ä»¤å†å²ã€‚å¯¹ä½ çš„ ssh é…ç½® ~/.ssh/config ä¹Ÿæœ‰è¦æ±‚

    # https://github.com/romkatv/zsh4humans/blob/master/tips.md#ssh-config
    Host *
        ServerAliveInterval 60
        ConnectTimeout 10
        AddKeysToAgent yes
        EscapeChar `
        ControlMaster auto
        ControlPersist 72000
        ControlPath ~/.ssh/s/%C

è¿™ä¸ªåŠŸèƒ½æœ‰ç‚¹å®‰å…¨éšæ‚£ï¼Œé»˜è®¤æ˜¯å…³é—­çš„ï¼Œå¯è®¾ç½®ç™½åå•æ¨¡å¼æŒ‡å®šå¼€å¯ï¼Œå¦‚å¯¹è‡ªå·±å†…ç½‘çš„è®¡ç®—æœº

    # Disable SSH teleportation by default.
    zstyle ':z4h:ssh:*'                   enable no

    # Enable SSH teleportation for specific hosts.
    zstyle ':z4h:ssh:example-hostname1'   enable yes
    zstyle ':z4h:ssh:*.example-hostname2' enable yes

å¦‚æœéå¸¸ä¸å–œæ¬¢è¿™ä¸ªåŠŸèƒ½ï¼Œç¼–è¾‘ ~/.zshrc æœç´¢â€œsshâ€å­—æ ·ï¼Œæ‰¾åˆ°ç›¸åº”ä»£ç å»æ‰å®ƒå³å¯ã€‚

è®¾ç½®æŠ€å·§ï¼Œæœ‰äº›è®¾ç½®éƒ½æ˜¯æ’ä»¶é‡Œçš„ï¼Œæ³¨æ„åŒºåˆ«

    https://github.com/romkatv/zsh4humans/blob/master/tips.md

å®‰è£…è¿‡ç¨‹éœ€è¦æ³¨æ„çœ‹çœ‹è®¾ç½®æ˜¯å¦ç¬¦åˆè‡ªå·±çš„å®é™…éœ€æ±‚

    â”Œâ”€[14:58:59 user@yourhost:~]
    â””â”€â”€$ if command -v curl >/dev/null 2>&1; then   sh -c "$(curl -fsSL https://raw.githubusercontent.com/romkatv/zsh4humans/v5/install)"; else   sh -c "$(wget -O- https://raw.githubusercontent.com/romkatv/zsh4humans/v5/install)"; fi
    Greetings, Human!

    What kind of keyboard are you using?

    (1)  Mac. It has Option key(s) and does not have Backspace.
    (2)  PC.  It has Backspace key(s) and does not have Option.
    (q)  Quit and do nothing.

    Choice [12q]: 2

    What keybindings do you prefer?

    (1)  Standard. I delete characters with Backspace key.
    (2)  Like in vi. I delete characters with X key in command mode.
    (q)  Quit and do nothing.

    Choice [12q]: 1

    æç¤ºæ˜¯å¦åœ¨ tmux é‡Œä¸€ç›´ä½¿ç”¨ zshï¼Œæˆ‘é€‰çš„ Noã€‚
    Do you want zsh to always run in tmux?

    (y)  Yes.
    (n)  No.
    (q)  Quit and do nothing.

    Choice [ynq]: n

    Do you use direnv?

    (y)  Yes.
    (n)  No.
    (q)  Quit and do nothing.

    Choice [ynq]: n

    Settings up Zsh For Humans...

    z4h: fetching z4h.zsh from github.com/romkatv/zsh4humans
    z4h: generating ~/.zshenv
    z4h: generating ~/.zshrc
    z4h: bootstrapping zsh environment
    z4h: installing zsh4humans
    z4h: cannot find usable zsh
    z4h: fetching zsh 5.8 installer

    é€‰æ‹©æŠŠ zsh å®‰è£…åˆ°homeä¸‹ï¼Œè€Œä¸”ä¸ä½œä¸ºé»˜è®¤ç™»å½•shell
    Choose installation directory for Zsh 5.8:

    (1)  /usr/local        <= uses sudo (recommended)
    (2)  ~/.local          <= does not need sudo
    (3)  Custom directory.
    (q)  Quit and do nothing.

    Choice [123q]: 2

    ===> installing Zsh 5.8 to /home/user/.local
    ===> fetching zsh-5.8-linux-x86_64.tar.gz
    ===> verifying archive integrity
    ===> sha256 signature matches
    ===> md5 signature matches
    ===> extracting files

    Add /home/user/.local/bin/zsh to /etc/shells?

    This will allow you to use it as a login shell.

    (y)  Yes. Recommended.
    (n)  No.
    (q)  Quit and do nothing.

    Choice [ynq]: n

    Installed Zsh 5.8 to /home/user/.local

    To start Zsh, type:

    zsh

    z4h: login shell isn't the same as this shell

    user         user
    login shell  /bin/bash
    this shell   /home/user/.local/bin/zsh

    Change login shell of user to /home/user/.local/bin/zsh?

    (y)  Yes. Recommended.
    (n)  No.

    Won't ask again unless $Z4H/stickycache/no-chsh is deleted.
    z4h: installing systemd completions
    z4h: installing zsh-history-substring-search
    z4h: installing zsh-autosuggestions
    z4h: installing zsh-completions
    z4h: installing zsh-syntax-highlighting
    z4h: installing terminfo
    z4h: installing fzf
    z4h: fetching fzf binary
    z4h: installing ohmyzsh/ohmyzsh
    z4h: installing powerlevel10k
    z4h: fetching gitstatus binary
    z4h: initializing zsh

    Zsh For Humans installed successfully!

    Next steps:

    - Your new personal Zsh config is in ~/.zshrc. Edit this file to export
        environment variables, define aliases, etc. There are plenty of examples and
        comments to get you started.

    - Zsh does not read startup files used by Bash. You might want to copy bits
        and pieces from them to ~/.zshrc. Here are the files:

        ~/.profile
        ~/.bash_profile
        ~/.bashrc

    - Prompt config from Powerlevel10k is in ~/.p10k.zsh. To customize prompt, you
        can either manually edit this file or generate a new version through the
        wizard:

        p10k configure

    Enjoy Zsh For Humans!

å®‰è£…å®Œæˆåè®°å¾—æŒ‘é€‰ Bash é…ç½®æ–‡ä»¶çš„éƒ¨åˆ†è®¾ç½®åˆ° ~/.zshrc

      ~/.profile
      ~/.bashrc

#### zshæ’ä»¶ç®¡ç†å™¨

ç®€å•ä½¿ç”¨ä¸éœ€è¦æ’ä»¶ç®¡ç†å™¨ï¼Œå®‰è£… zsh4humans è¶³å¤Ÿäº†ã€‚

antigen

    ä¸æ›´æ–°äº†2019
        https://github.com/zsh-users/antigen
        https://github.com/zsh-users/antigen/wiki/Installation

    sudo apt install zsh-antigen

    è¿™ä¸ªæ˜¯æ¥ç­çš„ https://github.com/mattmc3/antidote

zinitï¼ˆåŸ zpluginï¼‰æ’ä»¶ç®¡ç†å™¨

    https://github.com/zdharma-continuum/zinit
    https://gist.github.com/laggardkernel/4a4c4986ccdcaf47b91e8227f9868ded
    https://zhuanlan.zhihu.com/p/98450570

    è¿™ä¸ªæ’ä»¶ç®¡ç†å™¨åœ¨ ~/.zshrc æ–‡ä»¶ä¸­çš„åŠ è½½è®¾ç½®å¦‚ä¸‹

        # Load powerlevel10k theme
        zinit ice depth"1" # git clone depth
        zinit light romkatv/powerlevel10k

#### è‡ªå¸¦æ’ä»¶ç®¡ç†å™¨ï¼Œå†…ç½®è¶…å¤šæ’ä»¶å’Œä¸»é¢˜çš„ ohmyzsh

    å¦‚æœåªæ˜¯ç®€å•ä½¿ç”¨ zsh + powerlevel10k + è‡ªåŠ¨å®Œæˆç­‰å‡ ä¸ªæ’ä»¶ï¼Œä¸éœ€è¦å®‰è£…ohmyzshï¼Œè¿™è´§å¤ªæ…¢ï¼Œè€Œä¸”ç»å¸¸è‡ªåŠ¨å‡çº§ï¼Œä½ è¿›å…¥ zsh æ—¶ä¼šç­‰åŠå¤©å®ƒæ›´æ–°æ‰ç»™å‡ºæç¤ºè¡Œ...

ohmyzsh æ˜¯åœ¨ zsh çš„åŸºç¡€ä¸Šå¢åŠ äº†æ›´å¤šçš„èŠ±æ ·çš„shellå°è£…ã€ä¸»é¢˜ç®¡ç†ç­‰ã€‚

    https://ohmyz.sh/
        https://github.com/ohmyzsh/ohmyzsh

å…ˆåœ¨ä½ ä½¿ç”¨çš„ç»ˆç«¯æ¨¡æ‹Ÿå™¨çš„è®¡ç®—æœºä¸Šå®‰è£… MesloLGS NF å­—ä½“ï¼Œè¯¦è§ç« èŠ‚[å›¾æ ‡å­—ä½“]ã€‚

ohmyzsh ç›®å‰æ˜¯ä» github å®‰è£…

    # wget https://github.com/robbyrussell/oh-my-zsh/raw/master/tools/install.sh -O - | sh
    sh -c "$(wget https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh -O -)"

    # æˆ– sh -c "$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"

åœ¨ ~/.zshrc é‡Œè®¾ç½®ä¸»é¢˜ï¼Œé»˜è®¤ robbyrussell

    ZSH_THEME=â€robbyrussellâ€

å¯ç”¨æ’ä»¶ï¼Œç¼–è¾‘ ~/.zshrc æ–‡ä»¶ï¼Œæ‰¾åˆ° plugins= çš„æ®µè½å¡«å†™æ’ä»¶åï¼Œç©ºæ ¼æˆ–å›è½¦åˆ†éš”

    plugins=(git
        conda
        # other plugins...
        zsh-autosuggestions
        # å®˜ç½‘ä»‹ç»è¦æ”¾åˆ°æœ€å
        zsh-syntax-highlighting
    )

ä¸‹è½½ä¸»é¢˜

    https://github.com/ohmyzsh/ohmyzsh/wiki/Customization#overriding-and-adding-themes

    å†…ç½®ä¸»é¢˜ https://github.com/ohmyzsh/ohmyzsh/wiki/Themes

    æ›´å¤šçš„ä¸»é¢˜
        https://github.com/ohmyzsh/ohmyzsh/wiki/External-themes
            https://github.com/unixorn/awesome-zsh-plugins

å†…ç½®ä¸»é¢˜ bira æ¯”è¾ƒç®€æ´ï¼Œå¯æ‰‹å·¥ä¿®æ”¹æ·»åŠ æ—¶é—´æç¤º `RPROMPT="[%*]%B${return_code}%b"` å›¾ä¾‹ ![bira](https://user-images.githubusercontent.com/49100982/108254762-7a77a480-716c-11eb-8665-b4f459fd8920.jpg)ã€‚

é¢å¤–ä¸»é¢˜ [Bullet train](https://github.com/caiogondim/bullet-train.zsh)ï¼Œå¯æ‰‹å·¥ä¿®æ”¹ä¸»æœºåå­—æ®µé¢œè‰²`BULLETTRAIN_CONTEXT_BG=magenta` ã€‚

å†…ç½®æ’ä»¶åœ¨ $ZSH/plugins/ ç›®å½•ä¸‹ï¼ˆé»˜è®¤ ~/.oh-my-zsh/plugins/ï¼‰ï¼Œå…¼å®¹zshæ’ä»¶ã€‚

ohmyzshè‡ªå¸¦å¾ˆå¤šä¸»é¢˜å’Œæ’ä»¶ï¼Œç”¨æˆ·è‡ªå·±ä¸‹è½½å®šåˆ¶ä¸»é¢˜å’Œæ’ä»¶çš„ä½ç½® $ZSH_CUSTOM ç›®å½•ä¸‹ï¼ˆé»˜è®¤ ~/.oh-my-zsh/customï¼‰

    $ZSH_CUSTOM
    â”œâ”€â”€ plugins
    â””â”€â”€ themes
        â””â”€â”€ my_awesome_theme.zsh-theme

 ~/.zshrc æ–‡ä»¶å·²ç»è¢« ohmyzsh æ¥ç®¡äº†ï¼Œæ’ä»¶ä¸éœ€è¦ç”¨ source è¿è¡Œï¼Œæ”¹ä¸º plugins=(...) çš„å½¢å¼ã€‚

    git clone --depth=1 https://github.com/zsh-users/zsh-autosuggestions ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions

    git clone --depth=1 https://github.com/zsh-users/zsh-syntax-highlighting.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting

å¦‚æœä½ æƒ³ç”¨è‡ªå·±å®‰è£…çš„æ’ä»¶ï¼Œä¹Ÿå¯ä»¥ç»§ç»­ source xxx ã€‚

ohmyzshçš„æ’ä»¶ç®¡ç†æœºåˆ¶æ›´æ™ºèƒ½ï¼Œè¿˜ä¼šæç¤ºæ›´æ–°ï¼Œå»ºè®®ç”¨è¿™ç§æ–¹å¼é…ç½®ï¼Œä¸å†ç”¨ ~/.zshrc æ–‡ä»¶é‡Œé€ä¸ª source xxxx çš„æ–¹å¼ã€‚

#### .zshrc é…ç½®æ–‡ä»¶æ ·ä¾‹

å®‰è£… powerlevle10kã€ohmyzsh(å¯é€‰) ç­‰å‡ ä¸ªæ’ä»¶åçš„é…ç½®

```zsh

####################################################################
# powerlevel10k è‡ªåŠ¨ç”Ÿæˆçš„é¦–è¡Œï¼Œä¸ç”¨åŠ¨
# Enable Powerlevel10k instant prompt. Should stay close to the top of ~/.zshrc.
# Initialization code that may require console input (password prompts, [y/n]
# confirmations, etc.) must go above this block; everything else may go below.
if [[ -r "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh" ]]; then
  source "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh"
fi

####################################################################
# zsh è‡ªå·±çš„å†…å®¹ï¼Œä¸ç”¨åŠ¨
# Lines configured by zsh-newuser-install
HISTFILE=~/.histfile
HISTSIZE=1000
SAVEHIST=1000
bindkey -v
# End of lines configured by zsh-newuser-install
# The following lines were added by compinstall
zstyle :compinstall filename '/home/uu/.zshrc'

autoload -Uz compinit
compinit
# End of lines added by compinstall

####################################################################
# å¦‚æœå®‰è£…äº† ohmyzsh ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€å †è®¾ç½®ï¼Œä¸ç”¨ç®¡ä»–
# ...
# ...
# ohmyzsh è‡ªå¸¦æ’ä»¶ç®¡ç†ï¼Œåœ¨ plugin=() æ®µè½å¯ç”¨å†…ç½®æ’ä»¶ï¼Œå¯ä»¥åœ¨è¿™é‡ŒåŠ è½½é‚£äº› source xxx çš„æ’ä»¶

####################################################################
# Zshï¼šåŠ è½½æ’ä»¶æˆ–å°å·¥å…·
#
# å¦‚æœæ˜¯ç”¨ apt install å®‰è£…çš„å‘è¡Œç‰ˆæ’ä»¶ï¼Œä½ç½®åœ¨ /usr/share/ ç›®å½•
# æ‰‹åŠ¨å®‰è£…çš„æ’ä»¶ï¼Œä½ç½®åœ¨ ~/.zsh/plugins/ ç›®å½•

# åŠ è½½æ’ä»¶ï¼šçŠ¶æ€æ å·¥å…· powerline
# å¦‚æœæ˜¯pipå®‰è£…çš„æŸ¥çœ‹è·¯å¾„ç”¨ pip show powerline-status
# source /usr/share/powerline/bindings/zsh/powerline.zsh

# åŠ è½½æ’ä»¶ï¼šå‘½ä»¤è‡ªåŠ¨å®Œæˆã€‚å¦‚æœæ˜¯å®‰è£…çš„å‘è¡Œç‰ˆè‡ªå¸¦çš„ï¼Œä¸éœ€è¦åœ¨è¿™é‡ŒåŠ è½½
# source ~/.zsh/plugins/zsh-autosuggestions/zsh-autosuggestions.zsh
source /usr/share/zsh-autosuggestions/zsh-autosuggestions.zsh

# åŠ è½½æ’ä»¶ï¼šå‘½ä»¤è¯­æ³•é«˜äº®ã€‚å¦‚æœæ˜¯å®‰è£…çš„å‘è¡Œç‰ˆè‡ªå¸¦çš„ï¼Œä¸éœ€è¦åœ¨è¿™é‡ŒåŠ è½½
# å®˜ç½‘æç¤ºè¦åœ¨é…ç½®æ–‡ä»¶çš„æœ€åä¸€è¡Œ
# source ~/.zsh/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh
source /usr/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh

#################################
# Zshï¼šæ‰‹åŠ¨é…ç½®æ’ä»¶

# zsh æ‰§è¡Œ cd xxx å‘½ä»¤åè‡ªåŠ¨æ‰§è¡Œ ls åˆ—å‡ºå½“å‰æ–‡ä»¶
chpwd() ls -A
chpwd

# å‘½ä»¤è‡ªåŠ¨å®Œæˆçš„é¢œè‰²å¤ªæš—  # ,bg=cyan,bold,underline
# zsh æ‰‹å†Œçš„å­—ç¬¦é«˜äº®éƒ¨åˆ†ï¼š`man zshzle`
# https://github.com/zsh-users/zsh-autosuggestions#suggestion-highlight-style
ZSH_AUTOSUGGEST_HIGHLIGHT_STYLE="fg=#006799,bold"

####################################################################

# å¦‚æœæœ‰ .bash_profileï¼Œæ‰§è¡Œä¹‹
[[ -f ~/.bash_profile ]] && source ~/.bash_profile

# powerlevel10k å®‰è£…ç¨‹åºè‡ªåŠ¨æ·»åŠ çš„ï¼Œä¸ç”¨åŠ¨
source ~/powerlevel10k/powerlevel10k.zsh-theme

# To customize prompt, run `p10k configure` or edit ~/.p10k.zsh.
[[ ! -f ~/.p10k.zsh ]] || source ~/.p10k.zsh

```

### Linux æ¡Œé¢ä¸‹çš„ç»ˆç«¯æ¨¡æ‹Ÿå™¨

æœ‰äº›ç»ˆç«¯æ¨¡æ‹Ÿå™¨æ˜¯è·¨å¹³å°çš„ï¼Œè§ç« èŠ‚ [å…¶ä»–ç»ˆç«¯æ¨¡æ‹Ÿå™¨]ã€‚

ä¸€äº›ä½¿ç”¨ä¹ æƒ¯çš„å˜åŒ–

    æ–°å»ºçš„ä¼šè¯é»˜è®¤ä¸æ‰§è¡Œ .bash_profileï¼Œéœ€è¦è®¾ç½®æ‰§è¡Œç™»å½•è„šæœ¬ `/bin/bash -l`ã€‚

    æ–°å»ºæ ‡ç­¾ä¼šç»§æ‰¿å‰ä¸€ä¸ªæ ‡ç­¾çš„ä¼šè¯ç¯å¢ƒå’Œè·¯å¾„ã€‚æ¯”å¦‚å½“å‰æ ‡ç­¾è¿›å…¥äº† toolbox å®¹å™¨ï¼Œè¿™æ—¶ç‚¹å‡»æ–°å»ºçš„æ ‡ç­¾æ‰“å¼€å°±æ˜¯è¿›å…¥ toolbox å®¹å™¨çš„ç¯å¢ƒã€‚åˆ‡æ¢åˆ°é»˜è®¤æ²¡è¿›å…¥å®¹å™¨çš„æ ‡ç­¾ï¼Œç‚¹å‡»æ–°å»ºæ ‡ç­¾è¿›å…¥çš„ç¯å¢ƒå°±è·Ÿå½“å‰æ ‡ç­¾çš„ç¯å¢ƒä¸€è‡´ã€‚

    ç›®å‰çš„ç»ˆç«¯æ¨¡æ‹Ÿå™¨çš„é€‰æ‹©å³å¤åˆ¶åŠŸèƒ½ç»†åˆ†äº†ï¼šé¼ æ ‡é€‰æ‹©çš„è‡ªåŠ¨å¤åˆ¶åªæ˜¯å†…éƒ¨å‰ªè´´æ¿å¯ç”¨ï¼Œç²˜è´´çƒ­é”® shift+ins æˆ–é¼ æ ‡ä¸­é”®ã€‚é€‰æ‹©æ–‡å­—åï¼Œå³é”®èœå•é‡Œçš„å¤åˆ¶é€‰é¡¹æ‰ä¼šåˆ°ç³»ç»Ÿå‰ªè´´æ¿ï¼Œç„¶ååœ¨å…¶å®ƒè½¯ä»¶çš„å¯ä»¥ç²˜è´´ã€‚ç²˜è´´æ“ä½œç³»ç»Ÿå‰ªåˆ‡æ¿çš„å†…å®¹éœ€è¦ç”¨é¼ æ ‡å³é”®èœå•çš„â€œç²˜è´´â€é€‰é¡¹æ‰å¯ä»¥ã€‚åœ¨ tmux ä¸­éœ€è¦æŒ‰ä½ shift é”®ç‚¹å³é”®æ‰å¼¹èœå•å‡ºæ¥ã€‚

    æ‰‹åŠ¨æ‰“å¼€å…‰æ ‡é—ªåŠ¨ï¼Œè®¾ç½®ç¼“å­˜å±å¹•å†…å®¹ 10000 è¡Œã€‚

ä¸€èˆ¬æƒ…å†µä¸‹ä½¿ç”¨æ¡Œé¢å†…ç½®çš„ç»ˆç«¯æ¨¡æ‹Ÿå™¨è¶³å¤Ÿäº†ï¼Œå› ä¸ºæˆ‘çš„ Fedora è‡ªå¸¦çš„ Gnome Terminal ä¸æ”¯æŒèƒŒæ™¯å›¾ç‰‡ï¼Œæ‰€ä»¥è‡ªè¡Œå®‰è£…äº† kitty Terminalï¼Œå…¼å®¹æ€§å’Œç¨³å®šæ€§æœ€å¥½çš„æ˜¯ Konsoleï¼Œå¯æƒœé€Ÿåº¦å¤ªæ…¢ã€‚

KDE æ¡Œé¢è‡ªå¸¦ Konsoleï¼Œå¯è®¢åˆ¶é€‰é¡¹ä¸°å¯Œï¼Œæ”¯æŒèƒŒæ™¯å›¾ç‰‡ï¼š

    æ˜¾ç¤ºåˆ·æ–°çš„é€Ÿåº¦æœ‰ç‚¹æ…¢ï¼ŒæŒ‰ä½å›è½¦é”®çœ‹çœ‹å°±çŸ¥é“äº†ã€‚ä½†æ˜¯å…¼å®¹æ€§æœ€å¥½ï¼Œæ²¡æœ‰åŠŸèƒ½æ€§é—®é¢˜ã€‚

    å»ºè®®ç”¨ dnf å®‰è£…ï¼Œå›¾å½¢ç•Œé¢çš„ Gnome è½¯ä»¶é‡Œçš„ fedora ä»“åº“å’Œ flatpak ä»“åº“çš„ç‰ˆæœ¬æ›´æ–°ä¸åŠæ—¶ã€‚

    ä¸»é¢˜é…è‰²æ–¹æ¡ˆå»ºè®®ä½¿ç”¨ Nord themeï¼Œå‚è§ [é…è‰²æ–¹æ¡ˆï¼šæ”¯æŒç»ˆç«¯æ¨¡æ‹Ÿå™¨å’Œå‘½ä»¤è¡Œè½¯ä»¶çš„ä¸»é¢˜ Nord theme ç­‰]

        $ cd ~/your_github_dir/

        $ git clone --depth=1 git@github.com:arcticicestudio/nord-konsole

        $ cd nord-konsole

        $ export XDG_DATA_HOME=$HOME/.local/share; ./install.sh

        å¦‚æœæ˜¯ flatpak å®‰è£…çš„ Konsoleï¼Œå»ºè®®ç”¨ fedora å®˜æ–¹ä»“åº“çš„ç‰ˆæœ¬ï¼š

            $ export XDG_DATA_HOME=$HOME/.var/app/org.kde.konsole/data

            $ mkdir -p $XDG_DATA_HOME/konsole

            $ cp src/nord.colorscheme $XDG_DATA_HOME/konsole

    çª—å£ä¸»èœå•æ é€‰æ‹© Setting-->Configure Konsoleï¼š

        ->Generalï¼Œå–æ¶ˆå‹¾é€‰ â€œRemember Window Sizeâ€ï¼Œå‹¾é€‰ â€œRemove windonw title bar and frameâ€ï¼Œè¿™æ ·ä½ çš„å±å¹•å¯ç”¨é¢ç§¯æ‰©å¤§äº†ä¸€è¡Œã€‚

        ->Profilesï¼Œé€‰Newæ–°å»º ç„¶åç‚¹å‡»okç¡®å®šã€‚

        ç„¶åEditç¼–è¾‘åˆšåˆšæ–°å»ºçš„Profile1ï¼š

            -->General Settings->command: /bin/bash -lï¼Œè¿™æ ·è®¾ç½®ä¼šè¯æ‰§è¡Œç™»å½•è„šæœ¬ï¼Œå¹¶å–æ¶ˆå‹¾é€‰â€œStart in same directory as current sessionâ€ï¼Œè¿™æ ·æ–°å»ºæ ‡ç­¾çš„ä¼šè¯ä¸ä¼šè‡ªåŠ¨è¿›å…¥ä¹‹å‰çš„å·¥ä½œç›®å½•ã€‚

            -->Appearanceï¼Œé¢œè‰²æ–¹æ¡ˆé€‰ Nord å³å¯ã€‚è¿˜å¯ä»¥é€‰ Edit è¯¥é¢œè‰²æ–¹æ¡ˆï¼Œä¸€èˆ¬æŠŠèƒŒæ™¯é€æ˜åº¦è®¾ä¸º 10%ï¼Œå£çº¸é€æ˜åº¦è®¾ä¸º 50%ï¼ˆæ ¹æ®ä½ é€‰æ‹©çš„èƒŒæ™¯å›¾ç‰‡è°ƒæ•´ï¼‰å³å¯ã€‚

            -->Scrollingï¼Œç»™ Scrollback è®¾ç½®åˆ° 10000 è¡Œï¼Œé˜²æ­¢çœ‹ä¸å…¨è¾“å‡ºå†…å®¹ã€‚

            -->Mouseï¼Œå¦‚æœéœ€è¦é¼ æ ‡é€‰æ‹©å³å¤åˆ¶åˆ°æ“ä½œç³»ç»Ÿå‰ªåˆ‡æ¿çš„è€ä¹ æƒ¯ï¼Œå‹¾é€‰â€œCopy on selectâ€å³å¯ã€‚é¼ æ ‡å³é”®èœå•çš„å¤åˆ¶å’Œç²˜è´´éƒ½æ˜¯åˆ°æ“ä½œç³»ç»Ÿå‰ªåˆ‡æ¿ã€‚

                å…¶å®ƒå¾ˆå¤šç»ˆç«¯æ¨¡æ‹Ÿå™¨è½¯ä»¶ä½¿ç”¨è‡ªå·±çš„ç§æœ‰å‰ªåˆ‡æ¿ï¼Œé¼ æ ‡é€‰æ‹©é»˜è®¤åˆ°ç§æœ‰å‰ªåˆ‡æ¿ï¼Œshift+ins çƒ­é”®ä¹Ÿæ˜¯ä»ç§æœ‰å‰ªåˆ‡æ¿ç²˜è´´ï¼Œåªæœ‰ä½¿ç”¨é¼ æ ‡å³é”®èœå•çš„å¤åˆ¶å’Œç²˜è´´æ‰æ˜¯åˆ°æ“ä½œç³»ç»Ÿå‰ªåˆ‡æ¿ã€‚

        åˆ«å¿˜è®°ç»™æ–°å»ºçš„Profile1çš„é€‰æ‹©â€œSet as Defaultâ€ï¼Œè¿™æ ·æ‰ä¼šç”Ÿæ•ˆã€‚

    çª—å£ä¸»èœå•æ é€‰æ‹© â€œSettingâ€ï¼Œå–æ¶ˆå‹¾é€‰ â€œShow Menubarâ€ï¼Œè¿™æ—¶ä¸»èœå•æˆä¸ºçª—å£å³ä¸Šè§’çš„ä¸€ä¸ªä¸‰ä¸ªæ¨ªçº¿çš„å›¾æ ‡ï¼Œç‚¹å‡»æ‰æ˜¾ç¤ºä¸»èœå•æ ï¼Œè¿™æ ·ä½ çš„å±å¹•å¯ç”¨é¢ç§¯åˆæ‰©å¤§äº†ä¸€è¡Œã€‚

Xfce æ¡Œé¢è‡ªå¸¦ Xfce Terminalï¼Œæ”¯æŒèƒŒæ™¯å›¾ç‰‡ï¼š

    ä¸»é¢˜é…è‰²æ–¹æ¡ˆå»ºè®®ä½¿ç”¨ Nord themeï¼Œå‚è§ [é…è‰²æ–¹æ¡ˆï¼šæ”¯æŒç»ˆç«¯æ¨¡æ‹Ÿå™¨å’Œå‘½ä»¤è¡Œè½¯ä»¶çš„ä¸»é¢˜ Nord theme ç­‰]

        $ cd ~/your_github_dir/

        $ git clone --depth=1 git@github.com:arcticicestudio/nord-xfce-terminal

        $ cd nord-xfce-terminal/

        $ ./install.sh

    æˆ–å¯ä»¥æ‰‹åŠ¨æŠŠæ–‡ä»¶ `nord.theme` æ‹·è´åˆ°æœ¬åœ°çš„é…ç½®ç›®å½• `~/.local/share/xfce4/terminal/colorschemes` ä¸‹å³å¯ã€‚

    çª—å£èœå•é€‰ Edit->Preference:

        -->Colors->Presetsï¼Œé€‰æ‹© Nord é¢œè‰²æ–¹æ¡ˆã€‚

        -->General-->Commandï¼Œå‹¾é€‰ `Run command as login shell` ä»¥è®¾ç½®ä¼šè¯æ‰§è¡Œç™»å½•è„šæœ¬

        -->Appeaerance-->Backgroundï¼Œè®¾ç½®èƒŒæ™¯å›¾ç‰‡ï¼Œç›®å‰ä¸æ”¯æŒé€æ˜ï¼Œåªæ”¯æŒå›¾ç‰‡è°ƒæ˜æš—
                      -->Open New Windowsï¼Œåªå‹¾é€‰ `Display toolbar ...`ï¼Œè¿™æ ·æ‰“å¼€çš„çª—å£ä¸ä¼šæœ‰æ ‡é¢˜æ å’Œèœå•æ 

Ptyxis ä»¥å®¹å™¨ä¸ºä¸­å¿ƒçš„ç»ˆç«¯æ¨¡æ‹Ÿå™¨ï¼ŒåŸå Promptï¼Œæ˜¾ç¤ºåˆ·æ–°é€Ÿåº¦å¿«

    Fedora 41 ç”¨å®ƒä»£æ›¿äº† Gnome Terminal

    å®ƒçš„ç‰¹è‰²æ˜¯æœ‰ä¸€ä¸ªå°å‹çš„ ptyxis-agent åå°è¿›ç¨‹æ¥ç®¡ç† PTYã€PID è·Ÿè¸ªå’Œå®¹å™¨ç›‘æ§ã€‚
    è€Œä¸”ï¼Œå³ä½¿åœ¨ Flatpak ä¸­ï¼Œå®ƒä¹Ÿæ”¯æŒæœ¬æœºâ€œç”¨æˆ·ä¼šè¯â€ï¼Œä»¥åŠ Podmanã€Toolboxã€Distrobox å’Œ JHBuildã€‚

    ä¸»é¢˜é…è‰²æ–¹æ¡ˆå†…ç½®äº† Nord themeï¼Œä½†æ˜¯ä¸æ”¯æŒèƒŒæ™¯å›¾ç‰‡ï¼Œå·²ç»å†…ç½®åœ¨ Fedora 41ã€‚

    æ— æ³•è®¾ç½®é¼ æ ‡é€‰æ‹©æ–‡å­—å³å¤åˆ¶åˆ°ç³»ç»Ÿå‰ªåˆ‡æ¿ã€‚

    ç›®å‰å¯¹ tmux çš„æ”¯æŒä¸å¥½ï¼Œé¼ æ ‡ä¸å¬è¯ã€‚

    ç›®å‰åªèƒ½ä½¿ç”¨ dconf è®¾ç½®çª—å£é€æ˜åº¦

        $ dconf read /org/gnome/Ptyxis/default-profile-uuid
        'ddb03e60e8d36dec96ef51fb67345f90'

        $ dconf write /org/gnome/Ptyxis/Profiles/ddb03e60e8d36dec96ef51fb67345f90/opacity 0.95

Gnome Terminalï¼Œä¸æ”¯æŒèƒŒæ™¯å›¾ç‰‡ï¼š

    Gnome æ¡Œé¢è‡ªå¸¦ Xtermï¼Œè‡ª Fedora 41 å¼€å§‹è¢« Ptyxis æ›¿æ¢

    ä¸»é¢˜é…è‰²æ–¹æ¡ˆå»ºè®®ä½¿ç”¨ Nord themeï¼Œå‚è§ [é…è‰²æ–¹æ¡ˆï¼šæ”¯æŒç»ˆç«¯æ¨¡æ‹Ÿå™¨å’Œå‘½ä»¤è¡Œè½¯ä»¶çš„ä¸»é¢˜ Nord theme ç­‰]

        $ cd ~/your_github_dir/

        $ git clone --depth=1 https://github.com/nordtheme/gnome-terminal.git gnome-terminal-nordtheme

        $ cd gnome-terminal-nordtheme/src; ./nord.sh

        æ‰§è¡Œåæ–°å»ºç»ˆç«¯çª—å£æ—¶å°±å¤šäº†ä¸ª Nord çš„é…ç½®æ–‡ä»¶ï¼Œè®¾ä¸ºé»˜è®¤å³å¯

    çª—å£èœå•é€‰ Profileï¼Œé€‰ Nordï¼Œè®¾ä¸ºé»˜è®¤å³å¯ï¼Œå…¶å®ƒé€‰é¡¹ç‚¹å‡»å³ä¾§é¡¹ï¼š

        -->command å‹¾é€‰ Run command as a login shell ä»¥è®¾ç½®ä¼šè¯æ‰§è¡Œç™»å½•è„šæœ¬

        -->colorï¼šä¸å†æ”¯æŒè®¾ç½®èƒŒæ™¯å›¾ç‰‡ï¼Œä½†ä»å¯è®¾ç½®çª—å£é€æ˜åº¦ã€‚

kitty ä½¿ç”¨ gpu è¿›è¡Œæ˜¾ç¤ºåŠ é€Ÿçš„æœ¬åœ°ç»ˆç«¯æ¨¡æ‹Ÿå™¨ï¼Œåªèƒ½åœ¨ Linux/MacOS æ¡Œé¢ä¸‹ä½¿ç”¨

    kitty çš„ç³»ç»Ÿèµ„æºå ç”¨æœ€å°‘ï¼ŒåŸºæœ¬åŠŸèƒ½å…¨æœ‰
        https://sw.kovidgoyal.net/kitty/performance/#energy-usage

        https://github.com/kovidgoyal/kitty
            https://www.linuxshelltips.com/kitty-terminal-emulator-linux/

    å·²çŸ¥é—®é¢˜ï¼šå…³é—­ kitty åå¹²æ‰°ä¸­æ–‡è¾“å…¥æ³•åœ¨å…¶å®ƒè½¯ä»¶ä¸­æ‰“ä¸ä¸Šå­—ï¼Œéœ€è¦å†æ‰“å¼€ kitty

    é…ç½®è¯´æ˜

        https://sw.kovidgoyal.net/kitty/conf/

    å¸¸ç”¨æ’ä»¶æŒºå¥½ç”¨ https://sw.kovidgoyal.net/kitty/kittens_intro/

    è®¾ç½® kitty ä½¿ç”¨é¢œè‰²ä¸»é¢˜ï¼Œè¿è¡Œå‘½ä»¤ `kitty +kitten themes`ï¼Œä¼šè¿›å…¥å­—ç¬¦GUIç•Œé¢ï¼Œæ ¹æ®æç¤ºæ“ä½œå³å¯ï¼Œæ¨èä½¿ç”¨å†…ç½® Nord ä¸»é¢˜ã€‚

    å¤åˆ¶å’Œç²˜è´´ï¼šå› ä¸ºæ²¡æœ‰å³é”®èœå•ï¼Œæ‰€ä»¥åªèƒ½ç”¨çƒ­é”®

        ctrl+shift+c å¤åˆ¶åˆ°æ“ä½œç³»ç»Ÿå‰ªåˆ‡æ¿
        ctrl+shift+v ä»æ“ä½œç³»ç»Ÿå‰ªåˆ‡æ¿ç²˜è´´

        shift+insert ä»ä½ é¼ æ ‡é€‰æ‹©çš„å†…å®¹ç²˜è´´

        å¦‚æœéœ€è¦é¼ æ ‡é€‰æ‹©çš„å†…å®¹è‡ªåŠ¨å¤åˆ¶åˆ°æ“ä½œç³»ç»Ÿå‰ªåˆ‡æ¿çš„è€ä¹ æƒ¯ï¼Œé…ç½®æ–‡ä»¶ä¸­å¼€å¯â€œCopy on selectâ€å³å¯

    æ»šåŠ¨çª—å£å†…å®¹ï¼š

        é¼ æ ‡æ»šè½®ï¼Œå³ä¾§å‡ºç°çš„æ»šåŠ¨æ¡åªæ˜¾ç¤ºè¿›åº¦ä½†ä¸æ”¯æŒæ‹–åŠ¨

        è§¦æ‘¸æ¿æ‰‹åŠ¿ï¼ŒåŒæŒ‡ä¸Šä¸‹æ»‘åŠ¨ï¼šç­‰æ•ˆäºé¼ æ ‡æ»šè½®

        å‘ä¸Š/ä¸‹æ»šåŠ¨ï¼šCtrl+Shift+Up Ctrl+Shift+Down

        å‘ä¸Š/ä¸‹ç¿»é¡µï¼šCtrl+Shift+Page_Up Ctrl+Shift+Page_Down

        å¿«é€Ÿæ»šåŠ¨åˆ°é¡¶/åº•éƒ¨ï¼šCtrl+Shift+Home Ctrl+Shift+End

        æ»šåŠ¨åˆ°å‰ä¸€ä¸ª/ä¸‹ä¸€ä¸ªshellå‘½ä»¤çš„è¾“å‡º: ctrl+shift+x, ctrl+shift+z

    æŸ¥æ‰¾çª—å£ä¸­çš„æ–‡å­—ï¼š

        æŒ‰ä¸‹ ctrl+shift+hï¼Œä¼šé»˜è®¤ä½¿ç”¨ `less` æ‰“å¼€æ»šåŠ¨ç¼“å†²åŒºï¼ˆscrollback bufferï¼‰ï¼Œå‡ºç° : æç¤ºç¬¦

            æŒ‰ä¸‹ / é”®åå†è¾“å…¥è¦æœç´¢çš„å†…å®¹ï¼ŒæŒ‰ä¸‹å›è½¦é”®å³å¯è¿›è¡Œæ­£å‘æœç´¢

            æŒ‰ä¸‹ ? é”®åè¾“å…¥å†…å®¹åˆ™è¿›è¡Œåå‘æœç´¢

            æŒ‰ä¸‹ n é”®æˆ– N é”®æ¥å‘å‰æˆ–å‘åé€ä¸ªæŸ¥æ‰¾åŒ¹é…é¡¹

            æŒ‰ä¸‹å›è½¦é”®é‡æ–°è¿›å…¥ : æç¤ºç¬¦å·ï¼Œè¿›è¡Œæ–°çš„æœç´¢

        ä¹Ÿå¯å®‰è£…æ’ä»¶ [kitty-search](https://github.com/trygveaa/kitty-kitten-search)

    é€‰é¡¹å¡æ“ä½œï¼šæ¯ä¸ªé€‰é¡¹å¡å¯¹åº”ä¸€ä¸ªçª—å£

        æ–°å»ºé€‰é¡¹å¡ï¼šCtrl+Shift+Tï¼Œçª—å£æœ€ä¸‹ä¸€è¡Œå°±å˜æˆé€‰é¡¹å¡çš„æ ‡é¢˜æ äº†ï¼Œé¼ æ ‡ç‚¹å‡»å³å¯åˆ‡æ¢

        åˆ‡æ¢åˆ°å‰ä¸€ä¸ª/åä¸€ä¸ªé€‰é¡¹å¡ï¼šCtrl+Shift+Left Ctrl+Shift+Right

        å½“å‰é€‰é¡¹å¡å·¦ç§»/å³ç§»ï¼šctrl+shift+, ctrl+shift+.

        Close Tabï¼šCtrl+Shift+Q

    çª—å£æ“ä½œï¼šæ¯ä¸ªé€‰é¡¹å¡ä¸‹çš„çª—å£è¿˜å¯ä»¥æ‹†åˆ†ä¸ºå¤šä¸ªçª—å£

        çºµå‘æ‹†åˆ†çª—å£ï¼š Ctrl+Shift+Enter

        åœ¨ä¸åŒçª—å£ä¹‹é—´åˆ‡æ¢ï¼šé¼ æ ‡ç‚¹å‡»çª—å£æˆ– Ctrl+Shift+[ æˆ– Ctrl+Shift+]

        çª—å£æ’åˆ—ä¸ºå¤šç§å¸ƒå±€ï¼š Ctrl+Shift+L

        å…³é—­çª—å£ï¼š Ctrl+Shift+w

    shell é›†æˆï¼šé¼ æ ‡ç‚¹å‡»å‘½ä»¤è¡Œæ–‡å­—å³å¯ç§»åŠ¨å…‰æ ‡åˆ°æ­¤ç­‰

        https://sw.kovidgoyal.net/kitty/shell-integration/#shell-integration

    sshé—®é¢˜ï¼šæœ‰æ—¶ ssh è¿æ¥åˆ°è¿œç¨‹è®¡ç®—æœºæ—¶ï¼Œå¯èƒ½ä¼šæŠ¥é”™ç»ˆç«¯æœªçŸ¥æˆ–æ‰“å¼€ç»ˆç«¯å¤±è´¥ã€‚æ˜¯å› ä¸º Kitty terminfo æ–‡ä»¶ï¼ˆcurses åº“ä¸­å¤„ç†ç‰¹å®šç»ˆç«¯åŠŸèƒ½çš„ä¸€ç»„ä¾‹ç¨‹ï¼‰åœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šä¸å¯ç”¨ã€‚

        alias sshk="kitty +kitten ssh" ä»¥åä½¿ç”¨ ssh æ‰§è¡Œ `sshk user@host` å³å¯

    æ‰©å±•æ’ä»¶

        https://sw.kovidgoyal.net/kitty/integrations

        åˆ—å‡ºæ’ä»¶

            $  kitty +kitten
            ã€‚ã€‚ã€‚

        åœ¨é…ç½®æ–‡ä»¶ä¸­æŠŠæ’ä»¶è®¾ç½®ä¸ºçƒ­é”®è°ƒç”¨

            map ctrl+shift+/ launch --type=overlay --allow-remote-control kitty +kitten scrollback

    æˆ‘ä½¿ç”¨çš„ $HOME$/.config/kitty/kitty.conf é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š

        #################################
        # æ¢å¤é»˜è®¤é…ç½® `cp /usr/share/doc/kitty/kitty.conf ~/.config/kitty/kitty.conf`

        # `kitty +kitten themes`
        # BEGIN_KITTY_THEME
        # Nord
        include current-theme.conf
        # END_KITTY_THEME

        # `kitten choose-fonts`
        # BEGIN_KITTY_FONTS
        font_family      family="MesloLGS Nerd Font"
        bold_font        auto
        italic_font      auto
        bold_italic_font auto
        font_size 12.0
        # END_KITTY_FONTS

        # é¼ æ ‡é€‰æ‹©å³å¤åˆ¶åˆ°æ“ä½œç³»ç»Ÿå‰ªåˆ‡æ¿
        copy_on_select clipboard

        # é€‰é¡¹å¡ç›¸å…³è®¾ç½®
        tab_bar_edge top
        tab_bar_style powerline
        tab_powerline_style round

        # æ–°å¼€çª—å£æ‰§è¡Œ shell ç™»å½•è„šæœ¬
        shell /bin/bash --login

        # çª—å£å†…å®¹ä¿ç•™çš„å¤šäº›æ–¹ä¾¿æŸ¥çœ‹
        scrollback_lines 10000

        # for use with quake mode drop-down window extension
        remember_window_size no

        # å£çº¸
        background_image /home/user/Pictures/125103.jpg
        background_image_layout scaled
        # background_opacity 0.9
        # background_blur 64

        # å…‰æ ‡é—ªåŠ¨
        cursor_blink_rate 500

        # å…³æ‰ shell_integration è®¾ç½®å…‰æ ‡å½¢çŠ¶
        shell_integration no-cursor
        cursor_shape block

        # shell_integration åŠŸèƒ½å¯ä»¥å®ç°å®šä½æ¯ä¸ªå‘½ä»¤è¾“å‡ºçš„å¼€å§‹ä½ç½®
        map f1 scroll_to_prompt -1  # jump to previous
        map f2 scroll_to_prompt 1   # jump to next
        map f3 scroll_to_prompt 0   # jump to last visited

gtk æ¡Œé¢è‡ªå¸¦ terminatorï¼Œçº¯ python çš„ä¸€ä¸ªå®ç°ï¼Œå°è£…äº† Gnome Terminalã€‚

Enlightenment æ¡Œé¢è‡ªå¸¦ Terminologyã€‚

sway çª—å£ç®¡ç†å™¨è‡ªå¸¦ footã€‚

guake ä»¿æ•ˆæ¸¸æˆ Quake çš„ä¸‹æ‹‰å¼ç»ˆç«¯çª—å£ï¼Œçº¯ python çš„ä¸€ä¸ªå®ç°ï¼Œå°è£…äº† Gnome Terminalã€‚ä¸ç”¨å®‰è£…è¿™ä¸ªï¼Œgnome æ¡Œé¢æœ‰æ‰©å±•å®ç°è¯¥åŠŸèƒ½ï¼Œå‚è§ç« èŠ‚ [ä½¿ç”¨ gnome æ‰©å±•] çš„ quake-modeã€‚

tilix åŸºäº gtk3 å¼€å‘çš„ä¸€ä¸ªå¹³é“ºå¼ç»ˆç«¯æ¨¡æ‹Ÿå™¨ï¼Œæ•ˆæœç±»ä¼¼ tmuxï¼Œä½†æ˜¯æ”¯æŒå„é¢æ¿çš„è‡ªå®šä¹‰æ‹–æ›³ã€‚

cool-retro-term æ˜¾ç¤ºæ•ˆæœæ˜¯ CRT æ˜¾ç¤ºå™¨ã€‚

terminology ä½¿ç”¨ EFLï¼ˆä¸æ”¯æŒWaylandï¼‰ çš„ç»ˆç«¯ä»¿çœŸå™¨ï¼Œå°½å¯èƒ½åœ°æ¨¡ä»¿ Xtermã€‚

Warp å·ç§°æ¯” iTerm2 é¡ºæ»‘ï¼ŒåŠå¼€æºï¼Œåªèƒ½åœ¨ MacOS æ¡Œé¢ä¸‹ä½¿ç”¨

    https://www.warp.dev/
        https://github.com/warpdotdev/Warp
        ä¸»é¢˜ https://github.com/warpdotdev/themes

#### i3 çª—å£ç®¡ç†å™¨è‡ªå¸¦ urxvt(rxvt-unicode)

é…ç½®å¤æ‚ï¼Œä¸æ•´äº†

    https://segmentfault.com/a/1190000020859490
    https://wiki.archlinux.org/title/Rxvt-unicode

æ”¯æŒè®¾ç½®èƒŒæ™¯å›¾ç‰‡

    $ sudo dnf install rxvt-unicode

urxvt å— Xresources æ§åˆ¶:

    ç¼–è¾‘é…ç½®æ–‡ä»¶
    $ vim ~/.Xresources

    åŠ è½½æ–‡ä»¶ï¼Œä½¿é…ç½®ç”Ÿæ•ˆ
    $ xrdb ~/.Xresources

    $ urxvt

terminfo æ–‡ä»¶åœ¨ /usr/share/terminfo/r/rxvt-unicodeï¼Œæ‹·è´åˆ°è¿œç¨‹ä¸»æœºçš„ ~/.terminfo/r/rxvt-unicode ä¸‹å³å¯è§£å†³ç»ˆç«¯ç‰¹æ®Šå­—ç¬¦æ— æ³•è¯†åˆ«æŠ¥é”™çš„é—®é¢˜ã€‚

.Xresourcesé…ç½®æ–‡ä»¶ç¤ºä¾‹ï¼Œå¤ªéº»çƒ¦äº†ï¼Œæš‚æ—¶è¿˜æ²¡é…ç½®åˆ©ç´¢ï¼Œä¸å¼„äº†ï¼š

```conf
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!
! https://segmentfault.com/a/1190000020859490
! https://wiki.archlinux.org/title/Rxvt-unicode

Xft.dpi: 96
!æŠ—é”¯é½¿
Xft.antialias: true
Xft.rgba: rgb
Xft.hinting: true
Xft.hintstyle: hintslight

! do not scroll with output
URxvt*scrollTtyOutput: false

! scroll in relation to buffer (with mouse scroll or Shift+Page Up)
URxvt*scrollWithBuffer: true

! scroll back to the bottom on keypress
URxvt*scrollTtyKeypress: true

!pager
URxvt.secondaryScreen: 1
URxvt.secondaryScroll: 0
URxvt.secondaryWheel: 1

URxvt.font: xft:MesloLGS Nerd Font:size=11
URxvt.letterSpace: -1

!ä½œä¸ºç™»å½• shell å¯åŠ¨
URxvt.loginShell: true
!ä½¿ç”¨çš„è¾“å…¥æ³•æ¡†æ¶åç§°ï¼Œè¿™æ ·æ‰å¯ä»¥è¾“å…¥ä¸­æ–‡
URxvt.inputMethod:IBus
!çª—å£å¤§å°ï¼šæŒ‰å­—ç¬¦æ•°çš„åˆ—xè¡Œ
URxvt.geometry: 110x30
URxvt.depth: 32

!æ ‡ç­¾å¼çª—å£
URxvt.perl-ext-common: tabbed

!URxvt.perl-ext-common:  ...,selection-to-clipboard,...
URxvt.clipboard.autocopy: true
URxvt.keysym.M-c: perl:clipboard:copy
URxvt.keysym.M-v: perl:clipboard:paste

!URxvt.keysym.F11: perl:fullscreen:switch
URxvt.multichar_encoding:gb #æ±‰å­—ç¼–ç 
URxvt.boldFont:-*-SimHei-* #ç²—å­—ä½“
URxvt.mfont: -*-simsun-medium-r-normal-*-14-*-*-*-c-*-gb*-* #æ±‰å­—å­—ä½“

URxvt.cursorBlink: true

URxvt.scrollstyle:rxvt
URxvt.scrollBar:True
URxvt.scrollBar_right:True

!å±å¹•ç¼“å†²1ä¸‡è¡Œï¼Œè¶³å¤Ÿäº†
URxvt.saveLines:10000

!èƒŒæ™¯ å‚è§æºä»£ç  /usr/lib64/urxvt/perl/background
URxvt.background.expr: scale keep { load "/home/uu/Pictures/3eleph.png" }
!æ§åˆ¶èƒŒæ™¯é€æ˜ï¼Œå˜æš—ï¼ˆ0..99ï¼‰ï¼Œå˜äº®ï¼ˆ101..200)ï¼Œ100 è¡¨ç¤ºæ²¡æœ‰é˜´å½±
URxvt.transparent: true
URxvt.shading: 150

URxvt.background: #2E3440
URxvt.foreground: rgb:d8/de/e9

!å¯é‡æ–°å®šä¹‰ xterm color0~15
URxvt.color12: rgb:5c/5c/ff

```

## å¸¸ç”¨ shell ç¼–ç¨‹

shell å‘½ä»¤æ–‡æ¡£è§ç« èŠ‚ [man/info æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯]ã€‚

éå¸¸å¥½ç”¨çš„ shell è¯­å¥åˆ†æå™¨ï¼Œè¾“å…¥è¯­å¥å°±èƒ½ç»™å‡ºè¯´æ˜

    https://explainshell.com/explain?cmd=join+-1+1+-2+5++%3C%28file+*+%7C+sed+%27s%2F%5B%3A%2C%5D%2F%2Fg%27%29+%3C%28ls+--full-time+-h+%7C+awk+%27%7Bprint+%245%22+%22%246%22+%22%247%22+%22%248%22+%22%249%7D%27%29+%7C+column+-t

å‚è€ƒ

    bash å†…ç½®å‘½ä»¤    `man command`

    bash è¯­æ³•        `man bash`

    æ¡ä»¶æµ‹è¯•è¯­å¥çš„ç”¨æ³•  `man test`

    POSIX Shell è§„èŒƒ

        https://pubs.opengroup.org/onlinepubs/9799919799/
            https://ieeexplore.ieee.org/document/10555529

        å·¦æ ä¸Šéƒ¨ç‚¹å‡» 'Shell & Utilities'ï¼Œç„¶åç‚¹å‡»å·¦æ ä¸‹éƒ¨å‡ºç°çš„é¡µé¢ä¸­çš„ '2. Shell Command Language'ï¼Œå†…å®¹å‘ˆç°åœ¨å³æ ã€‚

    GNU Bash å®˜æ–¹æ–‡æ¡£

        https://www.gnu.org/software/bash/manual/bash.html

        Debian æŠŠå¸¸ç”¨çš„è„šæœ¬å‘½ä»¤éƒ½ä»‹ç»äº† https://www.debian.org/doc/manuals/debian-reference/index.zh-cn.html

        Linuxå‘½ä»¤å¤§å…¨æœç´¢ https://github.com/jaywcjlove/linux-command

    zsh å®˜æ–¹æ–‡æ¡£

        https://zsh.sourceforge.io/Doc/Release/Shell-Builtin-Commands.html

    bash ç³»åˆ—æ•™ç¨‹ https://www.junmajinlong.com/shell/index/

    Advanced Bash-Scripting Guide

        https://tldp.org/LDP/abs/html/index.html

    Bash scripting cheatsheet

        https://devhints.io/bash

    https://zwischenzugs.com/2018/01/06/ten-things-i-wish-id-known-about-bash/

    Bashè„šæœ¬æŒ‡å—

        https://linux.die.net/abs-guide/
            https://linux.die.net/

    Bash ä½¿ç”¨æŠ€å·§
        https://github.com/jlevy/the-art-of-command-line

        $ curl -sL https://github.com/jlevy/the-art-of-command-line/raw/master/README.md|egrep -o '`\w+`'|tr -d '`'|cowsay -W70
        _______________________________________________________________________
        / apt yum dnf pacman pip brew nano vi man apropos help jobs fg bg kill  \
        | ssh ls less head tail ln chown chmod du df mount fdisk mkfs lsblk ip  |
        | ls tail awk sed gawk gsed perl sw_vers wmic ping ipconfig tracert     |
        \ netstat Rundll32 mintty cygstart regtool cygpath                      /
        -----------------------------------------------------------------------
                \   ^__^
                \   (oo)\_______
                    (__)\       )\/\
                        ||----w |
                        ||     ||

### dash å’Œ bash

    https://www.cnblogs.com/macrored/p/11548347.html

GNU/Linux æ“ä½œç³»ç»Ÿä¸­çš„ /bin/sh æ˜¯ bashï¼ˆBourne-Again Shellï¼‰çš„ç¬¦å·é“¾æ¥ï¼Œä½†é‰´äº bash è¿‡äºå¤æ‚ï¼Œæœ‰äººæŠŠ ash ä» NetBSD ç§»æ¤åˆ° Linux å¹¶æ›´åä¸º dashï¼ˆDebian Almquist Shellï¼‰ï¼Œå¹¶å»ºè®®å°† /bin/sh æŒ‡å‘å®ƒï¼Œä»¥è·å¾—æ›´å¿«çš„è„šæœ¬æ‰§è¡Œé€Ÿåº¦ã€‚

åœ¨ Debian å’Œ Ubuntu ä¸­ï¼Œ/bin/sh é»˜è®¤æŒ‡å‘ dashã€‚å¦‚éœ€è¦æ›´æ¢ï¼Œæ‰§è¡Œå‘½ä»¤ `sudo dpkg-reconfigure dash` å³å¯ã€‚

æŒ‰ç…§æƒ¯ä¾‹ï¼ˆä»¥åŠå¾ˆå¤šå†™è„šæœ¬çš„è§„èŒƒï¼‰ï¼Œæ ‡è®°ä¸º â€œ#!/bin/shâ€ çš„è„šæœ¬ä¸åº”ä½¿ç”¨ä»»ä½• POSIX æ²¡æœ‰è§„å®šçš„ç‰¹æ€§ï¼Œè¿™æ ·çš„è„šæœ¬ç”¨ dash æ‰§è¡Œæ˜¯æ²¡é—®é¢˜çš„ã€‚ä½¿ç”¨ bash ç‰¹æ€§çš„è„šæœ¬è¦ä½¿ç”¨ â€œ#!/bin/bashâ€ã€‚

åœ¨ç†è®ºä¸Šï¼Œè¿™æ ·åº”è¯¥æ²¡æœ‰ä»»ä½•å‰¯ä½œç”¨ã€‚ä½†æ˜¯ç°å®ä¸­ï¼ŒLinux ä¸‹çš„å¾ˆå¤šï¼ˆä¸è§„èŒƒçš„ï¼‰è„šæœ¬æœ‰æ‰€è°“ bashismï¼Œå´åœ¨æ–‡ä»¶å¤´æ ‡è®°ä¸ºâ€œ#!/bin/shâ€ï¼Œå¯¼è‡´ dash å»æ‰§è¡Œè¯¥è„šæœ¬è€ŒæŠ¥é”™ã€‚æœ‰äººæŠŠè„šæœ¬å¤±è´¥å½’å’äº Ubuntu è€Œä¸æ˜¯è‡ªå·±çš„è„šæœ¬ï¼Œè¿™æ˜¯ä¸å…¬å¹³çš„ï¼šæˆ–è€…æŠŠä½ çš„è„šæœ¬é¦–è¡Œ shebang æ”¹ä¸º â€œ#!/bin/bashâ€ï¼Œæˆ–è€…å‘½ä»¤è¡Œæ‰§è¡ŒæŒ‡å®šè§£é‡Šå™¨ `bash you_script.sh` ã€‚

dash å’Œ bash è¯­æ³•ä¸Šçš„ä¸»è¦çš„åŒºåˆ«æœ‰:

    1. å®šä¹‰å‡½æ•°
    bashï¼šfunction åœ¨ bash ä¸­ä¸ºå…³é”®å­—
    dashï¼šdash ä¸­æ²¡æœ‰ function è¿™ä¸ªå…³é”®å­—

    2. select var in list; do command; done
    bashï¼šæ”¯æŒ
    dashï¼šä¸æ”¯æŒ, æ›¿ä»£æ–¹æ³•: é‡‡ç”¨ while + read + case æ¥å®ç°

    3. echo {0..10}
    bashï¼šæ”¯æŒ {n..m} å±•å¼€
    dashï¼šä¸æ”¯æŒï¼Œæ›¿ä»£æ–¹æ³•, é‡‡ç”¨ seq å¤–éƒ¨å‘½ä»¤

    4. here string
    bashï¼šæ”¯æŒ here string
    dashï¼šä¸æ”¯æŒ, æ›¿ä»£æ–¹æ³•ï¼šå¯é‡‡ç”¨ here documents

    5. >&word é‡å®šå‘æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯
    bashï¼šå½“ word ä¸ºéæ•°å­—æ—¶ï¼Œ>&word å˜æˆé‡å®šå‘æ ‡å‡†é”™è¯¯å’Œæ ‡å‡†è¾“å‡ºåˆ°æ–‡ä»¶ word
    dashï¼š>&word, word ä¸æ”¯æŒéæ•°å­—, æ›¿ä»£æ–¹æ³•: >word 2>&1;
          bash å¸¸è§ç”¨æ³• `your_cmd &>/dev/null` æ”¹å†™ä¸ºæ›´å…¼å®¹çš„å†™æ³• `your_cmd >/dev/null 2>&1`

    6. æ•°ç»„
    bashï¼šæ”¯æŒæ•°ç»„, bash4 æ”¯æŒå…³è”æ•°ç»„
    dashï¼šä¸æ”¯æŒæ•°ç»„ï¼Œæ›¿ä»£æ–¹æ³•, é‡‡ç”¨ â€œå˜é‡å+åºå·â€ æ¥å®ç°ç±»ä¼¼çš„æ•ˆæœ

    7. å­å­—ç¬¦ä¸²æ‰©å±•
    bashï¼šæ”¯æŒ parameter:offset:length,parameter:offset:length,{parameter:offset}
    dashï¼šä¸æ”¯æŒï¼Œæ›¿ä»£æ–¹æ³•:é‡‡ç”¨ expr æˆ– cut å¤–éƒ¨å‘½ä»¤ä»£æ›¿

    8. å¤§å°å†™è½¬æ¢
    bashï¼šæ”¯æŒ parameterpattern,parameterpattern,{parameter^^pattern},parameter,pattern,parameter,pattern,{parameter,,pattern}
    dashï¼šä¸æ”¯æŒï¼Œæ›¿ä»£æ–¹æ³•ï¼šé‡‡ç”¨ tr/sed/awk ç­‰å¤–éƒ¨å‘½ä»¤è½¬æ¢

    9. è¿›ç¨‹æ›¿æ¢ <(command),>(command)
    bashï¼šæ”¯æŒè¿›ç¨‹æ›¿æ¢
    dashï¼šä¸æ”¯æŒ, æ›¿ä»£æ–¹æ³•, é€šè¿‡ä¸´æ—¶æ–‡ä»¶ä¸­è½¬

    10. [ string1 = string2 ] å’Œ [ string1 == string2 ]
    bashï¼šæ”¯æŒä¸¤è€…
    dashï¼šåªæ”¯æŒ=

    11. [[ ]] åŠ å¼ºç‰ˆtest
    bashï¼šæ”¯æŒ [[ ]], å¯å®ç°æ­£åˆ™åŒ¹é…ç­‰å¼ºå¤§åŠŸèƒ½
    dashï¼šä¸æ”¯æŒ [[ ]], æ›¿ä»£æ–¹æ³•ï¼Œé‡‡ç”¨å¤–éƒ¨å‘½ä»¤

    12. for (( expr1 ; expr2 ; expr3 )) ; do list ; done
    bashï¼šæ”¯æŒ C è¯­è¨€æ ¼å¼çš„ for å¾ªç¯
    dashï¼šä¸æ”¯æŒè¯¥æ ¼å¼çš„ for, æ›¿ä»£æ–¹æ³•ï¼Œç”¨ while+((expression)) å®ç°

    13.let å‘½ä»¤ å’Œ ((expression))
    bashï¼šæœ‰å†…ç½®å‘½ä»¤ let,ä¹Ÿæ”¯æŒ ((expression)) æ–¹å¼
    dashï¼šä¸æ”¯æŒï¼Œæ›¿ä»£æ–¹æ³•ï¼Œé‡‡ç”¨ ((expression)) å®ç°

    13. $((expression))
    bashï¼šæ”¯æŒ id++,idâ€“,++id,â€“id è¿™æ ·åˆ°è¡¨è¾¾å¼
    dashï¼šä¸æ”¯æŒ ++,â€“ï¼Œæ›¿ä»£æ–¹æ³•ï¼šid+=1,id-=1, id=id+1,id=id-1

    14. å…¶å®ƒå¸¸ç”¨å‘½ä»¤
    bashï¼šæ”¯æŒ echo -eï¼Œæ”¯æŒ declare
    dashï¼šä¸æ”¯æŒã€‚

### bash å¸¸è§ç¬¦å·ç”¨æ³•

    https://www.runoob.com/w3cnote/linux-shell-brackets-features.html

    https://linux.cn/article-5657-1.html

    http://c.biancheng.net/view/743.html
    https://www.jb51.net/article/123081.htm

    å¼•å·å’Œè½¬ä¹‰ https://www.cnblogs.com/cn-leoblog/p/15415841.html

ç”¨å®Œåè®°å¾—æ¸…é™¤å˜é‡ï¼Œé˜²æ­¢å¤§è§„æ¨¡è„šæœ¬ä¸­å®¹æ˜“å‘ç”Ÿçš„å˜é‡åæ±¡æŸ“

    unset variable_name

    å¦‚æœæ˜¯åœ¨å‡½æ•°ä¸­ä½¿ç”¨å±€éƒ¨å˜é‡ï¼Œç”¨ `local var="hell"` æ¥å®šä¹‰

Linux å‘½ä»¤è¡Œå‚æ•°ä¸€ä¸ªæ ï¼Œä¿©æ ï¼Œæ²¡æ ï¼Œå‚è§ç« èŠ‚ [å‹ç¼©è§£å‹ç¼©] ä¸­ tar çš„è¯´æ˜ï¼Œæˆ– `man tar` æˆ– `info tar`ã€‚

| ç®¡é“æ“ä½œï¼Œå‘½ä»¤å‚æ•°ä¸­æ–‡ä»¶åçš„ä½ç½®ä½¿ç”¨ bash çš„ç‰¹æ®Šç¬¦å· -ï¼ˆå‡å·ï¼‰ï¼Œä»£è¡¨æ ‡å‡†è¾“å‡º/æ ‡å‡†è¾“å…¥, è§†å‘½ä»¤è€Œå®š

    ç®¡é“å‰çš„ - è¡¨ç¤ºè¾“å‡ºåˆ°æ ‡å‡†è¾“å…¥æµï¼Œç®¡é“åçš„ - è¡¨ç¤ºè¾“å…¥ä¸ºæ ‡å‡†è¾“å‡ºæµï¼Œä¸»è¦ç”¨äºè¯¥å‘½ä»¤éœ€è¦ç”¨å‚æ•°æŒ‡å®šè¾“å…¥æ–‡ä»¶çš„æƒ…å†µä¸‹ï¼Œå¦‚æœè¯¥å‘½ä»¤è‡ªå¸¦æ”¯æŒç®¡é“æµï¼Œåˆ™å‘½ä»¤å‰ç”¨ç®¡é“ç¬¦å·å³å¯ã€‚

    # æŠŠ /home ç›®å½•æ‰“åŒ…ï¼Œè¾“å‡ºåˆ°æ ‡å‡†è¾“å…¥æµï¼Œç®¡é“åé¢çš„å‘½ä»¤æ˜¯ä»æ ‡å‡†è¾“å‡ºæµè¯»å–æ•°æ®è§£åŒ…
    tar cf - /home |tar -xf -

é‡å®šå‘æ“ä½œç¬¦ï¼ˆ> æˆ– >|ï¼‰ç”¨äºå°†å‘½ä»¤çš„è¾“å‡ºé‡å®šå‘åˆ°æ–‡ä»¶æˆ–å…¶ä»–å‘½ä»¤

    å¯¹äº >ï¼Œå®ƒä¼šå…ˆå…³é—­å½“å‰çš„è¾“å‡ºæ–‡ä»¶æè¿°ç¬¦ï¼Œç„¶åå†æ‰“å¼€æ–‡ä»¶è¿›è¡Œå†™å…¥ã€‚

    è€Œå¯¹äº >|ï¼Œåˆ™ä¸ä¼šå…³é—­å½“å‰çš„è¾“å‡ºæ–‡ä»¶æè¿°ç¬¦ï¼Œè€Œæ˜¯ç›´æ¥åœ¨åŸæœ‰æ–‡ä»¶æè¿°ç¬¦ä¸Šè¿›è¡Œå†™å…¥æ“ä½œã€‚

æŠŠè¯­å¥æ”¾åˆ°()ä¸­åŒ…å›´å¯ä»¥å‡å°å˜é‡å½±å“èŒƒå›´ï¼š

    (umask 077; ssh-agent >| "$env")

å•å¼•å·åŒ…å›´ä¸è§£é‡Šå˜é‡ï¼ŒåŒå¼•å·åŒ…å›´çš„è§£é‡Šå˜é‡

    var="hello"
    var1='say $var'
    var2="say $var"

åå¼•å·``å’Œ$()çš„ä½œç”¨ç›¸åŒï¼Œç”¨äºå‘½ä»¤æ›¿æ¢ï¼ˆcommand substitutionï¼‰ï¼Œå³å®Œæˆå¼•ç”¨çš„å‘½ä»¤çš„æ‰§è¡Œï¼Œå°†å…¶ç»“æœæ›¿æ¢å‡ºæ¥ï¼Œè¿™ä¸ªæ˜¯åœ¨å­shellçš„è¿›ç¨‹ä¸­æ‰§è¡Œçš„ã€‚

    echo `date '--date=1 hour ago' +%Y-%m-%d-%H`
    echo $(date '--date=1 hour ago' +%Y-%m-%d-%H)

$()ä¸­åªéœ€è¦ä½¿ç”¨ä¸€ä¸ªåæ–œæ è¿›è¡Œè½¬ä¹‰ï¼Œä¸‹åˆ—è¯­å¥è¡¨ç¤ºç»™varå˜é‡èµ‹å€¼ï¼Œå­—ç¬¦ä¸²$HOMEï¼Œåªæ˜¯å­—ç¬¦ä¸²ï¼Œä¸æ˜¯å˜é‡HOMEçš„å€¼

    var2=`echo \\$HOME`
    var3=$(echo \$HOME)

ç”¨å‘½ä»¤ç»„è¯­æ³• {...} å°†å¤šä¸ªå‘½ä»¤ç»„åˆæˆä¸€ä¸ªä»£ç å—ï¼Œè€Œä¸æ˜¯ (...)ï¼Œè¿™æ ·å¯ä»¥é˜²æ­¢å‘½ä»¤æ›¿æ¢ï¼š

    ä¸ ( ... ) ä¸åŒï¼Œ{ ...; } ä¸ä¼šå¯åŠ¨å­ Shellï¼Œæ‰€æœ‰å‘½ä»¤åœ¨å½“å‰ Shell ç¯å¢ƒä¸­æ‰§è¡Œï¼Œé€Ÿåº¦æ›´å¿«ï¼ˆæ— è¿›ç¨‹åˆ›å»ºï¼‰ã€‚

    ç‰¹æ€§            ( )                                    { }
    æ‰§è¡Œç¯å¢ƒ    å­Shellï¼ˆä¼šç»§æ‰¿å˜é‡ä½†ä¿®æ”¹ä¸ä¼ å›çˆ¶Shellï¼‰    å½“å‰Shellï¼ˆå˜é‡ä¿®æ”¹ç›´æ¥å½±å“çˆ¶Shellï¼‰
    é€‚ç”¨åœºæ™¯        éœ€è¦éš”ç¦»ç¯å¢ƒçš„æ“ä½œ                      éœ€è¦å…±äº«å˜é‡çš„æ“ä½œ

    æ³¨æ„ï¼šå¤§æ‹¬å·ä¸¤ä¾§è¦ç•™ç©ºæ ¼ { command1; command2; }ï¼Œä¸” { } å†…æœ€åä¸€ä¸ªå‘½ä»¤å¿…é¡»ç”¨ ; ç»“å°¾ã€‚

    { ...; } å°†ä¸€ç»„å‘½ä»¤ä½œä¸ºä¸€ä¸ªæ•´ä½“æ‰§è¡Œï¼ˆç±»ä¼¼äºå•è¡Œå‘½ä»¤çš„å¤åˆæ“ä½œï¼‰ã€‚

        if { command1 && command2; } || { command3 || command4; }; then
            echo "æ¡ä»¶æˆç«‹"
        fi

        if {
            check_dependency &&
            validate_input &&
            prepare_environment
        }; then
            run_main_task
        fi

${var}ç”¨äºæ˜ç¡®ç•Œå®šå˜é‡ï¼Œä¸$varå¹¶æ²¡æœ‰åŒºåˆ«ï¼Œä½†æ˜¯ç•Œå®šæ›´æ¸…æ™°

    A="to"
    echo $AB ä¸å¦‚ echo ${A}B

å˜é‡ ZSH_CUSTOM æœ‰å€¼å°±ç”¨ï¼Œæ²¡æœ‰å°±ç”¨åé¢çš„ï¼Œè¿™ä¸ªç”¨æ³•æ˜¯zshçš„

    # https://github.com/zsh-users/zsh-autosuggestions/blob/master/INSTALL.md
    echo ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions

å­—ç¬¦ä¸²æˆªå–

    $ url="www.baidu.com"
    $ echo ${url%%.*}  # æ˜¾ç¤º wwwï¼Œç”¨äºå–ä»£ basename ç”¨æ³•ï¼Œæˆªå–å‰ç¼€
    $ echo ${url##*.}  # æ˜¾ç¤º comï¼Œç”¨äºå–ä»£ cut -d. -f2 ç”¨æ³•ï¼Œæˆªå–åç¼€

    ä»å­—ç¬¦ä¸²çš„å·¦è¾¹å¼€å§‹è®¡æ•°ï¼Œé‚£ä¹ˆæˆªå–å­—ç¬¦ä¸²çš„å…·ä½“æ ¼å¼å¦‚ä¸‹ï¼š

        ${string: start :length}

    $ url="abcdefgh"
    $ echo ${url: 2: 5}
    cdefg

    $ myurl='http://www.example.com/long/path/to/example/file.ext'
    $ echo ${myurl##*/}
    file.ext

    $ url="www.baidu.com"
    $ echo ${url:4:5}
    ç»“æœä¸ºï¼šbaidu     ä»ä¸‹æ ‡ä¸º4å¼€å§‹ï¼Œæˆªå–5ä¸ªå­—ç¬¦ã€‚

    $ url="www.baidu.com"
    $ echo ${url: 0-9:5}  # å¦‚æœæƒ³ä»å­—ç¬¦ä¸²çš„å³è¾¹å¼€å§‹è®¡æ•°ï¼Œå‰é¢åŠ ä¸ª 0-
    ç»“æœä¸ºï¼šbaidu    ä»å³è¾¹æ•°ï¼Œbæ˜¯ç¬¬9ä¸ªå­—ç¬¦

    $ url="www.baidu.com"
    $ echo ${url:0-9}  # çœç•¥ lengthï¼Œç›´æ¥æˆªå–åˆ°å­—ç¬¦ä¸²æœ«å°¾
    ç»“æœä¸ºï¼šbaidu.com

å­—ç¬¦ä¸²æ›¿æ¢

    $ gaddr='https://github.com/jindaxiang/akshare.git'
    $ echo ${gaddr//https:\/\/github.com\//git@github.com:}
    git@github.com:jindaxiang/akshare.git

å°†æ•´æ•°è¿ç®—è¡¨è¾¾å¼æ”¾åœ¨((å’Œ))ä¹‹é—´ï¼Œåœ¨ (( )) ä¸­ä½¿ç”¨å˜é‡æ— éœ€åŠ $å‰ç¼€

    ((b=a-15))  # å°† a-15 çš„è¿ç®—ç»“æœèµ‹å€¼ç»™å˜é‡ b

éœ€è¦è¾“å‡ºè¡¨è¾¾å¼çš„è¿ç®—ç»“æœæ—¶ï¼Œéœ€åœ¨ (( )) å‰é¢åŠ $ç¬¦å·

    c=$((a+b))
    echo $((a+b))
    ((a>7 && b==c))  # ä¹Ÿå¯ä»¥åšé€»è¾‘è¿ç®—
    ((a=3+5, b=a+10))  # ä»¥æœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼ä½œä¸ºæ•´ä¸ª (( )) å‘½ä»¤çš„æ‰§è¡Œç»“æœ

    # è¿™ç§ç”¨æ³•bashæŠ¥é”™ï¼Œä»…zshæ”¯æŒ
    if (( $#SSH_CONNECATION )); then echo 'remote'; fi

let å‘½ä»¤å’ŒåŒå°æ‹¬å· (( )) çš„ç”¨æ³•æ˜¯ç±»ä¼¼çš„ï¼Œå¯¹äºå¤šä¸ªè¡¨è¾¾å¼ä¹‹é—´çš„åˆ†éš”ç¬¦ï¼Œlet å’Œ (( )) æ˜¯æœ‰åŒºåˆ«çš„ï¼š
let å‘½ä»¤ä»¥ç©ºæ ¼æ¥åˆ†éš”å¤šä¸ªè¡¨è¾¾å¼ï¼›
(( )) ä»¥é€—å·,æ¥åˆ†éš”å¤šä¸ªè¡¨è¾¾å¼ã€‚

testæ”¯æŒ3ç±»æ£€æµ‹ï¼šæ–‡ä»¶ã€æ•°å€¼ã€å­—ç¬¦ä¸².
åˆ¤æ–­ expression æˆç«‹æ—¶ï¼Œé€€å‡ºçŠ¶æ€ä¸º 0ï¼Œå¦åˆ™ä¸ºé 0 å€¼ã€‚
å½“ä½ åœ¨ test å‘½ä»¤ä¸­ä½¿ç”¨å˜é‡æ—¶ï¼Œå¼ºçƒˆå»ºè®®å°†å˜é‡ç”¨åŒå¼•å·""åŒ…å›´èµ·æ¥ï¼Œè¿™æ ·èƒ½é¿å…å˜é‡ä¸ºç©ºå€¼æ—¶å¯¼è‡´çš„å¾ˆå¤šå¥‡è‘©é—®é¢˜ã€‚

test å’Œ [] æ˜¯ç­‰ä»·çš„ï¼Œ[] æ³¨æ„ä¸¤è¾¹ç•™ç©ºæ ¼

    [ -z "$str1" -o -z "$str2" ]

    [ -z "$str1" ] || [ -z "$str2" ]

èƒ½åšå­—ç¬¦ä¸²æ¯”è¾ƒçš„æ—¶å€™ï¼Œä¸è¦ç”¨æ•°å€¼æ¯”è¾ƒã€‚

    ä¸å¥½ [ "$a" -eq 7 ] å¦‚æœå˜é‡aä¸ºç©ºåˆ™è¯­å¥æ‰§è¡Œä¼šæŠ¥é”™
    å¥½   [ "$a" = "7" ]

    æœ€å®‰å…¨ï¼šå½“å˜é‡å¯èƒ½ä¸ºç©ºçš„æ—¶å€™ï¼Œå¼ºçƒˆå»ºè®®åœ¨å˜é‡çš„åŸºç¡€ä¸ŠåŠ ä¸Šå…¶ä»–è¾…åŠ©å­—ç¬¦ä¸²ï¼Œå‚è§ /etc/init.d/ ä¸‹çš„è„šæœ¬

    [ "x$a" = "x7" ]   # åˆ¤æ–­aæ˜¯å¦ä¸º7

    [ "x$a" = "x" ]    # åˆ¤æ–­aæ˜¯å¦ä¸ºç©º

    [ ! -z "$a" -a "x$a" = "x7" ]  # aä¸ä¸ºç©ºä¸”a=7æ—¶æ‰ä¸ºçœŸ

[[ ]] æ˜¯ test çš„å‡çº§ç‰ˆï¼Œä¸éœ€è¦å¯¹å˜é‡ååŠ åŒå¼•å·ï¼Œæ¯”è¾ƒè¿ç®—ç›´æ¥ç”¨ =ã€> ç­‰æ›´ç›´è§‚
[[ ]] æ³¨æ„ä¸¤è¾¹ç•™ç©ºæ ¼

    https://www.cnblogs.com/aaron-agu/p/5700650.html

    bash æŠŠåŒä¸­æ‹¬å·ä¸­çš„è¡¨è¾¾å¼çœ‹ä½œä¸€ä¸ªå•ç‹¬çš„å…ƒç´ ï¼Œå¹¶è¿”å›ä¸€ä¸ªé€€å‡ºçŠ¶æ€ç 

    [ ... ] ä¸ºshellå‘½ä»¤ï¼Œæ‰€ä»¥åœ¨å…¶ä¸­çš„è¡¨è¾¾å¼åº”æ˜¯å®ƒçš„å‘½ä»¤è¡Œå‚æ•°ï¼Œæ‰€ä»¥ä¸²æ¯”è¾ƒæ“ä½œç¬¦">" ä¸"<"å¿…é¡»è½¬ä¹‰ï¼Œåœ¨ [[]] ä¸­"<"ä¸">"ä¸éœ€è½¬ä¹‰

    [[ ... ]] è¿›è¡Œç®—æœ¯æ‰©å±•ï¼Œè€Œ [ ... ] ä¸åš

    [[ ... && ... && ...  ]] å’Œ [ ... -a ... -a ...] ä¸ä¸€æ ·ï¼Œ[[ ]] æ˜¯é€»è¾‘çŸ­è·¯æ“ä½œï¼Œè€Œ [ ] ä¸ä¼šè¿›è¡Œé€»è¾‘çŸ­è·¯

    if [[ -z $str1 ]] || [[ -z $str2 ]]; then
        echo "å­—ç¬¦ä¸²ä¸èƒ½ä¸ºç©º"

    elif [[ $str1 < $str2 ]]  # ä¸éœ€è¦ä¹Ÿä¸èƒ½å¯¹ < è¿›è¡Œè½¬ä¹‰
    then
        echo "str1 < str2"

    else
        echo "str1 >= str2"

    fi

    # åˆ¤æ–­å‘½ä»¤æ‰§è¡Œç»“æœçš„å­—ç¬¦ä¸²æ¯”è¾ƒ
    if [[ $(systemctl is-active 'nginx') = "active" ]]; then
        echo -e "nginx     [ âœ“ ]"
    fi

ç»„åˆä½¿ç”¨ && ã€ || å¯ä»¥å®ç°ç®€å•çš„ if ...else...

    # æ•°å€¼åˆ¤æ–­ç”¨ (( ))
    (($LOAD_AVG_THLOD > 10)) && echo "greater than" || echo "not..."

NOTE: æ…é‡ä½¿ç”¨é“¾å¼é€»è¾‘è¿ç®—

    shell è§£é‡Šæ‰§è¡Œæ˜¯ä»å·¦å‘å³çš„ï¼Œä½†æ˜¯é€»è¾‘è¿ç®—ç¬¦ä¼˜å…ˆçº§å’ŒçŸ­è·¯æ±‚å€¼ä¼šå¯¼è‡´ä½ æ²¡æœ‰æ–™åˆ°çš„ç»“æœï¼Œç‰¹åˆ«æ˜¯åœ¨ä½¿ç”¨å¦‚ curl | tee è¿™ç±»ç®¡é“æ“ä½œï¼Œå»ºè®®å‘½ä»¤åˆ†ç»„æˆ–æ‹†åˆ†ä¸ºå¤šæ­¥æˆ–ä½¿ç”¨ä¸´æ—¶æ–‡ä»¶

        $ true || echo "A" && echo "B"
        B  <--- è¿™é‡ŒçŸ­è·¯æ±‚å€¼è·³è¿‡äº† echo "A" && echo "B" ä½†æ˜¯ä¼šå› ä¸º true è€Œæ‰§è¡Œ echo "B"

        $ true || { echo "A" && echo "B"; } && echo "C"
        C <--- éªŒè¯ä¸Šé¢è¯­å¥çš„è§‚ç‚¹

    æ‰€ä»¥ï¼Œå°½é‡åˆ«è¿å†™é€»è¾‘è¿ç®—ï¼Œè¦ç”¨åˆ†ç»„ ( ) æˆ– { } æ¥åŒ…è£¹ï¼Œä½¿å¾—é€»è¾‘è¿ç®—ç¬¦çš„ç»“æœç¬¦åˆä½ çš„ç›´è§‚é¢„æœŸï¼Œä»¥ä¸Šä¸¤å¥çš„æ”¹å†™ï¼š

        $ true || { echo "A" && echo "B"; }

        $ true || ({ echo "A" && echo "B"; } && echo "C")

    å¦‚æœä¸ç”¨ ( ) æˆ– { } æ¥åŒ…è£¹ï¼ŒçŒœçŒœä¸‹é¢çš„è¾“å‡ºç»“æœæ˜¯ä¸æ˜¯ä½ æƒ³è¦çš„ï¼Œæˆ–è€…å†åŠ é•¿ç‚¹å‘¢ï¼š

        $ true || echo "A" || echo "B"

        $ false || echo "A" || echo "B"
        A

        $ false || false || echo "B"
        B

å­—ç¬¦ä¸²åˆ¤æ–­ç”¨ [[ ]]

    # å¦‚æœæ˜¯åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æœ‰å€¼ï¼Œåˆ™ -n å¯ä»¥çœç•¥
    [[ $envname ]] && printf "conda:%s" $envname || echo "not..."

    å¦‚æœå˜é‡å­˜åœ¨åˆ™æ‰§è¡Œï¼Œå¦åˆ™ä¸æ‰§è¡Œ
    [[ -n $conda_env_exist ]] && printf "conda:%s" $envname

    å¦‚æœå˜é‡ä¸ç­‰äºå­—ç¬¦ä¸² runningï¼Œåˆ™è¿”å›
    [[ ! "$VM_STATE" = "running" ]] && return

å¦‚æœæ¡ä»¶æµ‹è¯•æˆåŠŸåˆ™æ‰§è¡Œ

    [ -r /etc/default/cron ] && . /etc/default/cron

å¦‚æœæ¡ä»¶æµ‹è¯•æˆåŠŸåˆ™æ‰§è¡Œï¼Œå¦åˆ™æ‰§è¡Œå¦ä¸€ä¸ª

    test -r ~/.dircolors && eval "$(dircolors -b ~/.dircolors)" || eval "$(dircolors -b)"

å¦‚æœæ¡ä»¶æµ‹è¯•å¤±è´¥åˆ™æ‰§è¡Œï¼Œå¦åˆ™ä¸æ‰§è¡Œ

    test -f $DAEMON || echo "æ–‡ä»¶ä¸å­˜åœ¨ï¼Œé€€å‡ºï¼Œä¸å†æ‰§è¡Œä¸‹é¢çš„è¯­å¥äº†"

ä»æœ¬è´¨ä¸Šè®²ï¼Œif æ£€æµ‹çš„æ˜¯å‘½ä»¤çš„é€€å‡ºçŠ¶æ€ï¼Œä¸‹é¢çš„åˆ¤æ–­è·³è½¬å°±æ— æ³•ä½¿ç”¨ test å‘½ä»¤ï¼ˆæˆ–è®¸ zsh æ”¯æŒï¼‰

    # å¦‚æœå‘½ä»¤å­˜åœ¨åˆ™æ‰§è¡Œ
    if $(command -v vcgencmd >/dev/null 2>&1) ; then vcgencmd measure_temp; fi
    # ç­‰ä»·
    command -v vcgencmd >/dev/null 2>&1 && vcgencmd measure_temp

    # å¦‚æœå‘½ä»¤ä¸å­˜åœ¨åˆ™é€€å‡º
    command -v vcgencmd >/dev/null 2>&1 || return 0

    # å¦‚æœæ‰§è¡Œå‘½ä»¤çš„ç»“æœæ˜¯å¤±è´¥ï¼Œåˆ™æ‰“å°
    if ! $(command -v vcgencmd >/dev/null 2>&1) ; then printf "%s" 'error cmd'; fi

    command -v vcgencmd >/dev/null 2>&1 || echo "ä¸æ˜¯æ ‘è“æ´¾ï¼Œexit,ç»ˆæ­¢æ‰§è¡Œä¹‹åçš„è¯­å¥"

    # æ‰§è¡Œå‘½ä»¤ï¼Œå¦‚æœæˆåŠŸåˆ™æ‰§è¡Œxxxï¼Œå¦åˆ™æ‰§è¡Œyyy
    $(lscpu |grep -q arm) && echo "xxx" || echo "yyy"

    [[ $(command -v vcgencmd >/dev/null 2>&1; echo $?) = "0" ]] || return
    ç­‰æ•ˆ $(command -v vcgencmd >/dev/null 2>&1) ||return

ä½¿ç”¨é€»è¾‘è¿ç®—ç¬¦å°†å¤šä¸ª [[ ]] è¿æ¥èµ·æ¥ä¾ç„¶æ˜¯å¯ä»¥çš„ï¼Œè¿™æ˜¯ Shell æœ¬èº«æä¾›çš„åŠŸèƒ½ï¼Œè·Ÿ [[ ]] æˆ–è€… test æ²¡æœ‰å…³ç³»ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

    [[ -z $str1 ]] || [[ -z $str2 ]]

å¤§æ‹¬å·æ‹“å±•

    $ ls {ex1,ex2}.sh
    ex1.sh ex2.sh

    $ ls {ex{1..3},ex4}.sh
    ex1.sh ex2.sh ex3.sh ex4.sh

    $ ls {ex[1-3],ex4}.sh
    ex1.sh ex2.sh ex3.sh ex4.sh

    æ•°ç»„ç”¨æ³•

        A="a b c def"   # å®šä¹‰å­—ç¬¦ä¸²
        A=(a b c def)   # å®šä¹‰å­—ç¬¦æ•°ç»„

        å‘½ä»¤    è§£é‡Š    ç»“æœ
        ${A[@]}    è¿”å›æ•°ç»„å…¨éƒ¨å…ƒç´     a b c def
        ${A[*]}    åŒä¸Š    a b c def
        ${A[0]}    è¿”å›æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´     a
        ${#A[@]}    è¿”å›æ•°ç»„å…ƒç´ æ€»ä¸ªæ•°    4
        ${#A[*]}    åŒä¸Š    4
        ${#A[3]}    è¿”å›ç¬¬å››ä¸ªå…ƒç´ çš„é•¿åº¦ï¼Œå³defçš„é•¿åº¦    3
        A[3]=xzy    åˆ™æ˜¯å°†ç¬¬å››ä¸ªç»„æ•°é‡æ–°å®šä¹‰ä¸º xyz

        å˜é‡å±•å¼€çš„ç”¨æ³•ç¤ºä¾‹è§ä¸‹é¢ ${å˜é‡å[@]}

ä¸æƒ³æœ‰ä»»ä½•è¾“å‡ºï¼Œæˆ–åªæƒ³æµ‹è¯•å‘½ä»¤çš„é€€å‡ºç è€Œä¸æƒ³æœ‰ä»»ä½•è¾“å‡ºæ—¶

    cat $filename >/dev/null 2>/dev/null

æƒ³è®©å‡½æ•°è¿”å›å­—ç¬¦ä¸²ï¼Œæ— æ³•ä½¿ç”¨ return int çš„æ–¹å¼

    fff()
    {echo 'abc'}

    print fff

### bashé¿å‘

    å˜é‡èµ‹å€¼åˆ«ä¹ æƒ¯æ€§çš„åŠ ç©ºæ ¼

    åœ¨ Fedora ä¸‹ # å·å†™æ³¨é‡Šï¼Œä¸è¦ç”¨å˜é‡å¼•ç”¨çš„é‚£ä¸ªè´§å¸ç¬¦å·ï¼Œä¼šè¿›è¡Œè§£é‡Šï¼Œä¸çŸ¥é“ä¸ºå•¥

### å¸¸ç”¨ bash æŠ€å·§

    https://plantegg.github.io/2017/01/01/top_linux_commands/

å¾ˆå¤šå‘½ä»¤æ”¯æŒé€çº§çš„è‡ªåŠ¨å®Œæˆæç¤ºï¼Œè¾“å…¥å‘½ä»¤åå¤šæŒ‰ tab è¯•è¯•

    $ ls /usr/share/bash-completion/completions

rm ä¹‹å‰å…ˆ ls è¯•è¯•ï¼Œæ‰€è°“ dry-run

    ls to_be*

    ç¡®è®¤åˆ—å‡ºçš„æ˜¯è¦åˆ é™¤çš„æ–‡ä»¶ï¼Œç„¶åå†åšåˆ é™¤

    rm to_be*

æ¸…ç©ºæˆ–åˆ›å»ºä¸€ä¸ªæ–‡ä»¶

    > file.txt

    touch file.txt

ç”Ÿæˆä¸´æ—¶æ–‡ä»¶æˆ–ç›®å½•

    tfile=$(mktemp)

    tdir=$(mktemp -d)

å›åˆ°ä¸Šæ¬¡çš„ç›®å½•

    cd -

ä»¥ sudo è¿è¡Œä¸Šæ¡å‘½ä»¤

    $ vi /etc/hosts
    $ sudo !!

    é€šå¸¸å‡ºç°çš„æƒ…å†µæ˜¯ï¼Œæ•²å®Œå‘½ä»¤æ‰§è¡ŒåæŠ¥é”™æ‰å‘ç°å¿˜äº† sudoï¼Œè¿™ä¸ªç”¨æ³•æ¯”è¾ƒå®ç”¨ã€‚

å¸¦ç¯å¢ƒå˜é‡æ‰§è¡ŒæŸä¸ªå‘½ä»¤ï¼Œå¸¸ç”¨äºç¨‹åºéœ€è¦ä»¥ä¸åŒçš„ç¯å¢ƒå‚æ•°æ‰§è¡Œ

    # env å¯çœ
    $ env QT_QPA_PLATFORM=xcb your_command your_param

    # UNIX å†™æ³•ï¼š
    $ QT_QPA_PLATFORM=xcb;your_command your_param

æ›¿æ¢ä¸Šä¸€æ¡å‘½ä»¤ä¸­çš„ä¸€ä¸ªçŸ­è¯­

    $ ^foo^bar^

    æŠŠä¸Šä¸€æ¡å‘½ä»¤å½“ä¸­çš„fooæ›¿æ¢æˆbarã€‚

    $ !!:gs/foo/bar
    é‡å¤æ‰§è¡Œä¸Šä¸€æ¡å‘½ä»¤ï¼Œå¹¶ç”¨ :gs/foo/bar è¿›è¡Œæ›¿æ¢æ“ä½œ

åœ¨éœ€è¦é‡å¤è¿è¡Œè°ƒè¯•ä¸€é“é•¿é•¿çš„å‘½ä»¤ï¼Œéœ€è¦æµ‹è¯•æŸä¸ªå‚æ•°æ—¶å€™ï¼Œç”¨è¿™ä¸ªå‘½ä»¤ä¼šæ¯”è¾ƒå®ç”¨

å¤§æ‹¬å·å±•å¼€å¤šä¸ªå­—ç¬¦ä¸²ç»„åˆ

    $ mkdir -p -v /home/user/tmp/{dir1,anotherdir,similardir}

    # å¿«é€Ÿå¤‡ä»½ä¸€ä¸ªæ–‡ä»¶
    $ cp filename{,.bak}
    è¿™é“å‘½ä»¤æŠŠ filename æ–‡ä»¶æ‹·è´æˆ filename.bakï¼Œæˆ‘å¸¸ç”¨ cp -a my{.txt,.txt.2001.1.1}

    # å¦‚æœå‚æ•° $1 æœªè¢«æä¾›ï¼Œé‚£ä¹ˆé»˜è®¤å€¼æ˜¯ .ï¼ˆå½“å‰ç›®å½•ï¼‰
    target=${1:-.}
    åç»­å¼•ç”¨å˜é‡æ·»åŠ åŒå¼•å· "$target" æ¥ç¡®ä¿å¦‚æœ target åŒ…å«ç©ºæ ¼æˆ–å…¶ä»–ç‰¹æ®Šå­—ç¬¦æ—¶ï¼Œå‘½ä»¤èƒ½å¤Ÿæ­£ç¡®æ‰§è¡Œã€‚

é‡ç½®ç»ˆç«¯çš„æ˜¾ç¤ºç¯å¢ƒï¼Œæ¯” `clear` æ¸…çš„æ›´å¹²å‡€

    å¦‚æœä½ è¯•è¿‡ä¸å°å¿ƒcatäº†æŸä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¾ˆå¯èƒ½æ•´ä¸ªç»ˆç«¯æ¨¡æ‹Ÿå™¨å°±å‚»æ‰äº†ï¼Œå¯èƒ½ä¸ä¼šæ¢è¡Œï¼Œæ²¡æ³•å›æ˜¾ï¼Œå¤§å †ä¹±ç ä¹‹ç±»çš„ï¼Œè¿™æ—¶å€™æ•²å…¥ reset å›è½¦ï¼Œä¸ç®¡å‘½ä»¤æœ‰æ²¡æœ‰æ˜¾ç¤ºï¼Œå°±èƒ½å›å¤æ­£å¸¸äº†ã€‚

    reset

åœ¨ä¸€ä¸ªå­shellä¸­è¿è¡Œä¸€ä¸ªå‘½ä»¤

    (cd /tmp && ls)

    å¥½å¤„å°±æ˜¯ä¸ä¼šæ”¹å˜å½“å‰shellçš„ç›®å½•ï¼Œä»¥åŠå¦‚æœå‘½ä»¤ä¸­æ¶‰åŠç¯å¢ƒå˜é‡ï¼Œä¹Ÿä¸ä¼šå¯¹å½“å‰shellæœ‰ä»»ä½•æ›´æ”¹ã€‚

åœ¨ bash ä¸­ä½¿ç”¨ä»¥ä¸‹è¯­æ³•æ‰“å¼€ TCP / UDPå¥—æ¥å­—

    # https://www.xmodulo.com/tcp-udp-socket-bash-shell.html
    # exec {file-descriptor}<>/dev/{protocol}/{host}/{port}

    æ‰“å¼€ä¸€ä¸ªåŒå‘ç«¯å£
    $ exec 3<>/dev/tcp/xmodulo.com/80

    å…³é—­è¾“å…¥ç«¯å£
    $ exec {file-descriptor}<&-

    å…³é—­è¾“å‡ºç«¯å£
    $ exec {file-descriptor}>&-

ç”¨ diff å¯¹æ¯”è¿œç¨‹æ–‡ä»¶è·Ÿæœ¬åœ°æ–‡ä»¶

    ssh user@host 'cat /path/to/remotefile' |diff /path/to/localfile -

diff é€šå¸¸çš„ç”¨æ³•æ˜¯ä»å‚æ•°è¯»å…¥ä¸¤ä¸ªæ–‡ä»¶ï¼Œè€Œå‘½ä»¤é‡Œé¢çš„-åˆ™æ˜¯æŒ‡ä»stdinè¯»å…¥äº†

æŸ¥æ‰¾å½“å‰shellä¸‹æ˜¯å¦å¯ä»¥æ‰¾åˆ°æŸä¸ªå‘½ä»¤ï¼Œæ”¯æŒ aliasã€shell å‡½æ•°ç­‰

    command -v ls  # è¿™ä¸ªç”¨æ³•çš„å…¼å®¹æ€§æœ€å¥½

    type ls   # ä¼šæŠŠ shell å‡½æ•°çš„å†…å®¹ä¹Ÿæ˜¾ç¤ºå‡ºæ¥ï¼Œæ–¹ä¾¿è°ƒè¯•

    which ls  # Debian ä¸‹ä¸æ”¯æŒæ˜¾ç¤º shell å‡½æ•°çš„å†…å®¹

### bash å†…å»ºå‘½ä»¤

ç”¨ `type å‘½ä»¤` æ¥åˆ¤æ–­è¿™ä¸ªå‘½ä»¤åˆ°åº•æ˜¯å¯æ‰§è¡Œæ–‡ä»¶ã€shell å†…ç½®å‘½ä»¤è¿˜æ˜¯åˆ«å

    å‘½ä»¤            è¯´æ˜

    :           æ‰©å±•å‚æ•°åˆ—è¡¨ï¼Œæ‰§è¡Œé‡å®šå‘æ“ä½œ
    .           è¯»å–å¹¶æ‰§è¡ŒæŒ‡å®šæ–‡ä»¶ä¸­çš„å‘½ä»¤ï¼ˆåœ¨å½“å‰ shell ç¯å¢ƒä¸­ï¼‰
    alias       ä¸ºæŒ‡å®šå‘½ä»¤å®šä¹‰ä¸€ä¸ªåˆ«å
    bg          å°†ä½œä¸šä»¥åå°æ¨¡å¼è¿è¡Œ
    bind        å°†é”®ç›˜åºåˆ—ç»‘å®šåˆ°ä¸€ä¸ª readline å‡½æ•°æˆ–å®
    break       é€€å‡º forã€whileã€select æˆ– until å¾ªç¯
    builtin     æ‰§è¡ŒæŒ‡å®šçš„ shell å†…å»ºå‘½ä»¤
    caller      è¿”å›æ´»åŠ¨å­å‡½æ•°è°ƒç”¨çš„ä¸Šä¸‹æ–‡
    cd          å°†å½“å‰ç›®å½•åˆ‡æ¢ä¸ºæŒ‡å®šçš„ç›®å½•
    command     æ‰§è¡ŒæŒ‡å®šçš„å‘½ä»¤ï¼Œæ— éœ€è¿›è¡Œé€šå¸¸çš„ shell æŸ¥æ‰¾
    compgen     ä¸ºæŒ‡å®šå•è¯ç”Ÿæˆå¯èƒ½çš„è¡¥å…¨åŒ¹é…
    complete    æ˜¾ç¤ºæŒ‡å®šçš„å•è¯æ˜¯å¦‚ä½•è¡¥å…¨çš„
    compopt     ä¿®æ”¹æŒ‡å®šå•è¯çš„è¡¥å…¨é€‰é¡¹
    continue    ç»§ç»­æ‰§è¡Œ forã€whileã€select æˆ– until å¾ªç¯çš„ä¸‹ä¸€æ¬¡è¿­ä»£
    declare     å£°æ˜ä¸€ä¸ªå˜é‡æˆ–å˜é‡ç±»å‹ã€‚
    dirs        æ˜¾ç¤ºå½“å‰å­˜å‚¨ç›®å½•çš„åˆ—è¡¨
    disown      ä»è¿›ç¨‹ä½œä¸šè¡¨ä¸­åˆªé™¤æŒ‡å®šçš„ä½œä¸š
    echo        å°†æŒ‡å®šå­—ç¬¦ä¸²è¾“å‡ºåˆ° STDOUT
    enable      å¯ç”¨æˆ–ç¦ç”¨æŒ‡å®šçš„å†…å»ºshellå‘½ä»¤
    eval        å°†æŒ‡å®šçš„å‚æ•°æ‹¼æ¥æˆä¸€ä¸ªå‘½ä»¤ï¼Œç„¶åæ‰§è¡Œè¯¥å‘½ä»¤
    exec        ç”¨æŒ‡å®šå‘½ä»¤æ›¿æ¢ shell è¿›ç¨‹
    exit        å¼ºåˆ¶ shell ä»¥æŒ‡å®šçš„é€€å‡ºçŠ¶æ€ç é€€å‡º
    export      è®¾ç½®å­ shell è¿›ç¨‹å¯ç”¨çš„å˜é‡
    fc          ä»å†å²è®°å½•ä¸­é€‰æ‹©å‘½ä»¤åˆ—è¡¨
    fg          å°†ä½œä¸šä»¥å‰å°æ¨¡å¼è¿è¡Œ
    getopts     åˆ†ææŒ‡å®šçš„ä½ç½®å‚æ•°
    hash        æŸ¥æ‰¾å¹¶è®°ä½æŒ‡å®šå‘½ä»¤çš„å…¨è·¯å¾„å
    help        æ˜¾ç¤ºå¸®åŠ©æ–‡ä»¶
    history     æ˜¾ç¤ºå‘½ä»¤å†å²è®°å½•
    jobs        åˆ—å‡ºæ´»åŠ¨ä½œä¸š
    kill        å‘æŒ‡å®šçš„è¿›ç¨‹ ID(PID) å‘é€ä¸€ä¸ªç³»ç»Ÿä¿¡å·
    let         è®¡ç®—ä¸€ä¸ªæ•°å­¦è¡¨è¾¾å¼ä¸­çš„æ¯ä¸ªå‚æ•°
    local       åœ¨å‡½æ•°ä¸­åˆ›å»ºä¸€ä¸ªä½œç”¨åŸŸå—é™çš„å˜é‡
    logout      é€€å‡ºç™»å½• shell
    mapfile     ä» STDIN è¯»å–æ•°æ®è¡Œï¼Œå¹¶å°†å…¶åŠ å…¥ç´¢å¼•æ•°ç»„
    popd        ä»ç›®å½•æ ˆä¸­åˆ é™¤è®°å½•
    printf      ä½¿ç”¨æ ¼å¼åŒ–å­—ç¬¦ä¸²æ˜¾ç¤ºæ–‡æœ¬
    pushd       å‘ç›®å½•æ ˆæ·»åŠ ä¸€ä¸ªç›®å½•
    pwd         æ˜¾ç¤ºå½“å‰å·¥ä½œç›®å½•çš„è·¯å¾„å
    read        ä» STDIN è¯»å–ä¸€è¡Œæ•°æ®å¹¶å°†å…¶èµ‹ç»™ä¸€ä¸ªå˜é‡
    readarray   ä» STDIN è¯»å–æ•°æ®è¡Œå¹¶å°†å…¶æ”¾å…¥ç´¢å¼•æ•°ç»„
    readonly    ä» STDIN è¯»å–ä¸€è¡Œæ•°æ®å¹¶å°†å…¶èµ‹ç»™ä¸€ä¸ªä¸å¯ä¿®æ”¹çš„å˜é‡
    return      å¼ºåˆ¶å‡½æ•°ä»¥æŸä¸ªå€¼é€€å‡ºï¼Œè¿™ä¸ªå€¼å¯ä»¥è¢«è°ƒç”¨è„šæœ¬æå–
    set         è®¾ç½®å¹¶æ˜¾ç¤ºç¯å¢ƒå˜é‡çš„å€¼å’Œ shell å±æ€§
    shift       å°†ä½ç½®å‚æ•°ä¾æ¬¡å‘ä¸‹é™ä¸€ä¸ªä½ç½®
    shopt       æ‰“å¼€/å…³é—­æ§åˆ¶ shell å¯é€‰è¡Œä¸ºçš„å˜é‡å€¼
    source      è¯»å–å¹¶æ‰§è¡ŒæŒ‡å®šæ–‡ä»¶ä¸­çš„å‘½ä»¤ï¼ˆåœ¨å½“å‰ shell ç¯å¢ƒä¸­ï¼‰
    suspend     æš‚åœ Shell çš„æ‰§è¡Œï¼Œç›´åˆ°æ”¶åˆ°ä¸€ä¸ª SIGCONT ä¿¡å·
    test        åŸºäºæŒ‡å®šæ¡ä»¶è¿”å›é€€å‡ºçŠ¶æ€ç  0 æˆ– 1
    times       æ˜¾ç¤ºç´¯è®¡çš„ç”¨æˆ·å’Œç³»ç»Ÿæ—¶é—´
    trap        å¦‚æœæ”¶åˆ°äº†æŒ‡å®šçš„ç³»ç»Ÿä¿¡å·ï¼Œæ‰§è¡ŒæŒ‡å®šçš„å‘½ä»¤
    type        æ˜¾ç¤ºæŒ‡å®šçš„å•è¯å¦‚æœä½œä¸ºå‘½ä»¤å°†ä¼šå¦‚ä½•è¢«è§£é‡Š
    typeset     å£°æ˜ä¸€ä¸ªå˜é‡æˆ–å˜é‡ç±»å‹ã€‚
    ulimit      ä¸ºç³»ç»Ÿç”¨æˆ·è®¾ç½®æŒ‡å®šçš„èµ„æºçš„ä¸Šé™
    umask       ä¸ºæ–°å»ºçš„æ–‡ä»¶å’Œç›®å½•è®¾ç½®é»˜è®¤æƒé™
    unalias     åˆªé™¤æŒ‡å®šçš„åˆ«å
    unset       åˆªé™¤æŒ‡å®šçš„ç¯å¢ƒå˜é‡æˆ– shell å±æ€§
    wait        ç­‰å¾…æŒ‡å®šçš„è¿›ç¨‹å®Œæˆï¼Œå¹¶è¿”å›é€€å‡ºçŠ¶æ€ç 

### bash å¿«æ·é”®

å‘½ä»¤æ™ºèƒ½å’Œç›®å½•è¡¥å…¨ï¼šè¾“å…¥å‘½ä»¤æˆ–ç›®å½•æ—¶ï¼Œä¸éœ€è¦å®Œæ•´è¾“å…¥ï¼Œç»™å‡ºå¼€å¤´å­—æ¯åï¼ŒæŒ‰ä¸¤æ¬¡ TAB é”®æœ‰æç¤ºå’Œè‡ªåŠ¨å®ŒæˆåŠŸèƒ½ã€‚

linuxä¸‹shellç»ˆç«¯é‡Œæœ‰è¡Œç¼–è¾‘åŠŸèƒ½ï¼Œåœ¨å‘½ä»¤æç¤ºç¬¦ä¸‹é»˜è®¤å¯ä»¥åƒ emacs ä¸€æ ·ç¼–è¾‘è¾“å…¥çš„å‘½ä»¤ã€‚

å¯æ”¹ä¸º vi æ¨¡å¼

    # å‘½ä»¤è¡Œå¼€å¯ vi æ¨¡å¼ï¼ŒæŒ‰escåç”¨viä¸­çš„ä¸Šä¸‹é”®é€‰æ‹©å†å²å‘½ä»¤
    set -o vi

    # ä½¿ç”¨é»˜è®¤çš„ emacs æ¨¡å¼
    set -o emacs

æ‰§è¡Œ `man readline` å¯ä»¥æŸ¥çœ‹ Bash ä¸­çš„é»˜è®¤å¿«æ·é”®ï¼Œemacs æ¨¡å¼

    Tab é”®    è‡ªåŠ¨è¡¥å…¨å‘½ä»¤

    æŒ‰ä½ctrlæŒ‰xå†æŒ‰e    åœ¨ç¼–è¾‘å™¨ä¸­æ‰“å¼€å‘½ä»¤è¡Œï¼Œå¦‚æœæ˜¯viæ¨¡å¼åˆ™æ˜¯åŒæ—¶æŒ‰ esc å’Œ v

    Ctrl+c    ä¸­æ–­ï¼Œç»ˆç»“ä¸€ä¸ªå‰å°ä½œä¸šã€‚
    Ctrl+Z    æš‚åœä¸€ä¸ªå‰å°çš„ä½œä¸šï¼Œè¯¦è§ç« èŠ‚ [åçŸ¥åè§‰å‘ç°ä¸€ä¸ªå‘½ä»¤è¦æ‰§è¡Œå¾ˆä¹…ï¼ŒåŠè·¯è®©å®ƒæ”¹æˆåå°æ‰§è¡Œ]

    Ctrl+d    â€œEOFâ€ (æ–‡ä»¶ç»“å°¾ï¼šend of file)ã€‚å®ƒç”¨äºè¡¨ç¤ºæ ‡å‡†è¾“å…¥ï¼ˆstdinï¼‰çš„ç»“æŸã€‚åœ¨æ§åˆ¶å°æˆ–xterm çª—å£è¾“å…¥æ–‡æœ¬æ—¶ï¼ŒCTRL-D åˆ é™¤åœ¨å…‰æ ‡ä¸‹çš„å­—ç¬¦ã€‚ä»ä¸€ä¸ªshellä¸­é€€å‡º (ç±»ä¼¼äºexit)ã€‚å¦‚æœæ²¡æœ‰å­—ç¬¦å­˜åœ¨ï¼ŒCTRL-D åˆ™ä¼šç™»å‡ºè¯¥ä¼šè¯ã€‚åœ¨ä¸€ä¸ªxtermçª—å£ä¸­ï¼Œåˆ™ä¼šäº§ç”Ÿå…³é—­æ­¤çª—å£çš„æ•ˆæœã€‚

    Ctrl+r    å›æº¯æœç´¢(Backwards search)historyç¼“å†²åŒºå†…çš„æ–‡æœ¬ï¼ˆåœ¨å‘½ä»¤è¡Œä¸‹ï¼‰ã€‚æ³¨æ„ï¼šæŒ‰ä¸‹ä¹‹åï¼Œæç¤ºç¬¦ä¼šå˜æˆ(reverse-i-search)â€:è¾“å…¥çš„æœç´¢å†…å®¹å‡ºç°åœ¨å•å¼•å·å†…ï¼ŒåŒæ—¶å†’å·åé¢å‡ºç°æœ€è¿‘æœ€åŒ¹é…çš„å†å²å‘½ä»¤ã€‚é‡å¤æŒ‰ä¸‹ ctrl-r ä¼šå‘åæŸ¥æ‰¾åŒ¹é…é¡¹ï¼ŒæŒ‰ä¸‹ Enter é”®ä¼šæ‰§è¡Œå½“å‰åŒ¹é…çš„å‘½ä»¤ï¼Œè€ŒæŒ‰ä¸‹å³æ–¹å‘é”®ä¼šå°†åŒ¹é…é¡¹æ”¾å…¥å½“å‰è¡Œä¸­ï¼Œä¸ä¼šç›´æ¥æ‰§è¡Œï¼Œä»¥ä¾¿åšå‡ºä¿®æ”¹
    Ctrl+s    å‘å‰æœç´¢å†å²è®°å½•
    Alt+r     æ’¤é”€å¯¹ä»å†å²è®°å½•ä¸­å¸¦æ¥çš„å‘½ä»¤çš„ä¿®æ”¹

    Ctrl+p    æ˜¾ç¤ºä¸Šä¸€æ¡å‘½ä»¤
    Ctrl+n    æ˜¾ç¤ºä¸‹ä¸€æ¡å‘½ä»¤

    Ctrl+a    ç§»åŠ¨å…‰æ ‡åˆ°è¡Œé¦–
    Ctrl+e    ç§»åŠ¨å…‰æ ‡åˆ°è¡Œå°¾

    Ctrl+b    å…‰æ ‡åé€€ä¸€ä¸ªå­—ç¬¦
    Ctrl+f    å…‰æ ‡å‰è¿›ä¸€ä¸ªå­—ç¬¦

    Alt+b     å…‰æ ‡å¾€å›è·³ä¸€ä¸ªè¯
    Alt+f     å…‰æ ‡å¾€å‰è·³ä¸€ä¸ªè¯

    Ctrl+h    æ“¦é™¤(Rubout)(ç ´åæ€§çš„é€€æ ¼)ã€‚åœ¨å…‰æ ‡å¾€å›ç§»åŠ¨çš„æ—¶å€™ï¼ŒåŒæ—¶æ“¦é™¤å…‰æ ‡å‰çš„ä¸€ä¸ªå­—ç¬¦ã€‚
    Ctrl+u    æ“¦é™¤å…‰æ ‡å‰çš„æ‰€æœ‰å­—ç¬¦
    Ctrl+k    åˆ é™¤å…‰æ ‡åçš„æ‰€æœ‰å­—ç¬¦
    Ctrl+w    åˆ é™¤å…‰æ ‡å‰çš„ä¸€ä¸ªå•è¯
    Ctrl+y    å°†ä¹‹å‰å·²ç»æ¸…é™¤çš„æ–‡æœ¬ç²˜è´´å›æ¥ï¼ˆä¸»è¦é’ˆå¯¹CTRL-Uæˆ–CTRL-Wï¼‰ã€‚

    Ctrl+/    æ’¤æ¶ˆæ“ä½œï¼ŒUndoã€‚

    Ctrl+l     æ¸…ç©ºå±å¹•å¹¶é‡æ–°æ˜¾ç¤ºå½“å‰è¡Œï¼Œæ¯”ç”¨ clear å‘½ä»¤æ›´æ–¹ä¾¿ã€‚

    tail -f çš„æ—¶å€™å†»ç»“ã€è§£å†»ç»ˆç«¯ç•Œé¢
    ^sï¼ˆctrl + sï¼‰å°†é€šè¿‡æ‰§è¡Œæµé‡æ§åˆ¶å‘½ä»¤ XOFF æ¥åœæ­¢ç»ˆç«¯è¾“å‡ºå†…å®¹ï¼Œè¿™ä¼šå¯¹ PuTTY ä¼šè¯å’Œæ¡Œé¢ç»ˆç«¯çª—å£äº§ç”Ÿå½±å“ã€‚å¦‚æœè¯¯è¾“å…¥äº†è¿™ä¸ªå‘½ä»¤ï¼Œå¯ä»¥ä½¿ç”¨ ^qï¼ˆctrl + qï¼‰è®©ç»ˆç«¯é‡æ–°å“åº”ã€‚æ‰€ä»¥åªéœ€è¦è®°ä½ ^q è¿™ä¸ªç»„åˆé”®å°±å¯ä»¥äº†ï¼Œæ¯•ç«Ÿè¿™ç§æƒ…å†µå¹¶ä¸å¤šè§ã€‚

### å¸¸ç”¨ shell è„šæœ¬ä»£ç ç‰‡æ®µ

ç›®å½• shell_script ä¸‹æ˜¯å†™çš„ä¸é”™çš„è„šæœ¬ç¤ºä¾‹

    https://github.com/jacyl4/de_GWD
    https://github.com/acmesh-official/acme.sh

> ç¯å¢ƒå˜é‡

    åˆ†ç³»ç»Ÿçº§ç”Ÿæ•ˆæˆ–ç”¨æˆ·çº§ï¼Œshell æˆ– gui å„æœ‰ä¸åŒ

        https://wiki.archlinux.org/title/Environment_variables

    æ‰§è¡Œ `set` å¯ä»¥æŸ¥çœ‹å½“å‰ shell çš„ç¯å¢ƒå˜é‡å’Œå‡½æ•°è®¾ç½®ï¼Œä¾¿äºè°ƒè¯•ã€‚

> å½“å‰shellå’ŒåµŒå¥—å±‚æ•°

æŸ¥çœ‹å½“å‰æ‰€ä½¿ç”¨çš„shellç¨‹åº

    $ echo $0
    -bash

ä½ åœ¨ç»ˆç«¯ä¸­è°ƒç”¨ä¸åŒçš„ shellï¼Œ$SHELL æ˜¯ä¿æŒä¸å˜çš„ï¼šä¸è¦è¢«ä¸€ä¸ªå«åš $SHELL çš„å•ç‹¬çš„ç¯å¢ƒå˜é‡æ‰€è¿·æƒ‘ï¼Œå®ƒè¢«è®¾ç½®ä¸ºä½ çš„é»˜è®¤ shell çš„å®Œæ•´è·¯å¾„ã€‚å› æ­¤ï¼Œè¿™ä¸ªå˜é‡å¹¶ä¸ä¸€å®šæŒ‡å‘ä½ å½“å‰ä½¿ç”¨çš„ shellã€‚
    $ echo $SHELL
    /bin/bash

å½“å‰shellçš„åµŒå¥—å±‚æ•°

    $ echo $SHLVL
    1

    $ bash

    $ echo $SHLVL
    2

    $ exit
    exit

    echo $SHLVL
    1

ç»„å‘½ä»¤ã€ç®¡é“ã€å‘½ä»¤æ›¿æ¢è¿™å‡ ç§å†™æ³•éƒ½ä¼šè¿›å…¥å­ Shell

    $ echo "$SHLVL  $BASH_SUBSHELL"
    1  0

    $ (echo "$SHLVL  $BASH_SUBSHELL") # ç»„å‘½ä»¤
    1  1

    $ echo "hello" | { echo "$SHLVL  $BASH_SUBSHELL"; }  # ç®¡é“
    1  1

    $ var=$(echo "$SHLVL  $BASH_SUBSHELL");echo $var  #å‘½ä»¤æ›¿æ¢
    1 1

    $ ( ( ( (echo "$SHLVL  $BASH_SUBSHELL") ) ) )  #å››å±‚ç»„å‘½ä»¤
    1  4

æŸ¥çœ‹ä¸‹å½“å‰çš„ç³»ç»Ÿæœ‰å“ªäº› shell è„šæœ¬è§£é‡Šå™¨

    $ cat /etc/shells
    # /etc/shells: valid login shells
    /bin/sh
    /bin/bash
    /usr/bin/bash
    /bin/rbash
    /usr/bin/rbash
    /bin/dash
    /usr/bin/dash
    /usr/bin/tmux
    /usr/bin/screen

ç³»ç»Ÿçº§é»˜è®¤/bin/shï¼Œç”¨æˆ·ç™»å½•é»˜è®¤/bin/bashï¼Œä¸€èˆ¬å†™è„šæœ¬æ–‡ä»¶åº”è¯¥æ˜ç¡®ç”¨å“ªä¸ªè§£é‡Šå™¨æ‰§è¡Œï¼Œåœ¨ç¬¬ä¸€è¡Œï¼š `#!/bin/bash`ã€‚

```bash

#!/usr/bin/env python3  # æŒ‰ç…§PATHå¯»æ‰¾ç¬¬ä¸€ä¸ªpython3ç¨‹åºæ¥æ‰§è¡Œ
#!/bin/bash æ³¨æ„ï¼šåœ¨#!å’Œ/bin/bashé—´ä¸è¦æœ‰ç©ºæ ¼ï¼Œæœ‰äº›Linuxç³»ç»Ÿé‡åˆ°ç©ºæ ¼å°±ä¸ä¼šæ‰§è¡Œåé¢çš„/bin/bashäº†ï¼Œä½†æ˜¯ä¸ä¼šæç¤ºä½¿ç”¨äº†é»˜è®¤çš„ $SHELLï¼Œè€Œä¸¤ç§è§£é‡Šå™¨ä¹‹é—´ç»†å¾®çš„è¯­æ³•åŒºåˆ«ï¼Œå¶å°”ä¼šå‡ºç°è®©äººæ‘¸ä¸åˆ°å¤´è„‘çš„æŠ¥é”™ï¼Œè¦å°½é‡é¿å…è¿™ä¸ªéº»çƒ¦
#
# å‚è€ƒ:
# https://zhuanlan.zhihu.com/p/123989641

# Bachè„šæœ¬æµ‹è¯•æ¡†æ¶ https://github.com/bach-sh/bach/blob/master/README-cn.md
# source path/to/bach.sh

####################################################################
# æ­¤éƒ¨åˆ†ä½œä¸ºæ™®é€šè„šæœ¬çš„é»˜è®¤å¤´éƒ¨å†…å®¹ï¼Œä¾¿äºè°ƒæµ‹è¿è¡Œã€‚
#
# declare -p PS1 æ‰“å°æŒ‡å®šå˜é‡çš„å®šä¹‰
# set æ˜¾ç¤ºå½“å‰æ‰€æœ‰å†…ç½®å˜é‡å’Œå‡½æ•°å®šä¹‰
#
# -x ï¼š åœ¨æ‰§è¡Œæ¯ä¸€ä¸ªå‘½ä»¤ä¹‹å‰æŠŠç»è¿‡å˜é‡å±•å¼€ä¹‹åçš„å‘½ä»¤æ‰“å°å‡ºæ¥ã€‚
# -e ï¼š é‡åˆ°ä¸€ä¸ªå‘½ä»¤å¤±è´¥ï¼ˆè¿”å›ç éé›¶ï¼‰æ—¶ï¼Œç«‹å³é€€å‡ºã€‚
# -u ï¼šè¯•å›¾ä½¿ç”¨æœªå®šä¹‰çš„å˜é‡ï¼Œå°±ç«‹å³é€€å‡ºã€‚
# -o pipefail ï¼š åªè¦ç®¡é“ä¸­çš„ä¸€ä¸ªå­å‘½ä»¤å¤±è´¥ï¼Œæ•´ä¸ªç®¡é“å‘½ä»¤å°±å¤±è´¥ï¼Œè¿™æ ·å¯ä»¥æ•è·åˆ°å…¶é€€å‡ºä»£ç 
set -xeuo pipefail

# é˜²æ­¢é‡å¤è¿è¡Œ
exec 123<>lock_myscript   # æŠŠlock_myscriptæ‰“å¼€ä¸ºæ–‡ä»¶æè¿°ç¬¦123
flock --wait 5  123 || { echo 'cannot get lock, exit'; exit 1; }

# æ„å¤–é€€å‡ºæ—¶æ€æ‰æ‰€æœ‰å­è¿›ç¨‹
trap "trap - SIGTERM && kill -- -$$" SIGINT SIGTERM EXIT
#æˆ–
trap "pkill -f $(basename $0);exit 1" SIGINT SIGTERM EXIT ERR
trap "echo 'signal_handled:';kill 0" SIGINT SIGTERM

# timeout é™åˆ¶è¿è¡Œæ—¶é—´
timeout 600s  some_command arg1 arg2

# è¿ç»­ç®¡é“æ—¶ï¼Œè€ƒè™‘ä½¿ç”¨ tee å°†ä¸­é—´ç»“æœè½ç›˜ï¼Œä»¥ä¾¿æŸ¥é—®é¢˜
cmd1 | tee out1.dat | cmd2 | tee out2.dat | cmd3 > out3.dat

DATE_TIME() {
    date +"%m-%d %H:%M:%S"
}

####################################################################
#
# æ–‡å­—é¢œè‰²ç”Ÿæˆæ¨¡æ¿ https://ciembor.github.io/4bit
# è¯¦è§ç« èŠ‚ [ç»ˆç«¯æ¨¡æ‹Ÿå™¨å’Œè½¯ä»¶çš„çœŸå½©è‰²è®¾ç½®](gnu_tools.md)

# ç»™æ–‡å­—åŠ é¢œè‰²
#   echo -e "${green}All done!${plain}"
Color_red='\033[0;31m'
Color_green="\033[0;32m"
Color_yellow="\033[0;33m"
Color_plain='\033[0m'

# è¾“å‡ºä¿¡æ¯
# è°ƒç”¨æ—¶æ³¨æ„åŒºåˆ«ï¼Œæ˜¯å¦ä½¿ç”¨å˜é‡æ›¿æ¢
#   $ aaaa='1111111111111'
#   $ show_error "aaaa is ${aaaa}"
#   21 11:25:35 [ERROR] aaaa is 1111111111111
#   $ show_error 'aaaa is ${aaaa}'
#   03/21 11:25:39 [ERROR] aaaa is ${aaaa}
show_info() {
    echo && echo -e "$(DATE_TIME) [${Color_green}INFO${Color_plain}] ${1}"
}

show_warn() {
    echo && echo -e "$(DATE_TIME) [${Color_yellow}WARN${Color_plain}] ${1}"
}

show_error() {
    echo && echo -e "$(DATE_TIME) [${Color_red}ERROR${Color_plain}] ${1}"
}

# è®¾ç½®å˜é‡
ARIA2_CONF=${1:-aria2.conf}
DOWNLOADER="curl -fsSL --connect-timeout 3 --max-time 3 --retry 2"

# åŒ…è£…åˆ¤æ–­è¯­å¥
is_ipv4_address() {
    [ $(grep -Ec '^[0-9]+\.[0-9]+\.[0-9]+\.[0-9]+$' <<<"$1") -ne 0 ]
}

# åˆ¤æ–­è¿”å›å€¼
[ -z "$res" ] && ngstatus="${Color_red}å·²åœæ­¢${Color_plain}" || ngstatus="${Color_green}æ­£åœ¨è¿è¡Œ${Color_plain}"
echo -e " nginxè¿è¡ŒçŠ¶æ€ï¼š${ngstatus}"

# æ›´ç®€æ´çš„åˆ¤æ–­æ‰§è¡Œç»“æœ
[ $(command -v curl) ] || {
    show_error "curl is not installed."
    exit 1
}

# åˆ¤æ–­ç«¯å£æ˜¯å¦å­˜åœ¨ï¼Œå¦åˆ™æ‰“å°
[[ ${RPC_PORT} ]] || {
    echo && echo -e "$(DATE_TIME) ${Color_red} Aria2 configuration file incomplete.{Color_plain}"
    exit 1
}

# å­—ç¬¦ä¸²æ¯”è¾ƒï¼Œç”¨ [[]] æ›´æ–¹ä¾¿
if [[ $(systemctl is-active 'nginx') = "active" ]]; then
    echo -e "nginx     [ âœ“ ]"
fi

# å°è¯•å¤šä¸ªæŒ‡ä»¤ï¼ŒæˆåŠŸä¸€ä¸ªå³å¯
TRACKER=$(
    wget $url1 ||wget $url2 ||wget $url3
)

# æŒ‰æ ¼å¼æ‰“å°
ECHO_TRACKERS() {
    echo -e "
--------------------[BitTorrent Trackers]--------------------
${TRACKER}
--------------------[BitTorrent Trackers]--------------------
"
}

#############################################
# ä¸€æ¡å‘½ä»¤å–ç»“æœèµ‹å€¼ç»™å˜é‡ï¼Œå¹¶åˆ¤æ–­è¿”å›å€¼å†³å®šæ˜¯å¦å‘½ä»¤ä¸å­˜åœ¨
# ä¸»è¦ç”¨äº æ— å‘½ä»¤æŠ¥é”™ï¼Œé€€å‡ºï¼Œæœ‰å‘½ä»¤ï¼Œç›´æ¥å–å€¼ï¼Œé¿å…å¤šè¿è¡Œä¸€æ¬¡ã€‚
_pp_branch_name=$(git symbolic-ref --short -q HEAD 2>/dev/null)
exitcode="$?"

if [ $exitcode -eq 0 ]; then
    printf "%s" $_pp_branch_name
fi

if [ $exitcode -eq 1 ]; then

    headhash="$(git rev-parse HEAD)"
    printf "%s" "#${headhash}"

fi

#############################################
#
# æ‰“å°å¤šè¡Œå‘½ä»¤å¹¶æ‰§è¡Œï¼Œæ³¨æ„ ${å˜é‡å[@]} çš„ç”¨æ³•
readonly IPV6_RESERVED_IPADDRS=(
    ::/128
    ::1/128
    ::ffff:0:0/96
    ::ffff:0:0:0/96
    64:ff9b::/96
    100::/64
    2001::/32
    2001:20::/28
    2001:db8::/32
    2002::/16
    fc00::/7
    fe80::/10
    ff00::/8
)
for private_addr in "${IPV6_RESERVED_IPADDRS[@]}" ; do $(ip6tables -t mangle -A VVTAB -d $private_addr -j RETURN); done

for fn in $(ls *.pyi |grep -v __init__); do
    echo "import $fn as $(basename $fn .pyi)"
done

# æ‹¼æ¥å‘½ä»¤è¡Œå‚æ•°
IGNITION_CONFIG="/path/to/example.ign"
IGNITION_DEVICE_ARG=(--disk path="${IGNITION_CONFIG}",format=raw,readonly=on,serial=ignition,startup_policy=optional)

virt-install --name="${VM_NAME}" --os-variant="fedora-coreos-$STREAM" \
        --import --graphics=none \
        --network bridge=virbr0 "${IGNITION_DEVICE_ARG[@]}"
#################################################

# åˆ¤æ–­å½“å‰æ“ä½œç³»ç»Ÿç¯å¢ƒ

case "$OSTYPE" in
    solaris*) echo "SOLARIS" ;;
    darwin*)  echo "OSX" ;;
    linux*)   echo "LINUX" ;;
    bsd*)     echo "BSD" ;;
    msys*)    echo "WINDOWS" ;;
    *)        echo "unknown: $OSTYPE" ;;
esac

OS="`uname`"
case $OS in
  'Linux')
    OS='Linux'
    alias ls='ls --color=auto'
    ;;
  'FreeBSD')
    OS='FreeBSD'
    alias ls='ls -G'
    ;;
  # MSYS_NT
  'WindowsNT')
    OS='Windows'
    ;;
  'Darwin')
    OS='Mac'
    ;;
  'SunOS')
    OS='Solaris'
    ;;
  'AIX') ;;
  *) ;;
esac

# case
case "$platform" in
  'darwin arm64');;
  'darwin x86_64');;
  'linux aarch64');;
  'linux armv6l');;
  'linux armv7l');;
  'linux armv8l');;
  'linux x86_64');;
  'linux i686');;
  *)
    >&2 'printf' '\033[33mz4h\033[0m: sorry, unsupported platform: \033[31m%s\033[0m\n' "$platform"
    'exit' '1'
  ;;
esac

```

## Linux å¸¸ç”¨å‘½ä»¤è¡Œå·¥å…·

    Linux å‘½ä»¤é€ŸæŸ¥

        https://man7.org/linux/man-pages/index.html

        GNU æŒ‰ç”¨é€”åˆ†ç±»ä»‹ç»
            https://www.gnu.org/software/coreutils/manual/html_node/index.html#SEC_Contents

        å¸¸ç”¨å·¥å…· coreutils åŒ…æ¸…å•
            https://manpages.debian.org/unstable/coreutils/index.html

        æŒ‰å†…å®¹æœç´¢åŒ…
            https://www.debian.org/distrib/packages#search_contents

    Linux å†…æ ¸å·¥å…·åŒ…ä¸€èˆ¬å‘è¡Œç‰ˆéƒ½å†…ç½®äº†

      https://www.kernel.org/pub/linux/utils/util-linux/

    GNU æŒ‰è½¯ä»¶åŒ…åˆ†ç±»

        https://www.gnu.org/manual/manual.html

    ç®€æ˜“ GNU è½¯ä»¶åˆ—è¡¨

        https://www.gnu.org/software/software.en.html#allgnupkgs

    å¸¦è¯´æ˜çš„ GUN è½¯ä»¶åˆ—è¡¨

        https://directory.fsf.org/wiki/GNU

    debian æ‰‹å†Œ

        https://manpages.debian.org/bullseye/procps/ps.1.en.html

        https://www.debian.org/doc/

        https://wiki.debian.org/ManualPage

        å…¶å®ƒå„linuxå¸®åŠ©æ‰‹å†Œ https://manpages.debian.org/about.html

    æœ‰å¾ˆå¤šå¸¸ç”¨å·¥å…·ä»‹ç»

        https://lindevs.com/category/embedded-system/raspberry-pi?page=1

    python çš„ä¸€è¡Œå‘½ä»¤

        https://wiki.python.org/moin/Powerful%20Python%20One-Liners

### man/info æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯

    https://www.redhat.com/sysadmin/linux-command-documentation

å…ˆæŠŠåŸºç¡€å‘½ä»¤çš„ man ç« èŠ‚å®‰è£…å®Œæ•´ï¼Œå‚è§ç« èŠ‚ [å®‰è£…å®Œæ•´çš„ man æ‰‹å†Œ](init_a_server.md think)ã€‚

å‘½ä»¤çš„ man çš„å†…å®¹å¯èƒ½å­˜åœ¨äºå¤šä¸ªèŠ‚ä¸­ï¼Œä¸€èˆ¬å½’ç±»åˆ†ä¸ºä»¥ä¸‹å‡ èŠ‚ï¼š

    ç”¨æˆ·å‘½ä»¤ï¼ˆç¬¬ 1 èŠ‚ï¼‰
    ç³»ç»Ÿè°ƒç”¨ï¼ˆç¬¬ 2 èŠ‚ï¼‰
    C åº“å‡½æ•°ï¼ˆç¬¬ 3 èŠ‚ï¼‰
    è®¾å¤‡å’Œç‰¹æ®Šæ–‡ä»¶ï¼ˆç¬¬ 4 èŠ‚ï¼‰
    æ–‡ä»¶æ ¼å¼å’Œçº¦å®šï¼ˆç¬¬ 5 èŠ‚ï¼‰
    æ¸¸æˆï¼ˆç¬¬6èŠ‚ï¼‰
    æ‚é¡¹ï¼ˆç¬¬7èŠ‚ï¼‰
    ç³»ç»Ÿç®¡ç†å·¥å…·å’Œå®ˆæŠ¤ç¨‹åºï¼ˆç¬¬ 8 èŠ‚ï¼‰

    ç« èŠ‚    åç§°                        æè¿°

    1   Standard commands(æ ‡å‡†å‘½ä»¤)    Executable programs or shell commands, æ™®é€šçš„å‘½ä»¤

    2   System calls(ç³»ç»Ÿè°ƒç”¨)          System calls (functions provided by the kernel)ç³»ç»Ÿè°ƒç”¨,å¦‚open,writeä¹‹ç±»çš„(é€šè¿‡è¿™ä¸ªï¼Œè‡³å°‘å¯ä»¥å¾ˆæ–¹ä¾¿çš„æŸ¥åˆ°è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œéœ€è¦åŠ ä»€ä¹ˆå¤´æ–‡ä»¶)

    3   Libraryfunctions(åº“å‡½æ•°)        Library calls (functions within program libraries), åº“å‡½æ•°,å¦‚printf,fread

    4   Specialdevices(è®¾å¤‡è¯´æ˜)        Special files (usually found in /dev), ç‰¹æ®Šæ–‡ä»¶,ä¹Ÿå°±æ˜¯/devä¸‹çš„å„ç§è®¾å¤‡æ–‡ä»¶

    5   File formats(æ–‡ä»¶æ ¼å¼)          File formats and conventions eg /etc/passwd, æŒ‡æ–‡ä»¶çš„æ ¼å¼,æ¯”å¦‚passwd, å°±ä¼šè¯´æ˜è¿™ä¸ªæ–‡ä»¶ä¸­å„ä¸ªå­—æ®µçš„å«ä¹‰

    6   Games andtoys(æ¸¸æˆå’Œå¨±ä¹)       ç»™æ¸¸æˆç•™çš„,ç”±å„ä¸ªæ¸¸æˆè‡ªå·±å®šä¹‰

    7   Miscellaneous(æ‚é¡¹)             Miscellaneous (including macro packages and conventions), e.g. man(7), groff(7),é™„ä»¶è¿˜æœ‰ä¸€äº›å˜é‡,æ¯”å¦‚ environ è¿™ç§å…¨å±€å˜é‡åœ¨è¿™é‡Œå°±æœ‰è¯´æ˜

    8   AdministrativeCommands(ç®¡ç†å‘˜å‘½ä»¤)  System administration commands (usually only for root), ç³»ç»Ÿç®¡ç†ç”¨çš„å‘½ä»¤,è¿™äº›å‘½ä»¤åªèƒ½ç”±rootä½¿ç”¨,å¦‚ifconfig

    Kernel routines [Non standard]

man æŸ¥çœ‹å‘½ä»¤çš„é»˜è®¤ç« èŠ‚

    man signal

man æŸ¥çœ‹æŒ‡å®šç« èŠ‚åç¼€ç”¨.æ•°å­—å³å¯

    man 7 signal

    man signal.7

åº”ç”¨ç¨‹åºå¯èƒ½è¿˜æä¾›äº†ä¸€äº›é…ç½®æ–‡ä»¶æ ·ä¾‹ç­‰ï¼Œä¸€èˆ¬éƒ½è·Ÿ man çš„å†…å®¹ä¿å­˜åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹

    /usr/share/doc

ç”¨ `apropos` å‘½ä»¤æ¥æŸ¥æ‰¾ç›¸å…³è”çš„å¸®åŠ©

    $ apropos sysctl
    _sysctl (2)          - read/write system parameters
    sysctl (2)           - read/write system parameters
    sysctl (8)           - configure kernel parameters at runtime
    sysctl.conf (5)      - sysctl preload/configuration file
    sysctl.d (5)         - Configure kernel parameters at boot
    systemd-sysctl (8)   - Configure kernel parameters at boot
    systemd-sysctl.service (8) - Configure kernel parameters at boot

info å‘½ä»¤å€¾å‘äºå¯è¯»æ€§å’Œæ›´æ·±å…¥çš„è§£é‡Šã€‚ä¿¡æ¯é¡µç³»ç»Ÿè¿˜æ”¯æŒæ–‡æ¡£ä¹‹é—´çš„åŸºæœ¬é“¾æ¥ï¼Œä»¥ä¾¿äºäº¤å‰å¼•ç”¨ã€‚è¿™æä¾›äº†ä¸€ä¸ªæ›´æœ‰æ¡ç†å’Œå¯è¯»æ€§çš„æ–‡æ¡£é›†ã€‚

    info ls

    å¦‚æœæ²¡æœ‰ info å†…å®¹ï¼Œä¼šè½¬ä¸º man çš„å†…å®¹ï¼Œæœ‰æç¤º 'Info: (*manpages*)ssh, 684 lines --Top'

        info ssh

### Vim å’Œ nano

    https://vim-jp.org/vimdoc-en/scroll.html

    https://vimcdoc.sourceforge.net/doc/help.html

æœ€åŸºç¡€çš„ç‰ˆæœ¬æ˜¯ç±»ä¼¼ vi çš„ vim tinny ç‰ˆæœ¬ï¼Œä¸æ”¯æŒè¯­æ³•é«˜äº®ã€çª—å£æ‹†åˆ†ç­‰å„ç§é«˜çº§åŠŸèƒ½ã€‚

vim å®‰è£…è§ç« èŠ‚ [ä½¿ç”¨çŠ¶æ€æ ç­‰æ‰©å±•æ’ä»¶çš„å…ˆå†³æ¡ä»¶]ã€‚

> å¦‚æœ vim çš„é»˜è®¤é¢œè‰²æ–¹æ¡ˆå¤ªä¸‘

    è¾“å…¥å‘½ä»¤ :color åå›è½¦æŸ¥çœ‹å½“å‰çš„é¢œè‰²ä¸»é¢˜ã€‚

    è¾“å…¥å‘½ä»¤ :colorscheme slate ï¼Œå³å¯è®¾ç½®å½“å‰vimå®ä¾‹çš„é¢œè‰²ä¸»é¢˜ä¸º slateã€‚

    :syntax enable  å¯ç”¨è¯­æ³•é«˜äº®

    :syntax clear   å…³é—­è¯­æ³•é«˜äº®

> vim è§£å†³æ±‰å­—ä¹±ç 

å¦‚æœä½ çš„ vim æ‰“å¼€æ±‰å­—å‡ºç°ä¹±ç çš„è¯ï¼Œé‚£ä¹ˆåœ¨ $HOME ç›®å½•(~)ä¸‹ï¼Œæ–°å»º .vimrc æ–‡ä»¶

    $ nano ~/.vimrc

æ·»åŠ å†…å®¹å¦‚ä¸‹ï¼š

    set fileencodings=utf-8,gb2312,gb18030,gbk,ucs-bom,cp936,latin1
    set enc=utf8
    set fencs=utf8,gbk,gb2312,gb18030

#### nano ç”¨æ³•

å¸¸ç”¨ç¼–è¾‘å‘½ä»¤åœ¨åº•éƒ¨éƒ½æœ‰æç¤ºï¼Œé€‚åˆä¸ä¼šç”¨ vi çš„ç”¨æˆ·ã€‚

å…‰æ ‡æ§åˆ¶

    ç§»åŠ¨å…‰æ ‡ï¼šä½¿ç”¨ç”¨æ–¹å‘é”®ç§»åŠ¨ã€‚
    é€‰æ‹©æ–‡å­—ï¼šæŒ‰ä½é¼ æ ‡å·¦é”®æ‹–åŠ¨ã€‚

å¤åˆ¶ã€å‰ªè´´å’Œç²˜è´´

    å¤åˆ¶ä¸€æ•´è¡Œï¼šAlt+6
    å‰ªè´´ä¸€æ•´è¡Œï¼šCtrl+K
    ç²˜è´´ï¼šCtrl+U

å¦‚æœéœ€è¦å¤åˆ¶/å‰ªè´´å¤šè¡Œæˆ–è€…ä¸€è¡Œä¸­çš„ä¸€éƒ¨åˆ†ï¼Œå…ˆå°†å…‰æ ‡ç§»åŠ¨åˆ°éœ€è¦å¤åˆ¶/å‰ªè´´çš„æ–‡æœ¬çš„å¼€å¤´ï¼ŒæŒ‰Ctrl+6ï¼ˆæˆ–è€…Alt+Aï¼‰åšæ ‡è®°ï¼Œç„¶åç§»åŠ¨å…‰æ ‡åˆ° å¾…å¤åˆ¶/å‰ªè´´çš„æ–‡æœ¬æœ«å°¾ã€‚è¿™æ—¶é€‰å®šçš„æ–‡æœ¬ä¼šåç™½ï¼Œç”¨Alt+6æ¥å¤åˆ¶ï¼ŒCtrl+Kæ¥å‰ªè´´ã€‚è‹¥åœ¨é€‰æ‹©æ–‡æœ¬è¿‡ç¨‹ä¸­è¦å–æ¶ˆï¼Œåªéœ€è¦å†æŒ‰ä¸€æ¬¡Ctrl+6ã€‚

æœç´¢

æŒ‰Ctrl+Wï¼Œç„¶åè¾“å…¥ä½ è¦æœç´¢çš„å…³é”®å­—ï¼Œå›è½¦ç¡®å®šã€‚è¿™å°†ä¼šå®šä½åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…çš„æ–‡æœ¬ï¼Œæ¥ç€å¯ä»¥ç”¨Alt+Wæ¥å®šä½åˆ°ä¸‹ä¸€ä¸ªåŒ¹é…çš„æ–‡æœ¬ã€‚

ç¿»é¡µ

    Ctrl+Yåˆ°ä¸Šä¸€é¡µ
    Ctrl+Våˆ°ä¸‹ä¸€é¡µ

ä¿å­˜

    Ctrl+O

é€€å‡º

    Ctrl+X

å¦‚æœä½ ä¿®æ”¹äº†æ–‡ä»¶ï¼Œä¸‹é¢ä¼šè¯¢é—®ä½ æ˜¯å¦éœ€è¦ä¿å­˜ä¿®æ”¹ã€‚è¾“å…¥Yç¡®è®¤ä¿å­˜ï¼Œè¾“å…¥Nä¸ä¿å­˜ï¼ŒæŒ‰Ctrl+Cå–æ¶ˆè¿”å›ã€‚å¦‚æœè¾“å…¥äº†Yï¼Œä¸‹ä¸€æ­¥ä¼šè®©ä½ è¾“å…¥æƒ³è¦ä¿å­˜çš„æ–‡ä»¶åã€‚å¦‚æœä¸éœ€è¦ä¿®æ”¹æ–‡ä»¶åç›´æ¥å›è½¦å°±è¡Œï¼›è‹¥æƒ³è¦ä¿å­˜æˆåˆ«çš„åå­—ï¼ˆä¹Ÿå°±æ˜¯å¦å­˜ä¸ºï¼‰åˆ™è¾“å…¥æ–°åç§°ç„¶åç¡® å®šã€‚è¿™ä¸ªæ—¶å€™ä¹Ÿå¯ç”¨Ctrl+Cæ¥å–æ¶ˆè¿”å›ã€‚

#### vim æ‰©å±•æ’ä»¶

    https://vimhelp.org/starting.txt.html#vimrc

æ’ä»¶å¤§å…¨ï¼ŒVundleç­‰æ’ä»¶ç®¡ç†å™¨æ”¯æŒç®€å†™

    https://github.com/vim-scripts/

æ’ä»¶ç®¡ç†å™¨è§ä¸‹é¢ç›¸å…³ç« èŠ‚

é¢œè‰²æ–¹æ¡ˆ

    æ¨èåŒ—æï¼Œä½œä¸ºæ’ä»¶å®‰è£…å³å¯ https://www.nordtheme.com/ports/vim

    æ¨è papercolorï¼Œ vim-airline å’Œ lightline éƒ½å†…ç½®çš„ä¸€ä¸ªå…»çœ¼åˆæ¸…æ™°çš„ä¸»é¢˜

        papercolor https://github.com/NLKNguyen/papercolor-theme

    material https://github.com/material-theme/vsc-material-theme

    å¤œçŒ«å­ https://github.com/sdras/night-owl-vscode-theme

æ’ä»¶å¤§å…¨åˆ—è¡¨

    https://vimawesome.com/

##### ä½¿ç”¨çŠ¶æ€æ ç­‰æ‰©å±•æ’ä»¶çš„å…ˆå†³æ¡ä»¶

æ£€æŸ¥ vim çš„ç‰ˆæœ¬ï¼Œæ‰§è¡Œå‘½ä»¤ `vi --version` æˆ– è¿›å…¥ vim æ‰§è¡Œå‘½ä»¤ :version

    Small version without GUI.

    Tiny version without GUI.

å¦‚æœå‡ºç°ä¸Šè¿°å­—æ ·ï¼Œè¯´æ˜å½“å‰ç³»ç»Ÿåªå®‰è£…äº†å…¼å®¹ vi æ¨¡å¼çš„ç²¾ç®€ç‰ˆ vim.tinyï¼Œä¸æ”¯æŒå½©è‰²è¯­æ³•é«˜äº®ã€åˆ‡åˆ†çª—å£ç­‰é«˜çº§åŠŸèƒ½ï¼ˆvim å†…ç½®æ’ä»¶ï¼‰

Debian é‡è£…å¢å¼ºç‰ˆ:

    ç¡®è®¤ç‰ˆæœ¬

        $ vi --version
        Small version without GUI.

        $ apt list --installed |grep vi
        vim-common/stable,now 2:8.2.2434-3+deb11u1 all [installed]
        vim-tiny/stable,now 2:8.2.2434-3+deb11u1 armhf [installed]

        $ apt show vim.tiny

    å…ˆåˆ é™¤ vim.tiny

        $ sudo apt remove vim-common
        The following packages will be REMOVED:
            vim-common vim-tiny

    ç„¶åå®‰è£… vim çš„å¢å¼ºç‰ˆ

        # https://askubuntu.com/questions/284957/vi-getting-multiple-sorry-the-command-is-not-available-in-this-version-af
        # ä¸ç”¨è£… vim-gui-common è¿™ä¸ªæ˜¯ Linux æ¡Œé¢ç‰ˆçš„vimï¼Œä¸å¦‚æ¡Œé¢è‡ªå¸¦çš„è®°äº‹æœ¬æˆ–vscodeå¥½ç”¨
        $ sudo apt install vim
        The following NEW packages will be installed:
            vim vim-common vim-runtime

        # å®‰è£…ä¸ªæ–‡æ¡£
        suodu apt install vim-doc

        # å¯é€‰å®‰è£…å„ç§è„šæœ¬ https://github.com/vim-scripts
        sudo apt install vim-scripts

Fedora é‡è£…å¢å¼ºç‰ˆ:

    ç¡®è®¤ç‰ˆæœ¬

        $ vi --version
        Tiny version without GUI.

        $ dnf list --installed | grep vi
        vim-data.noarch
        vim-minimal.x86_64

        $ dnf info vim-minimal

    å…ˆåˆ é™¤ vim-minimal

        $ sudo dnf remove vim-minimal

    ç„¶åå®‰è£… vim çš„å¢å¼ºç‰ˆ

        $ sudo dnf install -y vim-enhanced vim-common

        $ cd /usr/bin; sudo ln -s vim vi

    æ£€æŸ¥ vim çš„ç‰ˆæœ¬ï¼Œæ‰§è¡Œå‘½ä»¤ `vi --version` æˆ– è¿›å…¥ vim æ‰§è¡Œå‘½ä»¤ :version

        Huge version without GUI.

ç¡®è®¤å¦‚ä¸Šå­—æ ·å³å¯ã€‚

è¦å¯ç”¨å½©è‰²è¯­æ³•é«˜äº®ã€çŠ¶æ€æ å½©è‰²ï¼ŒåŒ…æ‹¬tmuxä¸­vimä½¿ç”¨å½©è‰²ï¼Œéœ€è¦ç¼–è¾‘ ~/.vimrc æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹è¡Œ

```python

" å¦‚æœç»ˆç«¯å·¥å…·å·²ç»è®¾ç½®äº†å˜é‡ export TERM=xterm-256colorï¼Œé‚£ä¹ˆè¿™ä¸ªå‚æ•°å¯æœ‰å¯æ— 
" å¦‚æœåœ¨ tmux ä¸‹ä½¿ç”¨ vim ï¼Œé˜²æ­¢ tmux é»˜è®¤è®¾ç½® TERM=screenï¼Œåº”è¯¥ä¿ç•™æ­¤è®¾ç½®
" https://www.codenong.com/15375992/
"if &term =~? 'mlterm\|xterm'
if &term =="screen"
    set t_Co=256
endif
" çœŸå½©è‰²
" https://github.com/tmux/tmux/issues/1246
if exists('+termguicolors')
    let &t_8f = "\<Esc>[38;2;%lu;%lu;%lum"
    let &t_8b = "\<Esc>[48;2;%lu;%lu;%lum"
    lset termguicolors
endif

```

å…‰ vim è‡ªå·±è®¾ç½®çœŸå½©è‰²è¿˜ä¸å¤Ÿï¼Œéœ€è¦ç»ˆç«¯å·¥å…·ä¹Ÿæ”¯æŒï¼Œè¯¦è§ç« èŠ‚ [ç»ˆç«¯æ¨¡æ‹Ÿå™¨å’Œè½¯ä»¶çš„çœŸå½©è‰²è®¾ç½®]ã€‚

##### é…ç½®æ‰©å±•æ’ä»¶

ä¸‹é¢çš„è¿™äº›åŸç†çœ‹çœ‹å¾—äº†ï¼Œvim å„ä¸ªç‰ˆæœ¬çš„é…ç½®ç›®å½•å˜åŒ–å¤ªå¤šï¼Œè¿˜æ˜¯ç”¨æ’ä»¶ç®¡ç†å™¨æœ€çœäº‹ï¼Œå‚è§ç« èŠ‚ [æ¨èï¼šæ’ä»¶ç®¡ç†å™¨ vim-plug]ã€‚

vim é…ç½®æ–‡ä»¶åœ¨ ~/.vimrc æˆ– /etc/vim/vimrc

å„ç§æ‰©å±•æ’ä»¶ä½¿ç”¨çš„ç›®å½•

    https://vimhelp.org/options.txt.html#%27runtimepath%27

ä½¿ç”¨å‘½ä»¤ `:set rtp` æŸ¥çœ‹å½“å‰åŠ è½½æ‰©å±•çš„è·¯å¾„

    runtimepath=~/.vim,/var/lib/vim/addons,/usr/share/vim/vimfiles,/usr/share/vim/vim81,/usr/share/vim/vimfiles/after,/var/lib/vim/addons/after,~/.vim/after

1ã€å¦‚æœæ˜¯ `apt install xxx` çš„æ–¹å¼å®‰è£…å‘è¡Œç‰ˆæ’ä»¶ï¼Œä¼šè‡ªåŠ¨å®‰è£…æ’ä»¶ç®¡ç†å™¨ vim-addon-managerï¼Œä»¥ä¾¿ç»Ÿä¸€ç®¡ç†æ’ä»¶ï¼Œä½ç½®åœ¨ /usr/share/vim/addons/

   è‡ªå®šä¹‰æ’ä»¶  /usr/share/vim/addons/plugin/
   ä½¿ç”¨æ—¶åŠ è½½  /usr/share/vim/addons/autoload/

   vim è‡ªå¸¦æ’ä»¶        /usr/share/vim/vim81/plugin/
   vim è‡ªå¸¦ä½¿ç”¨æ—¶åŠ è½½   /usr/share/vim/vim81/autoload/

2ã€å¦‚æœæ˜¯ç”¨æˆ·è‡ªå®šä¹‰å®‰è£…çš„æ’ä»¶ï¼Œä¿å­˜åœ¨ ~/.vim/ ä¸‹ï¼Œvim é»˜è®¤ä¼šæŸ¥æ‰¾è¯¥ç›®å½•è¿›è¡ŒåŠ è½½

   æ’ä»¶        ~/.vim/plugin/
   ä½¿ç”¨æ—¶åŠ è½½   ~/.vim/autoload/

~/.vim/ ä¸‹çš„ç›®å½•ä»‹ç»

    ~/.vim/autoload/ å®ƒæ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„ç›®å½•ï¼Œå°½ç®¡å¬èµ·æ¥æ¯”å®é™…å¤æ‚ã€‚ç®€è€Œè¨€ä¹‹ï¼Œå®ƒé‡Œé¢æ”¾ç½®çš„æ˜¯å½“ä½ çœŸæ­£éœ€è¦çš„æ—¶å€™æ‰è¢«è‡ªåŠ¨åŠ è½½è¿è¡Œçš„æ–‡ä»¶ï¼Œè€Œä¸æ˜¯åœ¨vimå¯åŠ¨æ—¶å°±åŠ è½½ã€‚

    ~/.vim/colors/ æ˜¯ç”¨æ¥å­˜æ”¾vimé…è‰²æ–¹æ¡ˆçš„ã€‚

    ~/.vim/plugin/ å­˜æ”¾çš„æ˜¯æ¯æ¬¡å¯åŠ¨viméƒ½ä¼šè¢«è¿è¡Œä¸€æ¬¡çš„æ’ä»¶ï¼Œä¹Ÿå°±æ˜¯è¯´åªè¦ä½ æƒ³åœ¨vimå¯åŠ¨æ—¶å°±è¿è¡Œçš„æ’ä»¶å°±æ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹ã€‚æˆ‘ä»¬å¯ä»¥æ”¾ä»vim-plugå®˜æ–¹ä¸‹è½½ä¸‹æ¥çš„æ’ä»¶.vim

    ~/.vim/syntax/ è¯­æ³•æè¿°è„šæœ¬ã€‚æˆ‘ä»¬æ”¾æœ‰å…³æ–‡æœ¬ï¼ˆæ¯”å¦‚cè¯­è¨€ï¼‰è¯­æ³•ç›¸å…³çš„æ’ä»¶

    ~/.vim/doc/ ä¸ºæ’ä»¶æ”¾ç½®æ–‡æ¡£çš„åœ°æ–¹ã€‚ä¾‹å¦‚:helpçš„æ—¶å€™å¯ä»¥ç”¨åˆ°ã€‚

    ~/.vim/ftdetect/ ä¸­çš„æ–‡ä»¶åŒæ ·ä¹Ÿä¼šåœ¨vimå¯åŠ¨æ—¶å°±è¿è¡Œã€‚æœ‰äº›æ—¶å€™å¯èƒ½æ²¡æœ‰è¿™ä¸ªç›®å½•ã€‚ftdetectä»£è¡¨çš„æ˜¯â€œfiletype detectionï¼ˆæ–‡ä»¶ç±»å‹æ£€æµ‹ï¼‰â€ã€‚æ­¤ç›®å½•ä¸­çš„æ–‡ä»¶åº”è¯¥ç”¨è‡ªåŠ¨å‘½ä»¤ï¼ˆautocommandsï¼‰æ¥æ£€æµ‹å’Œè®¾ç½®æ–‡ä»¶çš„ç±»å‹ï¼Œé™¤æ­¤ä¹‹å¤–å¹¶æ— å…¶ä»–ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä»¬åªè¯¥æœ‰ä¸€ä¸¤è¡Œè€Œå·²ã€‚

    ~/.vim/ftplugin/ æ­¤ç›®å½•ä¸­çš„æ–‡ä»¶æœ‰äº›ä¸åŒã€‚å½“vimç»™ç¼“å†²åŒºçš„filetypeè®¾ç½®ä¸€ä¸ªå€¼æ—¶ï¼Œvimå°†ä¼šåœ¨~/.vim/ftplugin/ ç›®å½•ä¸‹æ¥æŸ¥æ‰¾å’Œfiletypeç›¸åŒåå­—çš„æ–‡ä»¶ã€‚ä¾‹å¦‚ä½ è¿è¡Œset filetype=derpè¿™æ¡å‘½ä»¤åï¼Œvimå°†æŸ¥æ‰¾~/.vim/ftplugin/derp.vimæ­¤æ–‡ä»¶ï¼Œå¦‚æœå­˜åœ¨å°±è¿è¡Œå®ƒã€‚ä¸ä»…å¦‚æ­¤ï¼Œå®ƒè¿˜ä¼šè¿è¡Œftpluginä¸‹ç›¸åŒåå­—çš„å­ç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶ï¼Œå¦‚~/.vim/ftplugin/derp/è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶éƒ½ä¼šè¢«è¿è¡Œã€‚æ¯æ¬¡å¯ç”¨æ—¶ï¼Œåº”è¯¥ä¸ºä¸åŒçš„æ–‡ä»¶ç±»å‹è®¾ç½®å±€éƒ¨ç¼“å†²é€‰é¡¹ï¼Œå¦‚æœè®¾ç½®ä¸ºå…¨å±€ç¼“å†²é€‰é¡¹çš„è¯ï¼Œå°†ä¼šè¦†ç›–æ‰€æœ‰æ‰“å¼€çš„ç¼“å†²åŒºã€‚

    ~/.vim/indent/ è¿™é‡Œé¢çš„æ–‡ä»¶å’Œftpluginä¸­çš„å¾ˆåƒï¼Œå®ƒä»¬ä¹Ÿæ˜¯æ ¹æ®å®ƒä»¬çš„åå­—æ¥åŠ è½½çš„ã€‚å®ƒæ”¾ç½®äº†ç›¸å…³æ–‡ä»¶ç±»å‹çš„ç¼©è¿›ã€‚ä¾‹å¦‚pythonåº”è¯¥æ€ä¹ˆç¼©è¿›ï¼Œjavaåº”è¯¥æ€ä¹ˆç¼©è¿›ç­‰ç­‰ã€‚å…¶å®æ”¾åœ¨ftpluginä¸­ä¹Ÿå¯ä»¥ï¼Œä½†å•ç‹¬åˆ—å‡ºæ¥åªæ˜¯ä¸ºäº†æ–¹ä¾¿æ–‡ä»¶ç®¡ç†å’Œç†è§£ã€‚

    ~/.vim/compiler/ å’Œindentå¾ˆåƒï¼Œå®ƒæ”¾çš„æ˜¯ç›¸åº”æ–‡ä»¶ç±»å‹åº”è¯¥å¦‚ä½•ç¼–è¯‘çš„é€‰é¡¹ã€‚

    ~/.vim/after/ è¿™é‡Œé¢çš„æ–‡ä»¶ä¹Ÿä¼šåœ¨vimæ¯æ¬¡å¯åŠ¨çš„æ—¶å€™åŠ è½½ï¼Œä¸è¿‡æ˜¯ç­‰å¾…~/.vim/plugin/åŠ è½½å®Œæˆä¹‹åæ‰åŠ è½½afteré‡Œçš„å†…å®¹ï¼Œæ‰€ä»¥å«åšafterã€‚

    ~/.vim/spell/ æ‹¼å†™æ£€æŸ¥è„šæœ¬ã€‚

###### æ¨èï¼šæ’ä»¶ç®¡ç†å™¨ vim-plug

Vundleä¸æ›´æ–°äº†ï¼Œè¿™ä¸ªé¡¹ç›®å–ä»£ä¹‹ï¼Œç”¨æ³•ç¥ä¼¼ï¼Œåªéœ€è¦ç¼–è¾‘ ~/.vimrcï¼Œä¾¿äºç”¨æˆ·è‡ªå®šä¹‰ï¼Œå®‰è£…ä½¿ç”¨ github æ¥æºçš„æ’ä»¶éå¸¸ç®€å•

    https://github.com/junegunn/vim-plug

å…ˆä» github ä¸‹è½½

    # vim ä½¿ç”¨æ—¶åŠ è½½     ~/.vim/autoload/
    # vim-plug å­˜æ”¾æ’ä»¶  ~/.vim/plugged/

    curl -fLo ~/.vim/autoload/plug.vim --create-dirs \
        https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim

ç„¶åä¿®æ”¹  ~/.vimrcï¼Œ

ç„¶åé‡æ–°åŠ è½½é…ç½®æ–‡ä»¶ `:source ~/.vimrc`ï¼Œå‘½ä»¤è¡Œæ‰§è¡Œ `:PlugInstall` æŒ‰æç¤ºæ“ä½œå³å¯å®‰è£…æ’ä»¶ã€‚

å¸¸ç”¨å‘½ä»¤

ç„¶åè¿›å…¥vimï¼Œè¿è¡Œå‘½ä»¤å®‰è£…æ’ä»¶ï¼Œä¼šæ–°å»ºæ‹†åˆ†çª—å£æ ¹æ®ä½ ç¼–è¾‘çš„ .vimrc æ–‡ä»¶å†…å®¹åˆ—å‡ºå¯é€‰æ“ä½œ

    :PlugInstall

å¸è½½æ’ä»¶åªéœ€ç¼–è¾‘ .vimrc é…ç½®æ–‡ä»¶ä¸­åˆ é™¤æ¬²å¸è½½æ’ä»¶çš„é…ç½®ï¼Œä¿å­˜ï¼Œç„¶ååœ¨Vimä¸­æ‰§è¡Œä¸‹è¿°å‘½ä»¤å³å¯å®Œæˆå¸è½½

    :PlugClean

æ›´æ–°æ’ä»¶

    :PlugUpdate

åˆ—å‡ºå½“å‰æ’ä»¶

    :PlugList

æœç´¢æ’ä»¶ï¼Œé€‰æ‹©ä¸€ä¸ªä½ æƒ³è¦å®‰è£…çš„æ’ä»¶ï¼Œå¹¶æ•²å‡»é”®ç›˜ i æ¥å®‰è£…è¿™ä¸ªæ’ä»¶ï¼Œå®Œæˆåé€‰ä¸­è¿™ä¸ªæ’ä»¶çš„åç§°ï¼Œå¹¶ç²˜è´´åˆ° .vimrc æ–‡ä»¶ä¸­å»

    :PlugSearch colorscheme

###### æ’ä»¶ç®¡ç†å™¨ vim-addon-manager

    https://github.com/MarcWeber/vim-addon-manager

å‘½ä»¤çš„æ–¹å¼å¯¹æ’ä»¶è¿›è¡Œç®¡ç†ï¼Œä¸éœ€è¦é…ç½®æ–‡ä»¶ï¼Œé€‚åˆå®‰è£…å‘è¡Œç‰ˆè‡ªå¸¦çš„æ’ä»¶ã€‚

åœ¨ Debian ä½¿ç”¨ `apt install vim-airline` å®‰è£…æ’ä»¶çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨å®‰è£… vim-addon-manager

    apt install vim-addon-manager

ä½¿ç”¨ç›®å½•

    # apt install å®‰è£…
    /usr/share/vim/addons/

    # è‡ªå®šä¹‰å®‰è£…
    ~/.vim/addons/

ç”¨æ³•

    $ vim-addons -h
    Usage:
    vim-addons [OPTION ...] [COMMAND [ADDON ...]]

    Commands:
    list, status (default command), install, remove, disable, enable, files, show

    Options:
    -h, --help          show this usage message and exit
    -q, --query         be quiet and make the output more parseable
    -r, --registry-dir  set the registry directory
                            (default: /usr/share/vim/registry)
    -s, --source-dir    set the addons source directory
                            (default: /usr/share/vim/addons)
    -t, --target-dir    set the addons target directory
                            (default: $HOME/.vim)
    -v, --verbose       increase verbosity
    -z, --silent        silent mode: suppress most of the output
    -y, --system-dir    set the system-wide target directory
                            (default: /var/lib/vim/addons)
    -w, --system-wide   set target directory to the system-wide one
                            (overrides -t setting)

    $ vim-addons status
    # Name                     User Status  System Status
    airline                     removed       installed
    airline-themes              removed       installed
    editexisting                removed       removed
    justify                     removed       removed
    matchit                     removed       removed
    nginx                       removed       removed
    powerline                   removed       removed

    vim-addons install xxx

    vim-addons remove xxx

    vim-addons show xxx

###### æ’ä»¶ç®¡ç†å™¨ Vundle

ä¼˜ç‚¹æ˜¯åªéœ€è¦ç¼–è¾‘ ~/.vimrcï¼Œä¾¿äºç”¨æˆ·è‡ªå®šä¹‰ï¼Œå¯æƒœè‡ª2019å¹´ä¹‹åä¸æ›´æ–°äº†

    https://github.com/VundleVim/Vundle.vim

å…ˆgitå®‰è£… (ä¼šåœ¨å­ç›®å½• autoloadã€ftpluginç­‰å¢åŠ å†…å®¹)

    # Vundleä½¿ç”¨    ~/.vim/bundle/
    # è‡ªå®šä¹‰æ’ä»¶    ~/.vim/bundle/å¯¹åº”çš„æ’ä»¶/plugin/
    # ä½¿ç”¨æ—¶åŠ è½½    ~/.vim/bundle/å¯¹åº”çš„æ’ä»¶/autoload/

    git clone --depth=1 https://github.com/VundleVim/Vundle.vim.git ~/.vim/bundle/Vundle.vim

ç„¶åä¿®æ”¹  ~/.vimrc å¦‚ä¸‹

```python

""""""""""""""""""""""""""""""""""""""""""""""""""""""
" VundleVim æ’ä»¶ç®¡ç†å™¨å®˜æ–¹é…ç½®

set nocompatible              " be iMproved, requiredï¼Œè¿™ä¸ªåº”è¯¥æ˜¯å…³é—­å…¼å®¹viæ¨¡å¼ï¼Œå°±ç”¨vim
filetype off                  " required

" airline å®‰è£…åå¯å±è”½åŸé…ç½®çš„ powerline
" set rtp+=/usr/local/lib/python2.7/site-packages/powerline/bindings/vim/
" set the runtime path to include Vundle and initialize
set rtp+=~/.vim/bundle/Vundle.vim
call vundle#begin()

" let Vundle manage Vundle, required
Plugin 'VundleVim/Vundle.vim'
"
"æ’ä»¶åœ¨Githubä»“åº“ä¸­
"Plugin 'scrooloose/nerdtree'
"
"æ’ä»¶åœ¨ https://github.com/vim-scripts ç”¨æˆ·ä»“åº“ä¸­
"Plugin 'YankRing.vim'
"
"æ’ä»¶åœ¨éGithubçš„Gitä»“åº“ä¸­
"Plugin 'git://git.wincent.com/command-t.git'
"
"æ’ä»¶åœ¨æœ¬åœ°
"Plugin 'file:///home/gmarik/path/to/plugin'

" è‡ªå·±è¦æ·»åŠ çš„æ’ä»¶åœ¨è¿™é‡Œé…ç½®
Plugin 'vim-airline/vim-airline'
Plugin 'vim-airline/vim-airline-themes'

Plugin 'scrooloose/nerdtree'

" åœ¨ä¾§è¾¹æ˜¾ç¤ºgitä¿®æ”¹çŠ¶æ€
Plug 'airblade/vim-gitgutter'

" æ˜¾ç¤º vim å¯„å­˜å™¨çš„å†…å®¹
Plug 'junegunn/vim-peekaboo'

" é¢œè‰²ä¸»é¢˜ https://www.nordtheme.com/ports/vim
Plugin 'arcticicestudio/nord-vim'

" é¢œè‰²ä¸»é¢˜ https://github.com/NLKNguyen/papercolor-theme
" Plugin 'NLKNguyen/papercolor-theme'

" All of your Plugins must be added before the following line
call vundle#end()            " required
filetype plugin indent on    " required

""""""""""""""""""""""""""""""""""""""""""""""""""""""
" åœ¨ä¸‹é¢å¢åŠ è‡ªå·±çš„è®¾ç½®
```

ç„¶åè¿›å…¥vimï¼Œè¿è¡Œå‘½ä»¤å®‰è£…æ’ä»¶

    :PluginInstall

å¸è½½æ’ä»¶åªéœ€åœ¨.vimrcé…ç½®æ–‡ä»¶ä¸­åˆ é™¤æ¬²å¸è½½æ’ä»¶çš„æ’ä»¶åœ°å€é…ç½®ï¼Œä¿å­˜é€€å‡ºé…ç½®æ–‡ä»¶ .vimrc å
ç„¶ååœ¨Vimä¸­æ‰§è¡Œä¸‹è¿°å‘½ä»¤å³å¯å®Œæˆå¸è½½

    :PluginClean

æ›´æ–°æ’ä»¶

    :PluginUpdate

åˆ—å‡ºå½“å‰æ’ä»¶

    :PluginList

æœç´¢æ’ä»¶ï¼Œé€‰æ‹©ä¸€ä¸ªä½ æƒ³è¦å®‰è£…çš„æ’ä»¶ï¼Œå¹¶æ•²å‡»é”®ç›˜ i æ¥å®‰è£…è¿™ä¸ªæ’ä»¶ï¼Œå®Œæˆåé€‰ä¸­è¿™ä¸ªæ’ä»¶çš„åç§°ï¼Œå¹¶ç²˜è´´åˆ° .vimrc æ–‡ä»¶ä¸­å»

    :PluginSearch colorscheme

##### ä¸æ¨è vim çŠ¶æ€æ æ’ä»¶ powerline

çŠ¶æ€æ å·¥å…· powerline æœ‰ä¾› vim ä½¿ç”¨çš„æ’ä»¶ï¼Œä½†æ˜¯ä¸æ¨èä½¿ç”¨

    æ¨èä½¿ç”¨æ›¿ä»£å“ vim-airlineï¼ŒçŠ¶æ€æ å’Œæ ‡ç­¾æ éƒ½æœ‰ï¼Œè€Œä¸”å¯ä»¥é…åˆå¾ˆå¤šçŸ¥åæ’ä»¶çš„æ˜¾ç¤º

powerline ä»‹ç»ï¼Œå‚è§ç« èŠ‚ [çŠ¶æ€æ å·¥å…· powerline]ã€‚

ä½¿ç”¨ powerline åœ¨ vim ä¸‹çš„æ’ä»¶éœ€è¦ Vim åœ¨ç¼–è¯‘æ—¶æ·»åŠ  python æ”¯æŒï¼Œè€Œä¸€èˆ¬çš„ç”¨äºåµŒå…¥å¼è®¾å¤‡çš„æ“ä½œç³»ç»Ÿå¦‚æ ‘è“æ´¾è‡ªå¸¦çš„æ˜¯ vim ç²¾ç®€ç‰ˆ vim.tinnyï¼Œè¿™ä¸ªç‰ˆæœ¬æ˜¯æ— æ³•ä½¿ç”¨è¯¥æ’ä»¶çš„ï¼Œå¦‚ä½•è§£å†³è§ç« èŠ‚ [ä½¿ç”¨çŠ¶æ€æ ç­‰æ‰©å±•æ’ä»¶çš„å…ˆå†³æ¡ä»¶]ã€‚

powerline ä¸ºä¿è¯å¤šæ ·æ€§ï¼Œä½¿ç”¨ python å®ç°çš„ã€‚ç°åœ¨çš„é—®é¢˜æ˜¯æ“ä½œç³»ç»Ÿè‡ªå¸¦çš„ python æŒ‡çš„ python2 è¿˜æ˜¯ python3 ç‰ˆæœ¬

    ææ¸… æ“ä½œç³»ç»Ÿå®‰è£…çš„åŒ… python-pip å’Œ python3-pip çš„ä½¿ç”¨åŒºåˆ«
    ææ¸… powerline æœ‰ python å’Œ python3 ä¸¤ä¸ªå‘è¡Œç‰ˆæœ¬
    ææ¸… æ“ä½œç³»ç»Ÿé»˜è®¤çš„ python ç¯å¢ƒæ˜¯ python è¿˜æ˜¯ python3
    ææ¸… ä½ å®‰è£…çš„ powerline åˆ°åº•æ˜¯ç”¨ python è¿˜æ˜¯ python3 æ‰§è¡Œçš„ï¼Ÿå¦‚æœæ˜¯ç”¨ apt install å®‰è£…çš„æ˜¯ä½¿ç”¨å‘è¡Œç‰ˆç¯å¢ƒçš„ã€‚
    ææ¸… æ‰€æœ‰çš„ powerline çš„æ’ä»¶ï¼Œå®‰è£…å‰éƒ½è¦å…ˆçœ‹çœ‹åˆ°åº•æ”¯æŒå“ªä¸ªpythonç‰ˆæœ¬ï¼Ÿ
    ææ¸… å‰é¢è¿™å † python åˆ°åº•æ˜¯æŒ‡ python2 è¿˜æ˜¯ python3 ï¼Ÿå¦‚æœæ˜¯python3ï¼Œæœ€ä½è¦æ±‚ 3.6 è¿˜æ˜¯ 3.7 ï¼Ÿ
    è¿™ä¸ªæ¯”è¾ƒéš¾å—ï¼šææ¸…åœ¨ virtualenv/conda ä¸‹ä½¿ç”¨ vim ä¼šå¦å½±å“å…¶ä½¿ç”¨ python çš„æ’ä»¶ï¼ŸæŠ˜è…¾åŠå¤©è£…ä¸Šäº†æ¿€æ´»ä¸ª python ç¯å¢ƒå°±åºŸäº†ï¼Ÿ

    ä¸æ˜¯è¿«ä¸å¾—å·²ï¼Œæ›´ä¸è¦è‡ªè¡Œç¼–è¯‘ vimï¼Œå°½é‡ç”¨å‘è¡Œç‰ˆè‡ªå¸¦çš„ã€‚

    å»ºè®®å®‰è£… debian å‘è¡Œç‰ˆè‡ªå¸¦çš„ powerlineï¼Œç”¨ `sudo apt install powerline`å³å¯

        å¦‚æœï¼Œä½ åœ¨ Debian 10 ç”¨ `pip install powerline-status`ï¼Œé‚£ä¹ˆå®‰è£…çš„åº”è¯¥æ˜¯ python 2.7 ç‰ˆæœ¬çš„ powerline-statusã€‚

        æ–°ç‰ˆç”¨ pypi å®‰è£… `python3 -m pip install powerline-status`

        æœ€æ–°ç‰ˆç”¨ github å®‰è£… `python3 -m pip install --user git+git://github.com/powerline/powerline`

        ç„¶åç»§ç»­ï¼Œæ‰€æœ‰çš„ powerline çš„æ’ä»¶ï¼Œå®‰è£…å‰éƒ½è¦å…ˆçœ‹çœ‹åˆ°åº•æ”¯æŒå“ªä¸ªpythonç‰ˆæœ¬ï¼Ÿ

å¦‚æœç¡®å®šä½ çš„ vim å¯ä»¥ä½¿ç”¨ powerlineï¼Œåšå¦‚ä¸‹è®¾ç½®ï¼š

    å…ˆæŸ¥çœ‹ powerline çš„å®‰è£…ä½ç½®ï¼Œæ‰¾åˆ° bindings ç›®å½•

        å¦‚æœæ˜¯ç”¨ pip å®‰è£…çš„ powerlineï¼Œå°±æ˜¯å¦‚ä¸‹è¿™ç§çš„è·¯å¾„

            # pip show powerline-status
            # /usr/lib/python3/dist-packages/powerline/bindings/vim/
            /usr/local/lib/python2.7/site-packages/powerline/bindings/vim/

        å¦‚æœæ˜¯ç”¨ apt å®‰è£…çš„ powerlineï¼Œå°±æ˜¯è¿™ç§è·¯å¾„

            /usr/share/powerline/bindings/vim/

    å°†ä¸Šè¿°è·¯å¾„æ·»åŠ åˆ°é…ç½®æ–‡ä»¶ ~/.vimrc æˆ– /etc/vim/vimrc ä¸­

        set rtp+=/usr/share/powerline/bindings/vim/

        " Always show statusline
        set laststatus=2

        " Always show tabline
        set showtabline=2

        " Use 256 colours (Use this setting only if your terminal supports 256 colours)
        set t_Co=256

##### æ¨è vim çŠ¶æ€æ æ’ä»¶ vim-airline

å®Œç¾æ›¿æ¢æ‰ powerline

    https://github.com/vim-airline/vim-airline

å¼€ç®±å³ç”¨ï¼Œä¸ä»…æ˜¯çŠ¶æ€æ å’Œæ ‡ç­¾æ ï¼Œè€Œä¸”èƒ½é…åˆå¾ˆå¤šå¸¸ç”¨æ’ä»¶å¦‚ nerdtree ç›®å½•æ ‘çš„æ˜¾ç¤ºï¼Œæ™®é€šå­—ä½“ä¹Ÿå¯ä»¥æ­£å¸¸æ˜¾ç¤ºã€‚

æ²¡ä½¿ç”¨ python ä»£ç ï¼Œéƒ½ç”¨ vim script å†™çš„ï¼Œé€Ÿåº¦å’Œå…¼å®¹æ€§éƒ½æœ‰ä¿è¯ã€‚

ç›´æ¥é…ç½®åˆ°æ’ä»¶ç®¡ç†å™¨ vim-plug é‡ŒåŠ è½½æ˜¯æœ€çœäº‹çš„ï¼Œå¦åˆ™ï¼š

    Debian å‘è¡Œç‰ˆè‡ªå¸¦ï¼Œä¼šè‡ªåŠ¨å®‰è£…ä¾èµ–çš„æ’ä»¶ç®¡ç†å™¨ vim-addon-managerï¼Œç„¶åæŠŠè‡ªå·±å®‰è£…åˆ°å…¶æ’ä»¶ç›®å½•ä¸­

        $ sudo apt install vim-airline

        $ sudo apt install vim-airline-themes

    Fedora å‘è¡Œç‰ˆåªå¸¦ä¸€ä¸ªï¼Œå¦ä¸€ä¸ªéœ€è¦æ‰‹åŠ¨ï¼Œè¿˜æ˜¯å¾—ä¾èµ–æ’ä»¶ç®¡ç†å™¨

        $ sudo dnf install vim-airline

æ³¨æ„ vim.tinny ç‰ˆæ— æ³•ä½¿ç”¨è¯¥æ’ä»¶çš„ï¼Œå¦‚ä½•è§£å†³è§ç« èŠ‚ [ä½¿ç”¨çŠ¶æ€æ ç­‰æ‰©å±•æ’ä»¶çš„å…ˆå†³æ¡ä»¶]ã€‚

æŸ¥çœ‹å¸®åŠ©

    :help airline

Airline æ‰©å±•æ”¯æŒé€‚é… tablineã€nerdtree ç­‰æ’ä»¶çš„é¢œè‰²æ–¹æ¡ˆï¼Œåœ¨ ~/.vimrc ä¸­é…ç½®

```vim

" å†…ç½®æ‰©å±•çš„æŒ¨ä¸ªè¯´æ˜ä½¿ç”¨å‘½ä»¤ :help airline æˆ– https://github.com/vim-airline/vim-airline/blob/master/doc/airline.txt
" å†…ç½®æ‰©å±•ä¿å­˜åœ¨ï¼š
" apt install [vim-addon-manager] /usr/share/vim/addons/autoload/airline/extensions/ ä¸‹
" [Vundle]   ~/.vim/bundle/vim-airline/autoload/airline/extensions/ ä¸‹
" [vim-plug] ~/.vim/plugged/ ä¸‹
" è‡ªå®šä¹‰ ~/.vim/autoload/ å’Œ ~/.vim/plugin/
" å‘½ä»¤ :AirlineExtensions æŸ¥çœ‹å½“å‰è‡ªåŠ¨å¯ç”¨çš„å†…ç½®æ’ä»¶

" éœ€è¦å¯ç”¨ powerline çš„å­—ä½“ï¼ŒçŠ¶æ€æ æ˜¾ç¤ºçš„æ•ˆæœæ‰èƒ½èµ·é£
let g:airline_powerline_fonts = 1

" å¯ç”¨ airline å†…ç½®æ‰©å±•ï¼šæ ‡ç­¾å¼æ˜¾ç¤ºå¤šä¸ªæ‰“å¼€çš„æ–‡ä»¶çš„çŠ¶æ€æ 
" åœ¨è¯´æ˜æ–‡ä»¶ä¸­æœ airline-tabline
let g:airline#extensions#tabline#enabled = 1

" å¯ç”¨ airline å†…ç½®æ‰©å±•ï¼šnerdtreeæ’ä»¶å·¦ä¾§æ˜¾ç¤ºæ–‡ä»¶æ ‘å†…å®¹çš„çŠ¶æ€æ æ•ˆæœ
let g:airline#extensions#nerdtree_statusline = 1

```

AirlineTheme è‡ªæœ‰ä¸»é¢˜ï¼Œåœ¨ ~/.vimrc ä¸­é…ç½®

```vim

" AirlineTheme éœ€è¦å¯ç”¨ powerline çš„å­—ä½“æ‰èƒ½èµ·é£
let g:airline_powerline_fonts = 1

" airline_themeå†…ç½®çš„æ’ä»¶ä¸»é¢˜å¤§éƒ¨åˆ†éƒ½åªæ˜¯çŠ¶æ€æ çš„ï¼Œå±…ç„¶ä¸åŒæ­¥è®¾ç½®è¯­æ³•é«˜äº®
" å»ºè®®è‡ªè¡Œå®‰è£…vimæ’ä»¶ PaperColor æˆ– nordï¼ŒçŠ¶æ€æ å’Œè¯­æ³•é«˜äº®é¢œè‰²éƒ½æœ‰äº†,ä¸éœ€è¦ç”¨ airline_theme å†…ç½®çš„åŒåä¸»é¢˜
" https://github.com/vim-airline/vim-airline-themes/tree/master/autoload/airline/themes
" åˆ—è¡¨è§ https://github.com/vim-airline/vim-airline/wiki/Screenshots
" ä¿å­˜åœ¨ ~/.vim/bundle/vim-airline-themes/autoload/airline/themes
" ä½¿ç”¨è¯´æ˜ ~/.vim/bundle/vim-airline-themes/README.md
" åœ¨viä¸­åˆ‡æ¢ä¸»é¢˜ :AirlineTheme night_owl
let g:airline_theme='papercolor'

```

##### æ›´ç®€æ´çš„ vim çŠ¶æ€æ æ’ä»¶ lightline.vim

    https://github.com/itchyny/lightline.vim

å¦‚æœä½ æƒ³åªå®‰è£…ä¸ªå¹²å‡€çš„å·¥å…·æ ï¼Œå…¶å®ƒæ’ä»¶è‡ªå·±é…ç½®è‡ªå·±ç©çš„è¯ï¼ŒçŠ¶æ€æ å·¥å…·ç”¨è¿™ä¸ª lightline.vim å°±è¶³å¤Ÿäº†ã€‚

Why yet another clone of powerline?

    https://github.com/Lokaltog/vim-powerline is a nice plugin, but deprecated.

    powerline is a nice plugin, but difficult to configure.

    vim-airline is a nice plugin, but it uses too many functions of other plugins, which should be done by users in .vimrc.

è¿™ä¸ªæ¯”è¾ƒç®€æ´ï¼Œåªæœ‰çŠ¶æ€æ å·¥å…·å’Œé¢œè‰²æ–¹æ¡ˆã€‚ä¹Ÿæ˜¯ä¸ä½¿ç”¨ python ä»£ç ï¼Œéƒ½ç”¨ vim script å†™çš„ï¼Œé€Ÿåº¦å’Œå…¼å®¹æ€§éƒ½æœ‰ä¿è¯ã€‚

vim.tinny ç‰ˆæ˜¯æ— æ³•ä½¿ç”¨è¯¥æ’ä»¶çš„ï¼Œå¦‚ä½•è§£å†³è§ç« èŠ‚ [ä½¿ç”¨çŠ¶æ€æ ç­‰æ‰©å±•æ’ä»¶çš„å…ˆå†³æ¡ä»¶]ã€‚

é…ç½®ä¸»é¢˜

    let g:lightline = { 'colorscheme': 'PaperColor' }

##### ä½¿ç”¨ vim å†…ç½®çš„æ ‘å½¢æ–‡ä»¶å¤¹æ’ä»¶ netrw

    https://vonheikemen.github.io/devlog/tools/using-netrw-vim-builtin-file-explorer/

netrw æ˜¯ vim è‡ªå¸¦çš„æ’ä»¶, ä¸éœ€è¦é¢å¤–å®‰è£…, å…¶æä¾›çš„åŠŸèƒ½éå¸¸å¼ºå¤§, ç›¸æ¯”ä¸ nerdtree è¿™äº›ç¬¬ä¸‰æ–¹æ’ä»¶æ¥è¯´é€Ÿåº¦æ›´å¿«, ä½“é‡æ›´è½», è®¾è®¡æ›´ç®€æ´ã€‚

é»˜è®¤æƒ…å†µä¸‹ï¼Œnetrw å°†åœ¨å½“å‰çª—å£ä¸­æ‰“å¼€ç›®å½•æ ‘åˆ—è¡¨ï¼Œé€‰æ‹©æ–‡ä»¶åå›è½¦å³å¯åœ¨å½“å‰çª—å£æ‰“å¼€æ–‡ä»¶ã€‚

åœ¨ vim ä¸­æ‰“å¼€ netrw çª—å£

    :E       å…¨å±è¿›å…¥ netrw, å…¨ç§°æ˜¯ :Explorer æˆ– :Ex
    :Se      æ°´å¹³åˆ†å‰²è¿›å…¥ netrw
    :Ve      å‚ç›´åˆ†å‰²è¿›å…¥ netrw

    æ‹†åˆ†çª—å£çš„åˆ‡æ¢ï¼Œä½¿ç”¨ vim å¤šçª—å£æ“ä½œçš„å‰å¯¼é”® ctrl+wï¼Œå‚è§ç« èŠ‚ [å¤šçª—å£(Window)æ“ä½œ]

é€€å‡º

    :q  å…³é—­ netrw çª—å£ï¼ˆä¿æŒå›è½¦æ‰“å¼€æ–‡ä»¶çš„çª—å£ï¼‰ï¼Œå¦‚æœ netrw æ˜¯å”¯ä¸€æ‰“å¼€çš„çª—å£ï¼Œé‚£ä¹ˆå°†åŒæ—¶é€€å‡ºVimã€‚

    :bd æˆ‘ä»¬å¯ä»¥å°† netrw ç†è§£ä¸ºï¼Œä½¿ç”¨ç¼–è¾‘å‘½ä»¤å¯¹äºç›®å½•è¿›è¡Œæ“ä½œçš„ç‰¹æ®Šç¼“å†²åŒºã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ :bdelete å‘½ä»¤ï¼Œæ¥å…³é—­ netrw æ‰“å¼€çš„ç¼“å†²åŒºï¼Œä½†ä¸ä¼šé€€å‡º Vimã€‚

å¯è®¾ç½®æ‰“å¼€æ–‡ä»¶çš„æ–¹å¼

        let g:netrw_browse_split = n

    å…¶ä¸­ï¼Œå‚æ•° n çš„å€¼å¯ä»¥ä¸ºä»¥ä¸‹å››ç§

        1   åœ¨ç›®å½•æ ‘åˆ—è¡¨çª—å£ï¼Œæ°´å¹³æ‹†åˆ†æ–°çª—å£æ‰“å¼€æ–‡ä»¶
        2   åœ¨ç›®å½•æ ‘åˆ—è¡¨çª—å£ï¼Œå‚ç›´æ‹†åˆ†æ–°çª—å£æ‰“å¼€æ–‡ä»¶
        3   ç”¨æ–°å»ºæ ‡ç­¾é¡µæ‰“å¼€æ–‡ä»¶
        4   ç”¨å‰ä¸€ä¸ªçª—å£æ‰“å¼€æ–‡ä»¶

å‡ ä¸ªè®¾ç½®å‘½ä»¤ï¼Œå¯æ”¾åˆ° .vimrc é…ç½®æ–‡ä»¶ä¸­

```vim

" è®¾ç½® netrw çš„æ˜¾ç¤ºé£æ ¼
"let g:netrw_hide = 1 " è®¾ç½®é»˜è®¤éšè—
"let g:netrw_banner = 0  " éšè— netrw é¡¶ç«¯çš„æ¨ªå¹…ï¼ˆBannerï¼‰
let g:netrw_browse_split = 4  " ç”¨å‰ä¸€ä¸ªçª—å£æ‰“å¼€æ–‡ä»¶
let g:netrw_liststyle = 3  " ç›®å½•æ ‘çš„æ˜¾ç¤ºé£æ ¼ï¼Œå¯ä»¥ç”¨ i é”®æ¥å›åˆ‡æ¢
let g:netrw_winsize = 25  " è®¾ç½® netrw çª—å£å®½åº¦å æ¯” 25%
"let g:netrw_altv = 1 " æ§åˆ¶å‚ç›´æ‹†åˆ†çš„çª—å£ä½äºå³è¾¹

```

netrwçª—å£å†…çš„æ“ä½œå¿«æ·é”®

    <F1>      åœ¨ netrw ç•Œé¢å¼¹å‡ºå¸®åŠ©ä¿¡æ¯
    I         æ˜¾ç¤º/éšè—é¡¶éƒ¨ banner

    o         åœ¨ç›®å½•æ ‘åˆ—è¡¨çª—å£ï¼Œæ°´å¹³æ‹†åˆ†æ–°çª—å£æ‰“å¼€æ–‡ä»¶
    v         åœ¨ç›®å½•æ ‘åˆ—è¡¨çª—å£ï¼Œå‚ç›´æ‹†åˆ†æ–°çª—å£æ‰“å¼€æ–‡ä»¶

    t         æ–° tab ä¸­æ‰“å¼€å½“å‰å…‰æ ‡æ‰€åœ¨çš„æ–‡ä»¶

    p         é¢„è§ˆå½“å‰æ–‡ä»¶(å…‰æ ‡ä¿æŒä¸åŠ¨)
    qf        æ˜¾ç¤ºå½“å‰æ–‡ä»¶è¯¦ç»†ä¿¡æ¯
    <C-w>z    å…³é—­é¢„è§ˆçª—å£
    P         æ‰“å¼€æ–‡ä»¶, ä¼šåœ¨ä¸Šä¸€ä¸ªä½¿ç”¨çš„çª—å£ä¸€ä¾§çš„ç¬¬ä¸€ä¸ªçª—å£æ‰“å¼€æ–‡ä»¶

    %         åœ¨å½“å‰ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¹¶ç¼–è¾‘

    <C-l>     æ›´æ–° netrw åˆ—è¡¨å†…å®¹
    i         æ–‡ä»¶åˆ—è¡¨çš„é£æ ¼ï¼šåœ¨ thin, long, wide, tree listings çŠ¶æ€ä¹‹é—´åˆ‡æ¢

    gh        å¿«é€Ÿéšè—/å–æ¶ˆéšè—.å¼€å¤´çš„æ–‡ä»¶æˆ–ç›®å½•ï¼Œå¦‚.vim
    s         åˆ‡æ¢æ–‡ä»¶çš„æ’åºï¼Œåœ¨ name, time å’Œ file size ä¹‹é—´è½®æ¢
    r         ç¿»è½¬æ–‡ä»¶çš„æ’åºæ–¹å¼

    gn        ä½¿å…‰æ ‡ä¸‹çš„ç›®å½•ä½œä¸ºç›®å½•æ ‘æœ€é¡¶éƒ¨, åœ¨ tree style ä¸‹ä¸ <CR> æ˜¯ä¸åŒçš„
    cd        change å·¥ä½œç›®å½•åˆ°å½“å‰è·¯å¾„
    -         è¿›å…¥ä¸Šä¸€çº§ç›®å½•
    u         è·³åˆ°ä¹‹å‰è®¿é—®è¿‡çš„ç›®å½•
    U         è·³åˆ°ä¹‹åè®¿é—®è¿‡çš„ç›®å½•

    d         åˆ›å»ºæ–‡ä»¶å¤¹
    D         ç§»é™¤æ–‡ä»¶/å¤¹
    R         é‡å‘½åæ–‡ä»¶/æ–‡ä»¶å¤¹

    qb        åˆ—å‡ºä¹¦ç­¾ç›®å½•å’Œå†å²ç›®å½•
    mb        æ·»åŠ å½“å‰ç›®å½•åˆ°ä¹¦ç­¾
    mB        å–æ¶ˆå½“å‰ç›®å½•ä½œä¸ºä¹¦ç­¾
    gb        è·³è½¬åˆ°ä¹¦ç­¾ç›®å½•ï¼ˆ3gbè·³è½¬åˆ°ç¬¬3ä¸ªä¹¦ç­¾ï¼‰

    u         è·³è½¬åˆ°ä¸Šä¸€æ¬¡æµè§ˆçš„ç›®å½•
    x         ä½¿ç”¨ç³»ç»Ÿä¸­ä¸ä¹‹å…³è”çš„ç¨‹åºæ‰“å¼€å…‰æ ‡ä¸‹æ–‡ä»¶
    X         æ‰§è¡Œå…‰æ ‡ä¸‹çš„æ–‡ä»¶

###### nerdtree æ ‘å½¢æ–‡ä»¶å¤¹æ’ä»¶

å¦‚æœä¸æƒ³ [ä½¿ç”¨ vim å†…ç½®çš„æ ‘å½¢æ–‡ä»¶å¤¹æ’ä»¶ netrw]ï¼Œå¯ä»¥å®‰è£…æ’ä»¶ nerdtree ä»¥åœ¨å½“å‰çª—å£çš„å·¦ä¾§å‚ç›´æ–°å»ºçª—å£çš„æ–¹å¼ï¼Œæ ‘å½¢å±•ç¤ºå½“å‰è·¯å¾„ä¸‹çš„æ–‡ä»¶åˆ—è¡¨ï¼Œæ–¹ä¾¿ç”¨æˆ·æ“ä½œã€‚

æ‰€ä»¥ï¼Œåœ¨å·¦ä¾§ç›®å½•æ ‘çª—å£å’Œå³ä¾§æ–‡ä»¶çª—å£é—´åˆ‡æ¢ä½¿ç”¨ vim çš„çª—å£åˆ‡æ¢çƒ­é”®

    å‰å¯¼ ctrl + w ï¼Œç„¶åæ–¹å‘é”®å·¦æˆ– h å…‰æ ‡è·³åˆ°å·¦ä¾§æ ‘å½¢ç›®å½•
    å‰å¯¼ ctrl + w ï¼Œç„¶åæ–¹å‘é”®å³æˆ– l å…‰æ ‡è·³åˆ°å³ä¾§æ–‡ä»¶æ˜¾ç¤ºçª—å£

çª—å£æ“ä½œè¯¦è§ç« èŠ‚ [å¤šçª—å£(Window)æ“ä½œ]ã€‚

è‡ªå®šä¹‰ä¸ª vim ä¸­çš„çƒ­é”® Ctrl-nï¼Œæ–¹ä¾¿åˆ‡æ¢æ˜¾ç¤ºç›®å½•æ ‘ï¼Œåœ¨ ~/.vimrc é…ç½®æ–‡ä»¶ä¸­å®šä¹‰

    " NERDTree
    map <C-n> :NERDTreeToggle<CR>
    let NERDTreeShowHidden=1 "åœ¨æ‰“å¼€æ—¶é»˜è®¤æ˜¾ç¤ºéšè—æ–‡ä»¶
    " map æ˜¯å¿«æ·é”®æ˜ å°„å‘½ä»¤
    " <C-n> å®šä¹‰äº†å¿«æ·é”®ï¼Œè¡¨ç¤º Ctrl-n
    " åé¢æ˜¯å¯¹åº”çš„å‘½ä»¤ä»¥åŠå›è½¦é”® <CR>

nerdtree åœ¨å·¦ä¾§æ ‘å½¢ç›®å½•ä¸­çš„çƒ­é”®

    ?   åˆ‡æ¢æ˜¯å¦æ˜¾ç¤º nerdtree çš„å¿«æ·å¸®åŠ©

    å›è½¦ æ‰“å¼€çš„çš„æ–‡ä»¶é»˜è®¤æ˜¯vimçš„å¤šä¸ªæ–‡ä»¶æ¨¡å¼ï¼Œå³æ·»åŠ åˆ°ç¼“å†²ä¸­
    o   åœ¨å·²æœ‰çª—å£ä¸­æ‰“å¼€æ–‡ä»¶ã€ç›®å½•æˆ–ä¹¦ç­¾ï¼Œå¹¶è·³åˆ°è¯¥çª—å£ï¼Œæˆ–å‘½ä»¤ :NERDTree-o
    go  åœ¨å·²æœ‰çª—å£ä¸­æ‰“å¼€æ–‡ä»¶ã€ç›®å½•æˆ–ä¹¦ç­¾ï¼Œä½†ä¸è·³åˆ°è¯¥çª—å£ï¼Œæˆ–å‘½ä»¤ :NERDTree-go

    ç¼“å†²åŒºåˆ—è¡¨éœ€è¦ç”¨å‘½ä»¤ :ls æ¥æ˜¾ç¤ºï¼Œ :b<ç¼–å·> åˆ‡æ¢ã€‚è¯¦è§ç« èŠ‚[ç†è§£vimçš„å¤šæ–‡ä»¶æ“ä½œï¼ˆç¼“å†²bufferï¼‰]ã€‚

    i   æ°´å¹³åˆ‡å‰²ä¸€ä¸ªæ–°çª—å£æ‰“å¼€é€‰ä¸­æ–‡ä»¶ï¼Œå¹¶è·³åˆ°è¯¥çª—å£ï¼Œæˆ–å‘½ä»¤ :NERDTree-i
    gi  æ°´å¹³åˆ†å‰²ä¸€ä¸ªæ–°çª—å£æ‰“å¼€é€‰ä¸­æ–‡ä»¶ï¼Œä½†ä¸è·³åˆ°è¯¥çª—å£ï¼Œæˆ–å‘½ä»¤ :NERDTree-gi

    s   å‚ç›´åˆ†å‰²ä¸€ä¸ªæ–°çª—å£æ‰“å¼€é€‰ä¸­æ–‡ä»¶ï¼Œå¹¶è·³åˆ°è¯¥çª—å£ï¼Œæˆ–å‘½ä»¤ :NERDTree-s
    gs  å‚ç›´åˆ†å‰²ä¸€ä¸ªæ–°çª—å£æ‰“å¼€é€‰ä¸­æ–‡ä»¶ï¼Œä½†ä¸è·³åˆ°è¯¥çª—å£ï¼Œæˆ–å‘½ä»¤ :NERDTree-gs

    t   åœ¨æ–° Tab ä¸­æ‰“å¼€é€‰ä¸­æ–‡ä»¶/ä¹¦ç­¾ï¼Œå¹¶è·³åˆ°æ–° Tabï¼Œæˆ–å‘½ä»¤ :NERDTree-t
    T   åœ¨æ–° Tab ä¸­æ‰“å¼€é€‰ä¸­æ–‡ä»¶/ä¹¦ç­¾ï¼Œä½†ä¸è·³åˆ°æ–° Tabï¼Œæˆ–å‘½ä»¤ :NERDTree-T

    åˆ‡æ¢ tab çš„çƒ­é”®è¯¦è§ç« èŠ‚ [å¤šæ ‡ç­¾é¡µ(Tab)æ“ä½œ]

    e   åœ¨ç›®å½•æ ‘ä¸ŠæŒ‰eï¼Œåˆ™åœ¨å³ä¾§çª—å£æ˜¾ç¤ºç›®å½•å†…å®¹ï¼Œå…‰æ ‡é”®è¿›è¡Œé€‰æ‹©æ“ä½œå³å¯ï¼Œå†æ¬¡æŒ‰eé€€å‡º

    K   è·³åˆ°å½“å‰ç›®å½•ä¸‹åŒçº§çš„ç¬¬ä¸€ä¸ªç»“ç‚¹
    J   è·³åˆ°å½“å‰ç›®å½•ä¸‹åŒçº§çš„æœ€åä¸€ä¸ªç»“ç‚¹

    !   æ‰§è¡Œå½“å‰æ–‡ä»¶ï¼Œæˆ–å‘½ä»¤ :NERDTree-!

ä¸€èˆ¬å†æ­é…ä¸ªæ˜¾ç¤ºæ¯ä¸ªæ–‡ä»¶ git çŠ¶æ€çš„æ’ä»¶

    https://github.com/Xuyuanp/nerdtree-git-plugin

    åœ¨ .vimrc ä¸­é…ç½®ç”¨ plug å®‰è£…å‡ ä¸ªnerdtreeé…åˆçš„å¸¸ç”¨æ’ä»¶

        Plug 'preservim/nerdtree' |
                \ Plug 'Xuyuanp/nerdtree-git-plugin' |
                \ Plug 'ryanoasis/vim-devicons'

    è¿˜å¯ä»¥æ­é…æ¯”è¾ƒé†’ç›®çš„å›¾æ ‡

        " nerdtree-git-plugin å¯ç”¨å¸¦å›¾æ ‡çš„å­—ä½“
        let g:NERDTreeGitStatusUseNerdFonts = 1 " you should install nerdfonts by yourself. default: 0

        let g:NERDTreeIndicatorMapCustom = {
            \ "Modified"  : "âœ¹",
            \ "Staged"    : "âœš",
            \ "Untracked" : "âœ­",
            \ "Renamed"   : "âœ",
            \ "Unmerged"  : "â•",
            \ "Deleted"   : "âœ–",
            \ "Dirty"     : "âœ—",
            \ "Clean"     : "âœ”ï¸",
            \ "Unknown"   : "?"
            \ }

##### .vimrc é…ç½®æ–‡ä»¶æ ·ä¾‹

ç»“åˆæˆ‘è‡ªå·±ä½¿ç”¨çš„æ’ä»¶å’Œ airline çš„é…ç½®ï¼Œvim ç¼–è¾‘åæ— éœ€é€€å‡ºï¼Œè¿è¡Œå‘½ä»¤ `:source ~/.vimrc` é‡æ–°åŠ è½½å³å¯ã€‚

``` vim
""""""""""""""""""""""""""""""""""""""""""""""""""""""
" vim çš„é»˜è®¤è®¾ç½®
"   å…¨å±€é…ç½®æ–‡ä»¶ /etc/vim/vimrc
"   å¯åŠ¨è„šæœ¬ /usr/share/vim/vim81/default.vim
"   åŸºç¡€è®¾ç½® https://www.zhihu.com/question/271926659/answer/2875834932
"
" è¿ç§»åˆ° vim 9.0 + çš„æ ¼å¼ç±»ä¼¼ python è„šæœ¬ https://www.baeldung.com/linux/vim-script-upgrade https://vimhelp.org/version9.txt.html#new-9
"
" æŸ¥çœ‹å½“å‰è®¾ç½®å€¼ :verbose set showcmd?

" å¦‚æœç»ˆç«¯å·¥å…·å·²ç»è®¾ç½®äº†å˜é‡ export TERM=xterm-256colorï¼Œé‚£ä¹ˆè¿™ä¸ªå‚æ•°å¯æœ‰å¯æ— 
" å¦‚æœåœ¨ tmux ä¸‹ä½¿ç”¨ vim ï¼Œé˜²æ­¢ tmux é»˜è®¤è®¾ç½® TERM=screenï¼Œåº”è¯¥ä¿ç•™æ­¤è®¾ç½®
" https://www.codenong.com/15375992/
"if &term =~? 'mlterm\|xterm'
if &term =="screen"
  set t_Co=256
endif
" çœŸå½©è‰²
" https://github.com/tmux/tmux/issues/1246
if exists('+termguicolors')
  let &t_8f = "\<Esc>[38;2;%lu;%lu;%lum"
  let &t_8b = "\<Esc>[48;2;%lu;%lu;%lum"
  set termguicolors
endif

" æ‰“å¼€æ–‡ä»¶è‡ªåŠ¨å®šä½åˆ°ä¸Šæ¬¡ç¦»å¼€çš„ä½ç½®ï¼Œä»vimé»˜è®¤çš„é…ç½®é‡Œæ‘˜å‡ºæ¥çš„
if has("autocmd")
  au BufReadPost * if line("'\"") > 1 && line("'\"") <= line("$") | exe "normal! g'\"" | endif
endif

" é€€å‡º vi åæ¢å¤æ–¹å—å…‰æ ‡é—ªçƒ
"if has("autocmd")
"  au VimLeave * :silent !echo -e "\033[?12h\033[1 q" && tput cnorm && stty sane
"endif

" æ˜¾ç¤ºè¡Œå· :set nonumber
set number

" æ˜¾ç¤ºæ­£åœ¨è¾“å…¥çš„å‘½ä»¤æŒ‰é”®
set showcmd

" ä½¿ç”¨ vim-airline å¹¶å¼€å¯ tabline è®¾ç½®åï¼Œå°±ä¸éœ€è¦è¿™ä¸¤ä¸ªè®¾ç½®äº†
"set laststatus=2   " å§‹ç»ˆæ˜¾ç¤ºçŠ¶æ€æ 
"set showtabline=2  " å§‹ç»ˆæ˜¾ç¤ºæ ‡ç­¾é¡µ
set noshowmode      " çŠ¶æ€æ å·¥å…·æ˜¾ç¤ºå½“å‰æ¨¡å¼æ›´æ˜æ™°ï¼Œä¸ä½¿ç”¨vimçš„äº†

" è®¾ç½® netrw çš„æ˜¾ç¤ºé£æ ¼
"let g:netrw_hide = 1 " è®¾ç½®é»˜è®¤éšè—
"let g:netrw_banner = 0  " éšè— netrw é¡¶ç«¯çš„æ¨ªå¹…ï¼ˆBannerï¼‰
let g:netrw_browse_split = 4  " ç”¨å‰ä¸€ä¸ªçª—å£æ‰“å¼€æ–‡ä»¶
let g:netrw_liststyle = 3  " ç›®å½•æ ‘çš„æ˜¾ç¤ºé£æ ¼ï¼Œå¯ä»¥ç”¨ i é”®æ¥å›åˆ‡æ¢
let g:netrw_winsize = 25  " è®¾ç½® netrw çª—å£å®½åº¦å æ¯” 25%
"let g:netrw_altv = 1 " æ§åˆ¶å‚ç›´æ‹†åˆ†çš„çª—å£ä½äºå³è¾¹

" ç”¨é¼ æ ‡æ»šè½®æ»šå±
set mouse=a
map <ScrollWheelUp> <C-Y>
map <ScrollWheelDown> <C-E>

" è®¾ç½®å‰å¯¼é”®ä¸ºç©ºæ ¼é”®ï¼Œéœ€è¦åˆ©ç”¨è½¬ä¹‰ç¬¦â€œ\â€ï¼Œè¿™ä¸ªå‰å¯¼é”®åœ¨åé¢çš„ airline è®¾ç½®ç”¨åˆ°äº†
" è¿™ä¸ªå‰å¯¼é”®è·Ÿtmuxä¸åŒï¼Œå¯ä»¥æŒ‰ä½ç„¶åæŒ‰å…¶å®ƒé”®
let mapleader="\<space>"

 " åˆ é™¤è¡Œå°¾ç©ºæ ¼ï¼Œæ™®é€šæ¨¡å¼ä¸‹è¿ç»­æŒ‰3æ¬¡ç©ºæ ¼
 nmap <leader><Space><Space> :%s/\s\+$//<cr>

" å¼€å¯äº†è‡ªåŠ¨æ³¨é‡Šå’Œè‡ªåŠ¨ç¼©è¿›å¯¹ç²˜å¸–ä»£ç ä¸æ–¹ä¾¿
"set fo-=r  "å…³é—­è‡ªåŠ¨æ³¨é‡Š
"set smartindent "è¯†åˆ«èŠ±æ‹¬å·ã€cè¯­è¨€æ ¼å¼çš„è‡ªåŠ¨ç¼©è¿›
"set noautoindent  "å…³é—­è‡ªåŠ¨ç¼©è¿›ï¼ˆæ–°å¢åŠ çš„è¡Œå’Œå‰ä¸€è¡Œä½¿ç”¨ç›¸åŒçš„ç¼©è¿›ï¼Œè¿™ä¸ªå¯¹C/C++ä»£ç å¥½åƒæ— æ•ˆï¼‰ :set autoindent
"set nocindent  "å…³é—­Cè¯­è¨€ç¼©è¿›  :set cindent
"
" ç²˜è´´çš„ä»£ç ï¼ˆshift+insertï¼‰ä¼šè‡ªåŠ¨ç¼©è¿›ï¼Œå¯¼è‡´æ ¼å¼éå¸¸æ··ä¹±
" è¾“å…¥å‘½ä»¤ ï¼šset paste å†è¿›è¡Œç²˜è´´ï¼Œå°±ä¸ä¼šä¹±ç äº†ï¼Œè‡ªåŠ¨ç¼©è¿›ä¹Ÿæ²¡äº†ï¼Œæ‰€ä»¥åœ¨ç²˜è´´ä¹‹åè¾“å…¥ ï¼šset nopasteï¼Œæ¢å¤ç¼©è¿›æ¨¡å¼ã€‚
" æŠŠ<F2>å°±è®¾ç½®ä¸ºæ”¹å˜pasteæ¨¡å¼çš„å¿«æ·é”®
"nnoremap <F2> :set invpaste paste?<CR>  " æŒ‰ä¸‹åæç¤ºå½“å‰pasetçš„çŠ¶æ€ï¼Œä½¿ç”¨äº†çŠ¶æ€æ å·¥å…·æ— éœ€ç”¨æ­¤
set pastetoggle=<F2>

""""""""""""""""""""""""""""""""""""""""""""""""""""""
" åŠ è½½æ’ä»¶ vim-airline vim-airline-themes nerdtree ç­‰
"
" æ’ä»¶ç®¡ç†å™¨äºŒé€‰ä¸€ï¼š
"
"   è§ç« èŠ‚ [æ’ä»¶ç®¡ç†å™¨ vim-addon-manager]ï¼Œç”¨å‘½ä»¤çš„æ–¹å¼å¯¹æ’ä»¶è¿›è¡Œç®¡ç†ï¼Œä¸éœ€è¦é…ç½®æ–‡ä»¶
"   æ¥è‡ªç« èŠ‚ [æ’ä»¶ç®¡ç†å™¨ vim-plug] é‡Œçš„ç¤ºä¾‹é…ç½®

""""""""""""""""""""""""""""""""""""""""""""""""""""""
" vim-plug æ’ä»¶ç®¡ç†å™¨å®˜æ–¹é…ç½®
"
" ä¸éœ€è¦è®¾ç½®rtpï¼Œå› ä¸ºå¼•å¯¼ç¨‹åºplug.vimæ”¾åˆ°autoloadç›®å½•é‡Œäº†

" airline å®‰è£…åå¯å±è”½åŸé…ç½®çš„ powerline
" set rtp+=/usr/local/lib/python2.7/site-packages/powerline/bindings/vim/

call plug#begin()
" The default plugin directory will be as follows:
"   - Vim (Linux/macOS): '~/.vim/plugged'
"   - Vim (Windows): '~/vimfiles/plugged'
"   - Neovim (Linux/macOS/Windows): stdpath('data') . '/plugged'
" You can specify a custom plugin directory by passing it as the argument
"   - e.g. `call plug#begin('~/.vim/plugged')`
"   - Avoid using standard Vim directory names like 'plugin'

" Unmanaged plugin (manually installed and updated)
" Debian: åŠ è½½å‘è¡Œç‰ˆå®‰è£…çš„
"Plug '/usr/share/vim/addons/plugin/vim-airline'
"Plug '/usr/share/vim/addons/plugin/vim-airline-themes'
"Fedora: å‘è¡Œç‰ˆå®‰è£…çš„ä¸éœ€è¦æ˜¾å¼åŠ è½½ /usr/share/vim/vimfiles/plugin/vim-airline
Plug 'vim-airline/vim-airline'
Plug 'vim-airline/vim-airline-themes'

" On-demand loading
"Plug 'scrooloose/nerdtree', { 'on':  'NERDTreeToggle' }

" åœ¨ä¾§è¾¹æ˜¾ç¤ºgitä¿®æ”¹çŠ¶æ€
Plug 'airblade/vim-gitgutter',

" æ˜¾ç¤º vim å¯„å­˜å™¨çš„å†…å®¹
" åœ¨ vis mode æœ‰ç‚¹å°é—®é¢˜ https://github.com/junegunn/vim-peekaboo/issues/22
" Peekaboo extends " and @ in normal mode and <CTRL-R> in insert mode so you can see the contents of the registers.
Plug 'junegunn/vim-peekaboo'

" æ³¨æ„è¿™é‡Œåªæ˜¯åŠ è½½é¢œè‰²ä¸»é¢˜ï¼Œå¯ç”¨ä¸»é¢˜è¦ä½¿ç”¨å‘½ä»¤ colorscheme xxxï¼Œè§ä¸‹
" é¢œè‰²ä¸»é¢˜ https://www.nordtheme.com/ports/vim
Plug 'arcticicestudio/nord-vim'
" é¢œè‰²ä¸»é¢˜ https://github.com/NLKNguyen/papercolor-theme
Plug 'NLKNguyen/papercolor-theme'

" Initialize plugin system
" - Automatically executes `filetype plugin indent on` and `syntax enable`.
call plug#end()
" You can revert the settings after the call like so:
"   filetype indent off   " Disable file-type-specific indentation
"   syntax off            " Disable syntax highlighting

""""""""""""""""""""""""""""""""""""""""""""""""""""""
" åœ¨ä¸‹é¢å¢åŠ è‡ªå·±çš„è®¾ç½®

""""""""""""""""""""""""""""""""""""""""""""""""""""""
" æ’ä»¶è®¾ç½®ï¼švim-airline å†…ç½®æ‰©å±•è®¾ç½®
"
" å†…ç½®æ‰©å±•çš„æŒ¨ä¸ªè¯´æ˜ä½¿ç”¨å‘½ä»¤ :help airline æˆ– https://github.com/vim-airline/vim-airline/blob/master/doc/airline.txt
" å†…ç½®æ‰©å±•ä¿å­˜åœ¨ï¼š
"   apt install [vim-addon-manager] /usr/share/vim/addons/autoload/airline/extensions/ ä¸‹
"   [Vundle]   ~/.vim/bundle/vim-airline/autoload/airline/extensions/ ä¸‹
"   [vim-plug] ~/.vim/plugged/ ä¸‹
"   è‡ªå®šä¹‰ ~/.vim/autoload/ å’Œ ~/.vim/plugin/
" å‘½ä»¤ :AirlineExtensions æŸ¥çœ‹å½“å‰è‡ªåŠ¨å¯ç”¨çš„å†…ç½®æ’ä»¶

" an empty list disables all extensions
"let g:airline_extensions = []
" or only load what you want
"let g:airline_extensions = ['branch', 'tabline']

" å¯ç”¨ powerline çš„å­—ä½“ï¼ŒçŠ¶æ€æ æ˜¾ç¤ºçš„æ•ˆæœæ‰èƒ½èµ·é£
let g:airline_powerline_fonts = 1

" å¯ç”¨ airline å†…ç½®æ‰©å±•ï¼šæ ‡ç­¾å¼æ˜¾ç¤ºå¤šä¸ªtabã€windowæˆ–ç¼“å†²åŒºé‡Œçš„æ–‡ä»¶
" åœ¨è¯´æ˜æ–‡ä»¶ä¸­æœ airline-tabline æŸ¥çœ‹å…·ä½“åŠŸèƒ½è¯´æ˜
let g:airline#extensions#tabline#enabled = 1
let g:airline#extensions#tabline#tab_nr_type = 2
let g:airline#extensions#tabline#show_tab_nr = 1

let g:airline#extensions#tabline#formatter = 'default'
let g:airline#extensions#tabline#buffer_nr_show = 0  " æœ‰ä¸€ä¸ªå°±å¤Ÿäº†
let g:airline#extensions#tabline#fnametruncate = 16
let g:airline#extensions#tabline#fnamecollapse = 2

" ä½¿ç”¨ airline è‡ªå¸¦åŠŸèƒ½è¿›è¡Œæ ‡ç­¾ä¹‹é—´çš„åˆ‡æ¢
let g:airline#extensions#tabline#buffer_idx_mode = 1

" å®šä¹‰åˆ‡æ¢æ ‡ç­¾çš„å¿«æ·é”®
nmap <leader>1 <Plug>AirlineSelectTab1
nmap <leader>2 <Plug>AirlineSelectTab2
nmap <leader>3 <Plug>AirlineSelectTab3
nmap <leader>4 <Plug>AirlineSelectTab4
nmap <leader>5 <Plug>AirlineSelectTab5
nmap <leader>6 <Plug>AirlineSelectTab6
nmap <leader>7 <Plug>AirlineSelectTab7
nmap <leader>8 <Plug>AirlineSelectTab8
nmap <leader>9 <Plug>AirlineSelectTab9
nmap <leader>0 <Plug>AirlineSelectTab0
nmap <leader>- <Plug>AirlineSelectPrevTab
nmap <leader>+ <Plug>AirlineSelectNextTab

" å¯ç”¨ airline å†…ç½®æ‰©å±•ï¼šå·¦ä¾§æ˜¾ç¤ºnerdtreeæ’ä»¶æ–‡ä»¶æ ‘å†…å®¹çš„çŠ¶æ€æ æ•ˆæœ
let g:airline#extensions#nerdtree_statusline = 1

" airline å¯ç”¨å†…ç½®ä¸»é¢˜ï¼šåªå½±å“çŠ¶æ€æ é¢œè‰²ï¼Œæ²¡æœ‰é…å¥—çš„ colorscheme
" å¦‚æœå†æŒ‡å®š colorscheme æ–¹æ¡ˆï¼Œå°±å¯ä»¥ä½¿ç”¨ä¸åŒçš„è¯­æ³•é«˜äº®å’ŒçŠ¶æ€æ çš„è‰²å½©
let g:airline_theme='papercolor'

""""""""""""""""""""""""""""""""""""""""""""""""""""""
" è¯­æ³•é«˜äº®çš„å½©è‰²æ–¹æ¡ˆè®¾ç½®

" é˜²æ­¢æŸæ¬¡å…³é—­äº†è¯­æ³•é«˜äº®ï¼Œä¸‹æ¬¡æ‰“å¼€viåˆ™è‡ªåŠ¨å†æ‰“å¼€
if !exists('g:syntax_on')
  syntax enable
endif

" å†…ç½®æ–¹æ¡ˆ https://github.com/vim/colorschemes
" ä¸ä½¿ç”¨è‡ªå®šä¹‰çš„ colorscheme ä¼šä½¿ vim èƒŒæ™¯è·Ÿéšç»ˆç«¯æ¨¡æ‹Ÿå™¨èƒŒæ™¯å›¾ç‰‡
" ä½¿ç”¨ä¸‹è½½çš„ä¸»é¢˜æ’ä»¶è‡ªå¸¦çš„è¯­æ³•é«˜äº®çš„è‰²å½©æ–¹æ¡ˆ
colorscheme PaperColor  " æ”¯æŒè®¾ç½®èƒŒæ™¯è‰²
"colorscheme nord

" è®¾ç½®èƒŒæ™¯è‰²(éœ€è¦ä¸»é¢˜æ”¯æŒ)ï¼Œåˆ‡æ¢è¯­æ³•é¢œè‰²æ–¹æ¡ˆä½¿ç”¨äº®è‰²è¿˜æ˜¯æš—è‰²ï¼ŒPaperColor æ”¯æŒè¯¥åˆ‡æ¢
"set background=dark
"set background=light

" å¦‚æœç»ˆç«¯å·¥å…·è®¾ç½®äº†èƒŒæ™¯å›¾ç‰‡ï¼Œè€Œä½ çš„colorschemeèƒŒæ™¯è‰²æŒ¡ä½äº†å›¾ç‰‡ï¼Œå¼€å¯è¿™ä¸ªè®¾ç½®å¼ºåˆ¶é€æ˜ï¼Œæ¯”å¦‚ PaperColor
"hi Normal guibg=#111111 ctermbg=black
"hi Normal guibg=NONE ctermbg=NONE

""""""""""""""""""""""""""""""""""""""""""""""""""""""
" æ’ä»¶è®¾ç½®ï¼šï¼šNERDTree

" NERDTree æ˜¾ç¤ºéšè—æ–‡ä»¶
let NERDTreeShowHidden=1

" åˆ‡æ¢ç›®å½•æ ‘æ˜¾ç¤ºçš„çƒ­é”®å®šä¹‰ä¸º Ctrl-n
" map æ˜¯ vim çš„å¿«æ·é”®æ˜ å°„å‘½ä»¤
" <C-n> å®šä¹‰äº†å¿«æ·é”®ï¼Œè¡¨ç¤º Ctrl-n
" åé¢æ˜¯å¯¹åº”çš„å‘½ä»¤ä»¥åŠå›è½¦é”® <CR>
map <C-n> :NERDTreeToggle<CR>

```

#### vim å¿«æ·é”®

    Esc é€€å‡ºå½“å‰çš„æ¨¡å¼ï¼Œæˆ–ç»ˆæ­¢å½“å‰å‘½ä»¤ï¼Œå›åˆ°é»˜è®¤çš„æ™®é€šæ¨¡å¼

ç»å¸¸é‡åˆ°çš„ä¸€ä¸ªæƒ…å†µæ˜¯å­—æ¯å¤ªå¤šæŒ‰ä¹±é¡ºåºäº†ï¼Œå…»æˆä¹ æƒ¯è¾“å®Œå‘½ä»¤æ‰§è¡Œåéšæ‰‹å¤šæŒ‰å‡ æ¬¡ Esc ä¿å¹³å®‰

å¤šçœ‹å¸®åŠ©

    :help Visual-mode

å¦‚æœåœ¨ tmux ä¸­ä½¿ç”¨ vimï¼Œçƒ­é”®å†²çªæ—¶ä¼˜å…ˆå“åº” tmuxï¼Œå³ vim çƒ­é”®å¯èƒ½ä¼šå¤±æ•ˆã€‚

##### æ–‡æœ¬è¾“å…¥æ¨¡å¼ï¼ˆç¼–è¾‘æ¨¡å¼/æ’å…¥æ¨¡å¼ï¼‰insert mode

åœ¨æ™®é€šæ¨¡å¼ä¸‹è¾“å…¥æ’å…¥å‘½ä»¤iã€é™„åŠ å‘½ä»¤aã€æ‰“å¼€å‘½ä»¤oã€ä¿®æ”¹å‘½ä»¤cã€å–ä»£å‘½ä»¤ræˆ–æ›¿æ¢å‘½ä»¤séƒ½å¯ä»¥è¿›å…¥æ–‡æœ¬è¾“å…¥æ¨¡å¼ã€‚

åœ¨è¯¥æ¨¡å¼ä¸‹ï¼Œç”¨æˆ·è¾“å…¥çš„ä»»ä½•å­—ç¬¦éƒ½è¢« vi å½“åšæ–‡ä»¶å†…å®¹ç¼“å­˜èµ·æ¥ï¼Œå¹¶å°†å…¶æ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚

åœ¨æ–‡æœ¬è¾“å…¥è¿‡ç¨‹ä¸­ï¼Œè‹¥æƒ³å›åˆ°æ™®é€šæ¨¡å¼ä¸‹ï¼ŒæŒ‰ä¸‹ Esc é”®å³å¯ã€‚

##### æ™®é€šæ¨¡å¼ normal mode

å‘½ä»¤é”®å¯ä»¥ç»„åˆä½¿ç”¨ï¼Œæ¯”å¦‚è¾“å…¥ 2dd æ˜¯æ‰§è¡Œ2æ¬¡åˆ é™¤å½“å‰è¡Œ(dd)æ“ä½œï¼ŒdG å°±æ˜¯ä»å½“å‰è¡Œåˆ é™¤åˆ°æ–‡ä»¶æœ«å°¾ï¼Œ "0p ç²˜è´´å¤åˆ¶å¯„å­˜å™¨çš„å†…å®¹ã€‚

ç¿»é¡µ

    ctrl-y   å‘ä¸Šç§»åŠ¨é¡µé¢ï¼Œå…‰æ ‡ä¿æŒåŸä½
    ctrl-e   å‘ä¸‹ç§»åŠ¨é¡µé¢ï¼Œå…‰æ ‡ä¿æŒåŸä½

    z + Enter   æ»šåŠ¨å±å¹•ï¼Œä½¿å½“å‰å…‰æ ‡æ‰€åœ¨è¡Œå¤„äºå±å¹•ç¬¬ä¸€è¡Œï¼›
    z + .       æ»šåŠ¨å±å¹•ï¼Œä½¿å½“å‰å…‰æ ‡æ‰€åœ¨è¡Œå¤„äºå±å¹•ä¸­é—´è¡Œï¼›
    z + -       æ»šåŠ¨å±å¹•ï¼Œä½¿å½“å‰å…‰æ ‡æ‰€åœ¨è¡Œå¤„äºå±å¹•æœ€åä¸€è¡Œï¼›

    ctrl-f   ä¸Šç¿»ä¸€é¡µ
    ctrl-b   ä¸‹ç¿»ä¸€é¡µ
    ctrl-u   ä¸Šç¿»åŠé¡µ
    ctrl-d   ä¸‹ç¿»åŠé¡µ

ç§»åŠ¨å…‰æ ‡

    h,j,k,l  ä¸Šï¼Œä¸‹ï¼Œå·¦ï¼Œå³

    w    è·³åˆ°ä¸‹ä¸€ä¸ªå­—é¦–ï¼ŒæŒ‰æ ‡ç‚¹æˆ–å•è¯åˆ†å‰²
    W    è·³åˆ°ä¸‹ä¸€ä¸ªå­—é¦–ï¼Œé•¿è·³ï¼Œå¦‚end-of-lineè¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªå­—

    e    è·³åˆ°ä¸‹ä¸€ä¸ªå­—å°¾
    E    è·³åˆ°ä¸‹ä¸€ä¸ªå­—å°¾ï¼Œé•¿è·³

    b    è·³åˆ°ä¸Šä¸€ä¸ªå­—
    B    è·³åˆ°ä¸Šä¸€ä¸ªå­—ï¼Œé•¿è·³

    3+Space å…‰æ ‡ä½ç½®å³è·³æœ¬è¡Œ3ä¸ªå­—ç¬¦çš„ä½ç½®

    0    è·³è‡³è¡Œé¦–ï¼Œä¸ç®¡æœ‰æ— ç¼©è¿›ï¼Œå°±æ˜¯è·³åˆ°ç¬¬0ä¸ªå­—ç¬¦
    ^    è·³è‡³è¡Œé¦–çš„ç¬¬ä¸€ä¸ªå­—ç¬¦

    $    è·³è‡³è¡Œå°¾

    gg   è·³è‡³æ–‡é¦–ï¼Œæˆ– 1g è·³åˆ°ç¬¬ä¸€è¡Œï¼Œé»˜è®¤æ˜¯åœ¨è¡Œé¦–
    G    è·³è‡³æ–‡å°¾

    5gg     è·³è‡³ç¬¬5è¡Œï¼Œæˆ– 5G

    ctrl+g  æ˜¾ç¤ºå½“å‰è¡Œä½ç½®

    {}ã€[]ã€[[ã€]]  æ­£åå‘æŒ‰æ–‡æœ¬å¯¹è±¡ç§»åŠ¨ä¸€ä¸ªæ®µè½ã€å¥å­ã€å°èŠ‚

    ma      åˆ›å»ºä¸€ä¸ªä¹¦ç­¾ aï¼Œ åˆ™ mb åˆ›å»ºä¸€ä¸ªä¹¦ç­¾ bï¼Œä»¥æ­¤ç±»æ¨ï¼Œå¦‚æœä¹¦ç­¾åç§°æ˜¯å¤§å†™å­—æ¯ï¼Œé‚£ä¹ˆè¿™æ˜¯ä¸€ä¸ªå…¨å±€ä¹¦ç­¾ã€‚
    `a      è·³è½¬åˆ°ä¹¦ç­¾açš„ç²¾ç¡®ä½ç½®ï¼ˆè¡Œå’Œåˆ—ï¼‰ï¼Œä»¥æ­¤ç±»æ¨
    'a      è°ƒæ•´åˆ°ä¹¦ç­¾aæ‰€åœ¨è¡Œçš„èµ·å§‹ä½ç½®ï¼Œä»¥æ­¤ç±»æ¨

    :delmarks a  åˆ é™¤ä¹¦ç­¾a
    :marks       æ˜¾ç¤ºæ‰€æœ‰æ ‡ç­¾

æŸ¥æ‰¾æ›¿æ¢

    /   å‘åæœç´¢ï¼Œä¼šåœ¨å‘½ä»¤è¡Œä¸‹é¢è¿›å…¥è¾“å…¥æ¨¡å¼ï¼Œè¾“å…¥åŒ¹é…æ¨¡å¼ pattern åå›è½¦å³å¯
    ?   å‘å‰æœç´¢ï¼ˆåŒä¸Šï¼‰

        å¦‚æœæƒ³ç”¨ p ç²˜è´´å¯„å­˜å™¨ "0 çš„å†…å®¹ï¼Œä½¿ç”¨çƒ­é”® <C-r>ï¼Œç„¶åè¾“å…¥ 0pï¼Œè¯¥å†…å®¹å³å‡ºç°åœ¨ / åé¢äº†

      :set ic   å¿½ç•¥å¤§å°å†™ï¼Œæˆ– :set ignorecaseï¼Œæˆ–åœ¨ä¸Šé¢çš„æœç´¢åŒ¹é…æ¨¡å¼åç¼€ \c
      :set noic å¤§å°å†™æ•æ„Ÿï¼Œæˆ– :set noignorecaseï¼Œæˆ–åœ¨ä¸Šé¢çš„æœç´¢åŒ¹é…æ¨¡å¼åç¼€ \C

      n   ä¸‹ä¸€ä¸ªåŒ¹é…(å¦‚æœæ˜¯ / æœç´¢ï¼Œåˆ™æ˜¯å‘ä¸‹çš„ä¸‹ä¸€ä¸ªåŒ¹é…ï¼Œ? æœç´¢åˆ™æ˜¯å‘ä¸Šçš„ä¸‹ä¸€ä¸ªåŒ¹é…)
      N   ä¸Šä¸€ä¸ªåŒ¹é…(åŒä¸Š)

    fx  åœ¨å½“å‰è¡Œä¸­æ‰¾xå­—ç¬¦ï¼Œæ‰¾åˆ°äº†å°±è·³è½¬è‡³è¯¥å­—ç¬¦
    ;   é‡å¤ä¸Šä¸€ä¸ªfå‘½ä»¤ï¼Œè€Œä¸ç”¨é‡å¤çš„è¾“å…¥ fx

    *   æŸ¥æ‰¾å…‰æ ‡æ‰€åœ¨å¤„çš„å•è¯ï¼Œå‘ä¸‹æŸ¥æ‰¾ï¼Œé‡å¤æŒ‰å°±æ˜¯æŸ¥æ‰¾ä¸‹ä¸€ä¸ªåŒ¹é…é¡¹
    #   æŸ¥æ‰¾å…‰æ ‡æ‰€åœ¨å¤„çš„å•è¯ï¼Œå‘ä¸ŠæŸ¥æ‰¾ï¼Œé‡å¤æŒ‰å°±æ˜¯æŸ¥æ‰¾ä¸‹ä¸€ä¸ªåŒ¹é…é¡¹

    :%s/old/new/g   æ›¿æ¢ï¼Œæœç´¢æ•´ä¸ªæ–‡ä»¶ï¼Œå°†æ‰€æœ‰çš„ old æ›¿æ¢ä¸º new
    :%s/old/new/gc  æ›¿æ¢ï¼Œæœç´¢æ•´ä¸ªæ–‡ä»¶ï¼Œå°†æ‰€æœ‰çš„ old æ›¿æ¢ä¸º newï¼Œæ¯æ¬¡éƒ½è¦ä½ ç¡®è®¤æ˜¯å¦æ›¿æ¢ï¼Œå¯æ ¹æ®æç¤ºé€‰æ‹©a=all

åˆ é™¤å¤åˆ¶ç²˜è´´

    J     åˆ é™¤è¡Œå°¾çš„æ¢è¡Œï¼Œå°†ä¸‹ä¸€è¡Œå’Œå½“å‰è¡Œè¿æ¥ä¸ºä¸€è¡Œï¼Œä¸­é—´ç”¨ç©ºæ ¼åˆ†éš”ï¼Œä¸æ·»åŠ ç©ºæ ¼ä½¿ç”¨å‘½ä»¤ gJã€‚

    x     åˆ é™¤å½“å‰å­—ç¬¦
    X     åˆ é™¤å‰ä¸€ä¸ªå­—ç¬¦

    dd    åˆ é™¤å…‰æ ‡æ‰€åœ¨è¡Œ
    dw    åˆ é™¤ä¸€ä¸ªå­—(word)

    d$    åˆ é™¤åˆ°è¡Œæœ«ï¼Œæˆ– D
    d^    åˆ é™¤åˆ°è¡Œé¦–

    NOTE: vimçš„åˆ é™¤æ“ä½œå…¶å®æ˜¯å‰ªåˆ‡ï¼Œè¯¦è§ä¸‹é¢ç« èŠ‚ [vimå¯„å­˜å™¨--åˆ é™¤æ˜¯å‰ªåˆ‡æ“ä½œ]

    yy    å¤åˆ¶ä¸€è¡Œï¼Œ æˆ– Y
    yw    å¤åˆ¶ä¸€ä¸ªå­—
    y$    å¤åˆ¶åˆ°è¡Œæœ«
    y^    å¤åˆ¶åˆ°è¡Œé¦–

    p     ç²˜è´´å‰ªè´´æ¿çš„å†…å®¹åˆ°å½“å‰è¡Œçš„ä¸‹é¢
    P     ç²˜è´´å‰ªè´´æ¿çš„å†…å®¹åˆ°å½“å‰è¡Œçš„ä¸Šé¢

ç¼–è¾‘

    i     æ’å…¥ï¼Œä»å½“å‰å…‰æ ‡å¤„è¿›å…¥ç¼–è¾‘æ¨¡å¼
    a     è¿½åŠ ï¼Œåœ¨å½“å‰å…‰æ ‡ä¹‹åè¿›å…¥ç¼–è¾‘æ¨¡å¼

    I     è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œå¹¶ç½®å…‰æ ‡äºè¡Œé¦–
    A     è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œç½®å…‰æ ‡äºè¡Œæœ«

    o     è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œåœ¨å½“å‰è¡Œä¹‹ä¸‹æ–°åŠ ä¸€è¡Œï¼Œå…‰æ ‡ä½äºæ–°åŠ è¡Œ
    O     è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œåœ¨å½“å‰è¡Œä¹‹ä¸Šæ–°åŠ ä¸€è¡Œï¼Œå…‰æ ‡ä½äºæ–°åŠ è¡Œ

    s     åˆ é™¤å½“å‰å­—ç¬¦å¹¶è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œçœå»æŒ‰ x   i ä¸¤ä¸ªå¿«æ·é”®
    S     åˆ é™¤å…‰æ ‡æ‰€åœ¨è¡Œå¹¶è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œçœå»æŒ‰ dd i ä¸¤ä¸ªå¿«æ·é”®

    cc    åˆ é™¤å½“å‰è¡Œå¹¶è¿›å…¥ç¼–è¾‘æ¨¡å¼
    cw    åˆ é™¤å½“å‰è¯ï¼Œå¹¶è¿›å…¥ç¼–è¾‘æ¨¡å¼
    c$    æ“¦é™¤ä»å½“å‰ä½ç½®è‡³è¡Œæœ«çš„å†…å®¹ï¼Œå¹¶è¿›å…¥ç¼–è¾‘æ¨¡å¼
    c^    æ“¦é™¤ä»å½“å‰ä½ç½®è‡³è¡Œé¦–çš„å†…å®¹ï¼Œå¹¶è¿›å…¥ç¼–è¾‘æ¨¡å¼

    xp    äº¤æ¢å½“å‰å­—ç¬¦å’Œä¸‹ä¸€ä¸ªå­—ç¬¦

    u       æ’¤é”€
    ctrl+r  é‡åš

    ~     åˆ‡æ¢å¤§å°å†™ï¼Œå½“å‰å­—ç¬¦
    >>    å°†å½“å‰è¡Œå³ç§»ä¸€ä¸ªå•ä½(ä¸€ä¸ªtabç¬¦)
    <<    å°†å½“å‰è¡Œå·¦ç§»ä¸€ä¸ªå•ä½(ä¸€ä¸ªtabç¬¦)
    ==    è‡ªåŠ¨ç¼©è¿›å½“å‰è¡Œ

##### æ›¿æ¢æ¨¡å¼ replace mode

    r   å•å­—ç¬¦æ›¿æ¢æ¨¡å¼ï¼Œæ­¤æ—¶æ–°è¾“å…¥çš„å­—ç¬¦å°†æ›¿ä»£å…‰æ ‡ä¹‹ä¸‹çš„å½“å‰å­—ç¬¦ï¼Œç„¶åè‡ªåŠ¨è¿”å›åˆ°æ™®é€šæ¨¡å¼ã€‚

        åœ¨rå‘½ä»¤ä¸­å¢åŠ æ•°å­—å‰ç¼€ï¼Œå¯ä»¥ä¸€æ¬¡æ€§æ›¿æ¢å¤šä¸ªå­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œå°†å…‰æ ‡å®šä½åˆ°â€œ||â€å­—ç¬¦å¤„ï¼Œç„¶åæ‰§è¡Œ2r&å‘½ä»¤ï¼Œå¯ä»¥å°†å…¶æ›¿æ¢ä¸ºâ€œ&&â€ã€‚

    R   è¿›å…¥æ›¿æ¢æ¨¡å¼ï¼ˆå±å¹•åº•éƒ¨æ˜¾ç¤ºâ€œ--REPLACE--â€ï¼‰ã€‚æ­¤æ—¶æ–°è¾“å…¥çš„æ–‡æœ¬å°†ç›´æ¥æ›¿ä»£/è¦†ç›–å·²ç»å­˜åœ¨çš„å†…å®¹ï¼Œç›´è‡³ç‚¹å‡»ESCé”®è¿”å›æ™®é€šæ¨¡å¼ã€‚

    gR è¿›å…¥è™šæ‹Ÿæ›¿æ¢æ¨¡å¼ï¼ˆvirtual replace modeï¼‰ï¼ˆå±å¹•åº•éƒ¨æ˜¾ç¤ºâ€œ--VREPLACE--â€ï¼‰ï¼Œå…¶ä¸æ›¿æ¢æ¨¡å¼æœ€ä¸»è¦çš„åŒºåˆ«åœ¨äºï¼Œå¯¹<Tab>é”®å’Œæ¢è¡Œç¬¦çš„ä¸åŒå¤„ç†æ–¹å¼

        è™šæ‹Ÿæ›¿æ¢æ¨¡å¼ï¼ˆVREPLACEï¼‰åˆ™å°†<Tab>é”®æ‹†åˆ†ä¸ºå¤šä¸ªç‹¬ç«‹çš„ç©ºæ ¼æ¥åˆ†åˆ«å¤„ç†

        è™šæ‹Ÿæ›¿æ¢æ¨¡å¼ï¼ˆVREPLACEï¼‰ä¸‹ï¼Œè¾“å…¥<Enter>å›è½¦é”®å°†ç”¨æ–°è¡Œæ›¿ä»£å½“å‰è¡Œå†…å®¹ï¼ˆå³æ¸…ç©ºå½“å‰è¡Œï¼‰

        grå‘½ä»¤ï¼Œå¯ä»¥è¿›å…¥å•å­—ç¬¦è™šæ‹Ÿæ›¿æ¢æ¨¡å¼ã€‚åœ¨æ›¿æ¢å…‰æ ‡ä¸‹çš„å½“å‰å­—ç¬¦ä¹‹åï¼Œå°†è‡ªåŠ¨è¿”å›åˆ°å¸¸è§„æ¨¡å¼ã€‚

##### å¯è§†æ¨¡å¼(åˆ—å—æ“ä½œ) visual mode

æ™®é€šæ¨¡å¼ä¸‹æŒ‰ä¸‹åˆ—é”®è¿›å…¥å¯è§†æ¨¡å¼

    æŒ‰ v é”®ï¼Œç„¶ååŠ æ–¹å‘é”®ï¼ˆhã€jã€kã€lï¼‰æˆ–è€…å¦å¤–çš„å››ä¸ªæ–¹å‘é”®ç§»åŠ¨å…‰æ ‡ï¼Œä»å…‰æ ‡ä½ç½®å¼€å§‹è¿›é€å­—ç¬¦çš„è¡Œå¤šé€‰ï¼Œç„¶åå¯ä»¥æ‰§è¡Œåˆ é™¤å¤åˆ¶ç²˜è´´åˆå¹¶è¡Œç­‰æ™®é€šæ¨¡å¼ä¸‹çš„å‘½ä»¤æ“ä½œ

    æŒ‰ shift + v é”®(å³V)ï¼Œæ˜¯æŒ‰è¡Œé€‰æ‹©çš„å¤šè¡Œæ¨¡å¼ï¼Œæ“ä½œåŒä¸Šã€‚

    æŒ‰ Ctrl + v /Ctrl + q é”®ï¼Œä»å…‰æ ‡ä½ç½®å¼€å§‹è¿›é€å­—ç¬¦çš„åˆ—å¤šé€‰ï¼Œæ“ä½œåŒä¸Šã€‚

ç¤ºä¾‹

    åˆ é™¤åˆ—

        1.å…‰æ ‡å®šä½åˆ°è¦æ“ä½œçš„åœ°æ–¹ã€‚
        2.CTRL + v è¿›å…¥â€œå¯è§† å—â€æ¨¡å¼ï¼Œç§»åŠ¨å…‰æ ‡é€‰å–è¿™ä¸€åˆ—æ“ä½œå¤šå°‘è¡Œã€‚
        3.æŒ‰ d é”®åˆ é™¤ã€‚

    æ’å…¥åˆ—

        1.å…‰æ ‡å®šä½åˆ°è¦æ“ä½œçš„åœ°æ–¹ã€‚
        2.CTRL + v è¿›å…¥â€œå¯è§† å—â€æ¨¡å¼ï¼Œé€‰å–è¿™ä¸€åˆ—æ“ä½œå¤šå°‘è¡Œã€‚
        3.SHIFT + i (I) è¾“å…¥è¦æ’å…¥çš„å†…å®¹ã€‚
        4.æŒ‰ Esc é”®ä¸¤æ¬¡ï¼Œä¼šåœ¨æ¯è¡Œçš„é€‰å®šçš„åŒºåŸŸå‡ºç°æ’å…¥çš„å†…å®¹

    ç”¨ `c` å°†åˆ é™¤é«˜äº®é€‰ä¸­çš„æ–‡æœ¬å¹¶è¿›å…¥æ’å…¥æ¨¡å¼ï¼Œåœ¨ä½ è¾“å…¥æ–‡æœ¬å¹¶æŒ‰ Esc é”®è¿”å›ä¹‹åï¼Œè¾“å…¥çš„æ–‡æœ¬å°†æ’å…¥åˆ°å—é€‰ä¸­çš„æ¯ä¸€è¡Œé‡Œã€‚

    ç”¨ `C` ä¼šåˆ é™¤ä»é€‰ä¸­æ–‡æœ¬åˆ°è¡Œå°¾çš„æ‰€æœ‰å­—ç¬¦å¹¶è¿›å…¥æ’å…¥çŠ¶æ€ã€‚

    ç”¨ `A` ç„¶åè¾“å…¥å­—ç¬¦ï¼Œæ‰€æœ‰çš„å­—ç¬¦ä¼šæ·»åŠ åˆ°æ–‡æœ¬å—åé¢ã€‚

    å¯¹é«˜äº®æ˜¾ç¤ºçš„æ–‡æœ¬å—ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ `~` è¿›è¡Œå¤§å°å†™è½¬æ¢ï¼Œç”¨ `r` æ›¿æ¢å•ä¸ªå­—ç¬¦ï¼Œç”¨ `>` å¢åŠ ç¼©è¿›ï¼Œæˆ–ç”¨ `<` å‡å°‘ç¼©è¿›ã€‚

    å¯¹é«˜äº®æ˜¾ç¤ºçš„æ–‡æœ¬å—ï¼Œå¯ä»¥ç”¨ `o` æˆ– `O` åœ¨å—å†…ç§»åŠ¨å…‰æ ‡ï¼Œæ–¹ä¾¿åç»­æ“ä½œæ‰§è¡Œåå…‰æ ‡çš„èµ·å§‹å®šä½ã€‚

##### å‘½ä»¤è¡Œæ¨¡å¼ command mode

åœ¨æ™®é€šæ¨¡å¼ä¸‹ï¼Œç”¨æˆ·æŒ‰å†’å· : é”®å³å¯è¿›å…¥å‘½ä»¤è¡Œæ¨¡å¼ä¸‹ï¼Œæ­¤æ—¶ vi ä¼šåœ¨æ˜¾ç¤ºçª—å£çš„æœ€åä¸€è¡Œï¼ˆé€šå¸¸ä¹Ÿæ˜¯å±å¹•çš„æœ€åä¸€è¡Œï¼‰æ˜¾ç¤ºä¸€ä¸ª : ä½œä¸ºå‘½ä»¤è¡Œæ¨¡å¼çš„è¯´æ˜ç¬¦ï¼Œç­‰å¾…ç”¨æˆ·è¾“å…¥å‘½ä»¤ã€‚å¤šæ•°æ–‡ä»¶ç®¡ç†å‘½ä»¤éƒ½æ˜¯åœ¨æ­¤æ¨¡å¼ä¸‹æ‰§è¡Œçš„ï¼ˆå¦‚æŠŠç¼–è¾‘ç¼“å†²åŒºçš„å†…å®¹å†™åˆ°æ–‡ä»¶ä¸­ç­‰ï¼‰ã€‚

å‘½ä»¤è¡Œå‘½ä»¤æ‰§è¡Œå®Œåï¼Œvi è‡ªåŠ¨å›åˆ°æ™®é€šæ¨¡å¼ã€‚

åœ¨ vim ä¸­è¾“å…¥çš„å‘½ä»¤ï¼Œä¹Ÿå¯ç¼–è¾‘ ~/.vimrc æ–‡ä»¶é…ç½®ã€‚

é€€å‡ºç¼–è¾‘å™¨

    å³ä½¿ç¼“å†²åŒºæ‰“å¼€äº†å¤šä¸ªæ–‡ä»¶ï¼Œä¸€æ¬¡ q å°±ä¼šå…¨éƒ¨é€€å‡ºï¼Œä¸éœ€è¦æŒ¨ä¸ªé€€å‡ºã€‚

    å¦‚æœæœ‰å¤šä¸ªæ ‡ç­¾é¡µæˆ–çª—å£ï¼Œéœ€è¦æŒ¨ä¸ªæ‰§è¡Œqé€€å‡º

    :w      å°†ç¼“å†²åŒºå†™å…¥æ–‡ä»¶ï¼Œå³ä¿å­˜ä¿®æ”¹
    :wq     ä¿å­˜ä¿®æ”¹å¹¶é€€å‡º
    :x      ä¿å­˜ä¿®æ”¹å¹¶é€€å‡º
    :q      é€€å‡ºï¼Œå¦‚æœå¯¹ç¼“å†²åŒºè¿›è¡Œè¿‡ä¿®æ”¹ï¼Œåˆ™ä¼šæç¤º
    :q!     å¼ºåˆ¶é€€å‡ºï¼Œæ”¾å¼ƒä¿®æ”¹

##### è‡ªå®šä¹‰å¿«æ·é”®

é‡æ–°å®šä¹‰å¿«æ·é”®ï¼Œæ”¾åˆ° ~/.vimrc æ–‡ä»¶ä¸­å³å¯ï¼š

```vim

" åˆ‡æ¢ç›®å½•æ ‘æ˜¾ç¤ºçš„çƒ­é”®å®šä¹‰ä¸º Ctrl-n
" map æ˜¯ vim çš„å¿«æ·é”®æ˜ å°„å‘½ä»¤
" <C-n> å®šä¹‰äº†å¿«æ·é”®ï¼Œè¡¨ç¤º Ctrl-n
" åé¢æ˜¯å¯¹åº”çš„å‘½ä»¤ä»¥åŠå›è½¦é”® <CR>
map <C-n> :NERDTreeToggle<CR>

```

map noremap çš„åŒºåˆ«ï¼š

nore â€œ éé€’å½’ â€è¡¨ç¤ºæ˜ å°„ä»…å±•å¼€ä¸€æ¬¡ï¼Œå¹¶ä¸”åº”ç”¨/æ‰§è¡Œè¯¥ç»“æœã€‚

    nmap K H
    nnoremap H G
    nnoremap G gg

ä»¥ä¸Šä¸‰è¡Œè®¾ç½®ï¼Œä½¿ K æ‰©å±•ä¸º H ï¼Œç„¶å H æ‰©å±•ä¸º G å¹¶åœæ­¢ã€‚å› ä¸º nnoremap ä¼šç«‹å³æ‰©å±•å’Œåœæ­¢ã€‚ å°†æ‰§è¡ŒGçš„å«ä¹‰ï¼ˆå³â€œè·³åˆ°æœ€åä¸€è¡Œâ€ï¼‰ã€‚ æœ€å¤šåªæœ‰ä¸€ä¸ªéé€’å½’æ˜ å°„å°†åº”ç”¨äºæ‰©å±•é“¾ï¼ˆè¿™å°†æ˜¯æœ€åä¸€æ¬¡æ‰©å±•ï¼‰ã€‚

å‰ç¼€ i v n ç­‰å¯ä»¥çº¦æŸç”Ÿæ•ˆèŒƒå›´

    inoremap åªåœ¨ insert æ¨¡å¼ä¸‹ç”Ÿæ•ˆ

    vnoremap åªåœ¨ visual æ¨¡å¼ä¸‹ç”Ÿæ•ˆ

    nnoremap å°±åœ¨ normal æ¨¡å¼ä¸‹ç”Ÿæ•ˆ

å‰å¯¼é”®

ä¸ºè§£å†³ vim ä¸­å¿«æ·é”®å¤ªå¤šä¸å¤Ÿç”¨çš„é—®é¢˜ï¼Œåˆå¼•å…¥äº†å‰å¯¼é”®ï¼Œå³æŒ‰ä½ä¸€ä¸ªçƒ­é”®ç„¶åå†æŒ‰å…¶å®ƒé”®ï¼Œå¯¹åº”æ–°çš„å‘½ä»¤ã€‚ä¹Ÿå¯ä»¥åƒ tmux ä¾æ¬¡æŒ‰é”®çš„ç”¨æ³•ã€‚

å‰å¯¼é”®é»˜è®¤ä¸ºâ€œ\â€ï¼Œå¯ä»¥å®šä¹‰ä¸ºå…¶å®ƒçš„ï¼š

    " å‰å¯¼é”®å®šä¹‰ä¸º é€—å·
    let mapleader=","

    " åˆ©ç”¨è½¬ä¹‰ç¬¦â€œ\â€å°†å‰å¯¼é”®å®šä¹‰ä¸ºç©ºæ ¼é”®
    let mapleader = "\<space>"

    "åç»­çš„çƒ­é”®å®šä¹‰ä½¿ç”¨å‰å¯¼é”®åªéœ€è¦ç”¨ <leader> å£°æ˜å³å¯
    map <Leader>bn :bn<CR>

å¤šçª—å£æ“ä½œä¹Ÿæœ‰è‡ªå·±çš„å‰å¯¼é”® ctrl+wï¼Œæ³¨æ„åŒºåˆ«ã€‚

##### é‡å¤ä¸Šæ­¥æ“ä½œ

vimä¸­æœ‰äº”ç§åŸºæœ¬çš„é‡å¤ç±»å‹ï¼Œåˆ†åˆ«æ˜¯ï¼š

    é‡å¤ç±»å‹        é‡å¤æ“ä½œç¬¦    å›é€€æ“ä½œç¬¦
    æ–‡æœ¬æ”¹å˜é‡å¤      .             u
    è¡Œå†…æŸ¥æ‰¾é‡å¤      ;             ,
    å…¨æ–‡æŸ¥æ‰¾é‡å¤      n             N
    æ–‡æœ¬æ›¿æ¢é‡å¤      &             u
    å®é‡å¤           @[å¯„å­˜å™¨]      u

##### æŸ¥çœ‹å‘½ä»¤å†å²

å‘½ä»¤è¡Œæ¨¡å¼ä¸‹ï¼š

    :history æŸ¥çœ‹æ‰€æœ‰å‘½ä»¤è¡Œæ¨¡å¼ä¸‹è¾“å…¥çš„å‘½ä»¤å†å²ï¼ŒæŒ‰qé€€å‡º

    :history searchæˆ– / æˆ–ï¼Ÿ æŸ¥çœ‹æœç´¢å†å²

æ™®é€šæ¨¡å¼ä¸‹ï¼š

    q:  æŸ¥çœ‹å‘½ä»¤è¡Œå†å²

    q/  æŸ¥çœ‹ä½¿ç”¨/è¾“å…¥çš„æœç´¢å†å²
    q?  æŸ¥çœ‹ä½¿ç”¨ï¼Ÿè¾“å…¥çš„æœç´¢å†å²

##### æ’ä»¶æœ‰è‡ªå·±çš„å¿«æ·é”®

å†…ç½®æ’ä»¶ netrw çš„å¿«æ·é”®ï¼Œå‚è§ç« èŠ‚ [vim å†…ç½®çš„æ ‘å½¢æ–‡ä»¶å¤¹æ’ä»¶ netrw]

æ–‡ä»¶å¤¹æ ‘å½¢å±•ç¤ºæ’ä»¶ nerdtree çš„å¿«æ·é”®ï¼Œå‚è§ç« èŠ‚ [nerdtree æ ‘å½¢æ–‡ä»¶å¤¹æ’ä»¶]ã€‚

å°æŠ€å·§ï¼š

vim /etc å†…çš„æ–‡ä»¶ï¼Œç­‰ä¿å­˜æ—¶æ‰å‘ç°æ²¡æƒé™ã€‚æ›²çº¿æ–¹æ³•æ˜¯å…ˆä¿å­˜ä¸ªä¸´æ—¶æ–‡ä»¶ï¼Œé€€å‡ºåå† sudo cp å›å»ã€‚

å®é™…ä¸Šåœ¨ vim é‡Œé¢å¯ä»¥ç›´æ¥å®Œæˆè¿™ä¸ªè¿‡ç¨‹çš„

    :w !sudo tee %

:w !{cmd}ï¼Œè®© vim æ‰§è¡Œä¸€ä¸ªå¤–éƒ¨å‘½ä»¤ {cmd}ï¼Œç„¶åæŠŠå½“å‰ç¼“å†²åŒºçš„å†…å®¹ä» stdin ä¼ å…¥ã€‚tee æ˜¯ä¸€ä¸ªæŠŠ stdin ä¿å­˜åˆ°æ–‡ä»¶çš„å°å·¥å…·ã€‚%ï¼Œæ˜¯ vim å½“ä¸­ä¸€ä¸ªåªè¯»å¯„å­˜å™¨çš„åå­—ï¼Œæ€»ä¿å­˜ç€å½“å‰ç¼–è¾‘æ–‡ä»¶çš„æ–‡ä»¶è·¯å¾„ã€‚

#### ç†è§£vimçš„å¤šæ–‡ä»¶æ“ä½œï¼ˆç¼“å†²bufferï¼‰

    https://www.cnblogs.com/standardzero/p/10720922.html

vim çš„ç¼“å†²åŒºæ˜¯å†…å­˜ä¸­æ‰“å¼€çš„æ–‡ä»¶ã€‚å½“ä½ ç”¨ `:e filename` æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼ŒVim å°±ä¼šåˆ›å»ºä¸€ä¸ªç¼“å†²åŒºã€‚ä½ å¯ä»¥åŒæ—¶æ‰“å¼€å¤šä¸ªç¼“å†²åŒºï¼Œä½†åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªç¼“å†²åŒºæ˜¯æ´»åŠ¨çš„ï¼ˆå³å½“å‰æ­£åœ¨ç¼–è¾‘çš„ï¼‰ã€‚

æ–‡ä»¶çš„å±•ç¤ºè·Ÿ Windows ä¸åŒï¼Œvim çš„å½“å‰çª—å£æ˜¾ç¤ºæŸä¸ªç¼“å†²åŒºå³æŸä¸ªæ–‡ä»¶ï¼Œç”¨æˆ·åªèƒ½åœ¨è¯¥çª—å£åˆ‡æ¢ä¸åŒçš„ç¼“å†²åŒºå³åˆ‡æ¢æ˜¾ç¤ºä¸åŒçš„æ–‡ä»¶ï¼Œä¸å­˜åœ¨åƒ Windows ä¼¼çš„åˆ‡æ¢çª—å£æ¥å®ç°åˆ‡æ¢æ–‡ä»¶ã€‚

vim æ‰“å¼€å¤šä¸ªæ–‡ä»¶ï¼Œæ¯ä¸ªæ–‡ä»¶éƒ½ä¼šåŠ è½½åˆ°ä¸åŒçš„ç¼“å†²åŒº

    $ vim file1 file2 ... åŒæ—¶æ‰“å¼€å¤šä¸ªæ–‡ä»¶ï¼Œå½“å‰çª—å£åªæ˜¾ç¤ºä¸€ä¸ªæ–‡ä»¶ï¼ˆç¼“å†²åŒºï¼‰

    :next åˆ‡æ¢åˆ°ä¸‹ä¸ªç¼“å†²åŒºï¼Œå³æ˜¾ç¤ºä¸‹ä¸ªæ–‡ä»¶
    :prev åˆ‡æ¢åˆ°ä¸‹ä¸ªç¼“å†²åŒºï¼Œå³æ˜¾ç¤ºå‰ä¸ªæ–‡ä»¶

    :next! ä¸ä¿å­˜å½“å‰ç¼“å†²åŒºï¼ˆæ–‡ä»¶çš„ä¿®æ”¹ï¼‰å¹¶åˆ‡æ¢åˆ°ä¸‹ä¸ªæ–‡ä»¶
    :prev! ä¸ä¿å­˜å½“å‰ç¼“å†²åŒºï¼ˆæ–‡ä»¶çš„ä¿®æ”¹ï¼‰å¹¶åˆ‡æ¢åˆ°ä¸Šä¸ªæ–‡ä»¶

    :wnext ä¿å­˜å½“å‰ç¼“å†²åŒºï¼ˆæ–‡ä»¶çš„ä¿®æ”¹ï¼‰å¹¶åˆ‡æ¢åˆ°ä¸‹ä¸ªæ–‡ä»¶
    :wprev ä¿å­˜å½“å‰ç¼“å†²åŒºï¼ˆæ–‡ä»¶çš„ä¿®æ”¹ï¼‰å¹¶åˆ‡æ¢åˆ°ä¸Šä¸ªæ–‡ä»¶

    :ls         å±•ç¤ºç¼“å†²åŒºåˆ—è¡¨ï¼Œå³ vim æ‰“å¼€çš„æ–‡ä»¶åˆ—è¡¨
                NOTE:vi ç¼“å†²åŒºä¸­çš„æ–‡ä»¶ç¼–å·ä¸æ˜¯1ï¼Œ2ï¼Œ3çš„é¡ºåºåˆ†å¸ƒã€‚

    :b num      åˆ‡æ¢ç¼“å†²åŒºï¼ˆå…¶ä¸­ num ä¸º buffer list ä¸­çš„ç¼–å·ï¼‰å³åˆ‡æ¢æ˜¾ç¤ºæ–‡ä»¶

    :bn         åˆ‡æ¢æ˜¾ç¤ºä¸‹ä¸€ä¸ªæ–‡ä»¶
    :bp         åˆ‡æ¢æ˜¾ç¤ºä¸Šä¸€ä¸ªæ–‡ä»¶

    Ctrl+6      åœ¨æ™®é€šæ¨¡å¼ä¸‹çš„çƒ­é”®ï¼Œåˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªæ–‡ä»¶

                å¯¹äºç”¨ split åœ¨å¤šä¸ªçª—å£ä¸­æ‰“å¼€çš„æ–‡ä»¶ï¼Œåˆ‡æ¢ç¼“å†²åŒºçš„å‘½ä»¤åªä¼šåœ¨å½“å‰çª—å£ä¸­åˆ‡æ¢ä¸åŒçš„æ–‡ä»¶ã€‚

    :bd         å…³é—­å½“å‰æ‰“å¼€çš„ç¼“å†²åŒºï¼Œå³æ¸…é™¤å½“å‰æ–‡ä»¶çš„å†…å®¹ï¼Œå•ä¸€çª—å£ä¸‹ä¹Ÿä¸ä¼šé€€å‡ºvimï¼Œæˆ– :bdelete ã€‚

    :q          é€€å‡ºvimï¼Œå³å…³é—­å…¨éƒ¨ç¼“å†²åŒºå¹¶é€€å‡ºï¼Œå¦‚æœæœ‰ä¿®æ”¹æœªä¿å­˜ä¼šæç¤ºã€‚
                å¦‚æœæ˜¯ tab æ ‡ç­¾é¡µæˆ– window åˆ†å‰²çª—å£æ‰“å¼€çš„æ–‡ä»¶ï¼Œåˆ™ä¼šå…³é—­å½“å‰æ ‡ç­¾é¡µæˆ–çª—å£ã€‚

    :wq         ä¿å­˜ä¿®æ”¹å¹¶é€€å‡ºvim

    :q!         ä¸¢å¼ƒå½“å‰ç¼“å†²åŒºé€€å‡ºvimï¼Œå³ä½ çš„æ–‡ä»¶ä¿®æ”¹ä¸ä¼šè¢«ä¿å­˜
    :qa!        ä¸¢å¼ƒæ‰€æœ‰ç¼“å†²åŒºé€€å‡ºvimï¼Œå³æ‰€æœ‰çš„æ–‡ä»¶ä¿®æ”¹ä¸ä¼šè¢«ä¿å­˜

    :e xxxx     åœ¨å½“å‰çª—å£æ‰“å¼€æ–‡ä»¶
    :e          é‡æ–°æŠŠå½“å‰æ–‡ä»¶åŠ è½½åˆ°ç¼“å†²åŒºï¼Œä¸¢å¼ƒä¿®æ”¹

    :close      å…³é—­å½“å‰çª—å£
    :only       åªæ˜¾ç¤ºå½“å‰çª—å£, å…³é—­æ‰€æœ‰å…¶ä»–çš„çª—å£

bufferçŠ¶æ€

    - ï¼ˆéæ´»åŠ¨çš„ç¼“å†²åŒºï¼‰
    a ï¼ˆå½“å‰è¢«æ¿€æ´»ç¼“å†²åŒºï¼‰
    h ï¼ˆéšè—çš„ç¼“å†²åŒºï¼‰
    % ï¼ˆå½“å‰çš„ç¼“å†²åŒºï¼‰
    # ï¼ˆäº¤æ¢ç¼“å†²åŒºï¼‰
    = ï¼ˆåªè¯»ç¼“å†²åŒºï¼‰
    + ï¼ˆå·²ç»æ›´æ”¹çš„ç¼“å†²åŒºï¼‰

ä¼ ç»Ÿ vim é»˜è®¤ä½¿ç”¨ä¸€ä¸ªçª—å£æ˜¾ç¤ºæ–‡ä»¶ï¼Œæ‰€ä»¥åªèƒ½æ¥å›åˆ‡æ¢ç¼“å†²åŒºä»¥å±•ç¤ºä¸åŒçš„æ–‡ä»¶ã€‚

åæ¥çš„ç‰ˆæœ¬æ”¯æŒåˆ†å±å¤šçª—å£å±•ç¤ºä¸åŒçš„æ–‡ä»¶ã€‚

æ–°ç‰ˆçš„ vim æ”¯æŒä½¿ç”¨å¤šæ ‡ç­¾tabï¼Œå³ç”¨æ ‡ç­¾é¡µå®ç°å¤šçª—å£çš„ä¸€ç»„ï¼Œè¿™æ—¶å½“å‰çª—å£å±•ç°çš„æŸä¸ªå†…ç¼“å†²åŒºï¼Œå…³é—­å½“å‰çª—å£å¯èƒ½ä¼šåˆ‡æ¢åˆ°å…¶ä»–æ ‡ç­¾é¡µçš„çª—å£ã€‚

##### åˆ†å±å¤šçª—å£(Window)æ“ä½œ

åœ¨ vim æœ¯è¯­ä¸­ï¼Œçª—å£æ˜¯ç¼“å†²åŒºçš„æ˜¾ç¤ºåŒºåŸŸï¼Œçª—å£ä¸ç¼“å†²åŒº(æ–‡ä»¶)å¹¶éä¸€ä¸€å¯¹åº”çš„å…³ç³»ï¼šæ—¢å¯ä»¥æ‰“å¼€å¤šä¸ªçª—å£ï¼Œåœ¨è¿™äº›çª—å£ä¸­æ˜¾ç¤ºåŒä¸€ä¸ªç¼“å†²åŒº(æ–‡ä»¶)ï¼Œä¹Ÿå¯ä»¥åœ¨æ¯ä¸ªçª—å£é‡Œè½½å…¥ä¸åŒçš„ç¼“å†²åŒº(æ–‡ä»¶)ã€‚å³çª—å£åªæ˜¯å±•ç¤ºæŸä¸ªæ–‡ä»¶ï¼Œå…³é—­æ–‡ä»¶ä¸å¯¹åº”å…³é—­çª—å£ã€‚åˆ‡æ¢æ˜¾ç¤ºæ–‡ä»¶éƒ½æ˜¯åœ¨åŒä¸€ä¸ªçª—å£å†…ï¼Œåˆ‡æ¢çš„æ˜¯ç¼“å†²åŒºè€Œä¸æ˜¯çª—å£ã€‚

    :sp   å½“å‰çª—å£æ°´å¹³åˆ‡åˆ†ä¸ºä¸¤ä¸ªçª—å£ï¼Œæˆ– :split
    :vs   å½“å‰çª—å£å‚ç›´åˆ‡åˆ†ä¸ºä¸¤ä¸ªçª—å£ï¼Œæˆ– :vsp :vsplit
    ä¸Šè¿°ä¸¤ä¸ªå‘½ä»¤åè·Ÿæ–‡ä»¶åä¼šåœ¨æ–°çª—å£æ‰“å¼€è¯¥æ–‡ä»¶

    å‰å¯¼ Ctrl+wï¼Œç„¶å æ–¹å‘é”®        åˆ‡æ¢åˆ°å‰/ä¸‹/ä¸Š/åä¸€ä¸ªçª—å£
    å‰å¯¼ Ctrl+wï¼Œç„¶å  h/j/k/l     åŒä¸Š
    å‰å¯¼ Ctrl+wï¼Œç„¶å  w           ä¾æ¬¡å‘ååˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªçª—å£ä¸­

    :q      å…³é—­å½“å‰çª—å£

    :qall    å¯¹æ‰€æœ‰çª—å£æ‰§è¡Œ :q  æ“ä½œ
    :qall!   å¯¹æ‰€æœ‰çª—å£æ‰§è¡Œ :q! æ“ä½œ
    :wall    å¯¹æ‰€æœ‰çª—å£æ‰§è¡Œ :w  æ“ä½œ
    :wqall   å¯¹æ‰€æœ‰çª—å£æ‰§è¡Œ :wq æ“ä½œ

##### å¤šæ ‡ç­¾é¡µ(Tab)æ“ä½œ

åœ¨ Windows çš„æ–‡æœ¬ç¼–è¾‘å™¨ä¸­ï¼Œä¸€ä¸ªæ ‡ç­¾é¡µå¯¹åº”ä¸€ä¸ªçª—å£ä¹Ÿå°±å¯¹åº”äº†ä¸€ä¸ªæ–‡ä»¶ï¼Œå¤šä¸ªæ ‡ç­¾é¡µå¯¹åº”çš„æ˜¯å¤šä¸ªçª—å£ä¹Ÿå°±å¯¹åº”äº†å¤šä¸ªæ–‡ä»¶ã€‚åœ¨ Vim ä¸­ï¼Œæ ‡ç­¾é¡µæœ¬è´¨æ˜¯çª—å£å¸ƒå±€çš„å®¹å™¨ï¼ˆç±»ä¼¼å·¥ä½œåŒºï¼‰ã€‚Vim ä¸­å®ç°çš„æ ‡ç­¾é¡µç”¨äºåƒç°ä»£ç¼–è¾‘å™¨ä¸€æ ·ç”¨æ ‡ç­¾ï¼ˆTABï¼‰æ¥ç®¡ç†å¤šä¸ªçª—å£ï¼Œè¿›è€Œå¯¹åº”æ˜¾ç¤ºå¤šä¸ªæ–‡ä»¶ï¼Œç†è§£æˆä¸€ä¸ªæ ‡ç­¾é¡µæ˜¯ä¸€ç»„çª—å£ã€‚å…¶å® vim çš„ä¸åŒæ ‡ç­¾é¡µä»å¯ä»¥å…±äº«åŒä¸€ä¸ªç¼“å†²åŒºï¼Œä¾‹å¦‚åœ¨ä¸¤ä¸ªæ ‡ç­¾é¡µä¸­çš„çª—å£æŸ¥çœ‹åŒä¸€æ–‡ä»¶ã€‚

æŠŠ vim çš„æ¯ä¸ªæ ‡ç­¾é¡µç†è§£ä¸ºä¸€ä¸ª vim çš„å®ä¾‹å³å¯

    :tabn       ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªæ ‡ç­¾é¡µ æˆ– æ™®é€šæ¨¡å¼ç›´æ¥è¾“å…¥ gt
    :tabp       ç§»åŠ¨åˆ°ä¸Šä¸€ä¸ªæ ‡ç­¾é¡µ æˆ– æ™®é€šæ¨¡å¼ç›´æ¥è¾“å…¥ gT

    :tabfirst   ç§»åŠ¨åˆ°ç¬¬ä¸€ä¸ªæ ‡ç­¾é¡µ
    :tablast    ç§»åŠ¨åˆ°æœ€åä¸€ä¸ªæ ‡ç­¾é¡µ

    :help tab-page-intro æ ‡ç­¾é¡µä½¿ç”¨çš„å¸®åŠ©ä¿¡æ¯

    :tabnew          æ–°å»ºæ ‡ç­¾é¡µ
    :tabe filename   ç”¨æ ‡ç­¾é¡µæ‰“å¼€æ–‡ä»¶
    :tabnew filename ç”¨æ ‡ç­¾é¡µæ‰“å¼€æ–‡ä»¶

    :tabs       æ˜¾ç¤ºå·²æ‰“å¼€æ ‡ç­¾é¡µçš„åˆ—è¡¨
    :tabc       å…³é—­å½“å‰æ ‡ç­¾é¡µï¼ŒåŠŸèƒ½ç­‰åŒäº :q
    :tabo       å…³é—­æ‰€æœ‰æ ‡ç­¾é¡µ
    :tabm 0/1/2 å°†å½“å‰æ ‡ç­¾é¡µç§»åŠ¨åˆ°ç¬¬1/2/3ä¸ªé¡µé¢ä½ç½®

æ³¨æ„ï¼š

    ç†è®ºä¸Šï¼Œæ¯æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶å°±åº”è¯¥å»ºç«‹ä¸€ä¸ªæ ‡ç­¾é¡µå¯¹åº”ä¸€ä¸ªçª—å£ã€‚ä½†æ˜¯ç°åœ¨ vim æ‰“å¼€å¤šä¸ªæ–‡ä»¶å¹¶ä¸ä¼šé»˜è®¤å»ºç«‹å¤šä¸ªæ ‡ç­¾é¡µï¼Œè€Œæ˜¯éƒ½åœ¨åŒä¸€ä¸ªæ ‡ç­¾é¡µä¸­ï¼Œå³ä¿æŒ vi å†å²ä¹ æƒ¯ï¼Œå¤šä¸ªæ–‡ä»¶å…¬ç”¨çš„ç¼“å†²åŒºåœ¨ä¸€ä¸ªçª—å£å†…æ˜¾ç¤ºã€‚

    æ–°å»ºæ ‡ç­¾é¡µç›¸å½“äºå¤šäº†è‡³å°‘ä¸€ä¸ªçª—å£ï¼Œä½¿ç”¨æ—¶è¦å…ˆè€ƒè™‘å½“å‰çª—å£å¯¹åº”çš„å“ªä¸ªæ ‡ç­¾é¡µï¼Œåˆ‡æ¢æ ‡ç­¾é¡µæ—¶çª—å£ä¹Ÿæ˜¯åˆ‡æ¢çš„ï¼Œå…¶åŠ è½½çš„ç¼“å†²åŒºå¯èƒ½æ˜¯ä¸åŒçš„ã€‚

###### ä½¿ç”¨ alt+æ•°å­—é”® æ¥åˆ‡æ¢ tab æ ‡ç­¾é¡µ

å‰å¯¼é”®ä½¿ç”¨ alt å®¹æ˜“è·Ÿæ¡Œé¢ç»ˆç«¯æ¨¡æ‹Ÿå™¨çƒ­é”®å†²çªï¼Œæˆ‘ä½¿ç”¨ vim-airline è‡ªå¸¦çš„æ ‡ç­¾é¡µåŠŸèƒ½çš„è‡ªå®šä¹‰å‰å¯¼é”®è¿›è¡Œåˆ‡æ¢ï¼Œè¯¦è§ç« èŠ‚ [.vimrcé…ç½®æ–‡ä»¶æ ·ä¾‹]ã€‚

æ ¹æ®ä¸‹é¢è¿™ä¸ªæ–‡ç« æˆ‘è‡ªå®šä¹‰çƒ­é”®ç”¨ Alt æ€»æ˜¯è®¾ç½®ä¸ä¸Šï¼Œç”¨çš„ Ctrl+w è§£å†³äº†ï¼Œä¸çŸ¥é“å’‹å›äº‹ï¼Œå¾…ç ”ç©¶

    https://blog.csdn.net/ghostyusheng/article/details/77893780

æˆ–è‡ªå®šä¹‰

ç”¨ gt, gT æ¥ä¸€ä¸ªä¸ªåˆ‡æ¢æœ‰ç‚¹ä¸æ–¹ä¾¿, å¦‚æœç”¨ :tabnext {count}, åˆæŒ‰é”®å¤ªå¤š.

å¯ä»¥ç”¨ alt + n æ¥åˆ‡æ¢tabæ ‡ç­¾, æ¯”å¦‚æŒ‰ alt + 1 åˆ‡æ¢åˆ°ç¬¬ä¸€ä¸ª tabï¼ŒæŒ‰ alt + 2 åˆ‡æ¢åˆ°ç¬¬äºŒä¸ª tabã€‚

æŠŠä»¥ä¸‹ä»£ç åŠ åˆ°ä½ çš„ .vimrc æ–‡ä»¶, æˆ–è€…å­˜ä¸º .vim æ–‡ä»¶ï¼Œç„¶åæ”¾åˆ° plugin ç›®å½•

```vim

function ! TabPos_ActivateBuffer(num)
     let  s:count = a:num
     exe  "tabfirst"
     exe  "tabnext"  s:count
endfunction

function ! TabPos_Initialize()
for  i  in  range(1, 9)
         exe  "map <M-"  . i .  "> :call TabPos_ActivateBuffer(" . i .  ")<CR>"
     endfor
     exe  "map <M-0> :call TabPos_ActivateBuffer(10)<CR>"
endfunction

autocmd VimEnter * call TabPos_Initialize()

```

ä¸Šé¢çš„çœ‹ä¸Šå»å¤ªå¤æ‚äº†ï¼Œæ¥ä¸ªç®€å•çš„

```vim

    " ç”¨ alt + n æ¥åˆ‡æ¢tabæ ‡ç­¾
    :nn <M-1> 1gt
    :nn <M-2> 2gt
    :nn <M-3> 3gt
    :nn <M-4> 4gt
    :nn <M-5> 5gt
    :nn <M-6> 6gt
    :nn <M-7> 7gt
    :nn <M-8> 8gt
    :nn <M-9> 9gt
    :nn <M-0> :tablast<CR>

```

#### vim æ‰§è¡Œshellå‘½ä»¤

ç®€å•çš„shellï¼Œåˆ‡æ¢å› vim éœ€è¦åœ¨ shell ä¸‹è¾“å…¥æ–‡å­—

    åœ¨æ™®é€šæ¨¡å¼ä¸‹è¾“å…¥ ":sh"ï¼Œå¯ä»¥è¿è¡Œä¸€ä¸ªshellï¼Œæƒ³å›åˆ°vimç¼–è¾‘å™¨ä¸­ç”¨`exit`æˆ–`ctrl+D`è¿”å›vimç¼–è¾‘å™¨ï¼Œè¯¥shellæ¶ˆå¤±

    åœ¨æ™®é€šæ¨¡å¼ä¸‹è¾“å…¥ ":!xxx"ï¼Œåœ¨å½“å‰ç›®å½•ä¸‹è¿è¡ŒæŒ‡å®šçš„å‘½ä»¤xxxï¼Œè¿è¡Œç»“æŸåè‡ªåŠ¨å›åˆ° vim ç¼–è¾‘å™¨ä¸­

    ç”¨ "Ctrl+Z" å›åˆ°å¯åŠ¨ vim çš„ shellï¼Œç”¨ `fg` è¿”å› vim ç¼–è¾‘å™¨ä¸­

æ–°å»ºæ‹†åˆ†çª—å£ï¼Œå†…åµŒ terminal è¿™ä¸ªæ–°åŠ çš„åŠŸèƒ½æ›´ç›´è§‚ï¼š

å†™å®Œä»£ç æƒ³æµ‹è¯•ä¸€ä¸‹ï¼Œæœ‰å‡ ä¸ªæ–¹æ³•ï¼šä¿å­˜å¹¶é€€å‡ºvimï¼Œç„¶åè¿è¡Œï¼Œæˆ–æ‰§è¡Œç« èŠ‚ [å‘½ä»¤è¡Œæ¨¡å¼] ä¸­ä»‹ç»çš„â€œæ‰§è¡Œshellå‘½ä»¤â€çš„å‡ ä¸ªæ–¹æ³•ï¼Œéƒ½å¤ªç¹çä¸ç›´è§‚ã€‚

è‡ªä»vim 8.1ç‰ˆæœ¬åï¼Œæ”¯æŒäº†ä¸€ä¸ªæ–°çš„å‘½ä»¤ :ter æˆ– :terminalï¼Œåœ¨vimä¸­æ‹†åˆ†çª—å£æ‰“å¼€ä¸€ä¸ªshellï¼Œæ‰€ä»¥ä½¿ç”¨åˆ‡æ¢æ‹†åˆ†çª—å£çš„å¿«æ·é”®æ¥åœ¨ä½ çš„æ–‡æœ¬çª—å£å’Œç»ˆç«¯çª—å£ä¸­åˆ‡æ¢å³å¯ã€‚

è¯¦ç»†å†…å®¹å‚çœ‹

    :help terminal

æš‚æ—¶å…³é—­/éšè—è¿™ä¸ªterminalçª—å£ï¼Œè€Œä¸å¸Œæœ›shellä¸­çš„å·¥ä½œè¢«æ€æ­»ï¼Œæˆ–è€…ä¸€äº›ä¸œè¥¿æ¶ˆå¤±ï¼ˆå°±æ¯”å¦‚å½“å‰è¿›å…¥çš„æŸä¸ªåŠå…¶æ·±çš„ç›®å½•ï¼Œæˆ–è€…activateçš„æŸä¸ªcondaç¯å¢ƒï¼‰

    æŒ‰ Ctrl+w å¹¶è¾“å…¥ :hide ã€‚æ³¨æ„ Ctrl+w åç›´æ¥è¾“å…¥å‘½ä»¤ï¼Œä¸è¦åˆ‡æ¢åˆ°æ–‡æœ¬çª—å£è¾“å…¥å‘½ä»¤

è¦æ¢å¤è¿™ä¸ªéšè—äº†çš„çª—å£ï¼Œéœ€è¦å…ˆçŸ¥é“å®ƒåœ¨å“ªä¸ª bufferã€‚åœ¨æ–‡æœ¬çª—å£è¾“å…¥å‘½ä»¤

    :ls

ç„¶åä½¿ç”¨ :buffer å‘½ä»¤åˆ‡æ¢ï¼Œå› ä¸ºè¿™ä¸ªå‘½ä»¤ä¼šåœ¨å½“å‰çª—å£æ‰“å¼€bufferï¼Œæ‰€ä»¥è¦æå‰splitæˆ–vsplitä¸€ä¸ªæ–°çš„çª—å£ï¼Œç„¶åæ ¹æ®bufferçš„åºå·ï¼Œæ¯”å¦‚2ï¼Œè¾“å…¥å‘½ä»¤

    :buffer 2

å…³é—­è¿™ä¸ªterminal

    [Ctrl+w]:quit!

è¦åŠ !ï¼Œå› ä¸ºvimè®¤ä¸ºè¿™ä¸ªå·¥ä½œæ²¡æœ‰ç»“æŸï¼Œä¸èƒ½è¿™ä¹ˆè½»æ˜“åœ°å…³äº†ã€‚

ä»¥ç‰¹å®šé«˜åº¦/è¡Œæ•°æ‰“å¼€

    :ter ++rows=2

#### vim ä½¿ç”¨é¼ æ ‡

é¼ æ ‡å³é”®ä¸èƒ½ç²˜è´´è€Œæ˜¯è¿›å…¥äº† visual æ¨¡å¼

è§£å†³æ–¹æ³•ä¸€

    # ç¦ç”¨é¼ æ ‡
    :set mouse-=a

    # æˆ–ç¼–è¾‘ ~/.vimrc æ–‡ä»¶ï¼ŒåŠ å…¥å¦‚ä¸‹ä»£ç ï¼š
    if has('mouse')
        set mouse-=a
    endif

è§£å†³æ–¹æ³•äºŒ

    é¼ æ ‡é€‰æ‹©åä½¿ç”¨å¿«æ·é”® p ç²˜è´´

é¼ æ ‡æ¨¡å¼ :

    set mouse= è®¾ç½®åœ¨ä½•ç§æ¨¡å¼ä¸‹è¿›å…¥é¼ æ ‡æ¨¡å¼

    n   æ™®é€šæ¨¡å¼
    v   å¯è§†æ¨¡å¼
    i   æ’å…¥æ¨¡å¼
    c   å‘½ä»¤è¡Œæ¨¡å¼
    h   åœ¨å¸®åŠ©æ–‡ä»¶é‡Œï¼Œä»¥ä¸Šæ‰€æœ‰æ¨¡å¼
    a   ä»¥ä¸Šæ‰€æœ‰æ¨¡å¼
    r   è·³è¿‡|lit-enter|æç¤º
    A   åœ¨å¯è§†æ¨¡å¼ä¸‹è‡ªåŠ¨é€‰æ‹©

ç¼ºçœå€¼ä¸ºç©ºï¼Œå³ä¸è¿›å…¥é¼ æ ‡æ¨¡å¼ï¼Œè¿™æ—¶çš„é¼ æ ‡å“åº”:ç”¨é¼ æ ‡åœ¨ vim ä¸­é€‰æ‹©ï¼Œä¼šè¿›å…¥å¯è§†æ¨¡å¼ï¼Œä½†ç‚¹å‡»å³é”®ä¼šè§¦å‘ç»ˆç«¯å·¥å…·çš„å³é”®èœå•æ“ä½œï¼Œè€Œä¸æ˜¯è§¦å‘vimè‡ªå·±çš„çƒ­é”®æ“ä½œã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé»˜è®¤æƒ…å†µä¸‹ç‚¹å‡»æ‹–åŠ¨é¼ æ ‡è¿›å…¥çš„è¿™ä¸ªå¯è§†æ¨¡å¼ï¼Œvim ä¸ä¼šå“åº”çƒ­é”®åšyå¤åˆ¶ã€dåˆ é™¤ç­‰æ“ä½œã€‚

å¦‚æœè¿›è¡Œäº†è®¾ç½®ï¼Œåˆ™åœ¨å¯¹åº”çš„æ¨¡å¼ä¸‹ç‚¹å‡»æ‹–åŠ¨é¼ æ ‡åï¼Œä½ å¯ä»¥ä½¿ç”¨vimçƒ­é”®äº†ã€‚

    # ç­‰ä»·äº mouse=nvich
    :set mouse=a

    # å…³é—­é¼ æ ‡åŠŸèƒ½
    :set mouse-=a
    æˆ–
    :set mouse=""

    # è®¾ç½®é¼ æ ‡åœ¨æ™®é€šæ¨¡å¼å’Œå¯è§†æ¨¡å¼ä¸‹å·¥ä½œ
    :set mouse=nv

é¼ æ ‡èƒ½å¦åœ¨å¯è§†æ¨¡å¼æˆ–è€…é€‰æ‹©æ¨¡å¼ä¸‹å¼€å§‹é€‰æ‹©ï¼Œå†³å®šäº "selectmode" é€‰é¡¹åŒ…ä¸åŒ…æ‹¬"mouse"ã€‚

æ‰€ä»¥ï¼Œå¦‚æœä½ å¼€å¯äº†é¼ æ ‡åŠŸèƒ½ï¼Œåˆ™åœ¨é¼ æ ‡é€‰æ‹©è¿›å…¥çš„å¯è§†æ¨¡å¼ä¸‹å¤åˆ¶/ç²˜è´´ï¼Œæ“ä½œæ¨¡å¼å¦‚ä¸‹

    åœ¨æ–‡æœ¬çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸ŠæŒ‰é¼ æ ‡å·¦é”®ï¼Œæ‹–åŠ¨é¼ æ ‡åˆ°æ–‡æœ¬çš„æœ€åä¸€ä¸ªå­—æ¯ï¼Œç„¶åé‡Šæ”¾å·¦é”®ã€‚è¿™ä¼šå¯åŠ¨å¯è§†æ¨¡å¼å¹¶é«˜äº®é€‰æ‹©åŒºåŸŸã€‚

    æŒ‰ "y" æŠ½å‡ºå¯è§†æ–‡æœ¬åˆ° vim æ— åå¯„å­˜å™¨é‡Œã€‚

    ç§»åŠ¨å…‰æ ‡åˆ°è¦æ’å…¥çš„ä½ç½®ï¼Œæˆ–æŒ‰é¼ æ ‡å·¦é”®é€‰æ‹©æ’å…¥ä½ç½®ï¼Œå…‰æ ‡åœ¨æ­¤å¤„é—ªåŠ¨ã€‚

    æŒ‰é¼ æ ‡ä¸­é”®ï¼ˆæ»šè½®ï¼‰ï¼Œæˆ–æŒ‰ p é”®ç²˜è´´ã€‚

è‡ªå®šä¹‰é¼ æ ‡æ»šè½®çš„æ“ä½œï¼Œä¹Ÿéœ€è¦å¼€å¯é¼ æ ‡æ¨¡å¼æ‰èƒ½æœ‰æ•ˆè®¾ç½®ã€‚

    " ç”¨é¼ æ ‡æ»šè½®æ»šå±
    set mouse=a
    map <ScrollWheelUp> <C-Y>
    map <ScrollWheelDown> <C-E>

ä¸è¦ä½¿ç”¨æ¨¡ä»¿ Windows é¼ æ ‡ä¹ æƒ¯çš„ä¸€ä¸ª mswin.vimï¼Œ å¦‚â€œCtrl + Aâ€å…¨é€‰ã€ â€œCtrl + Câ€å¤åˆ¶ã€ â€œCtrl + Vâ€ç²˜è´´ç­‰ç­‰ï¼Œ è¿™äº›å¿«æ·é”®ä¸vimæœ¬èº«çš„å¿«æ·é”®æœ‰ä¸å°‘æ˜¯å†²çªçš„ï¼šéƒ¨åˆ†åŸæœ‰çš„å¿«æ·é”®æ˜ å°„æˆäº†åˆ«çš„é”®ï¼Œ ä¾‹å¦‚æŠŠâ€œCtrl + Vâ€(çŸ©å½¢å—é€‰æ‹©)æ”¹æˆäº†ç²˜è´´ï¼Œ è€ŒåŸæœ‰çš„â€œCtrl + Vâ€æ”¹æˆäº†â€œCtrl + Qâ€ï¼› è¿˜æœ‰éƒ¨åˆ†å¿«æ·é”®å°±å½»åº•æ²¡æœ‰äº†ï¼Œ å¦‚åŸæœ‰çš„â€œCtrl + Aâ€(å°†å½“å‰å…‰æ ‡æ‰€åœ¨çš„æ•°å­—åŠ  1)æ”¹æˆäº†å…¨é€‰ï¼Œ è€ŒåŸæœ‰çš„ç›¸åº”åŠŸèƒ½å°±æ‰¾ä¸åˆ°äº†

    :behave mswin

##### æœåŠ¡å™¨vimå¤åˆ¶åˆ°æœ¬åœ°å‰ªè´´æ¿

å½“é€šè¿‡ç»ˆç«¯å·¥å…·ç”¨ ssh è¿æ¥åˆ° linux æœåŠ¡å™¨ä¸Šä½¿ç”¨ vim æ—¶ï¼Œä½¿ç”¨çƒ­é”®yåªèƒ½å¤åˆ¶åˆ°vimçš„å¯„å­˜å™¨ï¼Œæ— æ³•å¤åˆ¶åˆ°ç”¨æˆ·ç»ˆç«¯æ‰€åœ¨çš„æœ¬åœ°æ“ä½œç³»ç»Ÿçš„å‰ªè´´æ¿ã€‚

ç®€å•çš„æ–¹æ³•

ä¸€èˆ¬ç»ˆç«¯å·¥å…·ï¼Œåœ¨å‘½ä»¤è¡Œæ—¶çš„é»˜è®¤è¡Œä¸ºæ˜¯ x-Window ä¸‹çš„ï¼Œé¼ æ ‡é€‰æ‹©å³å¤åˆ¶ï¼Œä¸­é”®ï¼ˆæˆ–å³é”®æˆ– shift+insï¼‰ç²˜è´´ï¼Œè¿™ä¸ªæ˜¯æ“ä½œç³»ç»Ÿå‰ªè´´æ¿ã€‚

åœ¨ vim ä¸­ï¼Œç”¨é¼ æ ‡é€‰æ‹©ï¼Œé»˜è®¤ä¼šè¿›å…¥å¯è§†æ¨¡å¼è¿›è¡Œå¤šé€‰ï¼Œç„¶åæŒ‰å³é”®ï¼Œåœ¨ç»ˆç«¯å·¥å…·çš„å¼¹å‡ºèœå•é€‰ï¼šå¤åˆ¶ï¼Œè¿™æ ·å³å¯å¤åˆ¶åˆ°ç³»ç»Ÿå‰ªè´´æ¿ã€‚ç„¶åå¯ä»¥åœ¨æ–‡æœ¬ç¼–è¾‘æ¨¡å¼ä¸‹ï¼Œç”¨ shift+ins æ¥ç²˜è´´äº†ï¼Œè¿™ä¸ªä¹Ÿæ˜¯è¯»å–çš„ç³»ç»Ÿå‰ªè´´æ¿ã€‚

å¤æ‚çš„æ–¹æ³•

cmd + c

ç”¨é¼ æ ‡é€‰ä¸­æ–‡å­—cmd + cå¤åˆ¶ï¼ˆwindowsä¸‹ctrl + cå¤åˆ¶ï¼‰ï¼Œcmd + vç²˜è´´åˆ°æœ¬åœ°ã€‚è¿™ä¸ªæ–¹æ³•æ˜¯æœ€è‡ªç„¶çš„ï¼Œä½†æ˜¯æƒ³è¦ç”¨è¿™ä¸ªæ–¹æ³•æœ‰å‡ ä¸ªå‰æï¼š

vimé…ç½®ä¸­å¼€å¯é¼ æ ‡æ”¯æŒï¼Œ.vimrcæ–‡ä»¶ä¸­åŠ ä¸Š

    set mouse=a

ç»ˆç«¯å·¥å…·å…³é—­mouse reportingé€‰é¡¹ï¼Œå¦åˆ™é¼ æ ‡ç‚¹å‡»vimç•Œé¢ä¼šè¿›å…¥visualæ¨¡å¼ã€‚

å¦‚æœä½¿ç”¨tmuxï¼Œtmuxéœ€è¦é…ç½®æ”¯æŒé¼ æ ‡æ»šè½®ï¼Œå¦åˆ™æœ€å¤šåªèƒ½å¤åˆ¶å½“å‰é¡µé¢çš„å†…å®¹

å†·é—¨ç‚¹çš„è§£å†³åŠæ³•ï¼šæœ¬åœ° vim é€šè¿‡ scp ç¼–è¾‘è¿œç¨‹æ–‡ä»¶

ä½¿ç”¨æœ¬åœ°vim(è¦æ±‚æœ¬æœºæ˜¯linux)é€šè¿‡scpç›´æ¥ç¼–è¾‘è¿œç¨‹æ–‡ä»¶ã€‚è¿™æ ·å°±å¯ä»¥ä½¿ç”¨æœ¬åœ°å¯„å­˜å™¨"+y"å¤åˆ¶äº†ã€‚è¿™ç§æ–¹æ³•å¯¹è¿œç¨‹vimé…ç½®æ²¡æœ‰è¦æ±‚ã€‚

    vim scp://remoteuser@server.com//absolute/path/to/file

æ³¨æ„ com å’Œ absolute é—´æ˜¯ä¸¤ä¸ªåæ–œæ //å¹¶ä¸æ˜¯æ•²é”™äº†ã€‚

#### vimå¯„å­˜å™¨--åˆ é™¤æ˜¯å‰ªåˆ‡æ“ä½œ

    vimä¸­æ²¡æœ‰åˆ é™¤ï¼Œå®é™…ä¸Šéƒ½æ˜¯å‰ªåˆ‡ï¼Œé»‘æ´å¯„å­˜å™¨é™¤å¤–

ä½ ä»¥ä¸ºç”¨ xã€dwã€dd è¿™ç§çƒ­é”®æ˜¯åˆ é™¤å†…å®¹ï¼Œå…¶å®è¯¥å†…å®¹ä¼šæ›¿æ¢åˆ°æœ€è¿‘çš„æ— åå¯„å­˜å™¨ã€‚

    å¦‚æœå¤åˆ¶äº†å†…å®¹æƒ³æ›¿æ¢ï¼Œç›´æ¥ ctrl+v è¿›å…¥å¯è§†æ¨¡å¼ï¼Œé€‰å¥½äº†ä¹‹åç›´æ¥æŒ‰ p ç²˜è´´å³å¯è¦†ç›–åŸå†…å®¹ã€‚

æµ‹è¯•æ–‡ä»¶

    echo abc > test.txt
    echo xyz >> test.txt

æ¯”å¦‚ï¼Œä½ å¤åˆ¶äº†"abc"ï¼Œæƒ³æ›¿æ¢æ–‡ä»¶ä¸­çš„"xyz"ã€‚

å¦‚æœä½ çš„æ“ä½œæ˜¯

    å…ˆ v y å¤åˆ¶"abc"ï¼Œç„¶å dw åˆ é™¤"xyz"ï¼Œç„¶åæŒ‰ p ç²˜è´´ï¼Œä½ ä¼šå‘ç°ç²˜è´´çš„è¿˜æ˜¯"xyz"

åŸå› æ˜¯

    ä½ æ‰§è¡Œçš„ yy å‘½ä»¤ å…¶å®æ˜¯ ""yyï¼Œä¸æŒ‡å®šå°±æ˜¯é»˜è®¤çš„æ— åå¯„å­˜å™¨

    ç„¶åæ‰§è¡Œ dd å‘½ä»¤æ—¶ï¼Œvim æŠŠåˆ é™¤çš„å†…å®¹æ”¾åˆ°æ— åå¯„å­˜å™¨ï¼Œè¦†ç›–äº†ä¹‹å‰å¤åˆ¶çš„å†…å®¹

    æœ€ç»ˆæ‰§è¡Œ p å‘½ä»¤æ—¶ï¼Œé»˜è®¤ç²˜è´´çš„æ˜¯æ— åå¯„å­˜å™¨çš„å†…å®¹ï¼Œè€Œè¿™å·²ç»ä¸æ˜¯ yy å‘½ä»¤å¤åˆ¶çš„é‚£ä¸ªå†…å®¹äº†

æ‰€ä»¥ï¼Œåœ¨ vim ä¸­åˆ é™¤ç„¶åç²˜è´´çš„æ“ä½œæ˜¯æœ‰é¡ºåºä¾èµ–çš„

    å…ˆ dw åˆ é™¤"xyz"ï¼Œç„¶å v é€‰æ‹©"abc"ç„¶å y å¤åˆ¶ï¼Œç„¶åæŒ‰ p ç²˜è´´ï¼Œä½ æ‰èƒ½ç²˜è´´ä¸Š"abcâ€œ

æˆ–è€…ç²˜è´´çš„æ—¶å€™ï¼ŒæŒ‡å®š "0å¤åˆ¶å¯„å­˜å™¨ï¼Œç„¶åç²˜è´´æ“ä½œå³å¯

    "0p ç²˜è´´å¤åˆ¶å¯„å­˜å™¨çš„å†…å®¹

ç³»ç»Ÿå¯„å­˜å™¨åˆ—è¡¨

    :reg

    Name       Content
    ""       xã€sã€d{motion}ã€c{motion} å’Œ y{motion} æŒ‡ä»¤éƒ½ä¼šè¦†ç›–æ— åå¯„å­˜å™¨ä¸­çš„å†…å®¹ï¼ŒæŒ‰pä¼šç²˜è´´å›å»
    "0       ä¿å­˜ y{motion} æŒ‡ä»¤å¤åˆ¶çš„å†…å®¹
    "1       104.188^Jï¼Œå¤åˆ¶å¯„å­˜å™¨1
    "2       4.117^Jï¼Œå¤åˆ¶å¯„å­˜å™¨2
    ......
    "-       ä¸Šä¸€æ¬¡åˆ é™¤çš„æ–‡æœ¬
    ".       ä¸Šä¸€æ¬¡æ’å…¥çš„æ–‡æœ¬
    "*       ç³»ç»Ÿå‰ªè´´æ¿
    "%       å½“å‰æ–‡ä»¶çš„åå­—
    "/       ä¸Šä¸€æ¬¡æŸ¥æ‰¾çš„å­—ç¬¦ä¸²
    ":       ä¸Šæ¬¡æ‰§è¡Œçš„å‘½ä»¤

æ™®é€šæ¨¡å¼ä¸‹ä½¿ç”¨å¯„å­˜å™¨ï¼Œç›´æ¥ä½¿ç”¨ "å¼€å¤´çš„å¯„å­˜å™¨åç§°åŠ å‘½ä»¤ æ“ä½œå³å¯

    "0p    ä»0å·å¯„å­˜å™¨ç²˜è´´å†…å®¹

    "+y    å°†å†…å®¹å¤åˆ¶åˆ°ç³»ç»Ÿå‰ªåˆ‡æ¿ä¸­ï¼Œä¾›å…¶ä»–ç¨‹åºä½¿ç”¨

    ä½¿ç”¨ç³»ç»Ÿå‰ªè´´æ¿ç²˜è´´è¿˜æ˜¯å…ˆè¿›å…¥æ–‡æœ¬æ¨¡å¼ï¼Œç„¶åæŒ‰ shift + Ins

    è¿™é‡Œè¯´çš„ç³»ç»Ÿå‰ªè´´æ¿ï¼Œé€šè¿‡ç»ˆç«¯å·¥å…·ï¼Œä½¿ç”¨çš„æ˜¯ç”¨æˆ·æ“ä½œç³»ç»Ÿçš„å‰ªè´´æ¿ã€‚

æ’å…¥æ¨¡å¼ä¸‹ä½¿ç”¨å¯„å­˜å™¨ï¼Œæ¯”å¦‚ï¼šåœ¨æ–‡æœ¬è¾“å…¥æ¨¡å¼ï¼Œä½¿ç”¨å¯„å­˜å™¨é‡Œçš„å†…å®¹

    ä½¿ç”¨å‰å¯¼é”® <C-r> å³å¯: <C-r>0  ä»0å·å¯„å­˜å™¨ç²˜è´´å†…å®¹

ç”¨ / è¾“å…¥æœç´¢å†…å®¹ æˆ– : å‘½ä»¤è¡Œæ¨¡å¼ éƒ½å¯ç”¨è¿™ä¸ªæ–¹æ³•ä½¿ç”¨å¯„å­˜å™¨é‡Œçš„å†…å®¹ã€‚

ä¹Ÿå¯ä»¥è®¾ç½® vim é»˜è®¤ä½¿ç”¨ç³»ç»Ÿå‰ªè´´æ¿ <https://www.cnblogs.com/huahuayu/p/12235242.html>

    ç¡®å®švimæ”¯æŒ +clipboardåï¼Œå¦‚æœæƒ³ y/p ç›´æ¥å’Œç³»ç»Ÿå‰ªè´´æ¿æ‰“é€šï¼Œå¯ä»¥åœ¨~/.vimrcä¸­åŠ ä¸Šä»¥ä¸‹é…ç½®ï¼‰ï¼š

        set clipboard^=unnamed,unnamedplus

    å…¶ä¸­unnamedä»£è¡¨ *å¯„å­˜å™¨ï¼Œunnamedplus ä»£è¡¨ +å¯„å­˜å™¨ã€‚åœ¨macç³»ç»Ÿä¸­ï¼Œä¸¤è€…éƒ½ä¸€æ ·ï¼›ä¸€èˆ¬åœ¨linuxç³»ç»Ÿä¸­+å’Œ*æ˜¯ä¸åŒçš„ï¼Œ+å¯¹åº”ctrl + c,ctrl + vçš„æ¡Œé¢ç³»ç»Ÿå‰ªè´´æ¿ï¼Œ*å¯¹åº”xæ¡Œé¢ç³»ç»Ÿçš„å‰ªè´´æ¿ï¼ˆç”¨é¼ æ ‡é€‰æ‹©å¤åˆ¶ï¼Œç”¨é¼ æ ‡ä¸­é”®ç²˜è´´ï¼‰ã€‚

å»ºè®®ç»™ vim å®‰è£…ä¸ªæ’ä»¶ï¼Œåœ¨æŒ‰åˆ°çƒ­é”® " æ—¶æ˜¾å¼å¯„å­˜å™¨å†…å®¹ï¼Œä¾¿äºä½¿ç”¨

    https://github.com/junegunn/vim-peekaboo

### tmux ä¸æ€•æ–­è¿çš„å¤šçª—å£å‘½ä»¤è¡Œ

tmux å¯ä»¥ä¿æŒå¤šä¸ªä¼šè¯ sessionï¼Œæ¯æ¬¡åœ¨å‘½ä»¤è¡Œè¿è¡Œ `tmux` å°±ä¼šæ–°å»ºä¸€ä¸ªä¼šè¯ï¼Œæ–°å»ºä¼šè¯é»˜è®¤æœ‰ä¸€ä¸ªçª—å£ window ä¸€ä¸ªé¢æ¿ paneï¼Œé¢æ¿ä¼šè‡ªåŠ¨è¿è¡Œä¸€ä¸ª shellã€‚

å¯ä»¥åœ¨ä¸€ä¸ªä¼šè¯é‡Œæ·»åŠ å¤šä¸ªçª—å£ï¼Œtmux çŠ¶æ€æ æ˜¾ç¤ºçš„å°±æ˜¯ "ä¼šè¯å·/çª—å£0/çª—å£1/çª—å£2/..." çš„å½¢å¼ã€‚

æ¯ä¸ªçª—å£åˆå¯ä»¥æ‹†åˆ†æˆå¤šä¸ªé¢æ¿ï¼Œåœ¨å±å¹•ä¸Šæ˜¯æ¨ªçº¿æˆ–ç«–çº¿åˆ†éš”æ˜¾ç¤ºçš„ï¼Œé¢æ¿å¯ä»¥åœ¨çª—å£ä¸­æœ‰å¤šç§æ’åˆ—ï¼Œæ¯ä¸ªé¢æ¿éƒ½è¿è¡Œä¸€ä¸ªshellã€‚

åªè¦ä¸ä¸»åŠ¨é€€å‡ºå½“å‰é¢æ¿çš„ shellï¼Œæˆ–é‡å¯è®¡ç®—æœºï¼Œä»»ä½•æ—¶å€™éƒ½å¯ä»¥é€šè¿‡è¿æ¥çš„æ–¹å¼å›åˆ°ä½ çš„ tmux æ“ä½œç•Œé¢ã€‚

ä»»æ„çš„é tmux shell éƒ½å¯ä»¥è¿æ¥ attach åˆ°å·²æœ‰ä¼šè¯ï¼Œæ”¯æŒå¤šäººåŒæ—¶è¿æ¥åˆ°åŒä¸€ä¸ªä¼šè¯ï¼Œäº’ç›¸çš„è¾“å…¥å¯è§ï¼Œç›¸å½“äºå…±äº«å±å¹•çš„å¤šäººç¼–ç¨‹ã€‚

    tmuxçš„ä½¿ç”¨æ–¹æ³•å’Œä¸ªæ€§åŒ–é…ç½® http://mingxinglai.com/cn/2012/09/tmux/

    Tmuxä½¿ç”¨æ‰‹å†Œ http://louiszhai.github.io/2017/09/30/tmux/

    http://man.openbsd.org/OpenBSD-current/man1/tmux.1

å¦‚æœæ„Ÿè§‰ tmux/screen ç”¨èµ·æ¥æ¯”è¾ƒéº»çƒ¦ï¼Œæœ‰ä¸ªå‰ç«¯æ›¿ä»£å“ï¼ˆåç«¯è°ƒç”¨ tmux è¿›ç¨‹ï¼‰

    https://github.com/dustinkirkland/byobu

    Zellij æ˜¯ rust å®ç°çš„ç«å“ https://github.com/zellij-org/zellij

> å¦‚æœé‡åˆ°æç¤ºæ— æ³•æ‰“å¼€ display:0 çš„é”™è¯¯

å¸¸è§äº ssh -X è¿æ¥è¿œç¨‹

    https://github.com/lljbash/tmux-update-display

å¦‚æœæ˜¯ tmux ä¸‹æ‰§è¡Œå‘½ä»¤ `glxinfo` æç¤ºè¯¥é”™è¯¯ï¼Œé€€å›åˆ°æ™®é€šçš„ç»ˆç«¯ä¸‹é‡æ–°æ‰§è¡Œ `glxinfo` å³å¯ã€‚

> tmux åœ¨ OSX ä¸‹æ°´åœŸä¸æœ

    https://www.economyofeffort.com/2013/07/29/reattach-to-user-namespace-the-fix-for-your-tmux-in-os-x-woes/

#### å®‰è£…

1.æ“ä½œç³»ç»Ÿä»“åº“å®‰è£…

    sudo apt install tmux

2.æºä»£ç ç¼–è¯‘å®‰è£…

    git clone --depth=1 https://github.com/tmux/tmux.git
    cd tmux
    sh autogen.sh
    ./configure && make

æœ‰ä¸ªå¥½å¿ƒäººæå–çš„ Msys2 é‡Œçš„ tmuxï¼Œå¯åœ¨ git for Widnows ç¯å¢ƒä¸‹ä½¿ç”¨

    https://github.com/hongwenjun/tmux_for_windows

#### å¸¸ç”¨å‘½ä»¤

    æŒ‰å®Œå‰å¯¼ ctrl+B åï¼Œå†æŒ‰å†’å·ï¼šè¿›å…¥å‘½ä»¤è¡Œæ¨¡å¼

è¿™äº›å‘½ä»¤åœ¨ tmux çš„ : å‘½ä»¤è¡Œæ¨¡å¼ä¸€æ ·å¯ä»¥ä½¿ç”¨

    tmux

        æ–°å»ºä¸€ä¸ªä¼šè¯ï¼Œå¹¶è¿æ¥åˆ°è¯¥ä¼šè¯

    tmux ls

        åˆ—å‡ºå½“å‰çš„ä¼šè¯ï¼ˆtmux sessionï¼‰ï¼Œä¸‹é¢è¡¨ç¤º0å·æœ‰2ä¸ªçª—å£

            0: 2 windows (created Tue Apr 13 17:28:34 2021)

    tmux new -s mydevelop

        åˆ›å»ºä¸€ä¸ªæ–°ä¼šè¯åä¸º mydevelopï¼Œå¹¶è¿æ¥åˆ°è¯¥ä¼šè¯

    tmux new -s share_with -t mydevelop

        åˆ›å»ºç»„çš„æ–¹æ³•æ˜¯åœ¨åˆ›å»ºç¬¬äºŒä¸ªsessionçš„æ—¶å€™ç”¨ -t target-session å°†å‰ä¸€ä¸ªsessionæŒ‡å®šä¸ºæ–°sessionçš„ç›®æ ‡sessionï¼Œè¿™æ ·ä¹Ÿæ˜¯è¿›å…¥åŒäººå…±ç”¨æ¨¡å¼ï¼Œä½†æ˜¯å¯ä»¥åˆ†åˆ«æŸ¥çœ‹ä¸åŒçš„çª—å£ã€‚<https://www.cnblogs.com/bamanzi/p/tmux-share-windows-between-sessions.html>

    #  ssh -t localhost tmux  a
    tmux new-session -s username -d

        æ–°å»ºä¸€ä¸ª tmux ä¼šè¯ ï¼Œåœ¨å¼€æœºè„šæœ¬ï¼ˆServiceç­‰ï¼‰ä¸­è°ƒåº¦ä¹Ÿä¸ä¼šå…³é—­
        https://stackoverflow.com/questions/25207909/tmux-open-terminal-failed-not-a-terminal

    tmux a

        è¿›å…¥tmuxï¼Œç›´æ¥è¿æ¥åˆ°ä¸Šæ¬¡é€€å‡ºå‰çš„é‚£ä¸ªä¼šè¯çš„é‚£ä¸ªçª—å£çš„é‚£ä¸ªé¢æ¿

    tmux a -t mydevelop

        è¿›å…¥tmuxï¼Œè¿æ¥åˆ°åä¸º mydevelop çš„ä¼šè¯ï¼Œå¦‚æœæœ‰äººå·²ç»è¿æ¥ï¼Œåˆ™è¿›å…¥åŒäººå…±ç”¨æ¨¡å¼ï¼Œäº’ç›¸æ“ä½œå¯è§

    tmux a -t 3

        è¿›å…¥tmuxï¼Œè¿æ¥åˆ°3å·ä¼šè¯

    tmux kill-session -t mydevelop

        ä¸ç”¨çš„ä¼šè¯å¯èƒ½æœ‰å¾ˆå¤šçª—å£ï¼ŒæŒ¨ä¸ªé€€å‡ºå¾ˆéº»çƒ¦ï¼Œç›´æ¥æ€æ‰ä¼šè¯ï¼Œmydevelop æ˜¯è¦æ€æ‰çš„ä¼šè¯åç§°

    tmux rename -t old_session_name new_session_name

        é‡å‘½åä¼šè¯

    # åˆ—å‡ºæ‰€æœ‰å¿«æ·é”®ï¼ŒåŠå…¶å¯¹åº”çš„ Tmux å‘½ä»¤
    tmux list-keys

    # åˆ—å‡ºæ‰€æœ‰ Tmux å‘½ä»¤åŠå…¶å‚æ•°
    tmux list-commands

    # åˆ—å‡ºå½“å‰æ‰€æœ‰ Tmux çš„ä¿¡æ¯
    tmux info

    # é‡æ–°åŠ è½½å½“å‰çš„ Tmux é…ç½®è€Œæ— éœ€é‡å¯ tmux è¿›ç¨‹
    tmux source-file ~/.tmux.conf

å¦‚æœ tmux æ˜¾ç¤ºçš„å†…å®¹ä¹±äº†ï¼Œç”¨ `reset` å‘½ä»¤ä¹Ÿå¤„ç†ä¸äº†ï¼Œé€€å‡ºæ‰€æœ‰çš„ä¼šè¯ï¼ŒåŒ…æ‹¬åå°è¿›ç¨‹ tmux server

    $ tmux kill-server

    ç„¶åé‡æ–°æ‰§è¡Œ tmux å‘½ä»¤å³å¯

ä½¿ç”¨ `tmux kill-server` å‘½ä»¤åï¼Œå†æ¬¡æ‰§è¡Œ tmux å‘½ä»¤å‡ºç° `server exited unexpectedly` çš„é”™è¯¯

    https://github.com/tmux/tmux/wiki/FAQ#tmux-exited-with-server-exited-unexpectedly-or-lost-server-what-does-this-mean

    $ cd /tmp
    $ rm -rf tmux-$(id -u)

    ç„¶åé‡æ–°æ‰§è¡Œ tmux å‘½ä»¤å³å¯

tmux è¿›ç¨‹æ­£åœ¨è¿è¡Œï¼Œä½†æ˜¯æ— æ³•è¿æ¥ â€œfailed to connect to server: Connection refusedâ€

    $ kill -s USR1 <tmuxè¿›ç¨‹id>
    $ tmux ls

#### å¿«æ·é”®

    https://ruanyifeng.com/blog/2019/10/tmux.html

    MacOS ä¸‹å¯ä»¥åšæ˜ å°„
        https://www.joshmedeski.com/posts/macos-keyboard-shortcuts-for-tmux/

å‰å¯¼é”®æ˜¯ä¸ªç»„åˆé”® ctrl+bï¼Œæ¾å¼€åå†æŒ‰å…¶å®ƒé”®ï¼š

ä¼šè¯ï¼ˆSessionï¼‰

    ?       æ˜¾ç¤ºæ‰€æœ‰å¿«æ·é”®ï¼Œä½¿ç”¨ pgup å’Œ pgdown ç¿»é¡µï¼ŒæŒ‰ q é€€å‡º(å…¶å®æ˜¯åœ¨ vim é‡Œæ˜¾ç¤ºçš„ï¼Œå‘½ä»¤ç”¨ vim çš„)

    :       è¿›å…¥å‘½ä»¤è¡Œæ¨¡å¼ï¼Œå¯è¾“å…¥å‘½ä»¤å¦‚ï¼š

                source-file ~/.tmux.conf
                show-options -g  # æ˜¾ç¤ºæ‰€æœ‰é€‰é¡¹è®¾ç½®çš„å‚æ•°ï¼Œä½¿ç”¨ pgup å’Œ pgdown ç¿»é¡µï¼ŒæŒ‰ q é€€å‡º
                set-option -g display-time 5000 # æç¤ºä¿¡æ¯çš„æŒç»­æ—¶é—´ï¼›è®¾ç½®è¶³å¤Ÿçš„æ—¶é—´ä»¥é¿å…çœ‹ä¸æ¸…æç¤ºï¼Œå•ä½ä¸ºæ¯«ç§’

    s       åˆ—å‡ºå½“å‰ä¼šè¯ï¼Œé€šè¿‡ä¸Šã€ä¸‹é”®åˆ‡æ¢ï¼Œå›è½¦ç¡®è®¤åˆ‡æ¢åˆ°è¯¥ä¼šè¯çš„é»˜è®¤çª—å£

            ä¸‹é¢è¡¨ç¤º 0 å·ä¼šè¯æœ‰ 2 ä¸ªçª—å£ï¼Œæ˜¯å½“å‰è¿æ¥ï¼Œ1 å·ä¼šè¯æœ‰ 1 ä¸ªçª—å£
                (0) + 0: 2 windows (attached)
                (1) + 1: 1 windows

    w       åˆ—å‡ºå½“å‰ä¼šè¯çš„æ‰€æœ‰çª—å£ï¼Œé€šè¿‡ä¸Šã€ä¸‹é”®åˆ‡æ¢ï¼Œå›è½¦ç¡®è®¤è¿æ¥åˆ°è¯¥çª—å£ã€‚

            æ–°ç‰ˆtmuxæŒ‰æ ‘å›¾åˆ—å‡ºæ‰€æœ‰ä¼šè¯çš„æ‰€æœ‰çª—å£ï¼Œåˆ‡æ¢æ›´æ–¹ä¾¿ï¼Œä¸éœ€è¦å…ˆsé€‰æ‹©ä¼šè¯äº†

    $       é‡å‘½åå½“å‰ä¼šè¯ï¼›è¿™æ ·ä¾¿äºè¯†åˆ«

    å·¦ä¸­æ‹¬å·  copy-mode æ¨¡å¼ï¼ŒæŸ¥çœ‹å±å¹•å†å²ï¼Œä½¿ç”¨ pgup å’Œ pgdown ç¿»é¡µï¼ŒæŒ‰ q é€€å‡º

    d       è„±ç¦»å½“å‰ä¼šè¯è¿”å›ä½ çš„ shellï¼Œtmux é‡Œé¢çš„æ‰€æœ‰ä¼šè¯åœ¨åå°ç»§ç»­è¿è¡Œï¼Œä¼šè¯é‡Œé¢çš„ç¨‹åºä¸ä¼šé€€å‡ºã€‚
            å¦‚æœ ssh çªç„¶æ–­è¿ï¼Œä¹Ÿæ˜¯ç›¸åŒçš„æ•ˆæœï¼Œä¸‹æ¬¡ç™»å½•ååœ¨å‘½ä»¤è¡Œè¿è¡Œ `tmux a` å°±èƒ½é‡æ–°è¿æ¥åˆ°ä¹‹å‰çš„ä¼šè¯

çª—å£ï¼ˆWindowï¼‰

    c       åˆ›å»ºæ–°çª—å£ï¼ŒçŠ¶æ€æ ä¼šæ˜¾ç¤ºçª—å£ç¼–å·

    w       åˆ—å‡ºå½“å‰ä¼šè¯çš„æ‰€æœ‰çª—å£ï¼Œé€šè¿‡ä¸Šã€ä¸‹é”®åˆ‡æ¢ï¼Œå›è½¦ç¡®è®¤åˆ‡æ¢åˆ°è¯¥çª—å£ã€‚

            æ–°ç‰ˆçš„æŒ‰æ ‘å›¾åˆ—å‡ºæ‰€æœ‰ä¼šè¯çš„æ‰€æœ‰çª—å£ï¼Œåˆ‡æ¢æ›´æ–¹ä¾¿

    æ•°å­—0-9  åˆ‡æ¢åˆ°æŒ‡å®šçª—å£

    n       åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªçª—å£
    p       åˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªçª—å£

    ,       é‡å‘½åå½“å‰çª—å£ï¼›è¿™æ ·ä¾¿äºè¯†åˆ«
    .       ä¿®æ”¹å½“å‰çª—å£ç¼–å·ï¼›ç›¸å½“äºçª—å£é‡æ–°æ’åº

é¢æ¿ï¼ˆpaneï¼‰

çª—å£å¯ä»¥æ‹†åˆ†ä¸ºé¢æ¿ï¼Œé»˜è®¤æƒ…å†µä¸‹åœ¨ä¸€ä¸ªçª—å£ä¸­åªæœ‰ä¸€ä¸ªé¢æ¿ï¼Œå æ»¡æ•´ä¸ªçª—å£åŒºåŸŸã€‚

æ¯ä¸ªé¢æ¿éƒ½è¿è¡Œä¸€ä¸ªshellï¼Œé¢æ¿æ˜¯ç”¨æˆ·ç•Œé¢åˆ‡åˆ†çš„æœ€å°å•ä½ã€‚

    "       åœ¨å½“å‰çª—å£æ–°å»ºé¢æ¿ï¼Œå‘ä¸‹æ‹†åˆ†
    %       åœ¨å½“å‰çª—å£æ–°å»ºé¢æ¿ï¼Œå‘å³æ‹†åˆ†

    ç©ºæ ¼     å½“å‰çª—å£çš„å¤šä¸ªé¢æ¿åœ¨å„ç§å¸ƒå±€æ–¹å¼é—´åˆ‡æ¢

    o       é€‰æ‹©ä¸‹ä¸€é¢æ¿
    æ–¹å‘é”®   åœ¨ç›¸é‚»ä¸¤ä¸ªé¢æ¿ä¸­åˆ‡æ¢

    {       å½“å‰é¢æ¿ä¸ä¸Šä¸€ä¸ªé¢æ¿äº¤æ¢ä½ç½®
    }       å½“å‰é¢æ¿ä¸ä¸‹ä¸€ä¸ªé¢æ¿äº¤æ¢ä½ç½®

    !       å°†å½“å‰é¢æ¿æ‹†åˆ†ä¸ºä¸€ä¸ªç‹¬ç«‹çª—å£

    z       å½“å‰é¢æ¿å…¨å±æ˜¾ç¤ºï¼Œå†ä½¿ç”¨ä¸€æ¬¡ä¼šå˜å›åŸæ¥å¤§å°

    q       æ˜¾ç¤ºé¢æ¿ç¼–å·

    Ctrl + æ–¹å‘é”®     ä»¥1ä¸ªå•å…ƒæ ¼ä¸ºå•ä½ç§»åŠ¨è¾¹ç¼˜ä»¥è°ƒæ•´å½“å‰é¢æ¿å¤§å°
    Alt + æ–¹å‘é”®      ä»¥5ä¸ªå•å…ƒæ ¼ä¸ºå•ä½ç§»åŠ¨è¾¹ç¼˜ä»¥è°ƒæ•´å½“å‰é¢æ¿å¤§å°

    t       åœ¨å½“å‰é¢æ¿æ˜¾ç¤ºä¸€ä¸ªæ—¶é’Ÿï¼Œç­‰äºåœ¨å½“å‰é¢æ¿çš„shellé‡Œæ‰§è¡Œå‘½ä»¤ `tmux clock`ï¼ŒæŒ‰ q é€€å‡ºã€‚

å¦‚æœåœ¨ shell ä¸­æ‰§è¡Œå‘½ä»¤ exit æˆ–æŒ‰ ctrl+d é€€å‡ºå½“å‰ shellï¼Œå…³é—­çš„é¡ºåºå¦‚ä¸‹ï¼š

    å…ˆé€€å‡ºå½“å‰é¢æ¿ï¼Œè¿”å›åˆ°å½“å‰çª—å£çš„ä¸Šä¸€ä¸ªé¢æ¿ï¼Œ

    å¦‚æœæ²¡æœ‰é¢æ¿å¯ç”¨ï¼Œåˆ™é€€å‡ºå½“å‰çª—å£ï¼Œè¿”å›åˆ°å½“å‰ä¼šè¯çš„ä¸Šä¸€ä¸ªçª—å£çš„æŸä¸ªé¢æ¿ï¼Œ

    å¦‚æœå½“å‰ä¼šè¯çš„æ‰€æœ‰çª—å£éƒ½é€€å‡ºäº†ï¼Œå½“å‰çš„ä¼šè¯å°±ä¼šè¢«å…³é—­å¹¶é€€å‡º tmuxï¼Œä½† tmux çš„å…¶ä»–ä¼šè¯åœ¨åå°ç»§ç»­è¿è¡Œã€‚

    x       å…³é—­å½“å‰é¢æ¿ï¼Œå¹¶è‡ªåŠ¨åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªï¼Œ
            æ“ä½œä¹‹åä¼šç»™å‡ºæ˜¯å¦å…³é—­çš„æç¤ºï¼ŒæŒ‰ y ç¡®è®¤å³å…³é—­ã€‚
            ç­‰åŒäºåœ¨å½“å‰çš„ shell ä¸‹æ‰§è¡Œ exit å‘½ä»¤ã€‚

    &       å…³é—­å½“å‰çª—å£ï¼Œå¹¶è‡ªåŠ¨åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªï¼Œ
            æ“ä½œä¹‹åä¼šç»™å‡ºæ˜¯å¦å…³é—­çš„æç¤ºï¼ŒæŒ‰ y ç¡®è®¤å³å…³é—­ã€‚
            ç­‰åŒäºå½“å‰æ‰€æœ‰é¢æ¿çš„ shell ä¸‹æ‰§è¡Œ exit å‘½ä»¤ã€‚

#### tmux çš„ copy æ¨¡å¼ -é¼ æ ‡æˆ–å…‰æ ‡é€‰æ‹©

æŸ¥çœ‹å†å²è¾“å…¥æ—¶çš„ç¿»é¡µã€ç§»åŠ¨å…‰æ ‡ã€åˆ‡æ¢é€‰æ‹©çª—å£ç­‰æ–¹å‘é”®ç»‘å®šä½¿ç”¨ vi æ¨¡å¼ï¼ŒåŸé»˜è®¤æ˜¯ emacs æ¨¡å¼

    set-window-option -g mode-keys vi

å‰å¯¼é”® + [ è¿›å…¥ tmux çš„ copy-modeï¼Œé»˜è®¤æŒ‰é”®ä½¿ç”¨ Emacs æ¨¡å¼

    æŒ‰ç©ºæ ¼é”®è¿›å…¥é€‰æ‹©æ¨¡å¼ï¼Œç„¶åç§»åŠ¨å…‰æ ‡è¿›è¡Œé€‰æ‹©ï¼Œå†æŒ‰å›è½¦é”®å¤åˆ¶å¹¶é€€å‡ºï¼ŒæŒ‰ q ä¸å¤åˆ¶å¹¶é€€å‡º

    ä¸ä¼šå¤åˆ¶åˆ°ç³»ç»Ÿå‰ªè´´æ¿ï¼Œç”± tmux è‡ªè¡Œç®¡ç†ï¼Œåœ¨å‘½ä»¤è¡Œæ‰§è¡Œ `tmux show-buffer` æ˜¾ç¤ºå¤åˆ¶çš„å†…å®¹

    å‰å¯¼é”® + ] ç²˜è´´å¤åˆ¶çš„å†…å®¹

åœ¨ tmux é‡Œè¿è¡Œ vim å¤åˆ¶åˆ° Windows å‰ªè´´æ¿

    ç›´æ¥ç”¨é¼ æ ‡é€‰æ‹©çš„æ—¶å€™ï¼Œæ˜¯ç”± vim å¤„ç†çš„ï¼Œéœ€è¦æŒ‰ä½ shift è¿›è¡Œé€‰æ‹©ï¼Œæ‰ä¼šå¤åˆ¶åˆ°ç³»ç»Ÿå‰ªè´´æ¿

    åæ¥ç”¨vncè¿serverå‘ç°åœ¨vimä¸­ä¹Ÿæ˜¯åŒæ ·é€‚ç”¨çš„ã€‚

##### å»ºè®®å¼€å¯é¼ æ ‡åŠŸèƒ½

    set-option -g mouse on

å¼€å¯é¼ æ ‡åï¼š

å¯ä»¥ç”¨é¼ æ ‡åœ¨ tumx çŠ¶æ€æ ç‚¹å‡»åˆ‡æ¢çª—å£ã€‚

å¯ä»¥ç”¨é¼ æ ‡ç‚¹å‡»çª—å£çš„åˆ‡åˆ†é¢æ¿ï¼Œè‡ªåŠ¨æŠŠç”¨æˆ·è¾“å…¥çš„ç„¦ç‚¹åˆ‡æ¢åˆ°è¯¥é¢æ¿ï¼Œå³è·å¾—äº†è¯¥é¢æ¿çš„å…‰æ ‡ã€‚

å¯ä»¥ç”¨æ»šè½®æ–¹ä¾¿çš„æŸ¥çœ‹å½“å‰é¢æ¿çš„å†å²è¾“å‡ºï¼ŒæŒ‰ q é€€å‡ºã€‚

å³é”®å•å‡» tmux é¢æ¿è¿›è¡Œæ ‡è®°ï¼Œè¯¥é¢æ¿çš„è¾¹æ¡†ä¼šåŠ ç²—æ˜¾ç¤ºï¼Œè„šæœ¬é‡Œå¯ä»¥å¼•ç”¨è¯¥æ ‡è®°é¢æ¿ï¼Œç•Œé¢æ“ä½œæ— æ„Ÿï¼ŒçŠ¶æ€æ å¯¹åº”çš„çª—å£åä¼šå‡ºç° M å­—æ ·ã€‚

tmux ä¸­å¼€å¯é¼ æ ‡åï¼Œåœ¨ç»ˆç«¯å·¥å…·ä¸­å¸¸ç”¨çš„é¼ æ ‡å³é”®ç²˜è´´ç­‰å°±ä¸èƒ½ç”¨äº†ï¼Œéœ€è¦æ¢ä¸ªæ“ä½œæ–¹å¼ï¼š

    é¼ æ ‡é€‰æ‹©å‰ï¼ŒæŒ‰ä½ Shift é”®ï¼Œç„¶åç‚¹å‡»é¼ æ ‡å·¦é”®æ‹–åŠ¨é€‰æ‹©ï¼Œå³å¯å¤åˆ¶åˆ°ç³»ç»Ÿå‰ªè´´æ¿ï¼Œç†Ÿæ‚‰çš„ä¸­é”®æ“ä½œåˆå›æ¥äº†ã€‚

    åœ¨æ–‡æœ¬è¾“å…¥æ¨¡å¼ï¼Œç”¨ Shift+Insert å¯å°†ç³»ç»Ÿå‰ªåˆ‡æ¿ä¸­çš„å†…å®¹è¾“å…¥ tmux ä¸­ã€‚

ç›¸å¯¹äº tmux åŸç”Ÿçš„é€‰æ‹©æ¨¡å¼ï¼ˆä¸åŠ  shift é”®ï¼‰ï¼Œä½¿ç”¨ç³»ç»Ÿé€‰æ‹©æœ‰ä¸ªç¼ºé™·ï¼Œå³å½“ä¸€è¡Œå†…å­˜åœ¨å¤šä¸ªé¢æ¿æ—¶ï¼Œæ— æ³•é€‰æ‹©å•ä¸ªé¢æ¿ä¸­çš„å†…å®¹ï¼Œè¿™æ—¶å°±å¿…é¡»ä½¿ç”¨ tmux è‡ªå¸¦çš„å¤åˆ¶ç²˜è´´ç³»ç»Ÿäº† ctrl+shift+c/vã€‚

#### tmux å¼€æœºè‡ªå¯åŠ¨è„šæœ¬

ç¤ºä¾‹è„šæœ¬ï¼Œå¼€æœºè‡ªåŠ¨å¯åŠ¨tmuxæœåŠ¡ï¼Œè¿è¡ŒæŒ‡å®šçš„ç¨‹åºã€‚

```shell

#!/bin/bash
# https://github.com/Louiszhai/tmux/blob/master/init.sh
# è¯¥è„šæœ¬ç”¨äºå¼€æœºåˆå§‹åŒ–tmuxæœåŠ¡

# åå°åˆ›å»ºä¸€ä¸ªåç§°ä¸ºinitçš„ä¼šè¯
tmux new -s init -d

# é‡å‘½åinitä¼šè¯çš„ç¬¬ä¸€ä¸ªçª—å£åç§°ä¸ºservice
tmux rename-window -t "init:1" service

# åˆ‡æ¢åˆ°æŒ‡å®šç›®å½•å¹¶è¿è¡ŒpythonæœåŠ¡
tmux send -t "init:service" "cd ~/workspace/language/python/;python2.7 server.py" Enter

# é»˜è®¤ä¸Šä¸‹åˆ†å±
tmux split-window -t "init:service"

# åˆ‡æ¢åˆ°æŒ‡å®šç›®å½•å¹¶è¿è¡ŒnodeæœåŠ¡
tmux send -t "init:service" 'cd ~/data/louiszhai/node-webserver/;npm start' Enter

# æ–°å»ºä¸€ä¸ªåç§°ä¸ºtoolçš„çª—å£ï¼Œnewwç­‰åŒäºnew window
tmux neww -a -n tool -t init

# è¿è¡Œweinreè°ƒè¯•å·¥å…·
tmux send -t "init:tool" "weinre --httpPort 8881 --boundHost -all-" Enter

# æ°´å¹³åˆ†å±
tmux split-window -h -t "init:tool"

# åˆ‡æ¢åˆ°æŒ‡å®šç›®å½•å¹¶å¯ç”¨aria2 webç®¡ç†åå°
tmux send -t "init:tool" "cd ~/data/tools/AriaNg/dist/;python -m SimpleHTTPServer 10108" Enter

```

#### tmux æ‰©å±•æ’ä»¶

æ’ä»¶å¤§å…¨

    https://github.com/tmux-plugins/list

è¦è®¾ç½® tmux ç•Œé¢ä½¿ç”¨å½©è‰²ï¼Œæ¯”å¦‚ tmux çš„çŠ¶æ€æ å½©è‰²ï¼Œä»¥åŠåœ¨ tmux ä¸‹ä½¿ç”¨ vim èƒ½å¤Ÿæ”¯æŒå®ƒçš„æ’ä»¶çš„å½©è‰²æ˜¾ç¤ºï¼Œéœ€è¦ç¼–è¾‘ ~/.tmux.conf æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹è¡Œ

    # è®¾ç½®çŠ¶æ€æ å·¥å…·æ˜¾ç¤º256å½©è‰²
    # å¦‚æœç»ˆç«¯å·¥å…·å·²ç»è®¾ç½®äº†å˜é‡ export TERM="xterm-256color"ï¼Œé‚£ä¹ˆè¿™ä¸ªå‚æ•°å¯æœ‰å¯æ— 
    set -g default-terminal screen-256color
    # çœŸå½©è‰²
    # https://github.com/tmux/tmux/wiki/FAQ#how-do-i-use-rgb-colour
    #   https://github.com/tmux/tmux/raw/master/tools/24-bit-color.sh
    #set -as terminal-features ",xterm-256color:RGB"  # tmux 3.2+
    set -as terminal-overrides ",xterm-256color:RGB"

å¤šå½©è‰²è®¾ç½®çš„å…¶å®ƒä¾èµ–é¡¹ï¼Œè¯¦è§ç« èŠ‚ [ç»ˆç«¯æ¨¡æ‹Ÿå™¨å’Œè½¯ä»¶çš„çœŸå½©è‰²è®¾ç½®]ã€‚

> æ’ä»¶ç®¡ç†

    æ„Ÿè§‰ tmux éœ€è¦çš„æ’ä»¶ä¸å¤šï¼Œå°±ä¸ç”¨å®‰è£…æ’ä»¶ç®¡ç†å™¨äº†

    æ’ä»¶ç®¡ç†å™¨

        https://github.com/tmux-plugins/tpm

    æ’ä»¶å¤§å…¨

        https://github.com/tmux-plugins/list

##### çŠ¶æ€æ æ˜¾ç¤ºä½¿ç”¨ powerline

powerline è¿‡æ—¶äº†ï¼Œæ¨è nord ä¸»é¢˜çš„çŠ¶æ€æ ï¼Œå‚è§ä¸‹é¢ç« èŠ‚ [çŠ¶æ€æ æ˜¾ç¤ºä¸ä½¿ç”¨ powerline]ã€‚

    https://bobbyhadz.com/blog/tmux-powerline-ubuntu

å…ˆå®‰è£… powerlineï¼Œè§ç« èŠ‚ [çŠ¶æ€æ å·¥å…· powerline]ã€‚

tmux çŠ¶æ€æ ä½¿ç”¨ powerlineï¼Œç¼–è¾‘ ~/.tmux.conf æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹è¡Œ

    run-shell 'powerline-config tmux setup'

ç„¶åå°±å¯ä»¥è‡ªç”±å‘æŒ¥äº†ã€‚

###### å®šåˆ¶ powerline çš„æ®µ Segment

powerline æœ‰æ’ä»¶ç”¨äº tmux çŠ¶æ€æ æ˜¾ç¤ºï¼Œå®šåˆ¶æ˜¾ç¤ºçš„å†…å®¹å¯ç¼–è¾‘ powerline çš„é…ç½®æ–‡ä»¶

    # å¦‚æœæ˜¯pipå®‰è£…çš„æŸ¥çœ‹è·¯å¾„ç”¨ pip show powerline-status
    /usr/share/powerline/config_files/themes/tmux/default.json

æ›¿æ¢è‡ªå·±å–œæ¬¢çš„å‡½æ•°å³å¯

    å®˜æ–¹å‡½æ•°è¯´æ˜ https://powerline.readthedocs.io/en/master/configuration/segments.html

```json
{
    "segments": {
        "right": [
            {
                    "function": "powerline.segments.common.sys.uptime",
                    "priority": 50
            },
            {
                    "function": "powerline.segments.common.sys.system_load",
                    "priority": 50
            },
            {
                    "function": "powerline.segments.common.time.date"
            },
            {
                    "function": "powerline.segments.common.time.date",
                    "name": "time",
                    "args": {
                            "format": "%H:%M",
                            "istime": true
                    }
            },
            {
                    "function": "powerline.segments.common.net.hostname"
            }
        ]
    }
}
```

##### çŠ¶æ€æ æ˜¾ç¤ºä¸ä½¿ç”¨ powerline

ä½ çš„è®¡ç®—æœºéœ€è¦å®‰è£…å›¾æ ‡å­—ä½“ï¼Œè¿™æ ·ä½¿ç”¨ç»ˆç«¯æ¨¡æ‹Ÿå™¨ç™»å½•è¿œç¨‹æœåŠ¡å™¨æ—¶æ‰èƒ½æ˜¾ç¤º tmux ä¸Šçš„ç‰¹æ®Šå­—ç¬¦ï¼Œå‚è§ç« èŠ‚ [Nerd font]ã€‚

> å®‰è£… nord çŠ¶æ€æ ä¸»é¢˜æ’ä»¶

ä½¿ç”¨è¿™ä¸ªæ’ä»¶çš„å¥½å¤„æ˜¯å®ƒæ”¯æŒ <https://github.com/tmux-plugins> çš„æ‰€æœ‰æ’ä»¶ï¼Œå¯ä»¥åœ¨çŠ¶æ€æ æ˜¾ç¤ºå›¾æ ‡å­—ç¬¦ï¼Œå¯åŠ¨é€Ÿåº¦ä¹Ÿæ¯” powerline å¿«ã€‚

æœ€å¥½ç»ˆç«¯å·¥å…·ä¹Ÿå¯ç”¨ nord ä¸»é¢˜ï¼Œå¦åˆ™é¢œè‰²æ–¹æ¡ˆä¼šä¸ä¸€è‡´

    https://www.nordtheme.com/ports/tmux
        https://github.com/arcticicestudio/nord-tmux

ä¸ä½¿ç”¨æ’ä»¶ç®¡ç†å™¨çš„å®‰è£…æ­¥éª¤ï¼š

å…ˆä» github ä¸‹è½½

    git clone --depth=1 https://github.com/arcticicestudio/nord-tmux ~/.tmux/themes/nord-tmux

å°†ä¸‹è¿°å‘½ä»¤æ·»åŠ åˆ°.tmux.confæ–‡ä»¶ä¸­

    run-shell "~/.tmux/themes/nord-tmux/nord.tmux"

é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶

    tmux source-file ~/.tmux.conf

> å®‰è£… tmux-powerline çŠ¶æ€æ ä¸»é¢˜æ’ä»¶

è¿™ä¸ªåªä½¿ç”¨ bash è„šæœ¬å®ç°ï¼Œä¿æŒä½ çš„ç¯å¢ƒæ›´å¹²å‡€

    https://github.com/erikw/tmux-powerline

##### ä¿å­˜ tmux ä¼šè¯

å¦‚æœ tmux å¼€å¯çš„ä¼šè¯è¾ƒå¤šï¼Œå¸Œæœ›é‡å¯åèƒ½ä¸€æ¬¡æ€§æ¢å¤

    https://github.com/tmux-plugins/tmux-resurrect

    ç«å“ https://github.com/tmux-python/tmuxp

å®‰è£…

    # æ³¨æ„ç›®å½•åæ˜¯ resurrect å¯ä»¥ä¿å­˜åˆ°æœ¬ç›®å½•ä¸‹è€Œä¸æ˜¯ .local/share/ï¼Œæ–¹ä¾¿
    $ git clone --depth=1 https://github.com/tmux-plugins/tmux-resurrect ~/.tmux/resurrect

    ç¼–è¾‘ ~/.tmux.conf æ–‡ä»¶

        # ä¿å­˜ä¼šè¯
        run-shell "~/.tmux/resurrect/resurrect.tmux"

    é‡è½½é…ç½®æ–‡ä»¶ä½¿ä¹‹ç”Ÿæ•ˆ

        tmux source-file ~/.tmux.conf

æ“ä½œå¿«æ·é”®

    å»ºè®®å…ˆç»™ä¼šè¯å‘½åä»¥ä¾¿æŸ¥æ‰¾ï¼Œ ctrl + b ç„¶å $ è¾“å…¥ä¼šè¯çš„åç§°å³å¯

    å…³é—­ tmux å‰æ‰‹åŠ¨ä¿å­˜å½“å‰ä¼šè¯

        å‰å¯¼é”® ctrl + bï¼Œç„¶å ctrl + sï¼Œä¼šåœ¨å·¦ä¸‹è§’ tmux çŠ¶æ€æ ä¼šæ˜¾ç¤º saving ... å­—æ · ï¼Œ å®Œæ¯•åä¼šæç¤º Tmux environment saved å­—æ ·

        ä¼šå°† Tmux ä¼šè¯çš„è¯¦ç»†ä¿¡æ¯ä»¥æ–‡æœ¬æ–‡ä»¶å½¢å¼ä¿å­˜åˆ° ~/.tmux/resurrect ç›®å½•ã€‚

    æ‰“å¼€ tmux åæ‰‹åŠ¨è¿˜åŸtmuxä¼šè¯

        å‰å¯¼é”® ctrl + bï¼Œç„¶å ctrl + rï¼Œä¼šåœ¨çŠ¶æ€æ é—ªç°æç¤ºæ¢å¤å®Œæˆçš„æ¶ˆæ¯

é»˜è®¤åªæ¢å¤é¢æ¿å¸ƒå±€å’ŒæŒ‡å®šçš„ç¨‹åºï¼Œæƒ³æ¢å¤æ›´å¤šçš„ç¨‹åºè¦å†è¿›è¡Œè®¾ç½®

    è¯¦è§ä¸‹é¢ç« èŠ‚ [.tmux.conf é…ç½®æ–‡ä»¶æ ·ä¾‹]

è¿™ä¸ªæ‰©å±•æ’ä»¶çš„ä»£ç åŠŸèƒ½å®ç°çš„ä¸å¥½ï¼Œè€Œä¸”è·Ÿè¯´æ˜æ–‡æ¡£å¯¹ä¸ä¸Šï¼Œå¤æ‚ç‚¹çš„ä½¿ç”¨éœ€è¦è‡ªè¡Œåˆ†ææºä»£ç 

    https://github.com/tmux-plugins/tmux-resurrect/blob/master/docs/restoring_programs.md

    https://github.com/jimeh/tmuxifier
    https://github.com/tmuxinator/tmuxinator

    https://blog.csdn.net/u013670453/article/details/116296687

ä¿å­˜çš„ä¼šè¯é…ç½®æ–‡ä»¶ä½äº

    # æºä»£ç ç›®å½•ä¸‹çš„ scripts/helper.sh åˆ†æå¾—åˆ°
    $HOME/.tmux/resurrect æˆ– "${XDG_DATA_HOME:-$HOME/.local/share}"/tmux/resurrect

    last æ–‡ä»¶æŒ‡å‘æœ€åä¸€æ¬¡ä¿å­˜çš„é¢æ¿å¸ƒå±€å’Œç¨‹åº

    pane_contents.tar.gz æ˜¯æœ€åä¸€æ¬¡ä¿å­˜çš„é¢æ¿å†…å®¹

æˆ–è€…ä½¿ç”¨è„šæœ¬è‡ªè¡Œæ¢å¤

```bash

#!/bin/bash

SESSIONNAME="monitor"

# $1:SESSIONNAME
function UUDF_TMUX_ATTACH_SESSION {

    tmux has-session -t $1 &> /dev/null

    if [ $? != 0 ]
    then
        tmux new-session -s $1 -n script -d
    fi

    tmux attach -t $1
}

# $1:SESSIONNAME
function UUDF_TMUX_SEND_TO_SESSION {

    tmux send-keys -t $1 "~/bin/script" C-m

}

# select-window -t :=0 \; select-pane \; send-keys -X

```

> æ¯éš” 15 åˆ†é’Ÿè‡ªåŠ¨å¤‡ä»½ä¸€æ¬¡ä¼šè¯ tmux-continuum

æ„Ÿè§‰æ²¡å¿…è¦ç”¨è¿™ä¸ªæ’ä»¶

    https://github.com/tmux-plugins/tmux-continuum

å®‰è£…

        $ git clone --depth=1 https://github.com/tmux-plugins/tmux-continuum ~/.tmux/tmux-continuum

    ç¼–è¾‘ ~/.tmux.conf æ–‡ä»¶

        run-shell ~/.tmux/tmux-continuum/continuum.tmux

        # Tmux Continuum é»˜è®¤æ¯éš” 15 åˆ†é’Ÿå¤‡ä»½ä¸€æ¬¡ï¼Œå¦‚æœä½ é¢‘ç‡è¿‡é«˜ï¼Œå¯ä»¥è®¾ç½®ä¸º 1 å°æ—¶ä¸€æ¬¡ï¼š
        set -g @continuum-save-interval '60'

    é‡è½½é…ç½®æ–‡ä»¶ä½¿ä¹‹ç”Ÿæ•ˆ

        tmux source-file ~/.tmux.conf

##### å†»ç»“æœ¬åœ° tmux çƒ­é”®

å¦‚æœåœ¨ tmux é‡Œä½¿ç”¨ ssh è¿æ¥è¿œç¨‹æœåŠ¡å™¨ï¼Œåœ¨ ssh é‡Œè¿è¡Œ tmux ä¼šå¯¼è‡´çƒ­é”®å†²çªï¼Œè¿™ä¸ªæ’ä»¶å¯ä»¥å†»ç»“æœ¬åœ°çš„ tmux å“åº”çƒ­é”®

    https://github.com/MunifTanjim/tmux-suspend

å®‰è£…ï¼š

    $ git clone --depth=1 https://github.com/MunifTanjim/tmux-suspend.git ~/.tmux/tmux-suspend

    ç¼–è¾‘ ~/.tmux.conf æ–‡ä»¶

        run-shell ~/.tmux/tmux-suspend/suspend.tmux

    é‡è½½é…ç½®æ–‡ä»¶ä½¿ä¹‹ç”Ÿæ•ˆ

        tmux source-file ~/.tmux.conf

ä½¿ç”¨ï¼š

    æŒ‰ F12 å°†å†»ç»“æœ¬åœ°çš„ tmux å“åº”çƒ­é”®ï¼Œè¿™æ ·å½“å‰é¢æ¿ pane é‡Œçš„è¿œç¨‹ ssh è¿æ¥ä¸­çš„ tmux å°±å¯ä»¥æ¥æ”¶åˆ°ä½ çš„çƒ­é”®äº†ï¼Œå†æ¬¡æŒ‰ F12 å°†å–æ¶ˆå†»ç»“ã€‚

##### æ˜¾ç¤ºå‰å¯¼é”®

åœ¨ tmux æ—¶é—´æ æ˜¾ç¤ºä½ æŒ‰ä¸‹äº†å¼•å¯¼é”®

    https://github.com/tmux-plugins/tmux-prefix-highlight

å…ˆä» github ä¸‹è½½

    $ git clone --depth=1 https://github.com/tmux-plugins/tmux-prefix-highlight.git ~/.tmux/tmux-prefix-highlight

å°†ä¸‹è¿°å‘½ä»¤æ·»åŠ åˆ°.tmux.confæ–‡ä»¶ä¸­

    run-shell ~/.tmux/tmux-prefix-highlight//prefix_highlight.tmux

##### .tmux.conf é…ç½®æ–‡ä»¶æ ·ä¾‹

```conf
# å¯å‚è€ƒä¸€ä¸ªéå¸¸æµè¡Œçš„é…ç½® https://github.com/gpakosz/.tmux
#
# æŒ‰å®Œå‰å¯¼ ctrl+B åï¼Œå†æŒ‰å†’å·å³å¯è¿›å…¥å‘½ä»¤è¡Œæ¨¡å¼
# ä¸‹åˆ—å‘½ä»¤åœ¨ tmux çš„å‘½ä»¤è¡Œæ¨¡å¼ä¸€æ ·å¯ä»¥ä½¿ç”¨

# çª—å£ä¿å­˜çš„å†å²å†…å®¹è¡Œæ•°
set-option -g history-limit 20000

# æŠŠå‰å¯¼é”®ä» ctrl+b æ”¹æˆ ctrl+xï¼Œ M-aæ˜¯Alt+a
# set-option -g prefix C-x unbind-key C-b bind-key C-x send-prefix

# æŸ¥çœ‹å†å²è¾“å…¥æ—¶çš„ç¿»é¡µã€ç§»åŠ¨å…‰æ ‡ã€åˆ‡æ¢é€‰æ‹©çª—å£ç­‰æ–¹å‘é”®ç»‘å®šä½¿ç”¨ vi æ¨¡å¼ï¼ŒåŸé»˜è®¤æ˜¯ emacs æ¨¡å¼
set-window-option -g mode-keys vi

# å¼€å¯é¼ æ ‡æ»šå±ï¼Œé¼ æ ‡ç‚¹é€‰å½“å‰é¢æ¿ï¼Œåˆ‡æ¢çª—å£ã€‚å¦‚ä¸è®¾ç½®ï¼Œé»˜è®¤æ˜¯ç»ˆç«¯å·¥å…·ä¸‹å‘çš„æ»šè½®é€‰æ‹©å†å²å‘½ä»¤ï¼Œå®åœ¨æ— ç”¨ã€‚
#set-option -g mouse on # v2.1 ä¹‹å‰çš„è€ç‰ˆæœ¬ set-option -g mode-mouse on
set -g mouse on

# è®¾ç½®çŠ¶æ€æ å·¥å…·æ˜¾ç¤º256å½©è‰²
# å¦‚æœç»ˆç«¯å·¥å…·å·²ç»è®¾ç½®äº†å˜é‡ export TERM="xterm-256color"ï¼Œé‚£ä¹ˆè¿™ä¸ªå‚æ•°å¯æœ‰å¯æ— 
set -g default-terminal screen-256color
# çœŸå½©è‰²
# https://github.com/tmux/tmux/wiki/FAQ#how-do-i-use-rgb-colour
#   https://github.com/tmux/tmux/raw/master/tools/24-bit-color.sh
set -as terminal-features ",xterm-256color:RGB"  # tmux 3.2+
#set -as terminal-overrides ",gnome*:Tc"

# é€€å‡º tmux åæ¢å¤æ–¹å—å…‰æ ‡é—ªçƒï¼Œæœªå®ç°ã€‚æ‰‹å·¥æ‰§è¡Œ `reset` è§„é¿å§
#set-hook -g client-detached 'run-shell "tput cnorm; echo -e \"\\033[?12h\\033[1 q\""'
#set-hook -g session-closed  'run-shell "tput cnorm; echo -e \"\\033[?12h\\033[1 q\""'
# ä¸Šé¢ä¸¤ä¸ªæ— æ³•å½±å“çˆ¶shellï¼Œå¹²è„†ç¦ç”¨å…‰æ ‡ä¿®æ”¹
#set -ga terminal-overrides ",xterm-256color:Tc:smcup@:rmcup@"

# çŠ¶æ€æ ä½¿ç”¨ nord ä¸»é¢˜ï¼Œæ›¿æ¢æ‰ powerline
# run-shell 'powerline-config tmux setup'
run-shell "~/.tmux/themes/nord-tmux/nord.tmux"

# æ˜¾ç¤ºå‰å¯¼é”®
run-shell "~/.tmux/tmux-prefix-highlight/prefix_highlight.tmux"

# å†»ç»“æœ¬åœ° tmux çƒ­é”®ï¼Œä½¿ç”¨äº ssh è¿æ¥åˆ°è¿œç¨‹ä½¿ç”¨ tmux çš„åœºåˆï¼ŒæŒ‰ F12 åˆ‡æ¢
run-shell ~/.tmux/tmux-suspend/suspend.tmux

# ä¿å­˜ä¼šè¯
run-shell "~/.tmux/resurrect/resurrect.tmux"
# æ¢å¤ä¼šè¯ä¸­è¿è¡Œçš„ç¨‹åº
set -g @resurrect-processes 'btop nmon watch "journalctl -f" "cmatrix -ba" "podman container stats"'
# æ¢å¤ä¼šè¯ä¸­é¢æ¿çš„å†…å®¹
set -g @resurrect-capture-pane-contents 'on'

```

é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶

    $ tmux source-file ~/.tmux.conf

#### ç«å“ screen/Zellij

    https://www.cnblogs.com/bamanzi/p/switch-tmux-to-gnu-screen.html

    ç«å“ Zellij

        https://zellij.dev/
            https://github.com/zellij-org/zellij

        https://zhuanlan.zhihu.com/p/600682580

ç‰¹æ®ŠåŠŸèƒ½

    Screen æ”¯æŒ Zmodem åè®®ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä½ å¯ä»¥ç”¨ rzã€sz å‘½ä»¤æ–¹ä¾¿çš„ä¼ è¾“æ–‡ä»¶ <https://adammonsen.com/post/256/>ã€‚

    Screen å¯ä»¥é€šè¿‡ä¸²è¡Œè¿æ¥è¿›è¡Œè¿æ¥ï¼Œå¦‚è¿è¡Œå‘½ä»¤ `screen 9600 /dev/ttyUSB0` è¿æ¥ usb ç«¯å£è°ƒè¯•ï¼Œé€šè¿‡æŒ‰é”®ç»‘å®šå¯ä»¥æ–¹ä¾¿åœ°å‘å‡º XON å’Œ XOFF ä¿¡å·ï¼ŒWindows ä¸‹çš„ putty ä¹Ÿæ”¯æŒè¿æ¥ COM å£ç™»å½•ã€‚

å®‰è£…å‘è¡Œç‰ˆçš„å³å¯

    sudo apt install screen

åœ¨Screenç¯å¢ƒä¸‹ï¼Œæ‰€æœ‰çš„ä¼šè¯éƒ½ç‹¬ç«‹çš„è¿è¡Œï¼Œå¹¶æ‹¥æœ‰å„è‡ªçš„ç¼–å·ã€è¾“å…¥ã€è¾“å‡ºå’Œçª—å£ç¼“å­˜ã€‚

ç”¨æˆ·å¯ä»¥é€šè¿‡å¿«æ·é”®åœ¨ä¸åŒçš„çª—å£ä¸‹åˆ‡æ¢ï¼Œå¹¶å¯ä»¥è‡ªç”±çš„é‡å®šå‘å„ä¸ªçª—å£çš„è¾“å…¥å’Œè¾“å‡ºã€‚GNU Screençš„çª—å£ä¸åŒºåŸŸå…³ç³»æ›´æ¥è¿‘Emacsé‡Œé¢bufferä¸windowçš„å…³ç³»ï¼š

    gnu screen é‡Œé¢çš„ region ç›¸å½“äº tmux é‡Œé¢çš„ paneï¼Œè€Œ screen çš„ window æ›´ç±»ä¼¼äºè·‘åœ¨ tmux pane é‡Œé¢çš„ç¨‹åºï¼›ä¸ tmux ä¸åŒçš„æ˜¯ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ç¨‹åº/çª—å£æ˜¯éšè—çš„ï¼Œæ¯æ¬¡åªæŠŠä¸€ä¸ªç¨‹åº/çª—å£åˆ‡æ¢åˆ°å½“å‰ region æ¥ï¼ˆtmux é‡Œé¢ä¸€èˆ¬æƒ…å†µä¸‹æ‰€æœ‰ç¨‹åºéƒ½ä¼šåœ¨æŸä¸ª window çš„æŸä¸ª pane é‡Œé¢æ˜¾ç¤ºè€…ï¼Œé™¤éæœ‰å…¶å®ƒ pane è¢«æœ€å¤§åŒ–å¯¼è‡´å½“å‰ pane è¢«éšè—äº†ï¼‰

    GNU Screen é‡Œé¢æ²¡æœ‰ tmux é‡Œé¢çš„ window é‚£æ ·çš„ä¸œè¥¿ï¼Œå®ƒçš„ layout å€’æ˜¯ è·Ÿ tmux çš„ window æœ‰ç‚¹åƒï¼Œè™½ç„¶æˆ‘ä»¬å¯ä»¥ä»ä¸€ä¸ª layout åˆ‡æ¢åˆ°å¦å¤–ä¸€ä¸ª layoutï¼Œä½† layout åªæ˜¯ region çš„å®¹å™¨ï¼Œè€Œä¸æ˜¯ window çš„å®¹å™¨ï¼Œä¸¤ä¸ª layout é‡Œé¢æ˜¯å¯ä»¥æŸ¥çœ‹åŒä¸€ä¸ªåº”ç”¨(window)çš„ï¼

Screen å®ç°äº†åŸºæœ¬çš„æ–‡æœ¬æ“ä½œï¼Œå¦‚å¤åˆ¶ç²˜è´´ç­‰ï¼›è¿˜æä¾›äº†ç±»ä¼¼æ»šåŠ¨æ¡çš„åŠŸèƒ½ï¼Œå¯ä»¥æŸ¥çœ‹çª—å£çŠ¶å†µçš„å†å²è®°å½•ã€‚çª—å£è¿˜å¯ä»¥è¢«åˆ†åŒºå’Œå‘½åï¼Œè¿˜å¯ä»¥ç›‘è§†åå°çª—å£çš„æ´»åŠ¨ã€‚

å‘½ä»¤è¡Œæ“ä½œï¼š

åˆ—å‡ºå½“å‰å­˜åœ¨çš„ä¼šè¯åˆ—è¡¨

    $ screen -ls
    There are screens on:
            # ä¼šè¯åæ ¼å¼ [[pid.]tty[.host]]
            335.pts-4.jn-zh (08/07/22 17:56:22)     (Detached)
            29396.pts-4.jn-zh       (08/07/22 17:47:42)     (Detached)
    2 Sockets in /run/screen/S-pi.

è¿æ¥åˆ°å·²æœ‰çš„ä¼šè¯ï¼Œç”¨ä¸Šé¢çœ‹åˆ°çš„ç³»ç»Ÿç»™å‡ºçš„é»˜è®¤ä¼šè¯åæˆ–pidå³å¯ã€‚

    $ screen -r 29396

åˆ›å»ºä¸€ä¸ªåå­—ä¸ºlampçš„ä¼šè¯å¹¶è¿æ¥åˆ°è¯¥ä¼šè¯

    $ screen -S lamp

è¿æ¥åˆ°ä¼šè¯ä»¥åå°±å¯ä»¥æ‰§è¡Œæ“ä½œäº†ï¼Œåœ¨æ­¤æœŸé—´ï¼Œå¯ä»¥éšæ—¶å…³é—­SSH,æˆ–è‡ªå·±çš„ç”µè„‘ï¼Œä¼šè¯ä¸­çš„ç¨‹åºä¸ä¼šå…³é—­ï¼Œä»åœ¨è¿è¡Œã€‚

ç‰¹æ®Šï¼šå¦‚æœä½ åœ¨å¦ä¸€å°æœºå™¨ä¸Šæ²¡æœ‰åˆ†ç¦»ä¸€ä¸ªScreenä¼šè¯ï¼Œå°±æ— ä»å†æ¬¡è¿æ¥è¿™ä¸ªä¼šè¯ã€‚

    $ screen -d <ä½œä¸šåç§°> ã€€å°†æŒ‡å®šçš„screenä¼šè¯ç¦»çº¿ã€‚

    $ screen -m <ä½œä¸šåç§°> ã€€å³ä½¿ç›®å‰å·²åœ¨ä½œä¸šä¸­çš„screenä½œä¸šï¼Œä»å¼ºåˆ¶å»ºç«‹æ–°çš„screenä¼šè¯ã€‚

    $ screen -R <ä½œä¸šåç§°> ã€€å…ˆè¯•å›¾æ¢å¤ç¦»çº¿çš„ä¼šè¯ã€‚è‹¥æ‰¾ä¸åˆ°ç¦»çº¿çš„ä½œä¸šï¼Œå³å»ºç«‹æ–°çš„screenä¼šè¯ã€‚

    $ screen -wipe ã€€æ£€æŸ¥ç›®å‰æ‰€æœ‰çš„screenä½œä¸šï¼Œå¹¶åˆ é™¤å·²ç»æ— æ³•ä½¿ç”¨çš„screenä½œä¸šã€‚

GNU Screen çš„é»˜è®¤å‰å¯¼é”®æ˜¯ Ctrl+Aã€‚

å¸¸ç”¨å¿«æ·é”®ï¼Œå…ˆæŒ‰å¼•å¯¼é”® Ctrl+aï¼Œç„¶åæŒ‰

    d      é€€å‡ºå½“å‰çš„screenç•Œé¢å›åˆ°åˆå§‹çš„shellï¼Œå½“å‰è¿è¡Œçš„ä¼šè¯è¿›ç¨‹ä¸å…³é—­ï¼Œå…¶ä¸­çš„ç¨‹åºä¼šç»§ç»­è¿è¡Œ

    c     åœ¨å½“å‰screenä¼šè¯ä¸­åˆ›å»ºçª—å£

    w         æ•°å­—æ˜¾ç¤ºçª—å£åˆ—è¡¨
    "         ä¸Šä¸‹å…‰æ ‡é”®å¯é€‰æ‹©çš„çª—å£åˆ—è¡¨
    C-a       åœ¨ä¸¤ä¸ªæœ€è¿‘ä½¿ç”¨çš„ window é—´åˆ‡æ¢
    [Space]   ç”±è§†çª—0å¾ªåºåˆ‡æ¢åˆ°è§†çª—9
    0-9       åœ¨ç¬¬0ä¸ªçª—å£å’Œç¬¬9ä¸ªçª—å£ä¹‹é—´åˆ‡æ¢
    n         ä¸‹ä¸€ä¸ªçª—å£
    p         ä¸Šä¸€ä¸ªçª—å£

    x      é”å±(éœ€è¦ä½ æœ‰è¯¥Linuxç™»å½•ç”¨æˆ·çš„ç™»å½•å¯†ç æ‰èƒ½è§£é”ï¼Œå¦åˆ™ï¼Œå½“å‰çš„ä¼šè¯ç»ˆç«¯ç®—æ˜¯åºŸäº†ï¼Œä½ éœ€è¦é‡æ–°æ‰“å¼€ä¸€ä¸ªç»ˆç«¯æ‰è¡Œ)(é”å±åï¼Œé‡æ–°ç™»å½•ä¸€ä¸ªè®¾ç½®è¿‡å¯†ç çš„ Screen ä¼šè¯ï¼Œä½ éœ€è¦è¾“å…¥2æ¬¡å¯†ç ï¼Œç¬¬ä¸€æ¬¡æ˜¯è¾“å…¥Linuxç³»ç»Ÿçš„ç™»å½•å¯†ç ï¼Œç¬¬äºŒæ¬¡æ˜¯è¾“å…¥è¯¥ Screen ä¼šè¯çš„å¯†ç )

    S    å±å¹•æ°´å¹³åˆ†å‰²
    |    å±å¹•å‚ç›´åˆ†å‰²
    [tab] åœ¨å„ä¸ªåŒºå—é—´åˆ‡æ¢ï¼Œæ¯ä¸€åŒºå—ä¸Šéœ€è¦å†æ¬¡ç”¨ Ctrl+a c åˆ›å»ºçª—å£ã€‚
    X     å…³é—­å½“å‰ç„¦ç‚¹æ‰€åœ¨çš„å±å¹•åŒºå—,å…³é—­çš„åŒºå—ä¸­çš„çª—å£å¹¶ä¸ä¼šå…³é—­ï¼Œè¿˜å¯ä»¥é€šè¿‡çª—å£åˆ‡æ¢æ‰¾åˆ°å®ƒã€‚
    Q     å…³é—­é™¤å½“å‰åŒºå—ä¹‹å¤–å…¶ä»–çš„æ‰€æœ‰åŒºå—,å…³é—­çš„åŒºå—ä¸­çš„çª—å£å¹¶ä¸ä¼šå…³é—­ï¼Œè¿˜å¯ä»¥é€šè¿‡çª—å£åˆ‡æ¢æ‰¾åˆ°å®ƒã€‚

æ¯”å¦‚ï¼šå½“éœ€è¦é€€å‡ºå½“å‰çš„ Screen ç•Œé¢å›åˆ°åˆå§‹çš„shellï¼Œå¯ä»¥ç”¨å¿«æ·é”® Ctrl+a dï¼Œå³æŒ‰ä½CtrlæŒ‰a,ç„¶åå¯ä»¥æ¾æ‰‹å»æŒ‰dï¼Œä¼šè¯ä¸­çš„ç¨‹åºä¸ä¼šå…³é—­ï¼Œä»åœ¨è¿è¡Œã€‚

å…³é—­ Screen ä¼šè¯ä¸­çš„çª—å£

    # åœ¨ Screen ä¼šè¯é‡Œçš„shellæ‰§è¡Œ æˆ–çƒ­é”® Ctrl+a k
    $ exit

å¦‚æœä¸€ä¸ª Screen ä¼šè¯ä¸­æœ€åä¸€ä¸ªçª—å£è¢«å…³é—­äº†ï¼Œé‚£ä¹ˆæ•´ä¸ª Screen ä¼šè¯ä¹Ÿå°±é€€å‡ºäº†ï¼Œscreen è¿›ç¨‹ä¼šè¢«ç»ˆæ­¢ã€‚

ä¼šè¯å…±äº«

ä¼šè¯å…±äº«ï¼šScreen å¯ä»¥è®©ä¸€ä¸ªæˆ–å¤šä¸ªç”¨æˆ·ä»ä¸åŒç»ˆç«¯å¤šæ¬¡è¿æ¥åˆ°åŒä¸€ä¸ªä¼šè¯ï¼Œå¹¶å…±äº«ä¼šè¯çš„æ‰€æœ‰ç‰¹æ€§ï¼ˆæ¯”å¦‚å¯ä»¥çœ‹åˆ°å®Œå…¨ç›¸åŒçš„è¾“å‡ºï¼‰ã€‚å®ƒåŒæ—¶æä¾›äº†çª—å£è®¿é—®æƒé™çš„æœºåˆ¶ï¼Œå¯ä»¥å¯¹çª—å£è¿›è¡Œå¯†ç ä¿æŠ¤ã€‚

å‡è®¾ä½ åœ¨å’Œæœ‹å‹åœ¨ä¸åŒåœ°ç‚¹ä»¥ç›¸åŒç”¨æˆ·ç™»å½•ä¸€å°æœºå™¨ï¼Œç„¶åä½ åˆ›å»ºä¸€ä¸ª Screen ä¼šè¯ï¼Œä½ æœ‹å‹å¯ä»¥åœ¨ä»–çš„ç»ˆç«¯ä¸Šå‘½ä»¤ï¼š

    $ screen -x

è¿™ä¸ªå‘½ä»¤ä¼šå°†ä½ æœ‹å‹çš„ç»ˆç«¯ Attach åˆ°ä½ çš„ Screen ä¼šè¯ä¸Šï¼Œå¹¶ä¸”ä½ çš„ç»ˆç«¯ä¸ä¼šè¢« Detachã€‚è¿™æ ·ä½ å°±å¯ä»¥å’Œæœ‹å‹å…±äº«åŒä¸€ä¸ªä¼šè¯äº†ï¼Œå¦‚æœä½ ä»¬å½“å‰åˆå¤„äºåŒä¸€ä¸ªçª—å£ï¼Œé‚£å°±ç›¸å½“äºååœ¨åŒä¸€ä¸ªæ˜¾ç¤ºå™¨å‰é¢ï¼Œä½ çš„æ“ä½œä¼šåŒæ­¥æ¼”ç¤ºç»™ä½ æœ‹å‹ï¼Œä½ æœ‹å‹çš„æ“ä½œä¹Ÿä¼šåŒæ­¥æ¼”ç¤ºç»™ä½ ã€‚å½“ç„¶ï¼Œå¦‚æœä½ ä»¬åˆ‡æ¢åˆ°è¿™ä¸ªä¼šè¯çš„ä¸åŒçª—å£ä¸­å»ï¼Œé‚£è¿˜æ˜¯å¯ä»¥åˆ†åˆ«è¿›è¡Œä¸åŒçš„æ“ä½œçš„ã€‚

### è¿›ç¨‹å®ˆæŠ¤å·¥å…· Supervisor

ä½¿ç”¨ python å®ç°çš„è¿›ç¨‹ç›‘æ§å’Œå¯åŠ¨ç®¡ç†å·¥å…·ï¼Œä¸è¿‡ç›®å‰éƒ½è½¬å‘ç”¨ systemd ç®¡ç†è¿›ç¨‹äº†

    http://supervisord.org/

    https://zhuanlan.zhihu.com/p/52233518

å„å¤§å‘è¡Œç‰ˆéƒ½æ”¯æŒäº†

    $ apt install supervisor

å¯ä»¥ç›´æ¥é€šè¿‡pipæ¥å®‰è£…

    $ pip install supervisor

ç›®å‰æ‰€çŸ¥ç¼ºé™·ï¼š

    1.Supervisor ç®¡ç†çš„è¿›ç¨‹å¿…é¡»ç”± supervisord å¯åŠ¨ï¼Œå³å·²å¯åŠ¨çš„ç¨‹åºæ˜¯æ— æ³•ä½¿ç”¨ supervisord è¿›è¡Œç®¡ç†çš„ã€‚

    2.Supervisor è¦æ±‚ç®¡ç†çš„ç¨‹åºæ˜¯éåå°å¼çš„ç¨‹åº(not daemon program)ï¼Œå› ä¸º Supervisord ä¼šè‡ªåŠ¨å¸®ä½ å°†è¦ç®¡ç†çš„è¿›ç¨‹è½¬ä¸ºåå°è¿›ç¨‹ï¼Œå¦‚æœåŸæœ¬å°±æ˜¯åå°è¿›ç¨‹å°±å­˜åœ¨é—®é¢˜ï¼Œæ¯”å¦‚è¦ä½¿ç”¨ Supervisor ç®¡ç† nginxï¼Œnginx å°±éœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ  daemon off è®© nginx ä»¥éåå°è¿è¡Œå½¢å¼å¯åŠ¨ã€‚

    3.Supervisorä¸æ”¯æŒwindowsï¼Œåªæ”¯æŒç±»UNIXç³»ç»Ÿï¼Œå¦‚Centosã€Ubuntuã€MacOS

ä¸€ä¸ªç±»ä¼¼çš„ç›‘æ§å·¥å…·ï¼šMonit

    Monit å¯ä»¥å¯¹ç³»ç»ŸçŠ¶æ€ã€è¿›ç¨‹ã€æ–‡ä»¶ã€ç›®å½•å’Œè®¾å¤‡è¿›è¡Œç›‘æ§ï¼Œé€‚ç”¨äº Linux å¹³å°ï¼Œå¯ä»¥è‡ªåŠ¨é‡å¯å·²æŒ‚æ‰çš„ç¨‹åºï¼Œæ¯”è¾ƒé€‚åˆç›‘æ§ç³»ç»Ÿçš„å…³é”®è¿›ç¨‹å’Œèµ„æºï¼Œå¦‚ nginxã€apacheã€mysql å’Œ cpu å æœ‰ç‡ç­‰ã€‚

### åå°æ‰§è¡Œ

åå°æ‰§è¡Œçš„åŸç†æ˜¯åˆ©ç”¨ linux å‘½ä»¤è¡Œç¨‹åºè¿æ¥ tty è®¾å¤‡ï¼Œå‚è§ç« èŠ‚ [Linux çš„ TTY è®¾å¤‡]ã€‚

å½“æˆ‘ä»¬ç™»å½•æœåŠ¡å™¨çš„æ—¶å€™å°±ä¼šäº§ç”Ÿä¸€ä¸ªä¼šè¯ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€äº›è¿œç¨‹ç™»å½•è½¯ä»¶çš„æ—¶å€™é€šå¸¸ä¼šçœ‹åˆ° session çš„å­—æ ·ä»¬å°±æ˜¯è¡¨ç¤ºä¼šè¯ã€‚åœ¨ä»»ä¸€æ—¶åˆ»ï¼Œä¼šè¯ä¸­çš„å…¶ä¸­ä¸€ä¸ªè¿›ç¨‹ç»„ä¼šæˆä¸ºç»ˆç«¯çš„å‰å°è¿›ç¨‹ç»„ï¼Œå…¶ä»–è¿›ç¨‹ç»„ä¼šæˆä¸ºåå°è¿›ç¨‹ç»„ã€‚

åªæœ‰å‰å°è¿›ç¨‹ç»„ä¸­çš„è¿›ç¨‹æ‰èƒ½ä»æ§åˆ¶ç»ˆç«¯ä¸­è¯»å–è¾“å…¥ã€‚å½“ç”¨æˆ·åœ¨æ§åˆ¶ç»ˆç«¯ä¸­è¾“å…¥å…¶ä¸­ä¸€ä¸ªä¿¡å·ç”Ÿæˆç»ˆç«¯å­—ç¬¦ä¹‹åï¼Œè¯¥ä¿¡å·ä¼šè¢«å‘é€åˆ°å‰å°è¿›ç¨‹ç»„ä¸­çš„æ‰€æœ‰æˆå‘˜ã€‚è¿™äº›å­—ç¬¦åŒ…æ‹¬ç”Ÿæˆ SIGINT çš„ä¸­æ–­å­—ç¬¦ï¼ˆé€šå¸¸æ˜¯ Control-Cï¼‰ã€ç”Ÿæˆ SIGQUIT çš„é€€å‡ºå­—ç¬¦ï¼ˆé€šå¸¸æ˜¯ Control-\ï¼‰ã€ç”Ÿæˆ SIGSTP çš„æŒ‚èµ·å­—ç¬¦ï¼ˆé€šå¸¸æ˜¯ Control-Zï¼‰ã€‚

    ç¨‹åºæ­£å¸¸ç»“æŸï¼Œæ¯”å¦‚ä½ åœ¨ç»ˆç«¯è¾“å…¥ ls å‘½ä»¤ï¼Œæ‰§è¡Œå®Œæˆä¹‹åä»–å°±æ­£å¸¸ç»“æŸäº†ã€‚

    å½“æˆ‘ä»¬æŒ‰ä¸‹ä¸­æ–­å­—ç¬¦ï¼ˆctrl + cï¼‰çš„æ—¶å€™ï¼Œæ‰€æœ‰çš„å‰å°è¿›ç¨‹éƒ½ä¼šæ”¶åˆ°ä¸€ä¸ª SIGINT ä¿¡å·ã€‚
    å½“æˆ‘ä»¬æŒ‰ä¸‹é€€å‡ºå­—ç¬¦ï¼ˆctrl + \ï¼‰çš„æ—¶å€™ï¼Œæ‰€æœ‰çš„å‰å°è¿›ç¨‹éƒ½ä¼šæ”¶åˆ°ä¸€ä¸ª SIGQUIT ä¿¡å·ã€‚
    å½“æˆ‘ä»¬æŒ‰ä¸‹æŒ‚èµ·å­—ç¬¦ï¼ˆctrl + Zï¼‰çš„æ—¶å€™ï¼Œæ‰€æœ‰çš„å‰å°è¿›ç¨‹éƒ½ä¼šæ”¶åˆ°ä¸€ä¸ª SIGTSTP ä¿¡å·ã€‚

    å½“ shell è¿›ç¨‹è¢«æ€æ‰é€€å‡ºçš„æ—¶å€™ï¼Œå†…æ ¸ä¼šå‘é€ SIGHUP ç»™æ‰€æœ‰çš„å‰å°è¿›ç¨‹ã€‚

    å½“æˆ‘ä»¬é€€å‡ºç»ˆç«¯çš„æ—¶å€™ï¼Œshell ä¼šç»™æ‰€æœ‰çš„å‰å°è¿›ç¨‹ç»„å‘é€ SIGHUP ä¿¡å·ï¼Œè€Œä¸”ä¹Ÿä¼šç»™æ‰€æœ‰çš„åå°è¿›ç¨‹ç»„å‘é€ SIGHUP ä¿¡å·

#### nohup

æ­£å¸¸çš„ç¨‹åºæ˜¯æ²¡æœ‰å¤„ç†è¿™ä¸ª SIGHUP ä¿¡å·çš„ï¼Œå› æ­¤å½“æˆ‘ä»¬é€€å‡ºç»ˆç«¯ä¹‹åæ‰€æœ‰çš„åå°è¿›ç¨‹éƒ½ä¼šæ”¶åˆ°è¿™ä¸ªä¿¡å·ï¼Œç„¶åç»ˆæ­¢æ‰§è¡Œã€‚nohup å‘½ä»¤çš„ä½œç”¨å°±æ˜¯è®©ç¨‹åºå¿½ç•¥ SIGHUP è¿™ä¸ªä¿¡å·ï¼Œè®©ä½ çš„ç¨‹åºç»§ç»­åœ¨åå°è¿è¡Œ

    https://juejin.cn/post/7172811446739271694

ä½¿ç”¨æ—¶çš„å½¢å¼å¦‚ä¸‹ï¼Œnohup è®© sleep åœ¨åå°ç»§ç»­æ‰§è¡Œï¼Œå‘½ä»¤æœ€åçš„ &ï¼Œè®©å‰é¢çš„é‚£äº›å­—ç¬¦å‘½ä»¤åœ¨åå°æ‰§è¡Œ

    nohup sleep 3600 &

ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåå°ä»»åŠ¡ä¸å¸Œæœ›å‡ºç°å±å¹•æ‰“å°ï¼Œéœ€è¦æŠŠç¨‹åºçš„è¾“å‡ºå’Œå¼‚å¸¸ä¿¡æ¯éƒ½é‡å®šå‘ä¸€ä¸‹

    nohup [éœ€è¦æ‰§è¡Œçš„å‘½ä»¤] >/dev/null 2>&1 &

å¦‚æœä¸è¿™æ ·æŠŠè¾“å‡ºé‡å®šå‘äº†ï¼Œnohup å‘½ä»¤é»˜è®¤ä¼šæŒç»­æŠŠåå°ä»»åŠ¡çš„æ ‡å‡†è¾“å‡ºå†™åˆ°å½“å‰ç›®å½•çš„ nohup.out ä¸‹é¢ï¼ŒæœåŠ¡å™¨é•¿æ—¶é—´è¿è¡Œçš„æƒ…å†µä¸‹å¯èƒ½é€ æˆç£ç›˜å†™æ»¡ã€‚

#### åçŸ¥åè§‰å‘ç°ä¸€ä¸ªå‘½ä»¤è¦æ‰§è¡Œå¾ˆä¹…ï¼ŒåŠè·¯è®©å®ƒæ”¹æˆåå°æ‰§è¡Œ

    https://www.ruanyifeng.com/blog/2016/02/linux-daemon.html

ssh è¿æ¥åˆ°æœåŠ¡å™¨ï¼ŒåçŸ¥åè§‰å‘ç°ä¸€ä¸ªå‘½ä»¤è¦æ‰§è¡Œå¾ˆä¹…ï¼Œåˆ°ç‚¹ä¸‹ç­äº†æ€ä¹ˆåŠï¼Ÿåæ‚”æ²¡åœ¨ tmux é‡Œæ‰§è¡Œå¥½å°´å°¬ã€‚

å¦‚æœç¨‹åºçš„è¾“å‡ºæ— æ‰€è°“ï¼Œä½ åªè¦ç¨‹åºèƒ½ç»§ç»­æ‰§è¡Œä¸‹å»å°±å¥½ï¼Œå…¸å‹çš„ä¾‹å­æ˜¯ä½ å‹ç¼©ä¸€ä¸ªæ–‡ä»¶æˆ–è€…ç¼–è¯‘ä¸€ä¸ªå¤§è½¯ä»¶ï¼Œä¸­é€”å‘ç°éœ€è¦èŠ±å¾ˆé•¿æ—¶é—´ã€‚

æŒ‰ä¸‹ Ctrl-zï¼Œè®©ç¨‹åºè¿›å…¥ suspend æŒ‚èµ·çŠ¶æ€ã€‚è¿™ä¸ªæ—¶å€™ä½ åº”è¯¥ä¼šå›åˆ° shell ä¸‹ï¼Œçœ‹åˆ°æç¤ºï¼š

    [1]+  Stopped                 xxxx

ä¸Šé¢é‚£ä¸ª [] é‡Œçš„æ•°å­—ï¼Œæ˜¯ä»»åŠ¡çš„åºå·ï¼Œç”± `bg`ã€`fg` å‘½ä»¤ç”¨åˆ°ï¼Œæ‰§è¡Œï¼š

    # è®©æš‚æ—¶åœæ‰çš„è¿›ç¨‹åœ¨åå°è¿è¡Œ
    $ bg %1

    # å¦‚æœåæ‚”äº†ï¼Œè®©æš‚æ—¶åœæ‰çš„è¿›ç¨‹åœ¨å‰å°è¿è¡Œ
    $ fg %1  # è¿™æ ·ä¼šæŠŠæˆ‘ä»¬ä»shellå¸¦å›åˆ°è¯¥ç¨‹åºçš„ç•Œé¢

æ‰§è¡Œä¹‹å‰ï¼Œå¦‚æœä¸æ”¾å¿ƒï¼Œæƒ³ç¡®è®¤ä¸€ä¸‹ï¼Œçœ‹çœ‹è¢« suspend çš„ä»»åŠ¡åˆ—è¡¨

    $ jobs

ä¸¥æ ¼åœ°è¯´ï¼Œjobs çœ‹çš„ä¸ä»…ä»…æ˜¯ suspend çš„ä»»åŠ¡ï¼Œæ‰€ä»¥ï¼Œå¦‚æœä½ æœ‰å…¶ä»–åå°ä»»åŠ¡ï¼Œä¹Ÿä¼šåˆ—å‡ºæ¥ã€‚

ç„¶åå†è§£é™¤ä½ ç°åœ¨çš„shellè·Ÿåˆšæ‰è¿™ä¸ªè¿›ç¨‹çš„æ‰€å±å…³ç³»

    $ disown

è¿™ä¸ªæ—¶å€™å†æ‰§è¡Œ `jobs`ï¼Œå°±çœ‹ä¸åˆ°é‚£ä¸ªè¿›ç¨‹äº†ï¼Œç”¨ `ps -ef` å¯ä»¥çœ‹åˆ°å“¦ã€‚ç°åœ¨å°±å¯ä»¥å…³æ‰ç»ˆç«¯ï¼Œä¸‹ç­å›å®¶äº†ã€‚

å®ä¾‹

    # è¦æ‰§è¡Œå¾ˆä¹…çš„å‘½ä»¤ï¼Œä¸ç­‰äº†ï¼ŒæŒ‰ä¸‹ ctrl+z åˆ‡æ¢å› shell çš„å‘½ä»¤æç¤ºç¬¦ä¸‹
    $ sleep 3600
    ^Z
    [1]+  Stopped                 sleep 3600

    # æŸ¥çœ‹å½“å‰åå°ä»»åŠ¡ï¼Œå¯ä»¥çœ‹åˆ°ä¸€ä¸ªæŒ‚èµ·çš„
    $ jobs
    [1]+  Stopped                 sleep 3600

    # è®©åå°ä»»åŠ¡ç»§ç»­è¿è¡Œ
    $ bg %1
    [1]+ sleep 3600 &

    # æŸ¥çœ‹å½“å‰åå°ä»»åŠ¡ï¼Œå¯ä»¥çœ‹åˆ°ä¹‹å‰è¢«æŒ‚èµ·çš„ä»»åŠ¡ç°åœ¨æ˜¯æ­£å¸¸è¿è¡Œäº†
    $ jobs
    [1]+  Running                 sleep 3600 &

    # è§£é™¤å½“å‰ä¼šè¯è·Ÿåå°ä»»åŠ¡çš„å½’å±
    $ disown

    # å½“å‰ä¼šè¯æ²¡æœ‰åå°ä»»åŠ¡äº†
    $ jobs

    # å…¶å®é‚£ä¸ªä»»åŠ¡è¿˜åœ¨æ‰§è¡Œï¼Œåªæ˜¯ä¸å½’å±å½“å‰ä¼šè¯äº†
    $ ps -ef | grep sleep
    501 30787 30419   0  6:00PM ttys000    0:00.00 sleep 3600
    501 33681 30419   0  6:02PM ttys000    0:00.00 grep sleep

    # é€€å‡ºä¼šè¯ï¼Œåå°ä»»åŠ¡ä¸ä¼šå†è·Ÿéšå…³é—­äº†
    $ exit

#### åçŸ¥åè§‰å‘ç°ä¸€ä¸ªå‘½ä»¤è¦æ‰§è¡Œå¾ˆä¹…ï¼Œreptyr é€šè¿‡ pid åˆ‡æ¢è¿›ç¨‹çš„ tty åˆ° tmux

ssh è¿æ¥åˆ°æœåŠ¡å™¨ï¼ŒåçŸ¥åè§‰å‘ç°ä¸€ä¸ªå‘½ä»¤è¦æ‰§è¡Œå¾ˆä¹…ï¼Œåˆ°ç‚¹ä¸‹ç­äº†æ€ä¹ˆåŠï¼Ÿåæ‚”æ²¡åœ¨ tmux é‡Œæ‰§è¡Œå¥½å°´å°¬ã€‚

ä¸éœ€è¦æ”¹åå°æ‰§è¡Œï¼ŒæŠŠå®ƒåˆ‡æ¢åˆ° tmux é‡Œ

    # https://github.com/nelhage/reptyr
    $ sudo apt install reptyr

åœ¨ tmux é‡Œæ‰§è¡Œ reptyrï¼Œè¿™æ ·å°±æŠŠè¯¥è¿›ç¨‹åˆ‡æ¢åˆ°å½“å‰çš„ tmux é¢æ¿é‡Œæ‰§è¡Œäº†

    $ reptyr <pid>

ç„¶åå°±å¯ä»¥æ„‰å¿«çš„æ–­å¼€ ssh å…³æœºå›å®¶äº†ã€‚

#### é¿å…åå°æ‰§è¡Œ

    https://www.cnblogs.com/f-ck-need-u/p/8661501.html

shell è„šæœ¬ä¸­çš„ä¸€ä¸ª"ç–‘éš¾æ‚ç—‡"ï¼ŒCTRL+C ä¸­æ­¢äº†è„šæœ¬è¿›ç¨‹ï¼Œè¿™ä¸ªè„šæœ¬å´è¿˜åœ¨åå°ä¸æ–­è¿è¡Œï¼Œä¸”æ—¶ä¸æ—¶åœ°è¾“å‡ºç‚¹ä¿¡æ¯åˆ°ç»ˆç«¯(æˆ‘è¿™é‡Œæ˜¯å¾ªç¯ä¸­çš„echoå‘½ä»¤è¾“å‡ºçš„)ï¼Œåªèƒ½æ‰‹åŠ¨ ps åˆ—è¡¨è‡ªå·±æ‰¾å‡ºæ¥ killã€‚

è¿™æ˜¯å› ä¸º shell è„šæœ¬ä¸­æœ‰ä¸€äº›åå°ä»»åŠ¡ä¼šç›´æ¥æŒ‚é åœ¨ init/systemd è¿›ç¨‹ä¸‹ï¼Œè€Œä¸ä¼šéšç€è„šæœ¬é€€å‡ºè€Œåœæ­¢ã€‚

ä¾‹å¦‚ï¼š

    $ cat test1.sh
    #!/bin/bash
    echo $BASHPID
    sleep 50 &

    $ ps -elf | grep slee[p]
    0 S root      10806      1  0  80   0 - 26973 hrtime 19:26 pts/1    00:00:00 sleep 50

è„šæœ¬é€€å‡ºåï¼Œsleepè¿›ç¨‹çš„çˆ¶è¿›ç¨‹å˜ä¸ºäº†1ï¼Œä¹Ÿå°±æ˜¯æŒ‚åœ¨äº† init/systemd è¿›ç¨‹ä¸‹ã€‚

å¯ä»¥åœ¨è„šæœ¬ä¸­ç›´æ¥ä½¿ç”¨ kill å‘½ä»¤æ€æ‰ sleep è¿›ç¨‹ã€‚

    $ cat test1.sh
    #!/bin/bash
    echo $BASHPID
    sleep 50 &
    kill $!

ä½†æ˜¯ï¼Œå¦‚æœè¿™ä¸ª sleep è¿›ç¨‹æ˜¯åœ¨å¾ªç¯ä¸­(forã€whileã€untilå‡å¯)ï¼Œé‚£å°±éº»çƒ¦äº†ã€‚

ä¾‹å¦‚ä¸‹é¢çš„ä¾‹å­ï¼Œç›´æ¥å°†å¾ªç¯æ”¾å…¥åå°ï¼Œæ€æ‰sleepã€æˆ–è€…exitã€æˆ–è€…æ€æ‰è„šæœ¬è‡ªèº«è¿›ç¨‹ã€æˆ–è€…è®©è„šæœ¬è‡ªåŠ¨é€€å‡ºã€ç”šè‡³execé€€å‡ºå½“å‰è„šæœ¬shelléƒ½æ˜¯æ— æ•ˆçš„ã€‚

    $ cat test1.sh
    #!/bin/bash
    echo $BASHPID

    while true;do
        sleep 50
        echo 1
    done &

    $ killall sleep
    $ kill $BASHPID

ç©¶å…¶åŸå› ï¼Œæ˜¯å› ä¸º while/for/until ç­‰æ˜¯ bash å†…ç½®å‘½ä»¤ï¼Œå®ƒä»¬çš„ç‰¹æ®Šæ€§åœ¨äº bash è¿›ç¨‹ã€‚bash è¿›ç¨‹å¯¹èƒ½ç›´æ¥æ‰§è¡Œçš„å†…ç½®å‘½ä»¤éƒ½ä¸ä¼šåˆ›å»ºæ–°è¿›ç¨‹ï¼Œå®ƒä»¬ç›´æ¥åœ¨å½“å‰ bash è¿›ç¨‹å†…éƒ¨è°ƒç”¨æ‰§è¡Œï¼Œæ‰€ä»¥æˆ‘ä»¬ç”¨ ps/top ç­‰è¿›ç¨‹æŸ¥çœ‹å·¥å…·æ˜¯æ•æ‰ä¸åˆ° cdã€letã€expr ç­‰ç­‰å†…ç½®å‘½ä»¤çš„ã€‚

ä¸æ­¢ bash å†…ç½®å‘½ä»¤ï¼Œè¿˜æœ‰å‡ ä¸ªæ¯”è¾ƒç‰¹æ®Šçš„å…³é”®å­—ï¼šwhileã€forã€untilã€ifã€case ç­‰ï¼Œå®ƒä»¬æ— æ³•ç›´æ¥æ‰§è¡Œï¼Œéœ€è¦ç»“åˆå…¶ä»–å…³é”®å­—(å¦‚ do/done/then ç­‰)æ‰èƒ½æ‰§è¡Œã€‚éåå°æƒ…å†µä¸‹ï¼Œbash è¿›ç¨‹ä¼šç›´æ¥å¸¦å®ƒä»¬æ‰§è¡Œï¼Œä½†å½“å®ƒä»¬æ”¾è¿›åå°åï¼Œå®ƒä»¬å¿…é¡»å…ˆè¿æ¥åˆ°ä¸€ä¸ªçˆ¶è¿›ç¨‹æä¾›æ‰§è¡Œç¯å¢ƒï¼š

    å¦‚æœæ˜¯åœ¨å½“å‰ shell ä¸­æ”¾è¿›åå°ï¼Œåˆ™çˆ¶è¿›ç¨‹æ˜¯æ–°ç”Ÿæˆçš„ bash è¿›ç¨‹ã€‚è¿™ä¸ªæ–°çš„ bash è¿›ç¨‹åªè´Ÿè´£ä¸€ä»¶äº‹ï¼Œå°±æ˜¯æä¾›åå°è¿è¡Œçš„ bash ç¯å¢ƒã€‚

    å¦‚æœæ˜¯åœ¨ .sh è„šæœ¬ä¸­æ”¾è¿›åå°ï¼Œåˆ™çˆ¶è¿›ç¨‹å°±æ˜¯è„šæœ¬è¿›ç¨‹ã€‚è„šæœ¬è¿›ç¨‹ä¹Ÿç®—æ˜¯ bash è¿›ç¨‹çš„ç‰¹æ®Šå˜ä½“ï¼Œä¹Ÿç›¸å½“äºä¸€ä¸ªæ–°çš„ bash è¿›ç¨‹ã€‚

    æ— è®ºçˆ¶è¿›ç¨‹æ˜¯è„šæœ¬è¿›ç¨‹è¿˜æ˜¯æ–°çš„ bash è¿›ç¨‹ï¼Œå®ƒä»¬éƒ½æ˜¯å½“å‰ shell ä¸‹çš„å­ shellã€‚å¦‚æœæŸä¸ªå­ shell ä¸­æœ‰åå°è¿›ç¨‹ï¼Œå½“æ€æ‰å­ shellï¼Œæ„å‘³ç€æ€æ‰äº†å…¶ä¸‹è¿è¡Œè¿›ç¨‹çš„çˆ¶è¿›ç¨‹ã€‚

ä¸¾ä¸ªä¾‹å­è¯´æ˜ä¸‹ï¼Œç›®å‰ bash è¿›ç¨‹ä¿¡æ¯ä¸ºï¼š

    [root@xuexi ~]# pstree -p | grep bash
            |-sshd(1142)-+-sshd(5396)---bash(5398)---mysql(5659)
            |            `-sshd(7006)-+-bash(7008)
            |                         `-bash(12280)-+-grep(13294)

å°† forã€unitlã€whileã€caseã€if ç­‰è¯­å¥æ”¾è¿›åå°

    [root@xuexi ~]# if true;then sleep 10;fi &

ç„¶åå†æŸ¥ bash è¿›ç¨‹ä¿¡æ¯ï¼š

    [root@xuexi ~]# pstree -p | grep bash
            |-sshd(1142)-+-sshd(5396)---bash(5398)---mysql(5659)
            |            `-sshd(7006)-+-bash(7008)---bash(13295)---sleep(13296)
            |                         `-bash(12280)-+-grep(13298)

å¯¹éå†…ç½® bash å‘½ä»¤æ¥è¯´ï¼Œè¿è¡Œåä¸ä¾èµ–äº bash æä¾›è¿›ç¨‹ï¼Œè€Œæ˜¯ç›´æ¥æŒ‚åœ¨ç³»ç»Ÿçš„ init/systemd ä¸‹ï¼Œè€Œ bash å†…ç½®å‘½ä»¤ä¼šä¾èµ–å…¶çˆ¶è¿›ç¨‹ï¼Œæ‰€ä»¥åœ¨æ€æ‰ bash è¿›ç¨‹(ä¸Šé¢pid=7008)çš„æ—¶å€™ï¼Œå†…ç½®å‘½ä»¤çš„çˆ¶è¿›ç¨‹(pid=13295)ä¼šç«‹å³å¸¦ç€å®ƒä¸‹é¢çš„è¿›ç¨‹(sleep)æŒ‚åœ¨ init/systemd ä¸‹ï¼Œæ­¤æ—¶è¯¥çˆ¶è¿›ç¨‹å’Œç»ˆç«¯æ— å…³ï¼Œå³ä½¿ä½ é€€å‡ºäº†å½“å‰è¿æ¥ï¼Œä¹Ÿä¼šè¢«ç³»ç»Ÿæ–°å»ºä¸€ä¸ª bash ç»§ç»­è¿è¡Œã€‚

è§£å†³æ–¹æ¡ˆ

```bash

#!/bin/bash

trap "pkill -f $(basename $0);exit 1" SIGINT SIGTERM EXIT ERR

while true;do
    sleep 1
    echo "hello world!"
done &

# do something
sleep 60

```

æ›´æ–¹ä¾¿æ›´ç²¾ç¡®çš„è‡ªæ€æ‰‹æ®µ `man kill`ã€‚åœ¨è¯¥æ‰‹å†Œä¸­è§£é‡Šäº†ï¼Œå¦‚æœ kill çš„ pid å€¼ä¸º0ï¼Œè¡¨ç¤ºå‘é€ä¿¡å·ç»™å½“å‰è¿›ç¨‹ç»„ä¸­æ‰€æœ‰è¿›ç¨‹ï¼Œå¯¹ shell è„šæœ¬æ¥è¯´è¿™æ„å‘³ç€æ€æ‰è„šæœ¬ä¸­äº§ç”Ÿçš„æ‰€æœ‰è¿›ç¨‹ã€‚æ–¹æ¡ˆå¦‚ä¸‹ï¼š

```bash

#!/bin/bash

trap "echo 'signal_handled:';kill 0" SIGINT SIGTERM

while true;do
    sleep 5
    echo "hello world! hello world!"
done &
sleep 60

```

### è®°å½•å‘½ä»¤æ‰§è¡Œçš„è¾“å‡º script

æ‰§è¡Œ

    script -a --t=your_time_log your_script_log -q

ä¼šè¿›å…¥æ–°çš„ shell ç¯å¢ƒï¼Œè¿™é‡Œæ‰§è¡Œä½ çš„å‘½ä»¤è¡Œæ“ä½œï¼Œéƒ½ä¼šè¢«è®°å½•ï¼Œè¿ vi æ“ä½œéƒ½èƒ½è®°å½•ï¼Œç„¶åæ‰§è¡Œ exit é€€å‡ºshellå³å¯ã€‚

å›æ”¾æ“ä½œ

    scriptreplay --timing=your_time_log your_script_log

### ç°ä»£åŒ–çš„æŸ¥çœ‹æ–‡ä»¶åˆ—è¡¨ exa

å„å¤§å‘è¡Œç‰ˆéƒ½æœ‰æä¾›åä¸º exa çš„è½¯ä»¶åŒ…ï¼Œä½¿ç”¨æ—¶åŠ å‚æ•°æ‰å‡ºæ•ˆæœ

    $ exa -lhgia
    inode Permissions Size User Group Date Modified Name
    3767 drwxr-xr-x@    - uu   uu     3 Jun 04:59  .git
    110635 .rw-r--r--@   18 uu   uu     3 Jun 00:09  1.txt
    110627 .rw-r--r--@   16 uu   uu     3 Jun 00:09  a.txt

### ç»ˆç«¯ä¸‹çš„æ–‡ä»¶èµ„æºç®¡ç†å™¨ ranger / Midnight Commander

Terminal File Browser å¾ˆå¤šï¼Œè‡ªå·±æ…¢æ…¢ç ”ç©¶å§ã€‚

nnn

    https://github.com/jarun/nnn

    vi é”®ä½æ“ä½œï¼Œç”¨æ–¹å‘é”®æˆ– vi çš„æ–¹å‘é”®åœ¨å„ä¸ªåˆ—è¡¨é¡¹ç§»åŠ¨ï¼Œç©ºæ ¼å³é€‰æ‹©ï¼Œp æ˜¯ç²˜è´´ã€‚

ranger ä½¿ç”¨çƒ­é”®æ“ä½œï¼Œè‡ªåŠ¨é¢„è§ˆæ–‡æœ¬æ–‡ä»¶ï¼Œè¿˜æ”¯æŒæ‰“å¼€å…¶å®ƒç±»å‹çš„æ–‡ä»¶ï¼Œéå¸¸æ–¹ä¾¿

    https://ranger.github.io/
        https://github.com/ranger/ranger

    å·¦ä¸­å³ä¸‰å±ï¼šä¸­é—´å±å¹•ä¿æŒæ˜¾ç¤ºå½“å‰ç›®å½•ï¼Œå·¦å±æ˜¾ç¤ºä¸Šä¸€çº§çš„ç›®å½•æ ‘ï¼Œå³å±æ˜¾ç¤ºä¸‹ä¸€çº§çš„ç›®å½•åˆ—è¡¨æˆ–æ–‡ä»¶é¢„è§ˆï¼Œç”¨æ–¹å‘é”®æˆ– vi çš„æ–¹å‘é”®åœ¨å„ä¸ªçª—å£ä¸­ç§»åŠ¨

    æ“ä½œéƒ½æ˜¯åœ¨ä¸­é—´å±å¹•ä¸Šçš„ï¼Œå¯¹æ–‡æœ¬ç±»å‹çš„æ–‡ä»¶ä¼šåœ¨å³å±é¢„è§ˆï¼Œå¦‚æœå›è½¦é€‰æ‹©è¯¥æ–‡ä»¶ä¼šè‡ªåŠ¨è°ƒç”¨å¯¹åº”çš„ç¼–è¾‘å™¨æ‰“å¼€ï¼Œéå¸¸æ–¹ä¾¿ã€‚å¦‚æœrangerä¸çŸ¥é“å¦‚ä½•å¤„ç†è¯¥æ–‡ä»¶ï¼Œåˆ™ä¼šæ˜¾ç¤ºè¯¥æ–‡ä»¶çš„ä¿¡æ¯ï¼ŒæŒ‰ q é”®é€€å‡ºã€‚

    æ“ä½œçƒ­é”®

        æŒ‰ ? æ˜¾ç¤ºå¿«æ·é”®ï¼Œç„¶åæ ¹æ®å±å¹•æç¤ºæŒ‰é”®é€‰æ‹©å³å¯

        æŒ‰ ctl+h åˆ‡æ¢æ˜¯å¦æ˜¾ç¤ºéšè—æ–‡ä»¶

        ç”¨ç©ºæ ¼é€‰æ‹©æ–‡ä»¶ï¼ŒæŒ‰ y å¤åˆ¶å®ƒï¼Œç„¶åå¯¼èˆªåˆ°ç›®æ ‡ç›®å½•å†æŒ‰ p ç²˜è´´

        æŒ‰ delete é”®åˆ é™¤å½“å‰è¢«é€‰ä¸­çš„æ–‡ä»¶

    è¿™ ranger æˆ‘ç”¨å®ƒé€‰æ‹©äº†å‡ ä¸ªæ–‡ä»¶å¤åˆ¶åˆ°åˆ«å¤„ï¼Œå±…ç„¶å¤åˆ¶äº†å…¶å®ƒæ–‡ä»¶ï¼ŒæŒ‰åˆ é™¤è¿˜æ²¡ååº”ï¼Œä¸æ•¢ç”¨äº†ã€‚

Midnight Commander å‘½ä»¤è¡Œä¸‹ä½¿ç”¨ä¸¤ä¸ªé¢æ¿æ¥å¤„ç†æ–‡ä»¶å’Œç›®å½•

     https://midnight-commander.org/
        https://github.com/MidnightCommander/mc
        https://sourceforge.net/projects/mcwin32/files/

    ä¸­æ–‡è¯´æ˜

        https://www.debian.org/doc/manuals/debian-reference/ch01.zh-cn.html#_midnight_commander_mc

    sudo apt install mc

Far Manager for Windows ç±»ä¼¼ mcï¼Œå‘½ä»¤è¡Œä¸‹ä½¿ç”¨ä¸¤ä¸ªé¢æ¿æ¥å¤„ç†æ–‡ä»¶å’Œç›®å½•

    https://conemu.github.io/en/FarManager.html

Vifm ä½¿ç”¨ vi å¿«æ·é”®çš„æ“ä½œçš„æ–‡ä»¶ç®¡ç†å™¨

    https://vifm.info/
        https://github.com/vifm/vifm

### åŸºäºæ–‡æœ¬çš„ç”¨æˆ·ç•Œé¢ï¼ˆTUIï¼‰åº“ whiptail

newt åº“çš„ whiptail åœ¨å‘½ä»¤è¡Œç¯å¢ƒä¸‹ï¼Œä¸éœ€è¦æ¡Œé¢å›¾å½¢ç•Œé¢å³å¯æ˜¾ç¤ºç®€å•çš„å›¾å½¢ç•Œé¢

    https://www.redhat.com/sysadmin/use-whiptail

    https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/6/html/6.2_technical_notes/newt

æ˜¾ç¤ºçš„å†…å®¹é‡‡ç”¨åŸºäºæ–‡æœ¬çš„ç”¨æˆ·ç•Œé¢ï¼ˆTUIï¼‰æ ¼å¼ï¼Œå¹¶ä½¿ç”¨ Tab é”®è¿›è¡Œå¯¼èˆªï¼Œä½¿ç”¨ç©ºæ ¼é”®é€‰æ‹©ã€‚å¦‚æ ‘è“æ´¾çš„ raspi-config é…ç½®ç¨‹åºå°±æ˜¯ç”¨ whiptail å®ç°çš„ã€‚

### æŒ‰å†…å®¹æŸ¥æ‰¾æ–‡ä»¶ï¼šfind + grep + xargs ç»„åˆ

å¦‚æœå•çº¯çš„æŸ¥æ‰¾æ–‡ä»¶åï¼Œç”¨ `locate` å‘½ä»¤æœ€å¿«ï¼Œç¼ºç‚¹æ˜¯å®ƒæ¯å¤©å®šæ—¶æ›´æ–°ä¸€æ¬¡æ•°æ®åº“ï¼Œæœ€æ–°çš„æ–‡ä»¶å¯èƒ½æ‰¾ä¸åˆ°ï¼Œä½†ç‰¹åˆ«é€‚åˆæŸ¥æ‰¾ç³»ç»Ÿçš„åº“æ–‡ä»¶çš„ä½ç½®ï¼Œæ¯”å¦‚ï¼š

    ç›®å‰éƒ½ç¬¦å·é“¾æ¥æŒ‡å‘ plocate äº†ï¼Œå…¶é…ç½®æ–‡ä»¶åœ¨  /etc/updatedb.conf `man updatedb`

    # apt install plocate
    $ locate libgcc

åœ¨ $PATH æŸ¥æ‰¾ä½ çš„å‘½ä»¤

    $ which -a pwd

åœ¨  $PATH å’Œ $MANPATH æŸ¥æ‰¾åŒ¹é…çš„æ–‡ä»¶å

    $ whereis -l pwd

åˆ—å‡ºæ‰€æœ‰æ–‡ä»¶

    $ find ç›®å½•å

    $ tree ç›®å½•å

æŸ¥æ‰¾æŒ‡å®šæ–‡ä»¶

    find ./ -name 2.sql

    å¯¹å½“å‰ç›®å½•ä¸‹æ‰¾åˆ°çš„æ‰€æœ‰æ–‡ä»¶ï¼Œç”Ÿæˆæ ¡éªŒç 
    find . -type f -exec sha256sum \{\} \; > checksum-file

    æŸ¥æ‰¾æ–‡ä»¶å¹¶æ‰“å° â€œæ–‡ä»¶å:å†…å®¹â€
    find /sys/module -name refcnt -printf '\n%p: ' -exec cat {} \;

ç»„åˆæ‰§è¡Œ grep å‘½ä»¤æŸ¥æ‰¾æ–‡ä»¶å†…å®¹ï¼š

    # å…»æˆå¥½ä¹ æƒ¯ï¼Œå…ˆåˆ—å‡ºæ¥çœ‹çœ‹ï¼Œåˆ°åº•æ“ä½œäº†å“ªäº›æ–‡ä»¶
    $ find ./ -name '*.mp4' -exec echo {} \;

æ˜¾ç¤ºå†…å®¹ï¼Œä½†æ˜¯å¸¦ç›®å½•äº†

    find ./ -name "*" -exec grep "gitee" {} \;

æ˜¾ç¤ºå†…å®¹ï¼Œæ’é™¤ç›®å½•

    find ./ -name "*" -type f -exec grep -in "gitee" {} \;

æ˜¾ç¤ºå†…å®¹ï¼Œæ˜¾ç¤ºæ–‡ä»¶åå’Œè¡Œå·ï¼Œæ’é™¤ç›®å½•

    find ./ -name "*" -type f |xargs grep -in 'gitee'

åœ¨ jar åŒ…ä¸­æŸ¥æ‰¾æŒ‡å®šçš„ç±»åï¼Œæ˜¾ç¤º jar åŒ…åç§°å’Œæ–‡ä»¶åç§°

    find ./ -name "*.jar" |xargs -I{} bash -c "unzip -l {} |grep LicenseUtil && echo {}"

æ™®é€šçš„ç§»åŠ¨æ–‡ä»¶å‘½ä»¤ï¼Œä¸æ”¯æŒæ–‡ä»¶åå¸¦ç‰¹æ®Šå­—ç¬¦

    find ./ -name '*.mp4' -exec mv {} /mnt/movies/ \;

ç§»åŠ¨æŒ‡å®šæ–‡ä»¶ï¼Œæ–‡ä»¶åå¯ä»¥æ˜¯ 'abc [def] :xyz.mp4' è¿™æ ·ç‰¹æ®Šå­—ç¬¦

    find . -type f -name "*.mp4" -print0 | xargs -0 -I {} sh -c 'mv "$1" /mnt/movies/' _ {}

xargs å‘½ä»¤æ˜¯ç»™å…¶ä»–å‘½ä»¤ä¼ é€’å‚æ•°çš„ä¸€ä¸ªè¿‡æ»¤å™¨ï¼Œå¸¸ä½œä¸ºç»„åˆå¤šä¸ªå‘½ä»¤çš„ä¸€ä¸ªå·¥å…·ã€‚å®ƒä¸»è¦ç”¨äºå°†æ ‡å‡†è¾“å…¥æ•°æ®è½¬æ¢æˆå‘½ä»¤è¡Œå‚æ•°ï¼Œxargs èƒ½å¤Ÿå¤„ç†ç®¡é“æˆ–è€…æ ‡å‡†è¾“å…¥å¹¶å°†å…¶è½¬æ¢æˆç‰¹å®šå‘½ä»¤çš„å‘½ä»¤å‚æ•°ã€‚ä¹Ÿå°±æ˜¯è¯´ find çš„ç»“æœç»è¿‡ xargs åï¼Œå…¶å®å°† find æ‰¾å‡ºæ¥çš„æ–‡ä»¶åé€ä¸ªä¼ é€’ç»™ grep åšå‚æ•°ï¼Œgrep å†åœ¨è¿™äº›æ–‡ä»¶å†…å®¹ä¸­æŸ¥æ‰¾å…³é”®å­— testã€‚

    ls *.txt | xargs -t -I{} cp {} /tmp/{}

        -t ï¼š æ‰“å°å†…å®¹ï¼Œå»æ‰\nä¹‹åçš„å­—ç¬¦ä¸²

        -I : å®šä¹‰å ä½ç¬¦

    å®šä¹‰å ä½ç¬¦{}åï¼Œå‘½ä»¤è¡Œåé¢çš„å‘½ä»¤å¯ä»¥å¤šæ¬¡ä½¿ç”¨è¯¥å ä½ç¬¦ï¼Œä¸€èˆ¬æ˜¯å­—ç¬¦ä¸²å¤„ç† awk sed cut tr wc ç­‰

find å‘½ä»¤æœ¬èº«å°±æä¾›äº† -exec é€‰é¡¹æ¥å¯¹æ‰¾åˆ°çš„æ–‡ä»¶æ‰§è¡Œå‘½ä»¤ï¼Œè¿™è®©äººä¸ç¦ç–‘æƒ‘ä¸ºä»€ä¹ˆè¿˜è¦ä½¿ç”¨ xargsã€‚å®é™…ä¸Šï¼Œ-exec åœ¨æ¯æ¬¡æ‰¾åˆ°åŒ¹é…çš„æ–‡ä»¶æ—¶éƒ½ä¼šå¯åŠ¨ä¸€ä¸ªæ–°çš„è¿›ç¨‹æ¥æ‰§è¡Œå‘½ä»¤ï¼Œè€Œ xargs ä¼šå°½å¯èƒ½åœ°å°†å¤šä¸ªæ–‡ä»¶åä½œä¸ºå‚æ•°ä¼ é€’ç»™ä¸€ä¸ªå‘½ä»¤ï¼Œä»è€Œå‡å°‘äº†è¿›ç¨‹çš„åˆ›å»ºã€‚å› æ­¤ï¼Œåœ¨å¤„ç†å¤§é‡æ–‡ä»¶æ—¶ï¼Œä½¿ç”¨ xargs ä¼šæ›´æœ‰æ•ˆç‡ã€‚

éå†ç›®å½•ä¸­çš„æ–‡ä»¶é€ä¸ªå¤„ç†ï¼Œå¦‚æœæ–‡ä»¶åæœ‰ç©ºæ ¼ä¼šå¯¼è‡´å¤„ç†çš„å‘½ä»¤å‡ºç°é—®é¢˜ï¼Œè§£å†³åŠæ³•ï¼š

    # è¿™ä¸ªç”¨æ³•æœ€å¥½ while read...
    find your_dir -type f |while read fname; do
        sha256sum "$fname" >>sums.txt
    done

    # è¿™ä¸ªä¼šæŠŠallsum.txtä¹Ÿå¸¦ä¸Š
    find . -type f -exec sha256sum "{}" >>allsum.txt \;

    find . -name '*.txt' -exec ls -l "{}" \;

    # Don't do this
    # ä¸‹é¢è¿™ä¸ªç”¨æ³•ä½¿ç”¨å‘½ä»¤ç¼“å†²åŒºä¿å­˜æ‰€æœ‰æ–‡ä»¶åï¼Œç›¸å½“äº x=$(find . -name"*.txt")
    # æ–‡ä»¶ç‰¹åˆ«å¤šçš„æ—¶å€™ä¼šæº¢å‡ºä¸¢æ•°
    for file in $(find . -name "*.txt")
    do
        â€¦code using"$file"
    done

grep -n æ˜¾ç¤ºè¦æ‰¾çš„å­—ç¬¦ä¸²æ‰€åœ¨çš„è¡Œå· -i å¿½ç•¥å¤§å°å†™

    $ grep -in 'apt-get' README.rst
    20:     sudo apt-get install fonts-powerline

grep -w åŒ¹é…å•è¯ï¼Œç”¨äºæœç´¢ç»“æœä¸­ç±»ä¼¼å­—æ¯ç»„åˆå¤ªå¤šçš„æƒ…å†µã€‚

grep -e å¯ä»¥å¤šä¸ªè¿å†™ï¼Œå¦‚ `grep -e abc -e def` æŸ¥æ‰¾ abc æˆ– def ã€‚

grep ç”¨å¦‚ä¸‹å‚æ•°æ›¿ä»£äº† egrep å’Œ fgrep å‘½ä»¤

    egrep with grep -E

    fgrep with grep -F

ripgrep æ›¿ä»£ grepï¼Œè§£å†³äº†ä¸å¸¦æ–‡ä»¶åæŒ‚ä½çš„é—®é¢˜ï¼Œrg ä¼šé»˜è®¤æŸ¥æ‰¾æ‰€æœ‰æ–‡ä»¶ã€‚æ›´æ¨è ackï¼Œå‚è§ç« èŠ‚ [ackg ç»™ç»ˆç«¯è¾“å‡ºçš„è‡ªå®šä¹‰å…³é”®å­—åŠ é¢œè‰²]ã€‚

ä»å½“å‰ç›®å½•åŠå­ç›®å½•åˆ—å‡ºæ‰€æœ‰ç›®å½•åå’Œæ–‡ä»¶åï¼Œæ’é™¤ç›®å½• .git å’Œ __pycache__ï¼Œé€ä¸ªæ–‡ä»¶çš„æŸ¥æ‰¾æ–‡ä»¶å†…å®¹åŒ…å«å­—ç¬¦ä¸² â€œloggâ€ çš„è¡Œï¼Œåˆ—å‡ºæ–‡ä»¶åã€è¡Œå·ã€å†…å®¹

    # æŸ¥æ‰¾å½“å‰ç›®å½•åŠå­ç›®å½•æ‰€æœ‰æ–‡ä»¶ï¼Œåˆ—å‡ºåŒ…å«æŒ‡å®šå†…å®¹çš„çš„è¡Œï¼Œå¦‚ `grepf logg`
    # find æ²¡æ³•åŠ  -type fï¼Œå¦åˆ™æ²¡æ³•è¿‡æ»¤æŒ‡å®šç›®å½•ï¼Œåœ¨åé¢ç”¨ -d è®© grep è·³è¿‡ç›®å½•å³å¯
    find . \( -name ".git" -o -name "__pycache__" \) -prune -o -print |xargs grep --color=auto -d skip -in logg

### å­—ç¬¦å¢åˆ æ”¹ tr cut awk sed

å¯¹å¸¸ç”¨çš„ . / ç­‰åˆ†éš”ç¬¦çš„å­—ç¬¦ä¸²è¿›è¡Œæˆªå–ã€‚

æˆªå–å­—ç¬¦ä¸²çš„å‰é¢éƒ¨åˆ†

    $ dirname http://www.example.com/long/path/to/example/file.ext
    http://www.example.com/long/path/to/example

æˆªå–å­—ç¬¦ä¸²çš„åé¢éƒ¨åˆ†

    $ basename http://www.example.com/long/path/to/example/file.ext
    file.ext

æŒ‡å®šåˆ†éš”ç¬¦

    $ basename -s '.gz' abc.txt.gz
    abc.txt

tr åŠŸèƒ½1 -- æ›¿æ¢å­—ç¬¦

    $ dircolors | tr ":" "\n"
    LS_COLORS='rs=0
    ln=01;36
    so=01;35
    *.tar=01;31
    *.tgz=01;31
    *.arc=01;31

tr åŠŸèƒ½2 -- åˆ é™¤å­—ç¬¦ï¼Œä¸»è¦ç”¨äºæˆªå–å­—ç¬¦ä¸²

    $ echo "throttled=50.0"| tr -d "throttled="
    50.0

cut æŒ‰åˆ†éš”ç¬¦æ‰“å°æŒ‡å®šçš„å­—æ®µ

    $ cat /etc/passwd| cut -d ':' -f7
    /bin/bash
    /usr/sbin/nologin
    /bin/sync
    /usr/sbin/nologin

å¤æ‚ç‚¹çš„æ­£åˆ™è¡¨è¾¾å¼çš„å­—ç¬¦ä¸²æˆªå–å’Œæ›¿æ¢ï¼Œå¯ä»¥ä½¿ç”¨ bash å†…ç½®åŠŸèƒ½ï¼šecho ${url   }ï¼Œè¯¦è§ [bash å¸¸è§ç¬¦å·ç”¨æ³•](shellcmd.md)ã€‚

awk æŒ‡å®šåˆ†éš”ç¬¦ï¼Œå¯ä»¥ç”¨ç®€å•çš„è¯­å¥ç»„åˆå­—æ®µ

åˆ é™¤é‡å¤è¡Œ

    # åŒ¹é…ç›¸é‚»çš„é‡å¤è¡Œ
    awk '!a[$0]++' test.txt

    # æ–‡ä»¶é¡ºåºä¼šä¹±
    sort old_file | uniq > new_file

sed åˆ é™¤ã€æ›¿æ¢æ–‡ä»¶ä¸­çš„å­—ç¬¦ä¸²

    é€‰é¡¹ä¸å‚æ•°ï¼š

        -n ï¼šä½¿ç”¨å®‰é™(silent)æ¨¡å¼ã€‚åœ¨ä¸€èˆ¬ sed çš„ç”¨æ³•ä¸­ï¼Œæ‰€æœ‰æ¥è‡ª STDIN çš„æ•°æ®ä¸€èˆ¬éƒ½ä¼šè¢«åˆ—å‡ºåˆ°ç»ˆç«¯ä¸Šã€‚ä½†å¦‚æœåŠ ä¸Š -n å‚æ•°åï¼Œåˆ™åªæ˜¾ç¤ºé‚£äº›è¢«æ”¹å˜çš„è¡Œã€‚

        -e ï¼šç›´æ¥åœ¨å‘½ä»¤åˆ—æ¨¡å¼ä¸Šè¿›è¡Œ sed çš„åŠ¨ä½œç¼–è¾‘ï¼›

        -f ï¼šç›´æ¥å°† sed çš„åŠ¨ä½œå†™åœ¨ä¸€ä¸ªæ–‡ä»¶å†…ï¼Œ -f filename åˆ™å¯ä»¥è¿è¡Œ filename å†…çš„ sed åŠ¨ä½œï¼›

        -r ï¼šsed çš„åŠ¨ä½œæ”¯æŒçš„æ˜¯å»¶ä¼¸å‹æ­£è§„è¡¨ç¤ºæ³•çš„è¯­æ³•ã€‚(é»˜è®¤æ˜¯åŸºç¡€æ­£è§„è¡¨ç¤ºæ³•è¯­æ³•)

        -i ï¼šç›´æ¥ä¿®æ”¹è¯»å–çš„æ–‡ä»¶å†…å®¹ï¼Œè€Œä¸æ˜¯è¾“å‡ºåˆ°ç»ˆç«¯ã€‚

    åŠ¨ä½œè¯´æ˜ï¼š [n1[,n2]]function

        n1, n2 ï¼šä¸è§å¾—ä¼šå­˜åœ¨ï¼Œä¸€èˆ¬ä»£è¡¨ã€é€‰æ‹©è¿›è¡ŒåŠ¨ä½œçš„è¡Œæ•°ã€ï¼Œä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚æœæˆ‘çš„åŠ¨ä½œæ˜¯éœ€è¦åœ¨ 10 åˆ° 20 è¡Œä¹‹é—´è¿›è¡Œçš„ï¼Œåˆ™ã€ 10,20[åŠ¨ä½œè¡Œä¸º] ã€

    functionï¼š

        a ï¼šæ–°å¢ï¼Œ a çš„åé¢å¯ä»¥æ¥å­—ä¸²ï¼Œè€Œè¿™äº›å­—ä¸²ä¼šåœ¨æ–°çš„ä¸€è¡Œå‡ºç°(ç›®å‰çš„ä¸‹ä¸€è¡Œ)ï½
        c ï¼šå–ä»£ï¼Œ c çš„åé¢å¯ä»¥æ¥å­—ä¸²ï¼Œè¿™äº›å­—ä¸²å¯ä»¥å–ä»£ n1,n2 ä¹‹é—´çš„è¡Œï¼
        d ï¼šåˆ é™¤ï¼Œå› ä¸ºæ˜¯åˆ é™¤å•Šï¼Œæ‰€ä»¥ d åé¢é€šå¸¸ä¸æ¥ä»»ä½•å’šå’šï¼›
        i ï¼šæ’å…¥ï¼Œ i çš„åé¢å¯ä»¥æ¥å­—ä¸²ï¼Œè€Œè¿™äº›å­—ä¸²ä¼šåœ¨æ–°çš„ä¸€è¡Œå‡ºç°(ç›®å‰çš„ä¸Šä¸€è¡Œ)ï¼›
        p ï¼šåˆ—å°ï¼Œäº¦å³å°†æŸä¸ªé€‰æ‹©çš„æ•°æ®å°å‡ºã€‚é€šå¸¸ p ä¼šä¸å‚æ•° sed -n ä¸€èµ·è¿è¡Œï½
        s ï¼šå–ä»£ï¼Œå¯ä»¥ç›´æ¥è¿›è¡Œå–ä»£çš„å·¥ä½œå“©ï¼é€šå¸¸è¿™ä¸ª s çš„åŠ¨ä½œå¯ä»¥æ­é…æ­£è§„è¡¨ç¤ºæ³•ï¼ä¾‹å¦‚ 1,20s/old/new/g

sed çš„æ­£åˆ™è¡¨è¾¾å¼èƒ½ç©å‡ºèŠ±æ¥

    https://www.gnu.org/software/sed/manual/html_node/Regexp-Addresses.html#Regexp-Addresses

        https://www.gnu.org/software/sed/manual/html_node/BRE-syntax.html#BRE-syntax

        https://www.gnu.org/software/sed/manual/html_node/ERE-syntax.html#ERE-syntax

ç¤ºä¾‹ï¼š

æ‰“å°æ–‡ä»¶å†…å®¹ï¼Œè·³è¿‡ç¬¬ä¸€è¡Œæ ‡é¢˜è¡Œ

    cat xxx.txt |sed 1d

    cat xxx.txt |sed -n '2,$p'

ç»™æ‰€æœ‰æ²¡æœ‰#å¼€å¤´çš„è¡Œæ”¹ä¸º#å¼€å¤´

    # sed '/[^#]/ s/^[^#]/#&/' /etc/dhcpcd.conf
    sed 's/^[^#]/#&/' /etc/dhcpcd.conf

    åœ¨æ–‡ä»¶çš„åŒ¹é…è¡Œå‰é¢åŠ ä¸Š#æ³¨é‡Š
    # å‰é¢çš„ä¸¤ä¸ªæ–œçº¿ // æ˜¯sedçš„æ¨¡å¼åŒ¹é…ï¼Œå¯åŒ¹é…æ–‡å­—ä¸­çš„ç©ºæ ¼ï¼Œåé¢çš„ s// æ›¿æ¢æ“ä½œæ˜¯åœ¨å‰é¢æ¨¡å¼åŒ¹é…åˆ°çš„è¡Œä¸­åš
    #     s       æ›¿æ¢
    #     ^       å¼€å¤´åŒ¹é…
    #     [^#]    åŒ¹é…é#
    #     #&      ç”¨&æ¥åŸå°ä¸åŠ¨å¼•ç”¨å‰é¢åŒ¹é…åˆ°çš„è¡Œå†…å®¹ï¼Œåœ¨å…¶å‰é¢åŠ ä¸Š#å·
    #     g       å…¨éƒ¨ï¼ˆåªåŒ¹é…ç‰¹å®šè¡Œä¸åŠ gï¼‰

        sed '/^static domain_name_servers=8.8.8.8/ s/^[^#].*domain_name_servers.*/#&/g' /etc/dhcpcd.conf

    åœ¨æ–‡ä»¶çš„åŒ¹é…è¡Œå‰é¢å–æ¶ˆ#æ³¨é‡Š
    # å‰é¢çš„ä¸¤ä¸ªæ–œçº¿ // æ˜¯sedçš„æ¨¡å¼åŒ¹é…ï¼Œå¯åŒ¹é…æ–‡å­—ä¸­çš„ç©ºæ ¼ï¼Œåé¢çš„ s// æ›¿æ¢æ“ä½œæ˜¯åœ¨å‰é¢æ¨¡å¼åŒ¹é…åˆ°çš„è¡Œä¸­åš
    #     s       æ›¿æ¢ï¼Œåé¢æ²¡æœ‰gåˆ™åªåšä¸€æ¬¡
    #     ^#      å¼€å¤´çš„#
    #     //      æ›¿æ¢å†…å®¹ä¸ºç©ºï¼Œå³åˆ é™¤

        sed '/^#static domain_name_servers=192.168.1.1/ s/^#//' /etc/dhcpcd.conf

æ¨¡å¼åŒ¹é…ç®€å†™ï¼Œæ›¿æ¢æ»¡è¶³æ¡ä»¶è¡Œçš„å›è½¦ä¸ºé€—å·

    sed 'H;1h;$!d;x;y/\n/,/'

æŠŠå­—ç¬¦ä¸² 'bt-tracker=' åé¢çš„å†…å®¹æ›¿æ¢ä¸ºå˜é‡ $TRACKER çš„å€¼

    # æ­£åˆ™è¡¨è¾¾å¼åº”ç”¨ï¼šæ‹¬å·ä¸ºæ­£åˆ™è¡¨è¾¾å¼çš„æ¨¡å¼åŒ¹é…ï¼Œ@æ˜¯æ¨¡å¼åŒºå’Œæ“ä½œåŒºçš„åˆ†éš”ç¬¦
    # \1è¡¨ç¤ºç¬¬ä¸€ä¸ªæ‹¬å·ä¸­çš„å†…å®¹ï¼Œ${TRACKER}å¼•ç”¨å˜é‡çš„å†…å®¹
    sed -i "s@^\(bt-tracker=\).*@\1${TRACKER}@" btconfig.txt

    sed -i.bak xxx abc.txt ä¼šå¤‡ä»½æ–‡ä»¶åˆ°abc.txt.bak

èŒƒå›´åˆ é™¤åŒ¹é…æ¨¡å¼è¡Œï¼Œåªæ˜¾ç¤ºåˆ é™¤åçš„ç»“æœ

    sed -n '/start_line/,/end_line/!p' your_file

èŒƒå›´åˆ é™¤åŒ¹é…æ¨¡å¼è¡Œï¼Œç›´æ¥ä¿®æ”¹åˆ°æ–‡ä»¶

    sed -i '/start_line/,/end_line/d' your_file

å¤šè¡ŒèŒƒå›´åŒ¹é…æ›¿æ¢

    sed æ˜¯æŒ‰è¡Œæ‰«æå¤„ç†çš„ï¼Œæºå†…å®¹æŒ‰è¡Œè¿›è¡Œå¤„ç†
        https://www.itbaoku.cn/post/313727/sed-or-awk-multiline-replace
        https://www.itbaoku.cn/post/2761173.html
        https://www.itbaoku.cn/post/2760950.html

    ä¸è¿‡å…¶æ¨¡å¼åŒ¹é…æ”¯æŒèŒƒå›´é€‰æ‹©ï¼š
        sed -i "/start_pattern/,/end_pattern/ s/pattern_to_replace/replacement_text/g" filename

        sed '/^why$/ {N; s/\<why\>\n\<huh\>/yo/g}' test.txt

    sed è¿˜æœ‰Næ˜¯æŠŠä¸‹ä¸€è¡ŒåŠ å…¥åˆ°å½“å‰çš„hold spaceæ¨¡å¼ç©ºé—´é‡Œï¼Œè¿˜æœ‰å¾ªç¯åŠŸèƒ½ --- :aå’Œtaæ˜¯é…å¥—ä½¿ç”¨ï¼Œå®ç°è·³è½¬åŠŸèƒ½ã€‚tæ˜¯testæµ‹è¯•çš„æ„æ€ã€‚:aå’Œbaçš„é…å¥—ä½¿ç”¨æ–¹å¼ï¼Œä¹Ÿå¯ä»¥å®ç°è·³è½¬åŠŸèƒ½ã€‚bæ˜¯branchåˆ†æ”¯çš„æ„æ€ã€‚

        https://blog.csdn.net/u011729865/article/details/71773840
        https://blog.csdn.net/lovebyz/article/details/89377966

        # åˆ é™¤æ¢è¡Œ
        sed ":a;N;s/\n//g;ba" a.txt     # while(1) { N; s/\n//g; }

        sed ":a;N;s/\n//g;$!ba" a.txt   # $çš„æ„æ€æ˜¯æœ€åä¸€è¡Œï¼Œä¸è·³è½¬åˆ°æ ‡è®°aå¤„ï¼Œå³é€€å‡ºå‘½ä»¤å¾ªç¯

        sed ":a;N;s/\n//g;ta" a.txt

    awk 'match($0, start_pattern) {start=1; next} start==1 && match($0, end_pattern) {start=0; next} start==1 {gsub(pattern_to_replace, replacement_text)} 1' filename > temp && mv temp filename

    gawk 'BEGIN{
        RS="*/"
        replace="<span style=\"color:#aaaaaa; font-weight:bold;\">"
        }
        /\/\* +TODO/{
            gsub(/\/\* +TODO/,replace" /* TODO")
            RT=RT "</span>"
        }
        { print $0RT}
        ' file

    perl -i -0 -pe '
        s/type pulse.*PulseAudio Sound Server\)/  type plug\n    slave.pcm hw/s
        ' file

### ç»ˆç«¯è¾“å‡ºå­—ç¬¦çš„åå¤„ç†å·¥å…·

wc -l è®¡ç®—æ–‡æœ¬æ–‡ä»¶çš„è¡Œæ•°ï¼Œç”¨äº vi æ‰“å¼€å¤§æ–‡ä»¶ä¹‹å‰å…ˆè¯„ä¼°

    wc -l README.rst

tee å¯¹ç¨‹åºçš„è¾“å‡ºåŒæ—¶æ‰“å°åˆ°æ–‡ä»¶å’Œå±å¹•

    ls -al | tee -a file.txt

    æ›´é«˜çº§çš„ç”¨æ³•æ˜¯é™åˆ¶ root æƒé™å‘½ä»¤çš„ä½¿ç”¨èŒƒå›´ï¼Œæ¯”å¦‚ä¸‹è½½æ–‡ä»¶åæŠŠæ–‡ä»¶å†…å®¹æ›´æ–°åˆ°ç³»ç»Ÿç›®å½•çš„æ–‡ä»¶ï¼š

        $ curl xxx | sudo tee /etc/xxx.cfg

column æŠŠæ–‡æœ¬è¡¨æ ¼æ•´é½åŒ–ï¼Œä¹Ÿç”¨äºæœ‰äº›ç¨‹åºçš„è¾“å‡ºå¤ªå®½å­—ç¬¦è¢«çœç•¥çš„å¼ºåˆ¶å±•å¼€

    openssl ciphers -V |column -t

fold æŒ‰å­—æ¯æ‹†åˆ†è¡Œ

    fold -w 9

watch å¯¹å›ºå®šåˆ·æ–°å±å¹•çš„æ–‡æœ¬ï¼Œå¯ä»¥é«˜äº®å‡ºå˜åŒ–çš„éƒ¨åˆ†ï¼Œéå¸¸é€‚åˆç›‘æ§

    watch -d cat /proc/interrupts

    watch -n 5 -d '/bin/free -m'

tail æŒç»­è¾“å‡ºæ–‡ä»¶å†…å®¹ï¼Œé€‚åˆç›‘è§†ç¨‹åºæ—¥å¿—çš„è¾“å‡º

    tail -f å‘½ä»¤æ˜¯æ ¹æ®æ–‡ä»¶çš„ inode æ¥è¿½è¸ªæ–‡ä»¶æ›´æ–°çš„ã€‚å¦‚æœæ–‡ä»¶åˆ é™¤åå†ç”Ÿæˆä¸€ä¸ªæ–°çš„æ–‡ä»¶ï¼Œæ–°ç”Ÿæˆçš„åŒåæ–‡ä»¶çš„ inode å·²ç»å‘ç”Ÿäº†å˜åŒ–ï¼Œæ‰€ä»¥å¯¼è‡´tail -få‘½ä»¤å¤±æ•ˆã€‚

    tail -F åœ¨æ–‡ä»¶ä¸å¯ä»¥æ‰“å¼€çš„æ—¶å€™ï¼Œä¼šé‡è¯•æ‰“å¼€è¯¥æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯åˆ é™¤æ—§æ–‡ä»¶ï¼Œåˆ›å»ºæ–°æ–‡ä»¶çš„è¿‡ç¨‹ä¸­ï¼Œtail çŸ­æš‚æ€§å¤±å»äº†å¯¹æ–‡ä»¶çš„è®¿é—®æƒé™ï¼ŒåŠ ä¸Š -F é€‰é¡¹åï¼Œtail åœ¨æ–‡ä»¶æ¢å¤è®¿é—®åå¯ä»¥é‡æ–°å¯¹æ–‡ä»¶å®æ–½è·Ÿè¸ªã€‚

#### ackg ç»™ç»ˆç«¯è¾“å‡ºçš„è‡ªå®šä¹‰å…³é”®å­—åŠ é¢œè‰²

hhighlighter æ‰§è¡Œæ—¶è°ƒç”¨ h()ï¼Œå¤ªå®¹æ˜“æ··æ·†äº†ï¼Œæˆ‘ç»™ä»–æ”¹å ackg äº†ã€‚

hhighlighter ç»™ç»ˆç«¯è¾“å‡ºçš„è‡ªå®šä¹‰å­—ç¬¦ä¸²åŠ é¢œè‰²ï¼Œæ”¯æŒå¤šç§é¢œè‰²è¾“å‡ºï¼Œæ›¿ä»£ grep ç»™è‡ªå®šä¹‰å­—ç¬¦ä¸²åŠ é¢œè‰²ï¼Œéå¸¸é€‚åˆç›‘æ§æ—¥å¿—è¾“å‡ºè°ƒè¯•ç¨‹åºä½¿ç”¨

    https://github.com/paoloantinori/hhighlighter

    ä¸»è¦å°è£…çš„æ˜¯ ack --passthru çš„é€ä¼ å’Œç€è‰²

        https://linux.die.net/man/1/ack
            https://beyondgrep.com/
                https://github.com/beyondgrep/ack3/

    ç«å“ https://github.com/Scopart/colorex/

    https://www.cnblogs.com/bamanzi/p/colorful-shell.html

éœ€è¦å…ˆå®‰è£…è½¯ä»¶åŒ… ackï¼Œéå¸¸å¥½çš„ grep çš„æ›¿ä»£å“ï¼Œä½¿ç”¨ perl æ­£åˆ™è¡¨è¾¾å¼çš„è¯­æ³•

    https://beyondgrep.com/

    å‘½ä»¤ä½¿ç”¨ç®€ä»‹ https://wangchujiang.com/linux-command/c/ack.html

    sudo apt install ack

hhighlighter å±äºå¯¹ ack çš„å°è£…ï¼Œä½†è„šæœ¬åå’Œå‡½æ•°åéƒ½å¤ªç®€å•äº†ï¼Œéƒ½æ¢æˆä¸æ˜“æ··æ·†çš„ ackg å§

    # curl -fsSLo ackg.sh https://github.com/paoloantinori/hhighlighter/raw/master/h.sh
    # sed -i 's/h()/ackg()/' ackg.sh
    # sudo mv ./ackg.sh /usr/local/bin/
    curl -fsSL https://github.com/paoloantinori/hhighlighter/raw/master/h.sh |sed 's/h()/ackg()/' |sudo tee /usr/local/bin/ackg.sh

ç„¶åæµ‹è¯•ä½ æ„Ÿå…´è¶£çš„æ–‡å­—ï¼Œæ”¯æŒ -i å¿½ç•¥å¤§å°å†™ï¼Œæ”¯æŒ perl å½¢å¼çš„æ­£åˆ™è¡¨è¾¾å¼

    https://perldoc.perl.org/perlre
    https://www.runoob.com/perl/perl-regular-expressions.html

    https://www.cnblogs.com/dancheblog/p/3528000.html

    perlä¸­çš„å•å¼•å·å’ŒåŒå¼•å·æ€»ç»“ï¼š ä¸€ã€åŒä¸­æœ‰åŒï¼Œå•ä¸­æœ‰å•éƒ½éœ€è¦è½¬ä¹‰ã€‚ äºŒã€åŒä¸­æœ‰å•æˆ–å•ä¸­æœ‰åŒå‡ä¸éœ€è¦è½¬ä¹‰ã€‚ ä¸‰ã€å•å¼•å·ç›´æ¥äº†å½“ï¼Œå¼•å·å†…æ˜¯ä»€ä¹ˆå°±æ˜¾ç¤ºä»€ä¹ˆï¼ŒåŒå¼•å·åˆ™éœ€è¦è€ƒè™‘è½¬ä¹‰æˆ–å˜é‡æ›¿æ¢ç­‰

    # å…ˆ source ä¸€ä¸‹å°±å¯ä»¥åœ¨ shell ä¸‹ä½¿ç”¨å®ƒå¯¼å‡ºçš„åŒåå‡½æ•°äº†
    source ackg.sh

    # ç­‰æ•ˆ echo abc | ack --flush --passthru --color --color-match=red a | ack --flush --passthru --color --color-match=yellow b
    echo "abcdefghijklmnopqrstuvxywz" |ackg a b c d e f g h i j k l

    ps -ef |ackg 'root|ssh' "$(whoami)"  '\d{2}:\d{2}:\d{2}'

    # ä½¿ç”¨ \b æ˜¯ perl æ­£åˆ™è¡¨è¾¾å¼çš„å•è¯é™å®šç¬¦
    dmesg |ackg -i "Fail|Error|\bNot\b|\bNo\b|Invalid|Disabled|denied" "\bOk\b|Success|Good|Done|Finish|Enabled" "Warn|Timeout|\bDown\b|Unknown|Disconnect|Restart"

### è¯»å†™é…ç½®æ–‡ä»¶ jq crudini yq

> jq

jq åŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œæ”¯æŒæ›´å¤æ‚çš„æ“ä½œå¦‚æ˜ å°„ã€è¿‡æ»¤ã€å­—ç¬¦ä¸²æ“ä½œç­‰ã€‚å¯ä»¥é€šè¿‡ man jq æˆ– jq --help æŸ¥çœ‹å®Œæ•´æ–‡æ¡£ã€‚

    $ sudo apt install jq

æ ¼å¼åŒ– JSON æ•°æ®ï¼Œå¹¶å½©è‰²æ˜¾ç¤ºï¼Œå¦‚æœæ ¼å¼é”™è¯¯ä¼šæ²¡æœ‰è¾“å‡º

    $ cat config.json |jq

å¸¸ç”¨äºæŸ¥çœ‹ json è¾“å‡ºçš„å‚æ•°é…ç½®

    $ lsblk --json | jq -c '.blockdevices[]|[.name,.size]'

1ã€è¯»å– JSON æ•°æ®

    è¯»å–æ•´ä¸ªæ–‡ä»¶
    $ jq '.' file.json

    è¯»å–ç‰¹å®šå­—æ®µ
    $ jq '.key' file.json

    è¯»å–åµŒå¥—å­—æ®µ
    $ jq '.parent.child' file.json

    è¯»å–æ•°ç»„å…ƒç´ 
    $ jq '.array[0]' file.json
    $ jq '.array[]' file.json  # æ‰€æœ‰å…ƒç´ 

    è¯»å–å¤šä¸ªå­—æ®µ
    $ jq '{name: .name, age: .age}' file.json

    æ¡ä»¶æŸ¥è¯¢
    $ jq 'select(.age > 30)' file.json

2ã€ä¿®æ”¹ JSON æ•°æ®

    ä¿®æ”¹å­—æ®µå€¼ (ä¸æ”¹å˜åŸæ–‡ä»¶)
    $ jq '.key = "new value"' file.json

    æ·»åŠ æ–°å­—æ®µ
    $ jq '.newKey = "value"' file.json

    åˆ é™¤å­—æ®µ
    $ jq 'del(.key)' file.json

    ä¿®æ”¹æ•°ç»„å…ƒç´ 
    $ jq '.array[0] = "new value"' file.json

    å‘æ•°ç»„æ·»åŠ å…ƒç´ 
    $ jq '.array += ["new item"]' file.json

3ã€å†™å…¥æ–‡ä»¶

    ä½¿ç”¨ > é‡å®šå‘æˆ– --output/-o é€‰é¡¹ä¿å­˜ä¿®æ”¹ï¼š
    $ jq '.key = "new value"' file.json > temp.json && mv temp.json file.json

    æˆ–è€…ä½¿ç”¨ -i/--in-place ç›´æ¥ä¿®æ”¹åŸæ–‡ä»¶ï¼ˆæŸäº›ç‰ˆæœ¬æ”¯æŒï¼‰ï¼š
    $ jq -i '.key = "new value"' file.json

ç¤ºä¾‹ï¼Œå‡è®¾æœ‰ data.json æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š

    {
      "name": "Alice",
      "age": 30,
      "hobbies": ["reading", "hiking"],
      "address": {
        "city": "New York",
        "zip": "10001"
      }
    }

è·å–å§“åï¼š

    $ jq '.name' data.json
    # è¾“å‡º: "Alice"

ä¿®æ”¹å¹´é¾„å¹¶ä¿å­˜ï¼š

    $ jq '.age = 31' data.json > new_data.json

æ·»åŠ æ–°å­—æ®µï¼š

    $ jq '.country = "USA"' data.json

è·å–æ‰€æœ‰çˆ±å¥½ï¼š

    $ jq '.hobbies[]' data.json
    # è¾“å‡º:
    # "reading"
    # "hiking"

ä¿®æ”¹åµŒå¥—å­—æ®µï¼š

    $ jq '.address.city = "Boston"' data.json

åˆ é™¤å­—æ®µï¼š

    $ jq 'del(.address.zip)' data.json

> crudini è¯»å†™ ini æ ¼å¼çš„é…ç½®æ–‡ä»¶

    è¯­æ³•æ ¼å¼ï¼šcrudini [å‚æ•°] æ–‡ä»¶å

    å¸¸ç”¨å‚æ•°ï¼š

        --del åˆ é™¤å˜é‡
        --existing æŒ‡å®šæ–‡ä»¶å·²å­˜åœ¨
        --format è®¾ç½®è¾“å‡ºæ ¼å¼
        --get æ˜¾ç¤ºå˜é‡å€¼
        --inplace é”å®šå¹¶å†™å…¥æ–‡ä»¶
        --list æ›´æ–°ä¸€ä¸ªåˆ—è¡¨çš„å€¼
        --list-sep è®¾ç½®è‡ªå®šä¹‰é—´éš”ç¬¦
        --output å°†è¾“å‡ºå†…å®¹å†™å…¥æŒ‡å®šæ–‡ä»¶
        --set å¢åŠ æˆ–ä¿®æ”¹å˜é‡
        --verbose æ˜¾ç¤ºæ‰§è¡Œè¿‡ç¨‹è¯¦ç»†ä¿¡æ¯

>yq (jq çš„ YAML ç‰ˆæœ¬)è¯»å†™ YAML çš„å¤„ç†å·¥å…·ï¼Œè¯­æ³•ç±»ä¼¼äº jq

    # è¯»å–å€¼
    yq '.key.subkey' file.yaml

    # è®¾ç½®å€¼
    yq -i '.key.subkey = "new value"' file.yaml

    # æ·»åŠ æ–°å­—æ®µ
    yq -i '.newKey = "value"' file.yaml

### æ¯”è¾ƒæ–‡ä»¶å·®å¼‚ diff

æ¯”è¾ƒä¸¤ä¸ªæ–‡ä»¶ï¼Œç”¨ vim ç»“åˆ diff çš„å‘½ä»¤çœ‹é«˜äº®çš„å·®å¼‚å¯¹æ¯”ï¼Œæ›´åŠ ç›´è§‚

    $ vimdiff file1.txt file2.txt

æ¯”è¾ƒä¸¤ä¸ªç›®å½•

æ–¹æ³•ä¸€ï¼šä½¿ç”¨ diff

    diff -r directory1 directory2

ä½†æ˜¯ diff ä¼šå¯¹æ¯ä¸ªæ–‡ä»¶ä¸­çš„æ¯ä¸€è¡Œéƒ½åšæ¯”è¾ƒï¼Œæ‰€ä»¥æ–‡ä»¶è¾ƒå¤šæˆ–è€…æ–‡ä»¶è¾ƒå¤§çš„æ—¶å€™ä¼šéå¸¸æ…¢ã€‚è¯·è°¨æ…ä½¿ç”¨ã€‚

æ–¹æ³•äºŒï¼šä½¿ç”¨ diff ç»“åˆ tree

    $ diff <(tree -Ci --noreport ./tea) <(tree -Ci --noreport ./tea_hot)
    1c1
    < ./tea
    ---
    > ./tea_hot
    8d7
    < cad.sh
    14d12
    < lxhb.md
    17,19d14
    < newhot.txt
    < nljson.cpp
    < zhyc.txt

è¯´æ˜ï¼š

    tree çš„ -C é€‰é¡¹æ˜¯è¾“å‡ºé¢œè‰²ï¼Œå¦‚æœåªæ˜¯çœ‹ä¸€ä¸‹ç›®å½•çš„ä¸åŒï¼Œå¯ä»¥ä½¿ç”¨è¯¥é€‰é¡¹ï¼Œä½†åœ¨ç»“åˆå…¶ä»–å‘½ä»¤ä½¿ç”¨çš„æ—¶å€™å»ºè®®ä¸è¦ä½¿ç”¨è¯¥é€‰é¡¹ï¼Œå› ä¸ºé¢œè‰²ä¹Ÿä¼šè½¬æ¢ä¸ºå¯¹åº”çš„ç¼–ç è€Œè¾“å‡ºï¼›
    -i æ˜¯ä¸ç¼©è¿›ï¼Œå»ºè®®ä¸è¦çœç•¥ -iï¼Œå¦åˆ™ diff çš„ç»“æœå¾ˆéš¾çœ‹ï¼Œä¹Ÿä¸å¥½ç»§ç»­åç»­çš„æ–‡ä»¶æ“ä½œï¼›
    --noreport æ˜¯ä¸è¾“å‡ºæŠ¥å‘Šç»“æœï¼Œå»ºè®®ä¸è¦çœç•¥è¯¥é€‰é¡¹ã€‚

è¯¥æ–¹æ³•æ•ˆç‡å¾ˆé«˜ã€‚

æ–¹æ³•ä¸‰ï¼šfind ç»“åˆ diff

    find directory1 -printf "%P\n" | sort > file1
    find directory2 -printf "%P\n" | sort | diff file1 -
    2d1
    < 1.png
    4a4
    > 4.png
è¯´æ˜ï¼š

    < ä»£è¡¨çš„è¡Œæ˜¯ directory1 ä¸­æœ‰è€Œ directory2 æ²¡æœ‰çš„æ–‡ä»¶ï¼Œ
    > åˆ™ç›¸åï¼Œæ˜¯ directory2 ä¸­æœ‰è€Œdirectory1ä¸­æ²¡æœ‰ã€‚

    ä¸è¦çœç•¥ -printf "%P\n"ï¼Œæ­¤å¤„çš„%Pè¡¨ç¤ºfindçš„ç»“æœä¸­å»æ‰å‰ç¼€è·¯å¾„ï¼Œè¯¦ç»†å†…å®¹ `man find`ã€‚

    ä¾‹å¦‚ï¼Œfind /root/ -printf "%P\n"çš„ç»“æœä¸­å°†æ˜¾ç¤º /root/a/xyz.txt ä¸­å»æ‰ /root/ åçš„ç»“æœï¼ša/xyz.txtã€‚

æ•ˆç‡å¾ˆé«˜ï¼Œè¾“å‡ºä¹Ÿç®€æ´ã€‚

#### æ–‡ä»¶è¡¥ä¸ patch

åŸºäºä¸¤ä¸ªæ–‡ä»¶çš„å·®å¼‚ç”Ÿæˆè¡¥ä¸

    # æ³¨æ„ä¸¤æ–‡ä»¶é¡ºåºï¼šæºæ–‡ä»¶ æ ¹æ®æºæ–‡ä»¶ä¿®æ”¹åçš„æ–‡ä»¶
    diff a.c b.c > test.diff

åœ¨å…¶å®ƒçš„æœºå™¨ä¸Šå¯¹ a.c æ–‡ä»¶åº”ç”¨è¡¥ä¸

    patch a.c <tes.diff

è¿™æ · a.c çš„å†…å®¹å°±å˜æˆäº† b.c çš„å†…å®¹äº†ã€‚

### å†™å…¥å³æ—¶æ–‡ä»¶ cat

    https://www.gnu.org/software/bash/manual/bash.html#Here-Documents

è¾“å…¥å†…å®¹ï¼Œè¾“å‡ºåˆ°æ–‡ä»¶

    $ cat <<EOF >/my/new/file
    Line1
    Line2
    A $VARIABLE
    EOF

è¾“å…¥å†…å®¹ï¼Œå®Œæˆç¼–è¾‘åæŒ‰ Ctrl+D ç»“æŸï¼Œè¾“å‡ºåˆ°æ–‡ä»¶

    cat > file

æœ‰å‡ ä¸ªé™åˆ¶ï¼š

    cat ç”Ÿæˆä¸€æ®µä»£ç åˆ°æ–‡ä»¶ï¼Œæ–‡æœ¬å½“ä¸­çš„ç¬¦å· $ã€\ å’Œ ` ä¹Ÿä¼šè¢«è§£æï¼Œéœ€è¦å‰ç¼€ \ è¿›è¡Œè½¬ä¹‰æ‰èƒ½ä¿æŒåŸæ ·ã€‚

    å¦‚æœåŒä¸€ä¸ªå†…å®¹ä¸­æœ‰å¤šå¤„ EOF ä¼šæ··ä¹±ï¼Œæ‰€ä»¥æ¯æ®µ cat ç”¨ä¸åŒçš„ EOFX æ¥åšç»“æŸæ ‡å¿—ã€‚

    EOFA å¿…é¡»é¡¶è¡Œå†™ï¼Œå‰é¢ä¸èƒ½æœ‰åˆ¶è¡¨ç¬¦æˆ–è€…ç©ºæ ¼ï¼Œç»“æŸè¾“å…¥å¯¹åº”å‰é¢çš„ EOFA æˆ–æŒ‰ ctrl+dã€‚

åœ¨æˆ‘ä»¬ä½¿ç”¨ `cat <<EOF` æ—¶ï¼Œä¸‹é¢çš„æ–‡æœ¬å†…å®¹å¿…é¡»é¡¶è¡Œå†™ï¼Œå‰é¢ä¸èƒ½æœ‰åˆ¶è¡¨ç¬¦æˆ–è€…ç©ºæ ¼ã€‚

```bash

cat <<EOFA >/etc/network/if-pre-up.d/restore_my_iptables_rule
#!/bin/sh
iptables -F
iptables-restore < /etc/iptables/rules.v4
EOFA

```

å¦‚æœé‡å®šå‘çš„æ“ä½œç¬¦æ˜¯<<-ï¼Œé‚£ä¹ˆåˆ†ç•Œç¬¦ï¼ˆEOFï¼‰æ‰€åœ¨è¡Œçš„å¼€å¤´éƒ¨åˆ†çš„åˆ¶è¡¨ç¬¦ï¼ˆTabï¼‰éƒ½å°†è¢«å»é™¤ã€‚è¿™å¯ä»¥è§£å†³ç”±äºè„šæœ¬ä¸­çš„è‡ªç„¶ç¼©è¿›äº§ç”Ÿçš„åˆ¶è¡¨ç¬¦ã€‚

    https://askubuntu.com/questions/858238/eof-in-cat-and-less

```bash

if [ -e ~/.bash_profile ]; then
    cat <<-EOF >abc.txt
        ABC
        DEF
        G
        EOF
fi

```

åœ¨æŸæ–‡ä»¶çš„åŸºç¡€ä¸Šè¿½åŠ å†…å®¹ï¼Œå†™å…¥çš„æ–°æ–‡ä»¶ç›´æ¥é‡å®šå‘ä½œä¸º xxx å‘½ä»¤çš„å‚æ•°å†…å®¹

    $ xxx -config <(cat /etc/ssl/openssl.cnf - <<- EOF
    [notice]
    explicitText = "UTF8:Notice An use of this Certificate "
    EOF
    )

sshå†™å…¥è¿œç¨‹ä¸»æœºæ–‡ä»¶

```bash
cat <<EOF | ssh user@host "cat > /home/user/${HOSTNAME%%.*}_said.txt"
# hi
there.
EOF

```

åœ¨è¿œç¨‹ä¸»æœºè¾“å…¥æ–‡ä»¶å†…å®¹ `cat >config.php <<EOF`ï¼Œå¯ä»¥ç›´æ¥ç²˜è´´å†…å®¹ï¼Œä½†æ˜¯

    1ã€cat ä¼šè½¬ä¹‰ç‰¹æ®Šç¬¦å·ï¼Œå¾—æå‰ç¼–è¾‘è¦ç²˜è´´çš„å†…å®¹ï¼Œé˜²æ­¢ç²˜è´´å†…å®¹ä¸ä¸€è‡´

        æ³¨æ„æœ‰ 3 ä¸ªç‰¹æ®Šç¬¦å·å¿…é¡»å‰ç¼€ \ è½¬ä¹‰ï¼š $ ` \

        ä¹Ÿå°±æ˜¯è¯´ï¼ŒåŸæ–‡æ˜¯ $abc çš„è¦æ”¹ä¸º \$abcï¼Œä¸ç„¶é‚£ä¸ª $ ä¼šè¢« cat å‘½ä»¤åƒæ‰

    2ã€ç„¶åæ‰å¯ä»¥åœ¨è¿œç¨‹ä¸»æœºæ‰§è¡Œç²˜è´´æ“ä½œ

        $ cat > config.php << EOF

        ç²˜è´´ä½ ä¿®æ”¹çš„å†…å®¹

        EOF

å¦‚æœè¦ç²˜è´´çš„å†…å®¹æ²¡æœ‰å•å¼•å·ï¼Œå¯ä»¥ç”¨ `echo 'xxx' |tee` çš„å½¢å¼ï¼Œç”¨å•å¼•å·åŒ…å›´çš„å†…å®¹ï¼Œå¯ä»¥ä¸è¢«è½¬ä¹‰ï¼Œå¦‚ï¼š

ä»¥ä¸‹å†…å®¹ï¼Œç›´æ¥å¤åˆ¶

```bash
#comment line
print \no "aaaaaaa" \number $HOSTNAME
exec `man pwd`
```

åœ¨è¿œç¨‹ä¸»æœºæ‰§è¡Œç²˜è´´æ“ä½œ

    $ echo 'ç²˜è´´ä½ çš„å†…å®¹
    å¤šè¡Œä¹Ÿæ²¡å…³ç³»
    ' |tee your_bash

### å†™å…¥æ–‡ä»¶ dd

dd å‘½ä»¤æ˜¯åŸºäºå—ï¼ˆblockï¼‰çš„å¤åˆ¶ï¼Œâ€œè£¸è¯»å†™â€ï¼ˆè¶Šè¿‡æ–‡ä»¶ç³»ç»Ÿç›´æ¥è¯»å†™ç‰©ç†è®¾å¤‡ï¼‰ç”¨é€”å¾ˆå¤šï¼Œæ¯”å¦‚å¤‡ä»½/æ¢å¤ç¡¬ç›˜ä¸»å¼•å¯¼æ‰‡åŒºï¼Œå…‹éš†ç¡¬ç›˜æˆ–åˆ†åŒºã€‚

    https://wiki.archlinux.org/title/Dd

ä»è£¸è®¾å¤‡è¯»å–ï¼Œæˆ–å†™å…¥åˆ°è£¸è®¾å¤‡ï¼Œåªèƒ½ç”¨ ddï¼Œæ¯”å¦‚å…‹éš†ç¡¬ç›˜ã€ä»é•œåƒæ–‡ä»¶åˆ¶ä½œ U ç›˜ã€ç‰¹å®šæ•°æ®å†™å…¥ç¡¬ç›˜åˆ†åŒºè¡¨ /dev/sdX æˆ– /dev/sdxxã€‚

å¤§å¤šæ•°ä»æ–‡ä»¶è¯»å–æˆ–å†™å…¥åˆ°æ–‡ä»¶çš„åœºæ™¯ï¼Œç”¨ dd è¿‡æ—¶äº†

        https://www.vidarholen.net/contents/blog/?p=479

    ä»æ–‡ä»¶è¯»å–æˆ–å†™å…¥åˆ°æ–‡ä»¶çš„åœºæ™¯ï¼Œç”¨å‘½ä»¤ `cat` æˆ– `cp` å°±è¶³å¤Ÿäº†ï¼Œé™¤éè¯¥è®¾å¤‡ä¸æ”¯æŒ one-byte writeã€‚

    å¦‚æœè¦é™åˆ¶å­—èŠ‚æ•°ï¼Œç»„åˆ `head -c` å¤„ç†å³å¯ï¼Œé™¤äº†æŒ‡æ˜å¿…é¡»ç”¨ dd æŒ‰å—å¤§å°å†™å…¥ç­‰åœºåˆï¼Œå°½é‡é¿å…ç”¨ ddã€‚

        https://unix.stackexchange.com/questions/224277/is-it-better-to-use-cat-dd-pv-or-another-procedure-to-copy-a-cd-dvd/224314#224314

dd å¸¸ç”¨é€‰é¡¹

    bs=æ¯”ç‰¹æ•°   ä¸€æ¬¡è¯»å–å’Œå†™å…¥éƒ½ä½¿ç”¨è¯¥æ•°å€¼ï¼Œè¦†ç›– ibs/obs å‚æ•°çš„è®¾ç½®ã€‚å…‹éš†ç¡¬ç›˜ç­‰å¤§èŒƒå›´è¯»å†™æœ¬åœ°ç¡¬ç›˜çš„åœºæ™¯ä¸‹è°ƒå¤§å¯ä»¥æé€Ÿï¼Œæ¯”å¦‚è®¾ç½®ä¸º 4M åŒ¹é…ç‰©ç†ç¡¬ç›˜çš„ç‰©ç†æ‰‡åŒºå°ºå¯¸ 4096 çš„æ•´æ•°å€ï¼Œå¦‚æœæ˜¯å›ºæ€ç¡¬ç›˜ç‰©ç†æ‰‡åŒºæ˜¯ 512ï¼Œå¯ä»¥è®¾ç½®æˆ 10Gã€‚è¯¦è§ä¸‹é¢ç« èŠ‚ [å¤§èŒƒå›´å†™å…¥ä½¿ç”¨æœ€ä½³å—å¤§å°]ã€‚

    conv=fsync å†™å…¥æ—¶æé€Ÿï¼Œç±»ä¼¼åˆ©ç”¨ç¼“å­˜ï¼Œä¸æ˜¯æ¯ä¸ªå†™æ“ä½œéƒ½å†™æ–‡ä»¶ç³»ç»Ÿæ•°æ®ï¼Œè€Œæ˜¯åœ¨ dd æ‰§è¡Œå®Œæˆä¹‹å‰å†å†™å…¥

è¾“å…¥ï¼š

    ibs=æ¯”ç‰¹æ•°                            ä¸€æ¬¡è¯»å–çš„æ¯”ç‰¹æ•°(é»˜è®¤ï¼š512)

    skip=å—æ•°                             è·³è¿‡ç¬¬é›¶ä¸ªæ‰‡åŒºï¼Œä»ç¬¬ä¸€ä¸ªæ‰‡åŒºå¼€å§‹è¯»å–

    iflag=flag                           ä½¿ç”¨iflagæ¥æ§åˆ¶è¾“å…¥(è¯»å–æ•°æ®)æ—¶çš„è¡Œä¸ºç‰¹å¾ã€‚

        dsync       è¯»å†™æ•°æ®é‡‡ç”¨åŒæ­¥IO

        fullblock   è§å­ç« èŠ‚ [åªè¦æŒ‡å®šäº† count å°±å¿…é¡»ç”¨ iflag=fullblock]

è¾“å‡ºï¼š

    obs=æ¯”ç‰¹æ•°                            ä¸€æ¬¡å†™å…¥æŒ‡å®šæ¯”ç‰¹æ•°(é»˜è®¤ï¼š512)

    seek=1                              è·³è¿‡ç¬¬é›¶ä¸ªæ‰‡åŒºï¼Œä»ç¬¬ä¸€ä¸ªæ‰‡åŒºå¼€å§‹å†™å…¥

    bs=512                              å†™å…¥å—å¤§å°ä¸º512å­—èŠ‚ï¼ˆä¸€èˆ¬ä½¿ç”¨ä¸€ä¸ªæ‰‡åŒºçš„å¤§å°ï¼Œç”¨ sudo gdisk -l æŸ¥çœ‹ï¼‰

    count=1                             å†™å…¥å¤šå°‘ä¸ªå—ï¼Œè¿™é‡Œåªå†™å…¥ä¸€ä¸ªå—

    oflag=flag                          ä½¿ç”¨oflagæ¥æ§åˆ¶è¾“å‡º(å†™å…¥æ•°æ®)æ—¶çš„è¡Œä¸ºç‰¹å¾ã€‚

è®¾å¤‡çº§äº’æ‹·ï¼šå°†æœ¬åœ°çš„ /dev/hdb æ•´ç›˜å¤‡ä»½åˆ° /dev/hdd

    # è¿™ç§åœºæ™¯æ²¡æ³•ç”¨ `cp /dev/sda /dev/sdb` æˆ– `cat /dev/sda >/dev/sdb`
    $ sudo dd if=/dev/hdb of=/dev/hdd

    å…‹éš†ç¡¬ç›˜çš„æ“ä½œï¼Œè¯¦è§ç« èŠ‚ [ä½¿ç”¨ dd å…‹éš†ç¡¬ç›˜](init_a_server think)ã€‚

è®¾å¤‡åˆ°æ–‡ä»¶ï¼šå°† /dev/hdb å…¨ç›˜æ•°æ®å¤‡ä»½åˆ°æŒ‡å®šè·¯å¾„çš„ image æ–‡ä»¶

    # è¿™ç§åœºæ™¯æ²¡æ³•ç”¨ `cat /dev/hdb >/root/image`
    $ sudo dd if=/dev/hdb of=/root/image

    # å¤‡ä»½çš„åŒæ—¶å‹ç¼©
    # è¿™ç§åœºæ™¯æ²¡æ³•ç”¨ `cat /dev/hdb |gzip >/root/image.gz`
    $ sudo dd if=/dev/hdb |gzip >/root/image.gz

    # æ‹·è´å†…å­˜åˆ°ç£ç›˜ä¸Šçš„æ–‡ä»¶
    # è¿™ç§åœºæ™¯æ²¡æ³•ç”¨ `cat /dev/mem >/root/mem.bin`
    $ sudo dd if=/dev/mem of=/root/mem.bin bs=1024

    # æ‹·è´å…‰ç›˜å†…å®¹åˆ°æŒ‡å®šæ–‡ä»¶å¤¹ï¼Œå¹¶ä¿å­˜ä¸º cd.iso æ–‡ä»¶
    # è¿™ç§åœºæ™¯æ²¡æ³•ç”¨ `cat /dev/cdrom(hdc) >/root/cd.iso`
    $ sudo dd if=/dev/cdrom(hdc) of=/root/cd.iso

æ–‡ä»¶åˆ°è®¾å¤‡ï¼šå°†å¤‡ä»½æ–‡ä»¶æ¢å¤åˆ°æŒ‡å®šç›˜

    # è¿™ç§åœºæ™¯æ²¡æ³•ç”¨ `cat /root/image >/dev/hdb`
    $ sudo dd if=/root/image of=/dev/hdb

    # è§£å‹å¹¶æ¢å¤å¤‡ä»½æ–‡ä»¶åˆ°æŒ‡å®šç›˜
    # è¿™ç§åœºæ™¯æ²¡æ³•ç”¨ `gzip -dc /root/image.gz >/dev/hdb`
    $ gzip -dc /root/image.gz |sudo dd of=/dev/hdb

å¤‡ä»½ä¸æ¢å¤ MBRï¼šåˆ©ç”¨ dd æ—¶é¡ºåºè¯»å†™çš„ç‰¹ç‚¹ï¼Œä»ç£ç›˜è®¾å¤‡çš„å¼€å¤´å¼€å§‹ï¼Œæ°å¥½å°±æ˜¯å¯åŠ¨æ‰‡åŒº

    # å¤‡ä»½ç£ç›˜å¼€å§‹çš„ 512 ä¸ªå­—èŠ‚å¤§å°çš„ MBR ä¿¡æ¯åˆ°æŒ‡å®šæ–‡ä»¶
    # è¿™ç§åœºæ™¯æ²¡æ³•ç”¨ `head -c 512 /dev/hda >/root/boot.image`
    $ sudo dd if=/dev/hda of=/root/image bs=512 count=1 iflag=fullblock

    # ç”¨ boot.img åˆ¶ä½œå¯åŠ¨ç›˜
    # è¿™ç§åœºæ™¯æ²¡æ³•ç”¨ `cat boot.img >/dev/fd0`
    $ sudo dd if=boot.img of=/dev/fd0 bs=1440k

    æ¢å¤ï¼š

    # å°†ä¸Šé¢å¤‡ä»½çš„MBRä¿¡æ¯å†™åˆ°ç£ç›˜å¼€å§‹éƒ¨åˆ†
    # è¿™ç§åœºæ™¯æ²¡æ³•ç”¨ `cat /root/image >/dev/had`
    $ sudo dd if=/root/image of=/dev/had

    å¤‡ä»½è½¯ç›˜
    # è¿™ç§åœºæ™¯æ²¡æ³•ç”¨ `head -c 1440K /dev/fd0 >disk.img`
    $ sudo dd if=/dev/fd0 of=disk.img bs=1440k count=1 iflag=fullblock

è¯»å–æŒ‚è½½åœ¨å­˜å‚¨è®¾å¤‡ä¸Šçš„ iso æ–‡ä»¶ï¼Œè¿›è¡Œ gpg æ ¡éªŒ

    # æ³¨æ„ä½¿ç”¨äº†ç®¡é“æ“ä½œé»˜è®¤çš„æ ‡å‡†è¾“å…¥å’Œæ ‡å‡†è¾“å‡ºï¼Œgpg æœ€åç”¨çš„ -
    # è¿™ç§åœºæ™¯æ²¡æ³•ç”¨ `cat /dev/sdb`
    $ sudo dd if=/dev/sdb |gpg --keyid-format 0xlong --verify my_signature.sig -

#### dd å‘½ä»¤æŸ¥çœ‹è¿›åº¦

åªæœ‰ gnu ç‰ˆçš„ dd å‘½ä»¤å¯ä»¥ä½¿ç”¨å‚æ•° status=progress æ˜¾ç¤ºè¿›åº¦ã€‚æ™®é€šç‰ˆæœ¬çš„ `dd` å‘½ä»¤æ²¡æœ‰ä¿¡æ¯è¾“å‡ºï¼Œåªæœ‰æœ€ç»ˆç»“æŸæ—¶æ‰æ˜¾ç¤ºå‡ºæ—¶é—´ã€æ‹·è´é€Ÿåº¦ã€‚

è§£å†³åŠæ³•ï¼šdd æ”¯æŒå‘ä¿¡å·çš„æ–¹å¼è¾“å‡ºè¿›åº¦ä¿¡æ¯ã€‚

ä¸ºäº†æŸ¥çœ‹ `dd` çš„è¿›åº¦ï¼Œå¯ä»¥åœ¨å¦ä¸€ä¸ªç»ˆç«¯æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤

    # killall åŠ å‚æ•°æ˜¯å‘é€ä¸€ä¸ªæŒ‡å®šçš„ä¿¡å·åˆ°æŒ‡å®šçš„è¿›ç¨‹
    $ sudo watch -n 5 killall -USR1 dd

ä¸è¦å…³é—­è¯¥ç»ˆç«¯çª—å£ã€‚

ä¹‹åï¼Œå°±èƒ½åœ¨æ‰§è¡Œ `dd` çš„ç»ˆç«¯çœ‹åˆ°è¿›åº¦æ•°æ®çš„è¾“å‡ºäº†

    1473905+0 records  in
    1473905+0 records out
    6037114880 bytes (6.0 GB, 5.6 GiB) copied, 28.8377 s, 209 MB/s
    ...
    976754646+0 records in
    976754646+0 records out
    4000787030016 bytes (4.0 TB, 3.6 TiB) copied, 26870.7 s, 149 MB/s

å¦ä¸€ä¸ªæ–¹æ³•æ˜¯åœ¨å‘½ä»¤ä¸­è°ƒç”¨ç®¡é“æŸ¥çœ‹å™¨ pvï¼Œç„¶åæŠŠ pv å‘½ä»¤å’Œ dd å‘½ä»¤ç»“åˆåœ¨ä¸€èµ·ï¼š

    $ sudo apt install pv

    $ sudo dd if=/dev/sdb |pv |of=/dev/sda
    4,14MB 0:00:05 [ 98kB/s] ==>

ç»éªŒè¯ï¼Œç§’é€€ï¼Œæš‚æœªç ”ç©¶å“ªé‡Œé”™äº†ã€‚

#### å¤§èŒƒå›´å†™å…¥ç£ç›˜ä½¿ç”¨æœ€ä½³å—å¤§å°

é€‚ç”¨äºå…‹éš†ç¡¬ç›˜ã€å…‹éš†åˆ†åŒºï¼Œæ‹·è´å¤§æ–‡ä»¶ç­‰é¡ºåºè¯»å†™çš„åœºæ™¯ï¼Œç”¨å‚æ•° bs è®¾ç½®è¯»å†™å—å¤§å°

    https://wiki.archlinux.org/title/Dd#Disk_cloning_and_restore

å¤§æ–‡ä»¶è¯»å†™å°½å¯èƒ½æé€Ÿï¼Œæµ‹è¯•æ¨èçš„æœ€ä¼˜é€‰æ‹©å¦‚ä¸‹ï¼š

    æ™®é€šçš„ 7200è½¬ ç¡¬ç›˜ on btrfsï¼šbs=4M

    å›ºæ€ç¡¬ç›˜ Sumsung 960 pro on btrfs: bs=512Kï¼Œä¸ç”¨ç¼“å­˜(oflag=sync)ï¼šbs=1G

    ç®€å•ç‚¹ï¼Œä¸ç®¡å•¥ç¡¬ç›˜éƒ½ç”¨ bs=4Mï¼Œè¿™æ ·çš„å‚æ•°ä¸‹å›ºæ€ç¡¬ç›˜çš„é€Ÿåº¦ä¹Ÿä¸æ…¢

å‚æ•° bs æœ€å°‘è¦è®¾ç½®ä¸ºç¡¬ç›˜çš„ä¸€ä¸ªç‰©ç†æ‰‡åŒºå¤§å°çš„æ•´æ•°å€:

    æŸ¥çœ‹ç¡¬ç›˜çš„ç‰©ç†æ‰‡åŒºå°ºå¯¸

    $ sudo fdisk -l /dev/sda | grep "Sector size"
    Sector size (logical/physical): 512 bytes / 4096 bytes

    $ sudo fdisk -l /dev/sdb | grep "Sector size"
    Sector size (logical/physical): 512 bytes / 4096 bytes

ä¸€èˆ¬æ¥è¯´ï¼Œæ™®é€šç¡¬ç›˜æ‰‡åŒºçš„ç‰©ç†å¤§å°æ˜¯ 4096 bytesï¼Œå›ºæ€ç¡¬ç›˜æ˜¯ 512 bytesã€‚åœ¨ä¸¤ä¸ªç¡¬ç›˜å¯¹æ‹·çš„æ—¶å€™ï¼Œå› ä¸ºç£ç›˜å®Œå…¨æ˜¯é¡ºåºè¯»å†™ï¼Œä½ ä¸ä¼šå¬åˆ°ä»»ä½•ç£å¤´æ¥å›ç§»åŠ¨ç‚’è±†å­çš„å£°éŸ³ï¼Œä¸¤ä¸ªç¡¬ç›˜ä¼šéå¸¸å®‰é™çš„å…¨é€Ÿè¯»å†™æ•°æ®ã€‚å¦‚æœä¸¤ä¸ªç¡¬ç›˜çš„ç‰©ç†æ‰‡åŒºå¤§å°ä¸ä¸€è‡´ï¼Œåˆ™ç”¨å‚æ•° ibs å’Œ obs åˆ†åˆ«æŒ‡å®šã€‚

å¦‚æœç¡¬ç›˜çš„ä¼ è¾“é€Ÿåº¦ä¸ä¸€æ ·ï¼Œä¼šæŒ‰ç…§ä½çš„é‚£ä¸ªé€Ÿåº¦ä¼ 

    7200 è½¬æœåŠ¡å™¨çº§åˆ«çš„ SATA ç¡¬ç›˜å¦‚è¥¿æ•°HC320/å¸Œæ·é“¶æ²³ 7E10 çš„ä¼ è¾“é€Ÿåº¦çº¦ 220MB/sï¼Œå¤§çº¦å°±æ˜¯ 2.5G ç½‘å£çš„é€Ÿåº¦

    5400 è½¬å®¶ç”¨ NAS ç›˜ä¼ è¾“é€Ÿåº¦ 160MB/sï¼Œå¾…æœºå¬ä¸åˆ°ç”µæœºå£°éŸ³

> æµ‹è¯•å›ºæ€ç¡¬ç›˜æœ€ä¼˜ bs å‚æ•°

é€ä¸ªè¿è¡Œä»¥ä¸‹è¯­å¥ï¼Œçœ‹è¾“å‡ºç»“æœï¼Œæœ‰é€Ÿç‡ä¿¡æ¯

    $ sudo su

    # rm -f 4GB.big
    # echo 3 > /proc/sys/vm/drop_caches  # æ‰§è¡Œå‰è¦æ¸…ç†ç¼“å­˜
    # dd if=/dev/zero bs=512 count=8388608 of=./4GB.big status=progress
    4294967296 bytes (4.3 GB, 4.0 GiB) copied, 24.3043 s, 177 MB/s

    # rm -f 4GB.big
    # echo 3 > /proc/sys/vm/drop_caches
    # dd if=/dev/zero bs=1024 count=4194304 of=./4GB.big status=progress
    2015528960 bytes (2.0 GB, 1.9 GiB) copied, 6 s, 336 MB/s

    # rm -f 4GB.big
    # echo 3 > /proc/sys/vm/drop_caches
    # dd if=/dev/zero bs=4096 count=1048576  of=./4GB.big status=progress
    4294967296 bytes (4.3 GB, 4.0 GiB) copied, 3.27255 s, 1.3 GB/s

    # rm -f 4GB.big
    # echo 3 > /proc/sys/vm/drop_caches
    # dd if=/dev/zero bs=16k count=262144  of=./4GB.big status=progress
    4294967296 bytes (4.3 GB, 4.0 GiB) copied, 1.99471 s, 2.2 GB/s

    # rm -f 4GB.big
    # echo 3 > /proc/sys/vm/drop_caches
    # dd if=/dev/zero bs=32k count=131072  of=./4GB.big status=progress
    4294967296 bytes (4.3 GB, 4.0 GiB) copied, 1.46653 s, 2.9 GB/s

    # rm -f 4GB.big
    # echo 3 > /proc/sys/vm/drop_caches
    # dd if=/dev/zero bs=64K  count=65536  of=./4GB.big status=progress
    4294967296 bytes (4.3 GB, 4.0 GiB) copied, 1.33339 s, 3.2 GB/s

    # rm -f 4GB.big
    # echo 3 > /proc/sys/vm/drop_caches
    # dd if=/dev/zero bs=128K  count=32768  of=./4GB.big status=progress
    4294967296 bytes (4.3 GB, 4.0 GiB) copied, 1.27792 s, 3.4 GB/s

    # rm -f 4GB.big
    # echo 3 > /proc/sys/vm/drop_caches
    # dd if=/dev/zero bs=256K  count=16384  of=./4GB.big status=progress
    4294967296 bytes (4.3 GB, 4.0 GiB) copied, 1.23632 s, 3.5 GB/s

    # rm -f 4GB.big
    # echo 3 > /proc/sys/vm/drop_caches
    # dd if=/dev/zero bs=512K count=8192 of=./4GB.big status=progress
    4294967296 bytes (4.3 GB, 4.0 GiB) copied, 1.22599 s, 3.5 GB/s
    åŠ ä¸Š oflag=syncï¼š156 MB/s

    å›ºæ€ç¡¬ç›˜ç‰©ç†æ‰‡åŒºå¤§å° 512 bytesï¼Œç”¨ç¼“å­˜çš„çš„å³°å€¼å°±é€‰ 512k å§ï¼Œè¿™æ ·å¥½è®°

    # rm -f 4GB.big
    # echo 3 > /proc/sys/vm/drop_caches
    # dd if=/dev/zero bs=1M  count=4096  of=./4GB.big status=progress
    4294967296 bytes (4.3 GB, 4.0 GiB) copied, 1.28943 s, 3.3 GB/s
    åŠ ä¸Š oflag=syncï¼š283 MB/s

    # rm -f 4GB.big
    # echo 3 > /proc/sys/vm/drop_caches
    # dd if=/dev/zero bs=4M  count=1024  of=./4GB.big status=progress
    4294967296 bytes (4.3 GB, 4.0 GiB) copied, 1.48231 s, 2.9 GB/s
    åŠ ä¸Š oflag=syncï¼š721 MB/s

    # rm -f 4GB.big
    # echo 3 > /proc/sys/vm/drop_caches
    # dd if=/dev/zero bs=16M  count=256  of=./4GB.big status=progress
    4294967296 bytes (4.3 GB, 4.0 GiB) copied, 1.61058 s, 2.7 GB/s
    åŠ ä¸Š oflag=syncï¼š1.3 GB/s

    # rm -f 4GB.big
    # echo 3 > /proc/sys/vm/drop_caches
    # dd if=/dev/zero bs=512M  count=8  of=./4GB.big status=progress
    4294967296 bytes (4.3 GB, 4.0 GiB) copied, 1.81945 s, 2.4 GB/s
    åŠ ä¸Š oflag=syncï¼š1.6 GB/s

    # rm -f 4GB.big
    # echo 3 > /proc/sys/vm/drop_caches
    # dd if=/dev/zero bs=1G  count=4  of=./4GB.big status=progress
    4294967296 bytes (4.3 GB, 4.0 GiB) copied, 1.81385 s, 2.4 GB/s
    åŠ ä¸Š oflag=syncï¼š1.7 GB/s

    å›ºæ€ç¡¬ç›˜ç‰©æ— ç¼“å­˜çš„çš„å³°å€¼å°±é€‰ 1Gï¼Œè¿™æ ·å¥½è®°

    # rm -f 4GB.big
    # echo 3 > /proc/sys/vm/drop_caches
    # dd if=/dev/zero bs=2G  count=2  of=./4GB.big status=progress
    dd: warning: partial read (2147479552 bytes); suggest iflag=fullblock
    0+2 records in
    0+2 records out
    4294959104 bytes (4.3 GB, 4.0 GiB) copied, 1.97324 s, 2.2 GB/s
    åŠ ä¸Š oflag=syncï¼š1.5 GB/s

    åˆ°è¿™é‡Œæ“ä½œç³»ç»Ÿæä¾› /dev/zero çš„é€Ÿåº¦è·Ÿä¸ä¸Šå›ºæ€ç¡¬ç›˜äº†ï¼Œå¼€å§‹æç¤ºæ•°æ®ä¸¢å¤±äº†ã€‚æ ¹æ®ç« èŠ‚ [ç»™random()å¢åŠ ç†µï¼Œæå‡ç³»ç»ŸåŠ å¯†çš„é€Ÿåº¦](init_a_server think) é‡Œçš„æµ‹è¯•ï¼Œæˆ‘çš„ /dev/zero ç”Ÿæˆé€Ÿåº¦åœ¨ 2.7 GB/sã€‚

    # rm -f 4GB.big
    # echo 3 > /proc/sys/vm/drop_caches
    # dd if=/dev/zero bs=4G  count=3  of=./12GB.big status=progress
    2147479552 bytes (2.1 GB, 2.0 GiB) copied, 1 s, 1.9 GB/s
    dd: warning: partial read (2147479552 bytes); suggest iflag=fullblock
    4294959104 bytes (4.3 GB, 4.0 GiB) copied, 2 s, 2.1 GB/s
    0+3 records in
    0+3 records out
    6442438656 bytes (6.4 GB, 6.0 GiB) copied, 2.93817 s, 2.2 GB/s
    åŠ ä¸Š oflag=syncï¼š1.6 GB/s

    # rm -f 12GB.big

> æµ‹è¯•æ™®é€šç¡¬ç›˜æœ€ä¼˜ bs å‚æ•°

    $ sudo su

ç”¨ dd ä» /dev/zero å†™å…¥ 4TB æ–‡ä»¶æ˜¯ç¬é—´å®Œæˆçš„ï¼Œå…³é—­ç¡¬ç›˜çš„ç¼“å­˜éƒ½ä¸ç®¡ç”¨

    # hdparm -W /dev/sda

    /dev/sda:
    write-caching =  1 (on)

    # hdparm -W 0 /dev/sda

    /dev/sda:
    setting drive write-caching to 0 (off)
    write-caching =  0 (off)

æ²¡åŠæ³•ï¼Œåœ¨æˆ‘çš„å›ºæ€ç¡¬ç›˜ä¸Šç”Ÿæˆä¸€ä¸ª 4GB çš„æ–‡ä»¶ï¼Œå†…å®¹ç”¨éšæœºæ•°å¡«å……ï¼Œè®©ä½ æ²¡æ³•ä¼˜åŒ–

    # cd /root/tmp
    # dd if=/dev/urandom bs=512K  count=8192  of=./4GB.big status=progress

æµ‹è¯•ç”¨ dd ä»å›ºæ€ç¡¬ç›˜æ‹·è´è¯¥æ–‡ä»¶åˆ°æ™®é€šç¡¬ç›˜ï¼Œè¿˜æ˜¯ç§’å®Œæˆï¼Œçœ‹æ¥ä¸æ˜¯è¿™ä¸ªåŸå› ã€‚

åªèƒ½æ·»åŠ  oflag=sync é€‰é¡¹è¿›è¡Œæµ‹è¯•äº†ï¼Œé€ä¸ªè¿è¡Œä»¥ä¸‹è¯­å¥ï¼Œçœ‹è¾“å‡ºç»“æœï¼Œæœ‰é€Ÿç‡ä¿¡æ¯

    # cd /mnt/common1

    # rm -f 4GB.big
    # echo 3 > /proc/sys/vm/drop_caches
    # dd if=/dev/zero bs=512k count=8192 oflag=sync of=./4GB.big status=progress
    4294967296 bytes (4.3 GB, 4.0 GiB) copied, 44.9049 s, 95.6 MB/s

    # rm -f 4GB.big
    # echo 3 > /proc/sys/vm/drop_caches
    # dd if=/dev/zero bs=1M count=4096 oflag=sync of=./4GB.big status=progress
    4294967296 bytes (4.3 GB, 4.0 GiB) copied, 29.415 s, 146 MB/s

    # rm -f 4GB.big
    # echo 3 > /proc/sys/vm/drop_caches
    # dd if=/dev/zero bs=4M count=1024 oflag=sync of=./4GB.big status=progress
    4294967296 bytes (4.3 GB, 4.0 GiB) copied, 22.5178 s, 191 MB/s

    æ™®é€šç¡¬ç›˜ç‰©ç†æ‰‡åŒºå¤§å° 4096 bytesï¼Œæ— ç¼“å†²å†™å…¥çš„å³°å€¼å°±é€‰ 4M å§ï¼Œè¿™æ ·å¥½è®°

    # rm -f 4GB.big
    # echo 3 > /proc/sys/vm/drop_caches
    # dd if=/dev/zero bs=8M count=512 oflag=sync of=./4GB.big status=progress
    4294967296 bytes (4.3 GB, 4.0 GiB) copied, 21.719 s, 198 MB/s

    # rm -f 4GB.big
    # echo 3 > /proc/sys/vm/drop_caches
    # dd if=/dev/zero bs=16M count=256 oflag=sync of=./4GB.big status=progress
    4294967296 bytes (4.3 GB, 4.0 GiB) copied, 25.5028 s, 168 MB/s

> hdparm å¯ç”¨äºæµ‹è¯•ç£ç›˜å’Œç£ç›˜ç¼“å­˜è¯»å–é€Ÿåº¦

æŸ¥çœ‹ç£ç›˜ä¿¡æ¯ï¼š

    fdisk -l /dev/sdX

    hdparm /dev/sdX

è¯„ä¼°ç£ç›˜è¯»å–é€Ÿåº¦ï¼š

    hdparm -t /dev/sdX

è¯„ä¼°ç£ç›˜ç¼“å­˜è¯»å–é€Ÿåº¦ï¼š

    hdparm -T /dev/sdX

ç›´æ¥æµ‹è¯•ç¡¬ç›˜çš„è¯»æ€§èƒ½(ç»•è¿‡å†…æ ¸é¡µç¼“å­˜)ï¼š

    hdparm -tT --direct /dev/sdX

é¡ºåºå†™æµ‹è¯•ï¼š

    time -p  bash -c "dd if=/dev/urandom of=./dd.log bs=1M count=50000"

éšæœºå†™æµ‹è¯•(ä½¿ç”¨directæ ‡è¯†ï¼Œç»•è¿‡é¡µç¼“å­˜)ï¼š

    fio -filename=randw-singlethread -fallocate=none -direct=1 -iodepth 1 -thread -rw=randwrite -ioengine=libaio -bs=32k -size=1000M -runtime=30s -numjobs=1 -name=hdparm-randwsinglethread

#### Partial read:åªè¦æŒ‡å®šäº† count å°±å¿…é¡»ç”¨ iflag=fullblock

    https://wiki.archlinux.org/title/Dd#Partial_read:_copied_data_is_smaller_than_requested

        https://unix.stackexchange.com/questions/556016/cat-dd-pipe-causes-partial-reads-without-iflag-fullblock-why-truncated-to-128

        https://unix.stackexchange.com/questions/12532/dd-vs-cat-is-dd-still-relevant-these-days/12538#12538

        https://unix.stackexchange.com/questions/17295/when-is-dd-suitable-for-copying-data-or-when-are-read-and-write-partial

NOTE: dd çš„å—å¼è¯»å†™æœ‰ä¸ªæ¯›ç—…ï¼Œç³»ç»Ÿè°ƒç”¨å‡½æ•° read() åœ¨ç®¡é“æ“ä½œåä¼šé™é»˜çš„è·³è¿‡æŸäº›å­—èŠ‚æ•°ï¼Œç‰¹åˆ«æ˜¯è¾“å…¥æ•°æ®çš„ç¼“å†²ä¸è¶³çš„æƒ…å†µä¸‹ï¼Œä¼šä¸ç­‰æ•°æ®ç›´æ¥å†™å…¥æ•°æ®å—ã€‚æœ€å¸¸è§çš„åœºæ™¯æ˜¯ç”¨ dd æ¥æ”¶æ¥è‡ªç®¡é“çš„æ•°æ®ï¼Œæˆ–è€…ä½¿ç”¨ç³»ç»Ÿè®¾å¤‡ /dev/random è€Œç³»ç»Ÿçš„ç†µä¸è¶³çš„æ—¶å€™ï¼Œæ‰€ä»¥åªè¦æŒ‡å®šäº† countï¼Œé‚£å°±å¿…é¡»ç”¨ iflag=fullblock ç¡®ä¿æ•°æ®å¤Ÿäº†å†å†™å…¥

    dd ä¸¢æ•°æ®ï¼Œçœ‹çœ‹ä½ çš„æ–‡ä»¶å­—èŠ‚æ•°æ˜¯ä¸æ˜¯ 10M
    $ yes |dd of=dd_miss.txt bs=1024k count=10

    $ yes |head -c 10M >head_ok1.txt
    $ head -c 10M /dev/zero >head_ok2.txt

æ‰€ä»¥å¿…é¡»æ·»åŠ  iflag=fullblock

    $ yes |dd of=dd_ok.txt bs=1024k count=10 iflag=fullblock

å®åœ¨ä¸æƒ³åŠ ï¼Œå°±ç»•ä¸€å±‚

    $ LC_ALL=C tr -dc '[:alnum:]' </dev/urandom | dd of=passtext-5m.txt bs=4k count=1280

å¦‚æœæ·»åŠ  `iflag=fullblock` é€‰é¡¹åéƒ¨åˆ†I/Oå—è®¡æ•°ä»å¤§äº1ï¼Œè¿™æ„å‘³ç€éƒ¨åˆ†I/Oå‘ç”Ÿäº†å¤šæ¬¡

    $ yes 'x' | dd bs=4096 count=512400B | dd ibs=1 count=512200 status=none >/dev/null
    125+1 records in  <---- åŠ å·è¡¨ç¤ºå‘ç”Ÿéƒ¨åˆ† IO çš„å—çš„ä¸ªæ•°
    125+1 records out
    512400 bytes (512 kB, 500 KiB) copied, 10.7137 s, 47.8 kB/s

è¿™ç§é”™è¯¯å¤šå‘äºç½‘ç»œè¿æ¥ä¸è‰¯ï¼Œæˆ–è¯»å–å…‰ç›˜ç­‰åœºæ™¯ï¼Œåº”è¯¥ä½¿ç”¨ `ddrescue` å¤šæ¬¡é‡å¤è¯»å–ï¼Œå‚è§ç« èŠ‚ [ä½¿ç”¨ dd_rescue å…‹éš†æ•…éšœç¡¬ç›˜](think)ã€‚

### å¿«é€Ÿæ¸…ç†æ–‡ä»¶å’Œå¿«é€Ÿå»ºç«‹æ–‡ä»¶

æŒ‡å®šå¤§å°ï¼Œç”¨å…¨é›¶å¡«å……ï¼Œé€Ÿåº¦æ…¢

    # æ¢æˆ /dev/urandom éšæœºå€¼å¡«å……ï¼Œé€Ÿåº¦æ›´æ…¢
    # dd if=/dev/zero of=fs.img bs=1M count=1M seek=1024
    $ head -c 1024M /dev/zero >fs.img

æŒ‡å®šå¤§å°ï¼Œç”¨ truncate å‘½ä»¤æ›´å¿«ï¼Œæ–‡ä»¶æ˜¯ç©ºçš„ï¼Œç¬é—´å»ºæˆ

    $ truncate --size 10G test.db.bak

    é¢„åˆ›å»ºå—æ–‡ä»¶ï¼Œæœ‰ä¸ªæ›´å¿«çš„å‘½ä»¤

        $ fallocate -l 10G test_file2.img

å¿«é€Ÿæ¸…ç†æ–‡ä»¶

    # truncate -s 0 /var/log/yum.log
    # echo '' >your_big.log
    > your_big.log

åˆ é™¤å¤§é‡æ–‡ä»¶

    åˆ é™¤æ•°é‡å·¨å¤§çš„æ–‡ä»¶ï¼Œ rm * æŠ¥é”™ï¼Œç”¨ find å‘½ä»¤éå†ç›®å½•æŒ¨ä¸ªä¼ å‚æ•°çš„åŠæ³•åˆ é™¤ï¼Œè™½ç„¶æ…¢ä½†æ˜¯èƒ½åšï¼Œæ³¨æ„ç”¨åå°å‘½ä»¤ï¼Œä¸ç„¶æŒ‚å¥½ä¹…

        $ find /tmp -type f -exec rm {} \; &

        $ find /home -type f -size 0 -exec rm {} \;

    æœ€å¿«æ–¹æ³•

        https://web.archive.org/web/20130929001850/

        http://linuxnote.net/jianingy/en/linux/a-fast-way-to-remove-huge-number-of-files.html

        $ mkdir empty && rsync -r --delete empty/ some-dir && rmdir some-dir

### å‹ç¼©è§£å‹ç¼© tar gz bz2 tbz lzo

    tar [é€‰é¡¹] [é€‰é¡¹å‚æ•°] [ç”Ÿæˆæ–‡ä»¶å] [æºæ–‡ä»¶1 æºæ–‡ä»¶2 ...]

tar å‘½ä»¤çš„é€‰é¡¹åŠå‚æ•°æœ‰å‡ ç§å†™æ³•ï¼Œæ³¨æ„åŒºåˆ«

    ä¼ ç»Ÿå†™æ³•ï¼šæ²¡æœ‰ -ï¼Œå¤šä¸ªå•å­—æ¯é€‰é¡¹åˆèµ·æ¥å†™åœ¨ç¬¬ä¸€ä¸ªé€‰é¡¹ä½

        tar vcf a.tar /tmp

    UNIX å†™æ³•ï¼šç”¨ -é€‰é¡¹1 é€‰é¡¹1è‡ªå·±çš„å‚æ•° -é€‰é¡¹2 é€‰é¡¹2è‡ªå·±çš„å‚æ•°

        tar -f a.tar -c -v /tmp

        # æ²¡æœ‰å‚æ•°çš„é€‰é¡¹å¯ä»¥åˆå†™
        tar -f a.tar -vc /tmp

            # é€‰é¡¹ f ä¹Ÿå¯ä»¥åˆå†™ï¼Œä½†æ˜¯è¦æ”¾åœ¨æœ€åï¼Œä»¥ä¾¿åé¢ç´§è·Ÿè‡ªå·±çš„å‚æ•°ï¼Œç„¶åæ‰æ˜¯æ•´ä¸ªå‘½ä»¤çš„å‚æ•°
            tar -vcf a.tar /tmp

            # è¿™ç§å†™æ³•å¸¸è§ï¼Œå¦‚ def.sh æ˜¯ o çš„å‚æ•°ï¼Œè¿å†™äº†ï¼Œå°±è¦ç´§è·Ÿ
            curl -fsSLo def.sh https://github.com/.../abc.sh

    GUN å†™æ³•ï¼šç”¨ -- æˆ– -ï¼Œè¿å†™ç”¨ä¸€ä¸ª -

        # --é€‰é¡¹ åé¢ç´§è·Ÿç©ºæ ¼å‚æ•°
        tar --verbose --create --file a.tar /tmp

        # -- ä¹Ÿå¯ä»¥ç”¨å•å­—æ¯é€‰é¡¹è¿å†™ï¼Œä½†æ˜¯è¦ä¿è¯æ²¡æœ‰æ­§ä¹‰
        # -- é€‰é¡¹ç”¨=è¿æ¥å‚æ•°ï¼Œä¸­é—´æ²¡æœ‰ç©ºæ ¼ã€‚å¯é€‰å‚æ•°å¿…é¡»å§‹ç»ˆä½¿ç”¨è¿™ç§æ–¹æ³•
        tar --verb --cre --file=a.tar /tmp

tar æœ€åˆåªæ˜¯ä¸ªæ‰“åŒ…å·¥å…·ï¼ŒæŠŠç»™å®šçš„æ–‡ä»¶å’Œç›®å½•ç»Ÿä¸€æ‰“åŒ…ç”Ÿæˆ .tar æ–‡ä»¶ã€‚

    # åªæ‰“åŒ…ï¼Œç”Ÿæˆ .tar æ–‡ä»¶ï¼ŒåŠ å‚æ•° v æ˜¾ç¤ºæ˜ç»†

    tar cf myarch.tar dir1 dir2 file2.txt

        # è§£åŒ…
        tar xf myarch.tar

å¤§æ–‡ä»¶æ‰“åŒ…åï¼Œåº”è¯¥åšä¸ªäº‹åæ ¡éªŒï¼Œå¦‚æœç›®å½•æˆ–å­ç›®å½•çš„æ–‡ä»¶æœ‰å˜åŒ–ï¼Œéƒ½ä¼šæç¤º

    $ tar df arc.tar.gz
    dir1/file1: Mod time differs
    dir1/file1: Contents differ
    file2: Mod time differs
    file2: Contents differ

ä½†æ˜¯æˆ‘ä»¬æœ€å¸¸ç”¨çš„æ˜¯æ‰“åŒ…ç„¶åå†å‹ç¼©ï¼Œæ‰€ä»¥ tar æ‰©å±•æ”¯æŒ .gz å’Œ .bz2(.tbz)ï¼Œå®è´¨æ˜¯è°ƒç”¨ç°æœ‰çš„ gzip ç¨‹åºæŠŠè‡ªå·±æ‰“åŒ…å¥½çš„æ–‡ä»¶å†å‹ç¼©ï¼Œä½†æ˜¯èŠ‚çœäº†ç”¨æˆ·åœ¨å‘½ä»¤è¡Œçš„è¾“å…¥ã€‚

æœ€å¸¸ç”¨çš„ .tar.gz æ–‡ä»¶

    # ç”¨ c æ‰“åŒ…å¹¶ z å‹ç¼©ï¼Œv æ˜¯æ˜¾ç¤ºæ˜ç»†ï¼Œç”Ÿæˆ .tar.gz æ–‡ä»¶ï¼Œæºå¯ä»¥æ˜¯å¤šä¸ªæ–‡ä»¶æˆ–ç›®å½•å
    tar vczf arc.tar.gz file1 file2

    # æŠŠ z æ¢æˆ j å°±æ˜¯å‹ç¼©ä¸º .bz2(.tbz) æ–‡ä»¶ï¼Œè€Œä¸æ˜¯ .gz æ–‡ä»¶äº†
    tar vcjf arc.tar.bz2 file1 file2

    # è§£åŒ…å¹¶è§£å‹ç¼©
    # æŠŠ x æ¢æˆ t å°±æ˜¯åªæŸ¥çœ‹æ–‡ä»¶åˆ—è¡¨è€Œä¸çœŸæ­£è§£å‹
    tar vxzf arc.tar.gz
    tar vxjf xx.tar.bz2

tar æ”¯æŒç®¡é“æ“ä½œï¼Œåœ¨å‘½ä»¤å‚æ•°ä¸­æ–‡ä»¶åçš„ä½ç½®ä½¿ç”¨ bash çš„ç‰¹æ®Šç¬¦å· -ï¼ˆå‡å·ï¼‰ï¼Œä»£è¡¨æ ‡å‡†è¾“å‡º/æ ‡å‡†è¾“å…¥ã€‚
ä¸‹é¢çš„ä¾‹å­ä¸­ä¸å°‘ç¤ºä¾‹ï¼Œé…Œæƒ…å‚è€ƒã€‚

    # æŠŠ /home ç›®å½•æ‰“åŒ…ï¼Œè¾“å‡ºåˆ°æ ‡å‡†è¾“å…¥æµï¼Œç®¡é“åé¢çš„å‘½ä»¤æ˜¯ä»æ ‡å‡†è¾“å‡ºæµè¯»å–æ•°æ®è§£åŒ…
    tar cf - /home |tar -xf -

    # curl ä¸‹è½½é»˜è®¤è¾“å‡ºæ˜¯æ ‡å‡†è¾“å…¥æµï¼Œç®¡é“åé¢çš„å‘½ä»¤æ˜¯ tar ä»æ ‡å‡†è¾“å‡ºæµè¯»å–æ•°æ®è§£å‹åˆ°æŒ‡å®šçš„ç›®å½•ä¸‹
    curl -fsSL https://go.dev/dl/go1.19.5.linux-armv6l.tar.gz |sudo tar -C /usr/local -xzf -

    # æ‰“åŒ…å¹¶ gpg åŠ å¯†
    tar cjf - dir1 dir2 file2 node.exe |gpg --output backup.tar.bz2.gpg --cipher-algo AES-256 -c -

        # è§£å¯†å¹¶è§£åŒ…
        # dd if=backup.tar.bz2.gpg |gpg -d - |tar xjf -
        gpg -d backup.tar.bz2.gpg |tar xjf -

    # æ‰“åŒ…å¹¶ openssl åŠ å¯†
    # å°†å½“å‰ç›®å½•ä¸‹çš„ files æ–‡ä»¶å¤¹æ‰“åŒ…å‹ç¼©ï¼Œæç¤ºè¾“å…¥å¯†ç 
    tar czf - files |openssl enc -aes-256-cbc -pbkdf2 -out files.tar.gz.bin

        # è§£å¯†å¹¶è§£åŒ…
        # å°†å½“å‰ç›®å½•ä¸‹çš„files.tar.gzè¿›è¡Œè§£å¯†è§£å‹æ‹†åŒ…
        openssl enc -aes-256-cbc -pbkdf2 -d -in files.tar.gz.bin |tar xzf -

    # ä¸è¦†ç›–æ–‡ä»¶ï¼Œæå–æ–‡ä»¶æƒé™ä¿¡æ¯
    tar -vkpf a.tar /tmp

    # æŠŠæœ¬åœ°ç›®å½•æ‰“åŒ…å¹¶ç›´æ¥ç”¨ ssh ä¼ é€è¿œç¨‹æœåŠ¡å™¨ï¼Œæ³¨æ„è¿™ç§ç”¨æ³•æ— æ ¡éªŒåªé€‚åˆäºå†…ç½‘ç¯å¢ƒ
    tar --create --directory /home/josevnz/tmp/ --file - *| \
        ssh raspberrypi "tar --directory /home/josevnz \
        --verbose --list --file -"

.gz æ–‡ä»¶

    # å‹ç¼©ï¼Œç”ŸæˆåŒåæ–‡ä»¶ï¼Œåç¼€.gzï¼ŒåŸæ–‡ä»¶é»˜è®¤åˆ é™¤ï¼Œé™¤éä½¿ç”¨ -k å‚æ•°ä¿ç•™
    gzip FileName

    # åˆ—å‡ºæŒ‡å®šæ–‡ä»¶åˆ—è¡¨å¹¶å‹ç¼©
    ls |grep -v GNUmakefile |xargs gzip

    # è§£å‹ç¼©
    # gunzip FileName.gz
    gzip -d FileName.gz

    # æŸ¥çœ‹å†…å®¹
    zcat usermod.8.gz

.zip æ–‡ä»¶

    # å‹ç¼©æ–‡ä»¶ï¼Œç”Ÿæˆæ–°æ–‡ä»¶ï¼Œå¹¶æ·»åŠ  .zip åç¼€çš„æ–‡ä»¶
    zip arc file1.txt file2.txt ...

    # æ‰“åŒ…å‹ç¼©ç›®å½•
    zip -r arc.zip foo1/ foo2/

    # è§£å‹ç¼©zip
    unzip arc.zip -d your_unzip_dir

    # æŸ¥æ‰¾åŒ¹é…çš„ c è¯­è¨€æ–‡ä»¶å¹¶æ‰“åŒ…å‹ç¼©
    find . -name "*.[ch]" -print | zip source_code -@

    # æŠŠå½“å‰ç›®å½•æ‰“åŒ…åˆ°tarï¼Œç”¨ zip å‹ç¼©
    tar cf - . | zip backup -

    # åªæŸ¥çœ‹æ–‡ä»¶åˆ—è¡¨
    unzip -l arc.zip

    # åˆ†å·å‹ç¼©ï¼ŒæŠŠç›®å½• win_font æ‰“åŒ…ä¸º wf.zip, wf.z01, wf.z01,... çš„ 10mbå¤§å°çš„åŒ…
    $ zip -r -s 10m wf.zip win_font/

        # è§£å‹åˆ†å·æ–‡ä»¶ï¼Œéœ€è¦å…ˆåˆå¹¶å‡ºä¸€ä¸ªå¤§zipæ–‡ä»¶
        $ zip -F wf.zip --out win_font.zip
        $ unzip win_font.zip

        Windows ä¸‹çš„ 7zip åˆ†å·å‹ç¼©åæ˜¯ wf.zip.001, wf.zip.002,...çš„åŒ…
        # è§£å‹åˆ†å·æ–‡ä»¶ï¼Œä¹Ÿæ˜¯éœ€è¦å…ˆæ‹¼åˆå†è§£å‹ï¼Œä½†ä¸éœ€è¦ä¸“é—¨çš„å‘½ä»¤ï¼Œç›´æ¥æ‹¼æ¥å†™æ–‡ä»¶å³å¯
        $ cat wf.zip.* >wf.zip
        $ unzip wf.zip

å¯¹å‹ç¼©è¿‡çš„æ–‡ä»¶è¿›è¡ŒæŸ¥çœ‹ç­‰æ“ä½œï¼Œä½¿ç”¨ zlessã€zmoreã€zcat å’Œ zgrep ç­‰ã€‚

.xz æ–‡ä»¶

    # æŠŠ foo.tar.xz è§£å‹ç¼©ä¸º foo.tar
    xz -d foo.tar.xz

    # æŠŠæ–‡ä»¶ foo å‹ç¼©ä¸º foo.xz
    xz foo

    # å¹¶è¡Œå‹ç¼© `man xz`
    find . -type f \! -name '*.xz' -print0 \
        | xargs -0r -P4 -n16 xz -T1

    # å ç”¨æœ€å°å†…å­˜çš„å‹ç¼©ç”¨æ³•
    xz --check=crc32 --lzma2=preset=6e,dict=64KiB foo

.rar æ–‡ä»¶

    # è§£å‹ç¼©å¼€æºç¨‹åºå„å¤§å‘è¡Œç‰ˆéƒ½æœ‰
    $ unrar x your.rar

    # å‹ç¼©ä¸æ˜¯å¼€æºçš„
    $ rar a your_dir_file

.lzo æ–‡ä»¶å‹ç¼©ï¼Œè§£å‹

    $ sudo apt install lzop

    lzopå‘½ä»¤åŸºæœ¬æ“ä½œå‘½ä»¤

    $ lzop -v test # åˆ›å»ºtest.lzoå‹ç¼©æ–‡ä»¶ï¼Œè¾“å‡ºè¯¦ç»†ä¿¡æ¯ï¼Œä¿ç•™testæ–‡ä»¶ä¸å˜

    $ lzop -Uv test # åˆ›å»ºtest.lzoå‹ç¼©æ–‡ä»¶ï¼Œè¾“å‡ºè¯¦ç»†ä¿¡æ¯ï¼Œåˆ é™¤testæ–‡ä»¶

    $ lzop -t test.lzo # æµ‹è¯•test.lzoå‹ç¼©æ–‡ä»¶çš„å®Œæ•´æ€§

    $ lzop â€“info test.lzo # åˆ—å‡ºtest.lzoä¸­å„ä¸ªæ–‡ä»¶çš„æ–‡ä»¶å¤´

    $ lzop -l test.lzo # åˆ—å‡ºtest.lzoä¸­å„ä¸ªæ–‡ä»¶çš„å‹ç¼©ä¿¡æ¯

    $ lzop â€“ls test.lzo # åˆ—å‡ºtest.lzoæ–‡ä»¶çš„å†…å®¹ï¼ŒåŒls -låŠŸèƒ½

    $ cat test | lzop > t.lzo # å‹ç¼©æ ‡å‡†è¾“å…¥å¹¶å®šå‘åˆ°æ ‡å‡†è¾“å‡º

    $ lzop -dv test.lzo # è§£å‹test.lzoå¾—åˆ°testæ–‡ä»¶ï¼Œè¾“å‡ºè¯¦ç»†ä¿¡æ¯ï¼Œä¿ç•™test.lzoä¸å˜

### æ–‡ä»¶é“¾æ¥ ln

ln å‘½ä»¤é»˜è®¤ç”Ÿæˆç¡¬é“¾æ¥ï¼Œä½†æ˜¯æˆ‘ä»¬é€šå¸¸ä½¿ç”¨è½¯è¿æ¥

    # ä¸»è¦æ˜¯ç»™å‡ºé“¾æ¥çš„ç›®æ ‡æ–‡ä»¶ï¼Œå¯ä»¥å¤šä¸ªï¼Œæœ€åçš„æ˜¯ä¿å­˜è½¯é“¾æ¥çš„æ–‡ä»¶ç›®å½•
    # å¦‚æœçœç•¥æœ€åçš„ç›®å½•ï¼Œé»˜è®¤å°±æ˜¯å½“å‰ç›®å½•ä¿å­˜ï¼Œè½¯è¿æ¥æ–‡ä»¶åé»˜è®¤è·Ÿç›®æ ‡æ–‡ä»¶åŒå
    # å¦‚æœæœ€åçš„ç›®å½•ç»™å‡ºçš„æ˜¯ä¸€ä¸ªæ–‡ä»¶åï¼Œåˆ™å°±æ˜¯åœ¨å½“å‰ç›®å½•ä¸‹å»ºç«‹è½¯é“¾æ¥æ–‡ä»¶
    ln -s /tmp/cmd_1 /tmp/cmd_2 /usr/bin/

### è®¡ç®—å™¨ bc

Linux bash shell ä¸­ä½¿ç”¨åŒæ‹¬å·å³å¯ç®€å•çš„è¿›è¡Œæ•´æ•°è®¡ç®—

    $ ADD=$(( 1 + 2 ))
    $ echo $ADD
    3

    $ MUL=$(( $ADD * 5 ))
    $ echo $MUL
    15

ä½¿ç”¨ expr å‘½ä»¤ï¼Œä¹Ÿæ˜¯è¿›è¡Œç®€å•çš„æ•´æ•°è®¡ç®—

    $ expr 3 + 5

    $ expr 5 â€“ 3

    $ expr 5 * 3

    $ expr 20 / 4

    $ expr 15 % 4  è¿™ä¸ªæ˜¯å–ä½™æ•°
    3

expr è¿˜æ”¯æŒæ¯”è¾ƒæ“ä½œï¼Œå½“è¡¨è¾¾å¼æ±‚å€¼ä¸º false æ—¶ï¼Œexpr å°†æ‰“å°å€¼0ï¼Œå¦åˆ™æ‰“å°1ã€‚

    $ expr 5 = 3
    0

    $ expr 5 = 5
    1

    $ expr 8 != 5

    $ expr 8 > 5

    $ expr 8 < 5

    $ expr 8 <= 5

æ”¯æŒæµ®ç‚¹è¿ç®—çš„è®¡ç®—å™¨ bc - An arbitrary precision calculator language

    # sudo apt install bc
    $ echo '1 / 6' |bc -l
    .16666666666666666666

å¯ä»¥ç›´æ¥ä¼ ç®—å¼ç»™ bc

    $ echo '3+5' | bc

    $ echo '15 % 2' | bc

    $ echo '15 / 2' | bc

    $ echo '(6 * 2) - 5' | bc

è¿˜å¯ä»¥ç”¨ awk

    $ awk 'BEGIN { a = 6; b = 3; print "(a + b) = ", (a + b) }'
    (a + b) =  9

### ç”ŸæˆäºŒç»´ç  qrencode

éœ€è¦å®‰è£…è½¯ä»¶åŒ… qrencodeã€‚

ç”ŸæˆäºŒç»´ç åˆ°ç»ˆç«¯æ¨¡æ‹Ÿå™¨

    $ echo abcd1234 | qrencode -t ANSIUTF8

    $ qrencode -t ANSIUTF8 < your_config.cfg

`-t ANSIUTF8` è¡¨ç¤ºç”Ÿæˆçš„ç±»å‹æ˜¯æ–‡æœ¬å­—ç¬¦ç”»ï¼Œè¿™æ ·åœ¨ä»»ä½•ç»ˆç«¯æˆ–æ–‡æœ¬ç¼–è¾‘å™¨é‡Œéƒ½å¯ä»¥æ­£å¸¸æ˜¾ç¤ºã€‚

æ·»åŠ  -o ç”Ÿæˆåˆ°æ–‡ä»¶

    $ qrencode -t ansiutf8 -o kk.txt < your_config.cfg

### æ–‡ä»¶å®Œæ•´æ€§æ ¡éªŒ sha256sum

Linux ä¸‹ï¼Œæ¯ä¸ªç®—æ³•éƒ½æ˜¯å•ç‹¬çš„ç¨‹åºï¼šcksum md5sum sha1sum sha256sum sha512sum

ç›´æ¥ä¼ é€’æ–‡ä»¶åæ“ä½œå³å¯

ç”Ÿæˆ

    # ç”Ÿæˆ crc æ ¡éªŒå’Œä»¥åŠå­—èŠ‚æ•°
    $ cksum test.json
    1758862648 4855 test.json

    # ç”Ÿæˆ sha256 æ ¡éªŒæ–‡ä»¶
    $ sha256sum file > file.sha256

    # ç”Ÿæˆå¤šä¸ªæ–‡ä»¶çš„sha256æ ¡éªŒ
    $ sha256sum a.txt b.txt > checksums.sha256
    $ more checksums.sha256
    17e682f060b5f8e47ea04c5c4855908b0a5ad612022260fe50e11ecb0cc0ab76  a.txt
    3cf9a1a81f6bdeaf08a343c1e1c73e89cf44c06ac2427a892382cae825e7c9c1  b.txt

    # ç”Ÿæˆ BSD-style çš„æ ¡éªŒ
    $ sha256sum --tag colortest.sh  bing.jpg
    SHA256 (colortest.sh) = b855d0ce40d7b578c41c2f199692570e627fb4501b3098de0c8e507f133c08c0
    SHA256 (bing.jpg) = 90f9a057885b0d72ecca5d6708ca3e9c69419eb6dd46bc5071a4e17e31ed6178

    å¯¹å½“å‰ç›®å½•ä¸‹æ‰¾åˆ°çš„æ‰€æœ‰æ–‡ä»¶ï¼Œç”Ÿæˆæ ¡éªŒç 
    find . -type f -exec sha256sum \{\} \; >SHA256SUMS.txt

æ ¡éªŒ

    # æ ¹æ®æ ¡éªŒå’Œæ–‡ä»¶è¿›è¡Œæ ¡éªŒ
    $ sha256sum -c checksums.sha256
    a.txt: OK
    b.txt: OK

    # åªä¸‹è½½äº†ä¸€ä¸ªæ–‡ä»¶ï¼Œä»æ ¡éªŒå’Œæ–‡ä»¶ä¸­æŠ½å‡ºå•ä¸ªæ–‡ä»¶è¿›è¡Œæ ¡éªŒ
    $ sha256sum -c <(grep ubuntu-20.04.4-desktop-amd64.iso SHA256SUMS.txt)
    # æˆ–
    $ sha256sum --ignore-missing -c SHA256SUMS.txt

ä½¿ç”¨ OpenSSL éªŒè¯

    # ä¸»è¦ç”¨äºæ•°æ®æ‘˜è¦ï¼Œå¯æŒ‡å®šå„ç§ç®—æ³•æŸ¥çœ‹ openssl dgst -list
    $ openssl dgst -sha256 Release.unsigned
    SHA256(Release.unsigned)= f6edd059408744b50edc911111111113eeef30dc5fea0

    # è·Ÿæ ¡éªŒå’Œæ–‡ä»¶æ¯”å¯¹æ•°å€¼
    $ grep f6edd059408744b50edc911111111113eeef30dc5fea0 *dgst
    SHA256= f6edd059408744b50edc911111111113eeef30dc5fea0

Windows è‡ªå¸¦å·¥å…·ï¼Œæ”¯æŒæ ¡éªŒMD5 SHA1 SHA256ç±»å‹æ–‡ä»¶ï¼Œcmdè°ƒå‡ºå‘½ä»¤è¡Œ

    certutil -hashfile  <æ–‡ä»¶å>  <hashç±»å‹>

å¦‚

    certutil -hashfile cn_windows_7.iso MD5
    certutil -hashfile cn_windows_7.iso SHA1
    certutil -hashfile cn_windows_7.iso SHA256

### å­—ç¬¦ä¸²å…è½¬ä¹‰å°±ç”¨ base64

    Base32 ç¼–ç æ¯ä»»æ„å…«ä½å­—èŠ‚åºåˆ—ï¼Œç”Ÿæˆå…¨å¤§å†™å­—æ¯

    Base64 ç¼–ç æ¯ä»»æ„å…«ä½å­—èŠ‚åºåˆ—ï¼Œç”ŸæˆåŒºåˆ†å¤§å†™å­—æ¯å’Œå°å†™å­—æ¯

å¯¹è„šæœ¬æ–‡ä»¶ã€å¤æ‚çš„æ­£åˆ™è¡¨è¾¾å¼ã€å«ç‰¹æ®Šå­—ç¬¦çš„å­—ç¬¦ä¸²ç­‰ï¼Œå…ˆç”¨ base32/base64 ç¼–ç åå†ä¼ é€’å‚æ•°ï¼Œä½¿ä½ çš„è„šæœ¬æ›´ç®€æ´

    $ echo "${variable}" | base64 -w 0

### ç”Ÿæˆéšæœºæ•°åšå¯†ç 

åœ¨ Linux ä¸­ï¼Œæœ‰ä¸¤ç±»ç”¨äºç”Ÿæˆéšæœºæ•°çš„è®¾å¤‡ï¼Œåˆ†åˆ«æ˜¯ /dev/random ä»¥åŠ /dev/urandom ï¼Œå…¶ä¸­å‰è€…å¯èƒ½ä¼šå¯¼è‡´é˜»å¡ï¼Œè€Œè¯»å– /dev/urandom ä¸ä¼šå µå¡ï¼Œä¸è¿‡æ­¤æ—¶ urandom çš„éšæœºæ€§å¼±äº randomã€‚ urandom æ˜¯ unblocked random çš„ç®€ç§°ï¼Œä¼šé‡ç”¨å†…éƒ¨æ± ä¸­çš„æ•°æ®ä»¥äº§ç”Ÿä¼ªéšæœºæ•°æ®ï¼Œå¯ç”¨äºéå¯†é’¥æ•°æ®çš„ç”Ÿæˆã€‚

    https://huataihuang.gitbooks.io/cloud-atlas/content/os/linux/device/random_number_generator.html

åœ¨ Linux ä¸­ç”Ÿæˆå¼ºå¯†ç çš„ä¸åŒæ–¹æ³•æœ‰å¾ˆå¤š

    https://ostechnix.com/4-easy-ways-to-generate-a-strong-password-in-linux/

    # ç”Ÿæˆ16ä¸ªå­—ç¬¦çš„å¼ºå¯†ç 
    $ cat /dev/random |tr -dc '!@#$%^&*()-+=0-9a-zA-Z' | head -c16
    etGemrXR*sq=Yf&7

    # å¯¹éšæœºæ•°åªå–å­—ç¬¦å’Œæ•°å­—ï¼Œå–å‰12ä¸ª
    # ç­‰æ•ˆ cat /dev/random |tr -dc 'a-zA-Z0-9' |head -c 12
    # ç­‰æ•ˆ cat /dev/random |tr -cd 'a-zA-Z0-9' |fold -w 12 |head -n 1
    $ cat /dev/random |tr -cd '[:alnum:]' |head -c 12
    wS481zVrIjXH

    ä»¥ä¸Šç”Ÿæˆçš„å¯†ç è¿‡çŸ­ï¼Œå¼ºåº¦æœªå¿…å¤Ÿï¼Œå¤šè¿è¡Œå‡ æ¬¡ï¼ŒæŒ‘ä¸€ä¸ªå¤§å°å†™å’Œæ•°å­—éƒ½æœ‰çš„æœ€æ‚ä¹±çš„ä½¿ç”¨å³å¯ã€‚
    å¦‚æœæ¢æˆ /dev/urandom ç‰¹åˆ«æ˜æ˜¾ï¼Œæ‰€ä»¥çŸ­å¯†ç è¿˜æ˜¯å°½é‡ç”¨ /dev/random ç”Ÿæˆ

    ######################################################################
    # ç”Ÿæˆ 32 å­—èŠ‚çš„éšæœºæ•°æ®ä½œä¸ºå¯†é’¥æ–‡ä»¶
    # dd if=/dev/random bs=1 count=32
    $ head -c 32 /dev/random >symmetric_keyfile.key

    # ç”Ÿæˆéšæœºæ•°æ®ï¼Œè¿‡æ»¤æ‰å›è½¦å­—ç¬¦ï¼Œåªå– 64 å­—èŠ‚ä½œä¸ºå¯†é’¥æ–‡ä»¶
    $ cat /dev/random |tr -d '\n' |head -c 64 >symmetric_keyfile.key

    # ç”Ÿæˆ 256 å­—èŠ‚çš„éšæœºæ•°æ®ä½œä¸ºå¯†é’¥æ–‡ä»¶
    $ openssl rand 256 >symmetric_keyfile.key

    ######################################################################
    # å¯¹éšæœºæ•°å–å“ˆå¸Œï¼Œç”¨ cksum å– crc æ ¡éªŒå’Œï¼Œè¿˜å¯ä»¥ç”¨ sha256sumã€md5sum ç­‰
    $ head /dev/random |cksum
    3768469767 1971

    # å¯¹éšæœºæ•°è½¬åŒ–ä¸º16è¿›åˆ¶2å­—èŠ‚ä¸€ç»„ï¼Œå–ç¬¬ä¸€è¡Œ
    $ cat /dev/random |od  -An -x |head -n 1
    0637 34d5 16f5 f393 250e a2eb aac0 27c3

    # å¯¹éšæœºæ•°ä½¿ç”¨ base64 ç¼–ç ï¼Œå–ç¬¬ä¸€è¡Œï¼Œ76ä¸ªå­—ç¬¦
    $ cat /dev/random |base64 |head -n 1
    79lGC+/glAJl7u84xJSY3ukXtPmr9pJGssocTebvC7B2z5ObA/eSJ9ws9Ur8gDSsnpcdy7v7r2RS

    # 22ä¸ª ascii å­—ç¬¦ï¼Œæ³¨æ„è¿™é‡Œçš„åé¢ä¸¤ä¸ªæ˜¯base64çš„3å­—èŠ‚è§„èŒƒå¡«å……äº†ç­‰å·
    $ gpg --armor --gen-random 2 16
    1uR4Fpo/oTxez0C+ljapaA==

    # 16 è¿›åˆ¶ç¼–ç çš„ 40 ä¸ªå­—ç¬¦
    $ openssl rand -hex 20
    f231202787c01502287c420a8a05e960ec8f5129

    # ä½¿ç”¨ base64 ç¼–ç ï¼Œæ³¨æ„ç¡®ä¿å­—èŠ‚æ•°å¯è¢« 3 æ•´é™¤ä»¥é¿å…å¡«å……
    # å¦‚æœå­—èŠ‚å‚æ•° 9ï¼Œåˆ™ base64 ç¼–ç ç”Ÿæˆ 12 ä¸ªå­—ç¬¦
    $ openssl rand -base64 9
    BhE3zmV1ki6D

    # ç”Ÿæˆä¸€ä¸ª uuidï¼Œè¿™ä¸ªä¹Ÿæ˜¯éšæœºçš„
    $ cat /proc/sys/kernel/random/uuid
    6ab4ef55-2501-4ace-b069-139855bea8dc

    # è¿™ä¸ª shuf ä¸çŸ¥é“æ˜¯å¦ä¼ªéšæœº
    # æŠŠæ•°å­— 5-12 ç›´æ¥ä¹±åºæ’åºï¼Œæ¯è¡Œä¸€ä¸ªæ•°å­—ï¼Œè¾“å‡º1è¡Œ
    $ shuf -i5-12 -n1
    9

ä½¿ç”¨ cracklib è½¯ä»¶åŒ…æ£€æŸ¥å£ä»¤çš„å¤æ‚åº¦

    $ echo 123654 |cracklib-check
    123654: it is too simplistic/systematic

    $ echo 4aoqemo |cracklib-check
    4aoqemo: OK

ä½¿ç”¨ apg è½¯ä»¶åŒ…ç”Ÿæˆå¯å‘éŸ³çš„å•è¯ç»„åˆå£ä»¤

    $ apg -l
    liwimthoa lima-india-whiskey-india-mike-tango-hotel-oscar-alfa
    NadCuenUc November-alfa-delta-Charlie-uniform-echo-november-Uniform-charlie
    clojyufdyt charlie-lima-oscar-juliett-yankee-uniform-foxtrot-delta-yankee-tango
    ReutDybIj Romeo-echo-uniform-tango-Delta-yankee-bravo-India-juliett
    OkAufwudAp Oscar-kilo-Alfa-uniform-foxtrot-whiskey-uniform-delta-Alfa-papa
    fiworews? foxtrot-india-whiskey-oscar-romeo-echo-whiskey-sierra-QUESTION_MARK

è¡¥å……ç†µæ± 

éšæœºæ•°ç”Ÿæˆçš„è¿™äº›å·¥å…·ï¼Œé€šè¿‡ /dev/random ä¾èµ–ç³»ç»Ÿçš„ç†µæ± ï¼Œè€ŒæœåŠ¡å™¨åœ¨è¿è¡Œæ—¶ï¼Œæ—¢æ²¡æœ‰é”®ç›˜äº‹ä»¶ï¼Œä¹Ÿæ²¡æœ‰é¼ æ ‡äº‹ä»¶ï¼Œé‚£ä¹ˆå°±ä¼šå¯¼è‡´å™ªå£°æºå‡å°‘ã€‚å¾ˆå¤šå‘è¡Œç‰ˆæœ¬ä¸­å­˜åœ¨ä¸€ä¸ª rngd ç¨‹åºï¼Œç”¨æ¥å¢åŠ ç³»ç»Ÿçš„ç†µæ± ï¼ˆç”¨ urandom ç»™ random çŒæ•°æ®ï¼‰ï¼Œè¯¦è§ç« èŠ‚ [ç»™random()å¢åŠ ç†µ](init_a_server think)ã€‚

#### ç”Ÿæˆé€šç”¨çš„ Unix æ ¼å¼çš„å¯†ç hash

åœ¨ Linux ä¸­å¯†ç ä¸æ˜¯æ˜æ–‡ä¿å­˜çš„ï¼Œè€Œæ˜¯åªä¿å­˜å®ƒçš„ hash å€¼å’Œç›ï¼Œæ ¡éªŒè¿‡ç¨‹å‘ç”Ÿåœ¨ç”¨æˆ·è¾“å…¥å¯†ç åï¼Œç”±éªŒè¯ç¨‹åºè®¡ç®—å¹¶ä¸ä¿å­˜çš„ hash å€¼æ¯”å¯¹ã€‚

æ ¼å¼

    $1$...$ æ®µçš„å†…å®¹æ˜¯åŠ å¯†ç®—æ³•å’Œç›saltï¼Œåé¢çš„æ‰æ˜¯è¯¥å¯†ç çš„ hash å€¼

> ä½¿ç”¨ mkpasswd å·¥å…·

    # sudo dnf install mkpasswd
    # sudo apt install whois

    $ mkpasswd --method=SHA-512 --rounds=4096
    Password: 123
    $6$rounds=4096$qEZgm6JVSHwGTlZk$N9lWSeGJ/cFA2gZth8KZus2afjoA2wvbxvwN6OOLAy4SaBlwlGgMcx2ByqvuCf5PV46HK.GguJTN/5JFFjIdt0

è¾“å…¥ä½ çš„å¯†ç å¦‚ 123ï¼Œè¾“å‡ºç»™å‡ºçš„æ˜¯åŠ å¯†ä¹‹å Linux å¯ä»¥è¯†åˆ«æ ¼å¼çš„hashå€¼

> ä½¿ç”¨ openssl

    `openssl help passwd`

ä½¿ç”¨ `openssl passwd <ä½ çš„å¯†ç >` å‘½ä»¤ï¼Œç”Ÿæˆå½¢å¦‚ `$5$your_salt$the_hashed_result` çš„å¯†ç å“ˆå¸Œæ ¼å¼ï¼Œè¿™æ˜¯åŸºäº Unix ç³»ç»Ÿçš„ crypt() å‡½æ•°çš„å¯†ç å“ˆå¸Œæ ¼å¼ã€‚è¿™ç§æ ¼å¼é€šå¸¸ç”¨äº Unix/Linux ç³»ç»Ÿçš„å¯†ç å­˜å‚¨ï¼Œå¹¶ä¸”è¢«å¤šç§åº”ç”¨ç¨‹åºå’ŒæœåŠ¡æ‰€æ”¯æŒï¼ŒåŒ…æ‹¬ Apache HTTP æœåŠ¡å™¨å’Œ Nginxã€‚

å…·ä½“ç»„æˆéƒ¨åˆ†å¦‚ä¸‹ï¼š

    $5$ï¼šè¿™æ˜¯ä¸€ä¸ªå›ºå®šçš„å‰ç¼€ï¼Œè¡¨ç¤ºä½¿ç”¨ SHA-256 åŠ å¯†ç®—æ³•ã€‚æ•°å­— 5 æ˜¯ crypt() å‡½æ•°ä¸­ç”¨äº SHA-256 çš„æ ‡è¯†ç¬¦ã€‚

    your_saltï¼šè¿™æ˜¯ç›å€¼ï¼ˆsaltï¼‰ï¼Œå®ƒæ˜¯ä¸€ä¸ªéšæœºå­—ç¬¦ä¸²ï¼Œç”¨äºä¸å¯†ç ä¸€èµ·å“ˆå¸Œï¼Œä»¥å¢åŠ å¯†ç çš„å¤æ‚åº¦å’Œå®‰å…¨æ€§ã€‚ç›å€¼å¯ä»¥é˜²æ­¢ä½¿ç”¨å½©è™¹è¡¨ï¼ˆé¢„å…ˆè®¡ç®—å¥½çš„å“ˆå¸Œè¡¨ï¼‰è¿›è¡Œæ”»å‡»ã€‚ç›å€¼çš„é•¿åº¦é€šå¸¸ä¸º 8 ä¸ªå­—ç¬¦ã€‚

    the_hashed_resultï¼šè¿™æ˜¯å¯†ç å’Œç›å€¼ç»è¿‡ SHA-256 å“ˆå¸Œç®—æ³•å¤„ç†åçš„ç»“æœã€‚è¿™ä¸ªç»“æœæ˜¯ä¸€ä¸ª 43 ä¸ªå­—ç¬¦çš„åå…­è¿›åˆ¶å­—ç¬¦ä¸²ã€‚

è¿™ç§æ ¼å¼çš„ä¼˜ç‚¹æ˜¯ï¼š

    å®‰å…¨æ€§ï¼šé€šè¿‡ä½¿ç”¨ç›å€¼ï¼Œæ¯ä¸ªç”¨æˆ·çš„å¯†ç å“ˆå¸Œéƒ½æ˜¯å”¯ä¸€çš„ï¼Œå³ä½¿ä¸¤ä¸ªç”¨æˆ·ä½¿ç”¨äº†ç›¸åŒçš„å¯†ç ã€‚

    å…¼å®¹æ€§ï¼šè¢«å¤šç§åº”ç”¨ç¨‹åºå’ŒæœåŠ¡å¹¿æ³›æ”¯æŒï¼ŒåŒ…æ‹¬ Apache HTTP æœåŠ¡å™¨ã€Nginxã€Postfix ç­‰ã€‚

    å¯é…ç½®æ€§ï¼šæ”¯æŒä¸åŒçš„å“ˆå¸Œç®—æ³•ï¼Œå¦‚ MD5ã€SHA-1ã€SHA-256 å’Œ SHA-512ã€‚

ä½¿ç”¨è¿™ç§æ ¼å¼æ—¶ï¼Œé€šå¸¸éœ€è¦ä½¿ç”¨ä¸“é—¨çš„å·¥å…·ï¼ˆå¦‚ htpasswd æˆ– openssl passwd å‘½ä»¤ï¼‰æ¥ç”Ÿæˆå¯†ç å“ˆå¸Œã€‚

openssl passwd çš„å¸¸ç”¨é€‰é¡¹

    -salt stringï¼šåŠ å…¥éšæœºæ•°ï¼Œç›®å‰ä¸éœ€è¦æ‰‹åŠ¨æŒ‡å®šäº†ï¼Œä¼šè‡ªåŠ¨ä½¿ç”¨ç³»ç»Ÿéšæœºæ•°

    -in fileï¼šå¯¹è¾“å…¥çš„æ–‡ä»¶å†…å®¹è¿›è¡ŒåŠ å¯†

    -stdionï¼šå¯¹æ ‡å‡†è¾“å…¥çš„å†…å®¹è¿›è¡ŒåŠ å¯†

é»˜è®¤ç”¨ MD5 ç®—æ³•å“ˆå¸Œä½ çš„å¯†ç 

    $ openssl passwd 123456
    $1$7F4haqDH$cVSLoqMYiBp.rggAG21Hz0

è¾“å‡ºå­—ç¬¦ä¸²çš„æ ¼å¼ï¼š

    å¼€å§‹çš„ $1$ ä½ä¸ºç®—æ³•æ ‡å¿—

        $1$ ä¸º MD5

        $5$ ä¸º SHA-256

        $6$ ä¸º SHA-512

        è¯¦è§ crypt() å‡½æ•°çš„è¯´æ˜

    ç¬¬äºŒæ®µ $1$...$ åŒ…è£¹çš„å†…å®¹æ˜¯ç›saltã€‚

    ç¬¬ä¸‰æ®µ cVSLoqMYiBp.rggAG21Hz0 æ‰æ˜¯è¯¥å¯†ç çš„ hash å€¼ï¼Œä¸‹åŒã€‚

ç¤ºä¾‹ï¼š

ä½¿ç”¨ sha256 å¯¹ä½ çš„å¯†ç è®¡ç®—å“ˆå¸Œ

    $ openssl passwd -5 password
    $5$tVpwoB7k9wgI6QLu$P.RSnrktgV.ldMoONdlCLhC.WOp/jAH/Y7RlGoFZgl4

ä½¿ç”¨ sha512 ç®—æ³•ä½ çš„å¯†ç è®¡ç®—å“ˆå¸Œ

    $ openssl passwd -6 password
    $6$eTL1LNGrE3.hMH9T$0e4AGG1iOYOfWlJjwWcCgWVMCNFdwS8MW.0ee67zVNPO4Cd2o6fATx8lzI0OIaI0RzP/8wE7x2kbuQFEVl.2w.

å¦‚æœç»™å‡ºäº†ç›saltï¼Œåˆ™hashå€¼ä¹Ÿå°±å›ºå®šäº†ï¼Œæœ€å¥½ä¸ç»™å‡ºï¼Œä½¿ç”¨ç³»ç»Ÿéšæœºæ•°å³å¯

    $ openssl passwd -1 -salt 1234567 'wodemima'
    $1$1234567$T422txbws/GIfsRDYZ3.r.

ä¸å†™å¯†ç ä¼šæç¤ºè¾“å…¥

    $ openssl passwd -1 -salt SALT
    Password:

è¿™ä¸ªä¸çŸ¥é“ä¸ºä½•ç»™å‡ºäº†3è¡Œ

    $ openssl passwd -1 â€“salt centos wodemima
    $1$8Ch7O7sx$jyz2BwIvCbweTrnWDkIpU/
    $1$6TzTaiVo$imX.dJcqZU7ThQWuRHVNS0
    $1$a00Ku7MG$WVRs.DdeaIPaADJe7mZIo1

å¦‚æœè¿˜éœ€è¦å¢åŠ ç ´è§£éš¾åº¦ï¼Œè§ç« èŠ‚ [ä½¿ç”¨ argon2 ç¼–ç ä½ çš„å¯†ç ]ã€‚

##### ä½¿ç”¨ argon2 ç¼–ç ä½ çš„å¯†ç 

    https://lindevs.com/install-argon2-on-raspberry-pi

NOTE: åœ¨å¯†ç æ•£åˆ—å‡½æ•°å·²ç»åˆ°äº†è¶³å¤Ÿçš„è¿­ä»£æ¬¡æ•°åï¼Œä½¿ç”¨æ›´é•¿çš„å¯†ç æ¯”å¢åŠ è¿­ä»£æ•°æ›´æœ‰ç”¨ã€‚

    å¯†ç ç®¡ç†å™¨ 1Password çš„å¼€å‘è€…è¿™æ ·è¡¨è¿°ï¼šå¯†ç å¢åŠ ä¸€ä¸ªå­—ç¬¦ï¼Œç›¸å½“äºæŠŠè¿­ä»£æ¬¡æ•°ä» 40,000 å¢åŠ åˆ° 400,000ï¼Œè€Œä¸¤ä¸ªå­—ç¬¦å°±æ˜¯ 4,000,000ã€‚ä¸å…¶è®©è‡ªå·±çš„ SSH å¯†é’¥ä»é»˜è®¤çš„è¿­ä»£ 24 æ¬¡æ”¹åˆ° 256 æ¬¡ï¼Œä¹Ÿä¸å¦‚æŠŠè‡ªå·±å¯†ç å¤šå†™ä¸¤ä½ï¼Œåæ­£å¢åŠ çš„æ—¶é—´ä¸€æ ·ä¹Ÿæ˜¯ä¸¤ç§’ã€‚

Argon2

å¯¹å¯†ç åŠ å¯†ä¿å­˜ä¸€èˆ¬ä½¿ç”¨åŠ ç›è®¡ç®— hash å€¼çš„æ–¹å¼ï¼Œä½†æ˜¯å¸¸ç”¨çš„å“ˆå¸Œç®—æ³•é˜²ç ´è§£æ•ˆæœä¸å¥½ã€‚æ‰€ä»¥æœ‰ argon2 ç®—æ³•ä¸“é—¨ç”¨äºå­˜å‚¨å¯†ç ã€‚å®ƒé€šè¿‡åŠ ç›å’Œå¤šæ¬¡è¿­ä»£æ¥å¢åŠ ç ´è§£éš¾åº¦ï¼Œargon2id ç®—æ³•è¿˜å¢åŠ äº†å†…å­˜ä½¿ç”¨é‡ï¼Œé’ˆå¯¹ä½¿ç”¨ GPU çš„å¹¶è¡Œç ´è§£å¢å¤§éš¾åº¦

    $ sudo apt install -y argon2

    -m  å®šä¹‰æœ€å¤§å†…å­˜ä½¿ç”¨é‡ï¼Œä»¥åƒå­—èŠ‚ä¸ºå•ä½ï¼Œ2 çš„ m æ¬¡æ–¹ï¼Œå¦‚ 1GB ä¸º 20
    -k  å®šä¹‰æœ€å¤§å†…å­˜ä½¿ç”¨é‡ï¼Œä»¥åƒå­—èŠ‚ä¸ºå•ä½
    -t  å®šä¹‰è¿­ä»£æ¬¡æ•°
    -p  å®šä¹‰çº¿ç¨‹æ•°
    -e  åªè¾“å‡º hash çš„ç»“æœ

Argon2i å˜ä½“ç”¨äºç”Ÿæˆå“ˆå¸Œ

    $ echo -n "Hello" | argon2 mysalt0123456789 -t 4 -k 65536 -p 2 -e
    $argon2i$v=19$m=65536,t=4,p=2$bXlzYWx0MDEyMzQ1Njc4OQ$N59WxssOt4L/ylaGzZGrPXkwClGZMDxn1Q3UolMEBLw

 Argon2id å˜ä½“ï¼Œå¼ºåº¦æ›´é«˜å¯ä»¥å¯¹æŠ—ä½¿ç”¨æ˜¾å¡çš„å¹¶è¡Œè¿ç®—ï¼Œç”¨é€‰é¡¹ -id æŒ‡å®š

    $ echo -n "Hello" | argon2 mysalt0123456789 -id -t 4 -m 20  -p 2
    Type:           Argon2id
    Iterations:     4
    Memory:         1048576 KiB
    Parallelism:    2
    Hash:           05a3be8590c5a4f1eb4ba86b3da0afa7a7830b827ad432f9285d329d48520ada
    Encoded:        $argon2id$v=19$m=1048576,t=4,p=2$bXlzYWx0MDEyMzQ1Njc4OQ$BaO+hZDFpPHrS6hrPaCvp6eDC4J61DL5KF0ynUhSCto
    3.792 seconds
    Verification ok

### æŒ‰æ•°åˆ¶æ˜¾ç¤ºå†…å®¹ od

xxd : åç¼–è¯‘æ–‡ä»¶å†…å®¹ï¼Œä»äºŒè¿›åˆ¶è½¬ä¸ºåå…­è¿›åˆ¶è½¬æ¢

    # å¯ä»¥å¾—åˆ°å¯†ç çš„hashå€¼
    xxd "/etc/shadow" |xxd -r

od :æŒ‰æ•°åˆ¶æ˜¾ç¤ºå†…å®¹

    od [-A<å­—ç åŸºæ•°> ] [-t[TYPE[SIZE]] ] æ–‡ä»¶å

-A<å­—ç åŸºæ•°>ï¼Œåœ¨ç¬¬ä¸€åˆ—åœ°å€æ ï¼Œä½¿ç”¨ä½•ç§åŸºæ•°è¡¨ç¤ºåœ°å€

    oï¼šå…«è¿›åˆ¶ï¼ˆç³»ç»Ÿé»˜è®¤å€¼ï¼‰
    dï¼šåè¿›åˆ¶
    xï¼šåå…­è¿›åˆ¶
    nï¼šä¸æ‰“å°ä½ç§»å€¼

è¾“å‡ºæ ¼å¼-tï¼Œæ ¼å¼æ¯”è¾ƒå¥‡æ€ªï¼Œæ˜¯ç´¯åŠ çš„ï¼Œä¸æ˜ç™½çœ‹ä¸‹é¢çš„ç¤ºä¾‹

    -t[TYPE] æŒ‡å®šæ•°æ®çš„æ˜¾ç¤ºæ ¼å¼çš„ä¸»è¦å‚æ•°æœ‰ï¼š

        a[SIZE]: ASCIIå­—ç¬¦ï¼Œå›è½¦ç”¨å­—æ¯
        c[SIZE]ï¼šASCIIå­—ç¬¦ï¼Œå›è½¦ç”¨åæ–œæ åºåˆ—(å¦‚\n)
        d[SIZE]ï¼šæœ‰ç¬¦å·åè¿›åˆ¶æ•°
        f[SIZE]ï¼šæµ®ç‚¹æ•°
        o[SIZE]ï¼šå…«è¿›åˆ¶ï¼ˆç³»ç»Ÿé»˜è®¤å€¼ï¼‰
        u[SIZE]ï¼šæ— ç¬¦å·åè¿›åˆ¶æ•°
        x[SIZE]ï¼šåå…­è¿›åˆ¶æ•° é»˜è®¤ä»¥å››å­—èŠ‚ä¸ºä¸€ç»„ï¼ˆä¸€åˆ—ï¼‰æ˜¾ç¤ºã€‚

            [SIZE]ï¼šæ¯åˆ—è¾“å‡ºå‡ ä¸ªå­—èŠ‚ã€‚
            SIZE may also be
                C for sizeof(char),
                S for sizeof(short),
                I for sizeof(int) or
                L for sizeof(long).
                If TYPE is f, SIZE may also be
                    F for sizeof(float),
                    D for sizeof(double) or
                    L for sizeof(long double)

    å¦‚æœ-tåé¢è·Ÿéšä¸¤ä¸ªå°å†™å­—æ¯ï¼Œè¡¨ç¤ºåŒæ—¶ä½¿ç”¨ä¸¤ä¸ªæ˜¾ç¤ºæ ¼å¼ã€‚

å¦‚æœæ„Ÿè§‰ -t[type[size]] ä¸å¥½è®°ï¼Œå¸¸ç”¨çš„å‡ ä¸ªæœ‰å¿«é€Ÿå‚æ•°

    -a     same as -t a,  select named characters, ignoring high-order bit

    -b     same as -t o1, select octal bytes

    -c     same as -t c,  select printable characters or backslash escapes

    -d     same as -t u2, select unsigned decimal 2-byte units

    -f     same as -t fF, select floats

    -i     same as -t dI, select decimal ints

    -l     same as -t dL, select decimal longs

    -o     same as -t o2, select octal 2-byte units

    -s     same as -t d2, select decimal 2-byte units

    -x     same as -t x2, select hexadecimal 2-byte units

ç¤ºä¾‹

    # ä»¥ 16 è¿›åˆ¶æ˜¾ç¤ºæ–‡ä»¶ test.jsonï¼Œ2å­—èŠ‚ä¸€ç»„ï¼Œæ³¨æ„ç¬¬ä¸€åˆ—æ˜¯åœ°å€æ 
    $ od -tx2 test.json
    0000000 0a7b 2020 6922 626e 756f 646e 2273 203a
    0000020 0a5b 2020 2020 0a7b 2020 2020 2020 7422
    0000040 6761 3a22 2220 7274 6e61 7073 7261 6e65

    # ä»¥ ASCII ç çš„å½¢å¼æ˜¾ç¤ºæ–‡ä»¶aa.txtå†…å®¹ï¼Œæ³¨æ„ç¬¬ä¸€åˆ—æ˜¯åœ°å€æ 
    $ od -tc winscp.bat
    0000000   s   t   a   r   t       C   :   \   S   t   a   r   t   H   e
    0000020   r   e   \   t   o   o   l   s   \   W   i   n   S   C   P   -
    0000040   P   o   r   t   a   b   l   e   \   W   i   n   S   C   P   .
    0000060   e   x   e       %   1  \n
    0000067

    # ä»¥ ASCII ç  å’Œ 16 è¿›åˆ¶çš„å½¢å¼æ˜¾ç¤ºæ–‡ä»¶aa.txtå†…å®¹
    $ od -tcx aa.txt
    0000000   a   b   c   d   e   f   g   h   i   j   k   l   m   n   o   p
                64636261        68676665        6c6b6a69        706f6e6d
    0000020   q  \n   9   8   7   6   5   4   3   2   1   0   1   2   3   4
                38390a71        34353637        30313233        34333231
    0000040   5   6   7   8   9  \n   A   B   C  \n  \n
                38373635        42410a39        000a0a43
    0000053

    # ä»¥ ASCII ç çš„å½¢å¼æ˜¾ç¤ºæ–‡ä»¶aa.txtå†…å®¹çš„ï¼Œç­‰æ•ˆ -ta
    $ od -a aa.txt
    0000000   a   b   c   d   e   f   g   h   i   j   k   l   m   n   o   p
    0000020   q  nl   9   8   7   6   5   4   3   2   1   0   1   2   3   4
    0000040   5   6   7   8   9  nl   A   B   C  nl  nl
    0000053

    $ echo 'abc' | od -An -t dC
    97   98   99   10

#### æŸ¥çœ‹ 16 è¿›åˆ¶

hexdump ä¸€èˆ¬éƒ½è‡ªå¸¦äº†

    $ sudo dd if=/dev/nvme0n1p1 bs=512 count=2|hexdump -C
    00000000  eb 58 90 4d 53 44 4f 53  35 2e 30 00 02 02 fe 19  |.X.MSDOS5.0.....|
    00000010  02 00 00 00 00 f8 00 00  3f 00 ff 00 00 08 00 00  |........?.......|
    00000020  00 20 03 00 01 03 00 00  00 00 00 00 02 00 00 00  |. ..............|
    00000030  01 00 06 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
    2+0 records in
    2+0 records out
    1024 bytes (1.0 kB, 1.0 KiB) copied, 0.000446537 s, 2.3 MB/s
    00000040  80 00 29 e1 a6 aa f0 4e  4f 20 4e 41 4d 45 20 20  |..)....NO NAME  |
    00000050  20 20 46 41 54 33 32 20  20 20 33 c9 8e d1 bc f4  |  FAT32   3.....|
    00000060  7b 8e c1 8e d9 bd 00 7c  88 56 40 88 4e 02 8a 56  |{......|.V@.N..V|
    00000070  40 b4 41 bb aa 55 cd 13  72 10 81 fb 55 aa 75 0a  |@.A..U..r...U.u.|
    00000080  f6 c1 01 74 05 fe 46 02  eb 2d 8a 56 40 b4 08 cd  |...t..F..-.V@...|
    00000090  13 73 05 b9 ff ff 8a f1  66 0f b6 c6 40 66 0f b6  |.s......f...@f..|
    000000a0  d1 80 e2 3f f7 e2 86 cd  c0 ed 06 41 66 0f b7 c9  |...?.......Af...|
    000000b0  66 f7 e1 66 89 46 f8 83  7e 16 00 75 39 83 7e 2a  |f..f.F..~..u9.~*|
    000000c0  00 77 33 66 8b 46 1c 66  83 c0 0c bb 00 80 b9 01  |.w3f.F.f........|
    000000d0  00 e8 2c 00 e9 a8 03 a1  f8 7d 80 c4 7c 8b f0 ac  |..,......}..|...|
    000000e0  84 c0 74 17 3c ff 74 09  b4 0e bb 07 00 cd 10 eb  |..t.<.t.........|
    000000f0  ee a1 fa 7d eb e4 a1 7d  80 eb df 98 cd 16 cd 19  |...}...}........|
    00000100  66 60 80 7e 02 00 0f 84  20 00 66 6a 00 66 50 06  |f`.~.... .fj.fP.|
    00000110  53 66 68 10 00 01 00 b4  42 8a 56 40 8b f4 cd 13  |Sfh.....B.V@....|
    00000120  66 58 66 58 66 58 66 58  eb 33 66 3b 46 f8 72 03  |fXfXfXfX.3f;F.r.|
    00000130  f9 eb 2a 66 33 d2 66 0f  b7 4e 18 66 f7 f1 fe c2  |..*f3.f..N.f....|
    00000140  8a ca 66 8b d0 66 c1 ea  10 f7 76 1a 86 d6 8a 56  |..f..f....v....V|
    00000150  40 8a e8 c0 e4 06 0a cc  b8 01 02 cd 13 66 61 0f  |@............fa.|
    00000160  82 74 ff 81 c3 00 02 66  40 49 75 94 c3 42 4f 4f  |.t.....f@Iu..BOO|
    00000170  54 4d 47 52 20 20 20 20  00 00 00 00 00 00 00 00  |TMGR    ........|
    00000180  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|

hexyl

    https://github.com/sharkdp/hexyl

å¯ä»¥ä¼ é€’æ–‡ä»¶åï¼Œä¹Ÿå¯ä»¥æ¥æ”¶ç®¡é“ä¼ é€’è¿‡æ¥çš„å†…å®¹ï¼Œæ³¨æ„ bash ä¸­å­—ç¬¦ä¸²æ˜¯é»˜è®¤è¡¥ä½ 0a çš„

    $ echo 'abcdefgh123456789' |hexyl
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚00000000â”‚ 61 62 63 64 65 66 67 68 â”Š 31 32 33 34 35 36 37 38 â”‚abcdefghâ”Š12345678â”‚
    â”‚00000010â”‚ 39 0a                   â”Š                         â”‚9_      â”Š        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å¯ä»¥é™åˆ¶ä½æ•°

    $ hexyl -n 256 /dev/random
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚00000000â”‚ e0 c9 0c 31 ab 31 34 5b â”Š 5d 2b 51 b2 d5 f8 db 85 â”‚Ã—Ã—_1Ã—141â”Š1+QÃ—Ã—Ã—Ã—Ã—â”‚
    â”‚00000010â”‚ e1 da 43 57 35 88 33 d2 â”Š be 34 5c f5 d9 34 6f 31 â”‚Ã—Ã—CW5Ã—3Ã—â”ŠÃ—4\Ã—Ã—4o1â”‚
    â”‚00000020â”‚ 0c d6 74 50 ff 90 1a e8 â”Š 21 84 60 fe 36 65 26 3b â”‚_Ã—tPÃ—Ã—â€¢Ã—â”Š!Ã—`Ã—6e&;â”‚
    â”‚00000030â”‚ ac 8f dc a5 0e 70 8c d5 â”Š 68 cc 56 ef 54 d8 6e 60 â”‚Ã—Ã—Ã—Ã—â€¢pÃ—Ã—â”ŠhÃ—VÃ—TÃ—n`â”‚
    â”‚00000040â”‚ 68 5f a4 6c 8d 76 1d eb â”Š 31 db 7d 3b 07 6b 7f da â”‚h_Ã—lÃ—vâ€¢Ã—â”Š1Ã—1;â€¢kâ€¢Ã—â”‚
    â”‚00000050â”‚ 67 f6 3f ca 2c 6d 54 86 â”Š b1 e6 f0 33 67 55 55 c2 â”‚gÃ—?Ã—,mTÃ—â”ŠÃ—Ã—Ã—3gUUÃ—â”‚
    â”‚00000060â”‚ cc ee 15 6e c2 c9 9d f4 â”Š a0 41 4c e5 36 59 9a 80 â”‚Ã—Ã—â€¢nÃ—Ã—Ã—Ã—â”ŠÃ—ALÃ—6YÃ—Ã—â”‚
    â”‚00000070â”‚ 34 aa 55 d3 52 a3 90 a2 â”Š 27 a4 2e 43 3b a2 fb 2d â”‚4Ã—UÃ—RÃ—Ã—Ã—â”Š'Ã—.C;Ã—Ã—-â”‚
    â”‚00000080â”‚ a4 57 a4 37 c3 68 ba b7 â”Š 1f 33 59 01 74 60 57 5f â”‚Ã—WÃ—7Ã—hÃ—Ã—â”Šâ€¢3Yâ€¢t`W_â”‚
    â”‚00000090â”‚ e9 33 bb a8 dc 86 8a 17 â”Š c8 5e 88 b4 2b 09 1e e3 â”‚Ã—3Ã—Ã—Ã—Ã—Ã—â€¢â”ŠÃ—^Ã—Ã—+_â€¢Ã—â”‚
    â”‚000000a0â”‚ 84 f4 62 6a e2 89 7d c6 â”Š 9c e4 9d d3 d0 ab 30 8f â”‚Ã—Ã—bjÃ—Ã—1Ã—â”ŠÃ—Ã—Ã—Ã—Ã—Ã—0Ã—â”‚
    â”‚000000b0â”‚ a2 a3 90 1b 3e 1a 67 62 â”Š 07 53 50 8b a7 fa 20 46 â”‚Ã—Ã—Ã—â€¢>â€¢gbâ”Šâ€¢SPÃ—Ã—Ã— Fâ”‚
    â”‚000000c0â”‚ 12 ea 39 aa a4 79 6f 0c â”Š 84 5d 8d c5 e9 24 68 95 â”‚â€¢Ã—9Ã—Ã—yo_â”ŠÃ—1Ã—Ã—Ã—$hÃ—â”‚
    â”‚000000d0â”‚ da 9d ba 7a 97 37 47 6d â”Š f1 27 08 64 31 e9 07 ce â”‚Ã—Ã—Ã—zÃ—7Gmâ”ŠÃ—'â€¢d1Ã—â€¢Ã—â”‚
    â”‚000000e0â”‚ 56 54 d2 f6 c4 e4 00 2f â”Š c9 f3 79 8e 8b 1a de 0e â”‚VTÃ—Ã—Ã—Ã—â‹„/â”ŠÃ—Ã—yÃ—Ã—â€¢Ã—â€¢â”‚
    â”‚000000f0â”‚ 29 1c 09 0c 94 cb b5 40 â”Š 5a dc 29 e4 dc 01 5a 42 â”‚1â€¢__Ã—Ã—Ã—@â”ŠZÃ—1Ã—Ã—â€¢ZBâ”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜

### æŸ¥çœ‹è‡ªå·±çš„å…¬ç½‘ IP åœ°å€æ˜¯å¤šå°‘

æµè§ˆå™¨æ‰“å¼€ <https://test.ustc.edu.cn/> å¯çœ‹åˆ°è‡ªå·±çš„ipå’Œæµ‹é€Ÿã€‚

åªæ˜¾ç¤ºåœ°å€ï¼Œæ–¹ä¾¿è„šæœ¬è°ƒç”¨ï¼š

    $ curl members.3322.org/dyndns/getip
    11.22.33.44

    $ curl ipinfo.io/ip
    11.22.33.44

    $ curl ipv4.icanhazip.com
    11.22.33.44

    $ curl ipv6.icanhazip.com
    2409:xxxx:...

    $ curl ifconfig.me
    2409:xxxx:...

    $ curl ifconfig.io
    2409:xxxx:...

æ˜¾ç¤ºç»“æ„åŒ–æ•°æ®ï¼Œéœ€è¦è§£æï¼š

    $ curl httpbin.org/ip
    {
        "origin": "11.22.33.44"
    }

    $ curl -fsSL httpbin.org/ip | jq -r '.origin'
    "11.22.33.44"

    $ curl ipinfo.io
    {
        "ip": "11.22.33.44",
        "city": "Shanghai",
        "region": "Shanghai",
        "country": "CN",
        "loc": "11.22,33.44",
        "org": "xxx Company Limited",
        "postal": "100000",
        "timezone": "Asia/Shanghai",
        "readme": "https://ipinfo.io/missingauth"
    }

    $ curl -fsSL ipinfo.io | jq -r '.ip'
    11.22.33.44

    $ curl myip.ipip.net
    å½“å‰ IPï¼š11.22.33.44  æ¥è‡ªäºï¼šä¸­å›½

    $ curl cip.cc
    IP      : 11.22.33.44
    åœ°å€    : ä¸­å›½
    è¿è¥å•†  : ç§»åŠ¨

    æ•°æ®äºŒ  : ä¸­å›½ | ç§»åŠ¨/å…¨çœé€šç”¨

    æ•°æ®ä¸‰  : ä¸­å›½  | ç§»åŠ¨

    URL     : http://www.cip.cc/11.22.33.44

### ä¸‹è½½å·¥å…·

æ¯æ—¥æ›´æ–°tracker

    https://github.com/ngosang/trackerslist

    https://github.com/XIU2/TrackersListCollection
        https://trackerslist.com/

xdm æœ‰å›¾å½¢ç•Œé¢

    https://github.com/subhra74/xdm/releases

#### Aria2

æ”¯æŒ httpã€bt ç­‰å¤šç§æ ¼å¼ï¼Œé€Ÿåº¦å¥‡å¿«

    https://github.com/aria2/aria2
        https://aria2.github.io/

    https://wiki.archlinux.org/title/Aria2

    https://aria2.github.io/manual/en/html/aria2c.html#example

    Aria2 å®Œç¾é…ç½®
        https://github.com/P3TERX/aria2.conf
        https://github.com/P3TERX/aria2.conf/blob/master/aria2.conf

    æ›¿ä»£å“ axel

        https://github.com/axel-download-accelerator/axel

        $ sudo dnf install axel

    [ä¸æ¨è]Motrix æ˜¯ Windows ä¸‹çš„ aria2 å›¾å½¢ç•Œé¢ç¨‹åºï¼Œè¯¥è½¯ä»¶ä½¿ç”¨æ–¹ä¾¿ï¼Œé¢„å…ˆé…ç½®å¥½äº† aria2ï¼Œè‡ªåŠ¨æ›´æ–°æœ€ä½³ dht ç«™ç‚¹æ¸…å•ã€‚

        https://github.com/agalwood/Motrix

        æ³¨æ„ï¼šMotrix è‡ªå¸¦çš„ Aria2 æ¥æºäºä»–è‡ªå·±çš„ä¸“ç”¨ Forkï¼ˆæœªå¼€æºï¼‰ è€Œéå®˜æ–¹å‘è¡Œçš„é¢„ç¼–è¯‘åŒ…ã€‚

    ä¸çŸ¥é“ NSA èœœç½ä¼šæé•œåƒç«™ç‚¹ä¹ˆ

        https://github.com/VPNSox/NSABlocklist

Aria2 çš„å‘½ä»¤è¡Œä¼ è¾“å„ç§å‚æ•°ï¼Œè®¾ç½®å¤æ‚ï¼Œä¸€èˆ¬éƒ½ä½¿ç”¨å„ç§å®¢æˆ·ç«¯å‘é€ä¸‹è½½è¯·æ±‚ç»™å®ƒã€‚

åœ¨ Fedora ä¸‹ä½¿ç”¨ï¼Œå‘ç° aria2 ç»å¸¸ coredump å‘¢ï¼Œä¸å¦‚ transmission ç¨³å®šã€‚

    $ sudo apt install aria2

å›¾å½¢ç•Œé¢ ugetï¼Œè‡ªåŠ¨è°ƒç”¨ aria2 æ”¯æŒbtä¸‹è½½ï¼Œè¯¥è½¯ä»¶ç›®å‰ä»ç„¶ä¸å®Œå–„ï¼Œåˆ«ç”¨äº†

    https://github.com/ugetdm/uget

    $ sudo dnf install uget aria2

    å®‰è£…åè®¾ç½®é€‰æ‹©ï¼Œæ’ä»¶é€‰ aria2 + curl å³å¯ã€‚

æ¨èä½¿ç”¨ AriaNg æŠŠä¸‹è½½æ·»åŠ åˆ°aria2ä»»åŠ¡

    https://github.com/mayswind/AriaNg-Native

##### aria2 ä½œä¸ºåå°è¿›ç¨‹è¿è¡Œå“åº” RPC è¯·æ±‚

aria2 ä½œä¸ºåå°å®ˆæŠ¤è¿›ç¨‹è¿è¡Œï¼Œåœ¨æŒ‡å®šç«¯å£ç›‘å¬ RPC è¯·æ±‚ï¼Œä½¿ç”¨ AriaNg ç­‰åº”ç”¨æŠŠä¸‹è½½é“¾æ¥å‘é€ç»™ aria2 å»æ‰§è¡Œï¼Œè¿™æ ·çš„æ–¹å¼æœ€å¥½ç”¨ã€‚å› ä¸ºæ˜¯ RPC æ–¹å¼ï¼Œaria2 å¯ä»¥å•ç‹¬éƒ¨ç½²åˆ°å®¶ç”¨ NAS ç­‰å•ç‹¬çš„ä¸‹è½½æœºï¼Œç”¨æˆ·è¿æ¥å®¶åº­å†…ç½‘çš„æœºå™¨éƒ½å¯ä»¥æ“ä½œå®ƒã€‚

1ã€å…ˆç”Ÿæˆ Aria2 è¿è¡Œæ—¶ä¾èµ–çš„é…ç½®æ–‡ä»¶ aria2.confï¼Œå¯å‚è€ƒ Motrix çš„ aria2.conf

```conf
################################################
# aria2.conf
# https://aria2.github.io/manual/en/html/aria2c.html
log-level=warn

################ RPC ################
# Enable JSON-RPC/XML-RPC server.
enable-rpc=true
# Add Access-Control-Allow-Origin header field with value * to the RPC response.
rpc-allow-origin-all=true
# Listen incoming JSON-RPC/XML-RPC requests on all network interfaces.
rpc-listen-all=true


################ File system ################
# Save a control file(*.aria2) every SEC seconds.
auto-save-interval=10
# Enable disk cache.
disk-cache=32M
# Specify file allocation method.
file-allocation=falloc
# Save error/unfinished downloads to a file specified by --save-session option every SEC seconds.
save-session-interval=10


################ Task ################
# Exclude seed only downloads when counting concurrent active downloads
bt-detach-seed-only=true
# Verify the peer using certificates specified in --ca-certificate option.
check-certificate=false
# If aria2 receives "file not found" status from the remote HTTP/FTP servers NUM times
# without getting a single byte, then force the download to fail.
max-file-not-found=5
# Set number of tries.
max-tries=5
# aria2 does not split less than 2*SIZE byte range.
min-split-size=1M
# Set user agent for HTTP(S) downloads.
user-agent=Transmission/2.94
# Send Accept: deflate, gzip request header
http-accept-gzip=true


################ BT Task ################
# Enable Local Peer Discovery.
bt-enable-lpd=true
# Requires BitTorrent message payload encryption with arc4.
# bt-force-encryption=true
# If true is given, after hash check using --check-integrity option and file is complete, continue to seed file.
bt-hash-check-seed=true
# Specify the maximum number of peers per torrent.
bt-max-peers=255
# Try to download first and last pieces of each file first. This is useful for previewing files.
bt-prioritize-piece=head
# Removes the unselected files when download is completed in BitTorrent.
bt-remove-unselected-file=true
# Seed previously downloaded files without verifying piece hashes.
bt-seed-unverified=true
# Set host and port as an entry point to IPv4 DHT network.
dht-entry-point=dht.transmissionbt.com:6881
# Set host and port as an entry point to IPv6 DHT network.
dht-entry-point6=dht.transmissionbt.com:6881
# Enable IPv4 DHT functionality. It also enables UDP tracker support.
enable-dht=true
# Enable IPv6 DHT functionality.
enable-dht6=true
# Enable Peer Exchange extension.
enable-peer-exchange=true
# Specify the string used during the bitorrent extended handshake for the peer's client version.
peer-agent=Transmission/2.94
# Specify the prefix of peer ID.
peer-id-prefix=-TR2940-
bt-tracker=http://1337.abcvg.info:80/announce

```

2ã€æ‰§è¡Œ p3terx çš„ tracker.sh æŠŠæœ€æ–°çš„ bt-tracker åœ°å€æ›´æ–°åˆ°é…ç½®æ–‡ä»¶ aria2.confã€‚

    https://github.com/P3TERX/aria2.conf/raw/master/tracker.sh

3ã€å¯åŠ¨ aria2 ä½œä¸ºåå°è¿›ç¨‹çš„å‘½ä»¤è¡Œå‚æ•°

Windows cmdï¼š

    aria2c.exe --conf-path=%USERPROFILE%\.aria2\aria2.conf --enable-rpc --rpc-secret=your_password --dir=%USERPROFILE%\Downloads --save-session=%USERPROFILE%\.aria2\download.session --input-file=%USERPROFILE%\.aria2\download.session --dht-file-path=%USERPROFILE%\.aria2\dht.dat --dht-file-path6=%USERPROFILE%\.aria2\dht6.dat --allow-overwrite=false --auto-file-renaming=true --bt-load-saved-metadata=true --bt-save-metadata=true --continue=true --dht-listen-port=26701 --listen-port=21301 --max-concurrent-downloads=5 --max-download-limit=0 --max-overall-download-limit=0 --max-overall-upload-limit=256K --min-split-size=1M --pause=true --rpc-listen-port=6800 --seed-ratio=1 --seed-time=60 --split=64 --user-agent=Transmission/2.94

bash shellï¼š

    $ aria2c --conf-path=$HOME/.aria2/aria2.conf --enable-rpc --rpc-secret=your_password --dir=$HOME/Downloads --save-session=$HOME/.aria2/download.session --input-file=$HOME/.aria2/download.session --dht-file-path=$HOME/.aria2/dht.dat --dht-file-path6=$HOME/.aria2/dht6.dat --allow-overwrite=false --auto-file-renaming=true --bt-load-saved-metadata=true --bt-save-metadata=true --continue=true --dht-listen-port=26701 --listen-port=21301 --max-concurrent-downloads=5 --max-download-limit=0 --max-overall-download-limit=0 --max-overall-upload-limit=256K --min-split-size=1M --pause=true --rpc-listen-port=6800 --seed-ratio=1 --seed-time=60 --split=64 --user-agent=Transmission/2.94

æ³¨æ„ä¿®æ”¹ --rpc-secret å¯†ç ã€‚

éªŒè¯ï¼š

AriaNg æŠŠä¸‹è½½æ·»åŠ åˆ°aria2ä»»åŠ¡

    https://ariang.mayswind.net/zh_Hans/
        https://github.com/mayswind/AriaNg

AriaNg ç°åœ¨æä¾›ä¸‰ç§ç‰ˆæœ¬, æ ‡å‡†ç‰ˆã€å•æ–‡ä»¶ç‰ˆå’Œ AriaNg Native

    æ ‡å‡†ç‰ˆé€‚åˆåœ¨ Web æœåŠ¡å™¨ä¸­éƒ¨ç½², æä¾›èµ„æºç¼“å­˜å’ŒæŒ‰éœ€åŠ è½½çš„åŠŸèƒ½.

    å•æ–‡ä»¶ç‰ˆé€‚åˆæœ¬åœ°ä½¿ç”¨, æ‚¨ä¸‹è½½ååªè¦åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€å”¯ä¸€çš„ html æ–‡ä»¶å³å¯.

    AriaNg Native åŒæ ·é€‚åˆæœ¬åœ°ä½¿ç”¨, å¹¶ä¸”ä¸éœ€è¦ä½¿ç”¨æµè§ˆå™¨.

ä¸ºä»€ä¹ˆåœ¨ AriaNg ä¸­åˆ é™¤æš‚åœçš„ä»»åŠ¡æ— æ³•åˆ é™¤æ–‡ä»¶

    Aria2 æœ¬èº«æ²¡æœ‰é€šè¿‡ RPC æ–¹å¼ï¼ˆæ¯”å¦‚ WeÂ­bUI ï¼‰åˆ é™¤æ–‡ä»¶çš„åŠŸèƒ½ï¼Œç›®å‰ä½ æ‰€çœ‹åˆ°çš„åˆ é™¤ä»»åŠ¡ååˆ é™¤æ–‡ä»¶çš„åŠŸèƒ½æ˜¯é€šè¿‡ä¸‹è½½å®Œæˆåæ‰§è¡Œå‘½ä»¤ï¼ˆon-download-stopï¼‰çš„æ¥å£å»è°ƒç”¨åˆ é™¤è„šæœ¬å®ç°çš„ï¼Œåªèƒ½åˆ é™¤æ­£åœ¨ä¸‹è½½çš„ä»»åŠ¡ã€‚Aria2 å®šä¹‰æš‚åœçŠ¶æ€çš„ä»»åŠ¡ä¸ºæœªå¼€å§‹çš„ä»»åŠ¡ï¼Œè€Œ on-download-stop è¿™ä¸ªé€‰é¡¹çš„æ‰§è¡Œæ¡ä»¶æ˜¯å¹¶ä¸åŒ…å«æœªå¼€å§‹çš„ä»»åŠ¡ã€‚æ‰€ä»¥åˆ é™¤è„šæœ¬æ²¡æœ‰è§¦å‘ï¼Œæ–‡ä»¶ä¹Ÿå°±ä¸ä¼šè¢«åˆ é™¤ã€‚

å¦å¯ä»¥ä½¿ç”¨ curl ç›´æ¥å‘é€ rpc å‘½ä»¤ç»™ aria2

    rpc å‘½ä»¤ https://aria2.github.io/manual/en/html/aria2c.html

    curl ç”¨æ³•è§ç« èŠ‚ [curl è°ƒè¯• http/wss/json-rpc]ã€‚

4ã€é…ç½®ä¸ºå¼€æœºè‡ªå¯åŠ¨æœåŠ¡

Windows ä¸‹å¯ä½¿ç”¨ WinSW å°† Aria2 å®‰è£…æˆç”¨æˆ·æœåŠ¡æ¥å¼€æœºè‡ªå¯ã€‚

Linux é…ç½®ä¸º systemd æœåŠ¡ï¼Œåˆ›å»º /etc/systemd/system/aria2.service æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š

```conf
[Unit]
Description=Aria2 Service
# ç­‰å¾…ç½‘ç»œå°±ç»ªï¼Œç­‰å¾…æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿï¼Œç­‰å¾…æŒ‚è½½ç›®å½•å®Œæ¯•
After=network.target local-fs.target mnt-my_lv.mount
# ç­‰å¾…ç›®å½•æŒ‚è½½å®Œæ¯•è§ç« èŠ‚ [ä½¿ç”¨ systemd.mount åœ¨å¼€æœºåè‡ªåŠ¨æŒ‚è½½ç›®å½•](init_a_server think)
Requires=mnt-my_lv.mount

[Service]
Type=simple
#PIDFile = /run/aria2.pid
#ExecReload=/bin/kill -s HUP $MAINPID
#KillSignal=SIGQUIT
#TimeoutStopSec=5
#KillMode=process
# é root ç”¨æˆ·æ‰§è¡Œï¼Œæ–¹ä¾¿åç»­æ“ä½œä¸‹è½½åˆ°çš„æ–‡ä»¶ï¼Œä¸éœ€è¦åˆ‡æ¢åˆ°rootç”¨æˆ·
User=pi
Group=pi
WorkingDirectory=/home/pi
#
ExecStartPre=/bin/bash /usr/local/etc/aria2/tracker.sh /usr/local/etc/aria2/aria2.conf
ExecStart=/usr/bin/aria2c --conf-path=/usr/local/etc/aria2/aria2.conf --enable-rpc --rpc-secret=YOUR_PASS --dir=YOUR_DIR --save-session=/usr/local/etc/aria2/download.session --input-file=/usr/local/etc/aria2/download.session --dht-file-path=/usr/local/etc/aria2/dht.dat --dht-file-path6=/usr/local/etc/aria2/dht6.dat --allow-overwrite=false --auto-file-renaming=true --bt-load-saved-metadata=true --bt-save-metadata=true --continue=true --dht-listen-port=26701 --listen-port=21301 --max-concurrent-downloads=5 --max-download-limit=0 --max-overall-download-limit=0 --max-overall-upload-limit=256K --min-split-size=1M --pause=true --rpc-listen-port=6800 --seed-ratio=1 --seed-time=60 --split=64 --user-agent=Transmission/2.94
ExecReload=/bin/kill -s HUP $MAINPID
ExecStop=/bin/kill -s TERM $MAINPID
Restart=always

[Install]
WantedBy=multi-user.target
```

ä¸Šé¢å†…å®¹æ›¿æ¢ YOUR_DIR å’Œ YOUR_PASSï¼Œåœ¨ç›®å½• /usr/local/etc/aria2/ ä¸‹ä¿å­˜ aria2.conf é…ç½®æ–‡ä»¶

    å› ä¸ºä½¿ç”¨æ™®é€šç”¨æˆ·æ‰§è¡Œï¼Œæ³¨æ„ä½ è®¾ç½®çš„ your_dir ç›®å½•å¯¹è¯¥ç”¨æˆ·æ˜¯å¯å†™çš„

åœ¨ /usr/local/etc/aria2/ ä¸‹å‡†å¤‡ï¼š

    $ git clone --depth=1 git@github.com:P3TERX/Aria2-Pro-Docker

    $ git clone --depth=1 git@github.com:P3TERX/aria2.conf p3terx_conf
    ä» p3terx_conf å­ç›®å½•é‡Œæ‹·è´ tracker.sh åˆ°å½“å‰ç›®å½•

ç„¶åå¯åŠ¨æœåŠ¡

    $ sudo systemctl daemon-reload

    $ sudo systemctl enable aria2.service --now

> Aria2 æœåŠ¡ç«¯ä¸ä¼šè‡ªå·±å»åˆ é™¤æ–‡ä»¶

aira2 ä½œä¸ºæœåŠ¡è¿è¡Œï¼Œå„ç§ä½¿ç”¨é…ç½®ä¸Šçš„å°å‘å¤ªéº»çƒ¦äº†ï¼Œå»ºè®®ç”¨ç°æˆçš„å®¹å™¨ï¼Œè§ç« èŠ‚ [å®¹å™¨åŒ–è¿è¡Œ aria2 æœåŠ¡ç«¯](raspberry-pi.md think)ã€‚

Aria2 æœåŠ¡ç«¯ä¸ä¼šè‡ªå·±å»åˆ é™¤æ–‡ä»¶ï¼Œè¿™æ˜¯å®˜æ–¹çš„å›ç­”ï¼Œæ‰€ä»¥ä¸‹è½½å®Œæˆå.aria2 æ–‡ä»¶ä¼šä¿ç•™ã€‚è¿™ä¹Ÿå¯¼è‡´åœ¨ä¸‹è½½å‡ºé”™çš„æ—¶å€™å³ä½¿ä½ åˆ æ‰äº†ä»»åŠ¡ï¼Œä¸‹è½½çš„æ–‡ä»¶ä¾ç„¶è¿˜åœ¨ï¼Œä¸” Aria2 æ˜¯é¢„åˆ†é…ç£ç›˜ç©ºé—´çš„ï¼Œè¿™æ˜¯ç£ç›˜å æ»¡çš„åŸå› ä¹‹ä¸€ã€‚

aria2.conf æœ‰ä¸¤ä¸ªé…ç½®é¡¹ on-download-completeã€on-download-stopï¼Œå‰è€…å¯ä»¥åœ¨ä¸‹è½½å®Œæˆåæ‰§è¡Œä¸€ä¸ªè„šæœ¬ï¼Œåè€…å¯ä»¥åœ¨åœæ­¢åæ‰§è¡Œä¸€ä¸ªè„šæœ¬ã€‚Aria2 ä¼šç»™è„šæœ¬ä¼ é€’ 3 ä¸ªå˜é‡ $1ã€$2ã€$3 åˆ†åˆ«ä¸º gid ã€æ–‡ä»¶æ•°é‡ã€æ–‡ä»¶è·¯å¾„ã€‚åˆ©ç”¨è¿™äº›é…ç½®é¡¹å’Œè¿™äº›å˜é‡å°±å¯ä»¥å®ç°ä¸€äº›åŠŸèƒ½ï¼Œæ¯”å¦‚åœ¨ä¸‹è½½å®Œæˆåè°ƒç”¨ Rclone ä¸Šä¼ ã€é”™è¯¯åœæ­¢åå¯¹æ–‡ä»¶è¿›è¡Œåˆ é™¤ç­‰æ“ä½œ

    https://p3terx.com/archives/solve-problems-encountered-in-using-aria2-and-rclone.html

    https://github.com/P3TERX/aria2.conf

#### Transmission

ä¸€ç§ BitTorrent å®¢æˆ·ç«¯ï¼Œç‰¹ç‚¹æ˜¯ä¸€ä¸ªè·¨å¹³å°çš„åç«¯å’Œå…¶ä¸Šçš„ç®€æ´çš„ç”¨æˆ·ç•Œé¢ã€‚

    https://transmissionbt.com/
        https://github.com/transmission/transmission

    å®‰è£…é…ç½®è¯´æ˜
        https://trac.transmissionbt.com/wiki/UnixServer/Debian
        https://github.com/transmission/transmission/wiki/Editing-Configuration-Files

    ç®€å•ç‚¹ç›´æ¥ docker

        https://registry.hub.docker.com/r/linuxserver/transmission/

        https://registry.hub.docker.com/r/andrewmhub/transmission-tracker-add/

    https://blog.csdn.net/slimmm/article/details/115720184

    ç«å“ qBittorrent

        https://www.qbittorrent.org/

ä¹Ÿæ˜¯å‰åå°åˆ†ç¦»çš„è®¾è®¡ï¼Œåå°è¿›ç¨‹è´Ÿè´£ä¸‹è½½ï¼Œå‰å°è´Ÿè´£ä»»åŠ¡ç®¡ç†

    transmission-gtk: GTK+ç•Œé¢å®¢æˆ·ç«¯ã€‚

    transmission-qt: QTç•Œé¢å®¢æˆ·ç«¯ã€‚

    transmission-cli: å‘½ä»¤è¡ŒBTå®¢æˆ·ç«¯ã€‚

    transmission-daemon: æ˜¯ä¸€ä¸ªTransmissionçš„åå°å®ˆæŠ¤ç¨‹åºï¼Œæœ¬èº«ä¸å…·å¤‡æ“ä½œæŒ‡ä»¤ï¼Œåªèƒ½é€šè¿‡Webå®¢æˆ·ç«¯æˆ–è€…transmission-remote-cliæ¥è¿›è¡Œæ§åˆ¶ã€‚è¿™ä¸ªç¨‹åºç‰¹åˆ«é€‚åˆå®‰è£…åœ¨æœåŠ¡å™¨ä¸Šæˆ–è€…åµŒå…¥å¼ç³»ç»Ÿä¸­ï¼Œä»¥åŠä¸€äº›æ²¡æœ‰æ˜¾ç¤ºå™¨çš„è®¾å¤‡ä¸Šã€‚

    transmission-remote-cli: ç”¨æ¥æ§åˆ¶transmission-daemonçš„å‘½ä»¤å¥—ä»¶ï¼Œæœ¬èº«ä¸å…·å¤‡ä¸‹è½½BTçš„åŠŸèƒ½ï¼Œåªèƒ½å¤Ÿé…åˆdaemonä½¿ç”¨ã€‚

1ã€ä¸»è¦å®‰è£…æœåŠ¡ç«¯

    apt install transmission-daemon

ç³»ç»Ÿçº§é…ç½®æ–‡ä»¶ç›®å½•ï¼š /var/lib/transmission-daemon/info/

    settings.json    ä¸»è¦é…ç½®æ–‡ä»¶ï¼Œè®¾ç½®daemonçš„å„é¡¹å‚æ•°ï¼ŒåŒ…æ‹¬RPCçš„ç”¨æˆ·åå¯†ç é…ç½®ã€‚å…¶è½¯é“¾æ¥æŒ‡å‘/etc/transmission-daemon/settings.jsonã€‚é…ç½®è¯´æ˜

    torrents/    ç”¨æˆ·å­˜æ”¾.torrentç§å­æ–‡ä»¶çš„ç›®å½•,å‡¡æ˜¯æ·»åŠ åˆ°ä¸‹è½½ä»»åŠ¡çš„ç§å­ï¼Œéƒ½å­˜æ”¾åœ¨è¿™é‡Œã€‚.torrentçš„å‘½ååŒ…å«,ç§å­æ–‡ä»¶æœ¬èº«çš„åå­—å’Œç§å­çš„SHA1 HASHå€¼ã€‚

    resume/    è¯¥å­˜æ”¾äº†.resumeæ–‡ä»¶ï¼Œ.resumeæ–‡ä»¶åŒ…å«äº†ä¸€ä¸ªç§å­çš„ä¿¡æ¯ï¼Œä¾‹å¦‚è¯¥æ–‡ä»¶å“ªäº›éƒ¨åˆ†è¢«ä¸‹è½½äº†ï¼Œä¸‹è½½çš„æ•°æ®å­˜å‚¨çš„ä½ç½®ç­‰ç­‰ã€‚

    blocklists/    å­˜å‚¨è¢«å±è”½çš„peerçš„åœ°å€ã€‚

    æ³¨æ„ï¼šåœ¨ç¼–è¾‘Transmissionçš„é…ç½®æ–‡ä»¶çš„æ—¶å€™ï¼Œéœ€è¦å…ˆå…³é—­daemonè¿›ç¨‹ã€‚

å®‰è£…æ—¶ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªç”¨æˆ·æ¥ä¸“é—¨è¿è¡Œ transmission-daemonï¼Œç”¨æˆ·åä¸ºï¼šdebian-transmissionã€‚æ‰€ä»¥ï¼Œå¦‚æœä½¿ç”¨å¦å¤–ä¸€ä¸ªç”¨æˆ·æ¥è¿è¡Œ transmission-daemon çš„è¯ï¼Œä¼šåœ¨è¯¥ç”¨æˆ·çš„ç›®å½•ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ª.config/transmission-daemon çš„æ–‡ä»¶å¤¹ï¼Œåœ¨è¿™ä¸ªæ–‡ä»¶å¤¹é‡Œæœ‰å•ç‹¬çš„ settings.json é…ç½®æ–‡ä»¶ï¼Œä¸‹è½½ç›®å½•ä¹Ÿä¼šå˜ä¸º $HOME/Download

    # å¯åŠ¨
    sudo service transmission-daemon start

    # åœæ­¢
    sudo service transmission-daemon stop

2ã€ä¿®æ”¹é…ç½®æ–‡ä»¶ settings.json

    {
        ......
        "rpc-authentication-required": true
        "rpc-bind-address": "0.0.0.0",
        "rpc-enabled": true,
        "rpc-password": "123456",     # è¿™é‡Œæ˜æ–‡å†™å…¥ç™»å½•å¯†ç ï¼Œåˆæ¬¡å¯åŠ¨åä¼šè‡ªåŠ¨è¢«æ›¿æ¢ä¸º hash å€¼
        "rpc-port": 9091,     #ç«¯å£
        "rpc-url": "/transmission/",
        "rpc-username": "transmission",     #ç”¨æˆ·å
        "rpc-whitelist": "*",             #ç™½åå•ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šIP
        "rpc-whitelist-enabled": true,
        ......
    }

3ã€ç»è¿‡ä¸Šè¿°é…ç½®åï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡Webç•Œé¢æ¥è®¿é—®å’Œæ§åˆ¶Transmission daemonäº†ã€‚åœ¨æµè§ˆå™¨é‡Œé¢è¾“å…¥ä»¥ä¸‹åœ°å€

    http://<your.server.ip.addr>:9091/

æµè§ˆå™¨æç¤ºä½ è¾“å…¥åˆšæ‰é…ç½®çš„ç”¨æˆ·åå’Œå¯†ç ï¼Œå°±å¯ä»¥æˆåŠŸç™»å½•Webç®¡ç†ç•Œé¢ã€‚

#### curl æ”¯æŒ http/https ç­‰ä¸‹è½½

åŒºåˆ«äºä¹‹å‰æµè¡Œçš„ wget é»˜è®¤ä¸‹è½½ä¸ºæ–‡ä»¶ï¼Œcurl é»˜è®¤è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºæµ

    $ wget https://www.cloudflare.com/ips-v4
    --2023-04-12 15:06:35--  https://www.cloudflare.com/ips-v4
    Resolving www.cloudflare.com (www.cloudflare.com)... 2606:4700::6810:7c60, 2606:4700::6810:7b60, 104.16.123.96, ...
    Connecting to www.cloudflare.com (www.cloudflare.com)|2606:4700::6810:7c60|:443... connected.
    HTTP request sent, awaiting response... 200 OK
    Length: 230 [text/plain]
    Saving to: â€˜ips-v4â€™

    100%[======================================>] 230         --.-K/s   in 0s

    2023-04-12 15:06:35 (24.9 MB/s) - â€˜ips-v4â€™ saved [230/230]

    # é™é»˜ä¸‹è½½ï¼Œè¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºæµ
    wget -q -O - http://deb.opera.com/archive.key |gpg --import

    https://www.ruanyifeng.com/blog/2019/09/curl-reference.html

æ— å‚æ•°é»˜è®¤åªæŠŠè·å–çš„å†…å®¹è¾“å‡ºåˆ°ç»ˆç«¯çš„é»˜è®¤æ ‡å‡†è¾“å‡ºæµ

    curl https://www.cloudflare.com/ips-v4

ä¸€èˆ¬åœ¨ä½¿ç”¨ä¸­ï¼Œè‡³å°‘è¦åŠ å‚æ•°ï¼šè·Ÿè¸ªé‡å®šå‘ï¼Œä¸æ˜¾ç¤ºè¿›åº¦æ¡ï¼Œé™é»˜é”™è¯¯ä¿¡æ¯ä½†è¦æŠ¥é”™å¤±è´¥

    curl -fsSL https://github.com/web-flow.gpg

    å¦‚æœå¯¹ç«¯æœåŠ¡å™¨çš„ https ç­¾åä¿¡æ¯é”™è¯¯ï¼Œå¯ä»¥ç”¨ -k è·³è¿‡ SSL æ£€æµ‹

ä¸‹è½½å¹¶ä¿å­˜ä¸ºé»˜è®¤æ–‡ä»¶åï¼Œæœ€åä¸€ä¸ªå‚æ•°æ˜¯å¤§å†™çš„ O

    curl -fsSLO https://www.cloudflare.com/ips-v4

ä¸‹è½½å¹¶ä¿å­˜ä¸ºæŒ‡å®šæ–‡ä»¶åï¼Œæœ€åä¸€ä¸ªå‚æ•°æ˜¯å°å†™çš„ o

    curl -fsSLo cfipv4 https://www.cloudflare.com/ips-v4

ä¸‹è½½å¹¶ä¿å­˜ä¸ºæ–‡ä»¶åï¼Œå¦‚æœæŒ‡å®šè·¯å¾„ä¸å­˜åœ¨åˆ™åˆ›å»º

    curl -fsSLo ~/.vim/autoload/plug.vim --create-dirs \
        https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim

##### curl ç›´æ¥ä¸Šä¼ 

ç”¨ â€œ-â€ ä»æ ‡å‡†è¾“å…¥æµè¯»å–ï¼Œå¦‚æœæ¢æˆ â€œ.â€ è¿˜å¯ä»¥æ˜¾ç¤ºæœåŠ¡å™¨çš„è¾“å‡º

    gpg --export your_address@example.net |curl -T - https://keys.openpgp.org

å‘½ä»¤è¡Œè·å– web å†…å®¹

    # http get æ–¹æ³•
    $ curl -fsSL 11.22.33.44:1234

    # http post æ–¹æ³•
    $ curl -fsS -d 'ä¸Šä¼ åˆ°æœåŠ¡å™¨çš„è´Ÿè½½å†…å®¹' 11.22.33.44:1234

å…¶å®ƒå¸¸ç”¨é€‰é¡¹

    -o  æŒ‡å®šä¿å­˜ä¸ºæ–‡ä»¶
    -k  è¿è¡Œå†…ç½‘ https æ— è¯ä¹¦

##### curl è°ƒè¯• http/wss/json-rpc

å¯ä»¥è°ƒè¯• ssh ç«™ç‚¹ï¼Œä¹Ÿæ”¯æŒ telnetã€ftp ç­‰ç«™ç‚¹ï¼Œç”¨å‚æ•° -vvv æ˜¾ç¤ºæœåŠ¡å™¨è¾“å‡ºä¿¡æ¯

curl http-get

    $ curl -vvv 11.22.33.44:1234
    * About to connect() to 11.22.33.44 port 1234 (#0)
    *   Trying 11.22.33.44...
    * Connected to 11.22.33.44 (11.22.33.44) port 1234 (#0)
    > GET / HTTP/1.1
    > User-Agent: curl/7.29.0
    > Host: 11.22.33.44:1234
    > Accept: */*
    >
    SSH-2.0-OpenSSH_7.4
    Protocol mismatch.
    * Recv failure: Connection reset by peer
    * Closing connection 0
    curl: (56) Recv failure: Connection reset by peer

curl http-post

    # ä½¿ç”¨ HTTP Basic è®¤è¯
    $ curl -u root:123456 -X POST -d "Reboot=Reboot" http://192.168.0.1/ADVANCED_home2.htm

    wget -v --http-user root --http-password 123456 "http://192.168.0.1/ADVANCED_home2.htm"

    # å¡«å†™è¡¨å•å­—æ®µ
    $ curl -X POST -d "Username=root" -d "Password=123456" -d "Reboot=Reboot" http://192.168.0.1/ADVANCED_home.htm

    $ curl -v -XPOST -H "Content-Type:application/json"  http://172.24.7.63:36963/VIID/MotorVehicles -d  ' {"DataType" : "Face"} '

ws

    $ curl -vvv --no-buffer \
        -H 'Connection: keep-alive, Upgrade' \
        -H 'Upgrade: websocket' \
        -H 'Sec-WebSocket-Version: 13' \
        -H 'Sec-WebSocket-Key: websocket' \
        http://echo.websocket.org | od -t c

    $ curl -vvv --include \
        --no-buffer \
        --header "Connection: Upgrade" \
        --header "Upgrade: websocket" \
        --header "Host: websocket.org:80" \
        --header "Origin: http://websocket.org:80" \
        --header "Sec-WebSocket-Key: SGVsbG8sIHdvcmxkIQ==" \
        --header "Sec-WebSocket-Version: 13" \
         https://echo.websocket.org

json-rpc

        https://aria2.github.io/manual/en/html/aria2c.html#rpc-interface

    $ curl -vvv localhost:6800/jsonrpc
    è¾“å‡º {"id":null,"jsonrpc":"2.0","error":{"code":-32600,"message":"Invalid Request."}}

    # å†…ç½‘ https åœ°å€åŠ  -k
    $ curl -X POST -H "Content-Type: application/json" \
        -d '{"jsonrpc":"2.0", "id":"test", "method":"aria2.getVersion", "params":["token:your_password"]}' \
        localhost:6800/jsonrpc
    è¾“å‡º {"id":"test","jsonrpc":"2.0","result":{"enabledFeatures":["Async DNS","BitTorrent","Firefox3 Cookie","GZip","HTTPS","Message Digest","Metalink","XML-RPC"],"version":"1.36.0"}}

    # aria2.addUri          Add a new download by URI
    # aria2.addTorrent*     Add a new BitTorrent download by torrent file
    # aria2.addMetalink*    Add a new Metalink download by Metalink file
    $ curl -X POST -H "Content-Type: application/json" \
        -d '{"jsonrpc":"2.0", "id":"test", "method":"aria2.addUri", "params":[["http://example.org/file"]]}'

    $ curl -X POST -H "Content-Type: application/json" \
        -d '{"jsonrpc":"2.0", "id":"test", "method":"aria2.addTorrent", "params":"/btfiles/xyz.torrent"}'

    $ curl -X POST -H "Content-Type: application/json" \
        -d '{"jsonrpc":"2.0", "id":"test", "method":"aria2.addMetalink", "params":"magnet:?xt=urn:btih:xyz"}'

### ZModem åè®®çš„æ–‡ä»¶ä¼ è¾“å·¥å…· rs/rz

è¿æ¥åµŒå…¥å¼è®¾å¤‡ä¼ é€æ–‡ä»¶ï¼Œæ²¡æœ‰ sftpã€ftp æ—¶ï¼Œ ç”¨ rsã€rz æ¯”è¾ƒæ–¹ä¾¿ã€‚

ssh è¿ç»­è·³è½¬è¿æ¥å‡ ä¸ªæœåŠ¡å™¨åï¼Œsftp ä¼ é€å‘½ä»¤ä¸æ–¹ä¾¿çš„æ—¶å€™ï¼Œç”¨ rzã€sz æ¯”è¾ƒæ–¹ä¾¿ã€‚ä¸è¿‡è¿™ç§æƒ…å†µä¸‹æœ€æ–¹ä¾¿çš„åŠæ³•æ˜¯ç›´æ¥è®¾ç½® ssh çš„ ProxyJump å‚æ•°ï¼Œä¸ç®¡æ˜¯ ssh è¿æ¥è¿˜æ˜¯ sftp éƒ½èƒ½æ— ç¼æ“ä½œã€‚

ç¼ºç‚¹æ˜¯å‡ åå¹´å‰çš„è€åè®®äº†ï¼Œé€Ÿç‡è¾ƒæ…¢è¯¯ç ç‡è¾ƒé«˜ï¼Œå¤§æ–‡ä»¶çš„ä¼ é€éœ€è¦è‡ªè¡Œåš hash æ ¡éªŒã€‚

    https://github.com/tmux/tmux/issues/906#issuecomment-321890340

    https://blog.csdn.net/mynamepg/article/details/81118580

    mintty ä¸æ”¯æŒ https://github.com/mintty/mintty/issues/235

åœ¨è¿œç¨‹è®¾å¤‡é‡Œå®‰è£…

    $[iot@remote_ip] sudo apt install lrzsz

æœ¬åœ°ä¹Ÿéœ€è¦å®‰è£… lrzsz è½¯ä»¶åŒ…ï¼Œè€Œä¸”éœ€è¦ä½ çš„ç»ˆç«¯å·¥å…·æ”¯æŒ zmodem åè®®

    å¦‚æœç»ˆç«¯å·¥å…·å¦‚ puttyã€minttyã€Gnome terminal ç­‰ä¸æ”¯æŒ zmodem åè®®ï¼Œä½†æ˜¯æ”¯æŒä»æ¡Œé¢æ‹–æ”¾æ–‡ä»¶ï¼ˆå˜æˆè·¯å¾„åç§°ï¼‰åˆ°ç»ˆç«¯å·¥å…·ï¼Œåˆ™å¯ä»¥å®‰è£… Gnu screenï¼Œä½¿ç”¨ screen æ¥å®ç°å¯¹ rzã€sz çš„æ”¯æŒï¼Œå‚è§ç« èŠ‚ [ç«å“ screen/Zellij]ã€‚

    å¦æœ‰è½¯ä»¶åŒ… ztelnet åŒ…è£… telnet æ”¯æŒ zmodem åè®®

    ä¸ºè§£å†³æ˜æ–‡ä¼ é€çš„é—®é¢˜ï¼Œå¯å®‰è£…è½¯ä»¶åŒ…ï¼šzssh é€šè¿‡åŒ…è£… ssh æ”¯æŒ zmodem åè®®ï¼Œä½¿ç”¨ zssh å‘½ä»¤è€Œä¸æ˜¯ ssh è¿æ¥è¿œç¨‹ï¼Œçƒ­é”® ctl+@ å³å¯åˆ‡æ¢åˆ°ä¼ é€å‘½ä»¤è¡Œï¼ˆç±»ä¼¼ sftpï¼‰ã€‚

        https://www.jianshu.com/p/dcd0111f3043
        https://www.cnblogs.com/pied/p/5813018.html

å‘é€ï¼š

    è¿œç¨‹æ¥æ”¶æ–¹è¿è¡Œ rz å‘½ä»¤åç­‰å¾…

        $[iot@remote_ip] rz
        **B0100000023be50eive.**B0100000023be50

    ç„¶ååœ¨æ¡Œé¢ç›´æ¥æŠŠä½ è¦å‘é€çš„æ–‡ä»¶æ‹–åŠ¨åˆ°ä½ çš„ç»ˆç«¯å·¥å…·çª—å£å³å¯

    è®°å¾—æ¯”å¯¹ä¸‹æ ¡éªŒç ï¼Œé˜²æ­¢è¯¯ç 

         $[iot@remote_ip] sha1sum your_file

æ¥æ”¶ï¼š

    æœ¬åœ°æ¥å—æ–¹è¿è¡Œ rz ç­‰å¾…

        $ rz

    è¿œç¨‹å‘é€æ–¹ç›´æ¥è¿è¡Œ sz å‘½ä»¤å³å¯æŠŠæ–‡ä»¶ä¼ é€’åˆ°ä½ ç»ˆç«¯å·¥å…·è®¾ç½®çš„ç›®å½•ä¸‹

        $[iot@remote_ip] sz you_need_this_file

    è®°å¾—æ¯”å¯¹ä¸‹æ ¡éªŒç ï¼Œé˜²æ­¢è¯¯ç 

         $[iot@remote_ip] sha1sum you_need_this_file

### å®‰å…¨ä¼ è¾“æ–‡ä»¶ sftp

sftp æ”¯æŒçš„å¸¸ç”¨æ–‡ä»¶æ“ä½œå‘½ä»¤è·Ÿbashä¸€è‡´ï¼Œæ¯”å¦‚ lsï¼Œpwdï¼Œcd ç­‰ï¼Œæ“ä½œæœ¬åœ°å‰ç¼€å­—æ¯lï¼Œå¦‚ llsï¼Œlcdï¼Œlpwd ç­‰ï¼Œå…¨éƒ¨å‘½ä»¤è¾“å…¥ ? å³å¯ã€‚

sftp ä¸Šä¼ ç›®å½•å¦‚æœæŠ¥é”™è¦å…ˆå»ºç«‹å¥½

    sftp xxx.com
    sftp> put -r your_dir/
    Errorï¼š...
    sftp> mkdir your_dir/
    sftp> put -r -p your_dir/
    Ok.

ä¸‹è½½ç›®å½•

    sftp xxx.com
    sftp> get -r svr_dir/

é™åˆ¶ sftp è¿æ¥ç”¨æˆ·å¯è®¿é—®è·¯å¾„ï¼Œä½¿ç”¨ chroot Jail å°† sFTP ç”¨æˆ·é™åˆ¶åˆ°å…¶ä¸»ç›®å½•ä¸­

    https://www.tecmint.com/restrict-sftp-user-home-directories-using-chroot/

### è·¨æœºè¿œç¨‹æ‹·è´ scp

scp æœ¬æ„æ˜¯ä»£æ›¿ rcp çš„ï¼Œä½†æ˜¯å‘½ä»¤è¡Œå‚æ•°è§£ææ¼æ´æ— æ³•ä¿è¯å…¼å®¹æ€§ï¼Œåªèƒ½åºŸäº†ï¼š

    ç”¨ rsync ä»£æ›¿ scp

    æˆ–ç›´æ¥ä½¿ç”¨ sftp ä¼ é€æ–‡ä»¶ï¼Œæ¯”å¦‚ RedHat å°±æ˜¯ç”¨ sftp æ›¿æ¢æ‰äº† scp

    https://ostechnix.com/securely-transfer-files-with-scp-in-linux/
        https://lists.mindrot.org/pipermail/openssh-unix-dev/2019-March/037672.html

    sftp é™„åŠ äº†è¿œç¨‹æ–‡ä»¶ç®¡ç†åŠŸèƒ½å¦‚å»ºç«‹æˆ–åˆ é™¤æ–‡ä»¶ã€æ”¯æŒæ–­ç‚¹ç»­ä¼ ç­‰ï¼Œå•çº¯çœ‹é€Ÿåº¦ scp æ›´å¿«ï¼Œä½†æ˜¯ sftp çš„å®‰å…¨æ€§è¦é«˜äº scp

        https://goteleport.com/blog/sftp

        https://goteleport.com/blog/scp-familiar-simple-insecure-slow/

    åœ¨ Windows ä¸‹ scp å’Œ sftp çš„å¼€æºè½¯ä»¶æ˜¯ WinSCP å’Œ FileZillaã€‚

ä½¿ç”¨ scp çš„å‰ææ¡ä»¶è·Ÿ sftp ä¸€æ ·

    å¯ä»¥ ssh ç™»å½•æ‰èƒ½ scp æ–‡ä»¶

scp æ˜¯åˆ©ç”¨ ssh åè®®çš„æ–‡ä»¶æ‹·è´ï¼Œæ‰€ä»¥å®é™…å·¥ä½œæ—¶ä½¿ç”¨ ssh è¿›è¡Œèº«ä»½éªŒè¯å’ŒåŠ å¯†ï¼Œä½¿ç”¨ rcp ä¼ è¾“æ–‡ä»¶ã€‚æ‰€ä»¥ scp çš„å‘½ä»¤è¡Œç”¨æ³•è·Ÿ rcp æ˜¯ä¸€è‡´çš„ã€‚

scp åŸºæœ¬ç”¨æ³•

    æ³¨æ„åç¼€æœ‰æ²¡æœ‰ç›®å½•æ ‡è¯† â€˜/â€™ çš„è¡Œä¸ºæ˜¯ä¸åŒçš„ï¼Œæ‹·è´ä¸ºç›®å½•ä¸‹æˆ–æ‹·è´ä¸ºç›®å½•

è¿œç¨‹æ–‡ä»¶å¤åˆ¶åˆ°æœ¬åœ°ï¼š

    # æŒ‡å®šç«¯å£ç”¨ -P
    scp -P 16022 root@www.test.com:/val/test/test.tar.gz /val/test/test.tar.gz

ä»è¿œç¨‹ä¸»æœºå¤åˆ¶å¤šä¸ªæ–‡ä»¶åˆ°å½“å‰ç›®å½•

    cd /val/
    scp root@192.168.1.104:/usr/local/nginx/html/webs/\{index.css,json.js\} .

è¿œç¨‹æ–‡ä»¶å¤åˆ¶åˆ°æœ¬åœ°æŒ‡å®šç›®å½•ä¸‹ï¼š

    scp root@www.test.com:/val/test/test.tar.gz /val/test/

æœ¬åœ°æ–‡ä»¶å¤åˆ¶åˆ°è¿œç¨‹ï¼š

    scp /val/test.tar.gz root@www.test.com:/val/test.tar.gz

ä»æœ¬åœ°æ–‡ä»¶å¤åˆ¶å¤šä¸ªæ–‡ä»¶åˆ°è¿œç¨‹ä¸»æœºï¼ˆå¤šä¸ªæ–‡ä»¶ä½¿ç”¨ç©ºæ ¼åˆ†éš”å¼€ï¼‰

    cd /val/
    scp index.css json.js root@192.168.1.104:/usr/local/nginx/html/webs/

æœ¬åœ°æ–‡ä»¶å¤åˆ¶åˆ°è¿œç¨‹æŒ‡å®šç›®å½•ä¸‹ï¼š

    scp /val/test.tar.gz root@www.test.com:/val/

è¿œç¨‹ç›®å½•å¤åˆ¶åˆ°æœ¬åœ°ï¼š

    # æŒ‡å®šç«¯å£ç”¨ -P
    scp -P 16022 -r root@www.test.com:/val/test/ /val/test/

æœ¬åœ°ç›®å½•å¤åˆ¶åˆ°è¿œç¨‹ï¼š

    scp -r ./ubuntu_env/ root@192.168.0.111:/home/pipipika

    scp -r SocialNetworks/ piting@192.168.0.172:/media/data/pipi/datasets/

æŠŠæ–‡ä»¶ä»ä¸€ä¸ªè¿œç¨‹ä¸»æœºå¤åˆ¶åˆ°å¦ä¸€ä¸ªè¿œç¨‹ä¸»æœºä¸Š

    scp root@192.168.1.104:/usr/local/xx.txt root@192.168.1.105:/usr/local/webs/

### ä¸‡å…†å…‰çº¤é“¾è·¯æ‹·è´å·¥å…·--bbcp

æ•°æ®ä¸­å¿ƒå…‰çº¤çº¿è·¯ä¼ è¾“å¤§æ–‡ä»¶æˆ–ç›®å½•ï¼Œéœ€è¦åŠ å¯†å¤šçº¿ç¨‹ä¼ è¾“å·¥å…·ä»¥å……åˆ†åˆ©ç”¨å¸¦å®½ï¼Œå•†ä¸šç‰ˆçš„æœ‰ IBM Asperaï¼Œå¼€æºäº§å“ä¸­é™¤äº† rsync å¼€å¯å¤šçº¿ç¨‹ä¼ è¾“ï¼Œè¿˜å¯ä»¥è€ƒè™‘ bbcp

    http://www.slac.stanford.edu/~abh/bbcp/

æºæœåŠ¡å™¨å’Œç›®æ ‡æœåŠ¡å™¨éƒ½éœ€è¦å®‰è£… bbcpï¼ŒæºæœåŠ¡å™¨æ‰§è¡Œ bbcp æ—¶ä¼šç”¨ ssh è¿æ¥åˆ°ç›®æ ‡æœåŠ¡å™¨è‡ªåŠ¨è°ƒç”¨ bbcp

    ä¸‹è½½ https://www.slac.stanford.edu/~abh/bbcp/bin/amd64_ubuntu22.04/bbcp

    $ chmod +x bbcp && sudo cp bbcp /usr/bin/

æµ‹è¯•è¿è¡Œ

    æœ¬æœºæµ‹è¯•ï¼Œç¬¬ä¸€æ¬¡è¿è¡Œä¼šæç¤ºä½ ç™»å½• localhost çš„ ssh å¯†é’¥ï¼Œç¡®è®¤å³å¯ï¼š

        $ bbcp -P 2 /dev/zero localhost:/dev/null
        The authenticity of host 'localhost (::1)' can't be established.
        ED25519 key fingerprint is SHA256:xxxxxxx.
        This key is not known by any other names.
        Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
        Warning: Permanently added 'localhost' (ED25519) to the list of known hosts.
        bbcp: Creating /dev/null/zero
        bbcp: 250226 01:04:30  0% done; 2.4 GB/s
        bbcp: 250226 01:04:32  0% done; 2.0 GB/s
        bbcp: 250226 01:04:33  0% done; 2.1 GB/s
        bbcp: 250226 01:04:35  0% done; 2.2 GB/s
        bbcp: 250226 01:04:36  0% done; 2.2 GB/s
        bbcp: 250226 01:04:37  0% done; 2.2 GB/s

    ç½‘ç»œä¸Šçš„ä¸»æœºï¼Œå°è¯•ä½¿ç”¨å¤§çš„ TCP çª—å£

        $ bbcp -P 2 -v -w 2M /dev/zero v10chi.datatag.org:/dev/null

å¦‚æœä½ çš„æœåŠ¡å™¨å¯ç”¨é˜²ç«å¢™äº†ï¼Œæ³¨æ„ç›®æ ‡æœåŠ¡å™¨ä¸Šéœ€è¦å¼€æ”¾ 5031 ç«¯å£ã€‚æºæœåŠ¡å™¨ä¸Šä¸éœ€è¦æ·»åŠ ç›¸åº”çš„è§„åˆ™ã€‚

#### å‚æ•°è°ƒä¼˜

æ­£å¸¸è°ƒä¼˜ä¹‹åï¼Œ10G å…‰çº¤çº¿è·¯æ˜¯å¯ä»¥è·‘æ»¡çš„

    http://pcbunn.cithep.caltech.edu/bbcp/using_bbcp.htm

1ã€æ“ä½œç³»ç»Ÿå‚æ•°

Issue a "cat /proc/sys/net/ipv4/tcp_rmem" command, and verify that the numbers you see are large, for example:

    1610612736      1610612736      1610612736

(and not small, like 4360)

Here are some typical settings that will allow high throughput in the WAN:

    ### IPV4 specific settings
    net.ipv4.tcp_timestamps = 0
    net.ipv4.tcp_sack = 0

    # on systems with a VERY fast bus -> memory interface this is the big gainer
    net.ipv4.tcp_rmem = 536870912 536870912 536870912
    net.ipv4.tcp_wmem = 536870912 536870912 536870912
    net.ipv4.tcp_mem = 536870912 536870912 536870912

    ### CORE settings (mostly for socket and UDP effect)
    net.core.rmem_max = 536870912
    net.core.wmem_max = 536870912
    net.core.rmem_default = 536870912
    net.core.wmem_default = 536870912
    net.core.optmem_max = 536870912
    net.core.netdev_max_backlog = 1000000

In RHEL Linux, you can put these in /etc/sysctl.conf, or run `sysctl` from the command line (you'll need to be root).

Note that, with default large windows like these, *every* user who starts a TCP connection will get a connection that is allocated the full window size, which might not be what you want on a multi-user system.

There are many Web sites which describe how to tune TCP/IP, so we do not cover that here.

2ã€ç½‘å¡ MTU è¦å¼€å¯å·¨å‹å¸§

å¦‚æœæœ‰å¤šå—ç½‘å¡ï¼Œç¡®è®¤å¥½ä¼ è¾“ä½¿ç”¨çš„æ˜¯ 9000 MTU æˆ–ä»¥ä¸Šçš„ç½‘å¡ï¼Œé»˜è®¤ 1500 MTU çš„ç½‘å¡é€Ÿåº¦å¿«ä¸èµ·æ¥ã€‚

3ã€ç¡®è®¤è·¯ç”±

ç”¨ `tracepath`æ£€æŸ¥åˆ°ç›®æ ‡æœåŠ¡å™¨çš„è·¯ç”±ï¼Œç¡®è®¤æ˜¯ä¸¤å—å·¨å‹å¸§ç½‘å¡ä¹‹é—´çš„ä¼ è¾“ï¼Œä¸” MTU æ²¡æœ‰è¢«è·¯ç”±å™¨é™ä½ã€‚

å¦‚æœè°ƒæ•´äº†è·¯ç”±è®¾ç½®ï¼Œåˆ·æ–°ä¸‹ç³»ç»Ÿçš„ï¼š

    $ sysctl -w net.ipv4.route.flush=1

4ã€ç¡®è®¤ -w å‚æ•°

    https://www.slac.stanford.edu/~abh/bbcp/#_Toc392015142

å…ˆç”¨ ping çœ‹ä¸‹å¹³å‡å»¶è¿Ÿï¼Œå‡è®¾æ˜¯ 120msecsï¼Œçº¿è·¯æ˜¯ 10G å…‰çº¤ï¼Œå¯å¾— `iperf` å·¥å…·çš„å‚æ•°ï¼š

    Window Size = 10Gbits/sec * 120msecs = 120 MBytes

åˆ™ bbcp çš„å‚æ•°è¦é™¤ä»¥ 2ï¼Œä¸º 60Mã€‚

5ã€é¿å…åç§°æŸ¥æ‰¾

å¦‚æœç»™å‡ºçš„æ˜¯ ip åœ°å€ï¼ŒæŒ‰è§„èŒƒä¼šé»˜è®¤ç”¨ DNS æŸ¥æ‰¾åŠŸèƒ½è½¬ä¸ºåç§°ï¼Œç„¶ååˆæŸ¥æ‰¾ä¸€æ¬¡åˆ°å…·ä½“çš„ ip åœ°å€ã€‚ç”¨ -n å‚æ•°ç¦æ­¢è¿™ä¸ªç”¨æ³•ã€‚

ç¤ºä¾‹ï¼š

    https://www.cnblogs.com/ddroot/p/7815552.html

æ‹·è´æ–‡ä»¶

    $ /usr/local/bin/bbcp -4 -k -a -r -F -v -P 2 -w 9m -s 16 -T 'ssh -p 1222 -x -a -oFallBackToRsh=no %I -l %U %H /usr/local/bin/bbcp' test.tar.gz

å‚æ•°è¯¦è§£ï¼š

    -4 ä½¿ç”¨ipv4 IPåœ°è¿›è¡Œä¼ è¾“
    -k ä¿ç•™æ‰€æœ‰æœªä¼ è¾“å®Œæˆçš„æ–‡ä»¶ï¼Œå¹¶å…è®¸åœ¨é‡è¯•æ—¶è¿›è¡Œè¦†ç›–ï¼Œä½¿ç”¨-fåå³ä½¿åŠ äº†-kä¹Ÿä¼šå…¨éƒ¨é‡ä¼ ï¼Œä¸€èˆ¬ä¸-aä¸€èµ·ä½¿ç”¨ï¼Œé»˜è®¤ä¸ä½¿ç”¨-kæ—¶å½“ä¼ è¾“æœªå®Œæˆå°±ä¸­æ–­ä¼ è¾“æ—¶ä¼šåˆ é™¤æ²¡æœ‰ä¼ è¾“å®Œçš„ç›®æ ‡æ–‡ä»¶
    -a ä¿ç•™checkpointä¿¡æ¯ç”¨äºæ ¡éªŒæ–‡ä»¶çš„å®Œæ•´æ€§
    -r é€’å½’ä¼ è¾“æŒ‡å®šè·¯å¾„ä¸‹çš„æ‰€æœ‰æ–‡ä»¶
    -c ä½¿ç”¨å‹ç¼©å‡å°‘ç½‘ç»œä¸Šä¼ è¾“çš„å­—èŠ‚ä½†éœ€è¦é¢å¤–çš„CPUèµ„æºï¼Œå¦‚æœCPUèµ„æºä¸è¶³ï¼Œæ€§èƒ½ä¼šéå¸¸å·®ã€‚bbcpä½¿ç”¨zipå¯¹æ•°æ®è¿›è¡Œå‹ç¼©ä¼ è¾“å‹ç¼©çº§åˆ«1-9ï¼Œ1é€Ÿåº¦æœ€å¿«ï¼Œ9æœ€å¤§å‹ç¼©ç‡é€Ÿåº¦æœ€æ…¢
    -d å¤šç›®å½•å¤åˆ¶ï¼Œå¯ä»¥ä½¿ç”¨å¤šä¸ªæºä»¥ç©ºæ ¼éš”å¼€ã€‚å¦‚:/home/ddroot/data dir1/data1 dir2/data2
    -P 2 æ¯ä¸¤ç§’æ˜¾ç¤ºä¼ è¾“çš„è¿›ç¨‹
    -v æ˜¾ç¤ºæ‹·è´ä¿¡æ¯
    -V æ‰“å°è°ƒè¯•ä¿¡æ¯
    -f å¼ºåˆ¶è¦†ç›–è¿œç«¯å·²ç»å­˜åœ¨çš„æ–‡ä»¶
    -F ä¸æ£€æŸ¥ç›®æ ‡æœåŠ¡å™¨çš„å‰©ä½™ç©ºé—´
    -w è®¾ç½®Disk (I/O) buffers
    ç®—æ³•ä¸º(window = netspeed/8*RTT = 1000Mb/8*74ms = 1000/1000/8*74 = 9.25 M)
    å¯¹åº”é“¾æ¥ï¼šhttps://www.slac.stanford.edu/~abh/bbcp/#_Toc392015142
    -s 16 è®¾ç½®å¹¶å‘æ•°ä¸º16ï¼Œé»˜è®¤4ä¸ª
    å‚è€ƒå®˜æ–¹å»ºè®®ï¼šhttps://www.slac.stanford.edu/~abh/bbcp/#_Toc392015143
    -T "ssh -x -a -p 1222 -oFallBackToRsh=no -i /home/ddroot/.ssh/id_rsa -l ddroot 172.16.66.66 /usr/bin/bbcp"
        æŒ‡å®šè¿œç«¯ä¸»æœºçš„è®¤è¯æ–¹å¼ï¼š
        é‡‡ç”¨-p 1222æŒ‡å®šç«¯å£ï¼›
        è®¾ç½®-oFallBackToRsh=noå‡å°‘sshå“åº”æ—¶é—´ï¼›
        è®¾ç½®-i /home/ddroot/.ssh/id_rsaæŒ‡å®šSSH Keyï¼›
        -I ä½¿ç”¨ä¼ è¾“æ–‡ä»¶åˆ—è¡¨æ–‡ä»¶
        è®¾ç½®-l ddrootæŒ‡å®šç™»é™†ç”¨æˆ·ï¼›
        172.16.66.66ä¸ºè¿œç¨‹ä¸»æœºåœ°å€ï¼›
        /usr/bin/bbcpä¸ºè¿œç¨‹ä¸»æœºçš„bbcpè·¯å¾„ï¼›
    --port pn1 æŒ‡å®šæ¥æ”¶æ•°æ®ç«¯å£ï¼Œé»˜è®¤5031
    -Z pn1:pn2 æŒ‡å®šæ¥æ”¶æ•°æ®ç«¯å£èŒƒå›´

### æ–‡ä»¶åŒæ­¥ rsync

rsync ç”¨äºå¢é‡å¤‡ä»½ï¼ˆåªå¤åˆ¶æœ‰å˜åŠ¨çš„æ–‡ä»¶ï¼‰ï¼ŒåŒæ­¥æ–‡ä»¶æˆ–ç›®å½•ï¼Œæ”¯æŒè¿œç¨‹æœºå™¨ã€‚å…¶é»˜è®¤çš„è¡Œä¸ºæ˜¯ï¼Œä½¿ç”¨æ–‡ä»¶å¤§å°å’Œä¿®æ”¹æ—¶é—´æ¥åˆ¤æ–­ç›®æ ‡æ–‡ä»¶æ˜¯å¦éœ€è¦æ›´æ–°

    http://rsync.samba.org

    https://www.ruanyifeng.com/blog/2020/08/rsync.html

    rsync å®Œå…¨æ‰‹å†Œ https://www.junmajinlong.com/linux/index/#Linux%E5%9F%BA%E6%9C%AC%E6%9C%8D%E5%8A%A1

    https://blog.csdn.net/wanli245/article/details/80317255

    http://c.biancheng.net/view/6121.html

    ä½¿ç”¨ rsync å¤‡ä»½æ“ä½œç³»ç»Ÿ

        https://wiki.archlinux.org/title/Rsync#Full_system_backup

æœ€å¸¸ç”¨çš„å°±æ˜¯ä»£æ›¿ scp å‘½ä»¤

ä½¿ç”¨ `rsync -e ssh` å³å¯ä»£æ›¿ scp å‘½ä»¤ï¼Œä½†æ˜¯æ³¨æ„å…¶å¯¹ç›®å½•çš„å¤„ç†æ–¹å¼è·Ÿ scp/cp æ–¹å¼æœ‰åŒºåˆ«ï¼š

    æºç›®å½• source å®Œæ•´åœ°å¤åˆ¶åˆ°äº†ç›®æ ‡ç›®å½• destination ä¸‹é¢ï¼Œå³å½¢æˆäº† destination/source çš„ç›®å½•ç»“æ„

        rsync source destination/

    åªæƒ³åŒæ­¥æºç›®å½•sourceé‡Œé¢çš„å†…å®¹åˆ°ç›®æ ‡ç›®å½•destinationï¼Œåˆ™éœ€è¦åœ¨æºç›®å½•åé¢åŠ ä¸Šæ–œæ 

        rsync source/ destination/

rsyncçš„å·¥ä½œæ–¹å¼

    ä¸»æœºæœ¬åœ°é—´çš„æ•°æ®ä¼ è¾“æ•°æ®ï¼ˆæ­¤æ—¶ç±»ä¼¼äºcpå‘½ä»¤çš„åŠŸèƒ½ï¼‰

    å€ŸåŠ©rcp,sshç­‰ä¼ è¾“æ•°æ®ï¼ˆæ­¤æ—¶ç±»ä¼¼äºscpå‘½ä»¤çš„åŠŸèƒ½ï¼‰

    ä»¥å®ˆæŠ¤è¿›ç¨‹ï¼ˆsocketï¼‰çš„æ–¹å¼ä¼ è¾“æ•°æ®ï¼ˆè¿™ä¸ªæ˜¯rsyncçš„é‡è¦çš„åŠŸèƒ½ï¼‰

rsync å®ç°å¢é‡å¤‡ä»½ï¼š

    é¦–æ¬¡åŒæ­¥ï¼šrsync ä¼šå¤åˆ¶æºç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶åˆ°ç›®æ ‡ç›®å½•ï¼Œæ— è®ºå®ƒä»¬æ˜¯å¦å‘ç”Ÿå˜åŒ–ã€‚

    åç»­åŒæ­¥ï¼š

        rsync ä¼šåœ¨åŒæ­¥å‰æ¯”è¾ƒæºç›®å½•å’Œç›®æ ‡ç›®å½•ä¸­çš„æ–‡ä»¶ã€‚

        å¦‚æœæ–‡ä»¶åœ¨æºç›®å½•ä¸­è¢«ä¿®æ”¹ã€åˆ é™¤æˆ–æ–°å¢ï¼Œrsync ä¼šç›¸åº”åœ°æ›´æ–°ç›®æ ‡ç›®å½•ã€‚

        å¦‚æœæ–‡ä»¶æ²¡æœ‰å˜åŒ–ï¼Œrsync ä¸ä¼šé‡æ–°ä¼ è¾“è¿™äº›æ–‡ä»¶ã€‚

    æ‰€ä»¥ï¼Œé‡å¤æ‰§è¡Œç›¸åŒçš„ rsync å‘½ä»¤å°±å¯ä»¥å®ç°åªæ›´æ–°å˜åŒ–çš„æ–‡ä»¶ï¼Œç®€å•æ–¹ä¾¿

ä¸€èˆ¬è¦é…åˆä½¿ç”¨ ionice æ¥é™ä½ rsync è¿›ç¨‹çš„ io ä¼˜å…ˆçº§ï¼š

    scp ä¸å èµ„æºï¼Œä¸ä¼šæé«˜å¤šå°‘ç³»ç»Ÿè´Ÿè·ï¼Œåœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œrsync å°±è¿œè¿œä¸åŠå®ƒäº†ã€‚è™½ç„¶ rsync æ¯” scp ä¼šå¿«ä¸€ç‚¹ï¼Œä½†å½“å°æ–‡ä»¶ä¼—å¤šçš„æƒ…å†µä¸‹ï¼Œrsync å¢é‡å¤‡ä»½ä¼šå¯¼è‡´ç¡¬ç›˜ I/O éå¸¸é«˜ï¼Œè€Œ scp åŸºæœ¬ä¸å½±å“ç³»ç»Ÿæ­£å¸¸ä½¿ç”¨ã€‚

    $ sudo ionice -c 2 -n 7 rsync -avz /source/ /destination/

    -c 2 æŒ‡å®šäº† I/O ç±»ï¼ˆ2 ä»£è¡¨â€œbest effortâ€ï¼‰ï¼Œ-n 7 æŒ‡å®šäº†ä¼˜å…ˆçº§çº§åˆ«ï¼ˆä» 0 åˆ° 7ï¼Œ7 æœ€ä½ï¼‰ã€‚

    æ‰€ä»¥ä½¿ç”¨æ—¶æ ¹æ®è‡ªå·±çš„æƒ…å†µé…Œæƒ…å†³å®šé€‰ç”¨å“ªä¸ªã€‚

rsync é»˜è®¤ä½¿ç”¨ SSH è¿›è¡Œè¿œç¨‹ç™»å½•å’Œæ•°æ®ä¼ è¾“ã€‚ä¸€èˆ¬åœ¨ç›®æ ‡è®¾å¤‡ä¸Šå»ºç«‹æ™®é€šèº«ä»½çš„ç”¨æˆ·ï¼Œssh ä¸­é™åˆ¶æƒé™åˆ°æŒ‡å®šå¤‡ä»½æ–‡ä»¶å¤¹è¯»å†™ï¼Œç„¶ååªé€šè¿‡ SSH çš„å…¬ç§é’¥è®¤è¯ä¸€ç§æ–¹å¼ç™»å½•ï¼Œç„¶åé…ç½®ä¸€ä¸ªè‡ªåŠ¨ rsync çš„è„šæœ¬å®šæ—¶è¿è¡Œå¤‡ä»½æ•°æ®åˆ°ç›®æ ‡è®¾å¤‡ä¸Šã€‚

    rsync åœ¨æºæœåŠ¡å™¨ä¸Šè¿è¡Œï¼šè¿™ç§ç›´æ¥ä»æºæœåŠ¡å™¨å¤åˆ¶æ–‡ä»¶åˆ°ç›®æ ‡æœåŠ¡å™¨çš„æ–¹å¼æ›´ç›´è§‚ï¼Œè€Œä¸”å¯ä»¥åœ¨æºæœåŠ¡å™¨ä¸Šç›‘æ§æ•´ä¸ªåŒæ­¥è¿‡ç¨‹ï¼ŒåŒ…æ‹¬è¿›åº¦å’Œä»»ä½•é”™è¯¯ã€‚

    rsync åœ¨ç›®æ ‡æœåŠ¡å™¨ä¸Šè¿è¡Œï¼šéœ€è¦åœ¨ç›®æ ‡æœåŠ¡å™¨ä¸Šæœ‰æƒé™è®¿é—®æºæœåŠ¡å™¨ã€‚å¯ä»¥åœ¨ç›®æ ‡æœåŠ¡å™¨ä¸Šç›‘æ§åŒæ­¥è¿‡ç¨‹ï¼Œä½†å¯èƒ½éœ€è¦é¢å¤–çš„é…ç½®ï¼Œå¦‚è®¾ç½® SSH å¯†é’¥è®¤è¯ç­‰ã€‚

   æ—©æœŸ rsync ä¸ä½¿ç”¨ SSH åè®®ï¼Œéœ€è¦ç”¨ -e å‚æ•°æŒ‡å®šåè®®ï¼Œåæ¥æ‰æ”¹çš„ã€‚

        # -e ssh å¯ä»¥çœç•¥
        $ rsync -av -e ssh source/ user@remote_host:/destination

ä½†æ˜¯ï¼Œå¦‚æœ ssh å‘½ä»¤æœ‰é™„åŠ çš„å‚æ•°ï¼Œåˆ™å¿…é¡»ä½¿ç”¨ -e å‚æ•°æŒ‡å®šæ‰€è¦æ‰§è¡Œçš„ SSH å‘½ä»¤ã€‚

    # -e å‚æ•°æŒ‡å®š SSH ä½¿ç”¨ 2234 ç«¯å£
    $ rsync -av -e 'ssh -p 2234' source/ user@remote_host:/destination

    # ä½¿ç”¨å¯†é’¥æ–‡ä»¶ç™»å½•æœåŠ¡å™¨
    rsync -av -e "ssh -i /Users/hs/test.pem" {æœ¬åœ°æºæ–‡ä»¶å¤¹è·¯å¾„}/* root@{æœåŠ¡å™¨IP}:{æœåŠ¡å™¨ç›®æ ‡æ–‡ä»¶å¤¹è·¯å¾„}

    # ä½¿ç”¨ rsync ä¹‹å‰æŠŠ ssh ç›¸å…³è¿æ¥å‚æ•°è®¾ç½®åˆ°å˜é‡ RSYNC_RSH æ›´æ–¹ä¾¿
    export RSYNC_RSH ="ssh -T -c aes128-ctr -o Compression = no -x"

rsync å‘½ä»¤æä¾›ä½¿ç”¨çš„ OPTION åŠåŠŸèƒ½

    OPTIONé€‰é¡¹    åŠŸèƒ½

    -a    è¿™æ˜¯å½’æ¡£æ¨¡å¼ï¼Œè¡¨ç¤ºä»¥é€’å½’æ–¹å¼ä¼ è¾“æ–‡ä»¶ï¼Œå¹¶ä¿æŒæ‰€æœ‰å±æ€§ï¼Œå®ƒç­‰åŒäºå¼€å¯ -rã€-lã€-pã€-tã€-gã€-oã€-D é€‰é¡¹ã€‚ -a é€‰é¡¹åé¢å¯ä»¥è·Ÿä¸€ä¸ª --no-OPTIONï¼Œè¡¨ç¤ºå…³é—­ -rã€-lã€-pã€-tã€-gã€-oã€-D ä¸­çš„æŸä¸€ä¸ªï¼Œæ¯”å¦‚-a --no-l ç­‰åŒäº -rã€-pã€-tã€-gã€-oã€-D é€‰é¡¹ã€‚

    -r    ä»¥é€’å½’æ¨¡å¼å¤„ç†å­ç›®å½•ï¼Œå®ƒä¸»è¦æ˜¯é’ˆå¯¹åŒæ­¥ç›®å½•æ¥è¯´çš„ï¼Œå¦‚æœå•ç‹¬ä¼ ä¸€ä¸ªæ–‡ä»¶ä¸éœ€è¦åŠ  -r é€‰é¡¹ï¼Œä½†æ˜¯ä¼ è¾“ç›®å½•æ—¶å¿…é¡»åŠ ã€‚ --relative /var/www/uploads/abcd

    -z    åŠ ä¸Šè¯¥é€‰é¡¹ï¼Œå°†ä¼šåœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å‹ç¼©ã€‚

    -v    æ‰“å°ä¸€äº›ä¿¡æ¯ï¼Œæ¯”å¦‚æ–‡ä»¶åˆ—è¡¨ã€æ–‡ä»¶æ•°é‡ç­‰ã€‚

    -h    è®©è¾“å‡ºä¿¡æ¯äººæ€§åŒ–å¯è¯»

    --progress    åœ¨åŒæ­¥çš„è¿‡ç¨‹ä¸­å¯ä»¥çœ‹åˆ°åŒæ­¥çš„è¿‡ç¨‹çŠ¶æ€ï¼Œæ¯”å¦‚ç»Ÿè®¡è¦åŒæ­¥çš„æ–‡ä»¶æ•°é‡ã€ åŒæ­¥çš„æ–‡ä»¶ä¼ è¾“é€Ÿåº¦ç­‰ã€‚

    -n    æ¨¡æ‹Ÿå‘½ä»¤æ‰§è¡Œçš„ç»“æœï¼Œå¹¶ä¸çœŸçš„æ‰§è¡Œå‘½ä»¤(--dry-run) ã€‚

    -l    ä¿ç•™è½¯é“¾æ¥ï¼Œé»˜è®¤ä¸å¤„ç†è½¯é“¾æ¥æ–‡ä»¶ã€‚

    -L    åƒå¯¹å¾…å¸¸è§„æ–‡ä»¶ä¸€æ ·å¤„ç†è½¯é“¾æ¥ã€‚å¦‚æœæ˜¯ SRC ä¸­æœ‰è½¯é“¾æ¥æ–‡ä»¶ï¼Œåˆ™åŠ ä¸Šè¯¥é€‰é¡¹åï¼Œå°†ä¼šæŠŠè½¯é“¾æ¥æŒ‡å‘çš„ç›®æ ‡æ–‡ä»¶å¤åˆ¶åˆ° DESTï¼Œé»˜è®¤ä¸å¤„ç†è½¯é“¾æ¥æ–‡ä»¶ã€‚

    -H    ä¿ç•™ç¡¬é“¾ä¿¡æ¯

    -p    ä¿æŒæ–‡ä»¶æƒé™ã€‚

    -D    ä¿æŒè®¾å¤‡æ–‡ä»¶ä¿¡æ¯ã€‚

    -t    ä¿æŒæ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´ä¿¡æ¯ã€‚

    --delete  ä½¿ä¸¤ä¸ªç›®å½•ä¿æŒç›¸åŒã€‚åœ¨å¤šæ¬¡å¤‡ä»½æ—¶æºç›®å½•ä¸­å·²ç»åˆ é™¤çš„æ–‡ä»¶ä¹Ÿä¼šåœ¨ç›®æ ‡ç›®å½•ä¸­åˆ é™¤ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œrsync åªç¡®ä¿æºç›®å½•çš„æ‰€æœ‰å†…å®¹ï¼ˆæ˜ç¡®æ’é™¤çš„æ–‡ä»¶é™¤å¤–ï¼‰éƒ½å¤åˆ¶åˆ°ç›®æ ‡ç›®å½•ï¼Œå®ƒä¸ä¼šä½¿ä¸¤ä¸ªç›®å½•ä¿æŒç›¸åŒï¼Œå¹¶ä¸”ä¸ä¼šåˆ é™¤æ–‡ä»¶ã€‚å¦‚æœè¦ä½¿å¾—ç›®æ ‡ç›®å½•æˆä¸ºæºç›®å½•çš„é•œåƒå‰¯æœ¬ï¼Œåˆ™å¿…é¡»ä½¿ç”¨ --delete å‚æ•°ï¼Œè¿™å°†åˆ é™¤åªå­˜åœ¨äºç›®æ ‡ç›®å½•ã€ä¸å­˜åœ¨äºæºç›®å½•çš„æ–‡ä»¶ã€‚

    --exclude=PATTERN   æŒ‡å®šæ’é™¤ä¸éœ€è¦ä¼ è¾“çš„æ–‡ä»¶ï¼Œç­‰å·åé¢è·Ÿæ–‡ä»¶åï¼Œå¯ä»¥æ˜¯é€šé…ç¬¦æ¨¡å¼ï¼ˆå¦‚ *.txtï¼‰ã€‚

    -u    æŠŠ DEST ä¸­æ¯” SRC è¿˜æ–°çš„æ–‡ä»¶æ’é™¤æ‰ï¼Œä¸ä¼šè¦†ç›–ã€‚

    -c æˆ– --checksum    ä½¿ç”¨æ ¡éªŒå’Œåˆ¤æ–­æ–‡ä»¶å˜æ›´ï¼Œè€Œä¸æ˜¯é»˜è®¤çš„æ–‡ä»¶å¤§å°å˜åŒ–æˆ–æ–‡ä»¶ä¿®æ”¹æ—¶é—´å˜åŒ–ï¼Œè¿™ä¼šå¢åŠ cpuæ¶ˆè€—ã€‚

    --size-only     åªåŒæ­¥å¤§å°æœ‰å˜åŒ–çš„æ–‡ä»¶ï¼Œä¸è€ƒè™‘æ–‡ä»¶ä¿®æ”¹æ—¶é—´çš„å·®å¼‚ã€‚

    --partial       æ–­ç‚¹ç»­ä¼ ã€‚ä¿ç•™é‚£äº›æœªä¼ è¾“å®Œæˆçš„æ–‡ä»¶ï¼Œä»¥ä¾¿å¯ä»¥åœ¨ä¸‹æ¬¡ä¼ è¾“æ—¶ç»§ç»­ã€‚éƒ¨åˆ†ä¼ è¾“çš„æ–‡ä»¶é€šå¸¸ä¼šè¢«å­˜æ”¾åœ¨ç›®æ ‡ç›®å½•ä¸­ï¼Œä½†å®ƒä»¬ä¼šè¢«æ”¾ç½®åœ¨ä¸€ä¸ªä»¥ .rsync-partial å‘½åçš„éšè—ç›®å½•é‡Œã€‚è¿™ä¸ªéšè—ç›®å½•ä¼šåœ¨ç›®æ ‡è·¯å¾„ä¸‹è‡ªåŠ¨åˆ›å»ºï¼Œç”¨äºå­˜æ”¾åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ–­æ—¶çš„éƒ¨åˆ†æ–‡ä»¶ã€‚

    --append-verify æ–­ç‚¹ç»­ä¼ ã€‚åœ¨ --partial çš„åŸºç¡€ä¸Šï¼Œå®ƒè¿˜ä¼šåœ¨ä¼ è¾“å®Œæˆåå¯¹æ–‡ä»¶è¿›è¡Œæ ¡éªŒï¼Œå¦‚æœæ ¡éªŒå¤±è´¥ï¼Œåˆ™ä¼šé‡æ–°ä¼ è¾“è¯¥æ–‡ä»¶ã€‚è¿™æ˜¯å¯¹æ•°æ®å®Œæ•´æ€§æ›´å¥½çš„é€‰æ‹©ï¼Œä½†æ˜¯ä¼šå¤§å¤§é™ä½æ•°æ®åŒæ­¥çš„é€Ÿåº¦ï¼Œå¹¶å¢åŠ cpuæ¶ˆè€—ã€‚

    --delete        å¢é‡å¤‡ä»½æ—¶åˆ é™¤ç›®æ ‡æœåŠ¡å™¨ä¸Šåœ¨æºæœåŠ¡å™¨ä¸å­˜åœ¨çš„æ–‡ä»¶ï¼Œå»ºè®®ä½¿ç”¨å‰å…ˆç”¨ -n å‚æ•°å¹²è·‘ä¸€ä¸‹çœ‹çœ‹æ•ˆæœ

    --exclude       åŒæ­¥æ—¶æ’é™¤æŸäº›æ–‡ä»¶æˆ–ç›®å½•

    --bwlimit=KBPS  æœ€å¤§ä¼ è¾“é€Ÿç‡ï¼Œé™åˆ¶ rsync çš„å¸¦å®½ä½¿ç”¨

ä»¥ä¸Šä¹Ÿä»…æ˜¯åˆ—å‡ºäº† rsync å‘½ä»¤å¸¸ç”¨çš„ä¸€äº›é€‰é¡¹ï¼Œå¯¹äºåˆå­¦è€…æ¥è¯´ï¼Œè®°ä½æœ€å¸¸ç”¨çš„å‡ ä¸ªå³å¯ï¼Œæ¯”å¦‚ -aã€-vã€-zã€--delete å’Œ --excludeã€‚

è‡ªåŠ¨å°è¯•æ–­ç‚¹ç»­ä¼ çš„è§¦å‘æ¡ä»¶ï¼š

    é‡æ–°æ‰§è¡Œçš„å‘½ä»¤å¿…é¡»ä¸æœ€åˆä¸­æ–­çš„å‘½ä»¤å®Œå…¨ç›¸åŒï¼ŒåŒ…æ‹¬æºæ–‡ä»¶ã€ç›®æ ‡æ–‡ä»¶ä»¥åŠä½¿ç”¨çš„å‚æ•°ã€‚

    rsync ä¼šæ£€æŸ¥ç›®æ ‡è·¯å¾„ä¸‹æ˜¯å¦å­˜åœ¨æœªå®Œæˆçš„æ–‡ä»¶éƒ¨åˆ†ï¼Œæ£€æŸ¥æºæ–‡ä»¶çš„å¤§å°å’Œä¿®æ”¹æ—¶é—´ï¼Œå¦‚æœæ‰¾åˆ°äº†è¿™æ ·çš„éƒ¨åˆ†æ–‡ä»¶ï¼Œrsync ä¼šä»ä¸Šæ¬¡ä¸­æ–­çš„åœ°æ–¹ç»§ç»­ä¼ è¾“ã€‚

    å¦‚æœæºæ–‡ä»¶åœ¨ä¼ çš„è¿‡ç¨‹ä¸­æ”¹å˜äº†ï¼Œæˆ–ä¸€å¼€å§‹å°±æ–­è¿äº†ï¼Œä¸ä¼šè¿›è¡Œç»­ä¼ 

    å¦‚æœä½¿ç”¨äº† --inplace å‚æ•°ï¼Œrsync ä¼šç›´æ¥åœ¨ç›®æ ‡ä½ç½®æ›´æ–°æ–‡ä»¶ï¼Œè€Œä¸æ˜¯é¦–å…ˆå°†æ•°æ®ä¼ è¾“åˆ°ä¸´æ—¶æ–‡ä»¶ç„¶åå†é‡å‘½åã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œrsync ä¸ä¼šä¿ç•™æœªå®Œæˆçš„ä¼ è¾“æ•°æ®ã€‚

    å¦‚æœä½¿ç”¨äº† --whole-file å‚æ•°ï¼Œrsync ä¼šä¼ è¾“æ•´ä¸ªæ–‡ä»¶ï¼Œè€Œä¸æ˜¯å¢é‡ä¼ è¾“ï¼Œå› æ­¤ä¸ä¼šè¿›è¡Œæ–­ç‚¹ç»­ä¼ ã€‚

å› ä¸ºä½¿ç”¨ ssh è¿›è¡Œå¤‡ä»½ï¼Œæ‰€ä»¥å®é™…ä½¿ç”¨ä¸­ä¸€èˆ¬ä¸æŒ‡å®šå±ä¸»å’Œå±ç»„ï¼Œåªå¤‡ä»½æ•°æ®ã€‚å¦‚æœè¦å®ç°å¤‡ä»½ /home ç›®å½•ï¼Œæ”¯æŒå¤šä¸ªç”¨æˆ·å’Œå±ä¸»æƒé™ï¼Œåˆ™ä½¿ç”¨å¦‚ä¸‹å‚æ•°ï¼Œä½†æ˜¯æ³¨æ„é™åˆ¶ï¼š

    -o  å‚æ•° -a å·²ç»åŒ…å«ï¼Œä¿æŒæ–‡ä»¶å±ä¸»ä¿¡æ¯ã€‚å¦‚æœæºæœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶å±ä¸»åœ¨ç›®æ ‡æœåŠ¡å™¨ä¸Šä¹Ÿå­˜åœ¨ï¼Œé‚£ä¹ˆä½¿ç”¨ -o å‚æ•°å¯ä»¥ä¿ç•™æ–‡ä»¶çš„å±ä¸»ä¿¡æ¯ã€‚

        å¦‚æœç›®æ ‡æœåŠ¡å™¨ä¸Šä¸å­˜åœ¨ç›¸åº”çš„å±ä¸»ï¼Œé‚£ä¹ˆå³ä½¿ä½¿ç”¨äº† -o å‚æ•°ï¼Œæ–‡ä»¶çš„å±ä¸»ä¹Ÿä¸ä¼šè¢«è®¾ç½®ä¸ºæºæœåŠ¡å™¨ä¸Šçš„å±ä¸»ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ–‡ä»¶é€šå¸¸ä¼šè¢«è®¾ç½®ä¸ºç›®æ ‡æœåŠ¡å™¨ä¸Šæ‰§è¡Œ rsync å‘½ä»¤çš„ç”¨æˆ·çš„å±ä¸»ã€‚

    -g  å‚æ•° -a å·²ç»åŒ…å«ï¼Œä¿æŒæ–‡ä»¶å±ç»„ä¿¡æ¯ã€‚å¦‚æœæºæœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶å±ç»„åœ¨ç›®æ ‡æœåŠ¡å™¨ä¸Šä¹Ÿå­˜åœ¨ï¼Œé‚£ä¹ˆä½¿ç”¨ -g å‚æ•°å¯ä»¥ä¿ç•™æ–‡ä»¶çš„å±ç»„ä¿¡æ¯ã€‚

        å¦‚æœç›®æ ‡æœåŠ¡å™¨ä¸Šä¸å­˜åœ¨ç›¸åº”çš„å±ç»„ï¼Œé‚£ä¹ˆå³ä½¿ä½¿ç”¨äº† -g å‚æ•°ï¼Œæ–‡ä»¶çš„å±ç»„ä¹Ÿå¯èƒ½ä¸ä¼šè¢«ä¿ç•™ã€‚æ–‡ä»¶å¯èƒ½ä¼šè¢«è®¾ç½®ä¸ºç›®æ ‡æœåŠ¡å™¨ä¸Šæ‰§è¡Œ rsync å‘½ä»¤çš„ç”¨æˆ·çš„å±ç»„ï¼Œæˆ–è€…æ ¹æ®ç›®æ ‡æœåŠ¡å™¨çš„é…ç½®è¢«è®¾ç½®ä¸ºå…¶ä»–é»˜è®¤å±ç»„ã€‚

    --chown=john:users å‚æ•°æ¥æŒ‡å®šæ–‡ä»¶åœ¨ç›®æ ‡æœåŠ¡å™¨ä¸Šçš„å±ä¸»å’Œå±ç»„ã€‚è¿™ä¸ªå‚æ•°å…è®¸ä½ æŒ‡å®šä¸€ä¸ªç”¨æˆ·åå’Œå±ç»„åï¼Œå³ä½¿è¿™äº›ç”¨æˆ·åœ¨ç›®æ ‡æœåŠ¡å™¨ä¸Šä¸å­˜åœ¨ï¼Œå¯èƒ½éœ€è¦ç›®æ ‡æœåŠ¡å™¨ä¸Šçš„ç”¨æˆ·æœ‰è¶³å¤Ÿçš„æƒé™æ¥æ›´æ”¹æ–‡ä»¶çš„å±ä¸»å’Œå±ç»„ï¼Œå¦‚æœç›®æ ‡æœåŠ¡å™¨çš„å®‰å…¨ç­–ç•¥ä¸å…è®¸ä¿®æ”¹æ–‡ä»¶çš„å±ä¸»å’Œå±ç»„ï¼Œé‚£ä¹ˆå³ä½¿ä½¿ç”¨äº† --chown å‚æ•°ï¼Œä¹Ÿå¯èƒ½æ— æ³•å®ç°é¢„æœŸçš„æ•ˆæœã€‚

rsync çš„ 5 ç§ä¸åŒçš„å·¥ä½œæ¨¡å¼ï¼š

    rsync [OPTION] SRC DEST

    rsync [OPTION] SRC :DEST

    rsync [OPTION] :SRC DEST

    rsync [OPTION] ::SRC DEST

    rsync [OPTION] SRC ::DEST

ç¬¬ä¸€ç§ç”¨äºä»…åœ¨æœ¬åœ°å¤‡ä»½æ•°æ®ï¼›

ç¬¬äºŒç§ç”¨äºå°†æœ¬åœ°æ•°æ®å¤‡ä»½åˆ°è¿œç¨‹æœºå™¨ä¸Šï¼›

ç¬¬ä¸‰ç§ç”¨äºå°†è¿œç¨‹æœºå™¨ä¸Šçš„æ•°æ®å¤‡ä»½åˆ°æœ¬åœ°æœºå™¨ä¸Šï¼›

ç¬¬å››ç§å’Œç¬¬ä¸‰ç§æ˜¯ç›¸å¯¹çš„ï¼ŒåŒæ ·ç¬¬äº”ç§å’Œç¬¬äºŒç§æ˜¯ç›¸å¯¹çš„ï¼Œå®ƒä»¬å„è‡ªä¹‹é—´çš„åŒºåˆ«åœ¨äºç™»å½•è®¤è¯æ—¶ä½¿ç”¨çš„éªŒè¯æ–¹å¼ä¸åŒã€‚

> ä½¿ç”¨ rsync://åè®®

åœ¨ rsync å‘½ä»¤ä¸­çš„è¿œç¨‹æ“ä½œï¼Œå¦‚æœä½¿ç”¨å•ä¸ªå†’å·ï¼ˆ:ï¼‰ï¼Œåˆ™é»˜è®¤ä½¿ç”¨ ssh åè®®ï¼›åä¹‹ï¼Œå¦‚æœä½¿ç”¨ä¸¤ä¸ªå†’å·ï¼ˆ::ï¼‰ï¼Œåˆ™ä½¿ç”¨ rsync åè®®ï¼Œé»˜è®¤ç«¯å£873ã€‚ssh åè®®å’Œ rsync åè®®çš„åŒºåˆ«åœ¨äºï¼Œrsync åè®®åœ¨ä½¿ç”¨æ—¶éœ€è¦é¢å¤–é…ç½®ï¼Œå¢åŠ äº†å·¥ä½œé‡

    # moduleå¹¶ä¸æ˜¯å®é™…è·¯å¾„åï¼Œè€Œæ˜¯ rsync å®ˆæŠ¤ç¨‹åºæŒ‡å®šçš„ä¸€ä¸ªèµ„æºåï¼Œç”±ç®¡ç†å‘˜åˆ†é…
    rsync -av source/ 192.168.122.32::module/destination

    # rsync å®ˆæŠ¤ç¨‹åºåˆ†é…çš„æ‰€æœ‰ module åˆ—è¡¨
    rsync rsync://192.168.122.32

    # é™¤äº†ä½¿ç”¨åŒå†’å·ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ç”¨ rsync://
    rsync -av source/ rsync://192.168.122.32/module/destination

> rsyncd å®ˆæŠ¤è¿›ç¨‹

rsyncd é€šå¸¸é…ç½®åœ¨æºæœåŠ¡å™¨ä¸Šï¼Œå®ƒç›‘å¬å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚ï¼Œå¹¶å…è®¸å®¢æˆ·ç«¯åŒæ­¥ï¼ˆæ‹·è´ï¼‰æ–‡ä»¶ã€‚è¿™é‡Œçš„â€œæºæœåŠ¡å™¨â€æ˜¯æŒ‡æ‹¥æœ‰ä½ æƒ³è¦åŒæ­¥çš„æ–‡ä»¶çš„æœåŠ¡å™¨ï¼Œè€Œâ€œç›®æ ‡æœåŠ¡å™¨â€å¯ä»¥æ˜¯ä»»ä½•éœ€è¦è¿™äº›æ–‡ä»¶çš„æœåŠ¡å™¨ã€‚

NOTE: åœ¨æ”¯æŒ SELinux çš„æœåŠ¡å™¨ä¸Šï¼Œå¦‚æœè¦ä½¿ç”¨ rsync å®ˆæŠ¤è¿›ç¨‹å…±äº«æ–‡ä»¶ï¼Œæ‚¨å¿…é¡»ä½¿ç”¨ `public_content_t` ç±»å‹æ ‡è®°æ–‡ä»¶å’Œç›®å½•ã€‚

    https://access.redhat.com/documentation/zh-cn/red_hat_enterprise_linux/7/html/selinux_users_and_administrators_guide/chap-managing_confined_services-rsync

æºæœåŠ¡å™¨çš„ rsyncd.conf é…ç½®ï¼š

```conf
# rsyncd.conf

# ç”¨æˆ·å’Œç»„
uid = nobody
gid = nogroup

# æœ€å¤§è¿æ¥æ•°
max connections = 4

# å®ˆæŠ¤è¿›ç¨‹æ¨¡å¼
use chroot = yes
chroot = /path/to/chroot

# æ—¥å¿—æ–‡ä»¶
log file = /var/log/rsync.log

# PID æ–‡ä»¶
pid file = /var/run/rsyncd.pid

# æ‹’ç»å¯¹ .sensitive æ–‡ä»¶å¤¹çš„è®¿é—®
read only = yes
exclude = .sensitive/

# [module_name] å®šä¹‰äº†ä¸€ä¸ªå¯ä»¥è¢«åŒæ­¥çš„æ¨¡å—
[module_name]
path = /path/to/directory/on/server
comment = This is a comment
read only = no
list = yes
uid = nobody
gid = nogroup

# å¯ä»¥æ·»åŠ æ›´å¤šçš„æ¨¡å—
[another_module]
path = /another/path/on/server
comment = Another comment
```

åœ¨è¿™ä¸ªé…ç½®æ–‡ä»¶ä¸­ï¼š

    uid å’Œ gid æŒ‡å®šäº†è¿è¡Œ rsync å®ˆæŠ¤è¿›ç¨‹çš„ç”¨æˆ·å’Œç»„ã€‚

    max connections æŒ‡å®šäº†åŒæ—¶å¯ä»¥æœ‰å¤šå°‘ä¸ªè¿æ¥ã€‚

    use chroot = yes å’Œ chroot æŒ‡å®šäº† rsync å®ˆæŠ¤è¿›ç¨‹å°†ä½¿ç”¨ chroot ç›‘ç‹±æ¥é™åˆ¶è®¿é—®ã€‚

    log file å’Œ pid file åˆ†åˆ«æŒ‡å®šäº†æ—¥å¿—æ–‡ä»¶å’Œ PID æ–‡ä»¶çš„ä½ç½®ã€‚

    read only = yes å’Œ exclude = .sensitive/ æŒ‡å®šäº†åŒæ­¥æ“ä½œæ˜¯åªè¯»çš„ï¼Œå¹¶ä¸”æ’é™¤äº† .sensitive æ–‡ä»¶å¤¹ã€‚

    [module_name] æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œå®ƒå®šä¹‰äº†å®¢æˆ·ç«¯å¯ä»¥åŒæ­¥çš„æ–‡ä»¶å’Œç›®å½•ã€‚

    path æŒ‡å®šäº†æœåŠ¡å™¨ä¸Šçš„åŒæ­¥ç›®å½•ã€‚

    comment æ˜¯ä¸€ä¸ªå¯é€‰çš„æè¿°ã€‚

    read only å¯ä»¥è®¾ç½®ä¸º no æ¥å…è®¸å†™å…¥æ“ä½œã€‚

    list è®¾ç½®ä¸º yes å…è®¸å®¢æˆ·ç«¯åˆ—å‡ºæ¨¡å—ä¸­çš„æ–‡ä»¶ã€‚

    uid å’Œ gid æŒ‡å®šäº†æ–‡ä»¶çš„æ‹¥æœ‰è€…å’Œç»„ã€‚

å¦‚æœæƒ³çŸ¥é“ rsync å®ˆæŠ¤ç¨‹åºåˆ†é…çš„æ‰€æœ‰ module åˆ—è¡¨ï¼Œå¯ä»¥æ‰§è¡Œä¸‹é¢å‘½ä»¤ã€‚

    $ rsync rsync://192.168.122.32

å®¢æˆ·ç«¯æ‰§è¡ŒåŒæ­¥ï¼š

    rsync -avz rsync://remote_host::module_name /path/to/local/directory

remote_host æ˜¯å®ˆæŠ¤è¿›ç¨‹è¿è¡Œçš„æœåŠ¡å™¨çš„ä¸»æœºåæˆ– IP åœ°å€ã€‚

module_name æ˜¯ä½ åœ¨ rsyncd.conf ä¸­å®šä¹‰çš„æ¨¡å—åã€‚

/path/to/local/directory æ˜¯å®¢æˆ·ç«¯çš„ç›®æ ‡ç›®å½•ã€‚

æ³¨æ„äº‹é¡¹

    æƒé™ï¼šç¡®ä¿æºæœåŠ¡å™¨ä¸Šçš„ rsync å®ˆæŠ¤è¿›ç¨‹æœ‰æƒé™è®¿é—®æŒ‡å®šçš„æ–‡ä»¶å’Œç›®å½•ã€‚

    å®‰å…¨æ€§ï¼šå¦‚æœä½¿ç”¨éåŠ å¯†çš„è¿æ¥ï¼Œæ•°æ®å¯èƒ½ä¼šè¢«æˆªè·ã€‚ä½¿ç”¨ SSH éš§é“æˆ–å…¶ä»–åŠ å¯†æ–¹æ³•å¯ä»¥æé«˜å®‰å…¨æ€§ã€‚
    å¦‚æœä½ å¸Œæœ›å…è®¸å†™å…¥æ“ä½œï¼Œç¡®ä¿ read only è®¾ç½®ä¸º noï¼Œå¹¶ä¸”æœåŠ¡å™¨ä¸Šçš„ç›®å½•æœ‰é€‚å½“çš„å†™å…¥æƒé™ã€‚

    æ€§èƒ½ï¼šrsync å®ˆæŠ¤è¿›ç¨‹å¯ä»¥é…ç½®ä¸ºä½¿ç”¨ chroot ç›‘ç‹±æ¥é™åˆ¶è¿›ç¨‹çš„æ´»åŠ¨èŒƒå›´ï¼Œæé«˜å®‰å…¨æ€§ã€‚

    å¦‚æœä½ ä½¿ç”¨ SSH è¿›è¡Œä¼ è¾“ï¼Œå¯ä»¥åœ¨å®¢æˆ·ç«¯å‘½ä»¤ä¸­æ·»åŠ  -e ssh é€‰é¡¹ã€‚

é€šè¿‡è¿™ç§æ–¹å¼ï¼Œrsync å®ˆæŠ¤è¿›ç¨‹å…è®¸å®¢æˆ·ç«¯ä»æºæœåŠ¡å™¨åŒæ­¥æ–‡ä»¶ï¼Œè€Œå®¢æˆ·ç«¯å¯ä»¥æ˜¯ä»»ä½•éœ€è¦è¿™äº›æ–‡ä»¶çš„ç›®æ ‡æœåŠ¡å™¨ã€‚

#### rsync å‘½ä»¤è¡Œç¤ºä¾‹

ä¸€èˆ¬ä½¿ç”¨ä¸­ï¼Œæœ€å¸¸ç”¨çš„å½’æ¡£æ¨¡å¼ä¸”è¾“å‡ºä¿¡æ¯ç”¨å‚æ•° `-v -a`ï¼Œä¸€èˆ¬åˆå†™ä¸º `-av`ï¼Œè¿™æ ·å°±å¯ä»¥å®ç°å¢é‡å¤‡ä»½ã€‚

    -aï¼šå­˜æ¡£æ¨¡å¼ï¼ˆç­‰äº-rlptgoDï¼‰ï¼šé€’å½’ï¼Œå°†ç¬¦å·é“¾æ¥å¤åˆ¶ä¸ºç¬¦å·é“¾æ¥ï¼Œä¿ç•™æƒé™ï¼Œä¿ç•™ä¿®æ”¹æ—¶é—´ï¼Œä¿ç•™ç»„ï¼Œä¿ç•™æ‰€æœ‰è€…ï¼Œä¿ç•™è®¾å¤‡æ–‡ä»¶å’Œç‰¹æ®Šæ–‡ä»¶

    -vï¼šåœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å¢åŠ è¯¦ç»†ä¿¡æ¯

    -uï¼šè·³è¿‡æ¥æ”¶æ–¹ä¸Šè¾ƒæ–°çš„æ–‡ä»¶

    -rï¼šé€’å½’åˆ°ç›®å½•

    --progressï¼šæ˜¾ç¤ºä¼ è¾“è¿‡ç¨‹ä¸­çš„è¿›åº¦

    --deleteï¼šä»è¿œç¨‹æœåŠ¡å™¨ä¸­åˆ é™¤å¤šä½™çš„æ–‡ä»¶

åœ¨ç”Ÿäº§ç³»ç»Ÿä¸Šè¿è¡Œï¼Œä¸€èˆ¬è¦ç”¨ `ionice` é™ä½ IO ä¼˜å…ˆçº§ï¼Œéœ€è¦ root æƒé™

    $ sudo ionice -c 2 -n 7 rsync -avr --progress source username@remote_host:destination

å¦‚æœä¸ç¡®å®š rsync æ‰§è¡Œåä¼šäº§ç”Ÿä»€ä¹ˆç»“æœï¼Œå…ˆ -n æ¨¡æ‹Ÿè·‘ä¸‹çœ‹çœ‹è¾“å‡º

    rsync -anv source destination

    # æ–­ç‚¹ç»­ä¼ 
    rsync -avth --partial --progress --bwlimit=4000 --exclude='*.xxx' /path1/ xxx@192.111.11.111:/path2/

NOTEï¼šrsync å‘½ä»¤æºç›®å½•æ˜¯å¦å†™ '/' å¤„ç†æ–¹å¼ä¸åŒ

    # æºç›®å½• source ä¸­çš„å†…å®¹å¤åˆ¶åˆ°äº†ç›®æ ‡ç›®å½• destination ä¸­ï¼Œä¸å»ºç«‹sourceå­ç›®å½•çš„æ–¹å¼

    # ç†è§£ä¸º    source/*
    rsync -av  source/ destination

    # æºç›®å½• source è¢«å®Œæ•´åœ°å¤åˆ¶åˆ°äº†ç›®æ ‡ç›®å½• destination ä¸‹é¢ï¼Œsourceæˆä¸ºå­ç›®å½•
    rsync -av source destination

å…¶å®ƒå¤šä¸ªç”¨æ³•

    # åŒæ­¥æ—¶æ’é™¤æŸäº›æ–‡ä»¶æˆ–ç›®å½•ï¼Œå¯ä»¥ç”¨å¤šä¸ª --exclude
    rsync -av --exclude='*.txt' source/ destination

    # åŒæ­¥æ—¶æ’é™¤éšè—æ–‡ä»¶
    rsync -av --exclude=".*" source/ destination

    # æ’é™¤æŸä¸ªç›®å½•é‡Œé¢çš„æ‰€æœ‰æ–‡ä»¶ï¼Œä½†ä¸å¸Œæœ›æ’é™¤ç›®å½•æœ¬èº«
    rsync -av --exclude 'dir1/*' source/ destination

    # åŒæ­¥æ—¶ï¼Œæ’é™¤æ‰€æœ‰æ–‡ä»¶ï¼Œä½†æ˜¯ä¸æ’é™¤ txt æ–‡ä»¶
    rsync -av --include="*.txt" --exclude='*' source/ destination

    # æ’é™¤ä¸€ä¸ªæ–‡ä»¶åˆ—è¡¨é‡Œçš„å†…å®¹ï¼Œæ¯ä¸ªæ¨¡å¼ä¸€è¡Œ
    rsync -av --exclude-from='exclude-file.txt' source/ destination

å¢é‡å¤‡ä»½çš„ä¸‰æ–¹æ¯”å¯¹ç”¨æ³•ï¼šä½¿ç”¨åŸºå‡†ç›®å½•ï¼Œå³å°†æºç›®å½•ä¸åŸºå‡†ç›®å½•ä¹‹é—´å˜åŠ¨çš„éƒ¨åˆ†ï¼ŒåŒæ­¥åˆ°ç›®æ ‡ç›®å½•

    # ç›®æ ‡ç›®å½•ä¸­ï¼Œä¹Ÿæ˜¯åŒ…å«æ‰€æœ‰æ–‡ä»¶ï¼Œåªæœ‰é‚£äº›å˜åŠ¨è¿‡çš„æ–‡ä»¶æ˜¯å­˜åœ¨äºè¯¥ç›®å½•ï¼Œå…¶ä»–æ²¡æœ‰å˜åŠ¨çš„æ–‡ä»¶éƒ½æ˜¯æŒ‡å‘åŸºå‡†ç›®å½•æ–‡ä»¶çš„ç¡¬é“¾æ¥ã€‚
    rsync -a --delete --link-dest /compare/path /source/path /target/path

è¿œç¨‹æ•°æ®ä¼ è¾“ï¼Œé»˜è®¤ä½¿ç”¨ SSH

    # å°†æœ¬åœ°å†…å®¹ï¼ŒåŒæ­¥åˆ°è¿œç¨‹æœåŠ¡å™¨
    rsync -avz --progress source/ username@remote_host:destination

    # å°†è¿œç¨‹å†…å®¹åŒæ­¥åˆ°æœ¬åœ°
    rsync -av username@remote_host:source/ destination

    # å¦‚æœ ssh å‘½ä»¤æœ‰é™„åŠ çš„å‚æ•°ï¼Œåˆ™å¿…é¡»ä½¿ç”¨ -e å‚æ•°æŒ‡å®šæ‰€è¦æ‰§è¡Œçš„ SSH å‘½ä»¤
    rsync -av -e 'ssh -p 2234' source/ user@remote_host:/destination

#### è½¯ç¡¬é“¾æ¥æ–‡ä»¶çš„å¤„ç†åŒºåˆ«

å¦‚æœæ˜¯å•ç‹¬æ‹·è´æ–‡ä»¶ï¼Œè½¯é“¾æ¥åªæ˜¯ä¸ªå¼•ç”¨ï¼Œç¡¬é“¾æ¥æ˜¯æ–‡ä»¶å®ä½“ï¼Œå‚æ•°æœ‰åŒºåˆ«ã€‚

é»˜è®¤å¯¹æ–‡ä»¶çš„æ“ä½œæ˜¯ä¿ç•™è½¯é“¾æ¥ï¼Œå¦‚æœæ˜¯æ‹·è´ä¸€ä¸ªç›®å½•ç»“æ„ï¼Œå…¶å†…éƒ¨çš„è½¯é“¾æ¥æŒ‡å‘ç›®å½•å†…çš„æ–‡ä»¶å®ä½“ï¼Œåˆ™ä¼šä¿æŒè½¯é“¾æ¥ï¼›

    https://zhuanlan.zhihu.com/p/365239653

    # å¦‚æœ your_dir_or_file æ˜¯ä¸ªæ–‡ä»¶ï¼Œä¼šæ‹·è´åˆ°ç›®æ ‡ç›®å½•ä¸‹
    # å¦‚æœ your_dir_or_file æ˜¯ä¸ªç›®å½•ï¼Œä¼šåœ¨ç›®æ ‡ç›®å½•ä¸‹å»ºç«‹å­ç›®å½•ï¼Œå†…å®¹æ‹·è´è¿‡å»
    $ rsync -av /etc/letsencrypt/live/your_dir_or_file root@remote:/etc/letsencrypt/live

å¦‚æœç›®å½•ç»“æ„å†…éƒ¨çš„è½¯é“¾æ¥æŒ‡å‘å¤–éƒ¨ç›®å½•çš„æ–‡ä»¶å®ä½“ï¼Œéœ€è¦æ‹·è´è½¯é“¾æ¥å¯¹åº”çš„å®ä½“æ–‡ä»¶ï¼Œåˆ™æ·»åŠ å‚æ•° -L

æ‹·è´ä¸€ä¸ªç›®å½•ç»“æ„ï¼Œç›®å½•å†…çš„è½¯é“¾æ¥æ–‡ä»¶å¤„ç†ä¸ºå®ä½“æ–‡ä»¶ï¼Œæ‹·è´åˆ°è¿œç¨‹

    # -r å‚æ•° åœ¨ç›®çš„ç›®å½•å†…é€’å½’çš„ç”Ÿæˆæºç›®å½•ç»“æ„çš„å­ç›®å½•ï¼Œç›®çš„ç›®å½•éœ€è¦æå‰å»ºå¥½ï¼ˆ`mkdir -p /etc/letsencrypt/live`ï¼‰ï¼Œå¦åˆ™ä¼šæŠ¥é”™
    # -L å‚æ•° æ‹·è´è½¯é“¾æ¥å¯¹åº”çš„å®ä½“æ–‡ä»¶
    rsync -avrL /etc/letsencrypt/live/your_dir_or_file   root@remote:/etc/letsencrypt/live

    ç­‰æ•ˆäº -avrL .................live/your_dir_or_file/  remote.......................live/your_dir_or_file

æ‹·è´ä¸€ä¸ªè½¯é“¾æ¥æ–‡ä»¶å¤„ç†ä¸ºå®ä½“æ–‡ä»¶

    # åªæ˜¯æ™®é€šçš„æ–‡ä»¶å»æ‰ -L å‚æ•°å³å¯
    rsync -avL /etc/letsencrypt/live/your_dir_or_file/cert.pem root@remote:/etc/letsencrypt/live/your_dir_or_file

#### ç¤ºä¾‹ï¼šå¤‡ä»½ç”¨æˆ·çš„ä¸»ç›®å½•

```shell

#!/bin/bash
# A script to perform incremental backups using rsync

set -o errexit
set -o nounset
set -o pipefail

readonly SOURCE_DIR="${HOME}"
readonly BACKUP_DIR="/mnt/data/backups"
readonly DATETIME="$(date '+%Y-%m-%d_%H:%M:%S')"
readonly BACKUP_PATH="${BACKUP_DIR}/${DATETIME}"
readonly LATEST_LINK="${BACKUP_DIR}/latest"

mkdir -p "${BACKUP_DIR}"

rsync -av --delete \
  "${SOURCE_DIR}/" \
  --link-dest "${LATEST_LINK}" \
  --exclude=".cache" \
  "${BACKUP_PATH}"

rm -rf "${LATEST_LINK}"
ln -s "${BACKUP_PATH}" "${LATEST_LINK}"

```

#### ç”¨ rsync æœåŠ¡ä» Linux åˆ° Windows å’Œ Linux è¿›è¡Œè¿œç¨‹å¤‡ä»½

> ä½¿ç”¨ rsync åè®®

    https://www.zhihu.com/question/20322405/answer/2874017681

ä¸€ã€å®‰è£…è®¾ç½®æœåŠ¡å™¨ç«¯è½¯ä»¶

ä¸‹è½½ rysncï¼Œåœ¨ä¸¤å°æœåŠ¡å™¨ä¸­éƒ½è¦å®‰è£…ï¼Œä¸»æœåŠ¡å™¨ä¸Š rsync ä»¥æœåŠ¡å™¨æ¨¡å¼è¿è¡Œ rsyncd å®ˆæŠ¤è¿›ç¨‹ï¼Œåœ¨åŒæ­¥ä¸Šç”¨ crond å®šæ—¶ä»»åŠ¡ä»¥å®¢æˆ·ç«¯æ–¹æ³•è¿è¡Œ rsyncï¼ŒåŒæ­¥ä¸»æœåŠ¡å™¨ä¸Šéœ€è¦åŒæ­¥çš„å†…å®¹

ä¸€èˆ¬ Linux å‘è¡Œç‰ˆè‡ªå¸¦çš„å°±ä¸å¿…è‡ªè¡Œç¼–è¯‘å®‰è£…äº†ã€‚

 rsync æœåŠ¡å™¨çš„è®¾ç½®æ–‡ä»¶ä¸º /etc/rsyncd.confï¼Œå…¶æ“æ§è®¤è¯ã€æ‹œè®¿ã€æ—¥å¿—è®°è½½ç­‰ã€‚

 è¯¥æ–‡ä»¶æ˜¯ç”±ä¸€ä¸ªæˆ–å¤šä¸ªæ¨¡å—ç»“æ„ç»„æˆã€‚ä¸€ä¸ªæ¨¡å—å®šä¹‰ä»¥æ–¹æ‹¬å¼§ä¸­çš„æ¨¡å—åå¼€ç«¯ï¼Œç›´åˆ°ä¸‹ä¸€ä¸ªæ¨¡å—å®šä¹‰å¼€ç«¯æˆ–æ–‡ä»¶ç»“æŸï¼Œæ¨¡å—ä¸­åŒ…å«æ ¼å¼ä¸º `name= value` çš„å‚æ•°å®šä¹‰ã€‚

 æ¯ä¸ªæ¨¡å—å…¶å®å°±å¯¹åº”éœ€è¦å¤‡ä»½çš„ä¸€ä¸ªç›®å½•æ ‘ï¼Œæ¯”æ–¹è¯´åœ¨å’±ä»¬çš„å®ä¾‹ç¯å¢ƒä¸­ï¼Œæœ‰ä¸‰ä¸ªç›®å½•æ ‘éœ€è¦å¤‡ä»½ï¼š

    /www/

    /mirror/file0/

    /mirror/file1/

é‚£ä¹ˆå°±éœ€è¦åœ¨è®¾ç½®æ–‡ä»¶ä¸­å®šä¹‰ä¸‰ä¸ªæ¨¡å—ï¼Œåˆ†åˆ«å¯¹åº”ä¸‰ä¸ªç›®å½•æ ‘ã€‚

è®¾ç½®æ–‡ä»¶æ˜¯è¡Œä¸ºå•ä½çš„ï¼Œæ¯ä¸ªæ–°è¡Œéƒ½è¡¨æ˜ä¸€ä¸ªæ–°çš„æ³¨é‡Šã€æ¨¡å—å®šä¹‰æˆ–è®¸å‚æ•°èµ‹å€¼ã€‚

ä¾‹å¦‚ï¼Œåœ¨ 168 ä¸Šåˆ›å»º rsyncd çš„è®¾ç½®æ–‡ä»¶ /etc/rsyncd.confï¼Œå†…å®¹å¦‚ä¸‹ï¼š

    uid = nobody # å¤‡ä»½ä»¥ä»€ä¹ˆèº«ä»½è¿›è¡Œï¼Œç”¨æˆ·ID
    gid = nobody # å¤‡ä»½ä»¥ä»€ä¹ˆèº«ä»½è¿›è¡Œï¼Œç»„ID
    # ç•™æ„è¿™ä¸ªç”¨æˆ· ID å’Œç»„ IDï¼Œå‡å¦‚è¦ä¾¿åˆ©çš„è¯ï¼Œèƒ½å¤Ÿè®¾ç½®æˆ rootï¼Œè¿™æ · rsync ç®€ç›´å°±å¯ä»¥è¯»å–ä»»ä½•æ–‡ä»¶å’Œç›®å½•äº†ï¼Œä½†æ˜¯ä¹Ÿå¸¦æ¥å®‰å…¨éšæ‚£ã€‚å»ºè®®è®¾ç½®æˆåªèƒ½è¯»å–ä½ è¦å¤‡ä»½çš„ç›®å½•å’Œæ–‡ä»¶å³å¯ã€‚

    #use chroot = no
    max connections = 0 # æœ€å¤§è¡”æ¥æ•°æ²¡æœ‰é™åˆ¶
    pid file = /var/log/rsync/rsyncd.pid
    lock file = /var/log/rsync/rsync.lock
    log file = /var/log/rsync/rsyncd.log

    [attachment] # æŒ‡å®šè®¤è¯çš„å¤‡ä»½æ¨¡å—å
    path = /www/htdocs/pub/attachment/ # éœ€è¦å¤‡ä»½çš„ç›®å½•
    comment = BACKUP attachment # æ³¨é‡Š
    ignore errors # ç–å¿½ä¸€äº›æ— å…³çš„IOè¿‡é”™
    read only = false # è®¾ç½®ä¸ºéåªè¯»
    list = false # ä¸ç­”åº”åˆ—æ–‡ä»¶
    #hosts allow = 210.51.0.80 #ç­”åº”è¡”æ¥æœåŠ¡å™¨çš„ä¸»æœºIPåœ°å€
    #hosts deny = 0.0.0.0/0.0.0.0 #åˆ¶æ­¢è¡”æ¥æœåŠ¡å™¨çš„ä¸»æœºIPåœ°å€
    auth users = msyn # è®¤è¯çš„ç”¨æˆ·åï¼Œå‡å¦‚æ²¡æœ‰è¿™è¡Œï¼Œåˆ™è¡¨æ˜æ˜¯åŒ¿å
    secrets file = /etc/rsyncd.scrt # è®¤è¯æ–‡ä»¶åï¼Œç”¨æ¥å­˜æ”¾æš—ç 

    [98htdocs]
    uid = nobody
    gid = nobody
    path = /www/htdocs/
    #ignore errors
    read only = false
    list = false
    #hosts allow = 210.51.0.98
    #hosts deny = 202.108.211.38
    #hosts deny = 0.0.0.0/0.0.0.0
    auth users = msyn
    secrets file = /etc/rsyncd.scrt

    [98html]
    uid = ejbftp
    gid = nobody
    path = /www/htdocs/pub/html/
    #ignore errors
    read only = false
    list = false
    #hosts allow = 210.51.0.98
    #hosts deny = 0.0.0.0/0.0.0.0
    auth users = 98syn
    secrets file = /etc/rsync98.scrt

è¿™é‡Œåˆ†åˆ«å®šä¹‰äº† [attachment]ã€[98htdocs]ã€[98html] ä¸‰ä¸ªæ¨¡å—ï¼Œåˆ†åˆ«å¯¹åº”äºä¸‰ä¸ªéœ€è¦å¤‡ä»½çš„ç›®æ ‘ã€‚ä¸‰ä¸ªæ¨¡å—æˆæƒçš„å¤‡ä»½ç”¨æˆ·åˆ†åˆ«ä¸º msynï¼Œmsynï¼Œ98synï¼Œç”¨æˆ·ä¿¡æ¯ä¿å­˜åœ¨æ–‡ä»¶ /etc/rsyncd.scrt å’Œ /etc/rsync98.scrt ä¸­ï¼Œå…¶å†…å®¹å¦‚ä¸‹ï¼š

    $ sudo cat /etc/rsyncd.scrt
    msyn:xxxxxxxxx

è¯¥æ–‡ä»¶åªèƒ½ æ˜¯root ç”¨æˆ·å¯è¯»å†™çš„ï¼Œå‡ºäºå®‰å…¨ç›®çš„ï¼Œè¿™ä¸ªæ–‡ä»¶çš„ç‰¹ç‚¹å¿…éœ€æ˜¯åªè¦å±ä¸»å¯è¯»ï¼Œæ–‡ä»¶æƒé™ 600 ä¸ç„¶ rsync å°†æ‹’ç»è¿è¡Œã€‚

    # /usr/local/bin/rsync --daemon

rsync é»˜è®¸æœåŠ¡ç«¯å£ä¸º 873ã€‚

äºŒã€è£…å¤‡å®¢æˆ·ç«¯

1ã€linuxä¸‹æ‰§è¡Œ rsync å®¢æˆ·ç«¯æŒ‡ä»¤

    [backup@backup /] /usr/bin/rsync -vlzrtogp --progress --delete 98syn@x.x.x.168::98html /usr/local/apache/htdocs/pub/html/ --password-file=/etc/rsync98.scrt

ä¸Šé¢è¿™ä¸ªæŒ‡ä»¤è¡Œä¸­ï¼š

    -vzrtopg é‡Œçš„ v æ˜¯ä»£è¡¨ verbose(å…·ä½“)ï¼Œz æ˜¯ä»£è¡¨ zipï¼ˆå‹ç¼©ï¼‰ï¼Œr æ˜¯ä»£è¡¨ recursiveï¼ˆé€’å½’ï¼‰ï¼Œtopg éƒ½æ˜¯ä¿ç•™æ–‡ä»¶åŸæœ‰ç‰¹ç‚¹å¦‚å±ä¸»ã€æ—¶é—´çš„å‚æ•°ã€‚

    --progress æ˜¯æŒ‡æ˜¾ç¤ºå‡ºå½“å‰çš„è¿›åº¦ï¼Œ

    --delete æ˜¯æŒ‡å‡å¦‚æœåŠ¡å™¨ç«¯åˆ é™¤äº†è¿™ä¸€æ–‡ä»¶ï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯ä¹Ÿç›¸åº”æŠŠæ–‡ä»¶åˆ é™¤ï¼Œä¿æŒä¸€è‡´ã€‚

    98syn@x.x.x.168::98html æ˜¯è¡¨æ˜è¯¥æŒ‡ä»¤æ˜¯å¯¹æœåŠ¡å™¨x .x.x.168 ä¸­çš„ 98html æ¨¡å—è¿›è¡Œå¤‡ä»½ï¼Œå…¶ä¸­ 98syn è¡¨æ˜è¿ç”¨ 98syn ç”¨æˆ·æ¥å¯¹è¯¥æ¨¡å—è¿›è¡Œå¤‡ä»½ã€‚

    -- password-file=/etc/rsync98.scrt æ¥æŒ‡å®šå¯†ç æ–‡ä»¶ï¼Œè¿™æ ·å°±èƒ½å¤Ÿåœ¨è„šæœ¬ä¸­è°ƒç”¨è€Œæ— éœ€äº¤äº’å¼åœ°è¾“å…¥éªŒè¯å¯†ç äº†ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯å¯†ç æ–‡ä»¶æƒé™ï¼Œè¦è®¾å¾—åªèƒ½æ‰§è¡Œè¿™ä¸ªæŒ‡ä»¤çš„ç”¨æˆ·å¯è¯»ï¼Œæœ¬ä¾‹ä¸­æ˜¯98syn ç”¨æˆ·ã€‚

å¤‡ä»½çš„å†…å®¹å­˜æ”¾åœ¨å¤‡ä»½æœºçš„/usr/local/apache/htdocs/pub/html/ç›®å½•ä¸‹ã€‚

è¿™æ ·ï¼ŒrsyncåŒæ­¥æœåŠ¡å°±æ­å»ºå¥½äº†ï¼Œå¯ä»¥é€šè¿‡ è®¾ç½® crontab å®šæ—¶ä»»åŠ¡æ¥è°ƒåº¦æ‰§è¡Œã€‚

2ã€Windowsè£…å¤‡å®¢æˆ·ç«¯

ä¸ºäº†åœ¨Windowsç¯å¢ƒè¿ç”¨ rsync å·¥å…·ï¼Œéœ€è¦ä¸‹è½½ rsync for windows --- cwRsyncã€‚

ç„¶åè¿è¡Œä»¥ä¸‹æŒ‡ä»¤

    rsync -vzrtopg --progress --delete 98syn@xx.xx.xx.xx::98html .\bak\ --password-file=.\rsync98.scrt

å¦‚æœå‘½ä»¤è¡Œæ‰§è¡Œè¿‡ç¨‹ä¸­å‡ºç°æç¤ºè¾“å…¥å¯†ç  `password:`ï¼Œæ­£ç¡®è¾“å…¥å¯†ç åå°±åº”è¯¥çœ‹åˆ°å¼€å§‹æ‰§è¡Œå¤‡ä»½äº†ã€‚

å¼•èµ·è¿™ç§è¿‡é”™æœ‰å‡ ç§å¯èƒ½æ€§

    ä¸€æ˜¯ä½ æ²¡æœ‰è¾“å…¥æ­£ç¡®çš„ç”¨æˆ·åæˆ–å¯†ç 

    äºŒæ˜¯ä½ çš„æœåŠ¡å™¨ç«¯å­˜å‚¨å¯†ç çš„æ–‡ä»¶æ²¡æœ‰æ­£ç¡®çš„ 600 æƒé™

æœ€å¥½æŠŠå‘½ä»¤å†™æˆæ‰¹å¤„ç†æ–‡ä»¶ï¼Œæ”¾åˆ° Windows è®¡åˆ’ä»»åŠ¡é‡Œå®šæ—¶æ‰§è¡Œã€‚

> ä½¿ç”¨ ssh åè®®

æŠŠ apache çš„ html/ ä¸‹çš„æ‰€æœ‰ç›®å½•å’Œæ–‡ä»¶ä¼ é€åˆ° ssh æœåŠ¡å™¨çš„ /destination ç›®å½•ä¸‹ï¼ŒåŒæ­¥åˆ é™¤æºç›®å½•ä¸å­˜åœ¨çš„æ–‡ä»¶å’Œç›®å½•

    /usr/bin/rsync -avz --progress --delete /usr/local/apache/htdocs/pub/html/ user@remote_host:/destination

è¯´æ˜ï¼š

    -avz        é‡Œçš„ a æ˜¯é€’å½’æ–¹å¼ä¼ è¾“æ–‡ä»¶å¹¶ä¿æŒæ‰€æœ‰å±æ€§ï¼›v æ˜¯æ˜¾ç¤ºæ­£åœ¨å¤„ç†çš„æ–‡ä»¶è¯¦ç»†ä¿¡æ¯ï¼›z æ˜¯ä¼ è¾“ä¸­ä½¿ç”¨ zip å‹ç¼©ã€‚

    --progress  æ˜¾ç¤ºå‡ºå½“å‰çš„è¿›åº¦ï¼Œ

    --delete    æºç›®å½•å¦‚æœåˆ é™¤äº†ä¸€æ–‡ä»¶ï¼Œé‚£ä¹ˆç›®çš„ç›®å½•ä¹Ÿç›¸åº”æŠŠæ–‡ä»¶åˆ é™¤ï¼Œä¿æŒä¸€è‡´ã€‚

å¯ä»¥è€ƒè™‘å¢åŠ å‚æ•°ä»¥æé«˜æ•°æ®å‡†ç¡®æ€§æˆ–é€Ÿåº¦

    --checksum      ä½¿ç”¨æ ¡éªŒå’Œåˆ¤æ–­æ–‡ä»¶å˜æ›´ï¼Œç­‰åŒå‚æ•° -c

    --size-only     åªåŒæ­¥å¤§å°æœ‰å˜åŒ–çš„æ–‡ä»¶ï¼Œä¸è€ƒè™‘æ–‡ä»¶ä¿®æ”¹æ—¶é—´çš„å·®å¼‚ã€‚

è‡ªåˆ¶ systemd å•å…ƒæ–‡ä»¶ï¼š

/usr/lib/systemd/system/rsync_bkup.service

``` ini
[Unit]
Description=rsync backup your data
Wants=network-online.target
After=network-online.target

[Service]
Type=oneshot
RemainAfterExit=yes
# æ³¨æ„ --delete çš„é£é™©ï¼Œå¦‚æœå­˜å‚¨æ²¡æœ‰æŒ‚è½½åªæœ‰ç©ºç›®å½•ï¼Œä¼šå¯¼è‡´ç›®æ ‡ç›®å½•çš„å†…å®¹ä¹Ÿéƒ½åˆ é™¤äº†
ExecStart=/usr/bin/rsync -avz --progress --delete /sorce/path/ user@remote_host:/destination

[Install]
WantedBy=multi-user.target
```

å®šæ—¶å™¨ï¼šè·Ÿå•å…ƒæ–‡ä»¶åŒåï¼Œåç¼€æ”¹ä¸º .timer

/usr/lib/systemd/system/rsync_bkup.timer

``` ini
[Unit]
Description=rsync backup your data daily

[Timer]
OnCalendar=daily
Persistent=true
AccuracySec=1h
RandomizedDelaySec=900
Unit=rsync_bkup.service

[Install]
WantedBy=timers.target
```

å¯åŠ¨å¹¶è®¾ç½®å¼€æœºè‡ªå¯åŠ¨

    $ sudo systemctl daemon-reload

    $ sudo systemctl enable --now rsync_bkup.timer

éªŒè¯

    systemctl list-timers

#### rsync+inotify å®æ—¶å¢é‡å¤‡ä»½

ä½¿ç”¨ inotify å¯ä»¥ç”¨æ¥ç›‘æ§æ–‡ä»¶ç³»ç»Ÿçš„å„ç§å˜åŒ–æƒ…å†µï¼Œå¦‚æ–‡ä»¶å­˜å–ã€åˆ é™¤ã€ç§»åŠ¨ã€ä¿®æ”¹ç­‰ï¼Œå¹¶åšå‡ºé€šçŸ¥å“åº”ã€‚åˆ©ç”¨è¿™ä¸€æœºåˆ¶ï¼Œå¯ä»¥éå¸¸æ–¹ä¾¿åœ°å®ç°æ–‡ä»¶å¼‚åŠ¨å‘Šè­¦ã€å¢é‡å¤‡ä»½ï¼Œå¹¶é’ˆå¯¹ç›®å½•æˆ–æ–‡ä»¶çš„å˜åŒ–åŠæ—¶ä½œå‡ºå“åº”

    https://blog.51cto.com/u_16213651/10493107

    https://github.com/inotify-tools/inotify-tools

æ„Ÿè§‰æ¯”è¾ƒé€‚åˆå¤‡ä»½é…ç½®æ–‡ä»¶ç­‰å˜åŒ–ä¸é¢‘ç¹çš„é™æ€èµ„æºï¼Œå¯¹é‡åº¦ä»»åŠ¡çš„å®æ—¶åŒæ­¥è¦æ…é‡ï¼Œæ¯”å¦‚æ—¥å¿—ã€ç”Ÿäº§æ•°æ®çš„å®æ—¶å¤‡ä»½ï¼Œä¸èƒ½ç¡®å®šå¯¹æ–‡ä»¶ç³»ç»Ÿå’Œå—è®¾å¤‡ io å ç”¨ç‡çš„å†²å‡»æœ‰å¤šå¤§ï¼Œåœ¨æ–‡ä»¶å¿«é€Ÿé¢‘ç¹å˜åŒ–çš„æç«¯åœºæ™¯ä¸‹ï¼Œä¼šä¸ä¼šäº§ç”Ÿå¤‡ä»½ä»»åŠ¡çš„é‡å¤æ‰«æå’Œç§¯å‹ï¼Ÿ

inotifywaitï¼ˆæŒç»­ç›‘æ§å¹¶å®æ—¶è¾“å‡ºç›‘æ§ç»“æœçš„å‘½ä»¤ï¼‰

    $ inotifywait [å‚æ•°]

    -m      æŒç»­è¿›è¡Œç›‘æ§
    -r      é€’å½’ç›‘æ§æ‰€æœ‰å­å¯¹è±¡
    -q      ç®€åŒ–è¾“å‡ºä¿¡æ¯
    -e      æŒ‡å®šè¦ç›‘æ§å“ªäº›äº‹ä»¶ç±»å‹

è°ƒæ•´inotifyå†…æ ¸å‚æ•°ï¼ˆä¼˜åŒ–ï¼‰/etc/sysctl.conf(å†…æ ¸å‚æ•°é…ç½®æ–‡ä»¶)

    inotifywait             #ç”¨äºæŒç»­ç›‘æ§ï¼Œå®æ—¶è¾“å‡ºç»“æœ
    inotifywatch             #ç”¨äºçŸ­æœŸç›‘æ§ï¼Œä»»åŠ¡å®Œæˆåå†è¾“å‡ºç»“æœ
    max_queue_events        #ç›‘æ§äº‹ä»¶é˜Ÿåˆ—å¤§å°
    max_user_instances      #æœ€å¤šç›‘æ§å®ä¾‹æ•°
    max_user_watches        #æ¯ä¸ªå®ä¾‹æœ€å¤šç›‘æ§æ–‡ä»¶æ•°

ä¸€ã€ serveré…ç½®

å®‰è£… inotify

    $ dnf install inotify-tools

éªŒè¯ï¼š

ç›‘æ§ /abc ä¸‹ï¼Œæ·»åŠ æ–‡ä»¶ã€ç§»åŠ¨æ–‡ä»¶ç­‰æ“ä½œï¼Œå¹¶è·Ÿè¸ªå±å¹•è¾“å‡ºç»“æœ

    $ sudo mkdir -p /abc

    $ inotifywait -mrq -e modify,create,move,delete /abc

ç„¶åå¦å¼€ä¸€ä¸ªç»ˆç«¯,è¿›è¡Œ åˆ›å»ºã€åˆ é™¤ã€é‡å‘½å ç­‰æ“ä½œï¼Œä¼šçœ‹åˆ° inotifywait å±å¹•çš„è¾“å‡º

    touch 4.txt
    touch 5.txt
    rm -rf 4.txt
    mv 5.txt 6.txt

ä¼˜åŒ–é…ç½® inotify å†…æ ¸å‚æ•° /etc/sysctl.conf

    fs.inotify.max_queued_events = 32768      #ç›‘æ§äº‹ä»¶é˜Ÿåˆ—ï¼Œé»˜è®¤ä¸º16384
    fs.inotify.max_user_instances = 1024      #æœ€å¤šç›‘æ§å®ä¾‹æ•°ï¼Œé»˜è®¤ä¸º128
    fs.inotify.max_user_watches = 1048576      #æ¯ä¸ªå®ä¾‹æœ€å¤šç›‘æ§æ–‡ä»¶æ•°ï¼Œé»˜è®¤ä¸º8192

    #å½“è¦ç›‘æ§çš„ç›®å½•ã€æ–‡ä»¶æ•°æ®é‡è¾ƒå¤šæˆ–è€…å˜åŒ–é¢‘ç¹æ—¶ï¼Œå»ºè®®åŠ å¤§å‚æ•°å€¼

é…ç½®ç”Ÿæ•ˆï¼š

    $ sudo sysctl -p

äºŒã€ rsyncæœåŠ¡å™¨é…ç½®

1ã€å…ˆå…³é—­rsyncè¿›ç¨‹

    $ kill $(cat /var/run/rsyncd.pid)
    $ netstat -natp | grep rsync

2ã€ä¿®æ”¹rsyncé…ç½®æ–‡ä»¶ /etc/rsyncd.conf

```conf
uid = root
gid = root
use chroot = yes
address = 192.168.3.12
port 873
log file = /var/log/rsyncd.log
pid file = /var/run/rsyncd.pid
hosts allow = 192.168.3.0/24
[wwwroot]
path = /var/www/html
comment = Document Root of www.ljm.com
read only = no
dont comperss = *.gz *.bz2 *.tgz *.zip *.rar *.z
auth users = backuper
secrets file = /etc/user.db

```

3ã€å¯åŠ¨rsync

    $ rsync --daemon
    $ netstat -natp | grep rsync

ä¸‰ã€å°† rsync+inotify ä¸¤ä¸ªæœåŠ¡ç»“åˆåœ¨ä¸€èµ·

1ã€è„šæœ¬ /opt/inotify.sh

```bash
#!/bin/bash

INOTIFY_CMD="inotifywait -mrq -e create,delete,move,modify,attrib /abc/"

RSYNC_CMD="rsync -apzH --delete --password-file=/etc/server.pass /abc/ backuper@192.168.8.14::wwwroot/"

$INOTIFY_CMD | while read DIRECTORY EVENT FILE
do
    if [ $(pgrep rsync | wc -l) -le 0 ]; then
        $RSYNC_CMD
    fi
done

```

2ã€è„šæœ¬èµ‹æƒ

    chmod +x /opt/inotify.sh
    chmod +x /etc/rc.d/rc.local

3ã€è®¾ç½®å¼€æœºè‡ªå¯åŠ¨

    echo "/opt/inotify.sh" >> /etc/rc.d/rc.local

4ã€éªŒè¯

    $ cd /abc
    touch 1.txt

å†å›åˆ° rsync çœ‹ï¼Œå‘ç°å·²ç»åŒæ­¥è¿‡å»

### å¢é‡å¤‡ä»½å·¥å…· Restic

Restic æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å¿«ç…§å¼å¢é‡å¤‡ä»½å·¥å…·ï¼Œå¯ä»¥æŠŠæœ¬åœ°çš„æ–‡ä»¶å¤‡ä»½åˆ°æœ¬åœ°çš„å¦ä¸€åœ°æ–¹ï¼Œæˆ–äº‘ç«¯ã€‚

    https://restic.net/
        https://github.com/restic/restic

    æ–‡æ¡£ https://restic.readthedocs.io/en/stable/
        https://github.com/restic/restic/blob/master/doc/design.rst

    https://juejin.cn/post/7014803100074672135

    Using rclone as a restic Backend
        https://restic.net/blog/2018-04-01/rclone-backend/

    ä½¿ç”¨ restic å’Œ systemd è‡ªåŠ¨å¤‡ä»½ https://zhuanlan.zhihu.com/p/66324926
        https://fedoramagazine.org/use-restic-encrypted-backups/

Restic åŸºäº â€œå­˜å‚¨åº“(Repository)â€ å’Œå¿«ç…§çš„æ¦‚å¿µï¼Œæ¯æ¬¡å¤‡ä»½å°±ç›¸å½“äºä¸€ä»½å¿«ç…§ï¼Œå®ƒç”¨å¢é‡æ–¹å¼ç”Ÿæˆå¿«ç…§å¹¶ç”¨ AES ç­‰æ–¹å¼åŠ å¯†ï¼Œä½¿ç”¨ ssh å¯†é’¥æ–¹å¼è¿æ¥å¤‡ä»½æœåŠ¡å™¨çš„ä¿å­˜åˆ°äº‘ç«¯çš„ â€œå­˜å‚¨åº“â€ã€‚å½“æ‚¨å¤‡ä»½æ•æ„Ÿæ•°æ®å¹¶å°†å¤‡ä»½æ”¾åœ¨ä¸å—è‡ªå·±ç®¡è¾–æœåŠ¡å™¨ï¼ˆä¾‹å¦‚ï¼Œäº‘æä¾›å•†ï¼‰æ—¶ï¼Œè¿™ä¸€ç‚¹å°¤å…¶é‡è¦ã€‚

åœ¨ä½¿ç”¨ä¸Šåˆ†ç¦»ä¸ºå‰ç«¯å’Œåç«¯ï¼Œåç«¯å®ç°æŒ‚è½½æœ¬åœ°ã€sftpã€è¿œç¨‹äº‘å­˜å‚¨ç­‰åŠŸèƒ½ï¼Œåœ¨åç«¯æä¾›äº†ç»Ÿä¸€çš„å­˜å‚¨åº“åº•å±‚æ¶æ„çš„åŸºç¡€ä¸Šï¼Œå‰ç«¯åœ¨å­˜å‚¨åº“ä¸Šå®ç°åŸºäºå¿«ç…§çš„å¢é‡å¤‡ä»½åŠŸèƒ½

    Restic æ”¯æŒçš„å­˜å‚¨ç±»å‹

        æœ¬åœ°å­˜å‚¨
        SFTP
        REST Server
        Amazon S3
        Minio Server
        OpenStack Swift
        Backblaze B2
        Microsoft Azure Blob Storage
        Google Cloud Storage
        é€šè¿‡åç«¯(backend)ä½¿ç”¨ Rclone è¿›è¡ŒæŒ‚è½½ï¼Œæ”¯æŒæµè¡Œçš„å„ç§äº‘ç›˜ï¼Œæ¯”å¦‚ï¼šGoogle Driveã€OneDrive ç­‰

    Restic çš„å¢é‡å¤‡ä»½æ˜¯åŸºäºå¿«ç…§çš„ã€‚æ¯æ¬¡å¤‡ä»½æ“ä½œï¼ŒRestic éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å¿«ç…§ï¼Œè¿™äº›å¿«ç…§ä»£è¡¨äº†æŒ‡å®šæ—¶é—´ç‚¹çš„æ•°æ®çŠ¶æ€
    ã€‚å¢é‡å¤‡ä»½çš„å·¥ä½œåŸç†æ˜¯ Restic ä¼šæ£€æŸ¥è‡ªä¸Šæ¬¡å¤‡ä»½ä»¥æ¥å“ªäº›æ–‡ä»¶å‘ç”Ÿäº†å˜åŒ–ï¼Œç„¶åä»…å¤‡ä»½è¿™äº›å˜åŒ–çš„éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯æ¯æ¬¡éƒ½å¤‡ä»½å…¨éƒ¨æ•°æ®ã€‚è¿™ç§æ–¹å¼ä¸ä»…èŠ‚çœäº†å­˜å‚¨ç©ºé—´ï¼Œè¿˜æé«˜äº†å¤‡ä»½æ•ˆç‡ã€‚Restic çš„å¢é‡å¤‡ä»½æœºåˆ¶é€šè¿‡ä»¥ä¸‹æ­¥éª¤å®ç°ï¼š

        æ•°æ®åˆ†å—ï¼šRestic ä¼šå°†æ–‡ä»¶åˆ†å‰²æˆå°å—ï¼ˆBlobsï¼‰ï¼Œå¹¶å¯¹è¿™äº›å—è¿›è¡Œå“ˆå¸Œè®¡ç®—ã€‚

        å˜æ›´æ£€æµ‹ï¼šRestic ä¼šæ£€æµ‹è‡ªä¸Šæ¬¡å¤‡ä»½ä»¥æ¥å“ªäº›å—å‘ç”Ÿäº†å˜åŒ–ã€‚

        å¢é‡å¤‡ä»½ï¼šä»…å¤‡ä»½æ–°çš„æˆ–å˜åŒ–çš„æ•°æ®å—ï¼Œè€Œä¸æ˜¯æ•´ä¸ªæ–‡ä»¶ã€‚

        å¿«ç…§åˆ›å»ºï¼šæ¯æ¬¡å¤‡ä»½éƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„å¿«ç…§ï¼Œè¿™äº›å¿«ç…§åŒ…å«äº†å¤‡ä»½æ—¶åˆ»çš„æ•°æ®çŠ¶æ€ã€‚

        æ•°æ®å»é‡ï¼šRestic åœ¨å­˜å‚¨æ•°æ®æ—¶ä¼šè¿›è¡Œå»é‡ï¼Œç›¸åŒçš„æ•°æ®å—ä¸ä¼šé‡å¤å­˜å‚¨ï¼Œè¿™è¿›ä¸€æ­¥èŠ‚çœäº†å­˜å‚¨ç©ºé—´ã€‚

        å¤‡ä»½æ¢å¤ï¼šç”¨æˆ·å¯ä»¥æ ¹æ®å¿«ç…§æ¢å¤åˆ°ç‰¹å®šçš„æ•°æ®çŠ¶æ€ã€‚

Rclone å’Œ Restic å„æœ‰æ‰€é•¿ï¼Œè¦æ ¹æ®ä¸åŒçš„ä¸šåŠ¡éœ€æ±‚é€‰æ‹©ä½¿ç”¨ã€‚æ¯”å¦‚ï¼šç½‘ç«™æ•°æ®çš„å¢é‡å¤‡ä»½ï¼Œç”¨ Restic å°±æ¯”è¾ƒåˆé€‚ã€‚è€Œå¸¸è§„æ–‡ä»¶çš„è¿œç¨‹å¤‡ä»½åˆ°äº‘ç«¯ï¼Œç”¨ Rclone å°±å¾ˆåˆé€‚ï¼Œ Rclone æ”¯æŒçš„äº‘å­˜å‚¨æ¯” Restic å¤šçš„å¤šã€‚ç›®å‰ä¸»æµçš„ä½¿ç”¨æ–¹å¼æ˜¯ç»„åˆäºŒè€…çš„é•¿å¤„ï¼Œ Restic ä½¿ç”¨ rclone ä½œä¸ºåç«¯å­˜å‚¨ã€‚

    Rclone å’Œ Restic çš„ç›¸åŒç‚¹

        ä¸¤è€…éƒ½æ˜¯åŸºäºå‘½ä»¤è¡Œçš„å¼€æºæ–‡ä»¶åŒæ­¥å’Œå¤‡ä»½å·¥å…·ã€‚

        ä¸¤è€…éƒ½æ”¯æŒå°†æ–‡ä»¶å¤‡ä»½åˆ°æœ¬åœ°ã€è¿œç¨‹æœåŠ¡å™¨æˆ–å¯¹è±¡å­˜å‚¨ã€‚

    ä¸åŒç‚¹æ˜¯

        Rclone é¢å‘çš„æ˜¯æ–‡ä»¶åŒæ­¥ï¼Œå³ä¿è¯ä¸¤ç«¯æ–‡ä»¶çš„ä¸€è‡´ï¼Œä¹Ÿå¯ä»¥å¢é‡å¤‡ä»½ã€‚
        Restic é¢å‘çš„æ˜¯æ–‡ä»¶å¤‡ä»½å’ŒåŠ å¯†ï¼Œæ–‡ä»¶å…ˆåŠ å¯†å†ä¼ è¾“å¤‡ä»½ï¼Œè€Œä¸”æ˜¯å¢é‡å¤‡ä»½ï¼Œå³æ¯æ¬¡åªå¤‡ä»½å˜åŒ–çš„éƒ¨åˆ†ã€‚

        Rclone ä»“åº“é…ç½®ä¿å­˜åœ¨æœ¬åœ°ï¼Œå¤‡ä»½çš„æ–‡ä»¶ä¼šä¿æŒåŸæ ·çš„åŒæ­¥äºå­˜å‚¨ä»“åº“ä¸­ã€‚
        Restic é…ç½®ä¿¡æ¯ç›´æ¥å†™åœ¨ä»“åº“ï¼Œåªè¦æœ‰ä»“åº“å¯†ç ï¼Œåœ¨ä»»ä½•å®‰è£…äº† Restic çš„è®¡ç®—æœºä¸Šéƒ½å¯ä»¥æ“ä½œä»“åº“ã€‚

        Rclone ä¸è®°å½•æ–‡ä»¶ç‰ˆæœ¬ï¼Œæ— æ³•æ ¹æ®æŸä¸€æ¬¡å¤‡ä»½æ‰¾å›ç‰¹å®šæ—¶é—´ç‚¹ä¸Šçš„æ–‡ä»¶ã€‚
        Restic æ¯æ¬¡å¤‡ä»½éƒ½ä¼šç”Ÿæˆä¸€ä¸ªå¿«ç…§ï¼Œè®°å½•å½“å‰æ—¶é—´ç‚¹çš„æ–‡ä»¶ç»“æ„ï¼Œå¯ä»¥æ‰¾å›ç‰¹å®šæ—¶é—´ç‚¹çš„æ–‡ä»¶ã€‚

        Rclone å¯ä»¥åœ¨é…ç½®çš„å¤šä¸ªå­˜å‚¨ç«¯ä¹‹é—´ä¼ è¾“æ–‡ä»¶ã€‚

Restic ç›¸å¯¹ rsync æœ‰ä½•ä¼˜ç‚¹

    åŠ å¯†: Restic åœ¨å¤‡ä»½æ•°æ®æ—¶ä¼šå¯¹æ•°æ®è¿›è¡ŒåŠ å¯†å¤„ç†ï¼Œç¡®ä¿å¤‡ä»½æ•°æ®çš„å®‰å…¨æ€§å’Œå®Œæ•´æ€§ï¼Œè€Œ rsync åˆ™ä¸æä¾›åŠ å¯†åŠŸèƒ½

    å¤‡ä»½å¿«ç…§: Restic ä¸ºæ¯æ¬¡å¤‡ä»½åˆ›å»ºä¸€ä¸ªå¿«ç…§ï¼Œå¯ä»¥æ¢å¤åˆ°ä»»ä½•å…ˆå‰çš„çŠ¶æ€ï¼Œè€Œ rsync åˆ™ä¸å…·å¤‡è¿™æ ·çš„æ—¶é—´ç‚¹æ¢å¤åŠŸèƒ½

    å¢é‡å¤‡ä»½: Restic æ”¯æŒå¢é‡å¤‡ä»½ï¼Œåªå¤‡ä»½è‡ªä¸Šæ¬¡å¤‡ä»½åå˜åŒ–çš„éƒ¨åˆ†ï¼Œè¿™å¯ä»¥èŠ‚çœå­˜å‚¨ç©ºé—´å’Œå¤‡ä»½æ—¶é—´ã€‚è™½ç„¶ rsync ä¹Ÿæ”¯æŒå¢é‡å¤‡ä»½ï¼Œä½† Restic çš„å¢é‡å¤‡ä»½æ›´åŠ ç²¾ç»†å’Œé«˜æ•ˆ

    æ•°æ®å»é‡: Restic åœ¨å­˜å‚¨å¤‡ä»½æ•°æ®æ—¶ä¼šè¿›è¡Œæ•°æ®å»é‡ï¼Œå¤šä¸ªå¿«ç…§ä¸­çš„ç›¸åŒæ•°æ®åªä¼šå­˜å‚¨ä¸€æ¬¡ï¼Œè¿™æ ·å¯ä»¥èŠ‚çœå­˜å‚¨ç©ºé—´

    å¯éªŒè¯æ€§: Restic å…è®¸ç”¨æˆ·éªŒè¯å¤‡ä»½æ•°æ®çš„å®Œæ•´æ€§ï¼Œç¡®ä¿å¯ä»¥æ¢å¤ã€‚è¿™æ˜¯é€šè¿‡å¤‡ä»½çš„æ ¡éªŒå’Œæ¥å®ç°çš„ï¼Œè€Œ rsync åˆ™æ²¡æœ‰è¿™æ ·çš„ç‰¹æ€§ã€‚æ‰§è¡Œ `restic check --read-data` å‘½ä»¤å¯ä»¥æ‰‹å·¥éªŒè¯ï¼Œè¿™ä¼šä¸‹è½½å­˜å‚¨åº“ä¸­çš„æ‰€æœ‰åŒ…æ–‡ä»¶è¿›è¡Œå®Œæ•´æ€§æ ¡éªŒã€‚

    å­˜å‚¨ç±»å‹: Restic æ”¯æŒå¤šç§å­˜å‚¨ç±»å‹ï¼ŒåŒ…æ‹¬æœ¬åœ°å­˜å‚¨ã€SFTPã€å„ç§äº‘å­˜å‚¨æœåŠ¡ç­‰ï¼Œè¿™ä½¿å¾—å®ƒå¯ä»¥çµæ´»åœ°å¤‡ä»½åˆ°ä¸åŒçš„ä½ç½®

    å¤‡ä»½ä»“åº“: Restic çš„å¤‡ä»½ä»“åº“æ˜¯è‡ªåŒ…å«çš„ï¼Œå¯ä»¥åœ¨ä»»ä½•å®‰è£…äº† Restic çš„è®¡ç®—æœºä¸Šæ“ä½œï¼Œè€Œ rsync åˆ™éœ€è¦åœ¨ç‰¹å®šçš„æœåŠ¡å™¨ä¸Šè¿è¡Œ

    æ•°æ®å®Œæ•´æ€§: Restic å¤‡ä»½æ—¶ä¼šå¯¹æ•°æ®è¿›è¡Œå®Œæ•´æ€§æ ¡éªŒï¼Œç¡®ä¿å¤‡ä»½æ•°æ®æœªè¢«ç¯¡æ”¹ï¼Œè€Œ rsync åˆ™ä¸»è¦å…³æ³¨æ•°æ®çš„ä¼ è¾“å’ŒåŒæ­¥

æ€»çš„æ¥è¯´ï¼ŒRestic æ˜¯ä¸“ä¸ºå¤‡ä»½è®¾è®¡çš„ï¼Œå®ƒæä¾›äº†åŠ å¯†ã€å¢é‡å¤‡ä»½ã€å¯éªŒè¯æ€§å’Œæ•°æ®å»é‡ç­‰ç‰¹æ€§ï¼Œè€Œ rsync æ›´å¤šæ˜¯ç”¨äºæ–‡ä»¶åŒæ­¥å’Œä¼ è¾“ï¼Œè™½ç„¶ä¹Ÿå¯ä»¥ç”¨äºå¤‡ä»½ï¼Œä½†åœ¨å®‰å…¨æ€§å’Œå¤‡ä»½ç®¡ç†æ–¹é¢ä¸å¦‚ Resticã€‚

#### åˆå§‹åŒ–å‚¨å­˜åº“

Restic ä¸ç›´æ¥å­˜å‚¨æ‰€æœ‰å·²é…ç½®çš„å­˜å‚¨åº“çš„åˆ—è¡¨ï¼Œå½“ä½ åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„å­˜å‚¨åº“æ—¶ï¼ŒRestic ä¼šåœ¨æŒ‡å®šçš„ä½ç½®åˆ›å»ºå­˜å‚¨åº“æ•°æ®ï¼Œä½†å®ƒä¸ä¼šåœ¨ä½ çš„ç³»ç»Ÿä¸Šåˆ›å»ºä¸€ä¸ªå…¨å±€åˆ—è¡¨æ¥è·Ÿè¸ªæ‰€æœ‰å­˜å‚¨åº“ï¼Œå­˜å‚¨åº“å¯ä»¥å­˜å‚¨åœ¨æœ¬åœ°ï¼Œä¹Ÿå¯ä»¥å­˜å‚¨åœ¨è¿œç¨‹æœåŠ¡å™¨æˆ–æœåŠ¡å™¨ä¸Š

æ³•ä¸€ï¼šåœ¨è¿œç¨‹ ssh æœåŠ¡å™¨ä¸Šåˆå§‹åŒ–å­˜å‚¨åº“

    # https://restic.readthedocs.io/en/stable/030_preparing_a_new_repo.html#sftp
    $ restic -r sftp:user@host:/srv/restic-repo init

å¦‚æœè¿æ¥çš„ sftp éœ€è¦å¯†ç ï¼Œä¼šæç¤ºè¾“å…¥ã€‚

éœ€è¦ç»™å‡ºå­˜å‚¨åº“çš„å¯†ç ï¼Œä¹‹ååœ¨ä»»ä½•å®¢æˆ·ç«¯è¿æ¥åˆ° sftp æœåŠ¡å™¨åï¼Œéƒ½å¯ä»¥ä½¿ç”¨è¯¥å¯†ç è®¿é—®è¯¥å­˜å‚¨åº“ã€‚

å¯ä½¿ç”¨ --password-file å‚æ•°æ¥è¯»å–å­˜å‚¨åº“çš„å¯†ç æ–‡ä»¶

    echo 'Lf0uHG1wVpVzsgEi' > /root/resticpasswd

æˆ–è®¾ç½®åˆ°ç¯å¢ƒå˜é‡ export RESTIC_PASSWORD='yourpassword'

    https://restic.readthedocs.io/en/stable/040_backup.html#environment-variables

æ³¨æ„ä¸æ”¯æŒ ssh æœåŠ¡å™¨çš„å¯†ç ï¼Œåªæ”¯æŒä½¿ç”¨å¯†é’¥æ–‡ä»¶ã€‚

æ³•äºŒï¼šåœ¨æœ¬åœ°ç›®å½•åˆå§‹åŒ–å­˜å‚¨åº“

    $ restic --repo /srv/restic-repo init
    enter password for new repository:
    enter password again:
    æ ¹æ®æç¤ºè¾“å…¥ä¸¤æ¬¡å¯†ç 

    æˆ–æ·»åŠ å‚æ•° --password-file= æŒ‡å®šå¯†ç æ–‡ä»¶

åˆ›å»ºæˆåŠŸåï¼Œå¯ä»¥ç”¨ tree å‘½ä»¤çœ‹ä¸‹å‚¨å­˜åº“çš„ç»“æ„

    $ tree /srv/restic-repo
    /srv/restic-repo
    â”œâ”€â”€ config
    â”œâ”€â”€ data
    â”‚   â”œâ”€â”€ 00
    â”‚   â”œâ”€â”€ 01
    â”‚   [...]
    â”‚   â”œâ”€â”€ fe
    â”‚   â””â”€â”€ ff
    â”œâ”€â”€ index
    â”œâ”€â”€ keys
    â”‚   â””â”€â”€ f5793ac470614552a179964abc17e381b20c3039486e89bf39728079d210ec57
    â”œâ”€â”€ locks
    â””â”€â”€ snapshots

    261 directories, 2 files

ä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼š

ä¸€ã€æ”¯æŒ sftp æ–¹å¼å¤‡ä»½åˆ°æœåŠ¡å™¨

æ‰§è¡Œæ•°æ®å¤‡ä»½

    restic -r sftp:bkuser@server_B:/data backup ./

æŸ¥çœ‹å¤‡ä»½

    restic -r sftp:bkuser@server_B:/data snapshots

æŸ¥çœ‹å¤‡ä»½å†…å®¹

    restic -r sftp:bkuser@server_B:/data ls 875a2a32

æ¢å¤å¿«ç…§

    restic -r sftp:bkuser@server_B:/data restore 875a2a32 -t ./

    restic -r sftp:bkuser@server_B:/data restore 875a2a32 --target ./

åˆ é™¤å¤‡ä»½

    restic -r sftp:root@106.53.117.41:/data forget 875a2a32

æ¸…ç†å¿«ç…§ï¼šforget ä¸ prune

    å¿«ç…§æ˜¯ä¼šè¶Šç§¯è¶Šå¤šçš„ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å®šæœŸ/ä¸å®šæœŸåœ°æ‰§è¡Œ autorestic forget å‘½ä»¤æ ¹æ®æˆ‘ä»¬çš„é…ç½®åˆ é™¤è¿‡æœŸçš„å¿«ç…§ï¼Œåœ¨æ‰§è¡Œçš„åŒæ—¶å¸¦ä¸Š --prune å‚æ•°å¯ä»¥ä¸€å¹¶åˆ æ‰ä¸å†è¢«ç”¨åˆ°çš„å­˜å‚¨å—ã€‚åªæœ‰è¿™äº›å—è¢«åˆ æ‰ï¼Œç©ºé—´æ‰çœŸæ­£è¢«èŠ‚çº¦äº†ï¼

è¿˜å¯ä»¥å°†å¤‡ä»½ä»“åº“æŒ‚è½½ä¸ºæ–‡ä»¶ç³»ç»Ÿï¼Œä»¥ä¾¿äºæµè§ˆå’Œæ¢å¤æ–‡ä»¶ï¼š

    restic mount -r rclone:mybackup:/backup/path /path/to/mount

äºŒã€å¯¹è±¡å­˜å‚¨å¤‡ä»½

æ”¯æŒåŸºäº s3 åè®®çš„åç«¯å¯¹è±¡å­˜å‚¨ï¼Œä¾‹å¦‚ minio æˆ–è€…è…¾è®¯/é˜¿é‡Œå¯¹è±¡å­˜å‚¨ã€‚

äº‘å­˜å‚¨å‚è§ç« èŠ‚ [äº‘å­˜å‚¨](office_great_wall think)ã€‚

å»ºè®®ä½¿ç”¨ rclone ä½œä¸ºåç«¯å­˜å‚¨ï¼Œå¯ä»¥æ”¯æŒå¸¸è§çš„å„ç§äº‘ç›˜ï¼Œè§ç« èŠ‚ [è¿œç¨‹å¤‡ä»½å½’æ¡£ RClone]ã€‚

é˜¿é‡Œäº‘å¯¹è±¡å­˜å‚¨

    $ export AWS_ACCESS_KEY_ID=<YOUR-OSS-ACCESS-KEY-ID>
    $ export AWS_SECRET_ACCESS_KEY=<YOUR-OSS-SECRET-ACCESS-KEY>

    $ ./restic -o s3.bucket-lookup=dns -o s3.region=<OSS-REGION> -r s3:https://<OSS-ENDPOINT>/<OSS-BUCKET-NAME> init
    $ restic -o s3.bucket-lookup=dns -o s3.region=oss-eu-west-1 -r s3:https://oss-eu-west-1.aliyuncs.com/bucketname init

    $ restic -o s3.bucket-lookup=dns -o oss-cn-beijing.aliyuncs.com -r s3:https://xueltestoss.oss-cn-beijing.aliyuncs.com init

    åˆ›å»º repository

    $ export AWS_ACCESS_KEY_ID=LTAIxxxxxxxdZa9
    $ export AWS_SECRET_ACCESS_KEY=XvHxxxxxxxxxxxxxxxxxJt3wb7
    $ restic -o s3.bucket-lookup=dns -o s3.region=oss-cn-beijing.aliyuncs.com -r s3:https://xueltestoss.oss-cn-beijing.aliyuncs.com/xueltestoss init

åœ¨å¤‡ä»½å‘½ä»¤ä¸­åŠ  --password-file å‚æ•°æ¥è¯»å–æ–‡æœ¬ä¸­çš„å¯†ç ï¼Œè¿™é‡Œä»¥sftpä¸ºä¾‹

    $ restic -r s3:https://oss-cn-beijing.aliyuncs.com/xueltestoss --password-file /root/resticpasswd backup /data/

å…¶ä»–æ¢å¤æ“ä½œåŸºæœ¬ä¸Šå’Œ sftp çš„ä¸€è‡´ã€‚

#### Restic + RClone å®ç°å°†å¿«ç…§ä¿å­˜åˆ°è¿œç¨‹å­˜å‚¨

restic æ”¯æŒæŠŠ rclone ä½œä¸ºåç«¯å­˜å‚¨ï¼ŒäºŒè€…ç»“åˆè¿›è¡Œå¤‡ä»½æ—¶ï¼Œrestic ä¼šåˆ›å»ºæ•°æ®çš„å¿«ç…§ï¼Œç„¶åè¿™äº›å¿«ç…§å­˜å‚¨åœ¨ rclone é…ç½®çš„è¿œç¨‹å­˜å‚¨ä¸­ã€‚

1ã€å®‰è£…é…ç½® RCloneï¼Œé…ç½®è¿œç¨‹å­˜å‚¨æ¯”å¦‚äº‘ç›˜æˆ– ssh æœåŠ¡å™¨

    $ rclone config

è¯¦è§ç« èŠ‚ [è¿œç¨‹å¤‡ä»½å½’æ¡£ RClone]ï¼Œè®°ä¸‹è¿œç¨‹å­˜å‚¨çš„åç§°å¦‚ ssh_rc1ã€‚

2ã€åˆå§‹åŒ– Restic å­˜å‚¨åº“

Restic ä¸ä½¿ç”¨å…¶ä»–åç«¯ï¼Œåˆ™éœ€è¦ä¸€äº›é¢å¤–çš„é…ç½®è¿æ¥æœåŠ¡å™¨ï¼Œä¾‹å¦‚å¯†ç æˆ–å¯†é’¥æ–‡ä»¶ã€‚ä½ å¯ä»¥ä½¿ç”¨ --password-command æä¾›å¯†ç ã€‚

åç«¯ä½¿ç”¨ rclone

    # restic init --repo rclone:ssh_jnzh:/mnt/universal/thin/sysbak
    $ restic init --repo rclone:ssh_rc1:/backup/host1/home

è¿™é‡Œ ssh_rc1 æ˜¯ä½ åœ¨ RClone ä¸­é…ç½®çš„è¿œç¨‹å­˜å‚¨çš„åç§°ï¼Œ/backup/path æ˜¯ä½ å¸Œæœ›å­˜å‚¨å¿«ç…§çš„è·¯å¾„ã€‚

3ã€é…ç½®åéªŒè¯è¿æ¥

    $ restic check

    $ restic snapshots

    $ restic ls [snapshot-id]

    $ restic stats

3ã€ä½¿ç”¨ restic æ‰§è¡Œå¤‡ä»½ï¼š

    $ restic backup /path/to/backup -r rclone:ssh_rc1:/backup/path

è¿™é‡Œ /path/to/backup æ˜¯ä½ å¸Œæœ›å¤‡ä»½çš„ç›®å½•ï¼Œrclone:ssh_rc1/backup/path æ˜¯ä½ çš„ RClone å­˜å‚¨è·¯å¾„ã€‚

4ã€ç®¡ç†å¿«ç…§

Restic ä¼šä¸ºæ¯æ¬¡å¤‡ä»½åˆ›å»ºä¸€ä¸ªå¿«ç…§ã€‚

åˆ—å‡ºæ‰€æœ‰å¿«ç…§ï¼š

    restic snapshots -r rclone:ssh_rc1:/backup/path

æ¢å¤å¤‡ä»½

    restic restore latest -r rclone:ssh_rc1:/backup/path --target /path/to/restore

åˆ é™¤è¿‡æ—¶çš„å¿«ç…§

    restic forget --keep-within 5 --keep-last 5 -r rclone:ssh_rc1:/backup/path

æŒ‚è½½ä¸ºæœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ

    restic mount -r rclone:ssh_rc1:/backup/path /path/to/mount

Restic å…è®¸ä½ å°†å¤‡ä»½ä»“åº“æŒ‚è½½ä¸ºæ–‡ä»¶ç³»ç»Ÿï¼Œä»¥ä¾¿äºæµè§ˆå’Œæ¢å¤æ–‡ä»¶

#### ä½¿ç”¨ autorestic ç®€åŒ–ä½ çš„æ“ä½œ

    https://chariri.moe/archives/122/personal-backup-restic-rclone/

restic æ˜¯ä¸€ä¸ª CLI å·¥å…·ï¼Œä½†ç¼ºäº†ä¸€äº›å…³é”®çš„åŠŸèƒ½ï¼Œå¦‚å®šæ—¶å¤‡ä»½ï¼Œä¸”å…¶æ‰€æœ‰è®¾ç½®éƒ½è¦é€šè¿‡å‘½ä»¤è¡Œå‚æ•°ç»™å®šï¼Œå¾ˆä¸æ–¹ä¾¿ã€‚autorestic æ˜¯ restic çš„ä¸€ä¸ªã€ŒåŒ…è£…å™¨ã€ï¼Œé€šè¿‡è‡ªåŠ¨è°ƒç”¨ restic çš„æ–¹æ³•ï¼ŒåŠ ä¸Šäº†é…ç½®æ–‡ä»¶ã€å®šæ—¶æ‰§è¡Œï¼ˆä¼ªï¼‰ç­‰åŠŸèƒ½ã€‚

ç®€å•åœ°è¯´ï¼Œrestic ä¼šæŠŠæ•°æ®å¤‡ä»½åˆ°ç§°ä½œã€Œå­˜å‚¨åº“ã€çš„åœ°æ–¹ï¼Œè¿™ä¸ªå­˜å‚¨åº“å°±æ˜¯ä¸€ä¸ªæœ‰ç‰¹å®šç›®å½•ç»“æ„çš„ä¸€ç»„æ–‡ä»¶ï¼Œå¯ä»¥åœ¨æœ¬åœ°ä¹Ÿå¯ä»¥åœ¨äº‘ä¸Šã€‚æ¯æ¬¡å¤‡ä»½ä¼šåˆ›å»ºä¸€ä¸ªã€Œå¿«ç…§ã€ï¼Œè¡¨ç¤ºä¸€ä¸ªå¤‡ä»½æºçš„å½“å‰æ‰€æœ‰æ•°æ®ã€‚éšç€æ—¶é—´æ¨ç§»ï¼Œå¿«ç…§ä¼šè¶Šæ¥è¶Šå¤šï¼Œä½†å¿«ç…§é—´çš„æ•°æ®æ˜¯å»é‡çš„ï¼Œå¤šä¸ªå¿«ç…§ä¸­çš„ç›¸åŒæ•°æ®åªä¼šå­˜ä¸€ä»½ï¼Œæœ‰æ•ˆèŠ‚çº¦äº†ç©ºé—´ã€‚

æˆ‘ä»¬å…ˆæŒ‰ restic çš„æ–‡æ¡£åˆå§‹åŒ–å¥½ä¸‰ä¸ªå­˜å‚¨åº“ï¼Œè®¾ç½®å¥½å¯†ç ï¼ˆå¤‡ä»½æ•°æ®ä¼šç”¨è¿™ä¸ªåŠ å¯†ï¼‰ã€‚

autorestic è¿˜å¼•å…¥äº†ä¸€äº›ä¸åŒçš„æ¦‚å¿µã€‚ã€Œlocationã€æŒ‡ä¸€ä¸ªå¤‡ä»½æºï¼Œè€Œã€Œbackendã€æŒ‡ä¸€ä¸ª repository çš„å­˜å‚¨ä½ç½®ï¼Œä»¥ä¸‹é…ç½®ä¸­çš„locationså’Œbackendså°±åæ˜ äº†è¿™ä¸€ç‚¹ã€‚

autorestic çš„é…ç½®æ–‡ä»¶ä½¿ç”¨ YAML æ ¼å¼ï¼Œå¦‚ä¸‹ç¤ºä¾‹ï¼š

```yaml
version: 2

locations:
  user_data:
    from: 'C:\Users\charlie'
    to:
      - external_hdd
      - onedrive_nju
      - onedrive_e5
    cron: '0 4 * * 0'    # å®šæ—¶æ“ä½œè®¾ç½®
    options:             # è¿™äº›éƒ½æ˜¯ä¼ ç»™ restic çš„å‚æ•°
      all:               # è¿™äº›ä¼šä¼ ç»™æ‰€æœ‰çš„ restic å‘½ä»¤
        tag: home
      forget:            # ä¼šä¼ ç»™ restic forget å‘½ä»¤ï¼Œä¸‹é¢çš„ backup åŒç†
        keep-last: 15    # æŒ‡å®šä¿ç•™å¿«ç…§çš„ç­–ç•¥
        keep-weekly: 4
        keep-monthly: 6
        keep-yearly: 2
      backup:
        use-fs-snapshot: true   # åœ¨ Windows ä¸Šä¼šç”¨ Windows VSS æ‰“ä¸€ä¸ªä¸´æ—¶çš„åˆ†åŒºå¿«ç…§ï¼Œè¿™æ ·ä¸ä¼šå—è¿è¡Œçš„è¿›ç¨‹å ç”¨ã€å†™å…¥æ•°æ®çš„å½±å“
        exclude-caches: true    # ä¸€äº›ä¸ªäººçš„æ’é™¤é€‰é¡¹
        exclude-larger-than: 2G
        exclude:
          - '*/AutoPCH'
          - '*/.vs'
          - '*/Tencent Files'
          - '*/AppData'
          - '*/NTDATA*'
          - '*/OneDrive'

backends:
  external_hdd:
    type: local                          # æœ¬åœ°çš„æºï¼Œå¾ˆç›´æ¥
    path: 'E:\Backups\UserDirectory_Restic'
    key: ''                              # æ‚¨çš„æºçš„å¯†ç ï¼Œå‰é¢ restic init æ—¶è®¾ç½®çš„ï¼Œä¸‹åŒ
  onedrive_e5:
    type: rclone
    path: 'onedrive_e5:/Backup_UserData' # æ³¨æ„è¿™é‡Œå’Œæ‰‹åŠ¨è·‘ restic ä¸åŒï¼Œä¸éœ€è¦å†™ rclone:onedrive_e5:/path/xxxxxxxxxxxx äº†
    key: ''
  onedrive_nju:
    type: rclone
    path: 'onedrive_nju:/Backup_UserData'#è¿™ç§å†™æ³•çš„æ„æ€æ˜¯ï¼Œå­˜åœ¨è¿™ä¸ª OneDrive ç©ºé—´çš„ Backup_UserData æ–‡ä»¶å¤¹ä¸‹
    key: ''

```

æ‰§è¡Œ `autorestic backup --config C:\æ‚¨çš„autoresticé…ç½®æ–‡ä»¶è·¯å¾„` æ‰§è¡Œå…¨é¢å¤‡ä»½ã€‚

#### å¡«å‘

restic çš„åŠŸèƒ½ç¼ºå¤±å’Œ bug

restic æœ‰ä¸€ä¸ª bug æ²¡æœ‰è§£å†³ã€‚åœ¨æ¥ rclone åšåç«¯çš„æ—¶å€™ï¼Œrestic æ˜¯å¼€ä¸€ä¸ªå­è¿›ç¨‹å¹¶ç”¨ stdin/stdout ç®¡é“å’Œå…¶è¿›è¡Œ HTTP é€šä¿¡ã€‚ç„¶è€Œï¼Œå¦‚æœåœ¨ä¸€ä¸ªæ§åˆ¶å°çª—å£æ‰§è¡Œ resticï¼Œrestic åœ¨ Windows ä¸Šå¼€å­è¿›ç¨‹çš„æ—¶å€™ï¼Œå­è¿›ç¨‹ä¼šè¢«æŒ‚åˆ°äº²è¿›ç¨‹æ‰€åœ¨çš„æ§åˆ¶å°ä¸Šã€‚åœ¨è¿™ä¸ªæ§åˆ¶å°ä¸Šå‘ Ctrl+C ä¼šæŠŠ SIGINT ä¿¡å·å‘åˆ°æ‰€æœ‰çš„æŒ‚æ¥çš„è¿›ç¨‹ä¸Šï¼rclone æ¥åˆ°ä¿¡å·ä¼šé©¬ä¸Šé€€å‡ºï¼Œä½† restic åœ¨é€€å‡ºçš„æ—¶å€™ä¸èƒ½é©¬ä¸Šé€€å‡ºï¼Œè¿˜è¦åˆ é™¤å¤‡ä»½ç›®æ ‡ä¸Šçš„é”ç­‰ã€‚

é—®é¢˜å°±åœ¨äºï¼Œæ­¤æ—¶ rclone å·²ç»é€€å‡ºã€stdio ç®¡é“å·²ç»å…³äº†ï¼Œrestic çš„åˆ é™¤æŒ‡ä»¤æ²¡æ³•å‘é€ã€‚restic ä¼šä¸æ–­é‡è¯•ï¼ŒæŠŠæ•´ä¸ªæ§åˆ¶å°å¡ä½ã€‚

åŒæ—¶ï¼Œrestic æœ‰ä¸€äº›æˆ‘è®¤ä¸ºåº”è¯¥æœ‰è€Œæ²¡æœ‰çš„åŠŸèƒ½ï¼Œå¦‚å‹ç¼©ã€‚ä½†æœ€é‡è¦çš„è«è¿‡äºè‡ªå®šä¹‰æ•°æ®åŒ…æ–‡ä»¶å¤§å°çš„é€‰é¡¹ã€‚

restic çš„å¤‡ä»½æ–¹æ³•æ˜¯æŠŠæ–‡ä»¶æ‹†æˆå°ç‰‡è¿›è¡Œ hashï¼Œå†æŠŠä¸€å †å°ç‰‡æ‰“æˆä¸€ä¸ªä¸ªåŒ…ä¼ åˆ°äº‘ä¸Šï¼Œä½†é»˜è®¤çš„åŒ…å¤§å°æ˜¯ 4Mã€‚è¿™å¯¹æœ¬åœ°å¤‡ä»½è¿˜å¥½ï¼Œä½†å¯¹äº‘ç«¯å¤‡ä»½å°±æ˜¯ä¸€ä¸ªç¾éš¾ --- 300G çš„æ•°æ®è‡³å°‘è¦ 76800 ä¸ªæ–‡ä»¶ï¼ æˆ‘è°ƒåˆ°äº† 32Mï¼Œæ˜¾ç¤ºå‡ºäº†è‰¯å¥½çš„æ€§èƒ½æå‡ã€‚

ç›®å‰ autorestic åœ¨å¤„ç†å•ä¸ªæºå¤‡ä»½åˆ°å¤šä¸ªå‚¨å­˜åº“çš„æƒ…å†µæ—¶ï¼Œæ˜¯é€šè¿‡å¯¹åŒä¸€ä¸ªæºå¤šæ¬¡æ‰§è¡Œ backup å‘½ä»¤ï¼Œæ¯æ¬¡å¸¦ä¸åŒçš„ repository å®ç°çš„ï¼Œè¿™å¯¹èµ„æºçš„æ¶ˆè€—æœ‰äº›å¤§ï¼Œä¹Ÿä¸èŠ‚çº¦æ—¶é—´ã€‚

å½“ restic è¢«å¼ºåˆ¶ç»“æŸ

å¦‚æœ restic å‡ºäº†é—®é¢˜ï¼ˆå¦‚ç½‘ç»œé—®é¢˜ï¼‰ï¼Œé€ æˆå…¶å¡åœ¨é‚£é‡Œä¸€ç›´è¿è¡Œï¼Œé‚£ Windows ä»»åŠ¡è®¡åˆ’ä¼šåœ¨ 3dï¼ˆæˆ‘çš„é…ç½®ï¼‰åæŠŠå…¶å¼ºåˆ¶ç»“æŸã€‚è€ƒè™‘åˆ° Windows ä¸Šæ²¡æœ‰â€œä¼˜é›…â€åœ°ç»“æŸä¸€ä¸ªçº¯å‘½ä»¤è¡Œç¨‹åºçš„æ–¹æ³•ï¼Œè¿™ä¸ªåŸºæœ¬å°±æ˜¯ç›´æ¥ç»“æŸè¿›ç¨‹äº†ã€‚é‚£ restic å°±æ¥ä¸åŠè¿›è¡Œæ¸…ç†ï¼Œé€ æˆï¼šå­˜å‚¨åº“ä¸Šçš„é”æ²¡æœ‰é‡Šæ”¾ï¼›Windows å·å½±å¤åˆ¶æœåŠ¡ (VSS) æ²¡æœ‰åˆ é™¤ï¼Œè¿™ä¼šé€ æˆ VSS åƒç©ºé—´ã€é™ä½æ€§èƒ½ï¼Œé”å½±å“ä¸‹æ¬¡è¿è¡Œã€‚

### è¿œç¨‹å¤‡ä»½å½’æ¡£ RClone

æœ€ä½³ä½¿ç”¨æ–¹å¼è§ç« èŠ‚ [restic + rclone å®ç°å°†å¿«ç…§ä¿å­˜åˆ°è¿œç¨‹å­˜å‚¨]ã€‚

Rclone (rsync for cloud storage) æ˜¯ä¸€ä¸ªäº‘å­˜å‚¨çš„ã€Œé€šç”¨å®¢æˆ·ç«¯ã€å‘½ä»¤è¡Œç¨‹åºï¼Œç”¨äºåŒæ­¥æ–‡ä»¶å’Œç›®å½•ã€‚æ”¯æŒå¸¸è§çš„ Amazon Driveã€Google Driveã€OneDriveã€Dropbox ç­‰äº‘å­˜å‚¨ï¼Œä¹Ÿæ”¯æŒä¼ ç»Ÿçš„ ftp/smb/sftp/httpã€‚

    https://rclone.org/docs/

    https://blog.csdn.net/qq_34466488/article/details/124381783

    https://p3terx.com/archives/rclone-installation-and-configuration-tutorial.html

    https://p3terx.com/archives/rclone-advanced-user-manual-common-command-parameters.html

    ä½¿ç”¨ REST API è®¿é—® onedrive https://p3terx.com/archives/rclone-connect-onedrive-with-selfbuilt-api.html

è¿˜æ”¯æŒåœ¨ä¸åŒå¯¹è±¡å­˜å‚¨ã€ç½‘ç›˜é—´åŒæ­¥ã€ä¸Šä¼ ã€ä¸‹è½½æ•°æ®ã€‚å¯ä»¥è‡ªåŠ¨åŒ–è®¿é—®å„ç§äº‘ç›˜è¿›è¡ŒåŒæ­¥ã€ä¸Šä¼ ã€ä¸‹è½½ç­‰æ“ä½œï¼Œå®ç°ç¦»çº¿ä¸‹è½½ã€æœåŠ¡å™¨å¤‡ä»½ç­‰éå¸¸å®ç”¨çš„åŠŸèƒ½ã€‚

ä¸€èˆ¬åœ¨ Windows å¹³å°ä¸‹å°† OneDrive æŒ‚è½½ä¸ºæœ¬åœ°ç¡¬ç›˜ï¼Œå¹¶ä½¿ç”¨è·¨å¹³å°çš„ Rclone GUI è¿æ¥åˆ°äº‘ç›˜ã€‚

rclone æ”¯æŒä»¥ mount æŒ‚è½½çš„ä½¿ç”¨æ–¹å¼ï¼Œéå¸¸æ–¹ä¾¿ï¼Œä½†æ˜¯ç›®å‰ä¸ç¨³å®š

    Rclone ä»¥æŒ‚è½½æ–¹å¼ä½¿ç”¨ä¼šåœ¨æœ¬åœ°ç¼“å­˜æ–‡ä»¶ï¼Œå¾€æŒ‚è½½ç›˜ç§»åŠ¨æ–‡ä»¶åªä¸è¿‡æ˜¯æœ¬åœ°è½¬ç§»äº†ä½ç½®è€Œå·²ï¼Œä¾ç„¶å ç”¨ç€æœ¬åœ°ç£ç›˜ç©ºé—´ï¼Œæ‰€ä»¥å½“ä½ ä¸æ–­çš„å¾€æŒ‚è½½ç›˜ç§»åŠ¨æ–‡ä»¶ï¼Œä½ çš„æœ¬åœ°ç£ç›˜å°±æ»¡äº†ï¼Œç§»åŠ¨æ–‡ä»¶çš„è¿‡ç¨‹ä¸­å†…å­˜å ç”¨ä¹Ÿå¾ˆå¤§ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´è¿›ç¨‹ç»ˆç»“å’Œå®•æœºã€‚

    $ rclone mount --daemon MyCloudServer:C:\ Z:

å¦‚æœæ˜¯å¤‡ä»½åˆ°ç½‘ç›˜ï¼Œéœ€è¦å…ˆè®¾ç½®ç½‘ç›˜ï¼Œè§ä¸‹é¢çš„ä¸¤ä¸ªå­ç« èŠ‚ï¼Œç„¶åå†è®¾ç½® rcloneã€‚

è®¾ç½® rcloneï¼Œä»¥è¿œç¨‹å­˜å‚¨ä¸ºå•å…ƒå»ºç«‹çš„é…ç½®é€‰é¡¹

    rclone config - è¿›å…¥äº¤äº’å¼é…ç½®é€‰é¡¹ï¼Œè¿›è¡Œæ·»åŠ ã€åˆ é™¤ã€ç®¡ç†ç½‘ç›˜ç­‰æ“ä½œ

        åç§°æ ¼å¼å»ºè®® 'è¿æ¥ç±»å‹_æœåŠ¡å™¨å'

        å¦‚æœä½¿ç”¨ ssh å¯†é’¥æ–¹å¼è¿æ¥ï¼Œæ³¨æ„é€‰æ‹©ä½¿ç”¨ key_use_agentï¼Œå¦åˆ™é»˜è®¤ falseã€‚

        å¦‚æœè¯¥ ssh ä½¿ç”¨äº† 2FAï¼Œæ³¨æ„é€‰æ‹©ä½¿ç”¨ ask_passwordï¼Œè¿™æ ·åœ¨è¿æ¥æ—¶ä¼šæç¤ºè¾“å…¥éªŒè¯ç ã€‚

    rclone config file - æ˜¾ç¤ºé…ç½®æ–‡ä»¶çš„è·¯å¾„ï¼Œä¸€èˆ¬é…ç½®æ–‡ä»¶åœ¨ ~/.config/rclone/rclone.conf

    rclone config show - æ˜¾ç¤ºé…ç½®æ–‡ä»¶ä¿¡æ¯

é…ç½®åæ“ä½œå¯¹è±¡å°±æ˜¯è¯¥è¿œç¨‹å­˜å‚¨çš„åç§°ï¼Œæ¯”å¦‚ ssh_rc1

    # https://rclone.org/sftp/
    # ç›¸å½“äºå‘½ä»¤è¡Œå‚æ•° --sftp-pass='943590'
    #   export RCLONE_SFTP_PASS='943590' æ— æ•ˆï¼šå¯¹ç«¯ä½¿ç”¨2FAï¼ŒæŠŠéªŒè¯ç è®¾ç½®åˆ°ç¯å¢ƒå˜é‡ï¼Œè¿æ¥çš„æ—¶å€™æŠ¥é”™æ— æ³•åˆ›å»ºæ–‡ä»¶ç³»ç»Ÿ
    $ rclone -vvv size ssh_rc1:/download

è¯¥è¿œç¨‹å­˜å‚¨çš„é…ç½®æ–‡ä»¶ä½äº

    $HOME/.config/rclone/rclone.conf

    ```ini
    [ssh_rc1]
    type = sftp
    host = 192.168.0.11
    user = ssss
    known_hosts_file = ~/.ssh/known_hosts
    ask_password = true
    key_use_agent = true
    shell_type = unix
    ```

å‘½ä»¤è¯­æ³•

    # æŸ¥çœ‹å¯ç”¨å‘½ä»¤
    rclone --help

    # æœ¬åœ°åˆ°ç½‘ç›˜
    rclone [åŠŸèƒ½é€‰é¡¹] <æœ¬åœ°è·¯å¾„> <ç½‘ç›˜åç§°:è·¯å¾„> [å‚æ•°] [å‚æ•°] ...

    # ç½‘ç›˜åˆ°æœ¬åœ°
    rclone [åŠŸèƒ½é€‰é¡¹] <ç½‘ç›˜åç§°:è·¯å¾„> <æœ¬åœ°è·¯å¾„> [å‚æ•°] [å‚æ•°] ...

    # ç½‘ç›˜åˆ°ç½‘ç›˜
    rclone [åŠŸèƒ½é€‰é¡¹] <ç½‘ç›˜åç§°:è·¯å¾„> <ç½‘ç›˜åç§°:è·¯å¾„> [å‚æ•°] [å‚æ•°] ...
    rclone move -v /Download Onedrive:/Download --transfers=1

rclone é€šå¸¸ç”¨äºåŒæ­¥æˆ–å¤åˆ¶ç›®å½•ã€‚ä½†æ˜¯ï¼Œå¦‚æœè¿œç¨‹æºæŒ‡å‘ä¸€ä¸ªæ–‡ä»¶ï¼Œrclone å°†åªå¤åˆ¶è¯¥æ–‡ä»¶ã€‚ç›®æ ‡è¿œç¨‹å¿…é¡»æŒ‡å‘ä¸€ä¸ªç›®å½• -ï¼Œä¸ç„¶ rclone å°†ç»™å‡ºä¸ºâ€œFailed to create file system for "remote:file": is a file not a directory â€ã€‚

ä¾‹å¦‚ï¼Œå‡è®¾æ‚¨æœ‰ä¸€ä¸ªè¿œç¨‹ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªåä¸º test.jpgï¼Œç„¶åä½ å¯ä»¥åƒè¿™æ ·å¤åˆ¶é‚£ä¸ªæ–‡ä»¶:

    $ rclone copy remote:test.jpg /tmp/download

æ–‡ä»¶ test.jpg å°†è¢«æ”¾ç½®åœ¨ /tmp/download ä¸‹é¢ã€‚

è¿™ç›¸å½“äºæŒ‡å®š

    # å½“ /tmp/files åŒ…å«å•ä¸ª test.jpg
    $ rclone copy --files-from /tmp/files remote: /tmp/download

å»ºè®®åœ¨å¤åˆ¶å•ä¸ªæ–‡ä»¶æ—¶ä½¿ç”¨ copyï¼Œè€Œä¸æ˜¯ syncã€‚ä»–ä»¬æœ‰å‡ ä¹ç›¸åŒçš„æ•ˆæœï¼Œä½† copy å°†ä½¿ç”¨æ›´å°‘çš„å†…å­˜ã€‚

å°†åä¸º sync:me çš„ç›®å½•åŒæ­¥åˆ°åä¸º remote: çš„è¿œç¨‹ï¼š

    $ rclone sync ./sync:me remote:path

æˆ–è€…

    $ rclone sync /full/path/to/sync:me remote:path

å¸¸ç”¨åŠŸèƒ½é€‰é¡¹

    rclone copy     - å¤åˆ¶
    rclone move     - ç§»åŠ¨ï¼Œå¦‚æœè¦åœ¨ç§»åŠ¨ååˆ é™¤ç©ºæºç›®å½•ï¼Œè¯·åŠ ä¸Š --delete-empty-src-dirs å‚æ•°
    rclone sync     - åŒæ­¥ï¼šå°†æºç›®å½•åŒæ­¥åˆ°ç›®æ ‡ç›®å½•ï¼Œåªæ›´æ”¹ç›®æ ‡ç›®å½•ã€‚
    rclone size     - æŸ¥çœ‹ç½‘ç›˜æ–‡ä»¶å ç”¨å¤§å°ã€‚
    rclone delete   - åˆ é™¤è·¯å¾„ä¸‹çš„æ–‡ä»¶å†…å®¹ã€‚
    rclone purge    - åˆ é™¤è·¯å¾„åŠå…¶æ‰€æœ‰æ–‡ä»¶å†…å®¹ã€‚
    rclone mkdir    - åˆ›å»ºç›®å½•ã€‚
    rclone rmdir    - åˆ é™¤ç›®å½•ã€‚
    rclone rmdirs   - åˆ é™¤æŒ‡å®šçµå¢ƒä¸‹çš„ç©ºç›®å½•ã€‚å¦‚æœåŠ ä¸Š --leave-root å‚æ•°ï¼Œåˆ™ä¸ä¼šåˆ é™¤æ ¹ç›®å½•ã€‚
    rclone check    - æ£€æŸ¥æºå’Œç›®çš„åœ°å€æ•°æ®æ˜¯å¦åŒ¹é…ã€‚
    rclone ls       - åˆ—å‡ºæŒ‡å®šè·¯å¾„ä¸‹çš„æ‰€æœ‰çš„æ–‡ä»¶ä»¥åŠæ–‡ä»¶å¤§å°å’Œè·¯å¾„ã€‚
    rclone lsl      - æ¯”ä¸Šé¢å¤šä¸€ä¸ªæ˜¾ç¤ºä¸Šä¼ æ—¶é—´ã€‚
    rclone lsd      - åˆ—å‡ºæŒ‡å®šè·¯å¾„ä¸‹çš„ç›®å½•
    rclone lsf      - åˆ—å‡ºæŒ‡å®šè·¯å¾„ä¸‹çš„ç›®å½•å’Œæ–‡ä»¶

å¸¸ç”¨å‚æ•°

    -n = --dry-run - æµ‹è¯•è¿è¡Œï¼Œç”¨æ¥æŸ¥çœ‹ rclone åœ¨å®é™…è¿è¡Œä¸­ä¼šè¿›è¡Œå“ªäº›æ“ä½œã€‚

    -P = --progress - æ˜¾ç¤ºå®æ—¶ä¼ è¾“è¿›åº¦ï¼Œ500mS åˆ·æ–°ä¸€æ¬¡ï¼Œå¦åˆ™é»˜è®¤ 1 åˆ†é’Ÿåˆ·æ–°ä¸€æ¬¡ã€‚

    --cache-chunk-size SizeSuffi - å—çš„å¤§å°ï¼Œé»˜è®¤5Mï¼Œç†è®ºä¸Šæ˜¯è¶Šå¤§ä¸Šä¼ é€Ÿåº¦è¶Šå¿«ï¼ŒåŒæ—¶å ç”¨å†…å­˜ä¹Ÿè¶Šå¤šã€‚å¦‚æœè®¾ç½®å¾—å¤ªå¤§ï¼Œå¯èƒ½ä¼šå¯¼è‡´è¿›ç¨‹ä¸­æ–­ã€‚

    --cache-chunk-total-size SizeSuffix - å—å¯ä»¥åœ¨æœ¬åœ°ç£ç›˜ä¸Šå ç”¨çš„æ€»å¤§å°ï¼Œé»˜è®¤10Gã€‚

    --transfers=N - å¹¶è¡Œæ–‡ä»¶æ•°ï¼Œé»˜è®¤ä¸º4ã€‚åœ¨æ¯”è¾ƒå°çš„å†…å­˜çš„VPSä¸Šå»ºè®®è°ƒå°è¿™ä¸ªå‚æ•°ï¼Œæ¯”å¦‚128Mçš„å°é¸¡ä¸Šä½¿ç”¨å»ºè®®è®¾ç½®ä¸º1ã€‚

    --config string - æŒ‡å®šé…ç½®æ–‡ä»¶è·¯å¾„ï¼Œstringä¸ºé…ç½®æ–‡ä»¶è·¯å¾„ã€‚

    --ignore-errors - è·³è¿‡é”™è¯¯ã€‚æ¯”å¦‚ OneDrive åœ¨ä¼ äº†æŸäº›ç‰¹æ®Šæ–‡ä»¶åä¼šæç¤ºFailed to copy: failed to open source object: malwareDetected: Malware detectedï¼Œè¿™ä¼šå¯¼è‡´åç»­çš„ä¼ è¾“ä»»åŠ¡è¢«ç»ˆæ­¢æ‰ï¼Œæ­¤æ—¶å°±å¯ä»¥åŠ ä¸Šè¿™ä¸ªå‚æ•°è·³è¿‡é”™è¯¯ã€‚ä½†éœ€è¦æ³¨æ„ RCLONE çš„é€€å‡ºçŠ¶æ€ç ä¸ä¼šä¸º0ã€‚

    rclone æœ‰ 4 ä¸ªçº§åˆ«çš„æ—¥å¿—è®°å½•ï¼ŒERRORï¼ŒNOTICEï¼ŒINFO å’Œ DEBUGã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œrclone å°†ç”Ÿæˆ ERROR å’Œ NOTICE çº§åˆ«æ¶ˆæ¯ã€‚

    -q - rcloneå°†ä»…ç”Ÿæˆ ERROR æ¶ˆæ¯ã€‚
    -v - rcloneå°†ç”Ÿæˆ ERRORï¼ŒNOTICE å’Œ INFO æ¶ˆæ¯ï¼Œæ¨èæ­¤é¡¹ã€‚
    -vv - rclone å°†ç”Ÿæˆ ERRORï¼ŒNOTICEï¼ŒINFOå’Œ DEBUG æ¶ˆæ¯ã€‚
    --log-level LEVEL - æ ‡å¿—æ§åˆ¶æ—¥å¿—çº§åˆ«ã€‚

è¾“å‡ºæ—¥å¿—åˆ°æ–‡ä»¶

    ä½¿ç”¨ --log-file=FILE é€‰é¡¹ï¼Œrclone ä¼šå°† Errorï¼ŒInfo å’Œ Debug æ¶ˆæ¯ä»¥åŠæ ‡å‡†é”™è¯¯é‡å®šå‘åˆ° FILEï¼Œè¿™é‡Œçš„ FILE æ˜¯ä½ æŒ‡å®šçš„æ—¥å¿—æ–‡ä»¶è·¯å¾„ã€‚

    å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨ç³»ç»Ÿçš„æŒ‡å‘å‘½ä»¤ï¼Œæ¯”å¦‚ï¼š

        $ rclone sync -v Onedrive:/DRIVEX Gdrive:/DRIVEX > "~/DRIVEX.log" 2>&1

æ–‡ä»¶è¿‡æ»¤

    --exclude - æ’é™¤æ–‡ä»¶æˆ–ç›®å½•ã€‚

    --include - åŒ…å«æ–‡ä»¶æˆ–ç›®å½•ã€‚

    --filter - æ–‡ä»¶è¿‡æ»¤è§„åˆ™ï¼Œç›¸å½“äºä¸Šé¢ä¸¤ä¸ªé€‰é¡¹çš„å…¶å®ƒä½¿ç”¨æ–¹å¼ã€‚åŒ…å«è§„åˆ™ä»¥ + å¼€å¤´ï¼Œæ’é™¤è§„åˆ™ä»¥ - å¼€å¤´ã€‚

æ–‡ä»¶ç±»å‹è¿‡æ»¤

    æ¯”å¦‚ --exclude "*.bak"ã€--filter "- *.bak"ï¼Œæ’é™¤æ‰€æœ‰ bak æ–‡ä»¶ã€‚ä¹Ÿå¯ä»¥å†™ä½œã€‚

    æ¯”å¦‚ --include "*.{png,jpg}"ã€--filter "+ *.{png,jpg}"ï¼ŒåŒ…å«æ‰€æœ‰ png å’Œ jpg æ–‡ä»¶ï¼Œæ’é™¤å…¶ä»–æ–‡ä»¶ã€‚

    --delete-excluded åˆ é™¤æ’é™¤çš„æ–‡ä»¶ã€‚éœ€é…åˆè¿‡æ»¤å‚æ•°ä½¿ç”¨ï¼Œå¦åˆ™æ— æ•ˆã€‚

ç›®å½•è¿‡æ»¤éœ€è¦åœ¨ç›®å½•åç§°åé¢åŠ ä¸Š /ï¼Œå¦åˆ™ä¼šè¢«å½“åšæ–‡ä»¶è¿›è¡ŒåŒ¹é…ã€‚ä»¥ / å¼€å¤´åªä¼šåŒ¹é…æ ¹ç›®å½•ï¼ˆæŒ‡å®šç›®å½•ä¸‹ï¼‰ï¼Œå¦åˆ™åŒ¹é…æ‰€ç›®å½•ã€‚è¿™åŒæ ·é€‚ç”¨äºæ–‡ä»¶ã€‚

    --exclude ".git/" æ’é™¤æ‰€æœ‰ç›®å½•ä¸‹çš„.git ç›®å½•ã€‚

    --exclude "/.git/" åªæ’é™¤æ ¹ç›®å½•ä¸‹çš„.git ç›®å½•ã€‚

    --exclude "{Video,Software}/" æ’é™¤æ‰€æœ‰ç›®å½•ä¸‹çš„ Video å’Œ Software ç›®å½•ã€‚

    --exclude "/{Video,Software}/" åªæ’é™¤æ ¹ç›®å½•ä¸‹çš„ Video å’Œ Software ç›®å½•ã€‚

    --include "/{Video,Software}/**" ä»…åŒ…å«æ ¹ç›®å½•ä¸‹çš„ Video å’Œ Software ç›®å½•çš„æ‰€æœ‰å†…å®¹ã€‚

è¿‡æ»¤è§„åˆ™æ–‡ä»¶

    https://rclone.org/filtering/

å‘½ä»¤è¡Œä½¿ç”¨å‚æ•° --filter-from <è§„åˆ™æ–‡ä»¶> ä»æ–‡ä»¶æ·»åŠ åŒ…å« / æ’é™¤è§„åˆ™ã€‚æ¯”å¦‚ --filter-from filter-file.txtã€‚

è¿‡æ»¤è§„åˆ™æ–‡ä»¶ç¤ºä¾‹ï¼š

    - secret*.jpg
    + *.jpg
    + *.png
    + file2.avi
    - /dir/Trash/**
    + /dir/**
    - *

rclone ä¸­çš„æ¯ä¸ªå‘½ä»¤è¡Œå‚æ•°éƒ½å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡è®¾ç½®ï¼š

ç¯å¢ƒå˜é‡çš„åç§°å¯ä»¥é€šè¿‡é•¿é€‰é¡¹åç§°è¿›è¡Œè½¬æ¢ï¼Œåˆ é™¤ -- å‰ç¼€ï¼Œæ›´æ”¹ - ä¸º_ï¼Œå¤§å†™å¹¶æ·»åŠ å‰ç¼€ RCLONE_ã€‚ç¯å¢ƒå˜é‡çš„ä¼˜å…ˆçº§ä¼šä½äºå‘½ä»¤è¡Œé€‰é¡¹ï¼Œå³é€šè¿‡å‘½ä»¤è¡Œè¿½åŠ ç›¸åº”çš„é€‰é¡¹æ—¶ä¼šè¦†ç›–ç¯å¢ƒå˜é‡è®¾å®šçš„å€¼ã€‚

æ¯”å¦‚è®¾ç½®æœ€å°ä¸Šä¼ å¤§å° --min-size 50ï¼Œä½¿ç”¨ç¯å¢ƒå˜é‡æ˜¯ RCLONE_MIN_SIZE=50ã€‚å½“ç¯å¢ƒå˜é‡è®¾ç½®åï¼Œåœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨ --min-size 100ï¼Œé‚£ä¹ˆæ­¤æ—¶ç¯å¢ƒå˜é‡çš„å€¼å°±ä¼šè¢«è¦†ç›–ã€‚

å¸¸ç”¨ç¯å¢ƒå˜é‡

    RCLONE_CONFIG - è‡ªå®šä¹‰é…ç½®æ–‡ä»¶è·¯å¾„
    RCLONE_CONFIG_PASS - è‹¥ rclone è¿›è¡Œäº†åŠ å¯†è®¾ç½®ï¼ŒæŠŠæ­¤ç¯å¢ƒå˜é‡è®¾ç½®ä¸ºå¯†ç ï¼Œå¯è‡ªåŠ¨è§£å¯†é…ç½®æ–‡ä»¶ã€‚
    RCLONE_RETRIES - ä¸Šä¼ å¤±è´¥é‡è¯•æ¬¡æ•°ï¼Œé»˜è®¤ 3 æ¬¡
    RCLONE_RETRIES_SLEEP - ä¸Šä¼ å¤±è´¥é‡è¯•ç­‰å¾…æ—¶é—´ï¼Œé»˜è®¤ç¦ç”¨ï¼Œå•ä½sã€mã€håˆ†åˆ«ä»£è¡¨ç§’ã€åˆ†é’Ÿã€å°æ—¶ã€‚
    CLONE_TRANSFERS - å¹¶è¡Œä¸Šä¼ æ–‡ä»¶æ•°ã€‚
    RCLONE_CACHE_CHUNK_SIZE - å—çš„å¤§å°ï¼Œé»˜è®¤5Mï¼Œç†è®ºä¸Šæ˜¯è¶Šå¤§ä¸Šä¼ é€Ÿåº¦è¶Šå¿«ï¼ŒåŒæ—¶å ç”¨å†…å­˜ä¹Ÿè¶Šå¤šã€‚å¦‚æœè®¾ç½®å¾—å¤ªå¤§ï¼Œå¯èƒ½ä¼šå¯¼è‡´è¿›ç¨‹ä¸­æ–­ã€‚
    RCLONE_CACHE_CHUNK_TOTAL_SIZE - å—å¯ä»¥åœ¨æœ¬åœ°ç£ç›˜ä¸Šå ç”¨çš„æ€»å¤§å°ï¼Œé»˜è®¤10Gã€‚
    RCLONE_IGNORE_ERRORS=true - è·³è¿‡é”™è¯¯ã€‚

#### Rclone è¿æ¥ OneDrive

è·å– token

åœ¨æœ¬åœ° WinÂ­dows ç”µè„‘ä¸Šä¸‹è½½ rcloneï¼Œç„¶åè§£å‹å‡ºæ¥ï¼Œè§£å‹åè¿›å…¥æ–‡ä»¶å¤¹ï¼Œåœ¨èµ„æºç®¡ç†å™¨åœ°å€æ è¾“å…¥ cmdï¼Œå›è½¦å°±ä¼šåœ¨å½“å‰è·¯å¾„æ‰“å¼€å‘½ä»¤æç¤ºç¬¦ã€‚è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š

    rclone authorize "onedrive"

æ¥ä¸‹æ¥ä¼šå¼¹å‡ºæµè§ˆå™¨ï¼Œè¦æ±‚ä½ ç™»å½•è´¦å·è¿›è¡Œæˆæƒã€‚æˆæƒå®Œåå‘½ä»¤æç¤ºç¬¦çª—å£ä¼šå‡ºç°ä»¥ä¸‹ä¿¡æ¯ï¼š

    If your browser doesn't open automatically go to the following link: http://127.0.0.1:53682/auth
    Log in and authorize rclone for access
    Waiting for code...
    Got code
    Paste the following into your remote machine --->
    {"access_token":"xxxxxxxx"}  # æ³¨æ„!å¤åˆ¶{xxxxxxxx}æ•´ä¸ªå†…å®¹ï¼Œå¹¶ä¿å­˜å¥½ï¼Œåé¢éœ€è¦ç”¨åˆ°
    <---End paste

é…ç½® Rclone

è¾“å…¥ rclone config å‘½ä»¤ï¼Œä¼šå‡ºç°ä»¥ä¸‹ä¿¡æ¯ï¼Œå‚ç…§ä¸‹é¢çš„æ³¨é‡Šè¿›è¡Œæ“ä½œã€‚

    e) Edit existing remote
    n) New remote
    d) Delete remote
    r) Rename remote
    c) Copy remote
    s) Set configuration password
    q) Quit config
    e/n/d/r/c/s/q> n  # é€‰æ‹©nï¼Œæ–°å»º
    name> P3TERX   # è¾“å…¥åç§°ï¼Œç±»ä¼¼äºæ ‡ç­¾ï¼Œç”¨äºåŒºåˆ†ä¸åŒçš„ç½‘ç›˜ã€‚
    Type of storage to configure.
    Enter a string value. Press Enter for the default ("").
    Choose a number from below, or type in your own value
    1 / A stackable unification remote, which can appear to merge the contents of several remotes
    \ "union"
    2 / Alias for a existing remote
    \ "alias"
    3 / Amazon Drive
    \ "amazon cloud drive"
    4 / Amazon S3 Compliant Storage Providers (AWS, Ceph, Dreamhost, IBM COS, Minio)
    \ "s3"
    5 / Backblaze B2
    \ "b2"
    6 / Box
    \ "box"
    7 / Cache a remote
    \ "cache"
    8 / Dropbox
    \ "dropbox"
    9 / Encrypt/Decrypt a remote
    \ "crypt"
    10 / FTP Connection
    \ "ftp"
    11 / Google Cloud Storage (this is not Google Drive)
    \ "google cloud storage"
    12 / Google Drive
    \ "drive"
    13 / Hubic
    \ "hubic"
    14 / JottaCloud
    \ "jottacloud"
    15 / Local Disk
    \ "local"
    16 / Mega
    \ "mega"
    17 / Microsoft Azure Blob Storage
    \ "azureblob"
    18 / Microsoft OneDrive
    \ "onedrive"
    19 / OpenDrive
    \ "opendrive"
    20 / Openstack Swift (Rackspace Cloud Files, Memset Memstore, OVH)
    \ "swift"
    21 / Pcloud
    \ "pcloud"
    22 / QingCloud Object Storage
    \ "qingstor"
    23 / SSH/SFTP Connection
    \ "sftp"
    24 / Webdav
    \ "webdav"
    25 / Yandex Disk
    \ "yandex"
    26 / http Connection
    \ "http"
    Storage> 18  # é€‰æ‹©18ï¼ŒMicrosoft OneDrive
    ** See help for onedrive backend at: https://rclone.org/onedrive/ **

    Microsoft App Client Id
    Leave blank normally.
    Enter a string value. Press Enter for the default ("").
    client_id>   # ç•™ç©ºï¼Œå›è½¦
    Microsoft App Client Secret
    Leave blank normally.
    Enter a string value. Press Enter for the default ("").
    client_secret>   # ç•™ç©ºï¼Œå›è½¦
    Edit advanced config? (y/n)
    y) Yes
    n) No
    y/n> n  # é€‰n
    Remote config
    Use auto config?
    * Say Y if not sure
    * Say N if you are working on a remote or headless machine
    y) Yes
    n) No
    y/n> n  # é€‰n
    For this to work, you will need rclone available on a machine that has a web browser available.
    Execute the following on your machine:
        rclone authorize "onedrive"
    Then paste the result below:
    result> {"XXXXXXXX"}  # ä¸Šé¢ä¿å­˜çš„tokenå¤åˆ¶åˆ°è¿™é‡Œ
    2018/10/31 19:54:06 ERROR : Failed to save new token in config file: section 'P3TERX' not found
    Choose a number from below, or type in an existing value
    1 / OneDrive Personal or Business
    \ "onedrive"
    2 / Root Sharepoint site
    \ "sharepoint"
    3 / Type in driveID
    \ "driveid"
    4 / Type in SiteID
    \ "siteid"
    5 / Search a Sharepoint site
    \ "search"
    Your choice> 1  # è¿™é‡Œé—®ä½ è¦é€‰æ‹©çš„ç±»å‹ï¼Œé€‰1
    Found 1 drives, please select the one you want to use:
    0: OneDrive (business)
    Chose drive to use:> 0  # ç¨‹åºæ‰¾åˆ°ç½‘ç›˜ï¼Œè¿™é‡Œç¼–å·æ˜¯0ï¼Œå°±é€‰æ‹©0
    Found drive 'root' of type 'business', URL: https://xxxxxx-my.sharepoint.com/personal/xxxxxxx/Documents
    Is that okay?
    y) Yes
    n) No
    y/n> y  # é€‰y
    --------------------
    [P3TERX]
    type = onedrive
    token = {"XXXXXXXX"}
    drive_id = XXXXXXXXX
    drive_type = business
    --------------------
    y) Yes this is OK
    e) Edit this remote
    d) Delete this remote
    y/e/d> y  # é€‰y
    Current remotes:

    Name                 Type
    ====                 ====
    P3TERX               onedrive

    e) Edit existing remote
    n) New remote
    d) Delete remote
    r) Rename remote
    c) Copy remote
    s) Set configuration password
    q) Quit config
    e/n/d/r/c/s/q> q  # é€‰qï¼Œé€€å‡º

è‡³æ­¤ï¼ŒRclone å·²æˆåŠŸè¿æ¥åˆ°äº† OneDrive ç½‘ç›˜ã€‚

#### Rclone è¿æ¥ Google Drive

ä¸ OneDrive ä¸åŒçš„æ˜¯ï¼ŒGoogle Drive ä¸éœ€è¦æœ¬åœ° WinÂ­dows å®¢æˆ·ç«¯é¢„å…ˆè¿›è¡Œæˆæƒè·å– toÂ­kenï¼Œè€Œæ˜¯åœ¨é…ç½®è¿‡ç¨‹ä¸­è¿›è¡Œæˆæƒã€‚

è¾“å…¥ rclone config å‘½ä»¤ï¼Œä¼šå‡ºç°ä»¥ä¸‹ä¿¡æ¯ï¼Œå‚ç…§ä¸‹é¢çš„æ³¨é‡Šè¿›è¡Œæ“ä½œã€‚

    e) Edit existing remote
    n) New remote
    d) Delete remote
    r) Rename remote
    c) Copy remote
    s) Set configuration password
    q) Quit config
    e/n/d/r/c/s/q> n  # é€‰æ‹©nï¼Œæ–°å»º
    name> Google  # è¾“å…¥åç§°ï¼Œç±»ä¼¼äºæ ‡ç­¾ï¼Œç”¨äºåŒºåˆ†ä¸åŒçš„ç½‘ç›˜ã€‚
    Type of storage to configure.
    Enter a string value. Press Enter for the default ("").
    Choose a number from below, or type in your own value
    1 / A stackable unification remote, which can appear to merge the contents of several remotes
    \ "union"
    2 / Alias for a existing remote
    \ "alias"
    3 / Amazon Drive
    \ "amazon cloud drive"
    4 / Amazon S3 Compliant Storage Providers (AWS, Ceph, Dreamhost, IBM COS, Minio)
    \ "s3"
    5 / Backblaze B2
    \ "b2"
    6 / Box
    \ "box"
    7 / Cache a remote
    \ "cache"
    8 / Dropbox
    \ "dropbox"
    9 / Encrypt/Decrypt a remote
    \ "crypt"
    10 / FTP Connection
    \ "ftp"
    11 / Google Cloud Storage (this is not Google Drive)
    \ "google cloud storage"
    12 / Google Drive
    \ "drive"
    13 / Hubic
    \ "hubic"
    14 / JottaCloud
    \ "jottacloud"
    15 / Local Disk
    \ "local"
    16 / Mega
    \ "mega"
    17 / Microsoft Azure Blob Storage
    \ "azureblob"
    18 / Microsoft OneDrive
    \ "onedrive"
    19 / OpenDrive
    \ "opendrive"
    20 / Openstack Swift (Rackspace Cloud Files, Memset Memstore, OVH)
    \ "swift"
    21 / Pcloud
    \ "pcloud"
    22 / QingCloud Object Storage
    \ "qingstor"
    23 / SSH/SFTP Connection
    \ "sftp"
    24 / Webdav
    \ "webdav"
    25 / Yandex Disk
    \ "yandex"
    26 / http Connection
    \ "http"
    Storage> 12  # é€‰æ‹©12ï¼ŒGoogle Drive
    ** See help for drive backend at: https://rclone.org/drive/ **

    Google Application Client Id
    Leave blank normally.
    Enter a string value. Press Enter for the default ("").
    client_id>  # ç•™ç©ºï¼Œå›è½¦
    Google Application Client Secret
    Leave blank normally.
    Enter a string value. Press Enter for the default ("").
    client_secret>  # ç•™ç©ºï¼Œå›è½¦
    Scope that rclone should use when requesting access from drive.
    Enter a string value. Press Enter for the default ("").
    Choose a number from below, or type in your own value
    1 / Full access all files, excluding Application Data Folder.
    \ "drive"
    2 / Read-only access to file metadata and file contents.
    \ "drive.readonly"
    / Access to files created by rclone only.
    3 | These are visible in the drive website.
    | File authorization is revoked when the user deauthorizes the app.
    \ "drive.file"
    / Allows read and write access to the Application Data folder.
    4 | This is not visible in the drive website.
    \ "drive.appfolder"
    / Allows read-only access to file metadata but
    5 | does not allow any access to read or download file content.
    \ "drive.metadata.readonly"
    scope> 1
    ID of the root folder
    Leave blank normally.
    Fill in to access "Computers" folders. (see docs).
    Enter a string value. Press Enter for the default ("").
    root_folder_id>  # ç•™ç©ºï¼Œå›è½¦
    Service Account Credentials JSON file path
    Leave blank normally.
    Needed only if you want use SA instead of interactive login.
    Enter a string value. Press Enter for the default ("").
    service_account_file>
    Edit advanced config? (y/n)
    y) Yes
    n) No
    y/n> n
    Remote config
    Use auto config?
    * Say Y if not sure
    * Say N if you are working on a remote or headless machine or Y didn't work
    y) Yes
    n) No
    y/n> n
    If your browser doesn't open automatically go to the following link: https://accounts.google.com/o/oauth2/auth?access_type=offline&client_id=XXXXXXXXXXX.apps.googleusercontent.com&redirect_uri=urn%3Aietf%3Awg%3Aoauth%3A2.0%3Aoob&response_type=code&scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fdrive&state=XXXXXXXXXXXXXXXXXXXX
    Log in and authorize rclone for access  # ä¼šå¼¹å‡ºæµè§ˆå™¨ï¼Œè¦æ±‚ä½ ç™»å½•è´¦å·è¿›è¡Œæˆæƒã€‚å¦‚æœæ²¡æœ‰å¼¹å‡ºï¼Œå¤åˆ¶ä¸Šé¢çš„é“¾æ¥åˆ°æµè§ˆå™¨ä¸­æ‰“å¼€è¿›è¡Œæˆæƒã€‚
    Enter verification code>  # åœ¨è¿™é‡Œè¾“å…¥ç½‘é¡µä¸Šæ˜¾ç¤ºçš„éªŒè¯ç 

    Configure this as a team drive?
    y) Yes
    n) No
    y/n> y
    Fetching team drive list...
    No team drives found in your account--------------------
    [Google]
    type = drive
    scope = drive
    token = {"access_token":"XXXXXXXXXXXXXXXXXXXXX"}
    --------------------
    y) Yes this is OK
    e) Edit this remote
    d) Delete this remote
    y/e/d> y
    Current remotes:

    Name                 Type
    ====                 ====
    Google               drive
    P3TERX               onedrive

    e) Edit existing remote
    n) New remote
    d) Delete remote
    r) Rename remote
    c) Copy remote
    s) Set configuration password
    q) Quit config
    e/n/d/r/c/s/q> q

è‡³æ­¤ï¼ŒRclone å·²æˆåŠŸè¿æ¥åˆ°äº† Google Drive ç½‘ç›˜ã€‚

### åœ¨å½“å‰ç›®å½•å¯åŠ¨ä¸€ä¸ªç®€å•çš„httpæœåŠ¡å™¨

Python 2ï¼Œä½¿ç”¨ç«¯å£ 7777

    python -m SimpleHTTPServer 7777

Python 3ï¼Œæ³¨æ„åŒ…åå˜äº†ï¼Œä½¿ç”¨ç«¯å£ 7777

    python3 -m http.server 7777

### å­—ç¬¦ç»ˆç«¯ä¸‹çš„ä¸€äº›å°ç©å…·å¦‚ figletã€cmatrix ç­‰

    ç¬¦å·å­—ç¬¦ https://www.webfx.com/tools/emoji-cheat-sheet/

    unicodeç¼–ç  http://www.unicode.org/emoji/charts/full-emoji-list.html

    emoji å¤§å…¨ https://emojipedia.org/

        unicode emoji https://unicode.org/emoji/charts/full-emoji-list.html

        git emoji https://blog.csdn.net/li1669852599/article/details/113336076

ç»™å­—ç¬¦æ¸²æŸ“é¢œè‰² lolcat/aafire

æ˜¾ç¤ºå¤©æ°”

    curl -s --connect-timeout 3 -m 5 http://wttr.in/newyork

å°ç«è½¦sl

    sudo apt install sl

æ°´æ—ç®±

    asciiaquarium

ç‰›è¯´

    # cowsay
    # cowsay -l
    # echo "Hello world" |cowthink
    # echo "Hello world" |cowsay -f www -d
    sudo apt install cowsay

    æ ¼è¨€å¤§å…¨

        sudo apt install fortunes

    éšæœºåŒ–é€‰å–åŠ¨ç‰©çš„è„šæœ¬ï¼š

    ```bash
    # https://zhuanlan.zhihu.com/p/81867213
    #!/bin/bash

    function rand(){
        min=$1
        max=$(($2-$min+1))
        echo $(($RANDOM%$max+$min))
    }

    animal=$(ls /usr/share/cowsay/cows | sed 's/\.cow//' | shuf -n 1)
    fortunes[0]='fortune -e fortunes | cowsay'
    fortunes[1]='fortune -e literature | cowsay'
    fortunes[2]='fortune -e riddles | cowsay'
    fortunes[3]='fortune -e chinese | cowsay'
    fortunes[4]='fortune -e tang300 | cowsay -n'
    fortunes[5]='fortune -e song100 | cowsay -n'
    index=$(rand 0 5)
    cmd="${fortunes[$index]} -f $animal | lolcat"
    eval $cmd
    ```

å­—ç¬¦ç”» figlet + toilet

    sudo apt install -y figlet toilet

    # figletå­—ä½“ä½ç½® /usr/share/figlet
    # å‘½ä»¤ showfigfonts æŸ¥çœ‹figletå­—ä½“

    # å®‰è£… toilet åï¼Œfiglet å¯ä½¿ç”¨æ›´å¥½çœ‹çš„ tlf(toilet UTF-8) å­—ä½“
    for tlf in $(ls /usr/share/figlet/*.tlf)
    do
        echo -e "$(basename ${tlf} :) \n"
        figlet -f $tlf 12:34:56:78:90:abc:ABC
    done

    é’Ÿè¡¨

        # watch -n1 "date '+%D%n%T'|figlet -k"
        $ watch -n1 "date '+%D %T'|figlet -f future.tlf -w 80"

        # æ¸©åº¦åŠé’Ÿè¡¨ï¼šéœ€è¦å°è¯•0æˆ–1 /sys/class/hwmon/hwmon1/temp1_input
        $ watch -n1 "(date '+%T'; (echo 'scale=1;' |tr '\n' ' '; (cat /sys/class/thermal/thermal_zone0/temp |tr '\n' ' '; echo '/ 1000') ) |bc; echo C) |tr '\n' ' '|figlet -f future.tlf -w 80"

å­—ç¬¦ç”» boxes

    https://zhuanlan.zhihu.com/p/52558937

hollywood è®©ä½ çš„ tmux è·‘æ»¡å„ç§å¤¸å¼ ç¨‹åºï¼Œå°±åƒå¥½è±åçš„ç§‘å¹»ç”µå½±

    sudo apt install hollywood

    æ‰“å¼€äº†å¾ˆå¤šå°å·¥å…·ï¼Œåˆ·å¤ªå¿« cpu éƒ½é£™èµ·æ¥äº†ï¼Œè‡ªå·±çœ‹ä»£ç è°ƒå§ã€‚

        å°å·¥å…·åœ¨ /usr/lib/hollywood/ ç›®å½•ä¸‹ï¼Œä¸»è„šæœ¬åœ¨ /usr/games/hollywood
        https://github.com/dustinkirkland/hollywood

+ matrix å­—ç¬¦å±ä¿

    å‚è€ƒ

        https://magiclen.org/cmatrix/
            https://github.com/abishekvashok/cmatrix

    Debian / Ubuntu å®‰è£…å‘è¡Œç‰ˆ

        sudo apt install cmatrix

        cmatrix -ba

        Ctrl + c æˆ– q é€€å‡º

    Debian è‡ªç¼–æœ€æ–°ç‰ˆ

        ä¸‹è½½æºä»£ç 

            git clone --depth=1 https://github.com/abishekvashok/cmatrix

        å®‰è£…ä¾èµ–åº“

            sudo apt install automake libncurses-dev

        Using configure (recommended for most linux/mingw users)

            autoreconf -i  # skip if using released tarball
            ./configure
            make

            # ä¸è¦ sudo make installï¼Œå°½é‡æ‰“åŒ…ç„¶åç”¨åŒ…ç®¡ç†å™¨å®‰è£…
            $ sudo make install  # è¿™æ ·è£…å®Œäº† cmatrix æ–‡ä»¶æ˜¯ root å±ç»„
            make[1]: Entering directory '/pcode/cmatrix'
            /usr/bin/mkdir -p '/usr/local/bin'
            /usr/bin/install -c cmatrix '/usr/local/bin'
            Installing matrix fonts in /usr/share/consolefonts...
            /usr/bin/mkdir -p '/usr/local/share/man/man1'
            /usr/bin/install -c -m 644 cmatrix.1 '/usr/local/share/man/man1'
            make[1]: Leaving directory '/pcode/cmatrix'

        /usr/local/bin/cmatrix -sbau8

    CentOs éœ€è¦è‡ªè¡Œç¼–è¯‘

        <https://thornelabs.net/posts/linux-install-cmatrix-from-rpm-deb-xz-or-source.html>

        ä¸‹è½½æºä»£ç 

            git clone --depth=1 https://github.com/abishekvashok/cmatrix

        å®‰è£…ä¾èµ–åº“

            sudo yum install -y gcc make autoconf automake ncurses-devel

        Generate aclocal.m4 man page:

            aclocal

        Generate configuration scripts:

            autoconf

        Generate Makefile.in for configure from Makefile.am:

            automake -a

        Configure, make, and make install the binary:

            ./configure
            make
            sudo make install

Windows ç‰ˆ

    https://www.catch22.net/projects/matrix/
        https://github.com/strobejb/matrix

    https://github.com/OscarL/MatrixSS

ç±»ä¼¼ cmatrixï¼Œå®ç°äº†ç”µå½± Sneakers é‡Œå­—ç¬¦æ•ˆæœ

    https://github.com/bartobri/no-more-secrets

    æŠŠç®¡é“ä¼ è¿‡æ¥çš„å­—ç¬¦å˜æ¢ä¸€ç•ªï¼Œç„¶åæ‰å‘ˆç°ç»™ä½ 

        ls -l |nms -a

        sneakers

    éœ€è¦è‡ªå·±ç¼–è¯‘ï¼Œå¦‚æœæ„Ÿè§‰è½¬æ¢é€Ÿåº¦å¤ªæ…¢ï¼Œè‡ªå·±æ”¹

        $ git clone --depth=1 https://github.com/bartobri/no-more-secrets.git
        $ cd ./no-more-secrets

        $ make nms
        $ make sneakers             ## Optional

        $ sudo make install

### æ“ä½œæ—¶é—´ timedatectl/chronyc åŠ NTP æœåŠ¡

ç›®å‰é€šç”¨çš„æŸ¥çœ‹æ—¶é—´æ§åˆ¶çš„å‘½ä»¤ timedatectlï¼Œæ¥è‡ª systemd çš„é…å¥—å·¥å…·ã€‚

    éªŒè¯å½“å‰ç³»ç»Ÿæ—¶é—´æ˜¯å¦å‡†ç¡®ï¼Œè®¿é—®å¦‚ä¸‹ç½‘å€æ¯”è¾ƒä½ ç”µè„‘/æ‰‹æœºå’Œæ­¤ç½‘ç«™çš„å·®å€¼ï¼ŒåŒæ­¥ç²¾ç¡®åº¦Â±5msï¼Œä¸å‡†å°±åˆ·æ–°

        https://time.is/

    ç”¨ timedatectl å‘½ä»¤æ“ä½œæ—¶é—´æ—¶åŒº  https://www.cnblogs.com/zhi-leaf/p/6282301.html

æŸ¥çœ‹å½“å‰æ—¶é—´ç›¸å…³çš„è®¾ç½®ï¼ŒåŒ…æ‹¬æ—¶åŒºã€NTP è®¾ç½®ç­‰

    $ timedatectl status
                Local time: äºŒ 2023-08-08 15:30:53 +08
            Universal time: äºŒ 2023-08-08 07:30:53 UTC
                    RTC time: äºŒ 2023-08-08 07:30:53 UTC  <----- RTC è·Ÿ UTC ä¸€è‡´
                    Time zone: Asia/Shanghai (+08, +0800)
    System clock synchronized: yes    <-------- ç³»ç»Ÿæ—¶é’ŸåŒæ­¥æ­£å¸¸
                NTP service: active   <-------- ä½¿ç”¨ chronyã€systemd-timesyncd ç­‰ NTP æœåŠ¡å¯ä»¥è¢«è¿™ä¸ªå‘½ä»¤è¯†åˆ«åˆ°
            RTC in local TZ: no

è°ƒæ•´æ—¶åŒº

    https://docs.fedoraproject.org/en-US/fedora-coreos/time-zone/

    å‘½ä»¤æ–¹æ³•æ¥è‡ª https://docs.fedoraproject.org/en-US/fedora/latest/system-administrators-guide/basic-system-configuration/Configuring_the_Date_and_Time/

    1ã€å…ˆæ›´æ–°ä¸‹ç³»ç»Ÿï¼Œä»¥è·å–å¤ä»¤æ—¶ç­‰æœ€æ–°çš„æ—¶åŒºä¿¡æ¯

        $ sudo dnf update -y

        $ timedatectl
                    Local time: Mon 2021-05-17 20:10:20 UTC
                Universal time: Mon 2021-05-17 20:10:20 UTC
                        RTC time: Mon 2021-05-17 20:10:20
                        Time zone: UTC (UTC, +0000)
        System clock synchronized: yes
                    NTP service: active
                RTC in local TZ: no

    2ã€æŸ¥æ‰¾ä½ çš„æ—¶åŒºçš„æ ‡å‡†åç§°

        $ timedatectl list-timezones |greps sing
        313:Asia/Singapore
        438:Europe/Busingen
        578:Singapore

    3ã€æ›´æ”¹æ—¶åŒº

        $ sudo timedatectl set-timezone Asia/Singapore

    è€æ–¹æ³•ï¼š

        $ tzselect

        $ ln -s /usr/share/zoneinfo/Asia/Singapore /etc/localtime

    4ã€æ—¶é—´å˜åŒ–è¾ƒå¤§ï¼ŒåŠ¡å¿…é‡å¯ä¸€æ¬¡ï¼Œé˜²æ­¢ç›¸å…³æœåŠ¡é”™ä¹±

        $ sudo reboot

    æ—¶åŒºæ ‡å‡†å‚è§ç« èŠ‚ [æ—¶åŒºæ ‡å‡†tzinfo](time_t.md)

è®¾ç½®ç¡¬ä»¶ RTC ä¿å­˜æ—¶é—´çš„æ ‡å‡†

    åœ¨ Linux ä¸­ç³»ç»Ÿæ—¶é—´å—æ—¶åŒºã€å¤ä»¤æ—¶å½±å“ï¼Œè€Œç¡¬ä»¶æ—¶é—´é»˜è®¤ UTCã€‚å½“å‰çš„ç³»ç»Ÿæ—¶é—´éƒ½æ˜¯è®¡ç®—å‡ºæ¥çš„ï¼Œè¯»å‡ºç¡¬ä»¶æ—¶é—´æŒ‰ UTC å¤„ç†ç„¶åå åŠ æ—¶åŒºã€å¤ä»¤æ—¶ï¼Œå¾—åˆ°æœ€ç»ˆç»“æœã€‚

    systemd-timesyncd/chrony ç­‰ä¿®æ”¹æ—¶é—´ï¼Œåªä¼šæ›´æ”¹ç³»ç»Ÿæ—¶é—´è€Œä¸ä¼šæ›´æ”¹ RTC ç¡¬ä»¶æ—¶é—´ï¼Œå³ç³»ç»Ÿæ—¶é—´æ˜¯æ ¹æ®ç¡¬ä»¶ RTC æ—¶é—´å’Œå½“å‰æ—¶åŒºè®¡ç®—å¾—å‡ºçš„ã€‚

    å¯ä»¥æ”¹å˜è¿™ä¸ªæœºåˆ¶ï¼Œé€šè¿‡ `hwclock` å‘½ä»¤å°†ç³»ç»Ÿæ—¶é—´ï¼ˆå—æ—¶åŒºã€å¤ä»¤æ—¶å½±å“ï¼‰åŒæ­¥åˆ°ç¡¬ä»¶æ—¶é—´ï¼ˆé»˜è®¤ UTCï¼‰ã€‚

        # ä»¥ç¡¬ä»¶æ—¶é’Ÿä¸ºå‡†ï¼Œæ ¡æ­£ç³»ç»Ÿæ—¶é’Ÿï¼Œé»˜è®¤ --utc
        $ sudo hwclock -s

        # ä»¥ç³»ç»Ÿæ—¶é’Ÿä¸ºå‡†ï¼Œæ ¡æ­£ç¡¬ä»¶æ—¶é’Ÿï¼Œä¸ä½¿ç”¨é»˜è®¤çš„ UTC æ—¶é—´ï¼Œè€Œæ˜¯æœ¬åœ°æ—¶é—´ï¼Œè¿™æ ·ç¡¬ä»¶ RTC ä¿å­˜æœ¬åœ°æ—¶é—´
        $ sudo hwclock -w --localtime

    hwclock å‘½ä»¤é€‰é¡¹ï¼š

        -s, --hctosys     # å°†ç¡¬ä»¶æ—¶é—´åŒæ­¥åˆ°ç³»ç»Ÿæ—¶é—´ï¼šä»¥ç¡¬ä»¶æ—¶é’Ÿä¸ºå‡†ï¼Œæ ¡æ­£ç³»ç»Ÿæ—¶é’Ÿ

        -w, --systohc     # å°†ç³»ç»Ÿæ—¶é—´åŒæ­¥åˆ°ç¡¬ä»¶æ—¶é—´ï¼šä»¥ç³»ç»Ÿæ—¶é’Ÿä¸ºå‡†ï¼Œæ ¡æ­£ç¡¬ä»¶æ—¶é’Ÿ

    timedatectl å‘½ä»¤ä¹Ÿå¯ä»¥å®ç°ä¸Šé¢çš„è¿™ä¸¤ä¸ªåŠŸèƒ½ã€‚

    éœ€è¦æ”¹è¿™ä¸ªæ ‡å‡†çš„åœºæ™¯ï¼Œå¸¸è§äº Windows/Linux åŒç³»ç»Ÿçš„è®¡ç®—æœºç³»ç»Ÿæ—¶é—´å†²çªï¼Œå› ä¸º Linux å¤„ç† RTC æ—¶é—´è·Ÿ Windows çš„æœºåˆ¶ä¸åŒï¼Œè¯¦è§ç« èŠ‚ [Linux + Windows åŒç³»ç»Ÿæ—¶é—´å·®8ä¸ªå°æ—¶](Windows 10+ å®‰è£…çš„é‚£äº›äº‹å„¿.md)ã€‚

ä¿®æ”¹æ—¥æœŸæ—¶é—´ï¼š

    $ sudo date -s  "2017-01-23 10:30:00" # "YYYY-MM-DD HH:MM:SS"

    $ timedatectl set-time "2017-01-23 10:30:00" # YYYY-mm-dd HH-MM-SS

å¦è§ç« èŠ‚ [è™šæ‹Ÿæœºæ—¶é—´åŒæ­¥çš„å¸¸ç”¨æ–¹æ³•](virtualization thnik)ã€‚

#### NTP æ—¶é—´åŒæ­¥æœåŠ¡

    NTP æ—¶é—´åŒæ­¥çš„åŸç†

        https://learn.microsoft.com/zh-cn/windows-server/networking/windows-time-service/how-the-windows-time-service-works#ntp-algorithms

    ç½‘ç»œæ—¶é—´çš„é‚£äº›äº‹åŠ ntpq è¯¦è§£  https://www.cnblogs.com/GYoungBean/p/4225465.html

    ä½¿ç”¨ ntpd é…ç½® NTP https://docs.redhat.com/zh-cn/documentation/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-Configuring_NTP_Using_ntpd

    https://wiki.debian.org/NTP

    https://pan-xiao.gitbook.io/debian/config/ntp

    `ntpstat`

è½¯ä»¶åŒ… ntp è¿‡æ—¶äº†ï¼š

    ä»¥å‰ Linux æ—¶é—´åŒæ­¥åŸºæœ¬æ˜¯ä½¿ç”¨ ntpdate å’Œ ntpd è¿™ä¸¤ä¸ªå·¥å…·å®ç°çš„ï¼Œå…¶ä¸­ ntpd æ˜¯æ­¥è¿›å¼å¹³æ»‘çš„é€æ¸è°ƒæ•´æ—¶é—´ï¼Œè€Œ ntpdate æ˜¯æ–­ç‚¹å¼æ›´æ–°æ—¶é—´ã€‚

    ç°åœ¨çš„ä¸»æµ Linux å‘è¡Œç‰ˆï¼ŒDebian ç³»ä¸€èˆ¬éƒ½ä½¿ç”¨ systemd è‡ªå¸¦çš„ `systemd-timesyncd`ï¼Œè€Œ Fedora ç³»ä½¿ç”¨ `chrony` ä½œä¸ºé»˜è®¤æ—¶é—´åŒæ­¥å·¥å…·ã€‚è€Œä¸”è¿™äº› Linux å‘è¡Œç‰ˆéƒ½æä¾›äº†ä¸€ä¸ªé»˜è®¤é…ç½®ï¼Œå®ƒæŒ‡å‘å‘è¡Œç‰ˆç»´æŠ¤çš„ NTP æ—¶é—´æœåŠ¡å™¨ã€‚

    æ¨è [ä½¿ç”¨ chrony]ã€‚

è¦è‡ªå»º NTP æœåŠ¡å™¨ï¼Œå¯ä»¥å®‰è£… chronyã€ntpdï¼Œæˆ–è€… open-ntpï¼Œæ¨è [ä½¿ç”¨ chrony]ã€‚

> NTP å¼ºåˆ¶ç«‹åˆ»åŒæ­¥

å¦‚æœæ‰§è¡Œå‘½ä»¤ `timedatectl status` çš„è¾“å‡º 'System clock synchronized' å€¼è®¾ç½®ä¸º noï¼Œè¯´æ˜ NTP ä¸åŒæ­¥äº†ï¼Œå¸¸è§äºè™šæ‹Ÿæœºä»ä¼‘çœ ä¸­æ¢å¤åï¼Œæ—¶é—´çš„åå·®è¾ƒå¤§ã€‚

å¦‚æœæƒ³è¦ç«‹å³è°ƒæ•´æ—¶é—´ï¼Œè€Œä¸æ˜¯ç­‰å¾… NTP æœåŠ¡å¹³æ»‘çš„æ…¢æ…¢è°ƒæ•´ï¼š

    NOTE: NTP æœåŠ¡æ˜¯å¹³æ»‘å¼çš„è°ƒæ•´æ—¶é—´ï¼Œæœ€å¥½ä¸è¦ç›´æ¥è·³å˜å¼çš„è®¾ç½®ä¸€ä¸ªæ—¶é—´,å¯¹æ•°æ®åº“æœåŠ¡ç­‰å¯èƒ½æœ‰ä¸åˆ©å½±å“ï¼Œç”Ÿäº§ç¯å¢ƒä¸‹æ…é‡ï¼

    # sudo ntpdate -u <NTP æœåŠ¡å™¨åœ°å€>  # ä¾‹å¦‚ ntp.ubuntu.com
    $ sudo chronyc makestep

è¿˜ä¸è¡Œå°±è¯•è¯•é‡å¯ NTP æœåŠ¡ï¼Œå¦‚ chrony æˆ– systemd-timesyncd

    $ sudo systemctl restart systemd-timesyncd
    $ sudo systemctl restart chronyd

å®åœ¨ä¸è¡Œå°±é‡å¯è®¡ç®—æœºã€‚

> é…ç½®å…¬å…± NTP æœåŠ¡å™¨

Debianã€Fedora ç­‰å‘è¡Œç‰ˆéƒ½æœ‰è‡ªå·±çš„ NTP æœåŠ¡å™¨ï¼Œå¼€æœºåä¼šè‡ªåŠ¨å¯¹æ—¶ï¼Œä½†å¦‚æœä½ å‘ç°è¿æ¥å›°éš¾ï¼Œå¯ä»¥æ›´æ¢

    https://www.zhihu.com/question/30252609/answer/2276727955

å…¬å…± NTP æœåŠ¡å™¨æ± 

    è¿™äº›æ˜¯ç”±ç¤¾åŒºç»´æŠ¤çš„ NTP æœåŠ¡å™¨æ± ï¼Œæ”¯æŒå…¨çƒç”¨æˆ·ï¼š

    pool.ntp.orgï¼ˆè‡ªåŠ¨åˆ†é…æœ€è¿‘çš„æœåŠ¡å™¨ï¼‰

    0.pool.ntp.org

    1.pool.ntp.org

    2.pool.ntp.org

    3.pool.ntp.org

æ ¹æ®æ‰€åœ¨åœ°åŒºé€‰æ‹©æ›´è¿‘çš„ NTP æœåŠ¡å™¨æ± ï¼š

    äºšæ´²ï¼š

    NTP é¡¹ç›®äºšæ´²æ—¶é—´æœåŠ¡å™¨ï¼Œå»¶è¿Ÿæƒ…å†µä¸å¦‚å›½å†…çš„

    asia.pool.ntp.org

    0.asia.pool.ntp.org

    1.asia.pool.ntp.org

    æ¬§æ´²ï¼š

    europe.pool.ntp.org

    0.europe.pool.ntp.org

    1.europe.pool.ntp.org

    åŒ—ç¾ï¼š

    north-america.pool.ntp.org

    0.north-america.pool.ntp.org

    1.north-america.pool.ntp.org

    ä¸­å›½ï¼š

    NTP é¡¹ç›®å›½å†…æ—¶é—´æœåŠ¡å™¨ï¼ŒCERNET çš„ä¸€å †æœåŠ¡å™¨å°±åœ¨é‚£é‡Œé¢ï¼Œåº”è¯¥æ¯”è¾ƒé è°±

    cn.pool.ntp.org

    0.cn.pool.ntp.org

    1.cn.pool.ntp.org

çŸ¥åç»„ç»‡å’Œæœºæ„æä¾›çš„å…¬å…± NTP æœåŠ¡å™¨ï¼š

    # Cloudflare
    time.cloudflare.com

    # Google å…¬å…± NTPï¼š

    time.google.com

    time1.google.com

    time2.google.com

    time3.google.com

    time4.google.com

    # å¾®è½¯å…¬å…± NTPï¼š

    time.windows.com

    # è‹¹æœå…¬å…± NTPï¼š

    time.apple.com

    time.asia.apple.com

    # NIST å…¬å…± NTPï¼ˆç¾å›½å›½å®¶æ ‡å‡†ä¸æŠ€æœ¯ç ”ç©¶é™¢ï¼‰ï¼š

    time.nist.gov

    time-a.nist.gov

    time-b.nist.gov

    # ä¸å»ºè®®ä½¿ç”¨ä¸­å›½ç§‘å­¦é™¢å›½å®¶æˆæ—¶ä¸­å¿ƒï¼Œç²¾åº¦ä¸é«˜ï¼Œä¸“ä¸šçš„äººå®¶æœ‰è‡ªå·±çš„åè®®ï¼Œå•†ä¸šçš„æœ‰åŒ—æ–—ï¼Œå¯¹å¤–å¼€æ”¾çš„è¿™ä¸ªæ˜¯å…è´¹å‡‘åˆçš„
    # https://www.cas.cn/tz/201809/t20180921_4664344.shtml
    ntp.ntsc.ac.cn

    # ä¸è¦ä½¿ç”¨å›½å†…çš„è¿™ä¸ªï¼Œè‡ªæ„¿è‡ªè´¹ç»„ç»‡ï¼Œ2023å¹´12æœˆå‘ç° ntp.org.cn åŸŸåéƒ½æ— æ³•è®¿é—®äº†
    # cn.ntp.org.cn

    # æ•™è‚²ç½‘
    time.edu.cn

    edu.ntp.org.cn

    # æ¸…å
    ntp.tuna.tsinghua.edu.cn

    # é˜¿é‡Œäº‘è¿˜æ˜¯ç®—äº†ï¼Œ2023å¹´å¼€å§‹è¿è‡ªå·±çš„æ•´ä¸ªäº‘æœåŠ¡å¹³å°éƒ½å‡ºç°å´©æºƒ
    ntp.aliyun.com

    ntp1.aliyun.com

    ntp2.aliyun.com

    # è…¾è®¯äº‘

    ntp.tencent.com

> ä½¿ç”¨ NTP æœåŠ¡å™¨çš„æœ€ä½³æ–¹æ¡ˆ

    https://documentation.suse.com/zh-cn/sles/15-SP4/html/SLES-all/cha-ntp.html#sec-net-xntp-netconf

è¦åŒæ­¥åŒä¸€ç½‘ç»œä¸­çš„å¤šå°è®¡ç®—æœºçš„æ—¶é—´ï¼Œå»ºè®®ä¸è¦ç›´æ¥é€šè¿‡å¤–éƒ¨æœåŠ¡å™¨åŒæ­¥æ‰€æœ‰è®¡ç®—æœºã€‚æ¯”è¾ƒå¥½çš„åšæ³•æ˜¯å°†å…¶ä¸­ä¸€å°è®¡ç®—æœºä½œä¸ºæ—¶é—´æœåŠ¡å™¨ï¼ˆå®ƒä¸å¤–éƒ¨æ—¶é—´æœåŠ¡å™¨åŒæ­¥ï¼‰ï¼Œå…¶ä»–å†…ç½‘è®¡ç®—æœºä½œä¸ºå®ƒçš„å®¢æˆ·ç«¯ã€‚å°† local æŒ‡ä»¤æ·»åŠ è‡³è¯¥æœåŠ¡å™¨çš„ /etc/chrony.confï¼Œä»¥å°†å…¶ä¸æƒå¨æ—¶é—´æœåŠ¡å™¨åŒºåˆ†å¼€ï¼š

    local stratum 10

é€‰æ‹©ç¦»ä½ åœ°ç†ä½ç½®è¾ƒè¿‘çš„ NTP æœåŠ¡å™¨å¯ä»¥å‡å°‘å»¶è¿Ÿï¼Œæé«˜åŒæ­¥ç²¾åº¦ã€‚

å¦‚æœéœ€è¦é«˜ç²¾åº¦æ—¶é—´åŒæ­¥ï¼Œå»ºè®®ä½¿ç”¨å¤šä¸ª NTP æœåŠ¡å™¨ä½œä¸ºå¤‡ä»½ã€‚

æŸ¥çœ‹æ—¶é—´åŒæ­¥æºï¼Œå‡ºç° ^* è¡¨ç¤ºå½“å‰æœ€ä½³æœåŠ¡å™¨

    $ chronyc sources -v

    .-- Source mode  '^' = server, '=' = peer, '#' = local clock.
    / .- Source state '*' = current best, '+' = combined, '-' = not combined,
    | /             'x' = may be in error, '~' = too variable, '?' = unusable.
    ||                                                 .- xxxx [ yyyy ] +/- zzzz
    ||      Reachability register (octal) -.           |  xxxx = adjusted offset,
    ||      Log2(Polling interval) --.      |          |  yyyy = measured offset,
    ||                                \     |          |  zzzz = estimated error.
    ||                                 |    |           \
    MS Name/IP address         Stratum Poll Reach LastRx Last sample
    ===============================================================================
    ^+ dns1.synet.edu.cn             2  10   377   194   +631us[ +631us] +/-   17ms
    ^- a.chl.la                      2  10   377   124  -7151us[-7151us] +/-   97ms
    ^* time.neu.edu.cn               1  10   377   237  +1129us[+1792us] +/-   16ms
    ^- ntp1.flashdance.cx            2  10   277   372    -24ms[  -24ms] +/-  136ms

æŸ¥çœ‹ NTP æœåŠ¡å™¨çš„è´¨é‡ï¼šå»¶è¿Ÿã€åç§»

    Windows: w32tm /stripchart /computer:cn.pool.ntp.org

    $ chronyc tracking

Windows è®¾ç½®æ—¶é—´æœåŠ¡å™¨çš„åœ°å€ï¼Œåœ¨æ§åˆ¶é¢æ¿çš„æ—¶é—´è®¾ç½®->Internetæ—¶é—´ã€‚

#### ä½¿ç”¨ chrony

Fedora ç­‰ Redhat ç³»ç›®å‰ä½¿ç”¨è¿™ä¸ªè½¯ä»¶åŒ…ï¼Œå®ƒå®ç°äº† NTP åè®®å¹¶ä¸”å¯ä»¥ä½œä¸ºæœåŠ¡å™¨æˆ–å®¢æˆ·ç«¯

    https://docs.redhat.com/zh-cn/documentation/red_hat_enterprise_linux/9/html/configuring_basic_system_settings/configuring-time-synchronization_configuring-basic-system-settings

    ä½¿ç”¨ chrony å¥—ä»¶é…ç½® NTP https://docs.redhat.com/zh-cn/documentation/red_hat_enterprise_linux/7/html-single/system_administrators_guide/index#ch-Configuring_NTP_Using_the_chrony_Suite

    https://www.cnblogs.com/pipci/p/12871993.html

    https://wiki.archlinux.org/title/Chrony

    https://idroot.us/change-timezone-fedora-38

å®‰è£…

    $ sudo apt install chrony

chronyd æ˜¯ä¸€ä¸ªåœ¨ç³»ç»Ÿåå°è¿è¡Œçš„å®ˆæŠ¤è¿›ç¨‹ã€‚ä¸»è¦ç”¨äºè°ƒæ•´å†…æ ¸ä¸­è¿è¡Œçš„ç³»ç»Ÿæ—¶é—´å’Œæ—¶é—´æœåŠ¡å™¨åŒæ­¥ï¼Œä»–æ ¹æ®ç½‘ç»œä¸Šå…¶ä»–æ—¶é—´æœåŠ¡å™¨æ—¶é—´æ¥æµ‹é‡æœ¬æœºæ—¶é—´çš„åç§»é‡ä»è€Œè°ƒæ•´ç³»ç»Ÿæ—¶é’Ÿã€‚å¯¹äºå­¤ç«‹ç³»ç»Ÿï¼Œç”¨æˆ·å¯ä»¥æ‰‹åŠ¨å‘¨æœŸæ€§çš„è¾“å…¥æ­£ç¡®æ—¶é—´ï¼ˆé€šè¿‡chronycï¼‰ã€‚åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œchronyd å†³å®šè®¡ç®—æœºå¿«æ…¢çš„æ¯”ä¾‹ï¼Œå¹¶åŠ ä»¥çº æ­£ã€‚

    $ systemctl status chronyd
    â— chronyd.service - NTP client/server
        Loaded: loaded (/usr/lib/systemd/system/chronyd.service; enabled; preset: enabled)
        Drop-In: /usr/lib/systemd/system/service.d
                â””â”€10-timeout-abort.conf
        Active: active (running) since Fri 2023-11-10 23:29:16 +08; 3h 38min ago
        Docs: man:chronyd(8)
                man:chrony.conf(5)
        Process: 1245 ExecStart=/usr/sbin/chronyd $OPTIONS (code=exited, status=0/SUCCESS)
    Main PID: 1303 (chronyd)
        Tasks: 1 (limit: 57594)
        Memory: 8.1M
            CPU: 82ms
        CGroup: /system.slice/chronyd.service
                â””â”€1303 /usr/sbin/chronyd -F 2

æœåŠ¡unitæ–‡ä»¶ï¼š /usr/lib/systemd/system/chronyd.service

ç›‘å¬ç«¯å£ï¼š 323/udpï¼Œ123/udp

é…ç½®æ–‡ä»¶ï¼š /etc/chrony.conf æˆ– /etc/chrony/chrony.confï¼Œåœ¨è¿™é‡Œæ·»åŠ ä½ çš„ NTP æœåŠ¡å™¨çš„åœ°å€

    # ä½¿ç”¨ç‰¹å®šçš„æœåŠ¡å™¨åç§°æˆ– IP åœ°å€
    server 0.europe.pool.ntp.org

    # è¿˜å¯ä»¥æŒ‡å®šæ± åç§°ï¼Œæ± åç§°ä¼šè§£æä¸ºè‹¥å¹²ä¸ª IP åœ°å€
    pool pool.ntp.org

    åœ°å€åˆ—è¡¨è§ç« èŠ‚ [é…ç½®å…¬å…± NTP æœåŠ¡å™¨]ã€‚

chronyc  - ç›‘æ§ chronyd æ€§èƒ½å’Œé…ç½®å…¶å‚æ•°çš„ç”¨æˆ·ç•Œé¢ï¼Œå®ƒå¯ä»¥æ§åˆ¶æœ¬æœºåŠå…¶ä»–è®¡ç®—æœºä¸Šè¿è¡Œçš„ chronyd è¿›ç¨‹

    $ chronyc tracking
    Reference ID    : 54104921 (tick.ntp.infomaniak.ch)
    Stratum         : 2
    Ref time (UTC)  : Tue Aug 08 07:14:06 2023
    System time     : 0.003024213 seconds fast of NTP time
    Last offset     : -0.000142650 seconds
    RMS offset      : 0.009726741 seconds
    Frequency       : 1.493 ppm slow
    Residual freq   : -0.003 ppm
    Skew            : 4.812 ppm
    Root delay      : 0.192027435 seconds
    Root dispersion : 0.018389940 seconds
    Update interval : 1035.0 seconds
    Leap status     : Normal

#### ä½¿ç”¨ systemd-timesyncd

æ¨è [ä½¿ç”¨ chrony]

    systemd-timesyncd æ˜¯æ–­ç‚¹å¼æ›´æ–°æ—¶é—´ï¼Œä¹Ÿå°±æ˜¯æ—¶é—´ä¸åŒç«‹å³æ›´æ–°ï¼Œè¿™æ ·ä¼šå¯¹æŸäº›æœåŠ¡äº§ç”Ÿå½±å“ï¼Œæ‰€ä»¥åœ¨ç”Ÿäº§ç¯å¢ƒå°½é‡ä¸è¦ç”¨ï¼Œåœ¨æ¡Œé¢ç¯å¢ƒæˆ–è€…æ˜¯ç³»ç»Ÿåˆšå¼€æœºæ—¶æ¥è¿›è¡Œæ—¶é—´åŒæ­¥è¿˜æ˜¯å¾ˆå¥½çš„ã€‚

    timesyncd æ›¿ä»£äº† ntpd çš„å®¢æˆ·ç«¯çš„éƒ¨åˆ†ã€‚é»˜è®¤æƒ…å†µä¸‹ timesyncd ä¼šå®šæœŸæ£€æµ‹å¹¶åŒæ­¥æ—¶é—´ã€‚å®ƒè¿˜ä¼šåœ¨æœ¬åœ°å­˜å‚¨æ›´æ–°çš„æ—¶é—´ï¼Œä»¥ä¾¿åœ¨ç³»ç»Ÿé‡å¯æ—¶åšæ—¶é—´å•æ­¥è°ƒæ•´ã€‚

    å¦‚æœæ˜¯è™šæ‹Ÿæœºç¯å¢ƒï¼Œåº”è¯¥æŠŠä¸ä¸»æœºæ—¶é—´åŒæ­¥åŠŸèƒ½å…³é—­åå†å¯ç”¨ systemd-timesyncdï¼Œå¦åˆ™å¯èƒ½ä¼šæœ‰é—®é¢˜.

ç›®å‰ Debian/openSUSE ä½¿ç”¨è¿™ä¸ªæœºåˆ¶ï¼Œsystemd-timesyncd åªå®ç°äº†ç®€å•çš„ NTP åè®® SNTPï¼Œä¸“æ³¨äºä»è¿œç¨‹æœåŠ¡å™¨æŸ¥è¯¢ç„¶ååŒæ­¥åˆ°æœ¬åœ°çš„ç³»ç»Ÿæ—¶é—´ï¼Œå³åªæ˜¯ NTP å®¢æˆ·ç«¯ã€‚

    `man systemctl status systemd-timesyncd.service`
    `man timesyncd.conf`

    https://www.cnblogs.com/pipci/p/12833228.html

    https://itslinuxfoss.com/sync-time-debian-12/

    https://www.freedesktop.org/software/systemd/man/latest/systemd-timesyncd.service.html

    https://wiki.archlinux.org/title/Systemd-timesyncd

systemd-timesyncd åªèƒ½ä½œä¸ºå®¢æˆ·ç«¯ï¼Œä¸èƒ½ä½œä¸º NTP æœåŠ¡å™¨ï¼Œä½†å¦‚æœæœ‰å¤šä¸€ç‚¹çš„éœ€æ±‚ï¼Œä¾‹å¦‚ä½ éœ€è¦è¿æ¥ä¸€ä¸ªç¡¬ä»¶æ¥æä¾›æ—¶é’Ÿï¼Œæˆ–è¦æˆä¸º NTP æœåŠ¡å™¨ï¼Œå¯ä»¥å®‰è£… chronyã€ntpdï¼Œæˆ–è€… open-ntpã€‚æ³¨æ„è¿™äº› ntp åŒ…åªèƒ½å®‰è£…ä¸€ä¸ªï¼Œå¦åˆ™ä¼šäº’ç›¸å¹²æ‰°ã€‚

ä½¿ç”¨ systemd è‡ªå¸¦çš„æ—¶é—´åŒæ­¥æœåŠ¡ systemd-timesyncd

    # æ³¨æ„å…ˆå¸è½½ ntp è½¯ä»¶åŒ…ï¼ŒäºŒè€…ä¸èƒ½å…±å­˜
    $ sudo apt purge ntp -y

    $ sudo apt install systemd-timesyncd

    $ sudo systemctl start systemd-timesyncd --now

æŸ¥çœ‹æœåŠ¡çš„çŠ¶æ€

    $ systemctl status systemd-timesyncd.service
    â— systemd-timesyncd.service - Network Time Synchronization
    Loaded: loaded (/lib/systemd/system/systemd-timesyncd.service; enabled; vendor preset: enabled)
    Drop-In: /usr/lib/systemd/system/systemd-timesyncd.service.d
            â””â”€disable-with-time-daemon.conf
    Active: active (running) since Sat 2023-01-21 00:14:58 +08; 6 days ago
        Docs: man:systemd-timesyncd.service(8)
    Main PID: 338 (systemd-timesyn)
    Status: "Synchronized to time server for the first time [2406:da1e:2b8:7e32:e92a:3c4b:358e:2dfb]:123 (2.debian.pool.ntp.org)."
        Tasks: 2 (limit: 4915)
    CGroup: /system.slice/systemd-timesyncd.service
            â””â”€338 /lib/systemd/systemd-timesyncd

æŸ¥çœ‹ systemd-timesyncd åŒæ­¥ NTP æœåŠ¡å™¨çš„çŠ¶æ€

    $ timedatectl timesync-status
    Server: 2406:da1e:2b8:7e32:e92a:3c4b:358e:2dfb (2.debian.pool.ntp.org)
    Poll interval: 34min 8s (min: 32s; max 34min 8s)
            Leap: normal
        Version: 4
        Stratum: 2
        Reference: 875729E5
        Precision: 1us (-25)
    Root distance: 23.338ms (max: 5s)
        Offset: -406us
            Delay: 95.029ms
        Jitter: 2.817ms
    Packet count: 263
        Frequency: -1.446ppm

é…ç½® NTP æœåŠ¡å™¨åœ°å€ä¿®æ”¹ /etc/systemd/timesyncd.conf æ–‡ä»¶å³å¯ï¼Œé»˜è®¤è™½ç„¶ NTP çš„é€‰é¡¹éƒ½å¤„äºæ³¨é‡ŠçŠ¶æ€ï¼Œä½†æ˜¯ systemd-timesyncd è¿˜æ˜¯ä¼šå»é»˜è®¤çš„ NTP æœåŠ¡å™¨è¿›è¡ŒåŒæ­¥

    [Time]
    #NTP=
    #FallbackNTP=0.debian.pool.ntp.org 1.debian.pool.ntp.org 2.debian.pool.ntp.org 3.debian.pool.ntp.org
    NTP=ntp.ubuntu.com pool.ntp.org
    FallbackNTP=0.arch.pool.ntp.org 1.arch.pool.ntp.org

    åœ°å€åˆ—è¡¨è§ç« èŠ‚ [é…ç½®å…¬å…± NTP æœåŠ¡å™¨]

### è®¾ç½®æ›¿æ¢å‘½ä»¤ update-alternatives

linux ç‰ˆæœ¬å†ç»å¤šå¹´çš„ä½¿ç”¨ï¼Œæœ‰äº›å‘½ä»¤ä¼šå‡ºç°å„ç§å˜ä½“ï¼Œä¸ºä¿æŒé€šç”¨ï¼Œç”¨ç¬¦å·é“¾æ¥çš„æ–¹å¼ç»Ÿä¸€è¿›è¡Œç®¡ç†

    update-alternatives --all

è®¾ç½® vi çš„å˜ä½“

æŸ¥çœ‹å®é™…ä½¿ç”¨ç‰ˆæœ¬

    $ readlink -f `which vi`
    /usr/bin/vim.tiny

è®¾ç½®æ›¿æ¢ç‰ˆæœ¬

    update-alternatives --config vi

### å‹åŠ›æµ‹è¯•

æµ‹è¯• Linux çš„ç£ç›˜è¯»å†™èƒ½åŠ›ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ FIO æ¥è¿›è¡Œ

    $ sudo apt install fio

æµ‹è¯•é¡ºåºè¯»å†™ 10G çš„æ–‡ä»¶ï¼Œæµ‹è¯•ç»“æœæ˜¯å¤§æ–‡ä»¶è¯»å†™ï¼š

    # fio -filename=test -direct=1 -iodepth 1 -thread -rw=write -ioengine=psync -bs=16k -size=10G -numjobs=1 -runtime=600 -group_reporting -name=write

æµ‹è¯•æ–‡ä»¶é¡ºåºè¯»å–ï¼š

    # fio -filename=test -direct=1 -iodepth 1 -thread -rw=read -ioengine=psync -bs=16k -size=10G -numjobs=1 -runtime=600 -group_reporting -name=read

æµ‹è¯•éšæœºå†™å…¥å’Œè¯»å–ï¼š

    # fio -filename=test -direct=1 -iodepth 1 -thread -rw=randwrite -ioengine=psync -bs=16k -size=10G -numjobs=1 -runtime=600 -group_reporting -name=write

dd ä¹Ÿå¯ç”¨äºåš i/o é€Ÿç‡æµ‹è¯•ï¼š

    ä¸æ‰§è¡Œ `sync` çš„è¯ï¼Œå…¶å®æ˜¯ç”Ÿæˆæ•°æ®åˆ°å†…å­˜çš„é€Ÿç‡

        # æµ‹è¯•å†…å­˜æœ€å¤§å†™å…¥é€Ÿç‡
        $ dd if=/dev/zero of=/tmp/file_01.txt bs=8K count=3000
        3000+0 records in
        3000+0 records out
        24576000 bytes (25 MB, 23 MiB) copied, 0.0136067 s, 1.8 GB/s

        # æµ‹è¯•å½“å‰ç³»ç»Ÿçš„éšæœºæ•°ç”Ÿæˆèƒ½åŠ›
        $ dd if=/dev/urandom of=/tmp/file_01.txt bs=8K count=3000
        3000+0 records in
        3000+0 records out
        24576000 bytes (25 MB, 23 MiB) copied, 0.0276212 s, 890 MB/s

    è¯»å–åˆ°å†…å­˜åï¼Œä¸€æ¬¡æ€§åŒæ­¥åˆ°ç¡¬ç›˜çš„é€Ÿç‡

        $ dd if=/dev/zero of=/tmp/file_01.txt bs=8K count=3000 conv=fdatasync
        3000+0 records in
        3000+0 records out
        24576000 bytes (25 MB, 23 MiB) copied, 0.0365097 s, 673 MB/s

    æ‰§è¡Œæ—¶æ¯æ¬¡éƒ½è¿›è¡ŒåŒæ­¥åˆ°ç¡¬ç›˜çš„æ“ä½œï¼Œä¸‹ä¾‹æ˜¯åšäº†3000æ¬¡8kå†™å…¥ç¡¬ç›˜

        $ dd if=/dev/zero of=/tmp/file_01.txt bs=8K count=3000 oflag=dsync
        3000+0 records in
        3000+0 records out
        24576000 bytes (25 MB, 23 MiB) copied, 0.280321 s, 87.7 MB/s

    å¦‚æœè¦é˜²æ­¢ç¡¬ç›˜ç¼“å­˜ä¼˜åŒ–ï¼Œå†™å…¥é‡è¦åŠ å¤§ï¼Œæ¯”å¦‚ 1 GB çš„æ–‡ä»¶å†™å…¥é€Ÿç‡æ›´å®¢è§‚ bs=64k count=16k

stress-ng å‹æµ‹ cpu çš„è‘—åå·¥å…·

    # sudo apt install stress-ng
    stress-ng -c 2 --cpu-method pi --timeout 60
    stress-ng -i 1 --timeout 60
    stress-ng -m 1 --timeout 60

    s-tui æ˜¯ stress-ng çš„å‘½ä»¤è¡Œå‰ç«¯ï¼Œç”¨æˆ·åªéœ€è¦æŒ‰é”®é€‰æ‹©å³å¯æ–¹ä¾¿çš„æµ‹è¯•å’ŒæŸ¥çœ‹å‹æµ‹æƒ…å†µ

        $ sudo apt install s-tui -y
        $ s-tui

```shell
# ç®€å•çš„è„šæœ¬ç”¨äº cpu åŠ çƒ­ï¼Œå…¥å‚æ˜¯cpuçš„æ ¸å¿ƒæ•°
#!/bin/bash
# Destription: testing cpu usage performance
# Example    : bash heatcpu.sh 12
# Remark     : cat /proc/cpuinfo | grep "processor"|wc -l    #12==>Get the number of processor
# Date       : 2015-1-12
# update     : 2015-1-12

endless_loop()
{
  echo -ne "i=0;

  while true
  do
    i=i+100;
    i=100
  done" | /bin/bash &
}

if [ $# != 1 ] ; then
  echo "USAGE: $0 <CPUs>"
  exit 1;
fi
for i in `seq $1`
do
  endless_loop
  pid_array[$i]=$! ;
done

for i in "${pid_array[@]}"; do
  echo 'kill ' $i ';';
done

```

### åˆ†æå­˜å‚¨ç©ºé—´ df/du

    https://cloud.tencent.com/developer/article/1721037

1ã€å…ˆ df æŸ¥çœ‹æŒ‚è½½çš„ç›®å½•å ç”¨æƒ…å†µï¼Œä¸»è¦å…³æ³¨ Avail æ®µçš„å¯ç”¨ç©ºé—´

    $ df -h
    Filesystem                    Size  Used Avail Use% Mounted on
    /dev/mapper/dev01-root         75G   58G   14G  82% /
    udev                          2.0G  4.0K  2.0G   1% /dev
    tmpfs                         396M  292K  396M   1% /run
    none                          5.0M     0  5.0M   0% /run/lock
    none                          2.0G  4.0K  2.0G   1% /run/shm
    /dev/sda1                     228M  149M   68M  69% /boot

æ‰¾å‡ºé©±åŠ¨å™¨ä¸Šå ç”¨å­˜å‚¨ç©ºé—´æœ€å¤§çš„å‰ 10 ä¸ªç›®å½•ï¼š

    $ sudo su

    # du -sh /*

    # du -a / | sort -n -r |head -n 10

    å¦å¤–ç”¨ du -sh --apparent-size å¯ä»¥çœ‹åˆ°å®é™…æ–‡ä»¶å¤§å°ï¼Œé€‚ç”¨äºå°æ–‡ä»¶å¤ªå¤šå ç”¨å·¨é‡ç£ç›˜ç©ºé—´çš„åˆ†æã€‚

2ã€å¦‚æœå‘ç°ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶çš„å¤§å°æ€»å’Œè¿œè¿œä½äºè¿™ä¸ªåˆ†åŒºå·²ç”¨ç©ºé—´çš„å¤§å°ï¼Œä½†æ˜¯å°±æ˜¯æ‰¾ä¸å‡ºå ç”¨ç£ç›˜æœ€å¤šçš„é‚£ä¸ªæ–‡ä»¶åœ¨å“ªé‡Œï¼Œé‚£å°±è¦æ€€ç–‘æ˜¯åˆ†åŒºæ–‡ä»¶ç³»ç»Ÿçš„ inode èŠ‚ç‚¹æ»¡äº†ï¼š

    $ df -ih

    Filesystem     Inodes IUsed IFree IUse% Mounted on
    devtmpfs         5.9M   721  5.9M    1% /dev
    tmpfs            5.9M    54  5.9M    1% /dev/shm
    tmpfs            800K  1.5K  799K    1% /run

å¦‚æœçœ‹åˆ° IFree æ®µ ä¸º 0ï¼Œä¼šå¯¼è‡´è¯¥æ–‡ä»¶ç³»ç»Ÿä¸Šæ— æ³•æ–°å»ºæ–‡ä»¶ï¼Œè¿™ç§æƒ…å†µå¸¸è§äºé”ç¢å°æ–‡ä»¶ç‰¹åˆ«å¤šçš„åœºåˆï¼Œæ€»å®¹é‡ä¸å¤§ä½†æ˜¯æŠŠ inode åƒå…‰äº†ã€‚

3ã€æ–‡ä»¶åˆ é™¤æ—¶è¿˜è¢«å…¶å®ƒè¿›ç¨‹å ç”¨ï¼Œæ­¤æ—¶æ–‡ä»¶å¹¶ä¸ä¼šçœŸæ­£åˆ é™¤ï¼Œåªæ˜¯æ ‡è®°ä¸º deletedï¼Œåªæœ‰è¿›ç¨‹ç»“æŸåæ‰ä¼šå°†æ–‡ä»¶çœŸæ­£ä»ç£ç›˜ä¸­æ¸…é™¤ã€‚

    $ sudo lsof | grep deleted

è¿™ç§æƒ…å†µå¸¸è§äºç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­å¯¹è¾“å‡ºæ–‡ä»¶åšåˆ é™¤ï¼Œæ¯”å¦‚ nothup.out æˆ–æŒç»­å†™å…¥çš„æ—¥å¿—æ–‡ä»¶ï¼Œç”±äºè¯¥æ–‡ä»¶è¢«å ç”¨ï¼Œæ‰€ä»¥æ“ä½œç³»ç»Ÿåªèƒ½å…ˆæ ‡è®°ä¸º deletedï¼Œè€ŒæœªçœŸæ­£åˆ é™¤ï¼Œæœ€åå¯¼è‡´ç£ç›˜çˆ†æ»¡ã€‚

æ‰€ä»¥åœ¨shellå‘½ä»¤è¡Œå°†ä»»åŠ¡æ”¾åˆ°åå°æ—¶è¦è€ƒè™‘è¾“å‡ºï¼Œç‰¹åˆ«æ˜¯ä½¿ç”¨ nohup å‘½ä»¤æ—¶ï¼Œæ‰€æœ‰çš„è¾“å‡ºéƒ½ä¼šè¢«ä¸æ–­åœ°æ·»åŠ åˆ°åŒä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œå¦‚æœè¯¥è¿›ç¨‹ä¸ä¼šè‡ªå·±ç»ˆæ­¢ï¼Œå°±å¯èƒ½å¯¼è‡´è¾“å‡ºæ–‡ä»¶å æ»¡æ•´ä¸ªç£ç›˜ã€‚è§„èŒƒçš„ nohup å‘½ä»¤ç”¨æ³•è§ç« èŠ‚ [nohup]ã€‚

### æŸ¥çœ‹è®¡ç®—æœºçš„ä¼ æ„Ÿå™¨å¦‚æ¸©åº¦ã€é£æ‰‡

ç®€å•çœ‹ cpu æ¸©åº¦ä½¿ç”¨ btop å³å¯ï¼Œå±•ç¤ºåˆå…¨é¢åˆå‡†ç¡®ã€‚

hwinfo

    https://github.com/openSUSE/hwinfo

lm-sensors æŸ¥çœ‹è®¡ç®—æœºä¼ æ„Ÿå™¨çš„çš„å†…æ ¸å·¥å…·ï¼Œæ”¯æŒæ¸©åº¦ã€pwmé£æ‰‡è½¬é€Ÿç­‰

    https://wiki.archlinux.org/title/Fan_speed_control

    https://www.cyberciti.biz/faq/how-to-find-fan-speed-in-linux-for-cpu-and-gpu/

    # sudo dnf install lm_sensors
    $ sudo apt install lm-sensors

å®‰è£…åå…ˆè¿è¡Œä¸€æ¬¡ `sudo sensors-detect` æ¥æ£€æµ‹ä¼ æ„Ÿå™¨ï¼Œæ³¨æ„æç¤ºï¼Œæœ‰æ—¶å€™ YES æœ‰æ—¶å€™ yes æœ‰æ—¶å€™æŒ‰å›è½¦ï¼ˆæ§½ï¼ï¼‰ï¼Œè¾“é”™å°±è·³è¿‡æ£€æµ‹é¡¹ç›®äº†ã€‚

ç„¶åå°±å¯ä»¥æŸ¥çœ‹ä¼ æ„Ÿå™¨æ•°æ®äº†

    $ sensors
    nouveau-pci-0100
    Adapter: PCI adapter
    fan1:           0 RPM
    temp1:        +43.0Â°C  (high = +95.0Â°C, hyst =  +3.0Â°C)
                        (crit = +105.0Â°C, hyst =  +5.0Â°C)
                        (emerg = +135.0Â°C, hyst =  +5.0Â°C)

    acpitz-acpi-0
    Adapter: ACPI interface
    temp1:        +16.8Â°C  (crit = +20.8Â°C)
    temp2:        +16.8Â°C  (crit = +20.8Â°C)
    temp3:        +27.8Â°C  (crit = +105.0Â°C)

    coretemp-isa-0000
    Adapter: ISA adapter
    Package id 0:  +46.0Â°C  (high = +100.0Â°C, crit = +100.0Â°C)
    Core 0:        +45.0Â°C  (high = +100.0Â°C, crit = +100.0Â°C)
    Core 1:        +45.0Â°C  (high = +100.0Â°C, crit = +100.0Â°C)
    Core 2:        +46.0Â°C  (high = +100.0Â°C, crit = +100.0Â°C)
    Core 3:        +43.0Â°C  (high = +100.0Â°C, crit = +100.0Â°C)
    Core 4:        +43.0Â°C  (high = +100.0Â°C, crit = +100.0Â°C)
    Core 5:        +43.0Â°C  (high = +100.0Â°C, crit = +100.0Â°C)

    nvme-pci-0200
    Adapter: PCI adapter
    Composite:    +46.9Â°C  (low  = -273.1Â°C, high = +81.8Â°C)
                        (crit = +84.8Â°C)
    Sensor 1:     +46.9Â°C  (low  = -273.1Â°C, high = +65261.8Â°C)
    Sensor 2:     +54.9Â°C  (low  = -273.1Â°C, high = +65261.8Â°C)

çœ‹é£æ‰‡è½¬é€Ÿï¼Œæ¯”è¾ƒæ–°çš„ä¸»æ¿æ¥å£ç»Ÿç»Ÿä¸æ”¯æŒã€‚ã€‚ã€‚

    $ sudo pwmconfig

æ§åˆ¶é£æ‰‡è½¬é€Ÿï¼Œä¸æ”¯æŒä¸»æ¿æ¥å£å°±æ²¡æœ‰é…ç½®æ–‡ä»¶ï¼Œå•¥ä¹Ÿå¹²ä¸äº†

    $ fancontrol

    # å®‰è£…æˆ systemd æœåŠ¡äº†
    $ systemctl status fancontrol.service

å¦‚æœä½¿ç”¨æ¡Œé¢ç¯å¢ƒï¼Œè¿˜å¯å®‰è£…å›¾å½¢åŒ–å·¥å…· xsensors æ¥å±•ç°è¿™äº›ä¼ æ„Ÿå™¨å’Œé£æ‰‡

    $ sudo dnf install xsensors fancontrol-gui

æ°´å†·éƒ½æ”¯æŒ Coolero

    coolero https://gitlab.com/coolercontrol/coolercontrol
        liquidctl https://github.com/liquidctl/liquidctl

    flatpak å®‰è£…å³å¯
    $ sudo dnf install coolercontrol
    $ sudo systemctl enable coolercontrold
    $ sudo systemctl start coolercontrold

æ˜¾å¡cpuè¶…é¢‘å·¥å…·

    CoreCtrl https://gitlab.com/corectrl/corectrl

#### æ§åˆ¶ç¬”è®°æœ¬ç”µè„‘çš„é£æ‰‡é€Ÿåº¦ thinkfan

    Thinkpad

        https://wiki.archlinux.org/title/Fan_speed_control#ThinkPad_laptops

    Dell/Lenovo_Legions/ASUS

        https://wiki.archlinux.org/title/Fan_speed_control#Dell_laptops
        https://wiki.archlinux.org/title/Fan_speed_control#Lenovo_Legions_laptops
        https://wiki.archlinux.org/title/Fan_speed_control#ASUS_laptops

    https://blog.monosoul.dev/2021/10/17/how-to-control-thinkpad-p14s-fan-speed-in-linux/

    https://github.com/vmatare/thinkfan

Enable fan control

    echo 'options thinkpad_acpi fan_control=1' | sudo tee /lib/modprobe.d/thinkpad_acpi.conf

Install thinkfan package

    sudo apt install thinkfan

Create a new thinkfan configuration file

    sudo touch /etc/thinkfan.conf

Put the following lines into /etc/thinkfan.conf

    sensors:
    # GPU
    - tpacpi: /proc/acpi/ibm/thermal
        indices: [1]
    # CPU
    - hwmon: /sys/class/hwmon
        name: coretemp
        indices: [2, 3, 4, 5]
    # Chassis
    - hwmon: /sys/class/hwmon
        name: thinkpad
        indices: [3, 5, 6, 7]
    # SSD
    - hwmon: /sys/class/hwmon
        name: nvme
        indices: [1, 2, 3]
        correction: [-5, 0, 0]
    # MB
    - hwmon: /sys/class/hwmon
        name: acpitz
        indices: [1]

    fans:
    - tpacpi: /proc/acpi/ibm/fan

    levels:
    - [0, 0, 37]
    - [1, 35, 42]
    - [2, 40, 45]
    - [3, 43, 47]
    - [4, 45, 52]
    - [5, 50, 57]
    - [6, 55, 72]
    - [7, 70, 82]
    - ["level full-speed", 77, 32767]

Configure thinkfan to use the newly created file

    echo 'THINKFAN_ARGS="-c /etc/thinkfan.conf"' | sudo tee -a /etc/default/thinkfan

Enable thinkfan service

    sudo systemctl enable thinkfan

Reboot

    sudo reboot

### æ§åˆ¶ç¬”è®°æœ¬ç”µè„‘åˆ‡æ¢ç‹¬æ˜¾ EnvyControl

    https://github.com/bayasdev/envycontrol

    https://ivonblog.com/posts/linux-envycontrol-turn-off-nvidia-gpu/

### ä¼˜åŒ–ç¬”è®°æœ¬ç”µè„‘çš„ç”µæ±  tlp

GNOME å’Œ KDE ä¸»æµæ¡Œé¢ç’°å¢ƒéƒ½å·²å…§å»º PPD(Power Profile Daemon) ä¾†èª¿ç¯€è€—é›»é‡ï¼Œå¤§éƒ¨ä»½ç™¼è¡Œç‰ˆé‚„æœƒå°‡ TLP èˆ‡ PPD åˆ—ç‚ºè¡çªå¥—ä»¶ã€‚å†æ ¹æ“š Reddit çš„è¨è«–èªç‚ºäºŒè€…ç„¡æ˜é¡¯å·®è·ï¼Œæˆ‘ä¾¿æ²’æœ‰å†åˆ»æ„å®‰è£ TLP

    https://linrunner.de/tlp/

    https://zhuanlan.zhihu.com/p/65546444

    https://ostechnix.com/how-to-optimize-laptop-battery-life-with-tlp-in-linux/

    https://www.jwillikers.com/power-management-on-linux-with-tlp

    ç«å“ PowerTOP

        https://github.com/fenrus75/powertop

        tlp æ–‡æ¡£è¯´æ¯” PowerTOP å¥½ç”¨ https://linrunner.de/tlp/faq/powertop.html

    openSuse ä¸Šä½¿ç”¨ TLP ç®¡ç†ç”µæºï¼ŒPowerTOP ä»…ä½œä¸ºç›‘æµ‹å·¥å…·ä½¿ç”¨

        https://zh.opensuse.org/SDB:%E7%94%B5%E6%B1%A0%E7%AE%A1%E7%90%86

        https://forum.suse.org.cn/t/topic/13067

TLPçš„é»˜è®¤é…ç½®å·²é’ˆå¯¹ç”µæ± å¯¿å‘½è¿›è¡Œäº†ä¼˜åŒ–ï¼Œå› æ­¤ä½ å¯èƒ½åªéœ€è¦å®‰è£…ï¼Œç„¶åå°±å¿˜è®°å®ƒå§ã€‚

TLP æ˜¯ä¸€ä¸ªå…·æœ‰è‡ªåŠ¨åå°ä»»åŠ¡çš„çº¯å‘½ä»¤è¡Œå·¥å…·ã€‚å®ƒä¸åŒ…å«GUIï¼Œå®ƒå¯ä»¥é«˜åº¦å®šåˆ¶åŒ–ï¼Œä»¥æ»¡è¶³ä½ çš„ç‰¹å®šè¦æ±‚ã€‚

TLP é€‚ç”¨äºå„ç§å“ç‰Œçš„ç¬”è®°æœ¬ç”µè„‘ã€‚è®¾ç½®ç”µæ± å……ç”µé˜ˆå€¼ä»…é€‚ç”¨äº IBM/Lenovo ThinkPad

Fedora

    sudo dnf install tlp tlp-rdw

ç„¶åå¸è½½æœ‰å†²çªçš„ power-profiles-daemon è½¯ä»¶åŒ…ï¼š

    sudo dnf remove power-profiles-daemon

è®¾ç½®å¼€æœºå¯åŠ¨ TLP çš„æœåŠ¡ï¼š

    sudo systemctl enable tlp.service

æ‚¨è¿˜åº”è¯¥å±è”½ä»¥ä¸‹æœåŠ¡ä»¥é¿å…å†²çªï¼Œç¡®ä¿ TLP çš„æ— çº¿è®¾å¤‡ï¼ˆè“ç‰™ã€wifiç­‰ï¼‰åˆ‡æ¢é€‰é¡¹çš„èƒ½å¤Ÿæ­£ç¡®æ“ä½œï¼š

    sudo systemctl mask systemd-rfkill.service systemd-rfkill.socket

## ä½¿ç”¨ Linux æ¡Œé¢ç¯å¢ƒ

è€è€å®å®ç”¨æœ€å¤šäººç”¨çš„ GNOME å§ï¼Œå…¶å®ƒæ¡Œé¢ç¯å¢ƒå‘æ›´å¤šï¼Œéšä¾¿å°±æœ‰è½¯ä»¶è¿è¡Œä¸èµ·æ¥ã€‚

### Gnome æ¡Œé¢

å¾ˆå¤šæ¡Œé¢ç¯å¢ƒéƒ½è‡ªå¸¦å¸¸ç”¨è½¯ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬è¯´ä½¿ç”¨æŸæŸæ¡Œé¢ç¯å¢ƒï¼Œé™¤äº†å¼€æœºè¿›å…¥æ¡Œé¢çš„æ“ä½œç•Œé¢å’Œä½¿ç”¨æ–¹å¼æ˜¯å…¶ä¸“é—¨è®¾è®¡çš„ï¼Œè¿˜ä¼šé™„å¸¦è‡ªè¡Œè®¾è®¡çš„æ ¸å¿ƒå·¥å…·è½¯ä»¶ï¼Œå¦‚æ—¥å†ã€æ—¶é’Ÿã€è®¡ç®—å™¨ã€åª’ä½“æ’­æ”¾å™¨ã€æ–‡ä»¶ç®¡ç†å™¨ç­‰å·¥å…·ï¼Œè¿™æ ·å¯ä»¥ä½¿ç”¨æˆ·å¼€ç®±å³ç”¨ï¼Œæ— éœ€åœ¨æ“ä½œç³»ç»Ÿçš„è½¯ä»¶å•†åº—å„ç§æœç´¢äº†ï¼Œæ¯”è¾ƒçœå¿ƒã€‚

    gnome æ ¸å¿ƒè½¯ä»¶ https://apps.gnome.org/zh-CN/#core
    gnome ç”Ÿæ€åœˆè½¯ä»¶ https://apps.gnome.org/zh-CN/#circle

    gnome æ¡Œé¢è½¯ä»¶æ‰‹å†Œ https://help.gnome.org/users/

    ä½¿ç”¨ GNOME æ¡Œé¢ç¯å¢ƒ

        https://access.redhat.com/documentation/zh-cn/red_hat_enterprise_linux/9/html/getting_started_with_the_gnome_desktop_environment/index

    è®¾ç½® GNOME æ¡Œé¢ç¯å¢ƒ

        https://access.redhat.com/documentation/zh-cn/red_hat_enterprise_linux/9/html/administering_the_system_using_the_gnome_desktop_environment/index

    è‡ªå®šä¹‰ GNOME æ¡Œé¢ç¯å¢ƒ

        https://access.redhat.com/documentation/zh-cn/red_hat_enterprise_linux/9/html/customizing_the_gnome_desktop_environment/index

    GNOME-4X å…¥å‘æŒ‡å— https://zhuanlan.zhihu.com/p/545083349
                    https://jedsek.xyz/posts/desktop-beautify/gnome

    GNOME Linux â€” ä¸€åœºå½»åº•çš„ç¾éš¾ https://zhuanlan.zhihu.com/p/490505981

ä¸ºæ–¹ä¾¿ç†è§£ï¼Œå¯¹æ¯” Windows è¯æ±‡å¦‚ä¸‹ï¼š

    Windows æ¡Œé¢        --->    Gnome Workspace å·¥ä½œåŒºï¼Œå¯ä»¥æœ‰å¤šä¸ª

    Windows ä»»åŠ¡æ       --->    Gnome Panel è¾¹æ ï¼Œå°±æ˜¯åœ¨å±å¹•ä¾§è¾¹çš„å·¥å…·æ ï¼Œæ¯”å¦‚ Gnome Topbar é¡¶æ å°±ç±»ä¼¼ Windows çš„ä»»åŠ¡æ ï¼Œä½†ä¸æ”¯æŒåˆ‡æ¢åº”ç”¨ç¨‹åº

    Windows æ¡Œé¢å·¥å…·æ    --->    Gnome Dash å¸¸ç”¨å·¥å…·æ 
                               å¦‚æœå­¦ macOS åœ¨æ¡Œé¢æµ®åŠ¨æ˜¾ç¤ºæˆä¸º Dockï¼Œéœ€è¦è£…æ’ä»¶ `dash to dock`

ä»¥ä¸‹å°½é‡ä½¿ç”¨ Windows è¯æ±‡ã€‚

Gnome æ¡Œé¢é»˜è®¤åªå±•ç¤ºå£çº¸ï¼Œä¸èƒ½æ”¾æ–‡ä»¶ï¼ˆä¸´æ—¶ä¸‹è½½æ–‡ä»¶æ²¡æ³•é€‰æ‹©ä¿å­˜åˆ°æ¡Œé¢äº†ï¼Œä¼°è®¡å¤§å¤šæ•°äººéƒ½ä¸ä¹ æƒ¯ï¼‰ï¼Œç”¨æˆ·äº¤äº’æ“ä½œå¼ºè°ƒç²¾ç®€ï¼Œåœ¨æ“ä½œå‘æ‰‹æœºé£æ ¼è½¬æ¢çš„åŒæ—¶ï¼Œä¼˜åŒ–å®½å±ã€å¤šæ¡Œé¢çš„ä½¿ç”¨æ–¹å¼

    æ¡Œé¢é¡¶éƒ¨æ°¸è¿œæ˜¯ä»»åŠ¡æ ï¼ˆé¡¶æ Topbarï¼‰ï¼Œäº¤äº’åŠŸèƒ½æœ‰é™ï¼Œå¤§å¤šæ—¶å€™çš„ç”¨é€”åªæ˜¯å±•ç¤ºå½“å‰åº”ç”¨ç¨‹åºçš„çŠ¶æ€ï¼ˆç›®çš„æ˜¯æ¼”å˜æˆæ— äº¤äº’çš„çŠ¶æ€æ ï¼Ÿï¼‰ï¼Œä¸åƒ Windows ä»»åŠ¡æ ï¼Œæä¾›è®©ä½ åœ¨æ‰“å¼€çš„å¤šä¸ªç¨‹åºé—´åˆ‡æ¢çš„æ–¹æ³•ï¼Œè¿™å¯¼è‡´æˆ‘åœ¨æ—¥å¸¸ä½¿ç”¨ä¸­é™¤äº†çœ‹æ—¶é—´å’Œç‚¹å…³æœºæŒ‰é’®ï¼ŒåŸºæœ¬å¾ˆå°‘çœ‹ä»»åŠ¡æ ã€‚

        å·¦ä¸Šè§’çš„ â€œæ´»åŠ¨â€ï¼ˆActivitesï¼‰é”®ç”¨ç‚¹å’Œæ¨ªçº¿æ˜¾ç¤ºå½“å‰æ¡Œé¢æ˜¯åœ¨æ‰€æœ‰æ¡Œé¢ä¸­çš„ä½ç½®ï¼Œé¼ æ ‡æ»‘è¿‡æˆ–ç‚¹å‡»éƒ½ä¼šæ˜¾ç¤º â€œä»»åŠ¡æ¦‚è§ˆâ€ï¼ˆOverviewï¼‰ã€‚

        ä»»åŠ¡æ å·¦ä¾§åªæœ‰ä¸€ä¸ªæ ç›®ï¼Œæ˜¾ç¤ºå½“å‰æ‰“å¼€çš„åº”ç”¨ç¨‹åºå½“å‰çª—å£çš„åç§°ã€‚å•å‡»ç¨‹åºçš„å›¾æ ‡ï¼Œåªæ˜¯å¼¹å‡ºä¸€ä¸ªèœå•è®©ä½ é€‰æ‹©å¤šä¸ªå®ä¾‹çª—å£ã€‚

        å±…ä¸­æ ç›®æ˜¯æ—¥æœŸæ—¶é—´å¤©æ°”

        å³ä¾§æ ç›®æ˜¯ç³»ç»ŸæŒ‡ç¤ºåŒºï¼Œç±»ä¼¼ Windows ä»»åŠ¡æ æ‰˜ç›˜åŒº(taskbar tray)ï¼Œåˆç»†åˆ†ä¸º Gnome æ‰©å±•çš„çŠ¶æ€æ˜¾ç¤ºå’Œç³»ç»Ÿè®¾ç½®çš„çŠ¶æ€æ˜¾ç¤ºä¸¤ä¸ªåŒºåŸŸï¼Œæœ€å³è¾¹å°±æ˜¯ç”µæºæŒ‰é’®ã€‚æ‰©å±•æ˜¾ç¤ºåŒºåŸŸçš„æ¯ä¸ªå›¾æ ‡éƒ½å¯ä»¥ç‚¹å‡»æ˜¾ç¤ºå•ç‹¬çš„èœå•ï¼Œç³»ç»Ÿè®¾ç½®çš„æ˜¾ç¤ºåŒºåŸŸå´åªå¼¹å‡ºä¸€ä¸ªèœå•ï¼Œæ“ä½œä¹ é¢˜æœ‰å·®å¼‚ã€‚å¦‚æœä½ å®‰è£…äº†ä¸­æ–‡è¾“å…¥æ³•ï¼Œè¿™ä¸ªå›¾æ ‡æ˜¯æ˜¾ç¤ºåœ¨ä¸¤ä¸ªåŒºåŸŸä¹‹é—´çš„ã€‚

å¼€æœºåé»˜è®¤å±•ç¤ºçš„ç•Œé¢æ˜¯ â€œä»»åŠ¡æ¦‚è§ˆâ€ï¼ˆOverviewï¼‰ï¼Œåˆ—å‡ºæ¡Œé¢åˆ—è¡¨å’Œæ¡Œé¢å†…å®¹çš„ç¼©ç•¥å›¾ã€‚â€œä»»åŠ¡æ¦‚è§ˆâ€ æ˜¯ç”¨æˆ·æ“ä½œå¤šçª—å£åˆ‡æ¢æœ€å¸¸ä½¿ç”¨çš„ç•Œé¢ï¼Œæ“ä½œçƒ­é”®æ˜¯æŒ‰ win é”®ï¼Œæˆ–é¼ æ ‡æ’å‡ ä¸‹å±å¹•å·¦ä¸Šè§’ --- â€œçƒ­è§’â€ï¼ˆHot Cornerï¼‰ï¼Œæˆ–ç‚¹å‡»å·¦ä¸Šè§’çš„ â€œæ´»åŠ¨â€ï¼ˆActivitesï¼‰æŒ‰é’®ï¼š

    ä¸Šéƒ¨ --- æœç´¢æ ã€‚ç›´æ¥æ‰“å­—å°±ä¼šé»˜è®¤å¡«å†™åˆ°æœç´¢æ ï¼Œåªéœ€è¦è¾“å…¥ä½ è¦ä½¿ç”¨çš„ç³»ç»Ÿè®¾ç½®åç§°æˆ–åº”ç”¨ç¨‹åºåç§°ï¼Œåœ¨æœç´¢ç»“æœç‚¹å‡»å³å¯æ‰§è¡Œã€‚æœç´¢ç»“æœçš„å±•ç°æ˜¯åˆ†ç±»çš„ï¼Œæœ‰å½“å‰å®‰è£…çš„è½¯ä»¶ã€è½¯ä»¶å•†åº—çš„æœç´¢ç»“æœç­‰ç­‰ï¼Œç›´æ¥ç‚¹å‡»å³å¯ä½¿ç”¨æˆ–ä¸‹è½½å®‰è£…ã€‚å¯ä»¥åœ¨ç³»ç»Ÿè®¾ç½®é‡Œé€‰æ‹©å±•ç¤ºå“ªäº›åˆ†ç±»ï¼Œå»ºè®®å…³é—­å­—ä½“æœç´¢ç»“æœï¼Œæœ€ä¸å¸¸ç”¨ä½†æ˜¯æœç´¢ç»“æœå å¤§å¤šæ•°ï¼Œå½±å“ä½¿ç”¨ä½“éªŒã€‚

        ç›®å‰æœ€å¿«æ·æ‰§è¡Œä¸€ä¸ªç¨‹åºçš„æ–¹æ³•å°±æ˜¯æŒ‰ Win é”®å‘¼å«å‡ºâ€œä»»åŠ¡æ¦‚è§ˆâ€ï¼Œç„¶åæ‰“å­—ï¼Œç„¶åé¼ æ ‡ç‚¹å‡»æœç´¢ç»“æœé‡Œå±•ç¤ºçš„è½¯ä»¶åç§°

    ä¸­éƒ¨ --- é¢„è§ˆçª—å£ã€‚å±•ç¤ºé¢ç§¯æœ€å¤§ï¼Œæ˜¾ç¤ºå½“å‰æ¡Œé¢çš„çš„å„çª—å£å†…å®¹ï¼Œå·¦å³è¾¹ç¼˜æ˜¾ç¤ºç›¸é‚»çš„æ¡Œé¢å†…å®¹ï¼Œç‚¹å‡»å³å¯åœ¨å„ä¸ªæ¡Œé¢é—´åˆ‡æ¢ã€‚è¿™ä¸ªç•Œé¢è·Ÿæ‰‹æœºçš„å¤šä¸ªæ¡Œé¢æ“ä½œç±»ä¼¼ã€‚

        å¤šä¸ªæ¡Œé¢çš„å¥½å¤„æ˜¯ï¼Œå¯¹ç»å¸¸åŒæ—¶æ‰“å¼€å¾ˆå¤šåº”ç”¨ç¨‹åºçš„ç”¨æˆ·ï¼Œå¯ä»¥åˆ†ç±»ç®¡ç†ï¼šæ¯”å¦‚æµè§ˆå™¨å’Œæ–‡ä»¶ç®¡ç†å™¨æ˜¾ç¤ºåœ¨ä¸€ä¸ªæ¡Œé¢ï¼Œä»£ç å¼€å‘è°ƒè¯•çš„ç›¸å…³ç¨‹åºåœ¨ä¸€ä¸ªæ¡Œé¢ï¼Œè¿œç¨‹æ¡Œé¢ç™»å½•æœåŠ¡å™¨åœ¨ä¸€ä¸ªæ¡Œé¢å…¨å±æ˜¾ç¤ºç­‰ç­‰ã€‚

        å¯ä»¥æ‹–åŠ¨å½“å‰æ‰“å¼€çš„ç¨‹åºçª—å£åˆ°å…¶å®ƒæ¡Œé¢ï¼Œé‚£ä¹ˆè¿™ä¸ªç¨‹åºå°±åœ¨é‚£ä¸ªæ¡Œé¢å±•ç¤ºäº†ã€‚

        æ»šåŠ¨é¼ æ ‡æ»šè½®ï¼Œæˆ–æŒ‰çƒ­é”® ctl + alt + å·¦/å³ï¼Œå³åœ¨å„ä¸ªæ¡Œé¢é—´è¿›è¡Œåˆ‡æ¢ï¼Œç„¶åé¼ æ ‡ç‚¹å‡»æŸä¸ªæ¡Œé¢å³åˆ‡æ¢ä½¿ç”¨è¯¥æ¡Œé¢äº†ã€‚

        åœ¨å¤šäºä¸¤ä¸ªæ¡Œé¢æ—¶ä¼šåœ¨é¡¶éƒ¨å¢åŠ ä¸€ä¸ªå¯¼èˆªæ ï¼Œåˆ—è¡¨æ˜¾ç¤ºæ‰€æœ‰æ¡Œé¢çš„é¢„è§ˆï¼Œå½“å‰æ¡Œé¢ç¨å¾®å¤§ä¸€ç‚¹ï¼Œæœ€å³ä¾§çš„æ¡Œé¢æ˜¯æ–°å¢æ¡Œé¢ï¼Œç‚¹å‡»ä¼šåˆ‡æ¢æ¡Œé¢é¢„è§ˆã€‚

        å½“å‰æ¡Œé¢çš„çª—å£å…³é—­åä¼šè‡ªåŠ¨å»æ‰ç©ºç™½çš„æ¡Œé¢ï¼Œä»¥æ­¤ç±»æ¨ï¼Œä¿æŒæœ€å³ä¾§åªæœ‰ä¸€ä¸ªæ–°å¢çš„æ¡Œé¢ï¼Œè·Ÿæ‰‹æœºæ“ä½œç±»ä¼¼ã€‚

    åº•éƒ¨æ˜¯å¸¸ç”¨å·¥å…·æ ï¼ˆDashï¼‰å½“å‰æ‰€æœ‰æ‰“å¼€çš„ç¨‹åºçª—å£å›¾æ ‡éƒ½åœ¨è¿™é‡Œï¼Œç‚¹å‡»å›¾æ ‡å³å¯åˆ‡æ¢åˆ°å„ä¸ªç¨‹åºï¼Œè¿˜æœ‰ä¸ªå¿«æ·å¯åŠ¨éƒ¨åˆ†å›ºå®šäº†å¸¸ç”¨çš„å‡ ä¸ªç¨‹åºçš„å›¾æ ‡

        å·¦ä¾§éƒ¨åˆ†æ˜¯é”å®š(Pin to dash)çš„å¸¸ç”¨ç¨‹åºï¼Œç‚¹å‡»å³å¯æ‰§è¡Œæ–¹ä¾¿ä½¿ç”¨

        ä¸­éƒ¨åˆ—å‡ºå½“å‰æ‰“å¼€çš„æ‰€æœ‰åº”ç”¨ç¨‹åºï¼Œç‚¹å‡»å›¾æ ‡å³å¯åœ¨å„ä¸ªåº”ç”¨é—´é€‰æ‹©åˆ‡æ¢ï¼Œåœ¨å›¾æ ‡ä¸Šå³é”®èœå•é€‰ â€œPin to Dashâ€ å¯æ·»åŠ åˆ°å¿«æ·å¯åŠ¨éƒ¨åˆ†ã€‚

        æœ€å³é‚£ä¸ª9ä¸ªç‚¹æ£‹ç›˜å¼çš„æŒ‰é’® â€œShow Appsâ€ï¼Œç‚¹å‡»å¼¹å‡ºä¸€ä¸ªæ–°çš„ç•Œé¢ï¼Œå±•ç¤ºæ‰€æœ‰åº”ç”¨çš„ â€œç¨‹åºåˆ—è¡¨â€ï¼Œåœ¨è¿™é‡ŒæŸ¥æ‰¾ä½ æƒ³è¿è¡Œçš„ç¨‹åºï¼Œæ»šè½®å³å¯ç¿»é¡µ

        æ„Ÿè§‰è¿™æ˜¯æŠŠ Windows ä»»åŠ¡æ çš„åˆ‡æ¢åº”ç”¨åŠŸèƒ½æ‹†åˆ†åˆ°äº†å¸¸ç”¨å·¥å…·æ ï¼Œä½†æ˜¯è¿™ä¸ªæœ€æœ€å¸¸ç”¨çš„å¸¸ç”¨å·¥å…·æ å´è—çš„ä¸å¥½æ‰¾ã€‚

    è„‘æ®‹çš„ä¸‰æ®µå¼æ“ä½œé€»è¾‘åºŸæ‰äº†åªç”¨é¼ æ ‡çš„æ‡’äººæ“ä½œæ–¹å¼ï¼šé€¼ç€ä½ åœ¨â€œä»»åŠ¡æ¦‚è§ˆâ€é‡Œæ‰“å­—æŸ¥æ‰¾ä½ è¦æ‰“å¼€æˆ–åˆ‡æ¢åˆ°çš„ç¨‹åºï¼Œå¯¹å¨±ä¹ç”¨æˆ·æ¥è¯´ï¼Œå¬æ­Œçœ‹ç”µå½±æµè§ˆç½‘é¡µçš„æ—¶å€™ä¸€èˆ¬åªæ˜¯ä¸€åªæ‰‹æ¡é¼ æ ‡å°±å¤Ÿäº†ï¼Œåšä¸ªåˆ‡æ¢å°±å¾—æŠ¬æ‰‹æˆ–ç‚¹åŠå¤©çœŸçš„éå¸¸ç´¯èµ˜

        æ¡Œé¢ä¸Šéƒ¨çš„ä»»åŠ¡æ æ²¡æœ‰å·²ç»æ‰“å¼€çš„åº”ç”¨çš„å„ä¸ªå›¾æ ‡ï¼Œä¸‹éƒ¨ä¹Ÿæ²¡æœ‰å¸¸ç”¨å·¥å…·æ ï¼ˆDashï¼‰ï¼Œåªèƒ½å…ˆæ‰“å¼€â€œä»»åŠ¡æ¦‚è§ˆâ€åœ¨åº•éƒ¨æ‰¾åˆ°å¸¸ç”¨å·¥å…·æ ã€‚

        å¦‚æœä½ ä¸æƒ³æ‰“å­—ï¼Œåªç”¨é¼ æ ‡ç‚¹é€‰å½“å‰å·²ç»æ‰“å¼€çš„æŸä¸ªåº”ç”¨ç¨‹åºçª—å£ï¼šå…ˆå‘¼å‡ºâ€œä»»åŠ¡æ¦‚è§ˆâ€ï¼Œåœ¨â€œä»»åŠ¡æ¦‚è§ˆâ€çš„å„ä¸ªçª—å£é¢„è§ˆé‡Œæ‰¾ï¼Œæ²¡æœ‰ç®€æ´çš„å›¾æ ‡åˆ—è¡¨äº†ï¼Œç´¯çœ¼ã€‚

        å¦‚æœä½ ä¸æƒ³æ‰“å­—ï¼Œåªç”¨é¼ æ ‡ç‚¹é€‰æ‰“å¼€åº”ç”¨ç¨‹åºï¼šå…ˆå‘¼å‡ºâ€œä»»åŠ¡æ¦‚è§ˆâ€ï¼Œå†ç‚¹å‡»å¸¸ç”¨å·¥å…·æ é‡Œçš„â€œç¨‹åºåˆ—è¡¨â€ï¼Œç„¶åæŸ¥æ‰¾ä½ è¦æ‰“å¼€çš„ç¨‹åºã€‚

        å¼ºçƒˆæ¨èåŠ¡å¿…å®‰è£…æ‰©å±• â€œDash to Dockâ€ï¼Œè§ä¸‹é¢ç« èŠ‚ [ä½¿ç”¨ gnome æ‰©å±•]ï¼Œè®©å¸¸ç”¨å·¥å…·æ æµ®åŠ¨æ˜¾ç¤ºåœ¨æ¡Œé¢ï¼Œæå¤§çš„æé«˜ä½ çš„æ“ä½œæ•ˆç‡ã€‚

çª—å£åˆ‡æ¢ï¼šä¼ ç»Ÿç†è§£ä¸Šï¼Œæ¡Œé¢ç¯å¢ƒä¸‹åº”ç”¨ç¨‹åºå¯åŠ¨åå°±æ˜¯ä¸€ä¸ªçª—å£ï¼Œå†æ¬¡å¯åŠ¨ä¸€æ¬¡è¯¥ç¨‹åºä¼šå†æ‰“å¼€ä¸€ä¸ªçª—å£ï¼Œç”¨æˆ·çš„æ—¥å¸¸æ“ä½œåŸºæœ¬å°±æ˜¯å¤šä¸ªçª—å£çš„å±•ç¤ºå’Œåˆ‡æ¢ã€‚è€Œ Gnome æŠŠçª—å£åˆ‡æ¢å½’ç±»åˆ†ç»„äº† --- åŒºåˆ†ä¸ºåº”ç”¨ç¨‹åºçš„åˆ‡æ¢(Switch-applications)å’Œåº”ç”¨ç¨‹åºçš„å¤šä¸ªå®ä¾‹çª—å£é—´çš„åˆ‡æ¢(Switch-Windows)æ“ä½œï¼Œéå¸¸éº»çƒ¦éå¸¸è®©äººç³Šæ¶‚è€Œä¸”æŠŠç®€å•äº‹æƒ…å¤æ‚åŒ–ï¼ˆç”šè‡³è¿˜æœ‰æ›´å¤æ‚çš„ï¼Œè®¾ç½®åˆ‡æ¢æ“ä½œä»…é™å½“å‰æ¡Œé¢çš„å„ä¸ªçª—å£ï¼‰

    æœ€æ–¹ä¾¿çš„æ“ä½œæ˜¯åœ¨ â€œä»»åŠ¡æ¦‚è§ˆâ€ ä¸­è¿›è¡Œé€‰æ‹©ï¼Œä¼šå±•ç¤ºæ‰€æœ‰åº”ç”¨ç¨‹åºçš„æ‰€æœ‰å®ä¾‹çª—å£ï¼Œé¼ æ ‡ç‚¹å‡»é€‰æ‹©ä½ è¦åˆ‡æ¢åˆ°çš„å®ä¾‹çª—å£å³å¯

    åˆ‡æ¢åº”ç”¨ç¨‹åº

        å¯åŠ¨åº”ç”¨ç¨‹åºå³å±•ç¤ºä¸ºå½“å‰çª—å£

        åœ¨æ‰“å¼€çš„å„åº”ç”¨ç¨‹åºé—´åˆ‡æ¢è·Ÿ Windows ç›¸åŒï¼ŒæŒ‰çƒ­é”® alt + tab æˆ– win + tabï¼šä¸€æŒ‰å³æ”¾å°±æ˜¯åˆ‡æ¢åˆ°å‰ä¸€ä¸ªåº”ç”¨ï¼ŒæŒ‰ä½ alt ç‚¹æŒ‰ tab ä¼šåœ¨åº”ç”¨ç¨‹åºåˆ—è¡¨é—´åˆ‡æ¢ï¼Œæ”¾å¼€ alt å³åˆ‡æ¢åˆ°è¯¥åº”ç”¨ç¨‹åº

            æ³¨æ„ï¼šé»˜è®¤åªåˆ‡æ¢åˆ°åº”ç”¨ç¨‹åºçš„æœ€æ–°å®ä¾‹çª—å£ï¼Œåˆ‡æ¢ä¸åˆ°è¯¥åº”ç”¨ç¨‹åºçš„å…¶å®ƒå®ä¾‹

    åœ¨ä¸€ä¸ªåº”ç”¨ç¨‹åºçš„å¤šä¸ªå®ä¾‹çª—å£é—´åˆ‡æ¢

        å¦‚æœåº”ç”¨ç¨‹åºéœ€è¦å†å¼€ä¸€ä¸ªæ–°çš„å®ä¾‹ï¼Œåœ¨ä»»åŠ¡æ æˆ–å¸¸ç”¨å·¥å…·æ çš„åº”ç”¨ç¨‹åºå›¾æ ‡ç‚¹å³é”®èœå•é€‰æ‹© â€œNew Windowâ€

        å³é”®ç‚¹å‡»å¸¸ç”¨å·¥å…·æ çš„åº”ç”¨ç¨‹åºå›¾æ ‡ï¼Œåœ¨å¼¹å‡ºèœå•çš„çª—å£åˆ—è¡¨ä¸­é€‰æ‹©åˆ‡æ¢åˆ°è¯¥åº”ç”¨ç¨‹åºçš„æŸä¸ªå®ä¾‹ï¼Œä¹Ÿå³å®ƒçš„çª—å£

        å³é”®ç‚¹å‡»ä»»åŠ¡æ çš„åº”ç”¨ç¨‹åºå›¾æ ‡ï¼Œåœ¨å¼¹å‡ºèœå•çš„çª—å£åˆ—è¡¨ä¸­ä¹Ÿå¯ä»¥é€‰æ‹©ä½ è¦åˆ‡æ¢åˆ°çš„å®ä¾‹

        ä½¿ç”¨çƒ­é”®ï¼šå½“å‰çª—å£æ˜¯ä½ çš„åº”ç”¨ç¨‹åºï¼ŒæŒ‰ alt + ~ æˆ– win + ~ã€‚ä¸€æŒ‰å³æ”¾å°±ä¼šåˆ‡æ¢åˆ°æœ€è¿‘çš„å¦ä¸€ä¸ªå®ä¾‹ï¼ŒæŒ‰ä½ alt ç‚¹æŒ‰ ~ ä¼šåœ¨å„å®ä¾‹åˆ—è¡¨é—´åˆ‡æ¢ï¼Œæ”¾å¼€ alt å³åˆ‡æ¢åˆ°è¯¥å®ä¾‹

    ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½ æ‰“å¼€äº†å¤šä¸ªåº”ç”¨ç¨‹åºï¼Œæ¯ä¸ªåº”ç”¨ç¨‹åºæ‰“å¼€äº†å¤šä¸ªå®ä¾‹ï¼Œæƒ³ä¸€æ­¥åˆ°ä½åˆ‡æ¢åˆ°æŸä¸ªå®ä¾‹åªèƒ½æŒ‰ win é”®ä» â€œä»»åŠ¡æ¦‚è§ˆâ€ é‡Œçš„æ‰€æœ‰çª—å£é¢„è§ˆé‡Œç‚¹é€‰ã€‚ä¸ç„¶åªèƒ½å…ˆ alt + tab åˆ‡æ¢åˆ°ä½ çš„åº”ç”¨ç¨‹åºï¼Œç„¶å alt + ~ åˆ‡æ¢åˆ°å®ƒæ‰“å¼€çš„å¤šä¸ªå®ä¾‹çš„æŸä¸€ä¸ªï¼Œè¿™ä¹Ÿå¤ªéº»çƒ¦äº†ã€‚

    æƒ³æŒ‰ Alt+Tab åˆ‡æ¢æœ€è¿‘çš„ä¸¤ä¸ªçª—å£ï¼Œå¿…é¡»å®‰è£…æ‰©å±• â€œAlt+Tab Scroll Workaroundâ€

ä¸ºé€‚åº”ç°ä»£æµè¡Œçš„ 16:9 å®½å±ï¼Œä¼˜åŒ–äº†åˆ†å‰²å¤šä¸ªçª—å£å æ»¡å±å¹•çš„æ“ä½œï¼š

    é¼ æ ‡åŒå‡»çª—å£æ ‡é¢˜æ çš„æ“ä½œè·Ÿ Windows ä¸€è‡´ï¼Œåœ¨æœ€å¤§åŒ–å’Œæ¢å¤å°çª—å£é—´åˆ‡æ¢ã€‚

    é¼ æ ‡ç‚¹å‡»çª—å£æ ‡é¢˜æ ä¸è¦æ”¾å¼€ï¼Œæ‹–åŠ¨åˆ°å±å¹•çš„å·¦ä¾§è¾¹ç•Œæˆ–å³ä¾§æ—¶ï¼Œä¼šå‡ºç°åŠé€æ˜çš„æ¡†æç¤ºå æ®åŠä¸ªå±å¹•ï¼Œæ¾å¼€é¼ æ ‡å·¦é”®å³å¯è®©çª—å£å åŠå±ã€‚ä¸æƒ³è¿™æ ·å°±æŠŠé¼ æ ‡å¾€å›æ‹–åŠ¨ç›´è‡³åŠé€æ˜çš„æç¤ºæ¡†æ¶ˆå¤±ï¼Œç„¶åæ¾å¼€é¼ æ ‡å·¦é”®å³å¯å–æ¶ˆè¯¥æ“ä½œã€‚åŒç†é€‰æ‹©å¦ä¸€ä¸ªçª—å£æ”¾åˆ°å¦ä¸€ä¾§ï¼Œè¿™æ ·ä¸¤ä¸ªçª—å£å„å ä¸€åŠå±å¹•ã€‚

    å¦‚æœæ˜¯å‘ä¸Šæ‹–åŠ¨çª—å£æ ‡é¢˜æ ï¼Œè§¦åŠå±å¹•é¡¶éƒ¨çš„ä»»åŠ¡æ æ—¶ä¼šæç¤ºæœ€å¤§åŒ–çª—å£ï¼Œæ¾å¼€é¼ æ ‡å·¦é”®å³å¯å®ç°ã€‚å¯¹æœ€å¤§åŒ–çª—å£ï¼Œç‚¹å‡»æ ‡é¢˜æ ä¸æ”¾å‘ä¸‹æ‹–åŠ¨é¼ æ ‡å³ä¼šæ¢å¤åˆ°å°çª—å£ã€‚

    å¦‚æœçª—å£æ²¡æœ‰æ ‡é¢˜æ ï¼ŒæŒ‰ä½ win é”®çš„åŒæ—¶é¼ æ ‡å·¦é”®ç‚¹å‡»çª—å£å†…å®¹éƒ¨åˆ†ä¸æ”¾ï¼Œå‘å„ä¸ªæ–¹å‘æ‹‰åŠ¨å³å¯ç§»åŠ¨è¯¥çª—å£ï¼Œè§¦åŠå±å¹•è¾¹ç¼˜æ—¶ç³»ç»Ÿæç¤ºè·Ÿä¸Šè¿°æ“ä½œç›¸åŒã€‚å¯¹æœ€å¤§åŒ–çª—å£ï¼Œä¸‹æ‹‰ä¼šç¼©å›ä¸ºçª—å£æ¨¡å¼ã€‚

    ä½¿ç”¨å¿«æ·é”®æœ€æ–¹ä¾¿ï¼Œåœ¨å½“å‰çª—å£æŒ‰ win + æ–¹å‘é”®å³å¯ï¼šå‘ä¸Šæœ€å¤§åŒ–çª—å£ï¼Œå‘ä¸‹æ¢å¤å°çª—å£ï¼Œå‘å·¦å æ®å±å¹•å·¦åŠéƒ¨åˆ†ï¼Œå‘å³å æ®å±å¹•å³åŠéƒ¨åˆ†ã€‚

å…¶å®ƒçƒ­é”®ï¼š

    å…³é—­çª—å£ alt + F4ï¼Œè·Ÿ Windows ç›¸åŒã€‚

    ä¸´æ—¶ç¦»å¼€ç”µè„‘ï¼Œç”¨ win + l é”å±ï¼Œè·Ÿ Windows ç›¸åŒã€‚

ç¬”è®°æœ¬ç”¨æˆ·ä½¿ç”¨è§¦æ‘¸æ¿

    åŒæŒ‡æ»‘åŠ¨ç›¸å½“äºé¼ æ ‡æ“ä½œæ»šåŠ¨æ¡ï¼Œä½†æ˜¯ï¼šå‚ç›´æ»šåŠ¨æ¡çš„æ“ä½œæ˜¯é¡ºæ–¹å‘ï¼Œæ°´å¹³æ»šåŠ¨æ¡å˜æˆäº†é€†æ–¹å‘ï¼

    è§¦æ‘¸æ¿æ“ä½œé»˜è®¤å±…ç„¶ä¸æ”¯æŒå•æŒ‡ç‚¹å‡»é€‰ä¸­æ–‡å­—ï¼Œéœ€è¦å®‰è£… Gnome Tweaksï¼Œå‹¾é€‰ â€œMouse Click Emulatsion-->Fingerâ€ã€‚è¿™æ ·ä¸€èˆ¬çš„æ–‡æœ¬ç¼–è¾‘æ“ä½œå°±æ¯”è¾ƒæ–¹ä¾¿äº†ï¼šå•æŒ‡æ»‘åŠ¨ç§»åŠ¨é¼ æ ‡ï¼Œå•æŒ‡ç‚¹å‡»é€‰æ‹©æ–‡å­—ï¼ŒåŒæŒ‡æ»‘åŠ¨æ»šåŠ¨è¿›åº¦æ¡ã€‚

    åœ¨é”å±ç•Œé¢ï¼ŒåŒæŒ‡ä¸Šæ»‘è¿›å…¥è§£é”ç•Œé¢ï¼ŒåŒæŒ‡ä¸‹æ‹‰ç»§ç»­é”å±

å…¶å®ƒä¸€äº›ä½¿ç”¨ä¹ æƒ¯çš„å·®åˆ«

    åœ¨ç”¨æˆ·ç™»å½•ç•Œé¢ï¼Œé•¿æ—¶é—´æ— æ“ä½œä¼šæ¯å±ï¼Œå…³é—­èŠ‚èƒ½é€‰é¡¹æ— æ•ˆã€‚æ™ƒé¼ æ ‡æˆ–è§¦æ‘¸æ¿ä¸ä¼šå”¤é†’ï¼Œéœ€è¦æŒ‰é”®

#### æ¡Œé¢ç¯å¢ƒæç¤ºç³»ç»Ÿæ›´æ–°

åˆšç™»å½•æ¡Œé¢åï¼Œä¼šè‡ªåŠ¨æ£€æŸ¥å’Œä¸‹è½½ç³»ç»Ÿæ›´æ–°ï¼Œåœ¨æ­¤æœŸé—´ä¼šæœ‰æ’ä»–æ€§ï¼š

    æ— æ³•æŸ¥çœ‹æ¡Œé¢è½¯ä»¶çš„è¯¦æƒ…æˆ–æ·»åŠ åˆ é™¤è½¯ä»¶ï¼Œä¼šé•¿æ—¶é—´ç­‰å¾…

    æŸ¥çœ‹è½¯ä»¶ä»“åº“é…ç½®ä¹Ÿä¼šé•¿æ—¶é—´ç­‰å¾…

å¦‚æœåœ¨æç¤ºç³»ç»Ÿæ›´æ–°æ—¶é€‰æ‹©å®‰è£…ï¼Œä¼šé‡æ–°å¯åŠ¨è®¡ç®—æœºï¼š

    é‡å¯å‰åŠ¡å¿…ä¿å­˜ä½ çš„å½“å‰å·¥ä½œ

å‘½ä»¤è¡Œè¿è¡Œ `sudo dnf upgrade` ä¼šç«‹å³å®‰è£…æ›´æ–°ï¼Œé‡å¯åç”Ÿæ•ˆï¼Œæ¡Œé¢ç¯å¢ƒéœ€è¦å…ˆé‡å¯æ‰å®‰è£…æ›´æ–°ï¼š

    å¦‚æœåœ¨å…³æœºæ—¶é€‰æ‹©å®‰è£…æ›´æ–°ï¼Œä¼šå…ˆé‡å¯å®‰è£…æ›´æ–°ç„¶åå†å…³æœº

    é‡å¯æ“ä½œåŒæ ·ï¼Œå¦‚æœåœ¨é‡å¯æ—¶é€‰æ‹©å®‰è£…æ›´æ–°ï¼Œä¼šåœ¨é‡å¯åå®‰è£…æ›´æ–°ï¼Œç„¶åå†æ¬¡é‡å¯

#### ä½¿ç”¨æ¡Œé¢ç¯å¢ƒçš„ç‰¹æœ‰å‘½ä»¤ gio

    `man gio`

    GVFS URI  https://access.redhat.com/documentation/zh-cn/red_hat_enterprise_linux/9/html-single/administering_the_system_using_the_gnome_desktop_environment/index#gvfs-uri-format-for-network-shares_browsing-files-on-a-network-share

    å¯ç”¨çš„ GIO å‘½ä»¤ https://access.redhat.com/documentation/zh-cn/red_hat_enterprise_linux/9/html-single/administering_the_system_using_the_gnome_desktop_environment/index#available-gio-commands_managing-storage-volumes-in-gnome

åŸºæœ¬æ¦‚å¿µ

    GVFS æä¾›å®Œæ•´çš„è™šæ‹Ÿæ–‡ä»¶ç³»ç»ŸåŸºç¡€æ¶æ„ï¼Œå¹¶å¤„ç† GNOME æ¡Œé¢ä¸­çš„å­˜å‚¨ã€‚

    GVFS URIï¼ˆç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ï¼‰ å­—ç¬¦ä¸²ä½œä¸ºåœ°å€ï¼Œè¯­æ³•ä¸Šä¸ Web æµè§ˆå™¨ä¸­çš„ URL åœ°å€ç±»ä¼¼ã€‚

    GVFS æœ‰åŠ©äºæŒ‚è½½èµ„æºã€‚è¿™äº›æŒ‚è½½åœ¨å¤šä¸ªåº”ç”¨ä¹‹é—´å…±äº«ã€‚èµ„æºåœ¨è¿è¡Œçš„æ¡Œé¢ä¼šè¯ä¸­å…¨å±€è·Ÿè¸ªï¼Œè¿™æ„å‘³ç€å³ä½¿æ‚¨é€€å‡ºè§¦å‘æŒ‚è½½çš„åº”ç”¨ç¨‹åºï¼ŒæŒ‚è½½ä»å¯ç”¨äºä»»ä½•å…¶ä»–åº”ç”¨ç¨‹åºã€‚å¤šä¸ªåº”ç”¨å¯ä»¥åŒæ—¶è®¿é—®æŒ‚è½½ï¼Œé™¤éæŒ‚è½½è¢«åç«¯é™åˆ¶äº†ã€‚æŸäº›åè®®è®¾è®¡ä¸Šä»…å…è®¸ä¸€ä¸ªé€šé“ã€‚

    GVFS å¯æŒ‚è½½ /run/media/ ç›®å½•ä¸­çš„å¯ç§»åŠ¨ä»‹è´¨ã€‚

æ˜¾ç¤ºå›æ”¶ç«™

    $ gio list trash://

    $ gvfs-ls trash://

    $ gio info trash://
    display name: Trash
    name: /
    type: directory
    uri: trash:///
    attributes:
    standard::type: 2
    standard::name: /
    standard::display-name: Trash
    standard::icon: user-trash, user-trash-symbolic
    standard::content-type: inode/directory
    standard::symbolic-icon: user-trash-symbolic, user-trash
    id::filesystem: trash:
    trash::item-count: 0
    metadata::nautilus-icon-view-sort-by: trashed_on
    metadata::nautilus-icon-view-sort-reversed: true

åˆ—å‡ºæœ¬åœ° /tmp ç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶

    $ gio list file:///tmp

ä»è¿œç¨‹ç³»ç»Ÿåˆ—å‡ºæ–‡æœ¬æ–‡ä»¶çš„å†…å®¹

    # ftp://user@ftp.myserver.net/
    # sftp://[2001:db8::1]
    # smb://gnome.org
    # nfs://server/path
    $ gio cat ssh://joe@ftp.myserver.net/home/joe/todo.txt

å°†ä¹‹å‰çš„æ–‡æœ¬æ–‡ä»¶å¤åˆ¶åˆ°æœ¬åœ° /tmp ç›®å½•ä¸­

    $ gio copy ssh://joe@ftp.myserver.net/home/joe/todo.txt /tmp/

å¦‚æœè¿œç¨‹æ–‡ä»¶ç³»ç»Ÿç»å¸¸æ–­ç½‘ï¼Œå¤„ç†åŠæ³•æ˜¯ï¼š

    å¸è½½æ–‡ä»¶ç³»ç»Ÿ

    å†æ¬¡æŒ‚è½½å®ƒ

#### è®¾ç½®é€‰é¡¹

ç‚¹å‡»æ¡Œé¢å³ä¸Šè§’çš„å£°éŸ³ç”µæºå›¾æ ‡çš„æ ç›®ï¼Œé€‰æ‹©å¼¹å‡ºèœå•çš„â€œSettingsâ€ã€‚

åˆšè£…å®Œç³»ç»Ÿåï¼Œä¸€èˆ¬è¿›è¡Œå¦‚ä¸‹è®¾ç½®ï¼š

    Wi-Fi ï¼šè®¾ç½®è¿æ¥ä½ çš„æ— çº¿è·¯ç”±å™¨

    Privacy
        Screen Lockï¼šé€‰æ‹©è‡ªåŠ¨é»‘å±çš„å»¶æ—¶ï¼Œé»‘å±åæ˜¯å¦é”å±
        Location Servicesï¼šå¦‚æœé€‰æ‹©å…³é—­ï¼Œæ¡Œé¢çš„å¤©æ°”ç»„ä»¶éœ€è¦æ‰‹åŠ¨è®¾ç½®ä½ çš„å½“å‰åŸå¸‚
        Microphoneï¼šä¸éœ€è¦å…³é—­ï¼Œå®‰è£…ä¸‹é¢ä»‹ç»çš„ gnome æ‰©å±• nothing to say æ‰‹åŠ¨æ§åˆ¶å³å¯
        Diagnosticsï¼šå…³é—­è‡ªåŠ¨é—®é¢˜æŠ¥å‘Š

    System:

        Remote Desktop è¿œç¨‹æ¡Œé¢ç»†åˆ†ä¸ºä¸¤ç§ï¼Œä»¿æ•ˆ Windowsï¼š

            Desktop Sharingï¼šè¿œç¨‹æ¡Œé¢å…±äº«ï¼Œåªèƒ½åœ¨æœ¬åœ°ç”¨æˆ·ç™»å½•çš„æƒ…å†µä¸‹ä»è¿œç¨‹è¿æ¥åˆ°è¯¥ç”¨æˆ·çš„æ¡Œé¢ï¼Œæœ¬åœ°ç”¨æˆ·éšæ—¶å¯ä»¥è§‚çœ‹åˆ°è¿œç¨‹çš„æ“ä½œå¹¶æ¥ç®¡é¼ æ ‡ï¼Œç±»ä¼¼ Windows çš„è¿œç¨‹ååŠ©ã€‚

            Remote Loginï¼šè¿œç¨‹æ¡Œé¢ç™»é™†ï¼Œç±»ä¼¼ Windows çš„è¿œç¨‹æ¡Œé¢ï¼Œè¿œç¨‹è¿æ¥ç›´æ¥å»ºç«‹ç”¨æˆ·ä¼šè¯ç™»é™†æ¡Œé¢ã€‚

            è¿™ä¸¤ä¸ªåŠŸèƒ½é»˜è®¤éƒ½ä½¿ç”¨ 3389 ç«¯å£ï¼Œæ‰€ä»¥å¦‚æœåŒæ—¶å¼€å¯éœ€è¦æ‰‹åŠ¨è°ƒæ•´ä¸ºä¸ä¸€æ ·ã€‚å…¶å®åªå¼€å¯å…¶ä¸­ä¸€ä¸ªå°±å¯ä»¥äº†ï¼Œé…Œæƒ…å†³å®šã€‚

            éœ€è¦ç®¡ç†å‘˜æƒé™è¿›è¡Œè®¾ç½®ï¼Œå…ˆç‚¹å‡»çª—å£æ ‡é¢˜æ ä½ç½®çš„å¼€å…³ï¼Œå¼€å¯åæ‰èƒ½è®¾ç½®å„ä¸ªé€‰é¡¹ã€‚

        Secure Shell: å¼€å¯ sshd æœåŠ¡ï¼Œè¿™æ ·å¯ä»¥è¿œç¨‹sshè¿æ¥åˆ°æœ¬æœºï¼Œä½¿ç”¨çš„ç”¨æˆ·åæ˜¯ä½ è£…ç³»ç»Ÿæ—¶å€™ç»™å‡ºçš„ï¼Œæ³¨æ„ä¸æ˜¯é‚£ä¸ªåªç”¨äºæ˜¾ç¤ºçš„ â€œå‹å¥½åç§°â€

    Power:
        Power Modeï¼šå°½å¯èƒ½é€‰â€œPerformanceâ€ï¼Œä¸ç„¶æ¡Œé¢åˆæ¬¡ååº”æ…¢ï¼Œç¨‹åºåˆ‡æ¢æ…¢ã€‚
        Power Saving Optionï¼šé…Œæƒ…é€‰æ‹©

    Keyboradï¼š
        Input Sourcesï¼šå»ºè®®ä¸¤ä¸ªè¾“å…¥æ³•ï¼Œè‹±æ–‡å’Œä¸­æ–‡ï¼ˆæ‹¼éŸ³ï¼‰ï¼Œè‹±æ–‡é¡ºåºåœ¨ä¸Šï¼Œè¿™æ ·åœ¨ä½¿ç”¨æ–‡ä»¶ç®¡ç†å™¨æ—¶æŒ‰é”®ä¼šè‡ªåŠ¨æˆä¸ºçƒ­é”®å®šä½æ–‡ä»¶é¦–å­—æ¯ï¼Œæ–¹ä¾¿ã€‚åˆ‡æ¢çƒ­é”®æ˜¯ Win+ç©ºæ ¼ã€‚
        Input Source Switchingï¼šå»ºè®®é€‰æ‹©ä¸åŒçš„çª—å£å•ç‹¬ä¿æŒè‡ªå·±çš„è¾“å…¥æ³•çŠ¶æ€ã€‚

    Removable Mediaï¼šå‹¾é€‰ä¸è®¸è‡ªåŠ¨è¿è¡Œ

    Usersï¼š
        Fingerprint Loginï¼šè®¾ç½®ä½ çš„æŒ‡çº¹è¯†åˆ«ç™»å½•æ¡Œé¢ï¼Œæ³¨æ„ä¸ä¼šè§£é” gnome é’¥åŒ™ç¯ï¼Œåœ¨ä½¿ç”¨å®ƒä¿å­˜çš„ ssh æˆ– gpg çš„å¯†é’¥æ—¶è¿˜æ˜¯éœ€è¦è¾“å…¥ç™»å½•å¯†ç 

##### Gnome Tweaks

æ¡Œé¢ç»„ä»¶æ‰©å±•çš„é€‰é¡¹ï¼Œåœ¨è½¯ä»¶ç®¡ç†é‡Œæœç´¢å®‰è£… â€œtweaksâ€ ï¼Œæˆ–ä½¿ç”¨å‘½ä»¤è¡Œ

    # sudo apt install gnome-tweak-tool gnome-shell-extensions
    $ sudo dnf install gnome-tweaks

å®‰è£… Tweaks ååœ¨ â€œShow Appsâ€ é‡Œæ‰¾å®ƒæ‰“å¼€å³å¯ï¼Œä¸€èˆ¬è¦è°ƒæ•´å¦‚ä¸‹é€‰é¡¹

    center new window   æ–°çª—å£å±…ä¸­æ‰“å¼€ï¼Œä¸ç„¶æ¯æ¬¡éƒ½æ˜¯æ­ªåœ¨å½“å‰å±å¹•çš„å·¦ä¸Šï¼Œè€Œä¸”äº’ç›¸è¦†ç›–ï¼Œå¤ªä¸æ–¹ä¾¿äº†

    ç»™çª—å£çš„ä»»åŠ¡æ æ·»åŠ æœ€å¤§åŒ–æœ€å°åŒ–æŒ‰é’®ï¼Œæ–¹ä¾¿é¼ æ ‡æ“ä½œ

    åœ¨ â€œAppearanceâ€ é€‰æ‹©ä»»åŠ¡æ ä¸»é¢˜ï¼Œéœ€è¦å…ˆå®‰è£… â€œUser Themesâ€ æ‰©å±•ï¼Œè§ç« èŠ‚ [ä½¿ç”¨ gnome ä¸»é¢˜]

    ç¬”è®°æœ¬ç”¨æˆ·å‹¾é€‰â€œMouse Click Emulatsion-->Fingerâ€ï¼Œå¦åˆ™è§¦æ‘¸æ¿æ“ä½œä¸æ”¯æŒå•æŒ‡ç‚¹å‡»é€‰ä¸­æ–‡å­—ã€‚è¿™æ ·ä¸€èˆ¬çš„æ–‡æœ¬ç¼–è¾‘æ“ä½œå°±æ¯”è¾ƒæ–¹ä¾¿äº†ï¼Œå•æŒ‡æ»‘åŠ¨ç§»åŠ¨é¼ æ ‡ï¼Œå•æŒ‡ç‚¹å‡»é€‰æ‹©æ–‡å­—ï¼ŒåŒæŒ‡ç§»åŠ¨æ»šåŠ¨å±å¹•ã€‚

##### GDM çš„ â€œæ³¨å†Œè¡¨ç¼–è¾‘å™¨â€ --- ä½¿ç”¨ GSettings å’Œ dconf é…ç½®æ¡Œé¢

å‘½ä»¤è¡Œæ–¹å¼è°ƒæ•´é€‰é¡¹ï¼Œç†è§£ä¸ºLinux ä¸‹çš„ â€œæ³¨å†Œè¡¨ç¼–è¾‘å™¨â€

    https://wiki.archlinux.org/title/GDM#dconf_configuration

    https://access.redhat.com/documentation/zh-cn/red_hat_enterprise_linux/7/html/desktop_migration_and_administration_guide/profiles

GSettings å®é™…ä¸Šæ˜¯ä¸€å¥—å¯ä½¿ç”¨å¤šä¸ª storage backends çš„ API ï¼Œå…¶æ–‡ä»¶æ˜¯ xml æ ¼å¼çš„ï¼Œå¯ä»¥ç†è§£ä¸º Linux æ¡Œé¢ç¯å¢ƒçš„æ³¨å†Œè¡¨æ•°æ®åº“æ–‡ä»¶ã€‚

GSettings æ˜¯åº”ç”¨è®¾ç½®çš„é«˜çº§ APIï¼Œæ˜¯ dconf çš„å‰ç«¯ã€‚

    gsettings å‘½ä»¤è¡Œå·¥å…·ç”¨äºæŸ¥çœ‹å’Œæ›´æ”¹ç”¨æˆ·è®¾ç½®ï¼ŒæŠŠå®ƒç†è§£ä¸ºå‘½ä»¤è¡Œç‰ˆçš„æ³¨å†Œè¡¨ç¼–è¾‘å™¨

dconf æ˜¯ä¸€ä¸ªåŸºäºé”®çš„é…ç½®ç³»ç»Ÿï¼Œç”¨äºç®¡ç†ç”¨æˆ·è®¾ç½®ã€‚å®ƒæ˜¯ Red Hat Enterprise Linux 7 ä¸­ä½¿ç”¨çš„ GSettings çš„åç«¯ã€‚dconf ç®¡ç†ä¸€ç³»åˆ—ä¸åŒçš„è®¾ç½®ï¼ŒåŒ…æ‹¬ GDMã€åº”ç”¨ç¨‹åºå’Œä»£ç†è®¾ç½®ï¼Œå¯ä»¥ç†è§£ä¸º Linux æ¡Œé¢ç¯å¢ƒçš„æ³¨å†Œè¡¨æ•°æ®åº“ã€‚

    dconf å‘½ä»¤è¡Œå·¥å…·ç”¨äºä»/å‘ dconf æ•°æ®åº“è¯»å†™å•ä¸ªå€¼æˆ–æ•´ä¸ªç›®å½•ï¼ŒæŠŠå®ƒç†è§£ä¸ºæ³¨å†Œè¡¨æ•°æ®ç»´æŠ¤ç”¨çš„åº•å±‚ç®¡ç†å·¥å…·ã€‚

å¦‚æœéœ€è¦ä¿®æ”¹æ¡Œé¢ç¯å¢ƒä¸‹çš„ç³»ç»Ÿçš„é…ç½®å‚æ•°ï¼Œä¸€èˆ¬å¯ä»¥ä½¿ç”¨å›¾å½¢åŒ–å·¥å…· Dconf Editorï¼Œæˆ– gsettings å‘½ä»¤è¡Œå·¥å…·ã€‚

#### ä½¿ç”¨ gnome æ‰©å±•

    åˆšè£…å®Œç³»ç»Ÿä¹‹åçš„ Gnome æ¡Œé¢åœ¨ç”¨æˆ·ä½¿ç”¨å¼•å¯¼æ–¹é¢å¾ˆå¼±ï¼Œä¼šè®©ä½ å‘æ¥ï¼Œæ„Ÿè§‰ä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œä¹Ÿä»€ä¹ˆéƒ½ä¸èƒ½è®¾ç½®

Gnome æ¡Œé¢å¼ºè°ƒç®€æ´ï¼Œèšç„¦äºè¿…é€ŸæŠ•å…¥å·¥ä½œï¼Œä» gnome 43 å¼€å§‹ç”šè‡³æŠŠæ–‡ä»¶ç®¡ç†å™¨çš„ä¸»é¢˜è‰²å½©å®šåˆ¶éƒ½å–æ¶ˆäº†ã€‚è¿™ä¸ kde æ¡Œé¢é¢„ç½®å¤§é‡åŠŸèƒ½ä¾›ç”¨æˆ·æŠŠç©ä¸åŒï¼Œåœ¨ Gnome æ¡Œé¢æ²¡æœ‰ä»€ä¹ˆè®¾ç½®é€‰é¡¹ï¼Œå¤§å¤šæ•°å®šåˆ¶åŠŸèƒ½éœ€è¦ç”¨æˆ·è‡ªè¡Œå®‰è£…æ‰©å±•æ‰èƒ½ä½¿ç”¨

    https://zhuanlan.zhihu.com/p/34608388

    https://opensource.com/article/19/8/extensions-gnome-desktop

    https://docs.fedoraproject.org/en-US/quick-docs/gnome-shell-extensions/

    ä»‹ç»ä¸€äº›æœ€å¸¸ç”¨çš„æ‰©å±•

        https://www.cnblogs.com/keatonlao/p/12686234.html

å¦‚æœæƒ³ä½¿ç”¨å…¶å®ƒå„ç§æ‰©å±•ï¼Œåªèƒ½å»ç½‘ç«™ <https://extensions.gnome.org/> è‡ªè¡Œæœç´¢ä¸‹è½½ã€‚ç°åœ¨çš„ GNOME æ¡Œé¢ç»„ä»¶è‡ªå¸¦çš„æ‰©å±•ç®¡ç†å™¨ â€œExtension Managerâ€ æ›¿æ¢æ‰äº†ä¹‹å‰çš„ â€œGNOME Extensionsâ€ï¼Œä¸éœ€è¦å»ç½‘ç«™å°±å¯ä»¥æœç´¢ä¸‹è½½ï¼Œåœ¨è½¯ä»¶ç®¡ç†é‡Œæœç´¢å®‰è£… â€œExtension Managerâ€ å³å¯ï¼Œæˆ–ä½¿ç”¨å‘½ä»¤è¡Œå®‰è£… flatpak ç‰ˆæœ¬

    # å‘½ä»¤è¡Œå®‰è£…çš„å¥½å¤„æ˜¯èƒ½çœ‹åˆ°ç»†åˆ†çš„è¿›åº¦
    $ flatpak install flathub com.mattjakeman.ExtensionManager

    å¦‚æœä»ç„¶æƒ³ä½¿ç”¨ç½‘ç«™æµè§ˆç„¶åå®‰è£…çš„æ–¹å¼

        å…ˆæµè§ˆå™¨è®¿é—®å¦‚ä¸‹ç½‘å€ï¼Œç‚¹å‡»é¡¶éƒ¨æç¤ºï¼Œå®‰è£…æµè§ˆå™¨ç»„ä»¶

        https://extensions.gnome.org/

            ä»‹ç» https://wiki.gnome.org/Projects/GnomeShell

        ç„¶åå®‰è£…æœ¬åœ°æ¶ˆæ¯ç»„ä»¶

            $ sudo dnf install gnome-browser-connector  # åŸå chrome-gnome-shell

æ¨èæ‰“å¼€çš„å†…ç½®æ‰©å±•ï¼š

    Application Menu        å¸¸ç”¨å·¥å…·æ çš„ â€œShow Appsâ€ æŒ‰é’®ä¼šç½—åˆ—æ‰€æœ‰çš„åº”ç”¨ç¨‹åºï¼Œè½¯ä»¶å®‰è£…å¤šäº†ä¹‹åå¤ªä¹±äº†ï¼Œç”¨è¿™ä¸ªç»™ä½ åœ¨ä»»åŠ¡æ ä¸ºåº”ç”¨ç¨‹åºæ·»åŠ åŸºäºç±»åˆ«çš„èœå•ï¼Œæ–¹ä¾¿ä½ çš„é€‰æ‹©ï¼Œæ„Ÿè§‰å†åŠ ä¸Šä¸ªæ‰“å­—å³æœç´¢åˆ—å‡ºç»“æœå’Œåˆ—å‡ºåˆšæ‰“å¼€çš„ç¨‹åºçš„åŠŸèƒ½æ›´å¥½ã€‚

æ¨èå®‰è£…çš„ç¬¬ä¸‰æ–¹æ‰©å±•ï¼š

æå‡æ•ˆç‡ç±»

    Dash to Dock            æŠŠå¸¸ç”¨å·¥å…·æ å˜æˆåœ¨æ¡Œé¢çš„æµ®åŠ¨å·¥å…·æ ï¼Œå°±è·Ÿ macOS ä¸€æ ·äº†ï¼Œä¸éœ€è¦è¿›å…¥â€œä»»åŠ¡æ¦‚è§ˆâ€æ‰èƒ½æ‰¾åˆ°äº†ã€‚æµ®åŠ¨å·¥å…·æ åœ¨ç”¨æˆ·æ‰“å¼€çš„åº”ç”¨ç¨‹åºçª—å£è¦†ç›–è¯¥åŒºåŸŸåå°±ä¼šè‡ªåŠ¨éšè—ï¼Œä»»ä½•æ—¶å€™é¼ æ ‡åœ¨å±å¹•çš„åº•è¾¹ä¸­éƒ¨ç¢°ç¢°å°±ä¼šå¼¹å‡ºï¼ˆä¹Ÿå¯è®¾ç½®ä¸ºæ€»æ˜¯æ˜¾ç¤ºï¼‰ã€‚æˆ‘æœ€å¸¸ç”¨çš„æ“ä½œå°±æ˜¯é¼ æ ‡æ’å±å¹•åº•éƒ¨ï¼Œå°±æ’å‡ºæ¥æµ®åŠ¨å·¥å…·æ äº†ã€‚å¯¹å®½å±ç”¨æˆ·æ¥è¯´æŠŠæµ®åŠ¨å·¥å…·æ è®¾ç½®ä¸ºæ˜¾ç¤ºåœ¨å±å¹•å·¦ä¾§è¾¹æœ€æ–¹ä¾¿ã€‚

        ç«å“ Dash2Dock Animated(åŸåDash2Dock Lite)<https://extensions.gnome.org/extension/4994/dash2dock-lite/>ï¼Œä»¿ MacOS çš„åŠ¨ç”»æ•ˆæœï¼Œå“åº”æ›´æ•æ·ã€‚

    Dash to Panel           ä½¿ç”¨ä¹ æƒ¯æ¨¡ä»¿ Windows ä»»åŠ¡æ ï¼ŒæŠŠå¸¸ç”¨å·¥å…·æ å˜æˆæ¡Œé¢åº•éƒ¨çš„å›ºå®šå·¥å…·æ ï¼Œå³é”®èœå•å¾ˆæ–¹ä¾¿ï¼Œä¹Ÿæ·»åŠ äº†æŒ‰é’®â€œæ˜¾ç¤ºæ¡Œé¢â€ã€‚è¿™æ ·å°±ä¸éœ€è¦å†…ç½®çš„ Application Menu æ‰©å±•äº†ã€‚

    ä¸Šé¢è¿™ä¿©æ‰©å±•å¿…è£…ä¸€ä¸ªï¼Œå¤§å¤§æå‡ä½ çš„å·¥ä½œæ•ˆç‡ã€‚äºŒè€…éƒ½å¯ä»¥è®¾ç½®ä»»åŠ¡æ å›¾æ ‡æ˜¾ç¤ºæ‰“å¼€çª—å£ä¸ªæ•°ï¼Œæ»šåŠ¨é¼ æ ‡åˆ‡æ¢å·¥ä½œåŒºï¼Œé‡å¤ç‚¹å‡»å›¾æ ‡å¯ä»¥åœ¨åŒä¸€åº”ç”¨çš„å¤šä¸ªçª—å£é—´åˆ‡æ¢å¹¶æœ€å°åŒ–çª—å£ç­‰æ–¹ä¾¿åŠŸèƒ½ã€‚

    quake-mode              è®¾ç½®çƒ­é”®ï¼Œä»¥ä¸‹æ‹‰æ–¹å¼è°ƒå‡ºä½ çš„ç¨‹åºçª—å£ï¼Œæ‰€æœ‰å·¥ä½œåŒºå…±äº«è¯¥ç¨‹åºï¼Œå†æ¬¡æŒ‰çƒ­é”®å³æ”¶å›è¯¥çª—å£ã€‚å¯¹ç¨‹åºå‘˜æ¥è¯´ï¼Œè®¾ç½®çƒ­é”® alt + enter è°ƒå‡ºä¸€ä¸ªåŠå±çš„ terminal çª—å£æå…¶æ–¹ä¾¿å®ç”¨ã€‚

        https://extensions.gnome.org/extension/1411/quake-mode/
            https://github.com/repsac-by/gnome-shell-extension-quake-mode

        è¯¥æ‰©å±•ç›®å‰ä¸æ”¯æŒ Gnome 45+ï¼Œå¯ä»¥å®‰è£… ddterm åº”æ€¥ã€‚

        ç›®å‰æ”¯æŒGnome 45+ï¼Œä½†æ²¡æœ‰é€šè¿‡ gnome æ‰©å±•çš„å®¡æŸ¥è§„èŒƒï¼Œæ— æ³•åœ¨ç½‘ç«™å®‰è£…ï¼Œæºç ç½‘ç«™æä¾›äº†æ‰‹åŠ¨å®‰è£…çš„åŠæ³•ï¼š

            git clone --depth=1 https://github.com/repsac-by/gnome-shell-extension-quake-mode.git

            cd gnome-shell-extension-quake-mode

            gnome-extensions pack quake-mode@repsac-by.github.com --extra-source={quakemodeapp,indicator,util}.js

            gnome-extensions install quake-mode@repsac-by.github.com.shell-extension.zip --force

    Coverflow Alt-Tab       åƒ Windows çš„ win + tab å½¢å¼çš„ç«‹ä½“å‘ˆç°åˆ‡æ¢çª—å£ï¼Œè€Œä¸”å¯ä»¥æ²»æ„ˆ gnome ç›®å‰ä¸èƒ½æŒ‰ Alt+Tab åˆ‡æ¢æœ€è¿‘ä½¿ç”¨çš„ä¸¤ä¸ªçª—å£ã€‚gnome çš„é»˜è®¤ä¹ æƒ¯ï¼Œåªèƒ½åˆ‡æ¢åˆ°åº”ç”¨ï¼šAlt+Tab åˆ—è¡¨æ˜¯åº”ç”¨çª—å£ï¼ŒæŒ‰ä½ Alt æŒç»­ç‚¹å‡» tab å¾ªç¯åˆ°æŸä¸ªå¤šå®ä¾‹çš„åº”ç”¨çª—å£æ—¶ï¼Œä¼šåœ¨ä¸Šé¢å†æ˜¾ç¤ºä¸€ä¸ªåˆ—è¡¨å‘ˆç°è¯¥åº”ç”¨çš„å¤šä¸ªå®ä¾‹ã€‚åˆ‡æ¢åˆ°åº”ç”¨çš„çª—å£åï¼ŒæŒ‰ Alt+` åœ¨åº”ç”¨çš„å¤šä¸ªå®ä¾‹é—´åˆ‡æ¢ã€‚

        å®ç° Windows ä»»åŠ¡æ åˆ‡æ¢çš„ä¹ æƒ¯ï¼šé€‰ AppSwitch è®¾ç½®é¡µï¼Œç‚¹å¼€ â€œMake ... Like the Windows ...â€ æŒ‰é’®ï¼Œè¿™æ ·å°±ä¸å†æŠŠçª—å£åˆ†ç»„ä¸ºåº”ç”¨å’Œåº”ç”¨çš„å¤šä¸ªå®ä¾‹ï¼Œè¿˜è¦é€‰ Windows è®¾ç½®é¡µç‚¹å¼€ â€œWorkspacesâ€ é€‰ â€œAll workspacesâ€ï¼Œå¦åˆ™ä¼šä¼˜å…ˆå¾ªç¯å½“å‰å·¥ä½œåŒºçš„çª—å£ã€‚

    Grand Theft Focus       æ‰“å¼€æ–‡ä»¶å¯¹è¯æ¡†æ˜¾ç¤ºåœ¨ä½ çš„åº”ç”¨çª—å£åé¢ï¼Œç„¶åç³»ç»Ÿå¼¹é€šçŸ¥å‘Šè¯‰ä½ æœ‰ä¸ªå¯¹è¯æ¡†æ‰“å¼€äº†ã€‚ã€‚ã€‚è¿™æ˜¯ç—…ï¼Œå¾—æ²»ï¼ ç«å“ window-is-ready-notification-removerï¼Œæˆ–ç›´æ¥è¿è¡Œå‘½ä»¤ `gsettings set org.gnome.desktop.wm.preferences focus-new-windows 'smart'`ã€‚

    Unblank lock screen     gnomeçš„å±å¹•é•¿æ—¶é—´ç©ºé—²è‡ªåŠ¨é”å±é‡Œæ²¡æœ‰å•ç‹¬çš„é”å±ï¼Œåªæœ‰é»‘å±å¹¶é”å±æˆ–é»‘å±ä¸é”å±ï¼Œè¦æ˜¯é¼ æ ‡æ™ƒä¸é†’å°±åªèƒ½è’™ç€æ‰“å¯†ç äº†ï¼Œè¿™ä¹Ÿæ˜¯ç—…ï¼Œå¾—æ²»ï¼

    Alphabetical App Grid   åº”ç”¨ç¨‹åºåˆ—è¡¨â€œå±…ç„¶â€æ˜¯ä¸æŒ‰å­—æ¯é¡ºåºæ’åˆ—çš„ï¼Œè€Œä¸”æ— æ³•æ‹–æ”¾è°ƒæ•´ä½ç½®ï¼Œè¿™æ˜¯ä¸æ˜¯è¯¥æ²»çš„ç—…ï¼ç”¨è¿™ä¸ªæ‰©å±•å¼ºåˆ¶æŒ‰å­—æ¯é¡ºåºæ’åˆ—ã€‚

    Auto Move Windows       æŒ‡å®šåº”ç”¨ç¨‹åºåœ¨æŒ‡å®šæ¡Œé¢æ‰“å¼€çª—å£ã€‚å¯¹ç»å¸¸åŒæ—¶æ‰“å¼€å¾ˆå¤šåº”ç”¨ç¨‹åºçš„ç”¨æˆ·æ¥è¯´ï¼ŒæŒ‰æ¡Œé¢å½’ç±»å„ä¸ªåº”ç”¨ç¨‹åºçš„çª—å£ï¼Œéå¸¸æ–¹ä¾¿ã€‚ç«å“ put windowsã€‚

    Tiling Shell            é€‚åˆå¤§å±ç”¨æˆ·ï¼Œæä¾›å¤šçª—å£å¸ƒå±€æ–¹æ¡ˆï¼Œé¼ æ ‡æ‹–åŠ¨çª—å£åˆ°ä»»åŠ¡æ ä¼šæç¤ºå¦‚ä½•å¸ƒå±€ï¼Œæå‡ä½ å¤šå¼€è½¯ä»¶æ—¶çš„åŠå…¬æ•ˆç‡

    Lock Keys               æœ‰äº›é”®ç›˜çš„æ•°å­—é”®ç›˜å’Œå¤§å†™é”®æ²¡æœ‰æŒ‡ç¤ºç¯ï¼Œç”¨è¿™ä¸ªåœ¨ä»»åŠ¡æ çš„ç³»ç»ŸåŒºè¿›è¡Œæç¤ºã€‚

    nothing to say          åœ¨ä»»åŠ¡æ å¯ä»¥çœ‹åˆ°ä½ çš„éº¦å…‹é£çŠ¶æ€å¹¶æ‰‹åŠ¨æ§åˆ¶æ˜¯å¦é™éŸ³ï¼Œå¤§å¤§æ”¹å–„ä½ çš„éšç§ä¿æŠ¤

    Show Desktop Button     åƒ Windows çš„æ˜¾ç¤ºæ¡Œé¢æŒ‰é’®ï¼Œç¬¬ä¸€æ¬¡ç‚¹å‡»æœ€å°åŒ–æ‰€æœ‰çª—å£æ˜¾ç¤ºæ¡Œé¢ï¼Œå†æ¬¡ç‚¹å‡»æ¢å¤çª—å£ã€‚

    system-monitor-next     åœ¨ä»»åŠ¡æ æ˜¾ç¤ºä½ çš„cpuã€å†…å­˜ä½¿ç”¨æƒ…å†µï¼Œå°±åƒåœ¨ç»ˆç«¯ä½¿ç”¨ btop æˆ– nmon çš„æ•ˆæœã€‚ç«å“ Vitals/Freonã€‚

    GSConnect               æ“ä½œå±€åŸŸç½‘è”ç½‘ï¼ˆWIFIï¼‰çš„ä½ çš„æ‰‹æœºï¼Œæ”¯æŒä¼ é€æ–‡ä»¶ã€å‘é€çŸ­ä¿¡ã€æŸ¥çœ‹é€šçŸ¥ç­‰æ“ä½œï¼Œéœ€è¦æ‰‹æœºå®‰è£… â€œKDE Cconnectâ€ï¼Œä½¿ç”¨è¯´æ˜ <https://lixuannan.github.io/posts/27832.html>ã€‚å¦‚æœéœ€è¦å®Œæ•´æ“æ§ä½ çš„æ‰‹æœºï¼Œè§ç« èŠ‚ [Scrcpy --- åœ¨ Linux æ¡Œé¢æ˜¾ç¤ºå’Œæ§åˆ¶ Android è®¾å¤‡]ã€‚

    Night Theme Switcher     Gnome ç³»ç»Ÿå†…ç½®æ˜æš—æ¨¡å¼å’Œç›¸åº”çš„å£çº¸åˆ‡æ¢åŠŸèƒ½ï¼Œä½†æ˜¯åªèƒ½æ‰‹åŠ¨åˆ‡æ¢æ˜æš—æ¨¡å¼ï¼ˆæŸäº›å£çº¸è·Ÿéšï¼‰ï¼Œè¿™ä¸ªæ‰©å±•å®ç°å®šæ—¶è‡ªåŠ¨åˆ‡æ¢ã€‚

    Weather O'Clock         åœ¨ä»»åŠ¡æ çš„æ—¶é—´æ—è¾¹æ˜¾ç¤ºå½“å‰å¤©æ°”ï¼Œä¾èµ–ä½ åœ¨ä»»åŠ¡æ çš„æ—¶é—´å¼¹çª—å¤„å…ˆè®¾ç½®ä½ çš„ä½ç½®ã€‚

    Date Menu Formater      å¦‚æœåœ¨ä»»åŠ¡æ æ˜¾ç¤ºçš„æ—¶é—´æ²¡æœ‰æ˜ŸæœŸï¼Œåœ¨ Gnome Tweaks ä¸­å¼€å¯å³å¯ã€‚åœ¨ç³»ç»Ÿè®¾ç½®çš„ Clock&Calendar å¯ä»¥è®¾ç½®æ˜¯å¦æ˜¾ç¤ºæ˜ŸæœŸï¼Œè¿™ä¸ªæ‰©å±•å¯ä»¥è°ƒæ•´æ—¥æœŸæ—¶é—´çš„æ ¼å¼ã€‚

    Lunar Calendar          å†œå†ï¼Œéœ€è¦å…ˆå®‰è£…lunar-dateåº“(https://github.com/yetist/lunar-date)

    Media Control           åœ¨ä»»åŠ¡æ æ˜¾ç¤ºå½“å‰çš„éŸ³ä¹æ’­æ”¾å™¨ä¿¡æ¯åŠæ§åˆ¶æŒ‰é’®ï¼Œæ„Ÿè§‰è¿™ä¹Ÿæ˜¯åº”è¯¥å†…ç½®çš„åŠŸèƒ½ã€‚

    Removable drive menu    åœ¨ä»»åŠ¡æ ç»™ä½ çš„ u ç›˜æ·»åŠ èœå•æ–¹ä¾¿è®¿é—®ï¼Œåªè¦æ’å…¥ u ç›˜å°±ä¼šå‡ºç°ä¸€ä¸ªå¤§ä¸‰è§’å›¾æ ‡ï¼Œç‚¹å‡»ä¼šåˆ—å‡º u ç›˜åˆ—è¡¨ï¼Œç‚¹å‡» u ç›˜åç§°å³ä»¥æ–‡ä»¶ç®¡ç†å™¨æ‰“å¼€ u ç›˜ï¼Œç‚¹å‡» u ç›˜åç§°å³ä¾§çš„ä¸‰è§’å³å®‰å…¨å¼¹å‡ºè¯¥ u ç›˜ã€‚å¦åˆ™åªèƒ½æ‰“å¼€æ–‡ä»¶ç®¡ç†å™¨æ‰èƒ½é€‰æ‹©å¸è½½ u ç›˜ã€‚

    Clipboard Indicator     å‰ªè´´æ¿å†å²è®°å½•ï¼Œç‚¹å‡»å¯¹åº”å³æ”¾åˆ°å½“å‰å‰ªè´´æ¿ï¼Œåœ¨ç¼–è¾‘å™¨é€‰æ‹©ç²˜è´´å³å¯ä½¿ç”¨ã€‚ç«å“ Pano Clipboard Manager å¯ä»¥æ˜¾ç¤ºå¤åˆ¶çš„å¯Œåª’ä½“å†…å®¹ï¼Œéœ€è¦å®‰è£…ä¾èµ– `sudo dnf install libgda libgda-sqlite`ã€‚

    Smartcard lock          ç™»å½•ç”¨çš„æ™ºèƒ½å¡å¦‚yubikeyè¢«æ‹”å‡ºï¼Œå³è‡ªåŠ¨é”å±

    Power Profile Switcher  ä½¿ç”¨ACç”µæºæ—¶èƒ½æºç­–ç•¥é€‰æ‹©é«˜æ€§èƒ½ï¼Œä½¿ç”¨ç”µæ± æ—¶èƒ½æºç­–ç•¥ä½¿ç”¨èŠ‚èƒ½ï¼Œè‡ªåŠ¨åˆ‡æ¢ã€‚åœ¨æˆ‘çš„å°å¼æœºä¸Šä¸å‡†ï¼Œæ€»æ˜¯åˆ‡æ¢åˆ°å‡è¡¡ã€‚

    Prime Helper            è®©ä½ æ–¹ä¾¿çš„åˆ‡æ¢ä½¿ç”¨é›†æˆæ˜¾å¡æˆ–ç‹¬ç«‹æ˜¾å¡ï¼Œéœ€è¦å…ˆå®‰è£…æ”¯æŒ `prime-select` çš„ prime åº”ç”¨ç¨‹åºã€‚ç«å“ GPU Profile Selector éœ€è¦å…ˆå®‰è£… envycontrol(https://github.com/geminis3/envycontrol)

    allow locked remote desktop
                            è§£é™¤éƒ¨åˆ†å†…ç½®çš„è¿œç¨‹æ¡Œé¢çš„æœ¬åœ°é”å®šé™åˆ¶ï¼Œå…è®¸åœ¨æœ¬åœ°æ¡Œé¢é”å®šçš„æƒ…å†µä¸‹ä»¥è¿œç¨‹æ¡Œé¢ç™»å½•æœ¬æœºï¼ŒæœªéªŒè¯æ˜¯å¦æœ‰æ•ˆã€‚

ç•Œé¢ç¾åŒ–ç±»

    User Themes             å…è®¸å®‰è£…ç”¨æˆ·è‡ªå®šä¹‰ä¸»é¢˜æ‰©å±•ï¼Œç„¶åå¯ä»¥åœ¨ Gnome Tweaks é‡Œæ‰“å¼€ä¸»é¢˜å¹¶åˆ‡æ¢æ˜¾ç¤ºäº†ï¼Œè¿™å±…ç„¶ä¸æ˜¯å†…ç½®åŠŸèƒ½ã€‚

    Bing Wallpaper          è‡ªåŠ¨ä»å¾®è½¯ bing ç½‘ç«™ä¸‹è½½å®ƒçš„æ¼‚äº®å›¾ç‰‡ä½œä¸ºä½ çš„å£çº¸ï¼Œè¿˜å¯è®¾ç½®é”å±èƒŒæ™¯ã€‚

        https://github.com/neffo/bing-wallpaper-gnome-extension
            https://github.com/utkarshgpta/bing-desktop-wallpaper-changer

    NASA APOD Wallpaper Changerè‡ªåŠ¨ä» NASA ç½‘ç«™ä¸‹è½½å®ƒçš„æ¼‚äº®å›¾ç‰‡ä½œä¸ºä½ çš„å£çº¸

        https://github.com/Elinvention/gnome-shell-extension-nasa-apod

    å¦è§ç« èŠ‚ [è‡ªå†™è„šæœ¬æŒ‡å®šå£çº¸ç›®å½•éšæœºæ›´æ¢]

    blur my shell           é€æ˜æ¨¡ç³Šä½ çš„ä»»åŠ¡æ ï¼Œå‹¾é€‰ PanelBlue å³å¯è®©æ¦‚è§ˆçª—å£ä¹Ÿä½¿ç”¨ä½ çš„å£çº¸ä½œèƒŒæ™¯ï¼Œè€Œä¸”æ”¯æŒæŸäº›åº”ç”¨ç¨‹åºå’Œæ‰©å±•é€æ˜åŒ–ï¼Œæ³¨æ„è·Ÿæœ‰äº›ä¸»é¢˜å…¼å®¹æ€§ä¸å¥½è¾¹ç¼˜æ— æ³•é€æ˜ã€‚ä¸éœ€è¦ä½¿ç”¨å®ƒçš„é”å±èƒŒæ™¯æ¨¡ç³ŠåŠŸèƒ½ï¼Œä½¿ç”¨ Bing Wallpaper æ‰©å±•çš„è¿™ä¸ªåŠŸèƒ½æ•ˆæœæ›´å¥½ã€‚ä¸éœ€è¦ä½¿ç”¨å®ƒçš„ Dash to Dock/Panel çš„é€æ˜åŒ–åŠŸèƒ½ï¼Œé‚£äº›æ‰©å±•è‡ªå·±æœ‰é€æ˜åŒ–è®¾ç½®ã€‚

    burn my window          çª—å£çš„å¼¹å‡ºå’Œå…³é—­å„ç§ç‰¹æ•ˆåŒ–ï¼Œæ¨èå‹¾é€‰ Apparitionã€Doomã€Hexagonã€TV Glitchã€‚

#### ä½¿ç”¨ gnome ä¸»é¢˜

    Gnome 44 ä»¥ååªèƒ½è®¾ç½®ä»»åŠ¡æ äº†ï¼Œçª—å£çš„æ˜æš—ä¸»é¢˜æ— æ³•å˜æ›´ï¼Œçª—å£çš„é¢œè‰²å’Œå½¢çŠ¶ä¹Ÿæ— æ³•è‡ªå®šä¹‰ã€‚

Gnome ä¸»é¢˜ä¹å›­ï¼Œåœ¨è¿™é‡Œæœä¸€ä¸‹ Gnome Shell Themes ç±»åˆ«ï¼Œä½ çš„ Gnome ä»»åŠ¡æ å°±å¤§å˜æ ·äº†

    https://www.gnome-look.org/

    https://www.pling.com/

    æ¨èï¼š

        åˆ›Â·æˆ˜çºª é£æ ¼çš„ä¸œäº¬å¤œ
            https://www.gnome-look.org/p/1681470
                https://github.com/Fausto-Korpsvart/Tokyo-Night-GTK-Theme

        åŒ—æ
            https://www.pling.com/p/1267246
                https://github.com/EliverLara/Nordic

        Flat Remixï¼Œç»¿è‰²çš„è¿˜è¡Œï¼Œåªæ”¯æŒç™½åº•ï¼Œè‡ªå¸¦é€æ˜æ•ˆæœï¼Œæ”¯æŒæµè¡Œçš„ä¸€äº› gnome æ‰©å±•å¦‚ dash to dock ç­‰ä¹Ÿå˜é€æ˜
            https://www.pling.com/p/1013030
                https://github.com/daniruiz/Flat-Remix-GNOME-theme

        Graphite gnome-shell theme multicolor å¤šç§é¢œè‰²æ­é…æ¯”è¾ƒæ˜æ˜¾ï¼Œåªæ”¯æŒç™½åº•
            https://www.pling.com/p/2014493/

        è¯´æ˜å†™çš„å¾ˆæ¸…æ¥š
            https://github.com/vinceliuice/WhiteSur-gtk-theme

å¦‚ä½•ä½¿ç”¨ä¸»é¢˜ï¼š

å®‰è£…ä¸€ä¸ª gnome æ‰©å±• `User Themes`ï¼Œç„¶åå¯ç”¨ â€œç”¨æˆ·ä¸»é¢˜ User Themesâ€ æ‰©å±•ï¼Œåœ¨æ‰©å±•é‡Œé¢å¯ç”¨å®ƒã€‚

å®‰è£… Murrine Engine ä»¥å…¼å®¹æ”¯æŒæ—§çš„ gtk2 æ ‡å‡†

    sudo dnf install gtk-murrine-engine

ä¸‹è½½ä¸»é¢˜ï¼Œä¸€èˆ¬æ˜¯æ‰“åŒ…å¥½çš„ zip æ–‡ä»¶ï¼Œä¿å­˜åˆ° ~/.theme ç›®å½•ä¸‹

ç„¶åæ‰“å¼€ Gnome Tweaksï¼Œç‚¹å‡» "Appearence" æŒ‰é’®ï¼Œåœ¨å³ä¾§æ é€‰æ‹© "shell"ï¼Œé€‰æ‹©åˆšæ‰çš„zipæ–‡ä»¶å³å¯

ä»¥ä¸‹å†…å®¹è¿‡æ—¶äº†

    ç„¶åä½ å°±å¯ä»¥åœ¨ GNOME Shell æ‰©å±•é¡µé¢ æŒ‘é€‰æ‰©å±•äº†

        https://extensions.gnome.org/

    å®‰è£…ä¸»é¢˜ï¼š

        sudo dnf install flat-remix-theme

    å®‰è£…å›¾æ ‡ï¼š

        sudo dnf install numix-icon-theme-circle

    å®‰è£…å…‰æ ‡ï¼š

        sudo dnf install breeze-cursor-theme

    å†å» GNOME ä¼˜åŒ–(Tweaks)çš„ â€œå¤–è§‚â€ è®¾ç½®é‡Œé¢ä¿®æ”¹åˆšåˆšå®‰è£…çš„ä¸»é¢˜ã€å›¾æ ‡å’Œå…‰æ ‡ï¼Œè¿˜å¯ä»¥ä¿®æ”¹å­—ä½“ã€‚

#### æŠŠæµè§ˆå™¨ç¼“å­˜åŒºæŒ‡å‘å†…å­˜ç›®å½•

æ˜ å°„å†…å­˜ç›®å½•è§ç« èŠ‚ [tmpfs/ramfs æ˜ å°„å†…å­˜ç›®å½•](init_a_server think)ã€‚

    https://www.insidentally.com/articles/000040/

Linux ä¸‹ä¸åŒæµè§ˆå™¨ç¼“å­˜ä½ç½®ä¸åŒï¼š

    é»˜è®¤ Microsoft Edge ç¼“å­˜ä½ç½®åœ¨ ~/.cache/microsoft-edge
    é»˜è®¤ Google Chrome ç¼“å­˜ä½ç½®åœ¨ ~/.cache/google-chrome
    é»˜è®¤ Mozilla Firefox ç¼“å­˜ä½ç½®åœ¨ ~/.cache/mozilla/firefox/XXXXXXXX.default-release/cache2
    æœ¬æ–‡ä»¥ Microsoft Edge æµè§ˆå™¨ä¸ºä¾‹ã€‚

    Firefox æµè§ˆå™¨ç¼“å­˜ä½ç½®ä¸­ XXXXXXXX ä¸º 8 ä½éšæœºä»£ç ï¼Œè¯·è‡ªè¡ŒæŸ¥æ‰¾ä½ ç¼“å­˜æ–‡ä»¶çš„ä½ç½®ã€‚

å¦‚æœä¸éœ€è¦ä¿å­˜ç¼“å­˜å†…å®¹ï¼Œåœ¨ç™»å‡ºç³»ç»Ÿæ—¶ç›´æ¥æ¸…ç†ï¼Œæœ€ç®€å•çš„æ˜¯ç›´æ¥ä½¿ç”¨ /dev/shm é¢„ç½®å¥½çš„å†…å­˜ç›®å½•

    $ rm -rf $HOME/.cache/mozilla/firefox
    $ mkdir -p /dev/shm/mozilla-firefox
    $ ln -sf /dev/shm/mozilla-firefox $HOME/.cache/mozilla/firefox

å¦‚æœæƒ³éœ€è¦ä¿å­˜ç™»å½•ä¿¡æ¯ç›¸å…³çš„ cookieï¼Œåœ¨ç™»å‡ºå‰æ‰“åŒ…ä¿å­˜è¿™ä¸ªç›®å½•ï¼Œç™»å½•åæ¢å¤ï¼Œç”¨ä»¥ä¸‹è„šæœ¬ç»„åˆï¼š

åœ¨ä½ å–œæ¬¢çš„ä½ç½®å»ºç«‹æ ¸å¿ƒè„šæœ¬å¹¶æ·»åŠ å¯æ‰§è¡Œæƒé™ï¼Œå»ºè®®å°†è„šæœ¬å»ºç«‹åœ¨ä½ çš„ç”¨æˆ·ä¸»ç›®å½•ä¸‹çš„æŸä¸ªä½ç½®ï¼Œå› ä¸ºæœ¬æ–‡ä½¿ç”¨æ™®é€šç”¨æˆ·æƒé™çš„ systemd å¼•ç”¨è„šæœ¬ã€‚æœ¬æ–‡å…¶ä»–è„šæœ¬åŒæ ·å¦‚æ­¤ã€‚

å†…å®¹å¦‚ä¸‹ï¼š

1ã€ç¼“å­˜åŒæ­¥ï¼ˆæ‰“åŒ…è§£åŒ…ï¼‰è„šæœ¬ï¼Œåœ¨ç™»å½•å’Œç™»å‡ºæ—¶è°ƒç”¨ï¼Œè§£å‹å’Œæ‰“åŒ…ä½ çš„æµè§ˆå™¨ç¼“å­˜å†…å®¹

```bash
#!/usr/bin/sh

# åœ¨ç™»å½•åç™»å‡ºå‰æ‰§è¡Œæ­¤è„šæœ¬
# ç¡®ä¿ä½ çš„ç³»ç»Ÿå·²ç»å®‰è£… tar å’Œ lzop

case "$1" in
 import)
   cd /dev/shm
   tar vczf /home/ä½ çš„ç”¨æˆ·å/.cache/edgecache-backup.tar.gz
   ;;
 dump)
   cd /dev/shm
   # åˆ é™¤å¤§äº 5MB çš„ç¼“å­˜æ–‡ä»¶
   find ./microsoft-edge/ -size +5M -exec rm {} \;
   tar vxzf /home/ä½ çš„ç”¨æˆ·å/.cache/edgecache-backup.tar.gz microsoft-edge/
   ;;
 *)
   echo -e "Usage: $(cd `dirname $0`; pwd)/edgecache {import|dump}"
   exit 1
   ;;
esac

exit 0
```

2ã€ç™»å½•å¯¼å…¥è„šæœ¬ï¼Œç™»å½•æ—¶è®¾ç½®ç¼“å­˜è·¯å¾„ï¼ŒåŠä»å‹ç¼©åŒ…å¯¼å…¥ç¼“å­˜

```bash
#!/bin/sh

# å°† microsoft edge ç¼“å­˜è·¯å¾„åˆ°å†…å­˜
/bin/rm ~/.cache/microsoft-edge -R
/bin/mkdir -p /dev/shm/microsoft-edge
/bin/ln -sf /dev/shm/microsoft-edge ~/.cache/microsoft-edge

# å°†æµè§ˆå™¨ç¼“å­˜åŒæ­¥åˆ°å†…å­˜
echo [`date +"%Y-%m-%d %H:%M"`] On login - Importing caches to ram >> /home/ä½ çš„ç”¨æˆ·å/edgecache_sync.log
/ä½ /æ ¸å¿ƒè„šæœ¬/çš„ä½ç½® import >> /home/ä½ çš„ç”¨æˆ·å/edgecache_sync.log
echo [`date +"%Y-%m-%d %H:%M"`] On login - Caches imported to ram >> /home/ä½ çš„ç”¨æˆ·å/edgecache_sync.log
```

3ã€ ç™»å‡ºå‰å¯¼å‡ºç¼“å­˜åˆ°ç¡¬ç›˜

```bash
#!/bin/sh

# å°†æµè§ˆå™¨ç¼“å­˜åŒæ­¥åˆ°ç£ç›˜
echo [`date +"%Y-%m-%d %H:%M"`] On logout - Dumping caches to disk >> /home/ä½ çš„ç”¨æˆ·å/edgecache_sync.log
/ä½ /æ ¸å¿ƒè„šæœ¬/çš„ä½ç½® dump >> /home/ä½ çš„ç”¨æˆ·å/edgecache_sync.log
echo [`date +"%Y-%m-%d %H:%M"`] On logout - Caches dumped to disk >> /home/ä½ çš„ç”¨æˆ·å/edgecache_sync.log

# ç­‰å¾… 4 ç§’
ping -c 4 127.1 > /dev/null
```

4ã€è®© systemd åœ¨ç™»å½•å’Œç™»å‡ºæ—¶è‡ªåŠ¨æ‰§è¡Œä¸Šè¿°è„šæœ¬ï¼š

åœ¨ ~/.config/systemd/user/ ç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶ edgecache.serviceï¼š

```conf
[Unit]
Description=Synchronize edge caches to disk
PartOf=graphical-session.target
DefaultDependencies=no
Before=umount.target shutdown.target reboot.target halt.target

[Service]
Type=simple
RemainAfterExit=true
ExecStart=/ä½ /ç™»å½•å¯¼å…¥è„šæœ¬/çš„ä½ç½®
ExecStop=/ä½ /ç™»å‡ºå¯¼å‡ºè„šæœ¬/çš„ä½ç½®

[Install]
WantedBy=graphical-session.target
```

5ã€å¯ç”¨ä½ çš„ systemd æœåŠ¡

    $ systemctl --user daemon-reload
    $ systemctl --user enable edgecache.service

é‡æ–°ç™»å½•ä½ çš„æ¡Œé¢ï¼Œæ‰“å¼€æµè§ˆå™¨è¯•è¯•ï¼Œé€Ÿåº¦æ˜¯å¦æœ‰æ˜æ˜¾å·®åˆ«ã€‚

#### è‡ªå†™è„šæœ¬æŒ‡å®šå£çº¸ç›®å½•éšæœºæ›´æ¢

    https://www.insidentally.com/articles/000037/

æ¢å£çº¸çš„æ€è·¯

    ä½¿ç”¨ find å‘½ä»¤ç”ŸæˆåŒ…å«æ‰€æœ‰å›¾ç‰‡åœ°å€çš„åˆ—è¡¨ã€‚

    ä»åˆ—è¡¨ä¸­éšæœºæŒ‘é€‰ä¸€å¼ å›¾ç‰‡ã€‚

    ä½¿ç”¨ gsettings è®¾ç½®å£çº¸ã€‚

    ä½¿ç”¨ systemd å®šæœŸæ‰§è¡Œè„šæœ¬ã€‚

1ã€Bash è„šæœ¬

é¦–å…ˆå†™ä¸€ä¸ª Bash è„šæœ¬ï¼Œå®ç°æ›´æ¢å£çº¸çš„ç›®çš„ï¼ŒåŒæ—¶ä¸ºäº†å“åº”é€Ÿåº¦å’Œç¡¬ç›˜å¯¿å‘½ç€æƒ³ï¼Œæ‰€æœ‰ç›¸å…³æ–‡ä»¶éƒ½ä¿å­˜åœ¨ $XDG_RUNTIME_DIRï¼Œå®ƒå…¶å®æ˜¯è¢« GNOME æ¡Œé¢ç¯å¢ƒç”¨ tmpfs åˆ›å»ºçš„å†…å­˜ç›®å½•ã€‚

$XDG_RUNTIME_DIR æ˜¯ä¸€ä¸ªå˜é‡ï¼Œåé¢å°†ä½¿ç”¨ systemd ä¼ å…¥ä½ å­˜æ”¾å£çº¸æ–‡ä»¶å¤¹çš„è·¯å¾„è¿™ä¸ªå˜é‡ã€‚

ç”Ÿæˆåœ°å€åˆ—è¡¨

æŸ¥æ‰¾ $1 ä¸‹é¢çš„å›¾ç‰‡ï¼Œå¹¶ä¸”ç”Ÿæˆåˆ—è¡¨åˆ° $XDG_RUNTIME_DIR/bg_dbï¼Œå¦‚æœå·²ç»ç”Ÿæˆè¿‡ä¸éœ€è¦é‡å¤ç”Ÿæˆã€‚

    if [[ ! -f "${XDG_RUNTIME_DIR}/bg_db" ]]; then
        find "${1}" \( -iname '*.jpg' -o -iname '*.jpeg' -o -iname '*.png' \) -print > "${XDG_RUNTIME_DIR}/bg_db"
    fi

éšæœºæŒ‘é€‰ä¸€å¼ å›¾ç‰‡

ä½¿ç”¨ shuf å‘½ä»¤æŒ‘é€‰ä¸€å¼ å›¾ç‰‡ï¼Œå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨åˆ™é‡æ–°æŒ‘é€‰ï¼Œæ³¨æ„å¦‚æœä¸Šä¸€æ­¥æ²¡æœ‰æ‰¾åˆ°ä»»ä½•å›¾ç‰‡ä¼šé™·å…¥æ­»å¾ªç¯ã€‚

    while [[ ! -f "${TARGET}" ]]; do
        TARGET=$(shuf -n 1 "${XDG_RUNTIME_DIR}/bg_db")
    done

å‡å¦‚éœ€è¦è·³è¿‡é‡å¤å£çº¸åªéœ€è¦æ¯æ¬¡æŒ‘é€‰å›¾ç‰‡ååˆ æ‰ç›¸åº”çš„è¡Œï¼Œç„¶ååœ¨åœ°å€åˆ—è¡¨ä¸ºç©ºæ—¶é‡æ–°æ‰«æå³å¯ã€‚

è®¾ç½®å£çº¸

é€šè¿‡ gsettings æ¥è¿›è¡Œè®¾ç½®

    gsettings set org.gnome.desktop.background picture-uri "file://${TARGET}/" || true
    gsettings set org.gnome.desktop.background picture-uri-dark "file://${TARGET}" || true

picture-uri æ˜¯äº®è‰²æ¨¡å¼ä¸‹çš„å£çº¸ï¼Œpicture-uri-dark æ˜¯æš—è‰²æ¨¡å¼ä¸‹çš„å£çº¸ã€‚æˆ‘è¿™é‡Œå°†ä¸¤ä¸ªæ¨¡å¼ä¸‹çš„å£çº¸æ¢ä¸ºåŒä¸€ä¸ªã€‚

åˆä½“åçš„è„šæœ¬ background.shï¼Œè¿è¡Œè¿™ä¸ªè„šæœ¬å°±å¯ä»¥è‡ªåŠ¨æ›´æ¢å£çº¸äº†ã€‚

```bash
#!/usr/bin/env bash
set -Eeo pipefail

if [[ ! -f "${XDG_RUNTIME_DIR}/bg_db" ]]; then
    find "${1}" \( -iname '*.jpg' -o -iname '*.jpeg' -o -iname '*.png' \) -print > "${XDG_RUNTIME_DIR}/bg_db"
fi

while [[ ! -f "${TARGET}" ]]; do
    TARGET=$(shuf -n 1 "${XDG_RUNTIME_DIR}/bg_db")
done

gsettings set org.gnome.desktop.background picture-uri "file://${TARGET}/" || true
gsettings set org.gnome.desktop.background picture-uri-dark "file://${TARGET}" || true
```

è®°å¾—ç»™è¿™ä¸ªæ–‡ä»¶æ·»åŠ å¯æ‰§è¡Œæƒé™ï¼šchmod +x background.shã€‚

è¿è¡Œæ—¶è®°å¾—ä¼ å…¥ä½ å£çº¸æ–‡ä»¶å¤¹çš„è·¯å¾„ï¼š background.sh ./your/background/PATHã€‚

2ã€ä½¿ç”¨ systemd --user å®šæœŸè¿è¡Œè„šæœ¬ã€‚

åˆ›å»ºæ–‡ä»¶

    background@.service

```ini
[Unit]
Description=Select a random background from %I

[Service]
Type=oneshot
RemainAfterExit=true
ExecStart=%h/path/to/background.sh "%I"
```

å…¶ä¸­ %h å¯¹äº systemd --user è€Œè¨€ç›¸å½“äº $HOME çš„ä½œç”¨ï¼Œè€Œ %I åˆ™ç”¨äºä¼ é€’å‚æ•°ä¹Ÿå°±æ˜¯å­˜å‚¨çš„å›¾ç‰‡æ–‡ä»¶å¤¹è·¯å¾„ã€‚

åˆ›å»ºæ–‡ä»¶

    background@.service

```ini
[Unit]
Description=Select a random background from %I every 1 min
PartOf=graphical-session.target

[Timer]
OnStartupSec=1
OnUnitActiveSec=5min
AccuracySec=1s
Unit=background@.service

[Install]
WantedBy=gnome-session.target
```

ä½¿ç”¨ AccuracySec=1s é¿å…éšæœºå»¶è¿Ÿï¼Œå¦å¤– PartOf ä»¥åŠ WantedBy ç¡®ä¿äº†åªæœ‰å¤„äº Gnome æ¡Œé¢ç¯å¢ƒæ—¶æ‰ä¼šè§¦å‘ã€‚

å¯åŠ¨ Timer

    å°† background@.service å’Œ background@.timer æ”¾å…¥ ~/.config/systemd/user/ ä¸‹ï¼Œå¹¶å¯åŠ¨ systemd å®šæ—¶ä»»åŠ¡ã€‚

    $ install -m640 background@.service background@.timer ~/.config/systemd/user/

    $ systemctl --user daemon-reload

    # BGPATH=$(systemd-escape "path/to/background/directory")

    $ systemctl --user enable --now background@$BGPATH.timer

ç¬¬ä¸‰è¡Œ path/to/background/directory æ›¿æ¢ä¸ºä½ å£çº¸çš„è·¯å¾„ã€‚

æ³¨æ„ @ åé¢çš„è·¯å¾„ $BGPATH å˜é‡éœ€è¦ä½¿ç”¨ systemd-escape è¿›è¡Œè½¬ä¹‰ã€‚

æŸ¥çœ‹å½“å‰å£çº¸

æœ‰æ—¶å€™éœ€è¦çŸ¥é“å½“å‰å£çº¸çš„åŸå›¾ä½ç½®ï¼Œåªéœ€è¦åœ¨ background.sh ç›¸åº”ä½ç½®æ·»åŠ ï¼š

    echo "$TARGET" > "$XDG_RUNTIME_DIR/bg_path"

    # æ˜¾ç¤ºå½“å‰å£çº¸åŸå›¾çš„ä½ç½®
    cat "$XDG_RUNTIME_DIR/bg_path"

    # åœ¨æ¡Œé¢ç¯å¢ƒæ‰“å¼€åŸå›¾
    xdg-open $(cat "$XDG_RUNTIME_DIR/bg_path")

#### ç»™èµ„æºç®¡ç†å™¨æ·»åŠ  meld å³é”®èœå•

meld åŸºäº python çš„å¼€æºåˆå¹¶å·¥å…·ï¼Œæ›¿æ¢ BeyondCompareï¼Œç¼ºç‚¹æ˜¯åœ¨æ–‡ä»¶å¤¹å¯¹æ¯”æœ‰å¤§é‡æ–‡ä»¶æ—¶ä¼šå¡ä½

    https://meldmerge.org/
        https://gitlab.gnome.org/GNOME/meld
        https://gitlab.gnome.org/GNOME/meld/-/wikis/home

    https://www.cnblogs.com/onelikeone/p/17291936.html

å…¶å®ƒè€ƒè™‘

    Diffuse æ–‡å­—å¯¹æ¯”ä¸é”™ï¼Œå¯æƒœä¸æ”¯æŒæ–‡ä»¶å¤¹å¯¹æ¯”
        https://github.com/MightyCreak/diffuse
            åŸ https://github.com/MightyCreak/diffuse

    KDiff3 åå‘ merge æ–¹å‘ï¼Œæ–‡ä»¶å¤¹å¯¹æ¯”çš„å·®å¼‚ä¸å¤Ÿç›´è§‚ https://apps.kde.org/kdiff3/

    TkDiff https://sourceforge.net/projects/tkdiff/

    DiffMerge é—­æºçš„å…è´¹è½¯ä»¶ https://www.sourcegear.com/diffmerge/downloads.html

å¦‚æœä½¿ç”¨ GNOMEæ¡Œé¢ï¼Œå…¶èµ„æºç®¡ç†å™¨å¯ä»¥æ·»åŠ å³é”®èœå• â€œscriptâ€ï¼Œåœ¨ ~/.local/share/nautilus/scripts ç›®å½•ä¸‹å»ºç«‹å¦‚ä¸‹ä¸¤ä¸ªæ–‡ä»¶ï¼š

A-set-as-meld-leftï¼š

```bash
#!/bin/bash
#
# https://www.cnblogs.com/onelikeone/p/17291936.html
# This script opens a compare tool with selected files/directory by
# script "set-as-*-left".
# so you should run "set-as-*-left" first
# Copyright (C) 2010  ReV Fycd
# Distributed under the terms of GNU GPL version 2 or later
#
# Install in ~/.gnome2/nautilus-scripts or ~/Nautilus/scripts
# or ~/.local/share/nautilus/scripts (ubuntu 14.04 LTS)
# You need to be running Nautilus 1.0.3+ to use scripts.
# You also need to install one compare tools to use scripts(such like meld)
# You can change the $compareTool to other compare tools(like "Kdiff3") that
# you have already installed before.

compareTool="meld"
if [ -n "$NAUTILUS_SCRIPT_SELECTED_FILE_PATHS" ]; then
    set $NAUTILUS_SCRIPT_SELECTED_FILE_PATHS
    if [ $# -eq 1 ]; then
        file1="$1"
        echo "set-as-Meld-left Copyright (C) 2010  ReV Fycd"
        echo "${compareTool} ${file1} \\"> ~/.startcompare
    fi
fi
```

æ³¨æ„ï¼š

    å¦‚æœæ˜¯ flatpak å®‰è£…çš„ meldï¼ŒæŠŠä¸Šé¢çš„ `compareTool="meld"` å‘½ä»¤è¡Œæ›¿æ¢ä¸º `compareTool="flatpak run org.gnome.Meld"`

B-compare-to-leftï¼š

```bash
#!/bin/bash
#
# https://www.cnblogs.com/onelikeone/p/17291936.html
# This script opens a compare tool with selected files/directory by
# script "set-as-*-left".
# so you should run "set-as-*-left" first
#
# Copyright (C) 2010  ReV Fycd
# Distributed under the terms of GNU GPL version 2 or later
#
# Install in ~/.gnome2/nautilus-scripts or ~/Nautilus/scripts
# or ~/.local/share/nautilus/scripts (ubuntu 14.04 LTS)
# You need to be running Nautilus 1.0.3+ to use scripts.
# You also need to install one compare tools to use scripts(such like meld)

if [ -n "$NAUTILUS_SCRIPT_SELECTED_FILE_PATHS" ]; then
    set $NAUTILUS_SCRIPT_SELECTED_FILE_PATHS
fi
if [ $# -eq 1 ]; then
    file2="$1"
    echo "Compare-to-left Copyright (C) 2010  ReV Fycd"
    echo $file2 >> ~/.startcompare
fi

chmod +x ~/.startcompare
exec ~/.startcompare
```

ç„¶åèµ‹äºˆæ‰§è¡Œæƒé™å³å¯ï¼š

    $ chmod +x Meld-aset-as-left Meld-compare-to-left

ä½¿ç”¨

    åœ¨ç¬¬ä¸€ä¸ªæ–‡ä»¶ç‚¹å³é”®ï¼Œå¼¹å‡ºèœå•é€‰ â€œScriptsâ€-->â€œA-set-as-meld-leftâ€ï¼Œ

    ç„¶ååœ¨ç¬¬äºŒä¸ªæ–‡ä»¶ä¸Šç‚¹å³é”®ï¼Œå¼¹å‡ºèœå•é€‰ â€œScriptsâ€-->â€œB-compare-to-leftâ€

    è¿™æ—¶ meld ä¼šè‡ªåŠ¨å¼¹å‡ºçª—å£å¯¹è¿™ä¸¤ä¸ªæ–‡ä»¶è¿›è¡Œæ¯”è¾ƒ

å¦‚æœæ˜¯å¤šé€‰ï¼Œå¦‚åŒæ—¶é€‰æ‹©äº†ä¸¤ä¸ªæ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ï¼Œå³é”®èœå•é€‰æ‹© â€œOpen With...â€ï¼Œç„¶åé€‰æ‹© meld å³å¯ã€‚

### KDE æ¡Œé¢ï¼ˆPlasmaï¼‰

å¾ˆå¤šæ¡Œé¢ç¯å¢ƒéƒ½è‡ªå¸¦å¸¸ç”¨è½¯ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬è¯´ä½¿ç”¨æŸæŸæ¡Œé¢ç¯å¢ƒï¼Œé™¤äº†å¼€æœºè¿›å…¥æ¡Œé¢çš„æ“ä½œç•Œé¢å’Œä½¿ç”¨æ–¹å¼æ˜¯å…¶ä¸“é—¨è®¾è®¡çš„ï¼Œè¿˜ä¼šé™„å¸¦è‡ªè¡Œè®¾è®¡çš„æ ¸å¿ƒå·¥å…·è½¯ä»¶ï¼Œå¦‚æ—¥å†ã€æ—¶é’Ÿã€è®¡ç®—å™¨ã€åª’ä½“æ’­æ”¾å™¨ã€æ–‡ä»¶ç®¡ç†å™¨ç­‰å·¥å…·ï¼Œè¿™æ ·å¯ä»¥ä½¿ç”¨æˆ·å¼€ç®±å³ç”¨ï¼Œæ— éœ€åœ¨æ“ä½œç³»ç»Ÿçš„è½¯ä»¶å•†åº—å„ç§æœç´¢äº†ï¼Œæ¯”è¾ƒçœå¿ƒã€‚

    https://apps.kde.org/zh-cn/

    https://apps.kde.org/zh-cn/categories/

    æœ‰äº›è½¯ä»¶æä¾›äº† Windows ç‰ˆ https://apps.kde.org/zh-cn/platforms/

KDE å› ä¸ºå¤šå¹´ä¿æŒæ¡Œé¢ç¯å¢ƒçš„ç¨³å®šä¸å˜ï¼Œæ‰€ä»¥åº”ç”¨è½¯ä»¶çš„ä¸°å¯Œç¨‹åº¦æ¯” GNOME å¤šå¤ªå¤šäº†

    è½¯ä»¶å•†åº— https://store.kde.org/ åœ¨è¿™é‡Œæœç´¢å§ï¼ŒèŒ«èŒ«å¤šçš„è½¯ä»¶ä¾›ä½ æŒ‘é€‰

KDE çš„æ¡Œé¢å®šåˆ¶é€‰é¡¹éå¸¸å¤šï¼Œæ…¢æ…¢ç ”ç©¶å§

    https://itsfoss.com/kde-customization/

KDE æ¡Œé¢çš„å®šåˆ¶ä¹Ÿæœ‰ä¸“é—¨çš„é™„åŠ ç»„ä»¶ã€å°å·¥å…·ï¼Œä¸åƒ GNOME ä»æµè§ˆå™¨ä¸­æ·»åŠ æ‰©å±•çš„é‚£ç§ä¸æ–¹ä¾¿çš„æ–¹å¼ï¼ˆä½¿ç”¨å¦ä¸€ä¸ªæµè§ˆå™¨æ‰©å±•ï¼‰ï¼Œä½ å¯ä»¥ä½¿ç”¨ KDE çš„è½¯ä»¶ç®¡ç†å™¨ â€œå‘ç°ï¼ˆDiscoveryï¼‰â€ï¼Œç›´æ¥è®¿é—® KDE çš„é™„åŠ ç»„ä»¶ã€‚

KDE è‡ªå¸¦çš„è½¯ä»¶ä¹Ÿæœ‰å¾ˆå¤šç²¾å“æ¯”å¦‚ KDE connect ç­‰

    https://apps.kde.org/kdeconnect/

    å·²ç»å»¶å±•åˆ°äº†å¤šä¸ªå¹³å° https://apps.kde.org/platforms/windows/

### å…¶å®ƒæ¡Œé¢ç¯å¢ƒ

enlightenment æ¡Œé¢

    https://www.enlightenment.org/

å¦‚æœä¸æƒ³ç”¨æ¡Œé¢ç¯å¢ƒï¼Œä½†è¿˜éœ€è¦åœ¨å›¾å½¢åŒ–çš„çª—å£ä¸‹å·¥ä½œï¼Œè§ç« èŠ‚ [çª—å£ç®¡ç†å™¨ï¼ˆWindows Managerï¼‰]ã€‚

### å¸¸ç”¨æ¡Œé¢å·¥å…·è½¯ä»¶

æœ€æµè¡Œçš„ Linux è½¯ä»¶æœç´¢ä¸‹è½½ï¼š

    https://store.kde.org/

    https://www.pling.com/

    https://www.gnome-look.org/browse/

    AppImage Poolï¼šä¸€ä¸ªå¸®åŠ©ä½ å¯»æ‰¾å’Œç®¡ç† AppImage çš„åº”ç”¨å•†åº—ï¼Œæœç´¢ https://www.appimagehub.com/
        https://zhuanlan.zhihu.com/p/450687681
        https://github.com/prateekmedia/appimagepool

æœç´¢å’Œå®‰è£…å›¾å½¢åŒ–è½¯ä»¶çš„æ–¹æ³•ï¼Œå‚è§ç« èŠ‚ [ä½¿ç”¨ Fedora è½¯ä»¶å•†åº—](init_a_server think)ã€‚

ç»ˆç«¯å·¥å…·çš„é€‰æ‹©ï¼Œå‚è§ç« èŠ‚ [Linux æ¡Œé¢ä¸‹çš„ç»ˆç«¯æ¨¡æ‹Ÿå™¨]ã€‚

æ–‡ä»¶ç®¡ç†å™¨ GNOME Filesï¼ˆNautilusï¼‰

    https://www.cnblogs.com/keatonlao/p/12717071.html

    æ˜¾ç¤ºéšè—æ–‡ä»¶çš„å¿«æ·é”®æ˜¯ ctrl + h

    åœ°å€æ åˆ‡æ¢ä¸ºè¾“å…¥æ¨¡å¼éœ€è¦æŒ‰ ctrl + l ï¼Œæ‰èƒ½è¾“å…¥æˆ–ç²˜è´´åœ°å€ï¼Œå«Œéº»çƒ¦ç›´æ¥æ”¹æ³¨å†Œè¡¨

        # https://askubuntu.com/questions/1248692/how-to-get-folder-windows-to-display-address-bars
        $ gsettings set org.gnome.nautilus.preferences always-use-location-entry true

    â€œæ‰“å¼€æ–‡ä»¶â€å¯¹è¯æ¡†é‡Œç²˜è´´åœ°å€æ²¡æ³•é¼ æ ‡æ“ä½œï¼Œç›´æ¥ ctrl + v å³å¯

    å¦‚æœä½¿ç”¨ meldï¼Œå¯ä»¥æ·»åŠ å³é”®èœå•ï¼Œå‚è§ç« èŠ‚ [ç»™èµ„æºç®¡ç†å™¨æ·»åŠ  meld å³é”®èœå•]ã€‚

è®°äº‹æœ¬

    æ²¡æƒ³åˆ° Gnome Text Editor è¿™ä¹ˆçƒ‚ï¼Œæ‰“å¼€æ—¶è™½ç„¶ä¼šè‡ªåŠ¨æ‰“å¼€ä¸Šæ¬¡å¼€ç€çš„æ–‡ä»¶åŒ…æ‹¬æœªä¿å­˜çŠ¶æ€çš„æ–‡ä»¶ï¼Œä½†æ˜¯æ˜¾ç¤ºåŒºåŸŸä¸èƒ½å®šä½åˆ°å½“å‰å…‰æ ‡ä½ç½®ï¼Œç²˜è´´çš„æ—¶å€™æ˜¾ç¤ºåŒºåŸŸç›´æ¥ä¹±è·³ï¼Œæ­£å¸¸ä½¿ç”¨éå¸¸éš¾å—ã€‚æ¨èå®‰è£… LXQT çš„ FeatherPad æˆ– Kde çš„ KWriteã€‚ç™½æ¿ç¨‹åºçš„æ¨èåœ¨ä¸‹é¢ã€‚

ç£ç›˜ç®¡ç†

    gnome Disks

        $ gnome-disks

ç£ç›˜å ç”¨åˆ†æ

    gnome Disk Usage Analyzer åˆ†æèµ·æ¥å¾ˆæ–¹ä¾¿ï¼Œåªæ˜¯åªæ”¯æŒæŸ¥çœ‹å½“å‰ç”¨æˆ·çš„ï¼ŒæŸ¥çœ‹å…¨ç³»ç»Ÿçš„éœ€è¦ç”¨å‘½ä»¤è¡Œ

        $ sudo baobab

å…¨ç³»ç»Ÿæ€§èƒ½åˆ†æï¼Œæ”¯æŒç«ç„°å›¾æŸ¥çœ‹å„è°ƒç”¨æ ˆï¼ŒåŠŸèƒ½ç±»ä¼¼ Windows çš„ç³»ç»Ÿæ€§èƒ½åˆ†æå·¥å…·

    https://fedoramagazine.org/performance-profiling-in-fedora-linux/

        $ sysprof

åŠå…¬å¥—ä»¶

    LibreOffice æ˜¯ GNU/Linux ç”¨æˆ·ä¸­æœ€æµè¡Œçš„åŠå…¬å¥—ä»¶ã€‚å®ƒçš„ç”¨æˆ·ç•Œé¢å’Œç”¨æˆ·ä½“éªŒç±»ä¼¼äºå¾®è½¯ Officeã€‚

    ONLYOFFICE æ˜¯ä¸€æ¬¾ä¸å¾®è½¯ Office é«˜åº¦å…¼å®¹çš„åŠå…¬å¥—ä»¶åº”ç”¨ç¨‹åº

        https://www.onlyoffice.com/zh/download-desktop.aspx

        ONLYOFFICE è¿˜æœ‰ä¸€ä¸ªé‡ç£…åŠŸèƒ½ï¼Œé‚£å°±æ˜¯å®ƒçš„å¤šäººåä½œåŠŸèƒ½ï¼Œæ¯”å¦‚æœåŠ¡å™¨å®‰è£…ä½¿ç”¨ Nextcloudï¼Œè€Œ ONLYOFFICE æ–‡æ¡£æˆ‘ä»¬å¯ä»¥ç›´æ¥é€šè¿‡Dockeræ‹‰å–å³å¯ã€‚å‚è§ç« èŠ‚ [è‡ªå»ºäº‘ç›˜ Nextcloud](rasp think)ã€‚

    FreeOffice åŒ…æ‹¬ TextMakerï¼ˆå¯æ›¿ä»£ Wordï¼‰ã€PlanMakerï¼ˆå¯æ›¿ä»£ Excelï¼‰ä»¥åŠ Presentationsï¼ˆå¯æ›¿ä»£ PowerPointï¼‰ã€‚

        https://www.freeoffice.com/en/

    Gnome Evinceï¼šæ”¯æŒ pdf æŸ¥çœ‹

    Okularï¼šä¸»è¦ç”¨äºæŸ¥çœ‹ pdf å¹¶æ·»åŠ æ‰¹æ³¨

    calibreï¼šOkularé€²éšç‰ˆï¼Œæ˜¯é›»å­æ›¸é–±è®€å™¨ä¹Ÿæ˜¯é›»å­æ›¸åº«ç®¡ç†è»Ÿé«”ã€‚

    GNU PSPPï¼šè³‡æ–™çµ±è¨ˆè»Ÿé«”ã€‚IBM SPSSçš„æ›¿ä»£å“ã€‚

    FreePlaneï¼šç¹ªè£½å¿ƒæ™ºåœ–ã€‚

    XMindã€å°ˆæœ‰è»Ÿé«”ã€‘ï¼šç¹ªè£½å¿ƒæ™ºåœ–ï¼Œæ”¯æ´ä¸Šå‚³åˆ°é›²ç«¯ã€‚

    ImageMagick (ç„¡åœ–å½¢ç•Œé¢)ï¼šç”¨æ–¼åœ–ç‰‡è½‰æª”çš„ç´”æ–‡å­—å·¥å…·ã€‚

    ç™½æ¿ç¨‹åºï¼šå¯ä»¥åˆå†™åˆç”»ï¼Œéå¸¸é€‚åˆè®°ç¬”è®°

        Rnote æ–¹ä¾¿çš„éšæ‰‹ç¬”è®°

        Xournal++ è¿™ä¸ªæ›´é‡é‡çº§ä¸€ç‚¹

        Lorien https://github.com/mbrlabs/Lorien

    ç•ªèŒ„æ—¶é’Ÿï¼šé‡‡ç”¨ç•ªèŒ„å·¥ä½œæ³•ï¼Œå·¥ä½œåˆ† 4 ä¸ªæ—¶æ®µï¼Œåœ¨æ¯ä¸ªæ—¶æ®µä¹‹é—´ä¼‘æ¯ï¼Œåœ¨å…¨éƒ¨ 4 ä¸ªæ—¶æ®µä¹‹åæœ‰ä¸€æ¬¡é•¿æ—¶é—´ä¼‘æ¯

        Solanum

        Pomodoro

é‚®ä»¶

    Mozilla Thunderbird æ”¯æŒ gpg åŠ å¯†

    Gnome Evolution

    ProtonMail
        https://proton.me/mail
            https://zhuanlan.zhihu.com/p/25085337

å³æ—¶é€šä¿¡

    pidgin æ”¯æŒå„ç§èŠå¤©åè®®çš„å®¢æˆ·ç«¯ï¼Œç”šè‡³å¯é€šè¿‡æ’ä»¶æ”¯æŒqq/å¾®ä¿¡

    matrix æœåŠ¡å™¨åˆ—è¡¨ https://tatsumoto-ren.github.io/blog/list-of-matrix-servers.html

        https://element.linuxdelta.com/

        https://element.fedibird.com/

        https://webchat.kde.org/

        https://chat.fedoraproject.org/

        https://chat.opensuse.org/

        æœ€æ¬¡é€‰åˆ™æ‰åœ¨å®˜ç½‘æ³¨å†Œ https://matrix.org/

    IRC

        https://zh.opensuse.org/openSUSE:IRC_for_newbies

ç”»å›¾å·¥å…·

    GIMP åŠŸèƒ½å‡ ä¹ä¸ Adobe Photoshop ç›¸åŒ
        https://www.gimp.org/

    Inkscape å·ç§°æ›¿ä»£ Adobe illustratorï¼ˆAIï¼‰çš„çŸ¢é‡å›¾åˆ¶ä½œç¼–è¾‘å·¥å…·
        https://inkscape.org/

    Krita æ˜¯ä¸€æ¬¾ç”¨äºåˆ›ä½œåƒè‰ºæœ¯å®¶é‚£æ ·çš„æ•°å­—ç»˜ç”»çš„åº”ç”¨ç¨‹åºã€‚ä½ å¯ä»¥ç”¨ Krita æ¥åˆ¶ä½œæ¦‚å¿µè‰ºæœ¯ã€æ’å›¾ã€æ¼«ç”»ã€çº¹ç†å’Œå“‘å…‰ç”»ã€‚
        https://krita.org/en/

æˆªå±

    OBS Stduio æ˜¯ä¸€æ¬¾ç”¨äºè§†é¢‘å½•åˆ¶å’Œç›´æ’­æ¨æµçš„å¼€æºè½¯ä»¶
        https://obsproject.com/

    Shutter

    Kazam

    maim å‘½ä»¤è¡Œæˆªå›¾
        https://github.com/naelstrof/maim

        ssh -t pi@<pi_ip_address> 'DISPLAY=:0 maim' >screenshot.png

ç…§ç‰‡ç®¡ç†

    Nomacsï¼šæç®€è·¨å¹³å°çœ‹åœ–è»Ÿé«”ï¼Œå¯ç°¡å–®èª¿æ•´åœ–ç‰‡ï¼Œæ”¯æ´æ‰¹æ¬¡åœ–ç‰‡ç·¨è¼¯æ“ä½œã€‚

    DigiKamï¼šæ”å½±å¸«æ•´ç†ç›¸ç‰‡çš„è·¨å¹³å°è»Ÿé«”ï¼Œé¡ä¼¼Adobe Lightroomã€‚è‡ªå¸¦sqliteæ•°æ®åº“ç¼“å­˜ç¼©ç•¥å›¾ï¼Œæµè§ˆå¤„ç†å¤§æ‰¹é‡å›¾ç‰‡çš„å¸¸ç”¨åŠŸèƒ½å¿«é€Ÿæ–¹ä¾¿ï¼Œé«˜çº§åŠŸèƒ½æ”¯æŒäººè„¸æ¨¡å¼ã€å›¾ç‰‡æœç´¢é™¤äº†ç›¸ä¼¼åº¦è¿˜æ”¯æŒç”»å›¾æœç´¢ï¼Œæ ¹æ®ç»˜ç”»å†…å®¹æ£€ç´¢å›¾ç‰‡ã€æ ¹æ®ç…§ç‰‡ä¿¡æ¯æ˜¾ç¤ºåœ°ç†ä½ç½®ç­‰ã€‚è¿˜å®‰è£…äº†å•ç‹¬çš„ç¨‹åºå« showFotoï¼Œä¸ç¼“å­˜åˆ°æ•°æ®åº“ï¼ŒåŠŸèƒ½ç®€å•åªåœ¨ç•Œé¢ä¸Šå¯é€‰ç¼–è¾‘ã€‚

    Gwenviewï¼šKDEçš„çœ‹åœ–è»Ÿé«”ï¼Œå¯ç°¡å–®ç·¨è¼¯åœ–ç‰‡å’ŒåŠ æ–‡å­—ï¼Œæ”¯æ´è®€å–å£“ç¸®æª”çš„åœ–ç‰‡ã€‚
    Shotwellï¼šGNOMEé™„å±¬çš„ç›¸ç‰‡ç®¡ç†ç¨‹å¼ã€‚

    Darktable: ç…§ç‰‡è°ƒè‰²è½¯ä»¶

éŸ³é¢‘ç¼–è¾‘å™¨

    Audacity æ˜¯ä¸€ä¸ªæµè¡Œçš„å¤šè½¨éŸ³é¢‘ç¼–è¾‘å™¨å’Œå½•éŸ³æœºï¼Œå¯ç”¨äºå¯¹æ‰€æœ‰ç±»å‹çš„éŸ³é¢‘è¿›è¡ŒåæœŸå¤„ç†ã€‚

    Deadbeef æ˜¯ä¸€ä¸ªåœ¨ HiFi ç¤¾åŒºä¸­æµè¡Œï¼Œå¯è‡ªå®šä¹‰çš„å¼€æºéŸ³é¢‘æ’­æ”¾å™¨ã€‚

    Audacious æ˜¯ä¸€ä¸ªå¼€æºçš„éŸ³é¢‘æ’­æ”¾å™¨ã€‚

è§†é¢‘æ’­æ”¾

    è‡³2023å¹´ï¼ŒLinux å°šæœªå®ç°æ”¯æŒ HDR æ˜¾ç¤ºå™¨

        https://wiki.archlinux.org/title/HDR_monitor_support
            https://gitlab.freedesktop.org/xorg/xserver/-/issues/1037#note_521100
            https://gitlab.freedesktop.org/wayland/weston/-/issues/467

    vlc playerï¼Œå»ºè®®å®‰è£… flatpak ç‰ˆæœ¬ï¼Œè¿™æ ·é—­æºçš„ç¼–è§£ç å™¨éƒ½è‡ªå¸¦äº†ï¼Œä¸éœ€è¦å•ç‹¬å®‰è£…

        https://www.videolan.org/vlc/index.zh_CN.html
            https://github.com/videolan/vlc

        Fedora: dnf group install 'VideoLAN Client'  # vlc vlc-plugin-ffmpeg vlc-plugin-gstreamer vlc-plugin-pipewire

        æ’ä»¶å®‰è£…ï¼šVLSubï¼Œå¯ä»¥æœç´¢ä¸‹è½½å­—å¹•

        è°ƒæ•´å­—å¹•æ—¶é—´è½´çƒ­é”® gã€h

    mplayer åŸç”Ÿ linux ä¸‹çš„æ’­æ”¾å™¨ï¼Œä¸æä¾›æœ‰æ•ˆçš„GUI

        æ³¨æ„ï¼šä»¥ä¸‹æ’­æ”¾å™¨ä¾èµ–æ“ä½œç³»ç»Ÿå®‰è£…h264ç­‰ç¼–ç å™¨ï¼Œç”¨èµ·æ¥ä¸æ˜¯å¼€ç®±å³ç”¨çš„ï¼Œå³ä½¿ flatpak ç‰ˆæœ¬ä¹Ÿä¸è¡Œ

        http://www.mplayerhq.hu/design7/info.html
            Windows build
                https://oss.netfarm.it/mplayer/

        MPV player --- mplayer çš„æ–°å‘å±•

            https://mpv.io/installation/
                https://github.com/mpv-player/mpv/
                https://sourceforge.net/projects/mpv-player-windows/files/

            é…ç½® https://github.com/thisisshihan/mpv-player-config-snad

        smplayer ä½¿ç”¨ ä»¥ä¸Šä¸¤è€…åšä½œä¸ºæ’­æ”¾å¼•æ“çš„ GUI å¤–å£³ç¨‹åºï¼Œä¹Ÿæ”¯æŒæ’­æ”¾ youtube

            https://www.smplayer.info/
                https://github.com/smplayer-dev/smplayer

    è·¨å¹³å°çš„é«˜çº§å­—å¹•ç¼–è¾‘å·¥å…·

        Aegisub https://github.com/Aegisub/Aegisub

        Subtitle editor https://github.com/SubtitleEdit/subtitleedit

        gnome ä¹Ÿå¸¦ä¸€ä¸ªå­—å¹•ç¼–è¾‘è½¯ä»¶ gnome-subtitles

è§†é¢‘ç¼–è¾‘

    Blender é¡ä¼¼ Mayaã€3DS Maxã€‚æ˜¯ä¸€ä¸ªé›†åŠ¨ç”»ç”µå½±åˆ¶ä½œã€è§†è§‰ç‰¹æ•ˆã€3D æ‰“å°ã€ä¸‰ç»´/äºŒç»´å»ºæ¨¡ã€åŠ¨æ€å›¾å½¢ã€äº¤äº’å¼ 3D åº”ç”¨å’Œ VR ç­‰å¤šé¡¹é¢†åŸŸä¸ºä¸€ä½“çš„çŸ¥åå¼€æºè½¯ä»¶ã€‚

        https://www.blender.org/

        ä¼˜ç§€ä½œå“å±•ç¤ºåŒºåŸŸï¼Œä¾›å¤§å®¶å­¦ä¹ äº¤æµ https://blender.bgteach.com/index.jsp

    Kdenlive åŸºäº Qt å’Œ MIT å¤šåª’ä½“æ¡†æ¶å¼€å‘çš„éçº¿æ€§è§†é¢‘ç¼–è¾‘è½¯ä»¶ï¼Œç±»ä¼¼ Adobe premiere æˆ– Davinci Resolve
        https://kdenlive.org/

    Shotcut æ˜¯ç”± MIT å¤šåª’ä½“æ¡†æ¶å¼€å‘è€…å¼€å‘çš„ä¸€æ¬¾åŸºäº MIT å¤šåª’ä½“æ¡†æ¶çš„éçº¿æ€§è§†é¢‘ç¼–è¾‘è½¯ä»¶ã€‚
        https://www.shotcut.org/

    Autodesk Mayaã€å°ˆæœ‰è»Ÿé«”ã€‘ï¼šå°ˆæ¥­3Då»ºæ¨¡è»Ÿé«”ã€‚

    FreeCADï¼šç¹ªè£½CADå·¥ç¨‹åœ–çš„è»Ÿé«”ã€‚

    Vapoursynthï¼š è§†é¢‘å‹ç¼©

å›¾ç‰‡å’Œè§†é¢‘è½¬æ¢

    XnConvert

    HandBrake

    Fondoï¼šæŸ¥æ‰¾å’Œè®¾ç½®Linuxæ¡Œé¢å£çº¸ï¼Œä½¿ç”¨æ— ç‰ˆæƒå›¾ç‰‡ç½‘ç«™ Unsplash ä½œä¸ºæ¥æº

æ¸¸æˆå¹³å°

    Steamï¼šåœ¨ steam çš„è®¾ç½®ä¸­å¯åŠ¨ Proton æ¥æ¸¸ç© Windows æ¸¸æˆã€‚

å¯ä¸å‘½ä»¤è¡Œäº¤äº’çš„å›¾å½¢ç•Œé¢ zenity

    åœ¨æ¡Œé¢ç¯å¢ƒçš„ç»ˆç«¯é‡Œï¼Œæ‰§è¡Œ shell è„šæœ¬æ—¶å®ç°å¼¹å‡ºå¼å¯¹è¯æ¡†ï¼Œç”¨æˆ·çš„é€‰æ‹©å¯ä»¥ç”¨è¿”å›å€¼æ–¹å¼è¢« shell è„šæœ¬è¯»å–ä»¥å®ç°äº¤äº’ï¼ŒåŸºäº gtk åº“å®ç°ï¼Œéœ€è¦æ“ä½œç³»ç»Ÿæœ‰æ¡Œé¢å›¾å½¢åŒ–ç¯å¢ƒ

        https://help.gnome.org/users/zenity/stable/

        KDE æ¡Œé¢é¡¹ç›®ä¹Ÿæœ‰ç±»ä¼¼çš„å·¥å…·â€”â€”KDialog

            https://develop.kde.org/docs/administration/kdialog/

        https://ostechnix.com/zenity-create-gui-dialog-boxes-in-bash-scripts/

        https://blog.gtwang.org/programming/zenity-gui-utility/

    ç®€å•æ˜¾ç¤ºæ¶ˆæ¯

        $ zenity --info --text="é€™æ˜¯è¨Šæ¯å…§å®¹" --title="é€™æ˜¯æ¨™é¡Œ"

#### Linux æ¡Œé¢ä½¿ç”¨æµè§ˆå™¨

å®‰å…¨è®¾ç½®

    å®‰è£…æµè§ˆå™¨æ‰©å±•è¦è°¨æ…ï¼Œåªå®‰è£…å¤§å®¶éƒ½ç”¨çš„æ‰©å±•ï¼Œè£…å®Œåè¦è®¾ç½®å®ƒçš„è®¿é—®æƒé™å°½é‡å°ï¼Œå„å¤§æµè§ˆå™¨éƒ½æ”¯æŒè®¾ç½®ã€‚

    æµè§ˆå™¨å°½é‡ä½¿ç”¨å®¹å™¨åŒ–ã€åŒ¿ååŒ–è®¿é—®ï¼Œä¸åŒç”¨é€”çš„æµè§ˆåˆ†å¼€ï¼Œå¤šä¸ªè™šæ‹Ÿæœºæ‰“å¼€å¤šä¸ªæµè§ˆå™¨ã€‚

    æµè§ˆå™¨å®‰è£…åï¼Œæœ€å¥½æ£€æŸ¥ä¸‹å†…ç½®çš„è¯ä¹¦ï¼Œè¯¦è§ç« èŠ‚ [æµè§ˆå™¨ CA è®¤è¯é¢å¯¹çš„æŒ‘æˆ˜](Windows 10+ å®‰è£…çš„é‚£äº›äº‹å„¿)

æ¨èç”¨ flatpak å®‰è£… UngoogledChromium

    æ¥è‡ª Chromium é¡¹ç›®çš„å¼€æº Web æµè§ˆå™¨ï¼Œå®ƒæœ‰ä¸€ä¸ªæç®€çš„ç”¨æˆ·ç•Œé¢ã€‚ è°·æ­Œå·²ç»ç¦æ­¢ chromium å’ŒåŸºäº chromium çš„ç¬¬ä¸‰æ–¹æµè§ˆå™¨è¯»å–è°·æ­Œçš„æ•°æ®ï¼Œæ‰€ä»¥ chromium æ— æ³•åŒæ­¥ä½ åŸæœ‰çš„è°·æ­Œæµè§ˆå™¨è´¦æˆ·æ•°æ®ï¼Œä¹Ÿæ— æ³•è¿æ¥è°·æ­Œæ‰©å±•å•†åº—ï¼Œä½†å®ƒæœ‰è‡ªå·±çš„å¼€æºæ‰©å±•å•†åº—ï¼Œä¹Ÿæ”¯æŒæœ¬åœ°å®‰è£…ä½ ä» github ä¸‹è½½çš„å¼€æºæ‰©å±•ã€‚

        $ flatpak install flathub com.github.Eloston.UngoogledChromium

    æ‰‹å·¥ä¸‹è½½æµè§ˆå™¨å®˜æ–¹å•†åº—çš„æ‰©å±•æ–‡ä»¶å¹¶å®‰è£…çš„æ–¹æ³•

            https://ungoogled-software.github.io/ungoogled-chromium-wiki/faq#can-i-install-extensions-or-themes-from-the-chrome-webstore

        æµè§ˆå™¨æ‰“å¼€å®˜æ–¹å•†åº—çš„é¡µé¢ï¼Œé€‰æ‹©ä¸‹è½½æ‰©å±•ï¼Œç„¶åæŠŠä¸‹è½½çš„ .crx æ–‡ä»¶æ”¹åä¸º .zipå¹¶è§£å‹ï¼Œç„¶ååœ¨ UngoogledChromium çš„ Manage Extension é¡µé¢ç‚¹å‡»å³ä¸Šè§’çš„ â€œDevelop modeâ€ æŒ‰é’®ï¼Œé€‰æ‹© â€œload unpackedâ€ï¼Œé€‰æ‹©ä½ åˆšæ‰è§£å‹çš„ç›®å½•å³å¯å®‰è£…è¯¥æ‰©å±•äº†

    å¼ºçƒˆæ¨èå¿…è£…æ‰©å±•ï¼šè®©ä½ å¯ä»¥ç›´æ¥ä½¿ç”¨æµè§ˆå™¨å®˜æ–¹å•†åº—çš„æ‰©å±• chromium-web-store

        æ’ä»¶è®¾ç½®ä¸­ï¼Œæ‰“å¼€ â€œAllow access to file URLsâ€ é€‰é¡¹ã€‚

        å®‰è£…è¿™ä¸ªæ‰©å±•åï¼Œæ‰“å¼€ ms edge/google chrome ç­‰å¤šä¸ªæµè§ˆå™¨å®˜æ–¹å•†åº—çš„ç½‘é¡µï¼Œç„¶åå¯ä»¥çœ‹åˆ°å„ä¸ªæ‰©å±•çš„ä¸‹è½½æŒ‰é’®éƒ½æ˜¯å¯ç”¨çš„äº†ï¼Œç‚¹å‡»å³å¯ç›´æ¥ä¸‹è½½å®‰è£…ï¼Œä¸éœ€è¦ä¸Šé¢ä»‹ç»çš„æ‰‹åŠ¨æµç¨‹äº†ã€‚å¦‚æœä¸å¯ç”¨ï¼Œç‚¹å‡»é¼ æ ‡å³é”®ï¼Œé€‰æ‹©èœå•é¡¹ç›® â€œAdd to Chromiumâ€ å³å¯ä¸‹è½½å®‰è£…ã€‚

        å…ˆæ‰“å¼€è®¾ç½®åœ°å€ chrome://flags/#extension-mime-request-handlingï¼Œè®¾ç½®ä¸º â€œAlways prompt for installâ€ã€‚

        ä¸‹è½½ https://github.com/NeverDecaf/chromium-web-store/releases ä¸­çš„ .crx æ–‡ä»¶ï¼Œç„¶åä½¿ç”¨ä¸Šé¢ä»‹ç»çš„æ‰‹å·¥å®‰è£…æ‰©å±•çš„æ–¹æ³•å®‰è£…è¯¥ .crx æ–‡ä»¶ã€‚

        è®¿é—®å®˜æ–¹å•†åº—é¡µé¢é€‰ä¸ªæ‰©å±•çœ‹æ˜¯å¦å¯ä»¥ç›´æ¥ä¸‹è½½äº†

            https://microsoftedge.microsoft.com/addons/Microsoft-Edge-Extensions-Home

            https://chrome.google.com/webstore/

        å¦‚æœåªæ˜¯ä¸‹è½½äº† .crx æ–‡ä»¶æ²¡æœ‰å®‰è£…ï¼Œå¯ä»¥å°è¯•åŒå‡»è¯¥æ–‡ä»¶ï¼Œåœ¨æç¤ºä½¿ç”¨å“ªä¸ªç¨‹åºæ‰“å¼€æ—¶é€‰æ‹© UngoogledChromium å³å¯ç›´æ¥å®‰è£…ã€‚ä¹‹ååªè¦åœ¨å•†åº—é¡µé¢ç‚¹å‡» get å³å¯è‡ªåŠ¨ä¸‹è½½å¹¶å®‰è£…æ‰©å±•äº†ã€‚

    å…¶å®ƒæ¨èæ‰©å±•

        è§ç« èŠ‚ [å®‰è£… Microsoft Edge æµè§ˆå™¨æ’ä»¶](Windows 10+ é‚£äº›äº‹å„¿.md)ï¼Œå„æµè§ˆå™¨éƒ½æ˜¯é€šç”¨çš„ã€‚

        è®°å¾—è®¾ç½®æ’ä»¶é€‰é¡¹ï¼Œâ€œè¯»å–å’Œæ›´æ”¹ç«™ç‚¹æ•°æ®â€é…ç½®ä¸ºâ€œå•å‡»æ‰©å±•æ—¶â€

GNOME Web

    GNOME æ¡Œé¢é™„å¸¦çš„ä¸€ä¸ªåŸºäº WebKit çš„æµè§ˆå™¨ä»£å· Epiphanyï¼ŒåŠŸèƒ½æ¯” Firefox å°‘ï¼Œä½†å¯¹äºæ™®é€šç”¨é€”æ¥è¯´å·²ç»è¶³å¤Ÿäº†ï¼Œè€Œä¸”æ”¯æŒå®‰è£…ç«ç‹å’Œè°·æ­Œæµè§ˆå™¨çš„æ‰©å±•ã€‚

FireFox

    ä¸­æ–‡ç‰ˆçš„ FireFox ç­‰æµè§ˆå™¨ç”±cnå…¬å¸å¼€å‘ï¼Œä¸è¦ä¸‹è½½å®‰è£…ï¼

    FireFox åªåœ¨ mozila å®˜æ–¹ç½‘ç«™ä¸‹è½½â€œè‹±æ–‡ç‰ˆâ€ä½¿ç”¨ï¼Œç›®å‰å„å¤§å‘è¡Œç‰ˆå†…ç½® Firfox å®‰å…¨æ€§åº”è¯¥ç­‰äºå®˜æ–¹è‹±æ–‡ç‰ˆã€‚

    å¤šå¸æˆ·å®¹å™¨ï¼šé€šè¿‡ä½¿ç”¨å®¹å™¨ï¼Œä½ åœ¨ä¸€ä¸ªå®¹å™¨ä¸­çš„æµè§ˆæ´»åŠ¨ä¸ä¼šä¸å…¶ä»–å®¹å™¨å…±äº«ã€‚è¿™ç§éš”ç¦»æ„å‘³ç€ä½ å¯ä»¥åœ¨ä¸åŒå®¹å™¨ä¸­ç™»å½•åŒä¸€ç½‘ç«™ä¸Šçš„ä¸¤ä¸ªä¸åŒå¸æˆ·ã€‚ä½ çš„ç™»å½•ä¼šè¯ã€ç½‘ç«™åå¥½å’Œè·Ÿè¸ªæ•°æ®å°†è¢«é™åˆ¶åœ¨ä½ ä½¿ç”¨æŸä¸ªç½‘ç«™çš„å®¹å™¨ä¸­ã€‚ä½ çš„ç™»å½•ä¼šè¯ã€ç½‘ç«™åå¥½å’Œè·Ÿè¸ªæ•°æ®å°†è¢«é™åˆ¶åœ¨ä½ ä½¿ç”¨æŸä¸ªç½‘ç«™çš„å®¹å™¨ä¸­ã€‚Firefox é»˜è®¤æƒ…å†µä¸‹æä¾›çš„å®¹å™¨åŒ…æ‹¬ Facebookã€Messenger å’Œ Instagram ç½‘ç«™ï¼Œå½“ä½ æ‰“å¼€è¿™ä¸‰ä¸ªç½‘ç«™ä¸­çš„ä»»ä½•ä¸€ä¸ªæ—¶ï¼Œå®ƒä»¬éƒ½åªä¼šåœ¨ â€œFacebook å®¹å™¨â€ ä¸­æ‰“å¼€ã€‚å› æ­¤ï¼ŒFacebook å°†æ— æ³•è·Ÿè¸ªä½ åœ¨å…¶ä»–ç½‘ç«™ä¸Šçš„æ´»åŠ¨ã€‚Firefox é™„åŠ ç»„ä»¶ç½‘ç«™ä¸Šçš„ æ‰©å±•ç¨‹åºé¡µé¢ï¼Œæ‰¾åˆ° â€œFirefox Multi-Account Containersâ€ã€‚ä¹‹åä½ å”¯ä¸€éœ€è¦åšçš„å°±æ˜¯å•å‡» â€œæ·»åŠ åˆ° Firefoxâ€ æŒ‰é’®ã€‚

        æ³¨æ„ï¼šä½ çš„æµè§ˆå™¨å†å²è®°å½•æœ¬èº«ä¹‹ç±»çš„å†…å®¹ä»ä¼šæš´éœ²ç»™ä½ çš„æ­£å¸¸æµè§ˆå™¨ä¼šè¯ï¼Œå®¹å™¨åŠŸèƒ½åªæ˜¯æä¾›äº†ä¸€ç§æ–¹æ³•æ¥åˆ†ç¦»ç™»å½•å¸æˆ·ç­‰å†…å®¹ã€‚

    Firefox çš„ â€œæ’ä»¶â€ï¼ˆpluginï¼‰å’Œâ€œæ‰©å±•â€ï¼ˆextensionï¼‰æ˜¯ä¸¤ç§ä¸åŒçš„ä¸œè¥¿ï¼šæ’ä»¶ä»¥åŠ¨æ€åº“ï¼ˆWindows ä¸Šå°±æ˜¯ DLL æ–‡ä»¶ï¼‰çš„æ–¹å¼ï¼ŒåŠ è½½åˆ°æµè§ˆå™¨çš„è¿›ç¨‹å†…ã€‚æ‰©å±•å¯ä»¥è°ƒç”¨æµè§ˆå™¨è‡ªèº«çš„ APIï¼Œä½†æ˜¯å¤§éƒ¨åˆ†æ‰©å±•ã€ä¸èƒ½ã€‘è°ƒç”¨æ“ä½œç³»ç»Ÿçš„ APIã€‚

    å»ºè®®æŠŠ Firefox çš„ç¼“å­˜æŒ‡å‘å†…å­˜ç›®å½•ï¼Œå¯ä»¥å¤§å¤§æå‡ä½ çš„æµè§ˆæ„Ÿå—ï¼Œè§ç« èŠ‚ [tmpfs/ramfs æ˜ å°„å†…å­˜ç›®å½•](init_a_server think)ã€‚

Chrome

    google åŸºäºå¼€æºæµè§ˆå™¨ chromium è€Œæ­å»ºçš„é—­æºæµè§ˆå™¨

    $ flatpak install flathub com.google.Chrome

Tor æµè§ˆå™¨

    é€šè¿‡ Flatpak å®‰è£…ï¼š

        $ flatpak install flathub com.github.micahflee.torbrowser-launcher

    ä½¿ç”¨ dnf å®‰è£…å®˜æ–¹ä»“åº“çš„ï¼š

        $ sudo dnf install torbrowser-launcher

##### æµè§ˆå™¨ â€œUA(User Agent)ç”¨æˆ·ä»£ç†â€ å­—ç¬¦ä¸²çš„æ•…äº‹

    https://imbearchild.cyou/archives/2024/04/yes-browser-are-faking-to-be-firefox/

1ã€NCSA Mosaic æµè§ˆå™¨ï¼Œå†å²ä¸Šæœ€æ—©çš„æµè§ˆå™¨ä¹‹ä¸€

    NCSA æ˜¯ï¼ˆç¾å›½ï¼‰å›½å®¶è¶…çº§ç”µè„‘åº”ç”¨ä¸­å¿ƒçš„ç¼©å†™ï¼Œé™¤äº†æµè§ˆå™¨ï¼Œä»–ä»¬è¿˜å¼€å‘äº† NCSA Telnet å’Œ NCSA HTTPdï¼Œè¿™ä¸ª HTTPd æ˜¯ Apache HTTPd çš„å‰èº«ã€‚

Mosaic è¿˜æ˜¯å¾ˆéµå®ˆæ ‡å‡†çš„ï¼Œä»–çš„ UA é•¿è¿™æ ·ï¼š

    NCSA_Mosaic/2.7b6~flatpak4_(X11;Linux 6.6.24 x86_64) libwww/2.12 modified

    è¿™é‡Œä½¿ç”¨çš„æ˜¯ä»¥ç°ä»£ Flatpak æ ¼å¼é‡æ–°ç¼–è¯‘æ‰“åŒ…çš„çš„ Mosaicã€‚

        https://flathub.org/apps/com.github.fries1234.ncsa-mosaic

æ®è¯´å…¶ Windows ç‰ˆçš„ UA æ˜¯è¿™æ ·ï¼š

    NCSA_Mosaic/2.0 (Windows 3.1)

2ã€Netscape

Mosaic çš„å¼€å‘è€…åˆ›ç«‹äº† Netscape å…¬å¸ï¼Œå¼€å‘ Netscape æµè§ˆå™¨ï¼Œä»–ä»¬åŸæ¥æƒ³å»¶ç»­ Mosaic çš„åå­—ï¼Œä½†æ˜¯ NCSA ä¸è®©ï¼Œæ‰€ä»¥æ–°èµ·äº†ä¸€ä¸ªé¡¹ç›®ä»£å·ï¼Œå«â€œMozillaâ€ï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯æŠŠâ€œMosaicâ€å’Œâ€œGodzillaâ€ç²˜åœ¨ä¸€èµ·ã€‚

ä»–çš„ UA æ˜¯ï¼š

    Mozilla/1.0 (Win3.1)

Netscape å¼€å§‹å˜å¾—å’Œä»–çš„å‰è¾ˆ Mosaic ä¸€æ ·æµè¡Œã€‚å¯æ˜¯ Netscape ä¸ Mosaic åŠŸèƒ½å¹¶ä¸ä¸€æ ·ï¼Œäºæ˜¯æœåŠ¡å™¨è½¯ä»¶å’Œç®¡ç†å‘˜å¼€å§‹åˆ©ç”¨ UA æ¥åˆ¤æ–­æµè§ˆå™¨ï¼Œå¹¶å‘é€å…¼å®¹çš„é¡µé¢ã€‚æ‰€ä»¥ï¼ŒUA ä»¥ Mozilla å¼€å¤´çš„æµè§ˆå™¨ä¼šè·å¾—æ›´åŠ é«˜çº§çš„ç½‘é¡µï¼Œå› ä¸º Netscape æ”¯æŒé«˜çº§ç‰¹æ€§ï¼Œåä¹‹å°±æ˜¯æ›´åŠ ç®€å•çš„ç½‘é¡µã€‚

3ã€Internet Explorer

å¾®è½¯æ‰“ç®—æ’ä¸Šä¸€è„šï¼Œä»–ä»¬å¼€å‘äº†è‡ªå·±çš„æµè§ˆå™¨ï¼Œå« Internet Explorerï¼Œå¹¶ä¸”åŠŸèƒ½å’Œ Netscape ä¸ç›¸ä¸Šä¸‹ã€‚ä½†æ˜¯ï¼Œä»–ä»¬è§‰å¾—æ²¡å¿…è¦ç­‰æœåŠ¡å™¨å¼€å‘è€…å’Œç½‘ç»œç®¡ç†å‘˜ç†Ÿæ‚‰è‡ªå·±ï¼Œç„¶åç»™è‡ªå·±å‘é€é«˜çº§ç½‘é¡µã€‚

ç›¸åï¼Œä»–ä»¬é€‰æ‹©å‡è£…è‡ªå·±æ˜¯ Netscapeï¼Œæ‰€ä»¥ UA æ˜¯è¿™æ ·ï¼š

    Mozilla/1.22 (compatible; MSIE 2.0; Windows 95)

ä¹‹åçš„æ•…äº‹å‡ ä¹æ˜¯æ‰€æœ‰å¾®è½¯æ•…äº‹çš„ç¿»ç‰ˆï¼Œå„æ–­ç„¶åè…çƒ‚ï¼Œå…¨çƒäººæ°‘ç”¨ç€ Internet Explorer ç›´åˆ° Google Chrome å‡ºç°ã€‚

4ã€Firefox Gecko

å¾®è½¯æ‰“è´¥äº† Netscapeï¼Œä½†æ˜¯ Netscape æˆç«‹äº† Mozilla ç»„ç»‡å€Ÿå°¸è¿˜é­‚ã€‚ä»–ä»¬å¼€æºäº† Netscapeï¼Œé‡å†™äº†ä¸å°‘ä»£ç ã€‚é‡å†™åçš„æ¸²æŸ“å¼•æ“å« Geckoï¼Œæµè§ˆå™¨å« Firefoxã€‚

å½“æ—¶ Netscape ç‹¬ç«‹å¼€å‘çš„æµè§ˆå™¨ç‰ˆæœ¬å·åˆšå¥½èµ°åˆ° 4.Xï¼Œäºæ˜¯æ–°çš„ Mozilla æµè§ˆå™¨å¥—ä»¶çš„ç‰ˆæœ¬å°±å˜æˆäº† 5.0ã€‚

æ‰€ä»¥ç«ç‹çš„ UA é•¿è¿™æ ·ï¼š

    Mozilla/5.0 (X11; Linux i686; rv:2.0.1) Gecko/20101130 Firefox/4.0.1

å› ä¸º Gecko å¼•æ“ä¸æ­¢ Firefox ä¸€ä¸ªåº”ç”¨ï¼Œæ‰€ä»¥ Firefox/4.0.1 ä»…ä»£è¡¨åº”ç”¨æœ¬èº«çš„ç‰ˆæœ¬ï¼ŒçœŸæ­£çš„ Gecko ç‰ˆæœ¬åœ¨å‰é¢çš„ rv:2.0.1 é‡Œé¢ã€‚

ç›´åˆ° Firefox 4 ï¼Œä»–ä»¬å†³å®šå†»ç»“ Gecko/yyyymmdd ä¸º Gecko/20100101ï¼ŒæŠ›å¼ƒäº†åœ¨ UA å†™ç¼–è¯‘æ—¥æœŸçš„å¥‡è‘©åšæ³•ã€‚

5ã€Konqueror KHTML

KDE å¼€æºçˆ±å¥½è€…å¼€å‘äº†è‡ªå·±çš„æµè§ˆå™¨å’Œæ¸²æŸ“å¼•æ“ã€‚KDE å°±æ˜¯ Kool æ¡Œé¢ç¯å¢ƒçš„ç¼©å†™ï¼Œç„¶åä»–ä»¬å¼€å‘çš„è®¸å¤šä¸œè¥¿èµ·åéƒ½è¦ä¸ K ç›¸å…³ã€‚

æµè§ˆå™¨å« Konquerorï¼Œæ¸²æŸ“å¼•æ“å« KHTMLã€‚ Gecko å¾ˆå¥½ï¼ŒIE ä¸å¥½ã€‚ç„¶å KDE è§‰å¾—è‡ªå·±çš„ KHTML ä¸ Gecko å·®ä¸å¤šä¸€æ ·å¥½ï¼Œæ”¯æŒä¹Ÿå·®ä¸å¤šï¼Œä»–ä»¬å’Œå¾®è½¯ä¸€æ ·é€‰æ‹©å‡è£…è‡ªå·±ã€‚äºæ˜¯ UA å°±å˜æˆäº†ï¼š

    Mozilla/5.0 (compatible; Konqueror/3.2; FreeBSD) (KHTML, like Gecko)

6ã€Safari WebKit

Apple çœ‹äº† KHTMLï¼Œå†³å®šæ‹¿è¿‡æ¥å¼€å‘è‡ªå·±çš„æµè§ˆå™¨å’Œå¼•æ“ã€‚

æµè§ˆå™¨å« Safariï¼Œå¼•æ“å« WebKitã€‚ä»–ä»¬ç»§æ‰¿äº† KHTML çš„å…¨éƒ¨è¦ç´ ï¼Œå‡è£…è‡ªå·±æ˜¯ KHTMLï¼ŒåŠ ä¸Šäº†è‡ªå·±çš„éƒ¨åˆ†ï¼Œäºæ˜¯ UA å°±è¿™æ ·äº†ï¼š

    Mozilla/5.0 (Macintosh; U; PPC Mac OS X; de-de) AppleWebKit/85.7 (KHTML, like Gecko) Safari/85.5

7ã€Chrome Blink

Google çœ‹äº† Apple Webkitï¼Œå†³å®šæ‹¿è¿‡æ¥å¼€å‘è‡ªå·±çš„æµè§ˆå™¨å’Œå¼•æ“ã€‚

æµè§ˆå™¨å« Chromeï¼Œå¼•æ“å« Blinkã€‚ä»–ä»¬ç»§æ‰¿äº† Webkit çš„å…¨éƒ¨è¦ç´ ï¼Œå‡è£…è‡ªå·±æ˜¯ Safariï¼ŒåŠ ä¸Šäº†è‡ªå·±çš„éƒ¨åˆ†ï¼Œäºæ˜¯ UA å°±è¿™æ ·äº†ï¼š

    Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US) AppleWebKit/525.13 (KHTML, like Gecko) Chrome/0.2.149.27 Safari/525.13

æ‰€ä»¥ UA å­—ç¬¦ä¸²å°±å˜æˆäº†è¿™ä¹ˆå¤§ä¸€å—åƒåœ¾ã€‚

ç›®å‰ç°ä»£çš„æµè§ˆå™¨å°±ä¸‰ä¸ªæµæ´¾

    Blinkï¼ˆChromeï¼‰

    Webkitï¼ˆSafariï¼‰

    Geckoï¼ˆFirefoxï¼‰ã€‚

å¥—å£³æµè§ˆå™¨æ¯”å¦‚ç°åœ¨çš„ Edge å’Œç°åœ¨çš„ Opera åŸºæœ¬ä¸Šå°±æ˜¯ Chrome æ”¹çš®è‚¤ï¼Œç„¶å Chrome å‡è£…è‡ªå·±æ˜¯ Webkit å’Œ Safariï¼ŒWebkit å‡è£…è‡ªå·±æ˜¯ Geckoã€‚

æ‰€æœ‰äººéƒ½åœ¨å‡è£…è‡ªå·±æ˜¯åˆ«äººï¼Œåªæœ‰ç«ç‹ä¸ç”¨å‡è£…ï¼Œå› ä¸ºæ— è®ºæ˜¯ä»–çš„å‰èº« Netscape è¿˜æ˜¯ç°åœ¨çš„ Geckoï¼Œéƒ½æ˜¯è¢«å‡è£…çš„é‚£ä¸ªã€‚

#### æ“ä½œç³»ç»Ÿæ—¶å…‰æœº timeshift

åŸºäºå¿«ç…§çš„å¤‡ä»½ç³»ç»Ÿ timeshift

    https://github.com/linuxmint/timeshift

    https://www.makeuseof.com/use-timeshift-backup-and-restore-linux-snapshots/
        https://discussion.fedoraproject.org/t/a-quick-guide-to-setting-up-btrfs-timeshift-on-fedora-33/27573

    https://ivonblog.com/posts/linux-timeshift-usage/

    ç«å“ï¼šåŸºäºå…¨ç›˜é•œåƒå¤‡ä»½çš„ cloneZilla

    Redhat çš„åº”æ€¥æ•‘æ´ç›˜ ReaR

        https://access.redhat.com/documentation/zh-cn/red_hat_enterprise_linux/7/html/system_administrators_guide/ch-relax-and-recover_rear

        https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_basic_system_settings/assembly_recovering-and-restoring-a-system_configuring-basic-system-settings#doc-wrapper

        https://www.yisu.com/zixun/460393.html

        `rear mkbackup` å‘½ä»¤ä¸åªåˆ›å»ºæ•‘æ´ç³»ç»Ÿäº†ï¼Œè¿˜èƒ½å®Œæ•´å¤‡ä»½æ“ä½œç³»ç»Ÿ

å¯¹æ ‡ Windows ç³»ç»Ÿæ˜ åƒå¤‡ä»½æˆ– MacOS çš„æ“ä½œç³»ç»Ÿå¤‡ä»½åŠŸèƒ½ã€‚ä»–ä¼šåœ¨ä½ æŒ‡å®šçš„ç¡¬ç›˜ï¼ˆæ¢å¤é©±åŠ¨å™¨ï¼‰è‡ªåŠ¨ç”¨ä¸€ä¸ªç›®å½•ä¿ç•™å„ç§å®‰è£…å¥½çš„ç¨‹åºå’Œè®¾ç½®ã€‚

Timeshiftæä¾›æ™‚å…‰æ©Ÿä¸€æ¨£çš„æ™‚å…‰å€’æµåŠŸèƒ½ï¼Œæ–¹ä¾¿ç”¨æˆ¶å‚™ä»½æ•´å€‹Linuxç³»çµ±åˆ°å¦å¤–ä¸€å€‹ç¡¬ç¢Ÿï¼Œä¸¦åœ¨ç³»çµ±å‡ºéŒ¯çš„æ™‚å€™ä¸€éµé‚„åŸï¼Œç”šè‡³å¯ä»¥åœ¨ LiveUSB æ¨¡å¼ä¿®å¾©æå£çš„ç³»çµ±ã€‚Timeshift ç•Œé¢ç›´è§€æ˜“ç”¨ï¼Œå¯ä»¥è¨­å®šè‡ªå‹•æ’ç¨‹å‚™ä»½ï¼Œå‚™ä»½æª”æ¡ˆé è¨­æœƒå£“ç¸®ä»¥ç¯€çœç¡¬ç¢Ÿç©ºé–“ã€‚

TimeshiftåŸç†æ˜¯çµ¦ç›®å‰ç³»çµ±è£½ä½œå¿«ç…§(snapshot)ï¼Œä¸¦å„²å­˜æˆå‚™ä»½æª”ã€‚å‚™ä»½æª”å»ºè­°æ”¾åœ¨å…¶ä»–ç¡¬ç¢Ÿï¼Œè¦é‚„åŸçš„è©±æ¯”è¼ƒå®¹æ˜“ï¼Œå°¤å…¶æ˜¯ç³»çµ±æ ¹æœ¬ç„¡æ³•é–‹æ©Ÿçš„ç‹€æ³ä¸‹ã€‚

> ç”¨Timeshiftå‚™ä»½ç³»çµ±

é¸æ“‡ä½¿ç”¨å¿«ç…§é¡å‹

    RSYNC å¿«ç…§é¡å‹ï¼Œæ­¤é¸é …é©ç”¨å¤§å¤šæ•¸Linuxç™¼è¡Œç‰ˆä½¿ç”¨çš„æª”æ¡ˆç³»çµ±ã€‚

    BTRFS å±¬æ–¼è¼ƒæ–°çš„æª”æ¡ˆç³»çµ±ï¼Œåªæœ‰ Fedora ç­‰å°‘æ•¸ç™¼è¡Œç‰ˆæ¡ç”¨ã€‚æ³¨æ„ btrfs å¿«ç…§éœ€è¦å»ºç«‹å­å·ã€‚

é¸å–å¿«ç…§å„²å­˜ä½ç½®

å¦‚åœ–æ‰€ç¤ºï¼Œä¸‹é¢å®¹é‡è¼ƒå¤§çš„vda2æ˜¯æˆ‘çš„ç³»çµ±ç¢Ÿï¼Œè€Œæˆ‘è¦å°‡ç³»çµ±å‚™ä»½åˆ°å¦ä¸€å€‹ç¡¬ç¢Ÿsda1ã€‚è«‹æ”¾å¿ƒï¼ŒTimeshiftçš„å‚™ä»½ä¸æœƒåˆªé™¤æ•´å€‹ç¡¬ç¢Ÿï¼Œè€Œæ˜¯å»ºç«‹ä¸€å€‹timeshiftç›®éŒ„å°ˆé–€æ”¾å¿«ç…§æª”æ¡ˆã€‚

æ¥è‘—é¸å–å¤šä¹…è¦è‡ªå‹•å»ºç«‹å¿«ç…§ã€‚

æ¥è‘—é¸å–æ˜¯å¦è¦å‚™ä»½ä½¿ç”¨è€…å®¶ç›®éŒ„æª”æ¡ˆï¼Œå…¨éƒ¨æ‰“å‹¾ã€‚Timeshiftä¸åªå‚™ä»½ä½¿ç”¨è€…å®¶ç›®éŒ„ï¼Œé€£GRUBéƒ½ä¸€èµ·å‚™ä»½ã€‚

é»é¸å·¦ä¸Šè§’å»ºç«‹å¿«ç…§

è¼¸å…¥sudoå¯†ç¢¼ï¼Œç­‰å¾…å¿«ç…§è£½ä½œå®Œæˆã€‚SSDå¯«å…¥é€šå¸¸äº”åˆ†é˜å°±å®Œæˆäº†ã€‚

å¾æª”æ¡ˆç®¡ç†å“¡å¯ä»¥çœ‹åˆ°Timeshiftè£½ä½œçš„å¿«ç…§ï¼Œä½”ç”¨çš„å®¹é‡æœƒæ¯”åŸå§‹çš„ç³»çµ±å°ä¸€äº›ã€‚ç•¶ç„¶é€™é‚Šåªæ˜¯ç¯„ä¾‹ï¼Œå¯¦å‹™ä¸Šå› ç‚ºè¦å„²å­˜å¤šä»½å¿«ç…§ï¼Œç”¨ä¾†å‚™ä»½çš„ç¡¬ç¢Ÿå®¹é‡é‚„æ˜¯å¾—æ¯”ç³»çµ±ç¢Ÿå¤§ã€‚

æ¥è‘—æˆ‘åœ¨æ¡Œé¢æ–°å¢ä¸€å¼µç›¸ç‰‡å’Œæ–‡å­—æª”ï¼Œç­‰æœƒé‚„åŸç³»çµ±çš„æ™‚å€™é€™äº›æª”æ¡ˆå°±æœƒä¸è¦‹ã€‚

> ç”¨Timeshifté‚„åŸç³»çµ±

é»é¸Timeshiftçš„å‚™ä»½æª”ï¼Œé»é¸ä¸Šæ–¹çš„ã€Œé‚„åŸã€ã€‚

é»é¸Timeshiftçš„å‚™ä»½æª”ï¼Œé»é¸ä¸Šæ–¹çš„ã€Œé‚„åŸã€ã€‚

é¸å–è¦é‚„åŸçš„ç¡¬ç¢Ÿ

æ‰€æœ‰é¸é …å…¨éƒ¨åŒæ„ï¼Œè¼¸å…¥sudoå¯†ç¢¼ï¼Œç­‰å¾…ç³»çµ±é‚„åŸï¼Œæ¥è‘—å®ƒæœƒé‡é–‹æ©Ÿã€‚

é‡é–‹æ©Ÿå¾Œç³»çµ±å›åˆ°è£½ä½œå¿«ç…§å‰çš„æ¨£å­ï¼Œæ¡Œé¢çš„æª”æ¡ˆä¸è¦‹äº†ã€‚

### å¤šæ˜¾ç¤ºå™¨è°ƒæ•´æ˜¾ç¤º

xrandr æ˜¯ Linux ç³»ç»Ÿä¸­ç”¨äºé…ç½®æ˜¾ç¤ºå™¨åˆ†è¾¨ç‡å’Œå¸ƒå±€çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œè€Œ arandr åˆ™æä¾›äº†å›¾å½¢åŒ–çš„ç•Œé¢ï¼Œå¯ä»¥æŒ‡å®šä¸»æ˜¾ç¤ºå™¨ã€æ‰©å±•å¤šå±å¹•ã€åŠ¨æ€è°ƒæ•´ï¼ˆç¼©æ”¾ã€æ—‹è½¬ã€åè½¬ï¼‰å±å¹•ç­‰åŠŸèƒ½ã€‚

### ä½¿ç”¨æ‹¼éŸ³è¾“å…¥æ³• ibus

    https://access.redhat.com/documentation/zh-cn/red_hat_enterprise_linux/9/html/getting_started_with_the_gnome_desktop_environment/assembly_enabling-chinese-japanese-or-korean-text-input_getting-started-with-the-gnome-desktop-environment

ç¡®è®¤å·²ç»å®‰è£…äº†æ”¯æŒä¸­æ–‡çš„å­—ä½“ï¼Œè¯¦è§ç« èŠ‚ [è®¾ç½®ä¸­æ–‡å­—ä½“]ã€‚

ç¡®è®¤é€‰æ‹©å¸¸ç”¨çš„è¾“å…¥æ³•æ¡†æ¶ï¼šFcitx æˆ– IBus

    IBUS https://www.ibus.com/

    Fcitx5  https://fcitx-im.org/wiki/Fcitx_5/zh-cn ä¹‹å‰çš„æ˜¯ Fcitx

ä¸»æµå‘è¡Œç‰ˆä½¿ç”¨ IBUS æ¡†æ¶ï¼Œæ¯”è¾ƒæˆç†Ÿäº†ï¼Œå®‰è£…ç®€å•

> Gnome æ¡Œé¢ç¯å¢ƒï¼š

Fedora å¯ä»¥ æ‰“å¼€ Gnome Softwareï¼Œ åœ¨ç±»åˆ« 'input source' æœç´¢ 'Pinyin' å®‰è£…æ‹¼éŸ³è¾“å…¥æ³•ï¼Œä¼šè‡ªåŠ¨å®‰è£…ä¸­æ–‡å­—ä½“ã€‚

Debian ç³» æ‰“å¼€ Gnome çš„ Settings -> Keyboard -> Input Sourceï¼Œç‚¹å‡»æ·»åŠ ï¼Œé€‰æ‹© â€œChinese(Intelligent Pinyin)â€ ï¼Œè¿™æ—¶æ—¶é—´æ å‡ºä¼šå‡ºç°enå›¾æ ‡ï¼Œç”¨çƒ­é”® 'Win+ç©ºæ ¼' å³å¯åˆ‡æ¢è¾“å…¥æ³•

    åŠ¡å¿…å‹¾é€‰ â€œSwitch input sources individually for each windowâ€ï¼Œè¿™æ ·æ–¹ä¾¿åœ¨æ–‡ä»¶ç®¡ç†å™¨ç­‰è½¯ä»¶ä¸­ä¿æŒé»˜è®¤è‹±è¯­ï¼Œæ”¯æŒçƒ­é”®

é¼ æ ‡ç‚¹å‡»ä¸ªå¯ä»¥è¾“å…¥æ–‡å­—çš„åœ°æ–¹ï¼Œç„¶ååˆ‡æ¢åˆ°æ‹¼éŸ³è¾“å…¥æ³•ï¼Œå³é”®ç‚¹å‡»è¾“å…¥æ³•åœ¨æ—¶é—´æ å¤„çš„â€œä¸­â€å­—å›¾æ ‡ï¼Œåœ¨å¼¹å‡ºèœå•é€‰æ‹© â€œPreferenceâ€ï¼Œè®¾ç½®ç”¨é€—å·å¥å·ç¿»é¡µ(flip page)ç­‰é€‰é¡¹ã€‚

GTK ç¨‹åºé»˜è®¤æ”¯æŒè¡¨æƒ…ç¬¦å·ï¼ŒæŒ‰çƒ­é”® ctl + . æˆ– ctl + ; ä¼šå¼¹å‡ºè¡¨æƒ…ç¬¦å·èœå•ã€‚

> KDE æ¡Œé¢ç¯å¢ƒ

1ã€å®‰è£… IBus åŠä¸­æ–‡è¾“å…¥æ³•

    sudo dnf install ibus ibus-libpinyin  # æ™ºèƒ½æ‹¼éŸ³

2ã€æ‰“å¼€ç³»ç»Ÿè®¾ç½®

KDE èœå• > ç³»ç»Ÿè®¾ç½® > é”®ç›˜ > è™šæ‹Ÿé”®ç›˜ï¼šç¡®ä¿å·²é€‰æ‹© IBusï¼ˆè€Œé Fcitx æˆ– XIMï¼‰ã€‚

3ã€æ·»åŠ ä¸­æ–‡è¾“å…¥æ³•

åœ¨æ—¶é—´æ å¤„çš„ ibus å›¾æ ‡ï¼Œé€‰æ‹©â€œé¦–é€‰é¡¹â€ï¼Œæ·»åŠ è¾“å…¥æ³•ï¼Œæœç´¢å¹¶é€‰æ‹© ä¸­æ–‡ (Intelligent Pinyin) æˆ–å…¶ä»–ä¸­æ–‡è¾“å…¥æ³•ã€‚

ç¡®è®¤åé€€å‡ºè®¾ç½®ã€‚

4ã€é‡å¯è®¡ç®—æœºç”Ÿæ•ˆ

> å‘½ä»¤è¡Œå®‰è£…ibusä¸­æ–‡è¾“å…¥æ³•(Linux/Ubuntu)

1 å®‰è£…ä¸­æ–‡è¯­è¨€åŒ…

å®‰è£…ä¸­æ–‡è¯­è¨€åŒ…æ˜¯ä¸ºäº†è®© Input Sources é‡Œé¢å‡ºç° Chinese è¿™ä¸€é¡¹ã€‚

é€‰æ‹© â€œManage Installed Languagesâ€-->â€œInstall/Remove Languagesâ€-->â€œChinese(Simplified)â€-->â€œApplyâ€ã€‚

2 å®‰è£…ibusè¾“å…¥æ³•

ç„¶åæ‰å¯ä»¥å®‰è£… ibus ä¸­æ–‡è¾“å…¥æ³•ã€‚

å…ˆå®‰è£… ibus æ¡†æ¶

    sudo apt-get install ibus ibus-clutter ibus-gtk ibus-gtk3 ibus-qt4

åˆ‡æ¢åˆ° ibus æ¡†æ¶

    # im-chooser
    $ im-config -s ibus

å®‰è£…æ‹¼éŸ³å¼•æ“

    $ sudo apt-get install ibus-pinyin

3 æ·»åŠ ibusä¸­æ–‡è¾“å…¥æ³•

æŠŠ ibus è¾“å…¥æ³•æ·»åŠ åˆ°è¾“å…¥æ³•æ ã€‚

ç°åœ¨ Input Source é‡Œé¢å°±æœ‰ Chinese äº†ï¼Œç‚¹è¿›å»ã€‚

é€‰æ‹© Chinese(Intelligent Pinyin)ã€‚

å³ä¸Šè§’é€‰æ‹© Chinese(Intelligent Pinyin)ï¼Œä¸­è‹±æ–‡åˆ‡æ¢æ–¹å¼å°±æ˜¯ shiftï¼ŒPreferences é‡Œé¢å¯ä»¥é€‰æ‹© 7 ä¸ªé€‰æ‹©é¡¹ã€‚

ç„¶åå°±å¯ä»¥æ„‰å¿«ä½¿ç”¨ ibus ä¸­æ–‡è¾“å…¥æ³•å•¦ã€‚

å¦ä¸€ä¸ªç¤ºä¾‹å¾ˆå¤æ‚

    sudo apt install ibus ibus-clutter ibus-gtk ibus-gtk3 ibus-qt4
    im-config -s ibus

    sudo apt install ibus-pinyin ibus-sunpinyin

### å®‰è£… fcitx è¾“å…¥æ³•æ¡†æ¶åŠè¾“å…¥æ³•

é Gnome æ¡Œé¢ç¯å¢ƒæ¯”è¾ƒå¤æ‚ï¼Œé€æ­¥æ‰‹å·¥æ“ä½œå§ã€‚

    Fedora KDE Plasma ä¸Šå®‰è£… fcitx5 rime https://www.usmacd.com/cn/fcitx5-rime/#

    Ubuntu22.04å®‰è£…Fcitx5ä¸­æ–‡è¾“å…¥æ³• https://zhuanlan.zhihu.com/p/508797663

    Fcitx 5

        https://github.com/fcitx/fcitx5

    Fcitx 5 é…ç½®è¯¦è§£ https://mephisto.cc/tech/fcitx5/

    ç»´åŸºç™¾ç§‘ä¸­æ–‡æ‹¼éŸ³è¯åº“

        https://github.com/felixonmars/fcitx5-pinyin-zhwiki

Fcitx æŠŠè‡ªå·±æ‹†åˆ†çš„æ¯”è¾ƒç»†ï¼šæ¡†æ¶ã€å›¾å½¢ç•Œé¢ã€ä¸­æ–‡è¾“å…¥æ³•ç­‰ï¼Œå®‰è£…æ—¶éœ€è¦åˆ†åˆ«å®‰è£…å¤šä¸ªåŒ…ï¼Œdnf/flatpak çš„ç‰ˆæœ¬æ›´æ–°çŠ¶æ€æœªå¿…ä¸€è‡´ï¼Œå¤šè¯•è¯•å§ã€‚

Fedora çš„è½¯ä»¶ä¸­å¿ƒé‡Œå°±æœ‰ï¼Œä¸è¿‡æˆ‘å®‰è£…äº†ä¹‹åæ— æ³•æ¿€æ´»è¾“å…¥æ³•ï¼Œå»å®˜ç½‘ä¸»é¡µçœ‹è¯´æ˜æ²¡æå®šã€‚

    Fedora

        $ sudo dnf install fcitx5 fcitx5-configtool fcitx5-chinese-addons

Debian

    $ sudo apt install fcitx5 \
        fcitx5-chinese-addons \
        fcitx5-frontend-gtk4 fcitx5-frontend-gtk3 fcitx5-frontend-gtk2 \
        fcitx5-frontend-qt5

å®‰è£…ä¸­æ–‡è¾“å…¥æ³• fcitx åŠ Google æ‹¼éŸ³è¾“å…¥æ³•

    $ sudo apt-get install fcitx fcitx-googlepinyin fcitx-module-cloudpinyin fcitx-sunpinyin

    æ ‘è“æ´¾å®‰è£…ä¸­æ–‡è¾“å…¥æ³•-è°·æ­Œæ‹¼éŸ³  https://blog.csdn.net/qq_45478359/article/details/113576252

æ ‘è“æ´¾ Raspbian ç³»ç»Ÿé»˜è®¤ä½¿ç”¨ LXDEï¼Œå¦‚æœ fcitx å’Œ scim éƒ½æ²¡æ³•ç”¨ï¼Œå°±åªèƒ½ç”¨ ibusã€‚

### è®¾ç½®ä¸­æ–‡å­—ä½“

æ¡Œé¢ç¯å¢ƒä¸‹ç³»ç»Ÿå†…ç½®çš„å­—ä½“ä¸­æ–‡ä¸å¥½çœ‹ï¼Œéœ€è¦è°ƒæ•´

    https://blog.csdn.net/linuxgroup/article/details/4162867

    https://www.systutorials.com/fedora-%e4%b8%ad%e6%96%87%e5%ad%97%e4%bd%93%e8%ae%be%e7%bd%ae/

    ç®€ä½“ä¸­æ–‡æ”¯æŒ https://wiki.archlinux.org/title/Localization/Simplified_Chinese

Gnome ç¯å¢ƒä¸‹å®‰è£…ä¸­æ–‡å­—ä½“æ¯”è¾ƒæ–¹ä¾¿

    Settings-->Region & Languaesï¼Œç‚¹å‡»æ·»åŠ  Languageï¼Œå‹¾é€‰ Chinese å³å¯

Gnome çš„å›¾å½¢ç•Œé¢è®¾ç½®ç¨‹åº Gnome Tweaks Tool(gnome-tweaks) æœ‰ â€œFontâ€ é€‰é¡¹å¡ï¼Œå¯ä»¥ç»™ç•Œé¢å’Œæ–‡æœ¬åˆ†åˆ«è®¾ç½®ä¸åŒçš„å­—ä½“ï¼Œä½†ä¸æ”¯æŒæŒ‰ä¸‰ç§é£æ ¼åˆ†åˆ«è®¾ç½®å­—ä½“åŠå›è½é€‰é¡¹

    åœ¨ â€œHintingâ€ï¼ˆæ¸²æŸ“å¾®è°ƒï¼‰é€‰é¡¹å»ºè®®å‹¾é€‰ â€œFullâ€ æ‹‰é«˜å­—ä½“ï¼Œå¦åˆ™æ˜¾å¾—æ‰

    å¯¹ç­‰å®½å­—ä½“ï¼Œå¦‚æœæ„Ÿè§‰ç³»ç»Ÿçš„å¤ªä¸‘ï¼Œå¯ä»¥é€‰ç”¨ â€œNoto Serif Mono Regularâ€ã€‚

    ä¹Ÿå¯ä½¿ç”¨å‘½ä»¤ï¼š

        # æŸ¥è¯¢æ¡Œé¢ç¯å¢ƒä½¿ç”¨çš„å­—ä½“
        $ gsettings get org.gnome.desktop.interface font-name

        # è®¾ç½®æ¡Œé¢ç¯å¢ƒçš„å­—ä½“
        $ gsettings set org.gnome.desktop.interface font-name 'Cantarell 10'

å•ä¸€è°ƒæ•´æ¡Œé¢ç¯å¢ƒçš„å­—ä½“è®¾ç½®ï¼Œæ¯”å¦‚é€‰æ‹©ä½¿ç”¨ä¸­æ–‡å­—ä½“ï¼Œåˆ™å¯¹è‹±æ–‡å­—ç¬¦çš„æ˜¾ç¤ºä¼šé»˜è®¤ä½¿ç”¨è¯¥å­—ä½“å†…ç½®çš„è‹±æ–‡å­—ä½“ã€‚

è€Œæˆ‘ä»¬æœ€éœ€è¦çš„ï¼Œæ˜¯ç±»ä¼¼ MS Word è¿™æ ·çš„ï¼Œå¯ä»¥è®©ç”¨æˆ·æ˜ç¡®æŒ‡å®šä¸€ç¯‡æ–‡ç« é‡Œçš„ä¸­ã€è‹±æ–‡å­—ä½“ã€‚åˆ©ç”¨ Windowsã€Linux éƒ½é»˜è®¤æ”¯æŒçš„å­—ä½“å›è½æœºåˆ¶ï¼Œé€‰æ‹©å¤šä¸ªä¸­è‹±æ–‡å­—ä½“ï¼Œä½¿å¾—æ˜¾ç¤ºè‹±æ–‡ä½¿ç”¨ä¸€ç§å­—ä½“ï¼Œæ˜¾ç¤ºä¸­æ–‡ä½¿ç”¨å¦ä¸€ç§å­—ä½“ï¼Œè¯¦è§ç« èŠ‚ [ä½¿ä¸­è‹±æ–‡åˆ†åˆ«ä½¿ç”¨ä¸€ç§å­—ä½“]ã€‚

#### å‰ç½®çŸ¥è¯†ï¼šç•Œé¢ä¸Šçš„å­—ä½“åˆ°åº•æ˜¯æ€ä¹ˆæ˜¾ç¤ºçš„

    https://zhuanlan.zhihu.com/p/32961737

æ ¹æ®å°åˆ·ä¸“ä¸šçš„åŒºåˆ†æ–¹æ³•ï¼Œå­—ä½“å¯ä»¥åˆ†åˆ«è®¾ç½®ä¸‰ç§é£æ ¼ï¼š

    sans

    serif

    mono

æ“ä½œç³»ç»Ÿå¦‚ Windowsã€Linuxï¼Œoffice/firefox ç­‰è½¯ä»¶éƒ½æ”¯æŒè®¾ç½®ä¸‰ç§é£æ ¼çš„å­—ä½“ï¼Œä¸”æ¯ç§é£æ ¼éƒ½å¯ä»¥è®¾ç½®å¤šä¸ªå­—ä½“ï¼ˆå‰ä¸€ä¸ªæœªæ‰¾åˆ°å°±ç”¨ä¸‹ä¸€ä¸ªï¼Œæ‰€è°“â€œå›è½â€ï¼‰

    åœ¨è¥¿æ–¹å›½å®¶çš„ç½—é©¬å­—æ¯é˜µè¥ä¸­ï¼Œå­—ä½“åˆ†ä¸ºä¸¤å¤§ç§ç±»ï¼šSans Serif å’Œ Serif

    Serif çš„æ„æ€æ˜¯æœ‰è¡¬çº¿ï¼Œå³æ–‡å­—å¸¦ç¬”é”‹ï¼Œæ¥è‡ªè‡ªç„¶çš„æ‰‹å†™å½¢æ€ã€‚æ¯”å¦‚ Times New Romaã€ä»¿å®‹ä½“ã€æ¥·ä½“ï¼Œä¸­è§„ä¸­å…·é€‚åˆæ­£æ–‡é˜…è¯»ï¼ŒWindows åœ¨æ–‡å­—å¤„ç†è½¯ä»¶ä¸­ä½¿ç”¨ Serif é£æ ¼çš„å­—ä½“ã€‚Serif æ˜¯ç°ä»£å°åˆ·è¡Œä¸šæœ€åˆçš„å­—ä½“é£æ ¼ã€‚

    Sans åœ¨å¤å¸Œè…Šè¯­ä¸­æ˜¯ without çš„æ„æ€ï¼Œç°åœ¨è‹±è¯­é‡Œé¢ä¹Ÿæœ‰è¿™ä¸ªè¯ã€‚Sans Serif æŒ‡æ²¡æœ‰é¢å¤–çš„è£…é¥°ï¼Œç¬”åˆ’ç²—ç»†å¤§è‡´å·®ä¸å¤šï¼Œæ¯”å¦‚ Tahomaã€é»‘ä½“ã€å¹¼åœ†ï¼Œç”¨äºæŠ¥çº¸æ ‡é¢˜ã€æ ‡è¯­ç­‰é†’ç›®åœºåˆï¼ŒWindows åœ¨çª—å£çš„æ ‡é¢˜æ ç­‰ä½ç½®å°±ä½¿ç”¨ san é£æ ¼çš„å­—ä½“ã€‚å®‹ä½“ æ˜¯æ˜ä»£ä¸ºé€‚åº”æœ¨ç‰ˆå°åˆ·çš„æœ¨çº¹ç‰¹ç‚¹å‘æ˜çš„æ¨ªç»†ç«–ç²—çš„å­—ä½“ï¼Œç¬”åˆ’ç²—å£®ï¼Œä¹Ÿå½’ç±»åœ¨ sans ç±»ã€‚Sans Serif æ˜¯ç°ä»£ç‚¹é˜µæ‰“å°æœºã€ç”µå­å±å¹•æµè¡Œåä¸ºé€‚åº”ç‚¹é˜µåŒ–çš„æ˜¾ç¤ºå‡ºç°çš„å­—ä½“é£æ ¼ã€‚

    Monospace ç­‰å®½å­—ä½“ï¼šè¿‘ä»£åœ¨æœºæ¢°æ‰“å­—æœºå‡ºç°åï¼Œé’ˆå¯¹æ‰“å­—æœºçš„ç‰¹ç‚¹å•ç‹¬ç±»ï¼Œè™½ç„¶ä¹Ÿå±äº Sans Serifï¼Œä½†ç”±äºæ˜¯ç­‰å®½å­—ä½“ï¼Œæ‰€ä»¥ç»†åˆ†å‡ºäº† Monospace è¿™ä¸€ç§ç±»ã€‚ï¼Œæ¯”å¦‚ Courier Newã€Consolasï¼Œé€‚åˆä¼šè®¡æ•°å­—ã€ç¼–ç¨‹å†™ä»£ç ç­‰æ ¼å¼ä¸¥è°¨ä¸Šä¸‹è¡Œçš„å­—ç¬¦ä¸¥æ ¼å¯¹é½çš„åœºåˆã€‚

å¾ˆå¤šæ–‡å­—å¤„ç†ç¨‹åºæœ‰è‡ªå·±çš„å­—ä½“é…ç½®ï¼Œè‡³å°‘ä¸‰ç§å½’ç±»ï¼šæ— è¡¬çº¿å­—ä½“ sans-serif, è¡¬çº¿å­—ä½“ serif, ç­‰å®½å­—ä½“ monospace, å°±ä¼šéµå¾ª fontconfig çš„è®¾ç½®äº†ã€‚ç”šè‡³ Firefox æµè§ˆå™¨ä¹Ÿå¯åœ¨ about:config ä¸­é’ˆå¯¹è¿™ä¸‰ç§é£æ ¼åˆ†åˆ«è®¾ç½®å­—ä½“ï¼Œä½†æ˜¯å¤§å¤šæ•°è½¯ä»¶éƒ½è‡ªåŠ¨å¤„ç†è¿™äº›ç»†èŠ‚ä¸è®©ç”¨æˆ·è‡ªè¡Œè®¾ç½®ã€‚

å¯¹ä¸œäºšå­—ç¬¦ CJK æ¥è¯´ï¼Œè¿™ä¸‰ç§é£æ ¼çš„å­—ä½“åˆæŒ‰å­—ç¬¦é›†ç»†åˆ†å‡ºæ”¯æŒç®€ä½“ä¸­æ–‡ SCã€ç¹ä½“ä¸­æ–‡ TCã€æ—¥æ–‡ JPã€éŸ©æ–‡ KR çš„åˆ†æ”¯ã€‚æœ‰äº›å¼‚ä½“å­—ï¼ˆVariable Fontï¼‰åœ¨ä¸‰ç§æ–‡å­—ä¸­éƒ½æœ‰ï¼Œéœ€è¦ç»Ÿä¸€è®¾è®¡æ–¹æ¡ˆï¼Œä½¿å¾—ä¸€ä¸ªå­—ä½“å³å¯æ˜¾ç¤ºå¤šå›½çš„æ–‡å­—ã€‚

#### å‰ç½®çŸ¥è¯†ï¼›å­—ä½“æ–‡ä»¶çš„æ ¼å¼

    https://www.ottoli.cn/study/fonts

å­—ä½“æ–‡ä»¶çš„æ ¼å¼è·Ÿå°åˆ·å’Œæ˜¾ç¤ºå™¨è¡Œä¸šçš„å‘å±•ç´§å¯†å…³è”ã€‚

PostScript Type 1

    1970å¹´ä»£ï¼Œè¥¿æ–¹çš„å­—ä½“ä¸šç•Œæ­£åœ¨ä»ç…§ç›¸æ’ç‰ˆï¼ˆPhotocompositionï¼‰è½¬ç§»åˆ°æ•°ç æ’ç‰ˆï¼ˆDigital Publishingï¼‰ã€‚å½¼æ—¶æŠ€æœ¯éå¸¸ä¸æˆç†Ÿï¼Œæ— è®ºæ˜¯è¡Œå°†å°±æœ¨çš„ç…§æ’æœºï¼Œè¿˜æ˜¯æ–¹å…´æœªè‰¾çš„ç”µè„‘ï¼Œå°åˆ·æ•ˆæœéƒ½éå¸¸å·®ã€‚

    åœ¨ PostScript å‡ºç°ä¹‹å‰ï¼Œæ‰“å°æœºå¤šä»¥ç‚¹é˜µå½¢å¼å®ç°ï¼Œä¹Ÿå°±æ˜¯ä¸€ç§ä½å›¾æ ¼å¼ã€‚æœ‰ç‚¹ç±»ä¼¼äºç°åœ¨æˆ‘ä»¬ç»å¸¸è§åˆ°çš„å„ç§è´­ç‰©å°ç¥¨æˆ–è€…ç”µå½±ç¥¨ï¼Œå–µå–µæœºæ‰“å°çš„ä¹Ÿæ˜¯è¿™ç§ç‚¹é˜µå­—ç¬¦ã€‚è¿™ç§æ‰“å°æ–¹å¼æ‰“å°çš„å­—ç¬¦å¾ˆä¸æ¸…æ™°ï¼Œç‰¹åˆ«æ˜¯æ”¾å¤§åæ€»æ˜¯å‡ºç°é”¯é½¿ã€‚

    PostScript æ˜¯ Adobe å…¬å¸åœ¨ 1984 å¹´å¼€å‘çš„é¡µé¢æè¿°è¯­è¨€ã€‚æˆ‘ä»¬ç°åœ¨ç†ŸçŸ¥çš„ PDFã€XPSã€SVG éƒ½æ˜¯åŒç±»å‹çš„ä¸œè¥¿ã€‚åŒæ—¶å®ƒä¹Ÿæ˜¯ä¸ªå®Œå¤‡çš„ç¼–ç¨‹è¯­è¨€ï¼Œç”¨å‡½æ•°çš„æ–¹å¼æè¿°åŸæœ¬ç”¨ç‚¹é˜µå½¢å¼å‘ˆç°çš„å­—ç¬¦ï¼Œå®ç°äº†è®¡ç®—æœºæ—¶ä»£ä»»æ„çƒæ”¾å¤§ç¼©å°å­—ç¬¦éƒ½ä¸ä¼šå¯¼è‡´å­—ä½“æ˜¾ç¤ºå‡ºç°é”¯é½¿çš„æ•ˆæœã€‚Type 1 æ˜¯ä½œä¸ºPostScriptçš„ä¸€éƒ¨åˆ†å‡ºç°çš„ä¸€ä¸ªé…å¥—å­—ä½“æ–‡ä»¶ï¼Œä¸€èˆ¬ç”± *.pfmï¼Œ*.pfbï¼Œ*.afmï¼Œ*.inf å››ä¸ªæ–‡ä»¶ç»„æˆã€‚

TrueType

    è‹¹æœå…¬å¸ä¸ºäº†å¯¹æŠ— Adobe å¼€å‘çš„ PostScript Type 1 å­—ä½“ï¼Œå¼€å‘äº† TrueType å­—ä½“ã€‚åæ¥ï¼Œå¾®è½¯ä¹ŸåŠ å…¥äº† TrueType çš„å¼€å‘ã€‚ç›¸å¯¹äºå•†ä¸šå°é—­ä¸¥å¯†çš„ PostScript å­—ä½“ï¼ŒTrueType æŠ€æœ¯è§„èŒƒå…¨éƒ¨å…¬å¼€ï¼Œä¸æ”¶å–ä¸€åˆ†é’±çš„æˆæƒè´¹ï¼ˆNo royaltyï¼‰ã€‚TrueType éšåæˆä¸ºäº†åº”ç”¨æœ€å¹¿æ³›çš„å±å¹•æ˜¾ç¤ºå­—ä½“æ ¼å¼ã€‚TrueType å­—ä½“æ–‡ä»¶åœ¨ Windows ä¸­çš„æ ¼å¼ä¸º .ttfï¼ˆTrueType Fontsï¼‰æˆ– .ttcï¼ˆTrueType Collectionï¼‰ï¼Œåœ¨ MacOS ä¸­ä¸º .dfontã€‚

    Hintingï¼ˆæ¸²æŸ“å¾®è°ƒï¼‰æ˜¯ä¸ºäº†é˜²æ­¢åœ¨æ˜¾ç¤ºæ—¶å‡ºç°çš„å­—ä½“èµ°å½¢çš„ä¿®æ­£ç¨‹åºï¼ŒTrueType å¯¹äºå­—ä½“ä¸­çš„æ¯ä¸€ä¸ªå­—ç¬¦ï¼ˆglyphï¼‰ï¼Œéƒ½æœ‰ä¸€å¥—ä¸ä¹‹ç›¸å¯¹åº”çš„ hintã€‚è¿™æ ·çœ‹æ¥ï¼Œä¸€å¥—ä¸€å¥—çš„ hint å°±ç›¸å½“äºé«˜å¾·çº³ Metafont ä¸­çš„ä¸€ä¸ªä¸ªå°ç¨‹åºã€‚

OpenType æ ‡å‡†å°†æ˜¯æœªæ¥å­—ä½“æ˜¾ç¤ºæŠ€æœ¯çš„ä¸»æµ

    å¾®è½¯è¿˜åœ¨1994å¹´å¼€å‘äº†ä¸€ä¸ªå«â€œæ™ºèƒ½å­—ä½“â€ï¼ˆTrueType Openï¼‰çš„æŠ€æœ¯ï¼Œä¸¤å¹´åä¸ Adobe çš„ Type 1 æŠ€æœ¯åˆå¹¶ï¼Œå…±åŒå¼€å‘äº†æ–°ä¸€ä»£å­—ä½“æ ¼å¼ OpenTypeï¼Œç”¨æ¥ä»£æ›¿ TrueType çš„åœ°ä½ã€‚å†ä¹‹åï¼Œè‹¹æœå’Œè°·æ­Œä¹Ÿé™†ç»­åŠ å…¥äº† OpenType çš„å¼€å‘ã€‚

    OpenType å‘ä¸‹å…¼å®¹ TrueType ä»¥åŠ PostScript å­—ä½“ï¼Œæ‰©å±•åå¯èƒ½ä¸º .otfã€.otcã€.ttfã€.ttc ç­‰ã€‚ä½¿ç”¨ PostScript æ›²çº¿çš„ OpenType å­—ä½“æ ¼å¼ä¸º .otfã€.otcï¼Œä½¿ç”¨ TrueType æ›²çº¿çš„æ ¼å¼ä¸º .ttfã€.ttcã€‚

    OpenType å­—ä½“ç¼–ç åŸºäºä¸‡å›½ç ï¼ˆUnicodeï¼‰ï¼Œå¯ä»¥æ”¯æŒä»»ä½•æ–‡æœ¬ï¼Œæˆ–è€…åŒæ—¶æ”¯æŒå¤šç§æ–‡æœ¬ã€‚ä¸€ä¸ª OpenType å­—ä½“å¯ä»¥å¸¦æœ‰æœ€å¤š 65,536 ä¸ªå­—å½¢ï¼ŒåŸºæœ¬æ»¡è¶³ç»å¤§å¤šæ•°åœ°åŒºçš„ä½¿ç”¨éœ€æ±‚ï¼ŒOpenType æ‹¥æœ‰è‰¯å¥½çš„è·¨å¹³å°å…¼å®¹æ€§ï¼Œèƒ½å¤Ÿåœ¨ Mac OSï¼ŒWindows å’Œä¸€äº› Unix ç³»ç»Ÿä¸­è¿›è¡Œè®¾ç½®ã€‚

    åŸºäº TrueType çš„ OpenType å­—ä½“ä½¿ç”¨ .ttf æ‰©å±•å

    åŸºäº PostScript çš„ OpenType å­—ä½“ä½¿ç”¨ .otf æ‰©å±•å

    .otc æ˜¯å­—ä½“åˆé›†ï¼ˆOpenType Collectionï¼‰å®ƒæ˜¯ä¸€ä¸ªé›†æˆæ–‡ä»¶ï¼Œåœ¨ä¸€å•ç‹¬æ–‡ä»¶ç»“æ„ä¸­åŒ…å«å¤šç§å­—ä½“ï¼ŒOTC å­—ä½“å®‰è£…ååœ¨å­—ä½“åˆ—è¡¨ä¸­ä¼šçœ‹åˆ°ä¸¤ä¸ªä»¥ä¸Šçš„å­—ä½“ã€‚å½“ä¸¤ä¸ªå­—ä½“ä¸­å¤§éƒ¨åˆ†å­—éƒ½ä¸€æ ·æ—¶ï¼Œä¸ºå…±äº«ç¬”åˆ’æ•°æ®ï¼Œå¯ä»¥å°†ä¸¤ç§å­—ä½“åšæˆä¸€ä¸ª OTC æ–‡ä»¶ï¼Œä»¥ä¾¿æ›´æœ‰æ•ˆåœ°å…±äº«è½®å»“æ•°æ®ã€‚ä¸»è¦æ˜¯ä¸ºäº†é€‚åº”å¤šç§å­—ä½“å…±äº«åŒä¸€ç¬”ç”»ï¼ŒåŒºåˆ«åªæ˜¯å­—ç¬¦å®½åº¦ä¸ä¸€æ ·ï¼Œä»¥é€‚åº”ä¸åŒçš„ç‰ˆé¢æ’ç‰ˆè¦æ±‚ï¼Œè¿™æ—¶ OTC æŠ€æœ¯å¯æœ‰æ•ˆåœ°å‡å°å­—ä½“æ–‡ä»¶çš„å¤§å°ã€‚è€Œ OTF å­—ä½“åˆ™åªåŒ…å«ä¸€ç§å­—å‹ã€‚

        https://www.zhihu.com/question/24639343

        å¯¹äºå¤§é™†åœ°åŒºçš„ä¸€èˆ¬ç”¨æˆ·è€Œè¨€ï¼Œé€‰æ‹© OTF ç‰ˆæœ¬çš„å­—ä½“èƒ½å¤Ÿæ»¡è¶³ç•Œé¢å­—ä½“ã€ä¸€èˆ¬æ’ç‰ˆç­‰éœ€æ±‚äº†ã€‚è€Œä½¿ç”¨ InDesignã€å…·æœ‰è¦æ±‚çš„ç”¨æˆ·ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ OTF æˆ– OTC ç‰ˆæœ¬ã€‚åœ¨ä¸æ”¯æŒå¤šè¯­è¨€åŠŸèƒ½çš„ç¨‹åºä¸­ï¼Œè¦è¿›è¡Œå¤šè¯­è¨€æ’ç‰ˆï¼Œåˆ™è¦å®‰è£…æ‰€è¦ç”¨è¯­è¨€çš„åœ°åŒºå­é›†ã€‚

    .ttcï¼ˆTrueType Collectionï¼‰ï¼Œå®ƒæ˜¯ TrueType å­—ä½“æ›²çº¿çš„é›†æˆæ–‡ä»¶(. TTCæ–‡ä»¶)ï¼Œç›®å‰æ“ä½œç³»ç»Ÿå¯¹ OTF çš„æ”¯æŒè¿˜ä¸å®Œå–„ï¼Œä¼šä½¿ç”¨ ttc æ ¼å¼çš„å­—ä½“æ–‡ä»¶

OpenType å¯å˜å­—ä½“ï¼ˆOpenType variable fontsï¼‰æŠ€æœ¯

    https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Fonts/Variable_Fonts_Guide

    https://mp.weixin.qq.com/s?__biz=MzA3MjM1MDUzMQ==&mid=2660341229&idx=1&sn=362723b69ae82aedd87689a5ab4b4c3a&chksm=847a9bc1b30d12d7e94a1d287dbe0774a3dd9405128ca4fb562f60d36d2b0260061d3798f51f&scene=21#wechat_redirect

ä¸ºäº†åœ¨ä¸€ä¸ªå•çº¯æ­£æ–‡å±•ç¤ºçš„é¡µé¢ä¸­ä½¿ç”¨ä¸€ä¸ªå­—ä½“ï¼Œä½ è‡³å°‘éœ€è¦å››ä¸ªå­—ä½“æ–‡ä»¶ï¼šå¸¸è§„Regularã€æ–œä½“Italicã€åŠ ç²—Boldã€æ–œä½“åŠ ç²—Bold Italicã€‚å¦‚æœä½ æƒ³æ·»åŠ æ›´å¤šçš„å­—é‡ï¼Œæ¯”å¦‚è®©é¢˜æ³¨æ›´è½»æˆ–è®©é¢å¤–å¼ºè°ƒçš„åœ°æ–¹æ›´é‡ï¼Œæ„å‘³ç€ä½ éœ€è¦æ›´å¤šæ–‡ä»¶ã€‚

å¯å˜å­—ä½“å±äº OpenType å­—ä½“è§„èŒƒä¸Šçš„æ¼”è¿›ï¼Œèƒ½å¤Ÿå‚¨å­˜è½®å»“å˜åŒ–æ•°æ®ï¼Œåœ¨åˆå§‹å­—å½¢è½®å»“çš„åŸºç¡€ä¸Šè‡ªåŠ¨ç”Ÿæˆä¸°å¯Œçš„å˜åŒ–é€ å‹ï¼Œå…è®¸åœ¨ä¸€ä¸ªå­—ä½“æ–‡ä»¶ä¸­åŒ…å«å¤šç§å­—é‡ï¼ˆWeightï¼‰å’Œæ ·å¼ï¼ˆStyleï¼‰ï¼Œè€Œä¸æ˜¯ä¸ºæ¯ç§å­—é‡å’Œæ ·å¼å•ç‹¬æä¾›æ–‡ä»¶ã€‚ä»è€Œæ— éœ€å†å°†ä¸åŒå­—å®½ã€å­—é‡æˆ–ä¸åŒæ ·å¼çš„å­—ä½“åˆ†å‰²æˆä¸åŒçš„å­—ä½“æ–‡ä»¶ã€‚é«˜å¾·çº³ï¼ˆDonald Knuthï¼‰å½“å¹´ç”¨ Metafont åˆ›ç«‹çš„æ›²çº¿è‡ªåŠ¨è°ƒæ•´æŠ€æœ¯å‘æ‰¬å…‰å¤§ï¼Œæ— çº§å­—é‡æˆä¸ºç°å®ã€‚

å¯å˜å­—ä½“æ˜¯ä¸€ç§æ–°å‹å­—ä½“æ ¼å¼

#### å®‰è£…å®˜æ–¹ä»“åº“çš„ä¸­æ–‡å­—ä½“åŒ…

    https://blog.lilydjwg.me/2023/3/5/linux-fonts.216591.html

    é™¤äº†ä¸­æ–‡å­—ä½“ï¼Œè¿˜å¯ä»¥å®‰è£…ç¬¦å·å­—ä½“ç”¨äºç¼–ç¨‹å’Œæ§åˆ¶å°æ˜¾ç¤ºï¼Œè§ç« èŠ‚ [å›¾æ ‡å­—ä½“]

> å¯¹ç‰ˆæœ¬æ¯”è¾ƒè€çš„ä¸æ”¯æŒä¸­æ–‡çš„ Linux

æ—©äº›å¹´è¿˜æ²¡æœ‰ Noto å’Œæ€æºçš„æ—¶å€™ï¼ŒLinux ç³»ç»Ÿä¸Šé€šå¸¸ä½¿ç”¨æ–‡æ³‰é©¿æ­£é»‘æˆ–è€…æ–‡æ³‰é©¿å¾®ç±³é»‘ã€‚åè€…æ˜¯åŸºäº Android ç³»ç»Ÿä¸Šçš„ Droid Sans Fallback å­—ä½“ï¼Œä½“ç§¯è¾ƒå°ã€‚å†ä¹‹å‰æ˜¯æ–‡é¼ç³»åˆ—å­—ä½“ï¼Œä¹Ÿå°±æ˜¯åå­—ã€ŒAR PLã€å¼€å¤´ã€åŒ…åå« ttf-arphic-{uming,ukai} çš„é‚£äº›ã€‚

    å…ˆå®‰è£…ä¸­æ–‡å­—ä½“

        # uming å’Œ ukaiå­—ä½“ï¼Œå³ AR PL UMing CN ç­‰
        $ sudo dnf install cjkuni-ukai-fonts cjkuni-uming-fonts

    ç„¶åä½¿ç”¨è¯¥é…ç½®å³å¯ https://github.com/zma/config_files/blob/master/others/local.conf

    ä¸Šè¿°é…ç½®æ–‡ä»¶å¯¹äº sans-serif å­—ä½“ä¼šé¦–é€‰ Libration Sansï¼Œå¦‚æœæ— æ³•æ˜¾ç¤ºé‚£ä¹ˆä¼šä½¿ç”¨ AR PL UMing CN å­—ä½“ã€‚è¿™æ ·è‹±æ–‡å­—ä½“ä½¿ç”¨ Libration Sans æ­£å¸¸æ˜¾ç¤ºã€‚è€Œå¯¹äºä¸­æ–‡å­—ä½“ï¼Œç”±äº Libration Sans ä¸­æ²¡æœ‰ä¸­æ–‡å­—ä½“ï¼Œå®é™…ä½¿ç”¨ AR PL UMing CN å­—ä½“æ˜¾ç¤ºã€‚è¿™æ ·å°±å®ç°äº†æ˜¾ç¤ºä¸­è‹±æ–‡çš„ sans-serif å­—ä½“å®é™…æ˜¯ä¸åŒçš„ä¸¤ç§å­—ä½“ç±»å‹ä¸­çš„ Sans å­—ä½“ã€‚

> ä¸»æµ Linux å‘è¡Œç‰ˆä½¿ç”¨ Noto å­—ä½“å†…ç½®æ”¯æŒä¸­æ–‡

Fedora ç³»ç»Ÿé»˜è®¤çš„ Cantarell å­—ä½“æ”¯æŒæ˜¾ç¤ºä¸­æ–‡ï¼Œä» Fedora 36 å¼€å§‹ä½¿ç”¨æ–°çš„å­—ä½“ Noto Fonts æ¥è¦†ç›–æ‰€æœ‰è¯­è¨€ï¼ˆæˆ–å°½å¯èƒ½å¤šçš„è¯­è¨€ï¼‰ï¼Œä½†éœ€è¦ç”¨æˆ·å•ç‹¬å®‰è£…è®¾ç½® [https://fedoraproject.org/wiki/Changes/ImproveDefaultFontHandling#Detailed_Description]ã€‚

Noto ç³»åˆ—å­—æ—ååªæ”¯æŒè‹±æ–‡ï¼Œå‘½åè§„åˆ™æ˜¯ Noto + Sans æˆ– Serif + æ–‡å­—åç§°ã€‚å…¶ä¸­ä¸œäºšå­—ç¬¦éƒ¨åˆ†å« Noto Sans/Serif CJK SC/TC/HK/JP/KRï¼Œè¯ CJK è¡¨ç¤ºä¸œäºšå­—ä½“ä¸­æ—¥éŸ©ï¼Œæœ€åä¸€ä¸ªè¯æ˜¯åœ°åŒºå˜ç§ã€‚

æ”¯æŒæ±‰è¯­çš„ Noto Fonts å­—ä½“æ‹†å‡ºæ¥å•ç‹¬çš„ cjk åŒ…ï¼ŒæŒ‰å…³é”®å­—æœç´¢å¯å¾—ï¼š

    $ dnf list --installed |grep noto|grep cjk
    google-noto-sans-cjk-vf-fonts.noarch
    google-noto-sans-mono-cjk-vf-fonts.noarch
    google-noto-serif-cjk-vf-fonts.noarch

æ³¨æ„ Fedora é»˜è®¤ä½¿ç”¨ .ttc æ ¼å¼è€Œä¸æ˜¯ .ttf æ ¼å¼ã€‚

å…¶å®è¿™ä¸ªå¼€æºä¸­æ–‡å­—ä½“å°±ä¸€å¥—ï¼Œåªæ˜¯åŒæ—¶è¢« Noto å’Œæ€æºä¸¤ä¸ªé¡¹ç›®æ”¶å½•

    Noto ç³»åˆ—å­—ä½“æ˜¯ Google ä¸»å¯¼çš„ï¼Œåå­—çš„å«ä¹‰æ˜¯ã€Œæ²¡æœ‰è±†è…ã€ï¼ˆno tofuï¼‰ï¼Œå› ä¸ºç¼ºå­—æ—¶æ˜¾ç¤ºçš„æ–¹æ¡†æˆ–è€…æ–¹æ¡†è¢«å«ä½œã€Œtofuã€ã€‚

    æ€æºç³»åˆ—å­—ä½“æ˜¯ Adobe ä¸»å¯¼çš„ã€‚å…¶ä¸­æ±‰å­—éƒ¨åˆ†è¢«ç§°ä¸ºã€Œæ€æºé»‘ä½“ã€å’Œã€Œæ€æºå®‹ä½“ã€ï¼Œæ˜¯ç”±è¿™ä¸¤å®¶å…¬å¸å…±åŒå¼€å‘çš„ï¼Œä¸¤ä¸ªå­—ä½“ç³»åˆ—çš„æ±‰å­—éƒ¨åˆ†æ˜¯ä¸€æ ·çš„ã€‚

Noto å­—ä½“åœ¨ Arch Linux ä¸Šä½äºä»¥ä¸‹è½¯ä»¶åŒ…ä¸­ï¼š

    noto-fonts: å¤§éƒ¨åˆ†æ–‡å­—çš„å¸¸è§æ ·å¼ï¼Œä¸åŒ…å«æ±‰å­—

    noto-fonts-cjk: æ±‰å­—ï¼Œä¸­æ—¥éŸ©ä¸‰å›½å­—ä½“

    noto-fonts-emoji: å½©è‰²çš„è¡¨æƒ…ç¬¦å·å­—ä½“

    noto-fonts-extra: æä¾›é¢å¤–çš„å­—é‡å’Œå®½åº¦å˜ç§

æ€æºå­—ä½“åœ¨ Arch Linux ä¸Šä½äºä»¥ä¸‹è½¯ä»¶åŒ…ä¸­ï¼š

    adobe-source-sans-fonts: æ— è¡¬çº¿å­—ä½“ï¼Œä¸å«æ±‰å­—ã€‚å­—æ—åå« Source Sans 3 å’Œ Source Sans Proï¼Œä»¥åŠå¸¦å­—é‡çš„å˜ä½“ï¼ŒåŠ ä¸Š Source Sans 3 VF

    adobe-source-serif-fonts: è¡¬çº¿å­—ä½“ï¼Œä¸å«æ±‰å­—ã€‚å­—æ—åå« Source Code Proï¼Œä»¥åŠå¸¦å­—é‡çš„å˜ä½“

    adobe-source-code-pro-fonts: ç­‰å®½å­—ä½“ï¼Œä¸å«æ±‰å­—ã€‚å­—æ—åå« Source Code Proï¼Œä»¥åŠå¸¦å­—é‡çš„å˜ä½“ï¼ŒåŠ ä¸Š Source Code Variableã€‚

    adobe-source-han-{sans,serif,mono}-{cn,hk,jp,kr,tw}-fonts: äº”ä¸ªåœ°åŒºçš„æ±‰å­—ä¹‹é»‘ä½“ã€å®‹ä½“å’Œç­‰å®½ç‰ˆæœ¬

    adobe-source-han-{sans,serif,mono}-otc-fonts: æ‰€æœ‰åœ°åŒºåˆä½“äº†çš„æ±‰å­—ä¹‹é»‘ä½“ã€å®‹ä½“å’Œç­‰å®½ç‰ˆæœ¬

    æ€æºæ±‰å­—å­—ä½“çš„å­—æ—åæœ‰ä¸¤ç§ï¼Œã€Œç‹¬ç«‹åŒ…è£…ã€çš„ç‰ˆæœ¬ï¼ˆé OTC ç‰ˆæœ¬ï¼‰ï¼Œæ˜¯ã€ŒSource Han Sans/Serifã€æˆ–æœ¬åœ°åŒ–åç§°ã€ç©ºæ ¼ã€åœ°åŒºä»£ç ï¼ˆCN/HK/TW/JP/KRï¼‰ã€‚æ¯”å¦‚ã€Œæ€æºé»‘ä½“ CNã€ã€ã€Œæºãƒè§’ã‚´ã‚·ãƒƒã‚¯ JPã€ç­‰ã€‚ä¹Ÿæœ‰å¸¦å­—é‡çš„åˆ«åã€‚

    è€Œå…¨éƒ¨æ‰“åŒ…çš„ OTC ç‰ˆæœ¬ï¼Œå­—æ—åæ˜¯æœ¬åœ°åŒ–åç§°æˆ–è€…è‹±æ–‡çš„ã€ŒSource Han Sans/Serifã€ç©ºæ ¼å†åŠ ä¸Šã€ŒHC/TC/HC/Kã€å˜ç§ä»£ç ã€‚å¦‚æœæ²¡æœ‰å˜ç§ä»£ç ï¼Œåˆ™æ˜¯æ—¥æ–‡å˜ç§ã€‚ä¸ºäº†åŒºåˆ†ï¼Œé¦™æ¸¯ç¹ä½“çš„ç‰ˆæœ¬é™„å¸¦ã€Œé¦™æ¸¯ã€å­—æ ·ï¼Œæ¯”å¦‚é»‘ä½“å«ã€Œæ€æºé»‘é«” é¦™æ¸¯ã€ã€‚è¿™äº›å­—ä½“ä¹Ÿæœ‰ä¸åŒå­—é‡çš„åˆ«åã€‚å¦å¤–æœ‰ä¸ªåŠå®½çš„ç‰ˆæœ¬ï¼Œæ˜¯åœ¨å­—æ—åçš„å˜ç§ä»£ç å‰åŠ ã€ŒHWã€å­—æ ·ï¼Œä»…æœ‰å°‘æ•°å‡ ä¸ªå­—ç¬¦æ˜¯åŠå®½çš„ã€‚

    OTC ç‰ˆæœ¬æœ‰è¶£çš„åœ°æ–¹åœ¨äºï¼Œå¯¹äºå¤§å¤šæ•°è½¯ä»¶æ¥è¯´ï¼Œä¸ç®¡ä½ å«å®ƒçš„å“ªä¸ªåœ°åŒºçš„åå­—ï¼Œå®ƒéƒ½ä¼šä»¥è®¾å®šçš„è¯­ç§æ¥æ˜¾ç¤ºã€‚æ¯”å¦‚ç½‘é¡µå£°æ˜è¯­ç§ä¸ºæ—¥æ–‡ï¼ˆ<html lang=ja>ï¼‰ï¼Œé‚£ä¹ˆä¸ç®¡å­—ä½“æŒ‡å®šä¸ºã€Œæºãƒè§’ã‚´ã‚·ãƒƒã‚¯ã€è¿˜æ˜¯ã€Œæ€æºé»‘ä½“ã€æˆ–è€…ã€Œë³¸ê³ ë”•ã€ï¼Œå®ƒéƒ½ä¼šã€Œé—¨ä¸Šæ’åˆ€ã€ç›´å­—æ‹å¼¯ã€å¤©é¡¶åŠ ç›–ã€èˆ¹é¡¶æ¼é›¨ã€ã€‚æ‰€ä»¥ç”¨è¿™ä¸ªå­—ä½“çš„è¯ï¼Œä¸å¦¨ä¸€å¾‹å†™ã€ŒSource Han Sansã€ï¼Œç„¶ååŠ å¥½è¯­ç§æ ‡è®°ã€‚æˆ‘çŸ¥é“çš„å”¯ä¸€ä¾‹å¤–æ˜¯ mpv çš„ ass å­—å¹•æ–‡ä»¶ï¼Œé‡Œè¾¹æŒ‡å®šæœ¬åœ°åŒ–åç§°çš„è¯ï¼Œä¼šä½¿ç”¨é‚£ä¸ªè¯­ç§çš„å˜ä½“æ˜¾ç¤ºã€‚

åœ¨ Gnome Software çš„é¦–é¡µåˆ†ç±»é‡Œï¼Œå°±å¯ä»¥å®‰è£…é€‰æ‹©ä¸­æ–‡å­—ä½“

    Localization--> Simplified Chinese æœ‰ä¸¤ä¸ªï¼š

        Localization supportï¼šç»™å†…è£…è½¯ä»¶æ·»åŠ ä¸­æ–‡å­—ä½“ã€ä¸­æ–‡è¯­è¨€åŒ…ï¼ŒåŒ…æ‹¬é»˜è®¤è¾“å…¥æ³•

        Core Localization supportï¼šå†…æ ¸çº§çš„å¦‚ glibc åº“çš„ä¸­æ–‡ç‰ˆï¼Œè¿™æ ·è¿å‘½ä»¤è¡Œæç¤ºéƒ½ä¼šæ˜¾ç¤ºä¸­æ–‡

        æ³¨æ„è¿™ä¸ªæ˜¯å…¨ç•Œé¢çš„æ±‰åŒ–ï¼Œç­‰åŒäºä½ åœ¨ç³»ç»Ÿè®¾ç½®çš„ Language é€‰æ‹©äº† ä¸­å›½-ä¸­æ–‡

    fontï¼šå•ç‹¬é€‰æ‹©å®‰è£…ä½ éœ€è¦çš„ä¸­æ–‡å­—ä½“

ä¹Ÿå¯åœ¨ä»¥ä¸‹é¡µé¢ä¸‹è½½æ‰‹å·¥å®‰è£…ï¼Œç›®å½•æ ‘é€‰ ttf -> ç®€ä½“ä¸­æ–‡

    https://github.com/notofonts/noto-cjk/blob/main/Sans/README.md

    https://github.com/notofonts/noto-cjk/blob/main/Serif/README.md

    è¯´æ˜ https://aur.archlinux.org/packages/noto-fonts-cjk-vf

    æ‰‹å·¥å®‰è£…è‡ªè¡Œä¸‹è½½çš„å­—ä½“çš„æ–¹æ³•å‚è§ç« èŠ‚ [Nerd font]ã€‚

    æ·»åŠ ä¸­æ–‡è¾“å…¥æ³•è§ç« èŠ‚ [ä½¿ç”¨æ‹¼éŸ³è¾“å…¥æ³•]ã€‚

ä¹Ÿå¯ä»¥åœ¨å‘½ä»¤è¡Œå®‰è£…ï¼Œå®‰è£…å®Œæˆåéƒ½æ˜¯ .ttc å­—ä½“

    Sans Serif å­—ä½“åŒ…ï¼š

        $ dnf search google-noto-sans-cjk
        google-noto-sans-cjk-fonts.noarch : Google Noto Sans CJK Fonts <---- å…¨éƒ¨cjkå­—ä½“ OTF æ–‡ä»¶æ‰“åŒ…
        google-noto-sans-cjk-hk-fonts.noarch : Traditional Chinese Multilingual Sans OTF font files for google-noto-cjk-fonts
        google-noto-sans-cjk-jp-fonts.noarch : Japanese Multilingual Sans OTF font files for google-noto-cjk-fonts
        google-noto-sans-cjk-kr-fonts.noarch : Korean Multilingual Sans OTF font files for google-noto-cjk-fonts
        google-noto-sans-cjk-sc-fonts.noarch : Simplified Chinese Multilingual Sans OTF font files for google-noto-cjk-fonts  <---- ä»…ç®€ä½“ä¸­æ–‡
        google-noto-sans-cjk-tc-fonts.noarch : Traditional Chinese Multilingual Sans OTF font files for google-noto-cjk-fonts
        google-noto-sans-cjk-ttc-fonts.noarch : Sans OTC font files for google-noto-cjk-fonts  <---- ä»…ç®€ä½“ä¸­æ–‡çš„ OTC æ ¼å¼æ‰“åŒ…
        google-noto-sans-cjk-vf-fonts.noarch : Google Noto Sans CJK Variable Fonts <---- å˜ä½“å­—åŒ…ï¼Œæ–‡ä»¶å°ï¼Œä¸çŸ¥ä¸ºå•¥æŠ¥å‘Šè·Ÿå‰é¢çš„ otf åŒ…å†²çªã€‚

    Serif å­—ä½“åŒ…ï¼š

        $ dnf search google-noto-serif-cj
        google-noto-serif-cjk-fonts.noarch : Google Noto Serif CJK Fonts  <---- å…¨éƒ¨cjkå­—ä½“ OTF æ–‡ä»¶æ‰“åŒ…
        google-noto-serif-cjk-jp-fonts.noarch : Japanese Multilingual Serif OTF font files for google-noto-cjk-fonts
        google-noto-serif-cjk-kr-fonts.noarch : Korean Multilingual Serif OTF font files for google-noto-cjk-fonts
        google-noto-serif-cjk-sc-fonts.noarch : Simplified Chinese Multilingual Serif OTF font files for google-noto-cjk-fonts  <---- ä»…ç®€ä½“ä¸­æ–‡
        google-noto-serif-cjk-tc-fonts.noarch : Traditional Chinese Multilingual Serif OTF font files for google-noto-cjk-fonts
        google-noto-serif-cjk-ttc-fonts.noarch : Serif OTC font files for google-noto-cjk-fonts  <---- ä»…ç®€ä½“ä¸­æ–‡çš„ OTC æ ¼å¼æ‰“åŒ…
        google-noto-serif-cjk-vf-fonts.noarch : Google Noto Serif CJK Variable Fonts <---- å˜ä½“å­—åŒ…ï¼Œæ–‡ä»¶å°ï¼Œä½†æ˜¯è·Ÿå‰é¢çš„ otf åŒ…å†²çªï¼Œä¸”å…¶otc æ–‡ä»¶ä¸ä¸€å®šæ‰€æœ‰è½¯ä»¶éƒ½æ”¯æŒ

æˆ‘çš„ Fedora 38 å‘è¡Œç‰ˆåœ¨å®‰è£…äº†ä¸­æ–‡è¾“å…¥æ³•åè‡ªåŠ¨å®‰è£…äº† Noto Sans CJKï¼Œä½†æ²¡æœ‰ Noto Serif CJKï¼Œæ‰‹åŠ¨å®‰è£…ä¸‹

    # https://fedoraproject.org/wiki/Changes/Noto_CJK_Variable_Fonts#Detailed_Description
    # æ‰€æœ‰å­—ä½“çš„å®Œæ•´ç‰ˆï¼šgoogle-noto-cjk-fonts
    # Serif åˆé›†ï¼šgoogle-noto-serif-cjk-fonts æ˜¯ OTF æ–‡ä»¶æ‰“åŒ…ï¼Œgoogle-noto-serif-cjk-ttc-fonts æ˜¯ OTC æ ¼å¼æ‰“åŒ…
    #   ä¹Ÿå¯ä»¥åªå®‰è£…ç®€ä½“ä¸­æ–‡ google-noto-serif-sc-fonts
    # $ sudo dnf install google-noto-serif-cjk-fonts
    #
    # Fedora æ”¯æŒå¼‚ä½“å­—ï¼ˆVariable Fontï¼‰ï¼Œè£…è¿™ä¸ªæœ€çœäº‹ï¼Œæ–‡ä»¶è¿˜å°
    $ sudo dnf install google-noto-serif-cjk-vf-fonts
    $ sudo dnf install google-noto-sans-cjk-vf-fonts

    mono ä¸ç”¨å•ç‹¬å®‰è£…ï¼Œsans å­—ä½“è‡ªå¸¦äº†

adobe æ€æºè·Ÿ Google Noto è¿™ä¿©å­—ä½“æ˜¯ä¸€å›äº‹

    https://github.com/adobe-fonts/source-han-sans

#### è®¾ç½®ä¸­è‹±æ–‡åˆ†åˆ«ä½¿ç”¨ä¸€ç§å­—ä½“ fontconfig

    ç”¨ fontconfig æ²»ç† Linux ä¸­çš„å­—ä½“ https://catcat.cc/post/2021-03-07/

    Linux fontconfig çš„å­—ä½“åŒ¹é…æœºåˆ¶ https://catcat.cc/post/2020-10-31/

    ç¤ºä¾‹ https://github.com/rydesun/myconf/tree/master/.config/fontconfig

    https://www.jinbuguo.com/gui/linux_fontconfig.html

    https://www.insidentally.com/articles/000036/

Fedora 36 å¼€å§‹é€šè¿‡ä½¿ç”¨æ–°çš„å­—ä½“ Noto Fonts æ¥è¦†ç›–å°½å¯èƒ½å¤šçš„è¯­è¨€ <https://fedoraproject.org/wiki/Changes/ImproveDefaultFontHandling#Detailed_Description>ï¼Œä½†å…¶é»˜è®¤çš„ Cantarell å­—ä½“æ˜¾ç¤ºä¸­æ–‡å¤ªä¸‘äº†ï¼Œéœ€è¦æ‰‹å·¥æ”¹è®¾ç½®ï¼Œåˆ©ç”¨â€œå›è½â€ä½¿å¾—ä¸­è‹±æ–‡åˆ†åˆ«ä½¿ç”¨ä¸åŒçš„å­—ä½“ã€‚

éœ€è¦æ‰‹å·¥è®¾ç½®æ“ä½œç³»ç»Ÿé’ˆå¯¹ä¸‰ç§é£æ ¼çš„é»˜è®¤å­—ä½“ï¼Œå¯¹è‹±æ–‡ä½¿ç”¨ç³»ç»Ÿé»˜è®¤çš„è‹±æ–‡å­—ä½“ï¼Œå¯¹ä¸­æ–‡å›è½åˆ° Google çš„å¼€æºå­—ä½“ï¼š

    Sans --> æ€æºé»‘ä½“ï¼ˆSource Han Sans/Noto Sans CJKï¼‰ï¼Œè‡ªå¸¦ mono é£æ ¼äº†

    Serif --> æ€æºå®‹ä½“ï¼ˆSource Han Serif/ Noto Serif CJKï¼‰

    å…¶å®æ€æºä¸­æ–‡å­—ä½“ä¹Ÿå†…ç½®äº†è¥¿æ–‡ï¼Œåªè®¾ç½®è¯¥ä¸­æ–‡å­—ä½“ä¹Ÿå¯ä»¥ï¼Œä½†å…¶è¥¿æ–‡éƒ¨åˆ†ä½¿ç”¨çš„æ˜¯ Adobe Source å®¶æ—å­—ä½“ä¸å¤§å¥½çœ‹æˆ‘ä»¬ä¸å»ä½¿ç”¨å®ƒï¼ˆæ€æºé»‘ä½“é›†æˆ Source Sans Proã€æ€æºå®‹ä½“é›†æˆ Source Serifï¼Œè¯¦è§ <https://sspai.com/post/38705>ï¼‰ã€‚

æŸ¥çœ‹å­—ä½“æ•ˆæœçš„å·¥å…·

    GNOME Character Map --- åŸå gucharmap ï¼Œå¯ä»¥æ£€æŸ¥æ‰€æœ‰å­—ç¬¦ä½¿ç”¨æŒ‡å®šçš„å­—ä½“æ—¶çš„æ¸²æŸ“æ•ˆæœï¼Œä»¥åŠå®ƒå›è½åˆ°ä»€ä¹ˆå­—ä½“ä¸Šäº†ã€‚æ‰¾åˆ°è¦æŸ¥çœ‹çš„å­—ç¬¦ï¼Œç„¶åå¯¹ç€å®ƒæŒ‰ä½å³é”®å³å¯ã€‚

    Fonts Tweak Tool(fonts-tweak-tool) å¯ä»¥ç›´è§‚çš„é¢„è§ˆä¸­æ–‡å­—ä½“çš„æ•ˆæœï¼Œè€Œä¸”å¯ä»¥è®¾ç½®æ›´å¤šçš„ truetype é€‰é¡¹ï¼Œæ”¯æŒæŒ‰ä¸‰ç§é£æ ¼åˆ†åˆ«è®¾ç½®å­—ä½“åŠå›è½é€‰é¡¹

        https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/desktop_migration_and_administration_guide/configure-fonts#substitute-font

        $ sudo dnf install fonts-tweak-tool

##### ä½¿ç”¨ fontconfig è½¯ä»¶é…ç½®å­—ä½“å›è½

Linux æ“ä½œç³»ç»Ÿä¸€èˆ¬éƒ½å†…ç½® fontconfig è½¯ä»¶åŒ…é€‰æ‹©å­—ä½“ï¼Œé»˜è®¤æ— éœ€ç”¨æˆ·å¹²é¢„

    https://www.freedesktop.org/software/fontconfig/fontconfig-user.html
        https://www.freedesktop.org/wiki/Software/fontconfig/

    https://wiki.archlinux.org/title/Font_configuration

åˆ—å‡ºå½“å‰ç³»ç»Ÿå®‰è£…çš„å­—ä½“æ–‡ä»¶

    $ fc-list : file

æ˜¾ç¤ºå½“å‰ç³»ç»Ÿå®‰è£…çš„ä¸­æ–‡å­—ä½“

    $ fc-list :lang=zh

è¯¥å‘½ä»¤è¿˜ä¼šåˆ—å‡ºè¯¥å­—ä½“æ”¯æŒçš„æµ“æ·¡ï¼Œæ¯”å¦‚ â€œNoto Serif CJK SC:style=Blackâ€ï¼Œåˆ™è®¾ç½®å­—ä½“æ—¶å¯ä»¥é€‰æ‹© â€œNoto Serif CJK SC Blackâ€ï¼Œè¿™æ ·å­—ä½“ä¼šåŠ é‡ç±»ä¼¼é»‘ä½“çš„æ•ˆæœã€‚

æµ‹è¯•è‡ªå·±çš„é€‰æ‹©æ˜¯å¦èƒ½å¤ŸåŒ¹é…ï¼Œå¯ä»¥è¿è¡Œï¼š

    $ fc-match "Noto Sans CJK SC"
    NotoSansCJK-VF.ttc: "Noto Sans CJK SC" "Regular"

    $ fc-match "Noto Serif CJK SC"
    NotoSerifCJK-VF.ttc: "Noto Serif CJK SC" "Regular"

    $ fc-match "Noto Serif CJK SC Black"
    NotoSans[wght].ttf: "Noto Sans" "Regular"

æŸ¥çœ‹é…ç½®åçš„æœ€ç»ˆå­—ä½“é€‰æ‹©

    $ fc-conflist

æŸ¥çœ‹é’ˆå¯¹æŒ‡å®šå­—ç¬¦çš„å­—ä½“ä¼˜å…ˆé¡ºåº

    # 534E æ˜¯ã€Œåã€å­—çš„ Unicode ç ç‚¹ä¹‹åå…­è¿›åˆ¶å€¼ï¼Œå¦‚æœä¸åŠ  -s å°±æ˜¯çœ‹æŒ‡å®šçš„æ¨¡å¼ä¼šåŒ¹é…ä¸Šçš„å­—ä½“äº†
    $ fc-match -s :charset=534E

    # æŸ¥çœ‹åœ¨è¯­ç§ä¸ºæ—¥æ–‡çš„æ—¶å€™ï¼Œä½¿ç”¨ serif å­—æ—åä¼šä½¿ç”¨å“ªä¸ªå­—ä½“æ¥æ˜¾ç¤ºã€Œåã€å­—
    $ fc-match serif:charset=534E:lang=ja

    # æŸ¥çœ‹åŒ…å«ã€Œåã€å­—çš„æ‰€æœ‰å­—ä½“
    $ fc-list :charset=534E

fontconfig æ”¯æŒå­—ä½“çš„å›è½ï¼ˆfallbackï¼‰ï¼Œå¯ä»¥å®ç°ä¸­è‹±æ–‡åˆ†åˆ«ä½¿ç”¨ä¸åŒçš„å­—ä½“ï¼Œä½†éœ€è¦ç”¨æˆ·æ‰‹å·¥é…ç½®ï¼Œä½†æ˜¯é…ç½®æ–‡ä»¶çš„ä½ç½®æ¯”è¾ƒä¹±ï¼š

    è®¾ç½® /etc/fonts/local.conf æ–‡ä»¶ï¼Œè¿™æ˜¯æœ€åˆçš„å®ç°ï¼Œå„å¤§å‘è¡Œç‰ˆéƒ½æ”¯æŒè¿™ä¸ªé…ç½®æ–¹å¼ã€‚

    éšç€å‘è¡Œç‰ˆçš„æ¼”è¿›ï¼Œåˆå¼€å§‹ä½¿ç”¨ /etc/fonts/fonts.confï¼Œè¿™æ˜¯æ›´ç¬¦åˆ XDG è§„èŒƒçš„ç”¨æ³•

        å»ºç«‹æ–‡ä»¶ fonts.conf

            ç³»ç»Ÿçº§åœ¨ /etc/fonts/conf.d/ ä¸‹

            ç”¨æˆ·çº§åœ¨ ~/.config/fontconfig/conf.d ä¸‹

            å…¶å®åº”è¯¥æ˜¯ $XDG_CONFIG_HOME æŒ‡å‘ $HOMEï¼Œä½†ç›®å‰ Gnome ç­‰æ¡Œé¢ç¯å¢ƒå¥½åƒéƒ½ä¸è®¾ç½®è¿™ä¸ªå˜é‡ã€‚

        ä½†æ˜¯ï¼Œæˆªæ­¢ 2025 å¹´ Fedora 41 ä¸Šä»ç„¶åªèƒ½ä½¿ç”¨ /etc/fonts/local.conf æ–‡ä»¶ã€‚

ä¸‹é¢çš„ç¤ºä¾‹æ˜¯æœ€åˆçš„æ ¼å¼ï¼Œç›®å‰ä»ç„¶å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼š

```xml
<?xml version='1.0'?>
<!DOCTYPE fontconfig SYSTEM 'fonts.dtd'>
<fontconfig>
 <!--
    Begin user preferred fonts config:
    Created by: Eric Zhiqiang Ma (zma [at] ericzma.com)
    https://github.com/zma/config_files/blob/master/fonts/local.noto.conf
    To use this, put it into /etc/fonts/local.conf for system wide configuration
    or ~/.fonts.conf for user-specific configuration
 -->
 <!--
  Preferred fonts:
    Noto fonts
    liberation fonts (for Monospace fonts)
 -->
 <!--
  Serif faces
 -->
 <alias>
  <family>serif</family>
  <prefer>
   <family>Noto Serif</family>
   <!-- æˆ‘çš„ Fedora ä¸‹ä¸­æ–‡å¤ªè½»ï¼Œç”¨åŠ æ·±çš„ Black-->
   <family>Noto Serif CJK SC Black</family>
   <family>Noto Serif CJK TC</family>
   <!--
   <family>Source Han Sans CN Normal</family>
   <family>Source Han Sans TWHK Normal</family>
   -->
  </prefer>
 </alias>
 <!--
  Sans-serif faces
 -->
 <alias>
  <family>sans-serif</family>
  <prefer>
   <family>Noto Sans</family>
   <family>Noto Sans CJK SC</family>
   <family>Noto Sans CJK TC</family>
   <!--
   <family>Source Han Sans CN Normal</family>
   <family>Source Han Sans TWHK Normal</family>
   -->
  </prefer>
 </alias>
 <!--
  Monospace faces
 -->
 <alias>
  <family>monospace</family>
  <prefer>
   <family>Liberation Mono</family>
   <!-- æˆ‘çš„ Fedora ä¸‹ä¸­æ–‡monoçš„å­—ç¬¦é—´è·å¤ªå¤§ï¼Œè¿˜æ˜¯ç”¨å»æ‰ Mono å­—æ ·çš„æ™®é€šçš„Sanså³å¯-->
   <family>Noto Sans CJK SC</family>
   <family>Noto Sans CJK TC</family>
   <!--
   <family>Source Han Sans CN Normal</family>
   <family>Source Han Sans TWHK Normal</family>
   -->
  </prefer>
 </alias>
</fontconfig>
```

æŠŠæ ¼å¼æ”¹é€ çš„æ›´è§„èŒƒï¼Œè¿™ä¸ªæ˜¯æ–°çš„å…¼å®¹æ—§çš„è§„èŒƒï¼š

    <alias> è½¬æ¢ä¸º <match> + <test> + <edit>ï¼š

        æ¯ä¸ª <alias> å—è¢«è½¬æ¢ä¸ºä¸€ä¸ª <match> å—ã€‚

        <family> æ ‡ç­¾çš„å†…å®¹è¢«ç§»åŠ¨åˆ° <test> å’Œ <edit> ä¸­ã€‚

    <prefer> è½¬æ¢ä¸º <edit>ï¼š

        <prefer> ä¸­çš„å­—ä½“åˆ—è¡¨è¢«ç§»åŠ¨åˆ° <edit> çš„ mode="prepend" ä¸­ã€‚

        mode="prepend" è¡¨ç¤ºå°†è¿™äº›å­—ä½“æ’å…¥åˆ°åŒ¹é…ç»“æœçš„æœ€å‰é¢ã€‚

```xml
<?xml version='1.0'?>
<!DOCTYPE fontconfig SYSTEM 'fonts.dtd'>
<fontconfig>
 <!--
    Begin user preferred fonts config:
    Created by: Eric Zhiqiang Ma (zma [at] ericzma.com)
    https://github.com/zma/config_files/blob/master/fonts/local.noto.conf
    To use this, put it into /etc/fonts/local.conf for system wide configuration
    or ~/.fonts.conf for user-specific configuration
 -->
 <!--
  Preferred fonts:
    Noto fonts
    liberation fonts (for Monospace fonts)
 -->

 <!--
  Serif faces
 -->
 <match>
  <test name="family">
   <string>serif</string>
  </test>
  <edit name="family" mode="prepend" binding="strong">
   <string>Noto Serif</string> <!-- ä¼˜å…ˆä½¿ç”¨ Noto Serif æ¸²æŸ“è‹±æ–‡ -->
   <!-- æˆ‘çš„ Fedora ä¸‹ä¸­æ–‡å¤ªè½»ï¼Œç”¨åŠ æ·±çš„ Black-->
   <string>Noto Serif CJK SC :style=Black</string> <!-- ä¸­æ–‡å›è½åˆ° Noto Serif CJK SC -->
   <string>Noto Serif CJK TC</string> <!-- ç¹ä½“ä¸­æ–‡å›è½åˆ° Noto Serif CJK TC -->
   <!--
   <string>Source Han Sans CN Normal</string>
   <string>Source Han Sans TWHK Normal</string>
   -->
  </edit>
 </match>

 <!--
  Sans-serif faces
 -->
 <match>
  <test name="family">
   <string>sans-serif</string>
  </test>
  <edit name="family" mode="prepend" binding="strong">
   <string>Noto Sans</string> <!-- ä¼˜å…ˆä½¿ç”¨ Noto Sans æ¸²æŸ“è‹±æ–‡ -->
   <string>Noto Sans CJK SC</string> <!-- ä¸­æ–‡å›è½åˆ° Noto Sans CJK SC -->
   <string>Noto Sans CJK TC</string> <!-- ç¹ä½“ä¸­æ–‡å›è½åˆ° Noto Sans CJK TC -->
   <!--
   <string>Source Han Sans CN Normal</string>
   <string>Source Han Sans TWHK Normal</string>
   -->
  </edit>
 </match>

 <!--
  Monospace faces
 -->
 <match>
  <test name="family">
   <string>monospace</string>
  </test>
  <edit name="family" mode="prepend" binding="strong">
   <!-- æˆ‘çš„ Fedora ä¸‹ä¸­æ–‡monoçš„å­—ç¬¦é—´è·å¤ªå¤§ï¼Œè¿˜æ˜¯ç”¨å»æ‰ Mono å­—æ ·çš„æ™®é€šçš„Sanså³å¯-->
   <string>Liberation Mono</string> <!-- ä¼˜å…ˆä½¿ç”¨ Liberation æ¸²æŸ“è‹±æ–‡ -->
   <string>Noto Sans CJK SC</string> <!-- ä¸­æ–‡å›è½åˆ° Noto Sans Mono CJK SC -->
   <string>Noto Sans CJK TC</string> <!-- ç¹ä½“ä¸­æ–‡å›è½åˆ° Noto Sans Mono CJK TC -->
   <!--
   <string>Source Han Sans CN Normal</string>
   <string>Source Han Sans TWHK Normal</string>
   -->
  </edit>
 </match>
</fontconfig>

```

ä¿®æ”¹æƒé™ï¼š

    $ chmod 644 ~/.config/fontconfig/fonts.conf

    # RHEL ç³»éœ€è¦é‡æ–°è®¾ç½® SELinux
    $ restorecon -vFr /etc/fonts

å‚è§ç« èŠ‚ [Fedora(SELinux) ä¸‹å®‰è£…ä¸‹è½½çš„å­—ä½“]ã€‚

åˆ·æ–°å­—ä½“ç¼“å­˜ï¼š

    $ sudo fc-cache -fv

æµ‹è¯•å­—ä½“é…ç½®æ˜¯å¦ç”Ÿæ•ˆï¼š

    $ fc-match serif
    NotoSerif[wght].ttf: "Noto Serif" "Regular"

    $ fc-match sans-serif
    NotoSans[wght].ttf: "Noto Sans" "Regular"

    $ fc-match monospace
    LiberationMono-Regular.ttf: "Liberation Mono" "Regular"

æ¥è‡ª tinywrkb <https://aur.archlinux.org/packages/noto-fonts-cjk-vf> çš„ä¾‹å­ï¼Œç¼–è¾‘ $XDG_CONFIG_HOME/fontconfig/fonts.conf æ–‡ä»¶ï¼š

```xml
<alias>
   <family>sans-serif</family>
   <prefer>
     <family>Noto Sans</family>
     <family>Noto Sans CJK SC</family>
     <family>Noto Color Emoji</family>
     <family>Noto Emoji</family>
   </prefer>
</alias>

<alias>
   <family>serif</family>
   <prefer>
     <family>Noto Serif</family>
     <family>Noto Serif CJK SC</family>
     <family>Noto Color Emoji</family>
     <family>Noto Emoji</family>
   </prefer>
</alias>

<alias>
  <family>monospace</family>
  <prefer>
    <family>Noto Sans Mono</family>
    <family>Noto Sans Mono CJK SC</family>
    <family>Noto Color Emoji</family>
    <family>Noto Emoji</family>
   </prefer>
</alias>

<alias>
  <family>Source Code Pro</family>
  <prefer>
    <family>monospace</family>
    <family>Noto Sans Mono</family>
    <family>Noto Sans Mono CJK SC</family>
    <family>Noto Color Emoji</family>
    <family>Noto Emoji</family>
  </prefer>
</alias>
```

æ¥è‡ªä¾äº‘çš„ä¾‹å­

    https://github.com/lilydjwg/dotconfig/tree/master/fontconfig
        https://blog.lilydjwg.me/2023/3/5/linux-fonts.216591.html

```xml
<match target="pattern">
  <test qual="any" name="family">
    <string>sans-serif</string>
  </test>
  <edit name="family" mode="prepend" binding="strong">
    <string>DejaVu Sans</string>
    <string>æ–‡æ³‰é©¿æ­£é»‘</string>
    <string>Twemoji</string>
    <string>Font Awesome 6 Free</string>
    <string>Font Awesome 6 Brands</string>
    <string>Source Han Sans</string>
  </edit>
</match>
```

å…¶å®ƒçš„ä¾‹å­

    æ–‡ç« è¾ƒè¯¦ç»† https://szclsya.me/zh-cn/posts/fonts/linux-config-guide/
        https://github.com/szclsya/dotfiles/blob/master/fontconfig/fonts.conf

    https://github.com/rydesun/dotfiles/blob/master/.config/fontconfig/conf.d/

è¿˜å¯ä»¥å¼€å¯ä¸€äº›è¯¸å¦‚è¿å­—ç­‰ç‰¹æ€§ï¼Œåªéœ€è¦è®¾ç½®ç‰¹æ®Šæ ‡å¿—å³å¯ï¼š

    https://learn.microsoft.com/zh-cn/typography/opentype/spec/featurelist

#### ç»™æ§åˆ¶å°consoleè®¾ç½®ä¸­æ–‡å­—ä½“

æ¡Œé¢ç¯å¢ƒä¸€èˆ¬è¿˜æä¾›ç›´æ¥åˆ‡æ¢åˆ°æ§åˆ¶å°çš„æ“ä½œï¼Œè¯¦è§ç« èŠ‚ [ç™»å½•æ§åˆ¶å° tty login]ã€‚

ç›®å‰æ§åˆ¶å°é»˜è®¤å­—ä½“åªæ”¯æŒåŸºæœ¬è‹±æ–‡ï¼Œæ²¡æœ‰ä½¿ç”¨æ¡Œé¢ç¯å¢ƒé»˜è®¤çš„æ”¯æŒä¸­æ–‡çš„ Noto å­—ä½“ã€‚

    å¦‚æœæ‚¨æ­£åœ¨ä½¿ç”¨çš„æ˜¯å›¾å½¢ç•Œé¢ï¼ˆGUIï¼‰ï¼Œå¹¶ä¸”ä½¿ç”¨çš„æ˜¯æ”¯æŒä¸­æ–‡çš„ç»ˆç«¯æ¨¡æ‹Ÿå™¨ï¼ˆå¦‚ GNOME Terminal æˆ– Konsoleï¼‰ï¼Œåˆ™é€šå¸¸ä¸éœ€è¦è¿›è¡Œè¿™äº›æ­¥éª¤ï¼Œå› ä¸ºç»ˆç«¯æ¨¡æ‹Ÿå™¨ä¼šè‡ªåŠ¨å¤„ç†ä¸­æ–‡æ˜¾ç¤ºã€‚

    å¦‚æœæ‚¨åœ¨æ§åˆ¶å°ä¸­é‡åˆ°ä¸­æ–‡æ˜¾ç¤ºé—®é¢˜ï¼Œå»ºè®®é¦–å…ˆæ£€æŸ¥æ‚¨çš„ç³»ç»Ÿæ˜¯å¦å®‰è£…äº†ä¸­æ–‡è¯­è¨€åŒ…å’Œå­—ä½“ã€‚

1ã€å®‰è£…ä¸­æ–‡å­—ä½“ï¼š

å¦‚æœä½ çš„æ“ä½œç³»ç»Ÿä¸­è¿˜æ²¡æœ‰å®‰è£…ä¸­æ–‡å­—ä½“ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£… Noto å­—ä½“ç³»åˆ—ï¼Œå®ƒæ”¯æŒå¤šç§è¯­è¨€ï¼ŒåŒ…æ‹¬ä¸­æ–‡ï¼š

    # sudo apt install fonts-noto-cjk
    $ sudo dnf install noto-fonts-cjk

2ã€é…ç½®æ§åˆ¶å°å­—ä½“ï¼š

æ§åˆ¶å°å­—ä½“é…ç½®é€šå¸¸åœ¨ /etc/default/grub æ–‡ä»¶ä¸­è®¾ç½®ã€‚æ‚¨éœ€è¦ç¼–è¾‘è¿™ä¸ªæ–‡ä»¶æ¥æŒ‡å®šä¸­æ–‡å­—ä½“ã€‚ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€å®ƒï¼Œä¾‹å¦‚ï¼š

    $ sudo nano /etc/default/grub

ç„¶åæ‰¾åˆ° GRUB_CMDLINE_LINUX è¿™ä¸€è¡Œï¼Œæ·»åŠ æˆ–è€…ä¿®æ”¹ consolefont å‚æ•°ï¼ŒæŒ‡å®šä¸­æ–‡å­—ä½“ã€‚ä¾‹å¦‚ï¼š

    GRUB_CMDLINE_LINUX="consolefont=ter-v32n"

ter-v32n æ˜¯ Noto Sans Mono CJK çš„å­—ä½“åç§°ä¹‹ä¸€ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ ls /usr/share/consolefonts/ æ¥æŸ¥çœ‹ç³»ç»Ÿä¸­å¯ç”¨çš„å­—ä½“åˆ—è¡¨ã€‚

ä¿®æ”¹ grub é…ç½®åï¼Œéœ€è¦æ›´æ–° GRUB ä»¥åº”ç”¨æ›´æ”¹ï¼š

    $ sudo grub2-mkconfig -o /boot/grub2/grub.cfg

æ³¨æ„ï¼šå¦‚æœæ‚¨çš„ç³»ç»Ÿä½¿ç”¨çš„æ˜¯ BIOSï¼ŒGRUB é…ç½®æ–‡ä»¶å¯èƒ½ä½äº /boot/grub/grub.cfgã€‚

æ›´æ–° GRUB é…ç½®åï¼Œé‡å¯æ‚¨çš„ç³»ç»Ÿä»¥ä½¿æ›´æ”¹ç”Ÿæ•ˆï¼š

    $ sudo reboot

> Fedroa ç‰¹æ®Š

ä» Fedora 15 å¼€å§‹ï¼ŒFedora å¼•å…¥äº†ä¸€ä¸ªæ–°çš„ç³»ç»Ÿç§°ä¸º console-setupï¼Œå®ƒä½¿ç”¨ kbd åŒ…æ¥ç®¡ç†æ§åˆ¶å°çš„é”®ç›˜å’Œå­—ä½“è®¾ç½®ã€‚

è¦é…ç½®æ§åˆ¶å°ä»¥ä½¿ç”¨ä¸­æ–‡ï¼Œæ‚¨å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š

1ã€å®‰è£…ä¸­æ–‡å­—ä½“ï¼š

å®‰è£… Noto Sans CJK å­—ä½“ï¼Œè¿™äº›å­—ä½“é€šå¸¸å·²ç»é¢„è£…åœ¨ Fedora ä¸­ã€‚å¦‚æœæ²¡æœ‰ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼š

    $ sudo dnf install noto-fonts-cjk

2ã€ä½¿ç”¨ kbd å·¥å…·é…ç½®æ§åˆ¶å°ï¼š

Fedora ä½¿ç”¨ kbd åŒ…ä¸­çš„ kbd å‘½ä»¤æ¥é…ç½®æ§åˆ¶å°ã€‚é¦–å…ˆï¼Œæ‚¨éœ€è¦æ‰¾å‡ºå¯ç”¨çš„ä¸­æ–‡å­—ä½“ã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤åˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„æ§åˆ¶å°å­—ä½“ï¼š

    $ ls /lib/kbd/consolefonts

è¿™å°†åˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„æ§åˆ¶å°å­—ä½“æ–‡ä»¶ã€‚

é€‰æ‹©å¹¶è®¾ç½®ä¸­æ–‡å­—ä½“ï¼š

ä»ä¸Šä¸€æ­¥çš„è¾“å‡ºä¸­é€‰æ‹©ä¸€ä¸ªä¸­æ–‡å­—ä½“ï¼Œä¾‹å¦‚ unifont æˆ– WenQuanYi Zen Heiï¼Œç„¶åä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è®¾ç½®æ§åˆ¶å°å­—ä½“ï¼š

    $ sudo kbd -f /lib/kbd/consolefonts/your-chosen-font.psf

è¯·å°† your-chosen-font.psf æ›¿æ¢ä¸ºæ‚¨é€‰æ‹©çš„å­—ä½“æ–‡ä»¶çš„å®é™…è·¯å¾„ã€‚

æ›´æ–°GRUBé…ç½®ï¼ˆå¦‚æœéœ€è¦ï¼‰ï¼š

    å¦‚æœæ‚¨éœ€è¦æ°¸ä¹…æ›´æ”¹æ§åˆ¶å°å­—ä½“ï¼Œå¯èƒ½éœ€è¦ç¼–è¾‘ /etc/default/grub æ–‡ä»¶ï¼Œå¹¶æ·»åŠ æˆ–ä¿®æ”¹ GRUB_CMDLINE_LINUX è¡Œï¼ŒåŒ…å« consolefont å‚æ•°ã€‚ç„¶åï¼Œä½¿ç”¨ grub2-mkconfig å‘½ä»¤æ›´æ–°GRUBé…ç½®ã€‚

é‡å¯ç³»ç»Ÿï¼š

æ›´æ”¹æ§åˆ¶å°å­—ä½“è®¾ç½®åï¼Œæ‚¨å¯èƒ½éœ€è¦é‡å¯ç³»ç»Ÿä»¥ä½¿æ›´æ”¹ç”Ÿæ•ˆï¼š

    $ sudo reboot

åˆ‡æ¢åˆ°æ§åˆ¶å°å¹¶æµ‹è¯•ä¸­æ–‡æ˜¾ç¤ºï¼š

ç³»ç»Ÿé‡å¯åï¼Œä½¿ç”¨ Ctrl+Alt+F1 è‡³ Ctrl+Alt+F6 åˆ‡æ¢åˆ°è™šæ‹Ÿæ§åˆ¶å°ï¼Œå¹¶æµ‹è¯•ä¸­æ–‡å­—ç¬¦çš„æ˜¾ç¤ºã€‚

#### è½¬æ¢ Windows é»˜è®¤æ–‡ä»¶ç¼–ç  GBK(GB-2132)

Linux æ–‡ä»¶é»˜è®¤ç¼–ç æ˜¯ UTF-8ï¼Œæ‰€ä»¥ Windows ä¸‹çš„æ–‡ä»¶è¦æ­£å¸¸åœ¨ Linux ä¸‹æ˜¾ç¤ºï¼Œéœ€è¦è½¬æ¢ï¼Œé™¤é Linux ä¸‹çš„è½¯ä»¶æ”¯æŒæ˜¾ç¤º GBK

å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤è½¬æ¢

    # æ–‡æœ¬å†…å®¹è½¬æ¢ iconv
    yum install -y glibc-common
    iconv -f gbk -t utf8 test.gbk -o test.utf8

    # æ–‡ä»¶åè½¬æ¢ convmv
    yum install -y convmv
    convmv -f gbk -t utf-8 -r --notest /your/æ–‡ä»¶å

### ç»™åº”ç”¨è®¾ç½®æ¡Œé¢å›¾æ ‡

è¿›å…¥å¦‚ä¸‹ç›®å½•ï¼Œå¤åˆ¶ä¸€ä¸ªæ–‡ä»¶ï¼Œæ”¹æ”¹å°±è¡Œï¼š

    /usr/share/applications/

ç¤ºä¾‹

```ini
[Desktop Entry]
Type=Application
Name=Xfce Terminal
Exec=xfce4-terminal
Icon=utilities-terminal
Categories=GTK;System;TerminalEmulator;
```

### è¿œç¨‹æ¡Œé¢ vnc/rdp/mstsc

    å°± X windows æ¡Œé¢æ¥è¯´ï¼Œæœ¬æ¥å°±æ²¡æœ‰ä¸è¿œç¨‹çš„ï¼ŒXServer å’Œ XClient æ”¾åœ¨ä¸€å°ç”µè„‘ä¸Šå°±æ˜¯æœ¬åœ°æ¡Œé¢ï¼Œé€šè¿‡  ssh -x è¿æ¥å°±è¿œç¨‹äº†ï¼Œæ²¡æœ‰æœ¬è´¨åŒºåˆ«ã€‚

è¿œç¨‹æ¡Œé¢ï¼šå½“ä½ ä»å¦ä¸€å°ç”µè„‘ä¸Šæƒ³è¦é€šè¿‡å›¾å½¢åŒ–ç•Œé¢æ“ä½œè¿œç¨‹ Linux æ—¶éœ€è¦ç”¨åˆ°ã€‚å¸¸è§çš„å›¾å½¢åŒ–è¿œç¨‹æ¡Œé¢è¿æ¥åè®®æ˜¯ RDP å’Œ VNCã€‚

    Linux ä¸‹çš„è¿œç¨‹æ¡Œé¢ä½“ç³»å¾ˆå¤š VNC(TigerVnc)ç­‰ï¼Œé€‚åº” X Window(X11)ã€Wayland ç­‰æ¡Œé¢ä½“ç³»

    Windows ä¸‹çš„è¿œç¨‹æ¡Œé¢å·¥å…·æ˜¯ mstscï¼Œä½¿ç”¨ Microsoft RDP(Remote Desktop) ä½“ç³»

VNC æ˜¯å¤§éƒ¨åˆ† Linux å‘è¡Œç‰ˆé»˜è®¤çš„åŸºäº RFB åè®®çš„è¿œç¨‹æ¡Œé¢ç¨‹åº

    å¯¹æœåŠ¡å™¨ç«¯åŸºäº X Window çš„æ¡Œé¢ç¯å¢ƒæ¥è¯´ï¼Œvnc server çš„å®ç°æ˜¯åŸºäº Xserver åç«¯çš„ï¼Œç›´æ¥ç»™å‰ç«¯çš„ vnc viwer ä¼ è¾“å›¾åƒæ•°æ®ã€‚

    Xvncï¼š æ˜¯ä¸€ç§ X11 serverï¼Œå®ƒèƒ½ç‹¬ç«‹è¿è¡Œï¼Œå®ƒå·²ç»åŒ…å«äº† Xserverï¼Œæ— éœ€ç³»ç»Ÿå®‰è£… Xserver åº“ï¼Œä½†éœ€è¦ä¸€ä¸ªæ¡Œé¢ç«¯å»æ“ä½œå®ƒã€‚

    x11vncï¼šXvnc åŒ…å«è‡ªå·±çš„ XServer, x11vnc å´ä¸åŒ…å«ã€‚x11vnc ä¹Ÿæ˜¯ä¸€ç§ VNC serverï¼Œå®ƒéœ€è¦ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„ X serverï¼Œå¦‚ Xvncï¼Œæˆ– Xvfbã€‚

æŠ€æœ¯ä¸Šçš„å·®åˆ«

    VNC ä¸»è¦ä¼ å›¾åƒï¼Œé€‚ç”¨äºç˜¦å®¢æˆ·ç«¯ã€‚

    RDP ä¸»è¦ä¼ æŒ‡ä»¤ï¼Œé€‚ç”¨äºä½é€Ÿç½‘ç»œã€‚æ­¤å¤–å¾®è½¯è¿˜æœ‰é’ˆå¯¹ RDP çš„è½¯ä»¶å¢å¼ºæŠ€æœ¯ RemoteFX åŠ é€Ÿä¼ è¾“é€Ÿåº¦ã€‚

    å¯¹ Wayland æ¡Œé¢æ¥è¯´ï¼Œå…¶ä½¿ç”¨ xwayland æ¨¡å—å…¼å®¹ X window ç¨‹åº

å¦‚æœéœ€è¦ä½¿ç”¨è€å¼çš„ x11ï¼ˆXDMCPåè®®ï¼‰å›¾å½¢çª—å£è¿æ¥åˆ° Xserver(X.org)ï¼Œå»ºè®®å®‰è£…ä½¿ç”¨ MobaXterm/Xshell çš„å…è´¹ç‰ˆã€‚

ç°åœ¨æ¯”è¾ƒæµè¡Œåœ¨ Windows å’Œ Linux çš„è¿œç¨‹æ¡Œé¢éƒ½ä½¿ç”¨ RDP åè®® çš„å·¥å…·ï¼š

    è¾“å…¥ä½ è¦è¿æ¥çš„æœºå™¨çš„ IP åœ°å€ï¼Œä¸€èˆ¬å‰ç¼€ä¸º rdp://

å…·ä½“å®ç°ä¸Šï¼Œå·®åˆ«å¾ˆå¤§ï¼Œè¿œç¨‹ä¸»æœºå®‰è£…æœåŠ¡ç«¯ï¼Œå®¢æˆ·æœºä½¿ç”¨å®¢æˆ·ç«¯è½¯ä»¶è¿›è¡Œè¿æ¥

    https://zhuanlan.zhihu.com/p/630641235

è¿˜æœ‰æ›´å¤šçš„æ–¹å¼æ¯”å¦‚ web å¯ä»¥å®ç°è¿œç¨‹æ¡Œé¢

    https://devicetests.com/share-linux-desktop-web-browser

#### è¿œç¨‹æ¡Œé¢è½¯ä»¶ä½“ç³»

åœ¨å‘½ä»¤è¡Œç•Œé¢ä¸‹ï¼Œè¿œç¨‹ç®¡ç† Linux æœåŠ¡å™¨éƒ½ä½¿ç”¨åŸºäº SSH åè®®çš„å‘½ä»¤è¡Œç®¡ç†æ–¹å¼ã€‚è€Œ Linux æ¡Œé¢ç¯å¢ƒä¸‹ï¼Œæœ‰å¤šç§ä½“ç³»ï¼š

RDP åè®®(å€¾å‘äºä¼ è¾“æŒ‡ä»¤ï¼Œé€‚ç”¨äºä½é€Ÿç½‘ç»œ)

    RDP æœåŠ¡å™¨ç«¯è½¯ä»¶

        Linux å†…ç½® rdp åè®®çš„æœåŠ¡ç«¯ï¼Œ

            å¯å•ç‹¬å®‰è£… xrdp æ”¯æŒå¤šä¸ªè¿œç¨‹æ¡Œé¢ç”¨æˆ·åŒæ—¶ç™»å½•ï¼Œå‚è§ç« èŠ‚ [ä½¿ç”¨ xrdp æœåŠ¡ç«¯]

        Windows å†…ç½® rdp åè®®çš„æœåŠ¡ç«¯

    RDP å®¢æˆ·ç«¯è½¯ä»¶

        Linux çš„ Gnome æ¡Œé¢å†…ç½® Connections(gnome-connections)

            æ¨èå®‰è£… Remminaï¼Œæ”¯æŒå‰ªåˆ‡æ¿ã€æ”¯æŒå…±äº«æ–‡ä»¶å¤¹ç­‰é«˜çº§åŠŸèƒ½

        Windows ä½¿ç”¨å†…ç½®çš„ mstsc.exe

VNCï¼ˆåŸºäº RFB åè®®å€¾å‘äºä¼ è¾“å›¾åƒï¼Œé€‚ç”¨äºç˜¦å®¢æˆ·ç«¯ï¼‰

    VNC æœåŠ¡å™¨ç«¯è½¯ä»¶

        Linux å†…ç½® vnc åè®®çš„æœåŠ¡ç«¯

            å¯å•ç‹¬å®‰è£… TigerVNC æ”¯æŒå¤šä¸ªè¿œç¨‹æ¡Œé¢ç”¨æˆ·åŒæ—¶ç™»å½•ï¼Œå‚è§ç« èŠ‚ [ä½¿ç”¨ TigerVNC Server]

        Windows å®‰è£… TigerVNC è½¯ä»¶çš„æœåŠ¡ç«¯

    VNC å®¢æˆ·ç«¯è½¯ä»¶

        Linux çš„ Gnome æ¡Œé¢å†…ç½® Connections(gnome-connections)ï¼Œæˆ–å®‰è£… Remmina

        Windows å®‰è£… TigerVNC è½¯ä»¶çš„å®¢æˆ·ç«¯

ä½¿ç”¨ NX æŠ€æœ¯ä½“ç³»çš„ X2GO

        https://wiki.x2go.org/doku.php/doc:newtox2go

    X2Go åŸºäº NoMachine çš„ NX è¿œç¨‹æ¡Œé¢åè®®ï¼Œé€šè¿‡åˆ©ç”¨ä¸»åŠ¨å‹ç¼©å’Œç¼“å­˜è§£å†³ä½å¸¦å®½å’Œé«˜å»¶è¿Ÿçš„ç½‘ç»œè¿æ¥é—®é¢˜

    ç”±è¿œç¨‹æ¡Œé¢æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ç»„ä»¶ç»„æˆ

        $ sudo dnf install x2goclient
        $ sudo dnf install x2goserver

    X2Go çš„æœåŠ¡ç«¯ç›®å‰åªæ”¯æŒéƒ¨ç½²åœ¨ Linux ä¸Šï¼Œå› ä¸ºåˆ©ç”¨ ssh åŠ å¯†ï¼Œæ‰€ä»¥ç™»å½•æ—¶è¦è¾“å…¥ä½ çš„ SSH ç™»å½•åå’Œå¯†ç ã€‚
    X2Go çš„å®¢æˆ·ç«¯æ”¯æŒå„ä¸ªå¹³å°éƒ¨ç½²ï¼Œè€Œä¸”å¯ä»¥æŠŠ rdp å®¢æˆ·ç«¯å·¥å…·å¦‚ xfreerdp ä½œä¸ºè‡ªå·±çš„åç«¯ï¼Œè¿™æ ·å°±å¯ä»¥è¿æ¥ rdp åè®®çš„æœåŠ¡å™¨äº†ã€‚

å…¶å®ƒå•†ä¸šè½¯ä»¶ï¼Œè‡ªæˆä½“ç³»

    TeamViewer å•†ä¸šç‰ˆæœ¬ï¼Œå…è´¹ä½¿ç”¨æœ‰æœŸé™

    rustdeskï¼Œå›½äººå›¢é˜Ÿï¼Œå¯ä»¥è‡ªå»ºå¼€æºæœåŠ¡å™¨

        https://rustdesk.com/docs/en/self-host/

> Linux ä¸‹çš„å®¢æˆ·ç«¯å·¥å…·

1ã€Gnome å†…ç½®çš„å®¢æˆ·ç«¯è½¯ä»¶åä¸º â€œè¿æ¥ Connections(gnome-connections)â€ï¼ŒåŒæ—¶æ”¯æŒ rdp å’Œ vnc åè®®ã€‚

è½¯ä»¶ virt-manager è‡ªå¸¦ virt-viewerï¼Œåœ¨è½¯ä»¶å•†åº—é‡Œå« remote viewerã€‚

2ã€åŸºäº FreeRDP çš„å®¢æˆ·ç«¯è½¯ä»¶

æ¨èä½¿ç”¨å›¾å½¢åŒ–å·¥å…· Remminaï¼ŒåŒæ—¶æ”¯æŒ rdp å’Œ vnc åè®®ï¼Œå¯é…ç½®é¡¹ç›®å¾ˆå¤šï¼Œè¯¦è§ç« èŠ‚ [ä½¿ç”¨ Remmina å®¢æˆ·ç«¯è½¯ä»¶]ã€‚

xfreerdp æ˜¯å‘½ä»¤è¡Œå®¢æˆ·ç«¯ï¼Œæ›¿ä»£äº†å·²ä¸å†å¼€å‘çš„ rdesktop

    https://github.com/FreeRDP/FreeRDP/wiki

        å‘½ä»¤è¡Œå‚æ•°æ¯”è¾ƒç‹¬ç‰¹ https://github.com/awakecoding/FreeRDP-Manuals/blob/master/User/FreeRDP-User-Manual.markdown

        å¯ä»¥æœ‰é…ç½®æ–‡ä»¶ https://github.com/awakecoding/FreeRDP-Manuals/blob/master/Configuration/FreeRDP-Configuration-Manual.markdown

        æœ‰é—®é¢˜å…ˆçœ‹çœ‹ FAQ https://github.com/FreeRDP/FreeRDP/wiki/FAQ

        è¿æ¥ Win7 éœ€è¦æŒ‡å®šä½çº§tlsç‰ˆæœ¬ https://github.com/FreeRDP/FreeRDP/wiki/FAQ#windows-7-errconnect_tls_connect_failed

    xfreerdp /u:â€usernameâ€ /v::3389

        /d: æŒ‡å®šåŸŸ
        /u: è¿œç¨‹è®¡ç®—æœºçš„ç™»å½•ç”¨æˆ·
        /v: è¿œç¨‹è®¡ç®—æœºçš„ip åœ°å€æˆ–ä¸»æœºå:ç«¯å£
        /w and /h: è®¾ç½®è¿œç¨‹æ¡Œé¢çª—å£çš„å®½åº¦å’Œé«˜åº¦
        /dynamic-resolution: æ ¹æ®æœ¬åœ°çª—å£å¤§å°åŠ¨æ€è°ƒæ•´è¿œç¨‹æ¡Œé¢çª—å£çš„å®½åº¦å’Œé«˜åº¦
        /f: å…¨å±
        /bpp: æ¡Œé¢é¢œè‰²ä½æ·±ï¼Œä¸€èˆ¬è®¾ç½®ä¸º32,ä½é€Ÿç½‘ç»œæ”¹ä¸º 16ã€8
        /sound: å¼€å¯å£°éŸ³è®¾å¤‡é‡å®šå‘ï¼Œå€¼ä¸€èˆ¬æ˜¯ sys:pulse æˆ– sys:alsaï¼Œè·Ÿæœ¬åœ°Linuxç³»ç»Ÿçš„å£°éŸ³è®¾å¤‡ç›¸å…³
        +clipboard: å¼€å¯å‰ªè´´æ¿
        -wallpaper: å…³é—­æ˜¾ç¤ºè¿œç¨‹å£çº¸
        /a:drive,home,/homeï¼šé‡å®šå‘æŒ‡å®šçš„è®¾å¤‡ï¼ŒåŒ…æ‹¬è·¯å¾„ã€æ‰“å°æœºç­‰
            https://github.com/FreeRDP/FreeRDP/wiki/CommandLineInterface#plugins
            /drives æˆ– /home-drive: æŠŠæ‰€æœ‰æœ¬åœ°é©±åŠ¨å™¨é‡å®šå‘åˆ°è¿œç¨‹
            /printer: æŠŠæ‰€æœ‰æœ¬åœ°æ‰“å°æœºé‡å®šå‘åˆ°è¿œç¨‹
            /usb: <usbid>is a string like dev:054c:0268 when use `lsusb`

        ä¹Ÿå¯ä»¥ç”¨ posix å‘½ä»¤è¡Œå½¢å¼ï¼Œä½†æ˜¯ä¼šå¤ªé•¿ https://github.com/awakecoding/FreeRDP-Manuals/blob/master/User/FreeRDP-User-Manual.markdown#alternate-syntax

    $ xfreerdp /v:54.226.239.0:3389 /u:"Administrator" /cert:tofu /p:password +clipboard -wallpaper /w:800 /h:600 /dynamic-resolution /f /sound:sys:pulse

åŸ rdesktop <ip>

    rdesktop -f -r clipboard:PRIMARYCLIPBOARD -r disk:mydisk=/home/$(whoami)/win-share-dir <ip>

        -f å…¨å±
        -r clipboard:PRIMARYCLIPBOARD æ˜¯å®ç°å‰ªåˆ‡æ¿å…±äº«ï¼Œä¹Ÿå°±æ˜¯ç‰©ç†æœºå¤åˆ¶è™šæ‹Ÿæœºç²˜è´´ã€‚
        -r disk:mydisk=/device å®ç°æ–‡ä»¶å¤¹å…±äº«ï¼Œmydiskæ˜¯åå­—ï¼Œå¯ä»¥éšä¾¿å–ï¼Œ/deviceæ˜¯ç‰©ç†æœºä¸Šç”¨äºå…±äº«çš„æ–‡ä»¶å¤¹
        ip ï¼š è™šæ‹Ÿæœºçš„IP

        æŒ‰ `ctrl + alt +å›è½¦` é€€å‡ºæˆ–è¿›å…¥å…¨å±æ¨¡å¼ã€‚

å› ä¸º Linux æ”¯æŒå¤šç§æ¡Œé¢ç¯å¢ƒå¦‚ gnomeã€kedã€i3 ç­‰å¾…ï¼Œå„ä¸ªè¿œç¨‹æ¡Œé¢çš„å®¢æˆ·ç«¯è½¯ä»¶ï¼Œç™»å½•åçš„é»˜è®¤æ¡Œé¢å„ä¸ç›¸åŒï¼Œè¯¦è§å„è½¯ä»¶çš„è¯´æ˜ã€‚

#### ä½¿ç”¨ Remmina å®¢æˆ·ç«¯è½¯ä»¶

æ”¯æŒå¤šç§è¿œç¨‹æ¡Œé¢/è¿œç¨‹è¿æ¥çš„å®¢æˆ·ç«¯è½¯ä»¶ï¼Œå¿…å¤‡è½¯ä»¶

    https://remmina.org

    https://zhuanlan.zhihu.com/p/26879292

    ç«å“ Free RDP  http://www.freerdp.com/

    ç«å“ Gnome connections

> å¿«æ·ä½¿ç”¨

    åœ¨åœ°å€æ å·¦ä¾§çš„ä¸‹æ‹‰èœå•ä¸­é€‰æ‹© RDP/VNC åè®®ã€‚

    åœ¨åœ°å€æ ä¸­è¾“å…¥æœåŠ¡å™¨çš„IPåœ°å€ï¼Œç„¶åæŒ‰ä¸‹ å›è½¦ã€‚

    å½“è¿æ¥å¼€å§‹æ—¶ï¼Œä¼šæ‰“å¼€å¦ä¸€ä¸ªè¿æ¥çª—å£ã€‚åˆæ¬¡è¿æ¥ä¼šæç¤ºæœåŠ¡å™¨ç«¯çš„ ssl æŒ‡çº¹ï¼Œç¡®è®¤å³å¯ã€‚æ ¹æ®æœåŠ¡å™¨çš„è®¾ç½®ï¼Œä½ å¯èƒ½éœ€è¦ç­‰å¾…ï¼Œç›´åˆ°æœåŠ¡å™¨ç”¨æˆ·å…è®¸è¿æ¥ï¼Œæˆ–è€…ä½ å¯èƒ½éœ€è¦æä¾›å¯†ç ã€‚

    è¾“å…¥ç™»å½•ç”¨æˆ·åå’Œå¯†ç ï¼Œç„¶åæŒ‰ OKã€‚è¯¥å¯†ç å¯ä»¥åœ¨æœåŠ¡å™¨ç«¯çš„è¿œç¨‹æ¡Œé¢è®¾ç½®é‡Œæ‰¾åˆ°ï¼Œå¯¹gnomeå†…ç½®çš„è¿œç¨‹æ¡Œé¢åŠŸèƒ½ï¼ŒæœåŠ¡å™¨é‡å¯åè¯¥å¯†ç ä¼šå¼ºåˆ¶å˜åŒ–ï¼Œä¹Ÿå³æœ‰æ•ˆæ€§æ˜¯å—é™çš„ã€‚

è¿æ¥åé»˜è®¤ä½¿ç”¨çš„åˆ†è¾¨ç‡æ˜¯å¾ˆä½çš„ï¼Œé™¤äº†æ›´æ”¹é…ç½®æ–‡ä»¶å¤–ï¼Œè¿˜æœ‰å‡ ä¸ªè®¾ç½®åªèƒ½åœ¨å·¥å…·æ ç‚¹å‡»è®¾ç½®ï¼š

    ç‚¹å‡»æŒ‰é’® â€œToggle dynamic resolution updateâ€ï¼Œå®ç°å¯ä»¥è‡ªåŠ¨é€‚åº”æœ¬æœºçª—å£å¤§å°è°ƒæ•´è¿œç¨‹æ¡Œé¢çš„åˆ†è¾¨ç‡

    ç‚¹å‡»æŒ‰é’® â€œâ€œToggle fullscreen modeâ€ï¼Œå®ç°å…¨å±æ¨¡å¼

    ç‚¹å‡»æŒ‰é’® â€œGrub all keyborad eventsâ€ï¼Œå®ç°å¯ä»¥åœ¨è¿œç¨‹æ¡Œé¢è®¡ç®—æœºçš„ alt+tab çƒ­é”®åˆ‡æ¢çª—å£

    ç‚¹å‡»ä¸‰ä¸ªç‚¹å¯ä»¥åœ¨å„ä¸ªé…ç½®æ–‡ä»¶é—´åˆ‡æ¢é€‰æ‹©

    è¿è¡Œè¿‡ç¨‹ä¸­å¦‚æœä¿®æ”¹äº†é…ç½®æ–‡ä»¶ï¼Œå•å‡» refresh å¯ä»¥ç«‹å³ç”Ÿæ•ˆã€‚

å½“å¤„äºå…¨å±æ¨¡å¼æ—¶ï¼Œæ³¨æ„å±å¹•ä¸Šè¾¹ç¼˜çš„ç™½è‰²çª„æ¡ï¼Œé¼ æ ‡åˆ’è¿‡ä¼šæ˜¾ç¤º Remmina å·¥å…·æ ï¼Œå½“ä½ éœ€è¦ç¦»å¼€å…¨å±æ¨¡å¼æˆ–æ”¹å˜ä¸€äº›è®¾ç½®æ—¶ï¼Œä½ å¯ä»¥æŠŠé¼ æ ‡ç§»åˆ°å®ƒä¸Šé¢ã€‚

> ç»™ä½ çš„è¿œç¨‹è¿æ¥å»ºç«‹ä¸€ä¸ªé…ç½®æ–‡ä»¶

å¦‚æœéœ€è¦è°ƒæ•´é…ç½®å¦‚å…±äº«æ–‡ä»¶å¤¹ã€æ’­æ”¾å£°éŸ³ç­‰åŠŸèƒ½ï¼Œéœ€è¦ç»™ä½ çš„è¿œç¨‹è®¡ç®—æœºæ–°å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶

    ç‚¹å‡»å·¦ä¸Šè§’çš„ + å·ï¼Œå¼¹å‡ºä¸€ä¸ªæ–°çª—å£ï¼Œè¾“å…¥åç§°

    åœ¨ â€œProtocolâ€ åˆ—è¡¨é€‰æ‹© â€œRDPâ€

    åœ¨ â€œServerâ€ å¡«å…¥è¦è¿æ¥çš„è¿œç¨‹æœåŠ¡å™¨çš„ ip

    åœ¨ â€œUsernameâ€ å’Œ â€œPasswordâ€ å¡«å…¥ç™»å½•è¯¥æœåŠ¡å™¨çš„ç”¨æˆ·åå’Œå¯†ç ã€‚æ³¨æ„å¦‚æœæœåŠ¡å™¨ä½¿ç”¨çš„æ˜¯gnomeå†…ç½®çš„è¿œç¨‹æ¡Œé¢åŠŸèƒ½ï¼ŒæœåŠ¡å™¨é‡å¯åå¯†ç ä¼šå¼ºåˆ¶å˜åŒ–ï¼Œä½ çš„è¿™ä¸ªè¿æ¥éœ€è¦é‡æ–°è®¾ç½®å¯†ç ã€‚

æ³¨æ„è¿™é‡Œæœ‰ä¸ªå‘ï¼Œæ²¡æœ‰å…¶å®ƒé€‰é¡¹å¯é€‰ï¼Œå…ˆç‚¹å‡»ä¿å­˜ä»¥å…³é—­è¯¥çª—å£ã€‚

ç„¶ååœ¨ Remmina çš„ä¸»çª—å£åˆ—è¡¨ä¸­æ‰¾åˆ°åˆšå»ºç«‹çš„é…ç½®æ–‡ä»¶ï¼Œå³é”®èœå•é€‰æ‹©ç¼–è¾‘ï¼š

    Basic:

        Group è®¾ç½®åˆ†ç»„ï¼ŒåŒç»„çš„å¤šä¸ªè¿œç¨‹æ¡Œé¢ä¼šå…±ç”¨ä¸€ä¸ª remmina çª—å£ï¼Œåˆ‡æ¢æ—¶ä¼šè‡ªåŠ¨æ–­å¼€ä¸Šä¸€ä¸ªã€‚

        æ¡Œé¢åˆ†è¾¨ç‡é€‰ â€œuse client solutionâ€ï¼Œä¸ç„¶é»˜è®¤æ˜¾ç¤ºè¶…å°çš„ä¸€ä¸ªå±å¹•ã€‚

        Network Connect type é€‰ â€œauto-detectâ€œï¼Œä¸ç„¶é»˜è®¤æ˜¯ä½é€Ÿç½‘ç»œ

        å…±äº«æ–‡ä»¶å¤¹ Share folder: "host_dl,/home/user/Downloads;host_vd,/home/user/Videos;" è¿™æ ·å°±å®ç°äº†åœ¨è¿œç¨‹æœåŠ¡å™¨æ˜ å°„æœ¬åœ°çš„ä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼Œåä¸º host_dl å’Œ host_vdã€‚

            å…±äº«æ–‡ä»¶å¤¹åº”æ˜¾ç¤ºåœ¨è¿œç¨‹è®¡ç®—æœºèµ„æºç®¡ç†å™¨çš„ other devices and drivesï¼ˆæœ¬åœ°ç£ç›˜C:å›¾æ ‡çš„ä¸‹æ–¹ï¼‰ï¼Œå®è´¨æ˜¯æ˜ å°„çš„ Windows ç½‘ç»œé‚»å±…é‡Œçš„ \\tsclient\host_dl\ ç›®å½•ï¼Œæ‰€ä»¥å…ˆåœ¨èµ„æºç®¡ç†åŒºé‡Œç‚¹å‡»ç½‘ç»œï¼Œæç¤ºå¼€å¯ç½‘ç»œå‘ç°æ—¶é€‰æ‹©ç¡®å®šï¼Œè¿™æ ·æ‰èƒ½ç¡®ä¿æ˜ å°„æˆåŠŸã€‚

            ç›®å‰ Windows 10 çš„å®‰å…¨ç­–ç•¥é™åˆ¶ä» smb å…±äº«æ–‡ä»¶å¤¹æ‰§è¡Œæ–‡ä»¶ï¼Œæ‰€ä»¥å¦‚æœè¦ä»å…±äº«æ–‡ä»¶å¤¹é‡Œå®‰è£…ç¨‹åºï¼Œè¦å…ˆæ‹·è´åˆ°è¿œç¨‹è®¡ç®—æœºçš„æœ¬åœ°ç£ç›˜ç„¶åå†æ‰§è¡Œå®‰è£…ç¨‹åº

    Advance:

        Qualityï¼šbestï¼Œä¸ç„¶é»˜è®¤ç”»è´¨æ˜¯ä½é€Ÿç½‘ç»œä¸‹çš„ä¼ è¾“é€Ÿç‡ï¼Œæ¡Œé¢èƒŒæ™¯æ˜¯é»‘è‰²çš„

        Audio output modeï¼šlocal å¯ä»¥æŠŠè¿œç¨‹çš„å£°éŸ³è½¬å‘åˆ°æœ¬åœ°æ’­æ”¾ï¼Œè´¨é‡ä¸å¥½ï¼Œå¿äº†

        å®‰å…¨æ€§ï¼šé€‰æ‹©è‡ªåŠ¨æˆ–rdp

        å…±äº«å‰ªè´´æ¿ turn off clipboard syncï¼šé»˜è®¤ä¸å‹¾é€‰å°±æ˜¯æ”¾å¼€çš„ï¼Œå¯ä»¥å¤åˆ¶ç²˜è´´æ–‡å­—ï¼Œä¸æ”¯æŒç²˜è´´æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ï¼Œåªèƒ½ä½¿ç”¨ä¸Šé¢å…±äº«æ–‡ä»¶å¤¹çš„æ–¹å¼ä¼ è¾“æ–‡ä»¶ã€‚

å•å‡» save ä¼šè‡ªåŠ¨å…³é—­è¯¥çª—å£ã€‚

ç„¶åå°±å¯ä»¥è¿æ¥è¯¥è¿œç¨‹æœåŠ¡å™¨äº†ï¼Œåœ¨ Remmina çª—å£çš„ä¸‹åŠéƒ¨åˆ†åˆ—è¡¨ä¸­ï¼Œé€‰æ‹©ä½ çš„åˆšæ‰å»ºç«‹çš„é…ç½®æ–‡ä»¶ï¼ŒåŒå‡»å³å¯å¼€å¯è¿œç¨‹æ¡Œé¢çª—å£äº†ã€‚

å¦‚æœè¿æ¥å¤±è´¥ï¼Œå¯ä»¥ç‚¹å·¥å…·æ çš„ä¸‰ä¸ªæ¨ªçº¿ï¼Œé€‰æ‹©â€œDebuggingâ€ï¼Œç„¶åé‡æ–°è¿æ¥ï¼ŒæŸ¥çœ‹â€œDebuggingâ€çª—å£çš„è¾“å‡ºå†…å®¹

    å¦‚æœæ˜¾ç¤ºçš„ä¿¡æ¯åå°‘çœ‹ä¸åˆ°å…·ä½“æŠ¥é”™åŸå› ï¼Œåˆ™éœ€è¦ç”¨å‘½ä»¤è¡Œå¯åŠ¨ remminaï¼š

        https://gitlab.com/Remmina/Remmina/-/wikis/Usage/Remmina-debugging
        $ G_MESSAGES_PREFIXED=all G_MESSAGES_DEBUG=all remmina

        # flatpakå®‰è£…çš„
        $ G_MESSAGES_PREFIXED=all G_MESSAGES_DEBUG=all flatpak run org.remmina.Remmina

    æˆ‘é‡åˆ°çš„æ˜¯ç¼ºå°‘ openH264ï¼Œåœ¨å‘½ä»¤è¡Œå¯åŠ¨ remmina æ‰çœ‹åˆ°æŠ¥é”™æç¤ºï¼šFailed to create h264 codec context,libfreerdp returned code is 00000000ã€‚å‘è¡Œç‰ˆä¸€èˆ¬éƒ½æä¾›è¿™ä¸ªè½¯ä»¶çš„å®‰è£…åŒ…æˆ–å•ç‹¬çš„å­˜å‚¨åº“ã€‚

#### é…ç½®è¿œç¨‹æ¡Œé¢æœåŠ¡ç«¯å¿…åš

å¦‚æœæœåŠ¡ç«¯è®¡ç®—æœºå®‰è£… Linux æ—¶å¯ç”¨äº†ç£ç›˜åŠ å¯†é€‰é¡¹ï¼Œåˆ™æ¯æ¬¡å¼€æœºæ—¶å¿…é¡»åœ¨æœ¬åœ°æ‰‹å·¥è¾“å…¥å¯†ç æ‰èƒ½å¯åŠ¨æ“ä½œç³»ç»Ÿï¼Œç„¶åè¿œç¨‹ç”¨æˆ·æ‰å¯ä»¥ä½¿ç”¨è¿œç¨‹æ¡Œé¢ç™»å½•ã€‚

æœåŠ¡ç«¯è¦ç¦æ­¢æ¡Œé¢æ¯å±ã€ç¦æ­¢ä¼‘çœ ã€ç¦æ­¢è‡ªåŠ¨å±å¹•é”å®šï¼Œæ“ä½œç³»ç»Ÿçš„è®¾ç½®é»˜è®¤èŠ‚èƒ½ç­–ç•¥å¯¼è‡´ Linux æ¡Œé¢ç¯å¢ƒä¸å®šä»€ä¹ˆæ—¶å€™å°±é”å±æˆ–ä¼‘çœ ï¼Œå¯¼è‡´æ— æ³•è¿œç¨‹æ¡Œé¢ç™»å½•ã€‚

    Setting -> Powerï¼š

        ç¦ç”¨å±å¹•ç©ºç™½ Screen Blank: Never

        ç¦ç”¨è‡ªåŠ¨æŒ‚èµ· AutoSuspend: off

        ä¸¥é‡æ€€ç–‘èŠ‚èƒ½ç­–ç•¥ä¸æ˜¯é«˜æ€§èƒ½è€Œæ˜¯å‡è¡¡ã€èŠ‚èƒ½å•¥çš„ï¼Œè¿˜ä¼šè‡ªåŠ¨ä¼‘çœ 

            # https://wiki.debian.org/Suspend
            $ sudo systemctl mask sleep.target suspend.target hibernate.target hybrid-sleep.target

            $ systemctl status hibernate.target
            ...
            Loaded: Masked
            ...

    Setting -> Privacy -> Screen Lock:

        å…³é—­è‡ªåŠ¨é”å±å»¶è¿Ÿ Blank Screen Delay: Never
        ç¦ç”¨è‡ªåŠ¨å±å¹•é”å®š Automatic Screen Lock: Off

é…ç½®é˜²ç«å¢™

    $ sudo firewall-cmd --permanent --add-port=3389/tcp
    $ sudo firewall-cmd --reload

æ—¥å¸¸ä½¿ç”¨ä¸­ï¼Œå¿…é¡»ä½¿ç”¨ ssh æœ¬åœ°ç«¯å£è½¬å‘çš„æ–¹å¼æŠŠè¿œç¨‹æ¡Œé¢è¿æ¥ä¿æŠ¤èµ·æ¥ï¼Œæ¯”å¦‚ remmina å°±å†…ç½®äº†è¿™ä¸ªè®¾ç½®é€‰é¡¹ï¼Œå› ä¸ºåŸå§‹çš„è¿œç¨‹æ¡Œé¢åè®®å®‰å…¨æ€§ä¸Šå¤ªå¼±ï¼š

    VNC åè®®æœ¬èº«æ²¡æœ‰åŠ å¯†æˆ–ä¿æŠ¤ï¼Œæ‰€ä»¥ä½ é€šè¿‡å®ƒå‘é€çš„ä»»ä½•ä¸œè¥¿åœ¨ç½‘ç»œä¸Šéƒ½æ˜¯æ— ä¿æŠ¤çš„

    rdp åè®®ä½¿ç”¨å¯†ç è¿æ¥å®‰å…¨æ€§ä¸é«˜ï¼Œç‰¹åˆ«æ˜¯åœ¨äº’è”ç½‘ä¸‹ä½¿ç”¨çš„æœåŠ¡å™¨å¯¹å¤–å¼€å¯è¿œç¨‹æ¡Œé¢ç«¯å£ï¼Œåˆ™å¿…é¡»ä½¿ç”¨ ssh è¿æ¥æˆ– 2FA æŠŠè¯¥è¿œç¨‹æ¡Œé¢çš„ç«¯å£ä¿æŠ¤èµ·æ¥

æ—¢ä¿é™©åˆå®ç”¨çš„æ–¹å¼ï¼Œå°±æ˜¯ç”¨ ssh éš§é“ä¿æŠ¤è¿œç¨‹æ¡Œé¢åŒæ–¹çš„é€šä¿¡ï¼Œå‚è§ç« èŠ‚ [Linux xrdp è¿œç¨‹æ¡Œé¢çš„ ssh ç«¯å£è½¬å‘](home_great_wall think)ã€‚

#### ä½¿ç”¨ Gnome è¿œç¨‹æ¡Œé¢

Gnome è‡ªå¸¦è¿œç¨‹æ¡Œé¢æœåŠ¡ç«¯ï¼Œä¸»è¦æ”¯æŒ Wayland ä¸‹å®ç° RDP åè®®

    https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/10/html/administering_rhel_by_using_the_gnome_desktop_environment/remotely-accessing-the-desktop

    https://www.suse.com/c/headless-remote-sessions-in-gnome-part-1/

    https://linux.cn/article-14261-1.html

    https://www.addictivetips.com/ubuntu-linux-tips/how-to-use-the-new-gnome-shell-remote-desktop-feature/

    https://www.linuxmi.com/ubuntu-22-04-rdp-remote-desktop.html

GNOME â€œè¿œç¨‹æ¡Œé¢â€ æœåŠ¡ç«¯æ‹†åˆ†ä¸º 2 ä¸ªåŠŸèƒ½ï¼Œåº”è¯¥æ˜¯ä»ä½¿ç”¨å®‰å…¨æ€§ä¸Šè€ƒè™‘çš„

    å…±äº«æ¡Œé¢ï¼ˆDesktop sharingï¼‰ï¼šåŸæ¥å«â€œå…±äº«å±å¹•â€ï¼Œä½¿ç”¨ä¸Šé™åˆ¶ä¸ºâ€œæœ‰äººå€¼å®ˆâ€å¿…é¡»æœ¬åœ°ç”¨æˆ·å…ˆç™»å½•æ¡Œé¢ï¼Œæœ¬åœ°ç”¨æˆ·å¯ä»¥éšæ—¶æ¥ç®¡é¼ æ ‡ä¸­æ–­è¿œç¨‹è¿æ¥ï¼Œè¿™ä¸ªä½¿ç”¨æ–¹å¼ç±»ä¼¼ Windows çš„ â€œè¿œç¨‹ååŠ©â€ã€‚

    è¿œç¨‹ç™»å½•ï¼ˆRemote loginï¼‰ï¼šä¸éœ€è¦æœ¬æœºäº‹å…ˆç™»å½•æ¡Œé¢å°±å¯ä»¥ä»è¿œç¨‹è¿æ¥å¹¶ç™»é™†åˆ°æ¡Œé¢ï¼Œå³æ”¯æŒæ— å¤´ä¼šè¯ Headless session æ¨¡å¼ï¼Œè¿™ä¸ªä½¿ç”¨æ–¹å¼ç±»ä¼¼ Windows çš„â€œè¿œç¨‹æ¡Œé¢â€ã€‚

NOTE: ç›®å‰ï¼ˆGnome48ï¼‰ å¯¹è¿œç¨‹ç™»å½•ï¼ˆRemote loginï¼‰çš„æ”¯æŒä¸å¥½ï¼Œåªèƒ½ä½¿ç”¨å…±äº«æ¡Œé¢ï¼ˆDesktop sharingï¼‰ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨è¿œç¨‹ç™»é™†ï¼Œå»ºè®®å®‰è£… [ä½¿ç”¨ xrdp æœåŠ¡ç«¯] æˆ– [ä½¿ç”¨ TigerVNC Server]ã€‚

    ä½¿ç”¨æ— å¤´ä¼šè¯ Headless session æ¨¡å¼ https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/10/html/administering_rhel_by_using_the_gnome_desktop_environment/remotely-accessing-the-desktop#connecting-to-a-remote-desktop-session-on-a-headless-server-for-a-single-user

æŸ¥çœ‹ Gnome çš„è¿œç¨‹æ¡Œé¢æœåŠ¡çŠ¶æ€ï¼š

    $ grdctl status
    Overall:
            Unit status: inactive
    RDP:
            Status: disabled
            Port: 3389
            TLS certificate: /home/uuu/.local/share/gnome-remote-desktop/certificates/rdp-tls.crt
            TLS fingerprint: de:8b:49:ea:6
            TLS key: /home/uuu/.local/share/gnome-remote-desktop/certificates/rdp-tls.key
            View-only: yes
            Negotiate port: yes
            Username: (hidden)
            Password: (hidden)

åŒæ—¶æ”¯æŒ X11 å’Œ Wayland ä¸¤ç§æ–¹å¼

    å¯¹ X11 ä¼šè¯ä¸­ä½¿ç”¨ vino ç»„ä»¶

    å¯¹ Wayland ä¼šè¯ä½¿ç”¨ gnome-remote-desktop ç»„ä»¶

åŒæ—¶æ”¯æŒ VNC å’Œ RDP ä¸¤ç§åè®®

    åŸ Xorg ä½“ç³»ä½¿ç”¨ VNC åè®®ï¼Œåœ¨ä½¿ç”¨ Waylande ä¹‹åæ”¹ä¸º RDP åè®®äº†ï¼Œä½†ä»ç„¶é€šè¿‡ xvnc æä¾›å¯¹ VNC åè®®çš„æ”¯æŒã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®¢æˆ·ç«¯ä½¿ç”¨ rdp æˆ– vnc åè®®éƒ½å¯ä»¥è¿æ¥åˆ° Gnome æ¡Œé¢ï¼Œåªæ˜¯ä¼šè¯ç±»å‹ä¸åŒ

        https://discussion.fedoraproject.org/t/how-to-share-fedora-36-gnome-desktop-with-another-machine-running-linux/76182

        https://discussion.fedoraproject.org/t/after-upgrading-to-fedora-38-cannot-connect-to-computer-using-remote-desktop/82353?replies_to_post_number=12

å¦‚æœéœ€è¦ç™»å½•äº‘æœåŠ¡å™¨ï¼Œæˆ–æ”¯æŒå¤šä¸ªè¿œç¨‹æ¡Œé¢ç”¨æˆ·åŒæ—¶ç™»å½•ï¼Œåˆ™æœåŠ¡ç«¯åªèƒ½å®‰è£…ç¬¬ä¸‰æ–¹ vnc æˆ– xrdp è½¯ä»¶

    æ¨èå®‰è£…ä½¿ç”¨ RDP åè®®çš„ç¬¬ä¸‰æ–¹è½¯ä»¶ï¼Œè§ç« èŠ‚ [ä½¿ç”¨ xrdp æœåŠ¡ç«¯]ã€‚

    å¦‚æœä½¿ç”¨ vnc åè®®ï¼Œè§ç« èŠ‚ [ä½¿ç”¨ TigerVNC Server]ã€‚

    ä½¿ç”¨ç¬¬ä¸‰æ–¹ vnc æˆ– rdp æœåŠ¡ç«¯å‰è®°å¾—å…³é—­æ“ä½œç³»ç»Ÿå†…ç½®çš„è¿œç¨‹æ¡Œé¢æœåŠ¡ï¼Œä»¥é˜²æ­¢ç«¯å£å†²çªã€‚

å¯¹å®¢æˆ·ç«¯è½¯ä»¶å…¼å®¹æ€§è¾ƒå¥½ï¼Œåªè¦æ”¯æŒ rdp æˆ– vnc åè®®éƒ½å¯è¿æ¥åˆ°æœåŠ¡ç«¯ã€‚

å…³äºæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯è½¯ä»¶çš„é€‰æ‹©ï¼Œå‚è§ç« èŠ‚ [è¿œç¨‹æ¡Œé¢è½¯ä»¶ä½“ç³»]ã€‚

##### å…±äº«æ¡Œé¢ï¼ˆDesktop sharingï¼‰çš„æœåŠ¡ç«¯è®¾ç½®

å…±äº«æ¡Œé¢çš„ä½¿ç”¨ä¸Šé™åˆ¶è¾ƒå¤šï¼Œä¸å¾—ä¸æ•´ç†å‡ºæ¥ä¾›æŸ¥é˜…ã€‚

å…±äº«æ¡Œé¢çš„ä½¿ç”¨è¿‡ç¨‹æ˜¯ä¸¥æ ¼å—æ§çš„ï¼ŒåŠŸèƒ½è®¾è®¡ä¸Šå°±æ˜¯æœ‰äººå€¼å®ˆï¼Œåªèƒ½ä¸€å¯¹ä¸€ï¼š

    æœåŠ¡ç«¯æœ‰äººæ“ä½œæœ¬åœ°ç™»å½•åˆ°æ¡Œé¢ï¼Œç„¶åè¿œç¨‹æ‰å¯ä»¥è¿æ¥åˆ°è¯¥ç”¨æˆ·çš„æ¡Œé¢ã€‚

    æœåŠ¡ç«¯ä¸»æœºå±å¹•ä¸Šä¼šåŒæ­¥æ˜¾ç¤ºè¿œç¨‹ç™»å½•è¿‡æ¥çš„å®¢æˆ·ç«¯åœ¨è‡ªå·±è®¡ç®—æœºä¸Šçš„æ“ä½œï¼Œå¹¶å¯ä»¥éšæ—¶å¹²é¢„æˆ–ä¸­æ–­è¿œç¨‹ä¼šè¯ï¼š

        æœ¬åœ°ç™»å½•çš„ä¼šè¯å°†å§‹ç»ˆä¿æŒå…¶æ§åˆ¶æ¨¡å¼ï¼Œæœ¬åœ°å€¼å®ˆçš„äººèƒ½å¤Ÿæ¥ç®¡é¼ æ ‡å’Œé”®ç›˜çš„æ§åˆ¶ï¼Œæˆ–ä¸­æ–­è¿œç¨‹è¿æ¥ã€‚

        å¦‚æœä¼šè¯è¢«é”å®šï¼Œä»å®¢æˆ·ç«¯è§£é”ä¹Ÿä¼šåœ¨æœåŠ¡ç«¯ä¸Šè§£é”ã€‚å®ƒä¹Ÿä¼šæŠŠæ˜¾ç¤ºå™¨ä»å¾…æœºæ¨¡å¼ä¸­å”¤é†’ï¼Œä»»ä½•èƒ½çœ‹åˆ°æœåŠ¡å™¨å±å¹•çš„äººéƒ½èƒ½çœ‹åˆ°è¿œç¨‹æ¡Œé¢å®¢æˆ·ç«¯æ­¤åˆ»æ­£åœ¨åšä»€ä¹ˆã€‚

        å®¢æˆ·ç«¯è¿œç¨‹è¿æ¥è¿›å…¥è¿œç¨‹æ¡Œé¢åï¼Œä½ çš„æœ¬åœ°æ¡Œé¢é¡¶æ å¤„æœ‰ä¸€ä¸ªé»„è‰²çš„å›¾æ ‡ï¼Œè¿™è¡¨æ˜ä½ æ­£åœ¨ Gnome ä¸­å…±äº«ç”µè„‘å±å¹•ã€‚å¦‚æœä½ ä¸å†å¸Œæœ›å…±äº«å±å¹•ï¼Œä½ å¯ä»¥è¿›å…¥èœå•ï¼Œç‚¹å‡»æŒ‰é’®â€œå±å¹•æ­£åœ¨è¢«å…±äº«Screen is being sharedâ€ï¼Œç„¶åå†é€‰æ‹© Turn offï¼Œç«‹å³åœæ­¢å…±äº«å±å¹•ã€‚

å¦‚æœç”¨å…±äº«æ¡Œé¢å®ç°æ— äººå€¼å®ˆï¼ˆHEADLESSï¼‰æ¨¡å¼æ˜¯æ¯”è¾ƒç¹ççš„ï¼š

    æœåŠ¡ç«¯æœ‰äººæ“ä½œæœ¬åœ°ç™»å½•åˆ°æ¡Œé¢

    æœåŠ¡ç«¯å¿…é¡»åœ¨æ–­å¼€æœ¬åœ°è¿æ¥ä¹‹å‰ï¼Œåœ¨ç³»ç»Ÿè®¾ç½®é‡Œå¼€å¯ç”¨æˆ·è‡ªåŠ¨ç™»å½•ï¼Œè¿™æ ·å®ç°åªè¦å¼€æœºå¯åŠ¨å°±ä¼šè‡ªåŠ¨ä½¿ç”¨è¯¥ç”¨æˆ·ç™»å½•åˆ°æ¡Œé¢ã€‚

    é˜²æ­¢æœ¬åœ°ä¸»æœºçš„èŠ‚èƒ½ç­–ç•¥è‡ªåŠ¨é”å±æˆ–è‡ªåŠ¨ä¼‘çœ ï¼Œè¯¦è§ç« èŠ‚ [ä½¿ç”¨è¿œç¨‹æ¡Œé¢å¿…é¡»åšçš„è®¾ç½®]ã€‚

ä»è¿™ä¸€ç‚¹æ¥è¯´ï¼Œè¿œç¨‹æ¡Œé¢çš„è¿œç¨‹ç™»å½•ï¼ˆRemote loginï¼‰åŠŸèƒ½ï¼Œæ›´é€‚åˆæ— äººå€¼å®ˆï¼ˆHEADLESSï¼‰æ¨¡å¼ã€‚

ä»¥ä¸‹æ˜¯å…±äº«æ¡Œé¢çš„è®¾ç½®ä½¿ç”¨æ–¹æ³•ï¼š

1ã€å…ˆæ£€æŸ¥æ˜¯å¦æ»¡è¶³ç« èŠ‚ [é…ç½®è¿œç¨‹æ¡Œé¢æœåŠ¡ç«¯å¿…åš]ã€‚

2ã€æœåŠ¡ç«¯ï¼Œé»˜è®¤æƒ…å†µä¸‹ç³»ç»Ÿè®¾ç½®ä¸­ Gnome è¿œç¨‹æ¡Œé¢åŠŸèƒ½ä¸‹çš„å­åŠŸèƒ½éƒ½æ˜¯å…³é—­çš„ï¼Œéœ€è¦æ‰‹åŠ¨å¼€å¯ï¼š

    åœ¨ç³»ç»Ÿè®¾ç½®æ‰¾åˆ°â€œè¿œç¨‹æ¡Œé¢â€ï¼Œé€‰æ‹©æ‰“å¼€ â€œå…±äº«å±å¹•â€œï¼Œç°åœ¨æ”¹åä¸º â€œå…±äº«æ¡Œé¢â€ã€‚

    éœ€è¦ç®¡ç†å‘˜æƒé™å¼€å¯è®¾ç½®ï¼Œå…ˆç‚¹å‡»çª—å£æ ‡é¢˜æ ä½ç½®çš„å¼€å…³ï¼Œå¼€å¯åæ‰èƒ½è®¾ç½®å„ä¸ªé€‰é¡¹ã€‚

    å¦‚æœä½ å¸Œæœ›èƒ½å¤Ÿä»å®¢æˆ·ç«¯æ§åˆ¶å±å¹•ï¼Œè¯·å‹¾é€‰ â€œå…è®¸è¿æ¥æ§åˆ¶å±å¹• Allow connections to control the screenâ€ã€‚å¦‚æœä¸å‹¾é€‰è¿™ä¸ªæŒ‰é’®ï¼Œè®¿é—®å…±äº«å±å¹•å°†åªå…è®¸ â€œä»…æµè§ˆ view-onlyâ€ã€‚

    è®¾ç½®è¿œç¨‹è¿æ¥ç™»å½•åˆ°å…±äº«æ¡Œé¢çš„ç”¨æˆ·åå¯†ç ï¼šä½¿ç”¨å½“å‰ç”¨æˆ·åï¼Œä½†æ˜¯ç™»å½•å¯†ç æ˜¯ç‹¬ç«‹çš„ï¼Œç³»ç»Ÿé»˜è®¤è®¾ç½®éšæœºå¯†ç ï¼Œæ¯æ¬¡é‡å¯è®¡ç®—æœºåéƒ½ä¼šå˜æ›´ã€‚æ‰€ä»¥åªè¦æœ¬åœ°è®¡ç®—æœºé‡å¯äº†ï¼Œéƒ½è¦è¿›å…¥ç³»ç»Ÿè®¾ç½®çš„å…±äº«æ¡Œé¢çš„è®¾ç½®é‡Œï¼Œå¤åˆ¶æ–°å¯†ç ç»™å®¢æˆ·ç«¯ä½¿ç”¨ã€‚

3ã€å®¢æˆ·ç«¯å¯ä»¥è¿æ¥æœåŠ¡ç«¯çš„å…ˆå†³æ¡ä»¶ï¼š

    æœåŠ¡ç«¯æ­£åœ¨è¿è¡Œã€‚

    æœåŠ¡ç«¯ Gnome ä¼šè¯æ­£åœ¨è¿è¡Œ

    æœåŠ¡ç«¯å·²ç»ä»æœ¬åœ°ç™»å½•äº†å¯ç”¨å±å¹•å…±äº«çš„ç”¨æˆ·

    è¯¥ç”¨æˆ·çš„æœ¬åœ°ä¼šè¯æ²¡æœ‰è¢«é”å®šï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæœ¬åœ°è®¡ç®—æœºé”å±æ—¶æ— æ³•ä»è¿œç¨‹ç™»å½•è§£é”ã€‚å¾…éªŒè¯ï¼šåç»­ç‰ˆæœ¬å¥½åƒå¯ä»¥ä»é”å±ç•Œé¢è¿œç¨‹ç™»å½•ï¼Œæœ¬åœ°å±å¹•ä¼šå”¤é†’ä»¥æ˜¾ç¤ºè¿œç¨‹çš„æ“ä½œã€‚

    åªæ”¯æŒå½“å‰ç™»å½•æ¡Œé¢çš„ç”¨æˆ·æŠŠè‡ªå·±çš„å±å¹•å®æ—¶å…±äº«ç»™ 1 ä¸ªç”¨æˆ·ã€‚

##### å¤šç”¨æˆ·åŒæ—¶ä½¿ç”¨è¿œç¨‹æ¡Œé¢è¿æ¥ä½ çš„LinuxæœåŠ¡å™¨

æœªéªŒè¯ï¼Œå»ºè®®å®‰è£… [ä½¿ç”¨ xrdp æœåŠ¡ç«¯]ã€‚

    https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/10/html/administering_rhel_by_using_the_gnome_desktop_environment/remotely-accessing-the-desktop#connecting-to-a-remote-desktop-session-on-a-headless-server-for-multiple-users

headless multi-user access

    https://discourse.gnome.org/t/headless-remote-desktop-setup-process/20411/2?u=vgaetera
        https://discussion.fedoraproject.org/t/how-do-i-setup-a-remote-access-solution-in-wayland/121232/3

```bash
# Server
RDP_USER="${USER}"
RDP_PASS="12345678"

sudo dnf -y install gnome-remote-desktop freerdp

sudo -u gnome-remote-desktop winpr-makecert \
    -silent -rdp -path ~gnome-remote-desktop rdp-tls

sudo grdctl --system rdp enable
sudo grdctl --system rdp set-credentials "${RDP_USER}" "${RDP_PASS}"
sudo grdctl --system rdp set-tls-key ~gnome-remote-desktop/rdp-tls.key
sudo grdctl --system rdp set-tls-cert ~gnome-remote-desktop/rdp-tls.crt

sudo systemctl --now enable gnome-remote-desktop.service

sudo firewall-cmd --permanent --add-service=rdp
sudo firewall-cmd --reload

# Client
sudo dnf -y install gnome-connections
gnome-connections rdp://host
```

#### ä½¿ç”¨ xrdp æœåŠ¡ç«¯

Gnome ç­‰æ¡Œé¢ç¯å¢ƒè¿œç¨‹æ¡Œé¢åŠŸèƒ½å·²ç»ä»ä½¿ç”¨ VNC åè®®è½¬å‘äº† RDP åè®®ï¼Œä½† Gnome ç­‰æ¡Œé¢ç¯å¢ƒå†…ç½®çš„å…±äº«æ¡Œé¢åŠŸèƒ½å¤ªå¼±äº†ï¼Œé€šå¸¸åœ¨æœåŠ¡å™¨å®‰è£…ç¬¬ä¸‰æ–¹çš„ xrdp è½¯ä»¶åŒ…æ”¯æŒå¤šç§æ¡Œé¢ç¯å¢ƒï¼Œè¿œç¨‹æ¡Œé¢è¿æ¥æœ¬æœºæ— éœ€æœ¬åœ°ç”¨æˆ·ç™»å½•ï¼Œå®¢æˆ·ç«¯ä½¿ç”¨æ”¯æŒ rdp åè®®çš„ mstscã€remmina ç­‰è½¯ä»¶å³å¯ã€‚

    https://wiki.archlinux.org/title/Xrdp

    å¾ˆå¤šä½¿ç”¨ç»éªŒå’ŒæŠ€å·§éƒ½åœ¨ wiki https://github.com/neutrinolabs/xrdp/wiki

    https://aws.amazon.com/cn/blogs/china/vnc-or-rdp-how-to-choose-a-remote-desktop-on-the-cloud/

    https://learn.microsoft.com/en-us/azure/virtual-machines/linux/use-remote-desktop?tabs=azure-cli

    é…ç½® xrdp æ”¯æŒ 2FA ç™»å½•
        https://github.com/neutrinolabs/xrdp/wiki/Using-Authy-or-Google-Authenticator-for-2FA-with-XRDP

    https://www.cnblogs.com/Ansing/p/16788086.html

è¿œç¨‹æ¡Œé¢ RDP åè®®ä½“ç³»ç”±å®¢æˆ·ç«¯ï¼ˆviewerï¼‰ä¸æœåŠ¡ç«¯ä¸¤éƒ¨åˆ†æ„æˆã€‚xrdp æ˜¯åœ¨ Linux ä¸Šå®ç° RDP åè®®çš„å¼€æºçš„æœåŠ¡ç«¯ç¨‹åºã€‚ä»–å¯ä»¥å®ç° Windows Server çš„è¿œç¨‹æ¡Œé¢å¤šç»ˆç«¯æœåŠ¡ï¼Œä¸€ä¸ªæ— å¤´æœåŠ¡å™¨æ”¯æŒå‡ åä¸ªè¿œç¨‹ç™»å½•çš„ç”¨æˆ·åŒæ—¶ä½¿ç”¨æ¡Œé¢ï¼Œé€‚åˆæ•™å­¦ã€åŠå…¬åœºæ™¯ã€‚

NOTE: åœ¨è¿œç¨‹æ¡Œé¢ç¯å¢ƒä¸‹ï¼Œå»ºè®®åªä½¿ç”¨è½¯ä»¶ï¼Œä¸è¦å®‰è£…è½¯ä»¶æˆ–è¿›è¡Œç³»ç»Ÿç®¡ç†ç­‰æ“ä½œ

    ä¸åŒçš„å‘è¡Œç‰ˆå’Œæ¡Œé¢ç¯å¢ƒåŒºåˆ†è¿œç¨‹æ¡Œé¢ç”¨æˆ·å’Œæœ¬åœ°æ¡Œé¢ç”¨æˆ·ï¼Œåœ¨æ‰§è¡Œæƒé™å’Œpolkitç­‰æ–¹é¢æ˜¯æœ‰åŒºåˆ«çš„ï¼Œä½†ç›®å‰å¹¶æœªå®Œå…¨æµ‹è¯•ã€‚æ‰€ä»¥å¦‚æœä½¿ç”¨è¿œç¨‹æ¡Œé¢ç”¨æˆ·å®‰è£…è½¯ä»¶ï¼Œåœ¨æœ¬åœ°ç™»å½•æ—¶æš‚æ— æ³•æ˜ç¡®æœ‰ä½•è´Ÿé¢çš„å½±å“ã€‚

    æ ‘è“æ´¾å†…ç½® realvnc serverï¼Œå¯¹ xrdp çš„æ”¯æŒä¸å¥½ï¼Œåšä¸åˆ°å¼€ç®±å³ç”¨

xrdp åˆ©ç”¨æœåŠ¡å™¨æ¡Œé¢ç¯å¢ƒçš„ç»„ä»¶å®ç°è‡ªå·±çš„åç«¯ï¼Œå…¶åç«¯åŸºäº xvncï¼ˆVNCï¼‰ æˆ– xorgxrdpï¼ˆXORGï¼‰ï¼Œå¯¹ Wayland é€šè¿‡ xwayland å…¼å®¹æ¨¡å—å“åº”å…¶è°ƒç”¨

    xvnc ç®€å•åœ°å°† vnc ä½å›¾æµåŒ…è£…åœ¨ RDP ä¸­ã€‚æ‰€ä»¥å¦‚æœä½ å®‰è£…äº† GNOMEï¼Œé‚£ xnvc å°±å°† GNOME æ¡Œé¢è¿œç¨‹æä¾›ç»™ä½ ï¼Œå¦‚æœä½ å®‰è£…äº† xfceï¼Œxvnc å°±å°† xfce æ¡Œé¢æä¾›ç»™ä½ ã€‚

    å¯¹ Wayland ä½“ç³»ï¼Œå®ƒä½¿ç”¨ xwayland æ¨¡å—æ¥å…¼å®¹ä½¿ç”¨ X window ä½“ç³»çš„ç¨‹åºã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½¿ç”¨ xrdp è¿œç¨‹æ¡Œé¢ï¼Œç³»ç»Ÿä¼šåˆ‡æ¢åˆ° x11 çš„æ¡Œé¢ç¯å¢ƒï¼Œä¸æ˜¯ Wayland æ¡Œé¢ã€‚

xrdp æœåŠ¡ç«¯å…¼å®¹å„ç§ RDP å®¢æˆ·ç«¯ï¼Œå¦‚ mstscã€gnome connectionsã€remminaã€rdesktop ç­‰ã€‚

xrdp çš„ç»„ä»¶

    xrdpï¼šè¿œç¨‹æ¡Œé¢åè®® ï¼ˆRDPï¼‰ æœåŠ¡å™¨ã€‚

    xrdp-sesmanï¼šä¼šè¯ç®¡ç†å™¨é€šè¿‡å¯¹ç”¨æˆ·è¿›è¡Œèº«ä»½éªŒè¯å¹¶å¯åŠ¨ç›¸åº”çš„ X æœåŠ¡å™¨æ¥ç®¡ç†ç”¨æˆ·ä¼šè¯ã€‚

    xrdp-disï¼šè¿è¡Œ xrdp-dis æ—¶ä¸å¸¦ä»»ä½•å‚æ•°æ¥æ–­å¼€ xrdp ä¼šè¯çš„è¿æ¥ã€‚

    xrdp-sesadminï¼šæ˜¯ä¸€ä¸ªæ§åˆ¶å°ç¨‹åºæ¥ç®¡ç†æ­£åœ¨è¿è¡Œçš„ XRDP ä¼šè¯ã€‚

å®‰è£… xrdp

    $ sudo dnf install xrdp xrdp-selinux
    $ sudo apt install xrdp

    # å¦‚æœæœ‰é˜²ç«å¢™ï¼Œè®°å¾—å¼€æ”¾ç«¯å£
    $ sudo ufw allow from any to any port 3389 proto tcp

å¯åŠ¨æœåŠ¡ä¹‹å‰ï¼Œè®°å¾—å…ˆå…³é—­æ“ä½œç³»ç»Ÿå†…ç½®çš„è¿œç¨‹æ¡Œé¢æœåŠ¡ï¼Œä¸ç„¶ç«¯å£å†²çª

    # sudo systemctl start xrdp
    $ sudo systemctl enable xrdp --now

    $ systemctl status xrdp
    $ systemctl status xrdp-sesman

    # éªŒè¯ç«¯å£å·²ç»æ”¾å¼€ï¼Œå¦åˆ™æŸ¥çœ‹ä½ çš„æ“ä½œç³»ç»Ÿçš„é˜²ç«å¢™è®¾ç½®
    $ ss -antlp | grep 3389

åœ¨é…ç½®æ–‡ä»¶ /etc/xrdp/xrdp.iniï¼Œå¯ä»¥é…ç½®è‡ªå·±çš„ ssl è¯ä¹¦ã€‚

##### å®‰è£… xrdp åå¿…åšè®¾ç½®

å…ˆæ£€æŸ¥æ˜¯å¦æ»¡è¶³ç« èŠ‚ [é…ç½®è¿œç¨‹æ¡Œé¢æœåŠ¡ç«¯å¿…åš]ã€‚

å…³é—­ Linunx å‘è¡Œç‰ˆå†…ç½®çš„å…±äº«æ¡Œé¢åŠŸèƒ½ï¼šäºŒè€…éƒ½ä½¿ç”¨ RDP åè®®é»˜è®¤ç«¯å£ 3389ï¼Œä¼šå¯¼è‡´å†²çªæ— æ³•è¿æ¥ï¼Œæ‰¾åˆ°æ¡Œé¢è®¾ç½®é‡Œçš„å…±äº«æ¡Œé¢åŠŸèƒ½ï¼Œé€‰æ‹©å…³é—­ã€‚

æ³¨é”€æ‚¨æœ¬åœ°çš„ Linux æ¡Œé¢ç™»å½•ï¼ˆlogged in on the system graphical consoleï¼‰ï¼Œå¦åˆ™åœ¨åŒåç”¨æˆ·è¿œç¨‹è¿æ¥ xrdp æ—¶ï¼Œæ‚¨å°†é‡åˆ°é»‘å±é—ªé€€

    ä¸å‘è¡Œç‰ˆå†…ç½®çš„ Gnome å…±äº«æ¡Œé¢ï¼ˆå®è´¨æ˜¯å…±äº«å±å¹•ï¼‰ä¸åŒï¼Œxrdp æ”¯æŒå¤šç”¨æˆ·è¿æ¥ï¼Œæ‰€ä»¥æœ¬åœ°çš„å±å¹•å‰çœ‹ä¸åˆ°è¿œç¨‹è¿æ¥è¿‡æ¥çš„ç”¨æˆ·çš„æ“ä½œï¼Œæœ¬åœ°å±å¹•å¯ä»¥æ˜¯ç”¨æˆ·ç™»å½•ç­‰å¾…è§£é”çš„çŠ¶æ€ã€‚åŸå› æ˜¯åŸºäº systemd çš„æ“ä½œç³»ç»Ÿï¼Œå¤šä¸ªè¿œç¨‹æ¡Œé¢ä¼šè¯ä½¿ç”¨åŒä¸€ä¸ªç”¨æˆ·ç™»å½•ï¼Œä¼šå…±äº«åŒä¸€ä¸ªæ¡Œé¢ç¯å¢ƒï¼Œè¿™æ˜¯ D-Bus å…±äº«æ•°æ®çš„è®¾è®¡ <https://github.com/neutrinolabs/xrdp/wiki/Tips-and-FAQ#why-cant-i-log-the-same-user-on-on-the-graphical-console-and-over-xrdp-at-the-same-time>

    å¦‚æœæœ¬åœ°è®¡ç®—æœºæ˜¯æ— äººå€¼å®ˆï¼ˆHEADLESSï¼‰æ¨¡å¼æˆ–è™šæ‹Ÿæœºï¼Œè®°å¾—åœ¨æ–­å¼€æœ¬åœ°è¿æ¥ä¹‹å‰ï¼ˆæœ¬åœ°æ‹”ä¸‹æ˜¾ç¤ºå™¨ä¹‹å‰ï¼‰ï¼Œåœ¨ç”¨æˆ·è®¾ç½®é‡Œâ€œå–æ¶ˆâ€è‡ªåŠ¨ç™»å½•ï¼Œä¸ç„¶å¼€æœºå°±æœ¬åœ°ç™»å½•äº†ï¼Œæ— æ³•ä»è¿œç¨‹ç™»å½• xrdp æœåŠ¡ç«¯äº†

    å¦‚æœç”¨è¿œç¨‹æ¡Œé¢è¿æ¥çš„æ˜¯ xrdp æœåŠ¡ï¼Œæ–­å¼€å‰æœ€å¥½ä¹Ÿé€‰æ‹©æ³¨é”€ï¼Œå¦åˆ™æœ¬åœ°ç™»å½•æ¡Œé¢ä¹Ÿä¼šé‡åˆ°é»‘å±ï¼Œåªèƒ½ç”¨æ§åˆ¶å°æ–¹å¼åœ¨å‘½ä»¤è¡Œä¸‹å…ˆåœæ­¢ xrdp æœåŠ¡æ‰è¡Œã€‚

    ä»¥ä¸‹ä¸¤ä¸ªæœªéªŒè¯

        # å¿…é¡»æœ‰å¯†ç 
        $ sudo passwd ubuntu

        # å› ä¸ºé»˜è®¤æƒ…å†µä¸‹ï¼ŒxRDP ä½¿ç”¨çš„æ˜¯è‡ªç­¾å‘çš„è¯ä¹¦ï¼Œè¿™ä¸ªè¯ä¹¦ä¿å­˜åœ¨ /etc/ssl/private/ssl-cert-snakeoil/ ç›®å½•ä¸‹ã€‚è¯ä¹¦çš„å¯†é’¥æ–‡ä»¶åªèƒ½ç”± â€œssl-certâ€ ç”¨æˆ·ç»„çš„æˆå‘˜è¯»å–ã€‚
        $ sudo adduser ubuntu ssl-cert

NOTE: å¦‚æœæ˜¯äº’è”ç½‘ä½¿ç”¨çš„æœåŠ¡å™¨å¯¹å¤–å¼€å¯è¿œç¨‹æ¡Œé¢ï¼ŒåŠ¡å¿…ä½¿ç”¨ ssh è¿æ¥æˆ– 2FA ä¿æŠ¤ä½ çš„è¿œç¨‹æ¡Œé¢è¿æ¥

    [ç¤ºä¾‹ï¼šLinux xrdp è¿œç¨‹æ¡Œé¢çš„ ssh ç«¯å£è½¬å‘](home_great_wall think)

    [xrdp ç™»å½•ä½¿ç”¨ 2FA](init_a_server think)

ç„¶åè¿œç¨‹è®¡ç®—æœºçš„æ¡Œé¢ç”¨æˆ·å°±å¯ä»¥ç”¨æ”¯æŒ RDP åè®®çš„è¿œç¨‹æ¡Œé¢è½¯ä»¶è¿æ¥è¿™å°è®¡ç®—æœºç™»å½•æ¡Œé¢äº†ï¼š

    ä¸»æœºçš„ xrdp å®‰è£…çš„æ—¶å€™é»˜è®¤é…ç½®äº†è¯ä¹¦ï¼Œå®¢æˆ·ç«¯ mstsc è¿æ¥æ—¶ä¼šæç¤ºè¯ä¹¦ä¿¡æ¯ï¼Œé€‰æ‹©æ¥å—å³å¯ã€‚

    å®¢æˆ·ç«¯è¿è¡Œ `mstsc.exe`ï¼Œåœ¨ â€œComputerâ€ åŒºåŸŸè¾“å…¥è¿œç¨‹æœåŠ¡å™¨ IP åœ°å€ï¼Œç„¶åç‚¹å‡» â€œConnectâ€ã€‚

    å®¢æˆ·ç«¯åœ¨è¿æ¥åˆ°ä¸»æœºåï¼Œä¼šå‡ºç°ç™»å½•å±å¹•ï¼ŒSession é€‰ vnc æˆ– xorgï¼Œè¾“å…¥è¯¥ä¸»æœºçš„ç™»å½•ç”¨æˆ·åå’Œå¯†ç ï¼Œç‚¹å‡» â€œOKâ€ã€‚è·Ÿ Gnome å†…ç½®çš„è¿œç¨‹æ¡Œé¢ä¸åŒï¼Œxrdp ä½¿ç”¨ç›®æ ‡è®¡ç®—æœºçš„ç”¨æˆ·åå’Œå¯†ç ç™»å½•ï¼Œä¸éœ€è¦å•ç‹¬è®¾ç½®ã€‚

    ä¸€æ—¦ç™»å½•ï¼Œä½ å°†çœ‹åˆ°é»˜è®¤çš„æ¡Œé¢ç¯å¢ƒï¼Œæ ¹æ®ä½ æ“ä½œç³»ç»Ÿçš„ sddm è®¾ç½®æ˜¯ Gnome æˆ– Xfceã€i3 ç­‰ã€‚

è¿œç¨‹æ¡Œé¢å®¢æˆ·ç«¯å·¥å…·å‚è§ç« èŠ‚ [è¿œç¨‹æ¡Œé¢è½¯ä»¶ä½“ç³»]ã€‚

##### åç«¯ä¾èµ– xvnc/xorgxrdp

    https://github.com/neutrinolabs/xrdp/discussions/2619

    https://github.com/neutrinolabs/xrdp/wiki/Tips-and-FAQ#how-to-choose-backend-xorgxrdp-vs-xvnc

xrdp é»˜è®¤ä½¿ç”¨ xvnc å®ç°è¿œç¨‹æ¡Œé¢çš„æœåŠ¡ç«¯åç«¯ï¼ˆå¸¸ç”¨äº Fedora ç³»ï¼‰ï¼Œä¸€èˆ¬æ“ä½œç³»ç»Ÿéƒ½ä¼šè‡ªå¸¦å¦‚ xvncï¼Œæˆ–è€…æ‰‹åŠ¨å®‰è£… tigervnc-standalone-server æä¾›ä¼˜åŒ–çš„ VNC æœåŠ¡ç«¯ã€‚

xorgxrdpï¼š

é€šè¿‡å®‰è£… xorgxrdp å¯ä»¥ç»™ xrdp æ·»åŠ  Xorg æ–¹å¼ï¼Œç”¨äºä½¿ç”¨ X Window çš„æ¡Œé¢ç¯å¢ƒã€‚xorgxrdp æ¨¡å—ç”¨äºæ­é… xrdp + X.Org Serverï¼Œæ— æ³•å•ç‹¬è¿ä½œã€‚

ä½œä¸ºä¸€ä¸ªxrdpæ”¹è¿›æŠ€æœ¯ï¼Œä¸ºäº†å……åˆ†åˆ©ç”¨ X window çš„æœºåˆ¶ï¼Œåªä¼ é€’ç»˜åˆ¶å‘½ä»¤ï¼ŒX11rdp é€šè¿‡å°† X11 ç»˜åˆ¶å‘½ä»¤ä½œä¸º RDP ç»˜åˆ¶å‘½ä»¤è½¬å‘è€Œä¸æ˜¯ç®€å•åœ°å°† vnc ä½å›¾æµåŒ…è£…åœ¨ RDP ä¸­ï¼Œä»¥æé«˜æ•ˆç‡ã€‚ç›®å‰çœ‹å…¼å®¹æ€§åè€Œä¸å¥½ï¼Œä¸€èˆ¬ç”¨ xrdp å°±å¤Ÿäº†ã€‚

    https://github.com/neutrinolabs/xorgxrdp

    è®¾ç½® Fedora ä½¿ç”¨ xorg è€Œä¸æ˜¯ Wayland ä½œä¸ºé»˜è®¤çš„ GNOME æ¡Œé¢ç¯å¢ƒ

        https://docs.fedoraproject.org/en-US/quick-docs/configuring-x-window-system-using-the-xorg-conf-file/

        https://docs.fedoraproject.org/en-US/quick-docs/configuring-xorg-as-default-gnome-session/

    Debian11+xorg+i3+xrdp æ¡Œé¢ç¯å¢ƒæ­å»º

        https://blog.csdn.net/lggirls/article/details/129748427

åœ¨ xrdp ç™»å½•ç•Œé¢ Session é€‰æ‹© xorgï¼Œåˆ™ xrdp-sesman ä¼šä½¿ç”¨é…ç½®æ–‡ä»¶ /etc/xrdp/xrdp.ini ä¸­çš„ xorg æ®µæ¿€æ´»ä½¿ç”¨ xorgxrdp æ¨¡å—ï¼ˆFedora 38ä¸‹é»˜è®¤æ˜¯å…³é—­çš„ï¼‰ã€‚å¯¹ä½¿ç”¨åŸºäº Wayland çš„ Gnome æ¡Œé¢ï¼Œä¸è¦å¼€å¯ xorgï¼ŒåŠŸèƒ½ä¸æ­£å¸¸ã€‚

ç¡®ä¿ä½ çš„ç³»ç»Ÿå®‰è£…äº† X.Org serverï¼Œä¸€èˆ¬æ˜¯è½¯ä»¶åŒ… xserver-xorg-core æˆ– xorg-x11-server-Xorg

    ls /usr/bin |grep Xorg

æµ‹è¯•è¿è¡Œ

    Xorg :10 -config xrdp/xorg.conf

##### æ’­æ”¾è¿œç¨‹æ¡Œé¢çš„éŸ³é¢‘

1ã€Fedora å†…ç½®çš„ PipeWire æ˜¯ä¸€ä¸ªæ–°çš„åº•å±‚å¤šåª’ä½“æ¡†æ¶ï¼Œæ”¯æŒæ‰€æœ‰æ¥å…¥PulseAudioï¼ŒJACKï¼ŒALSAå’ŒGStreamerçš„ç¨‹åºï¼Œä¹Ÿæ”¯æŒå†…ç½®çš„è¿œç¨‹å…±äº«åŠŸèƒ½ã€‚

    https://wiki.archlinux.org/title/PipeWire

    https://fedoramagazine.org/pipewire-the-new-audio-and-video-daemon-in-fedora-linux-34/

2ã€ ç›®å‰ xrdp ä»ä½¿ç”¨ PulseAudio å®ç°éŸ³é¢‘è¾“å‡ºé‡å®šå‘ï¼Œéµå®ˆæœåŠ¡å™¨åˆ°å®¢æˆ·ç«¯éŸ³é¢‘é‡å®šå‘æ˜¯æ ¹æ®è¿œç¨‹æ¡Œé¢å®ç°çš„ç›¸å…³åè®®

    https://github.com/neutrinolabs/pulseaudio-module-xrdp

åœ¨è¿œç¨‹æœåŠ¡å™¨å®‰è£… Pulse Audioï¼Œè¯¥è½¯ä»¶å¯å®ç°åœ¨è®¾å¤‡é—´ä¼ è¾“å£°éŸ³ï¼Œå®‰è£…åæ“ä½œç³»ç»Ÿçš„å£°éŸ³è®¾å¤‡ä¼šå¤šå‡ºä¸€ä¸ªè¿œç«¯è¾“å‡ºè®¾å¤‡ï¼Œå„è½¯ä»¶è¿æ¥è¯¥è®¾å¤‡å³å¯ã€‚

ç›®å‰éœ€è¦æ‰‹åŠ¨ç¼–è¯‘

    https://github.com/neutrinolabs/pulseaudio-module-xrdp/wiki/README

å®‰è£…è¯¥æ¨¡å—åï¼Œè¿œç¨‹è¿æ¥åˆ°æœåŠ¡å™¨å³å¯åœ¨è¿è¡Œè¿œç¨‹æ¡Œé¢å®¢æˆ·ç«¯çš„æœºå™¨ä¸Šæ’­æ”¾æœåŠ¡å™¨ä¸Šçš„å£°éŸ³äº†ã€‚

##### xrdp è¿œç¨‹æ¡Œé¢ç”¨æˆ·ç›¸å¯¹æœ¬åœ°ç™»å½•ç”¨æˆ·æœ‰æƒé™åŒºåˆ«

ä½¿ç”¨è¿œç¨‹æ¡Œé¢å®¢æˆ·ç«¯è½¯ä»¶è¿æ¥åï¼Œè™½ç„¶è¾“å…¥äº†ç”¨æˆ·åå’Œå¯†ç ï¼Œä½†ä¸åƒæœ¬åœ°ç”¨æˆ·ç™»å½•æˆ–gnomeå†…ç½®è¿œç¨‹æ¡Œé¢é‚£æ ·æŸäº›æ“ä½œä¸å†æç¤ºå¯†ç 

    ç³»ç»Ÿæ›´æ–°ä»ä¼šæç¤ºè¾“å…¥å¯†ç 

    gnome-keyring ä¸ä¼šè‡ªåŠ¨è§£é”è‡ªåŠ¨ä¿å­˜çš„æµè§ˆå™¨/ssh/gpgç­‰å¯†ç ï¼Œå¯ä½¿ç”¨ seahorse å›¾å½¢åŒ–å·¥å…·è¿›è¡Œç®¡ç†ï¼Œæ‰“å¼€è½¯ä»¶åæ‰‹å·¥ç‚¹å‡»è§£é”

    æœ‰äº›ç³»ç»Ÿè®¾ç½®é€‰é¡¹æ— æ³•åœ¨è¿œç¨‹æ¡Œé¢ç™»å½•ç¯å¢ƒä¸‹è®¾ç½®ï¼Œæ¯”å¦‚æœ¬åœ°å¼€æœºåç”¨æˆ·è‡ªåŠ¨ç™»å½•ç­‰

> è§£å†³ xrdp è¿œç¨‹æ¡Œé¢è¿æ¥ååœ¨ Gnome software æ— æ³•æœç´¢ flatpak ç¨‹åºçš„é—®é¢˜

åœ¨ Windows ä½¿ç”¨è¿œç¨‹æ¡Œé¢ mstsc ç™»å½•è¿è¡Œ xrdp çš„ Fedora åï¼ŒGnomes â€œè½¯ä»¶â€ æ— æ³•æœç´¢ flatpak è½¯ä»¶åŒ…ï¼Œè®¾ç½®é‡Œçœ‹ä¸åˆ° flathub å­˜å‚¨åº“ï¼Œåªèƒ½æœ¬åœ°ç™»å½•æ‰èƒ½çœ‹åˆ°ï¼Œä½†æ˜¯ç”¨å‘½ä»¤è¡Œ `flatpak search` å¯ä»¥æœåˆ°ï¼Œè€Œä¸”ä¹Ÿä¸å½±å“æ‰§è¡Œ flatpak ç¨‹åºã€‚

è¿™æ˜¯å› ä¸º xrdp ä¼šè¯çš„è¿œç¨‹æ¡Œé¢ç”¨æˆ·çš„æƒé™è¢«é™åˆ¶ï¼Œéœ€è¦ä¿®æ”¹ polkitï¼ŒPolkit çŸ¥è¯†å‚è§ç« èŠ‚ [sudo çš„æ›¿ä»£æ–¹æ¡ˆ Polkitï¼ˆPolicyKitï¼‰](init_a_server think)ã€‚

ä»¥ä¸‹æ˜¯å¼€å‘è€…ç»™å‡ºçš„è„šæœ¬åŒ–è§£å†³æ–¹æ¡ˆ

        https://github.com/neutrinolabs/xrdp/issues/2700

    å…ˆåˆ›å»ºä¸€ä¸ªæœ¬åœ°ç”¨æˆ·ç»„ pk-localï¼Œç„¶åæŠŠä½ çš„ xrdp ç”¨æˆ·æ·»åŠ è¿›å»

    $ sudo groupadd pk-local
    $ sudo usermod -aG pk-local uu

    å®‰è£…è‡ªå®šä¹‰ polkit ç­–ç•¥

    $ git clone --depth https://github.com/matt335672/pk-local
    $ cd pk-local

    $ sudo ./setup-pk-local --enable

    éªŒè¯ï¼šThe polkit actions above should be using auth_admin for an xrdp session (e.g.):-

    $ pkaction --verbose --action-id org.freedesktop.Flatpak.appstream-update
    org.freedesktop.Flatpak.appstream-update:
    . . .
    implicit any:      auth_admin
    . . .
    implicit active:   yes

> å¯¹ Fedora ç­‰ä½¿ç”¨ SELinux æŠ€æœ¯çš„æ“ä½œç³»ç»Ÿ

æ‚¨å¯èƒ½éœ€è¦ç¼–è¾‘ /etc/pam.d/xrdp-sesman ä»¥ä½¿ä¼šè¯è¿‡æ¸¡åˆ°æ­£ç¡®çš„ SELinux ä¸Šä¸‹æ–‡ã€‚[#2094](https://github.com/neutrinolabs/xrdp/issues/2094) ä¸­åŸ‹è—ç€æœ‰å…³æ­¤çš„æ›´å¤šä¿¡æ¯ ã€‚

##### Windows è¿œç¨‹æ¡Œé¢(mstsc.exe)è¿æ¥ xrdp æé€Ÿ

åœ¨ mstsc è¿æ¥æ—¶é€‰æ‹©é«˜é€Ÿç½‘ç»œï¼Œxrdp ä¼šè‡ªåŠ¨ä½¿ç”¨ RFX æŠ€æœ¯

    https://github.com/neutrinolabs/xrdp/discussions/2136#discussioncomment-2080012

å¾®è½¯ä» Windows 11 å¼€å§‹ mstsc ä¸å†æ”¯æŒ RFXï¼Œæœªæ¥å¿…é¡»åˆ‡æ¢åˆ° GFX äº†

    https://github.com/neutrinolabs/xrdp/issues/2400

xrdp è¿˜æœªå®ç°å¯¹ GFX çš„æ”¯æŒï¼Œå¯¹ä½¿ç”¨ xorgxrdp çš„ X window æ¡Œé¢ç”¨æˆ·æ¥è¯´,å®¢æˆ·ç«¯ä½¿ç”¨ Windows 10 çš„ mstsc æ‰èƒ½å®ç°æé€Ÿ

    https://github.com/neutrinolabs/xrdp/issues/2506#issuecomment-1387172540

RFX/GFX æŠ€æœ¯å‚è§ç« èŠ‚ [è™šæ‹Ÿæœºå¯ç”¨æ˜¾å¡åŠ é€Ÿ](Windows 10+ å®‰è£…çš„é‚£äº›äº‹å„¿.md)ã€‚

##### é¿å…å®¢æˆ·ç«¯è¿æ¥æ—¶æç¤ºâ€œè¯ä¹¦æ¥è‡ªä¸ä¿¡ä»»çš„è¯ä¹¦éªŒè¯æœºæ„â€

éœ€è¦ä½ çš„å®¢æˆ·ç«¯å®‰è£…æœåŠ¡å™¨çš„CAè¯ä¹¦ï¼Œè¯¦è§ç« èŠ‚ [Linux xrdp ä½¿ç”¨è‡ªç­¾å SSL è¯ä¹¦](openssl think)ã€‚

#### VNC ä½“ç³»

VNC ä½“ç³»ç”±å®¢æˆ·ç«¯ï¼ˆviewerï¼‰ä¸æœåŠ¡ç«¯ä¸¤éƒ¨åˆ†æ„æˆ

    https://blog.csdn.net/sinolover/article/details/119735572

å»ºè®®ï¼šVNC ä½“ç³»ä¼ è¾“è¿œç¨‹æ˜¾ç¤ºä½¿ç”¨å›¾åƒçš„æ–¹å¼ï¼Œå¸¦å®½æ¶ˆè€—è¾ƒå¤§ï¼Œå¤§å¤šæ•°ä½¿ç”¨ VNC çš„åœºåˆï¼Œä¸€èˆ¬éƒ½å¯ä»¥ç”¨å…¶å®ƒæ–¹å¼ä»£æ›¿

    æ“ä½œè¿œç¨‹æ–‡ä»¶ï¼Œä½¿ç”¨ ssh è¿æ¥ï¼Œæˆ– sshfs æŒ‚è½½è¿œç¨‹æ–‡ä»¶ç³»ç»Ÿå³å¯

    ä½¿ç”¨è¿œç¨‹çš„å›¾å½¢åŒ–è½¯ä»¶ï¼Œå»ºè®®æ¢ç”¨ xrdp è¿™ç§èŠ‚çº¦å¸¦å®½çš„æ–¹å¼

å®‰å…¨æ€§é—®é¢˜ï¼š

    å› ä¸º VNC çš„åè®®åŠ å¯†æ–¹é¢è€ƒè™‘çš„éå¸¸å°‘ï¼Œå¯†é’¥å¯èƒ½ä¼šæ˜æ–‡ä¼ è¾“ï¼ŒåŠ¡å¿…ç”¨ ssh æœ¬åœ°ç«¯å£è½¬å‘åŠŸèƒ½åŒ…è£… VNC è®¿é—®

        ssh -FL 9901:localhost:5901 <user>@<SERVER_IP> sleep 5; vncviewer localhost:9901

å†å²

    VNC æ˜¯ç”±è‹±å›½å‰‘æ¡¥å¤§å­¦ Olivetti & Oracle å®éªŒå®¤ç ”å‘çš„ä¸€æ¬¾è¶…çº§ç˜¦ç»ˆç«¯ç³»ç»Ÿã€‚å®ƒä»¥ 1998å¹´ IEEE Internet Computing ä¸€ç¯‡è®ºæ–‡ ã€ŠVirtual Network Computingã€‹ çš„å½¢å¼è€Œé—®ä¸–ã€‚æ­¤ç ”ç©¶å®¤åœ¨ 1999 å¹´ä½µå…¥ç¾åœ‹é›»è©±é›»å ±å…¬å¸ï¼ˆAT&Tï¼‰ã€‚AT&T æ–¼ 2002 å¹´ä¸­æ­¢äº†æ­¤ç ”ç©¶å®¤çš„é‹ä½œï¼Œä¸¦æŠŠ VNC ä»¥ GPL é‡‹å‡ºï¼Œè¡ç”Ÿå‡ºäº†å¹¾å€‹ VNC è»Ÿé«”ï¼š

    RealVNCï¼šç”± VNC åœ˜éšŠéƒ¨ä»½æˆå“¡é–‹ç™¼ï¼Œåˆ†ç‚ºå…¨åŠŸèƒ½å•†æ¥­ç‰ˆåŠå…è²»ç‰ˆã€‚http://www.realvnc.com/

    TightVNCï¼šå¼·èª¿ç¯€çœé »å¯¬ä½¿ç”¨ã€‚http://www.tightvnc.com/ 2001å¹´ä¿„ç½—æ–¯ä¸€åç ”ç©¶ç”Ÿ Konstantin V Kaplinsky åœ¨ Modern Technique and Technologies ä¸Šå‘è¡¨çš„ ã€ŠVNC TIGHT ENCODERã€‹ ä¸­åˆ›æ–°æ€§çš„æå‡ºäº†ä¸€ç§æ–°çš„ VNC ç¼–ç æ–¹å¼:tightï¼Œå¹¶ä»¥å¼€æº VNC ä¸ºåŸºç¡€åŠ ä»¥ä»£ç å®ç°ï¼Œå‘å¸ƒäº†å¼€æºç‰ˆçš„ tightvncã€‚

        TightVNC çš„ Unix-like å¹³å°çš„æ”¯æŒä¸€ç›´åœç•™åœ¨åå‡ å¹´å‰çš„ 1.3 ç‰ˆï¼Œä¸€ç›´ä¸åœæ›´æ–°çš„æ˜¯å…¶ Windows ç‰ˆã€‚

    æ¨è TigerVNCï¼šåŸºäº TightVNC ä»æœªå‘å¸ƒè¿‡çš„ VNC4 åˆ†æ”¯è€Œæ¥ï¼Œç”±äº TightVNC çš„å·¥ä½œé‡å¿ƒæ”¾åˆ°äº† Windowsï¼Œå¯¹ Linux çš„ X11/Xorg æ¶æ„çš„ä¼˜åŒ–ä¸å¤Ÿæ–°ï¼ŒTigerVNC æ³¨é‡ Unix-like ç‰ˆæœ¬çš„å¼€å‘ï¼Œå¯¹æ–°ç‰ˆæœ¬çš„ X æ¡Œé¢ç³»ç»Ÿçš„å¼ºåŠ›æ”¯æŒï¼Œæ‰€ä»¥åœ¨ BSDã€Linux ç­‰ Unix-like æ“ä½œç³»ç»Ÿä¸­å®ç°è¿œç¨‹è™šæ‹Ÿæ¡Œé¢ï¼Œæœ€å¥½çš„é€‰æ‹©æ˜¯ TigerVNCã€‚

        https://github.com/TigerVNC/tigervnc/releases

    UltraVNCï¼šåŠ å…¥äº† TightVNC çš„éƒ¨ä»½ç¨‹å¼åŠåŠ å¼·æ•ˆèƒ½çš„åœ–å‹æ˜ å°„é©…å‹•ç¨‹å¼ï¼Œä¸¦çµåˆ Active Directory åŠ NTLM çš„å¸³è™Ÿå¯†ç¢¼èªè­‰ï¼Œä½†åƒ…æœ‰ Windows ç‰ˆæœ¬ã€‚ http://ultravnc.com/

    Vine Viewerï¼šMac OS X çš„ VNC ç”¨æˆ¶ç«¯ï¼ˆMac OS è‡ªå¸¦ VNC æœåŠ¡å™¨ï¼‰ã€‚

    TurboVNCï¼šè‡´åŠ›äºä¼˜åŒ–å›¾åƒã€3dçš„ VirtualGL ä½“ç³» https://virtualgl.org/About/Background

    é€™äº›è»Ÿé«”é–“å¤§å¤šéµå¾ªåŸºæœ¬çš„ VNC å”å®šï¼Œå› æ­¤å¤§å¤šå¯äº’é€šä½¿ç”¨ã€‚ä¾‹å¦‚å¯ä»¥ä½¿ç”¨ Windows å¹³å°ä¸Šçš„ ultravnc å®¢æˆ·ç«¯è¿æ¥ Linux å¹³å°ä¸Šçš„ tightvnc æœåŠ¡ç«¯ï¼Œä½†æœ€å¥½ä¸¤ä¾§ç‰ˆæœ¬ä¸€è‡´ä»¥ä¼˜åŒ–æ€§èƒ½ã€‚

ä¸€èˆ¬æ¥è¯´ï¼Œå‘è¡Œç‰ˆçš„æ¡Œé¢ç¯å¢ƒå†…ç½®è¿œç¨‹æ¡Œé¢åŠŸèƒ½çš„ VNC æœåŠ¡å™¨ç«¯ï¼Œæ¯”å¦‚ Gnome ç”¨ vinoã€‚

å®‰è£… xrdp æ—¶ä¹Ÿä¼šè¿å¸¦å®‰è£… xvncï¼Œä¹Ÿæ˜¯ä¸€ä¸ª vnc æœåŠ¡å™¨ç«¯

    `man xvnc`

ç”¨æˆ·åœ¨å®¢æˆ·ç«¯ä½¿ç”¨ vnc viwer å³å¯ç›´æ¥è¿œç¨‹è¿æ¥æ¡Œé¢ã€‚

##### ä½¿ç”¨ TigerVNC Server

Gnome ç­‰æ¡Œé¢ç¯å¢ƒå†…ç½®çš„ vnc è½¯ä»¶åŠŸèƒ½å¤ªå¼±äº†ï¼Œé€šå¸¸åœ¨æœåŠ¡å™¨å®‰è£…ç¬¬ä¸‰æ–¹çš„ TigerVNC Server è½¯ä»¶åŒ…ï¼Œå®¢æˆ·ç«¯ä½¿ç”¨ TigerVNC Viwer è½¯ä»¶åŒ…ã€‚

    https://tigervnc.org/
        æºç  https://github.com/TigerVNC/tigervnc
        äºŒè¿›åˆ¶å‘å¸ƒ https://sourceforge.net/projects/tigervnc/files/

    å®‰è£…ä½¿ç”¨ Tiger VNC

        https://access.redhat.com/documentation/zh-cn/red_hat_enterprise_linux/9/html/getting_started_with_the_gnome_desktop_environment/remotely-accessing-the-desktop-as-multiple-users_getting-started-with-the-gnome-desktop-environment

        https://blog.csdn.net/qlcheng2008/article/details/122421763

        https://www.cnblogs.com/liyuanhong/articles/15487147.html

    $ sudo apt install tigervnc-standalone-server

TigerVNC æœåŠ¡å™¨å®‰è£…å®Œæˆåï¼Œä¼šè‡ªåŠ¨è¿›è¡Œ update-alternatives çš„æ“ä½œæ›¿æ¢ç³»ç»Ÿçš„å‡ ä¸ªé»˜è®¤å‘½ä»¤ï¼š

    ä½¿ç”¨ tigervncconfig æ¥åœ¨è‡ªåŠ¨æ¨¡å¼ä¸­æä¾› vncconfig

    ä½¿ç”¨ tigervncpasswd æ¥åœ¨è‡ªåŠ¨æ¨¡å¼ä¸­æä¾› vncpasswd

    ä½¿ç”¨ tigervncserver æ¥åœ¨è‡ªåŠ¨æ¨¡å¼ä¸­æä¾› vncserver

    ä½¿ç”¨ Xtigervnc æ¥åœ¨è‡ªåŠ¨æ¨¡å¼ä¸­æä¾› Xvnc

å®é™…ä¸Šå°±æ˜¯ä¸ºè¿™ 5 ä¸ªå‘½ä»¤åˆ›å»ºäº†ä¸€ä¸ªé“¾æ¥ï¼Œå®é™…ä½¿ç”¨æ—¶ç”¨è¿™ä¸¤ç»„å‘½ä»¤éƒ½å¯ä»¥ä½¿ç”¨ã€‚

    $ vncpasswd   è®¾ç½®ç”¨æˆ·å¯†ç ï¼Œè¯·å‹¿ä½¿ç”¨ sudo è¿è¡Œ

å®‰è£…å®Œç¬¬ä¸‰æ–¹ vnc æœåŠ¡å™¨åï¼Œè®°å¾—å…³é—­æ“ä½œç³»ç»Ÿæ¡Œé¢ç¯å¢ƒè‡ªå¸¦çš„å…±äº«æ¡Œé¢

    æ‰¾åˆ°æ¡Œé¢é‡Œçš„è®¾ç½®ï¼Œå…³é—­å±å¹•å…±äº«ã€‚è¿™æ ·åšæ˜¯ä¸ºäº†é˜²æ­¢ vnc æœåŠ¡é»˜è®¤ç«¯å£ 5900 çš„å ç”¨å‡ºç°å†²çªã€‚

å…ˆè¿è¡Œ VNC æœåŠ¡å™¨ï¼Œè¿™æ ·ä¼šå¯åŠ¨ä¸€ä¸ªè™šæ‹Ÿæ¡Œé¢ä¾›å®¢æˆ·ç«¯è¿æ¥ä½¿ç”¨

    $ vncserver -localhost no -geometry 1280x720 -depth 24

    æ ‘è“æ´¾è‡ªå¸¦çš„ realvnc server è¾“å‡ºä¿¡æ¯è¾ƒäººæ€§åŒ–ï¼Œä¼šç»™å‡ºæ˜ç¡®çš„åœ°å€

        $ vncserver
        VNC(R) Server 7.0.1 (r49073) ARMv6 (Feb 13 2023 11:37:04)
        Copyright (C) RealVNC Ltd.
        RealVNC and VNC are trademarks of RealVNC Ltd and are protected by trademark
        registrations and/or pending trademark applications in the European Union,
        United States of America and other jurisdictions.
        Protected by UK patent 2481870; US patent 8760366; EU patent 2652951.
        See https://www.realvnc.com for information on VNC.
        For third party acknowledgements see:
        https://www.realvnc.com/docs/7/foss.html
        OS: Raspbian GNU/Linux 11, Linux 6.1.21, aarch64

        On some distributions (in particular Red Hat), you may get a better experience
        by running vncserver-virtual in conjunction with the system Xorg server, rather
        than the old version built-in to Xvnc. More desktop environments and
        applications will likely be compatible. For more information on this alternative
        implementation, please see: https://www.realvnc.com/doclink/kb-546

        Running applications in /etc/vnc/xstartup

        VNC Server catchphrase: "Lunar extend mono. Brown mineral Quebec."
                    signature: 44-9f-46-4b-df-a5-2d-ff

        Log file is /home/pi/.vnc/jn-zh:1.log
        New desktop is jn-zh:1 (192.168.0.88:1)

    ç¼ºç‚¹

        å®¢æˆ·ç«¯åªèƒ½ä½¿ç”¨ realvnc viwer è¿›è¡Œè¿æ¥ï¼Œè¾“å…¥åœ°å€ 192.168.0.88:1 æ³¨æ„æ˜¯å¸¦è™šæ‹Ÿæ¡Œé¢å·çš„

        ç¬¬ä¸€æ¬¡ä¹‹åï¼Œå•çº¯è¿è¡Œ vncserver ä¼šæœ‰ä¸€å †æç¤ºï¼Œè¦è¿è¡Œ vncserver-virtual æ‰èƒ½å¯åŠ¨

åˆæ¬¡è¿è¡Œ vncserverï¼Œä¼šè‡ªåŠ¨è°ƒç”¨ vncpasswd å‘½ä»¤è®¾ç½®å®¢æˆ·ç«¯è®¿é—®æ­¤æœåŠ¡å™¨æ—¶çš„å¯†ç ï¼Œå¹¶è¯¢é—®æ˜¯å¦è¦è®¾ç½®ä¸€ä¸ª â€œview-onlyâ€ å¯†ç ã€‚å½“ç„¶ï¼Œä½¿ç”¨ â€œåªçœ‹â€ å¯†ç ç™»å½•åå°±åªæœ‰çœ‹çš„ä»½äº†ï¼Œç”¨æˆ·å°†æ— æ³•ä½¿ç”¨é¼ æ ‡å’Œé”®ç›˜ä¸VNCå®ä¾‹è¿›è¡Œäº¤äº’ã€‚

è®¾ç½®å®Œå¯†ç åï¼Œvncserver ä¼šè‡ªåŠ¨é€‰æ‹©ä¸€ä¸ªç©ºé—²çš„æ˜¾ç¤ºå™¨ç¼–å·æ¥å¯åŠ¨æ¡Œé¢ã€‚è¿™ä¸ªç¼–å·ä¸€èˆ¬ä»1å¼€å§‹ï¼Œä¹Ÿå¯ä»¥åœ¨å¯åŠ¨æ—¶æŒ‡å®šè™šæ‹Ÿæ¡Œé¢æ‰€ç”¨çš„æ˜¾ç¤ºå™¨ç¼–å·ã€‚

    vncserver -list è·å–æ‰€æœ‰å½“å‰æ­£åœ¨è¿è¡Œçš„VNCä¼šè¯çš„åˆ—è¡¨

    vncserver -kill :1 åœæ­¢VNCå®ä¾‹ï¼Œå…¶æœåŠ¡å™¨åœ¨ç«¯å£5901ï¼ˆ:1ï¼‰

ä¸€èˆ¬åˆæ¬¡è¿è¡ŒæœåŠ¡å™¨æ—¶ï¼Œç”±äºæ²¡æœ‰æå‰é…ç½® xstartup é…ç½®æ–‡ä»¶ï¼ŒVNC æœåŠ¡å™¨ä¼šå¯åŠ¨é»˜è®¤çš„æ¡Œç®¡ç†ç¨‹åºï¼Œè¿™ä¸å…¶ä»–çš„ VNC æœåŠ¡å™¨åªæ˜¾ç¤ºä¸€ä¸ªç°è‰²èƒŒæ™¯çš„æ¡Œé¢æœ‰ç€å¾ˆå¤§çš„ä¸åŒã€‚

å¦‚æœç³»ç»Ÿä¸­å®‰è£…äº†å¤šä¸ªæ¡Œé¢ç®¡ç†ç¨‹åºï¼Œé‚£è¿˜è¦åˆ›å»º ~/.vnc/xstartup æ–‡ä»¶ï¼Œå¹¶åœ¨æ–‡ä»¶ä¸­å¡«å…¥æƒ³è¦å¯åŠ¨æ¡Œé¢ç®¡ç†ç¨‹åºã€‚

å¯åŠ¨ GNOME æ¡Œé¢

    #!/bin/sh

    xsetroot -solid grey
    gnome-session &

å¯åŠ¨ XFCE æ¡Œé¢

    #!/bin/sh

    # unset SESSION_MANAGER
    # unset DBUS_SESSION_BUS_ADDRESS

    xsetroot -solid grey
    startxfce4 &

ç„¶åèµ‹äºˆæ‰§è¡Œæƒé™

    chmod u+x ~/.vnc/xstartup

æ¯å½“æ‚¨å¯åŠ¨æˆ–é‡æ–°å¯åŠ¨ TigerVNC æœåŠ¡å™¨æ—¶ï¼Œä»¥ä¸Šå‘½ä»¤éƒ½ä¼šè‡ªåŠ¨æ‰§è¡Œã€‚

ä¸ºäº†æ“ä½œæ–¹ä¾¿ï¼Œå¯ä»¥åˆ›å»ºä¸¤ä¸ªè„šæœ¬ï¼Œç”¨æ¥å®ŒæˆæœåŠ¡å™¨çš„å¯åŠ¨å’Œåœæ­¢å·¥ä½œã€‚

    å¯åŠ¨æœåŠ¡å™¨è„šæœ¬ startvncï¼š

        #!/bin/sh
        vncserver -geometry 1280x1024 -localhost no :2

    åœæ­¢æœåŠ¡å™¨è„šæœ¬ stopvnc

        #!/bin/sh
        vncserver -kill :2

æ³¨æ„ï¼šVNC çš„å®¢æˆ·ç«¯ä½¿ç”¨ï¼Œè¾“å…¥ç«¯å£å·æ—¶æœ‰ç‚¹æ­ª

    åœ¨ â€œVNCæœåŠ¡å™¨â€ æ ä¸­è¾“å…¥ TigerVNC æœåŠ¡çš„è®¡ç®—æœºçš„IPåœ°å€å’Œç«¯å£å·ã€‚

    æ­¤å¤„çš„ç«¯å£å·ä¸º VNC æœåŠ¡å™¨å¯åŠ¨æ—¶è®¾ç½®çš„æ˜¾ç¤ºå™¨è¯†åˆ«ç¬¦åŠ ä¸Š 5900ã€‚å¦‚ä½¿ç”¨çš„æ˜¯æ˜¾ç¤ºå™¨ 2 æ­¤ç«¯å£å·å°±ä¸º 5902ã€‚

    å¹¶ä¸”è¦ç”¨ ssh æœ¬åœ°ç«¯å£è½¬å‘ä¿æŠ¤ä½ çš„ vnc è¿æ¥

        ssh -FL 9901:localhost:5902 <user>@<SERVER_IP> sleep 5; vncviewer localhost:9901

å¦‚æœéœ€è¦å°†å…¶ä»–é€‰é¡¹ä¼ é€’ç»™ VNC æœåŠ¡å™¨ï¼Œè¯·åˆ›å»º ~/.vnc/config æ–‡ä»¶ï¼Œå¹¶åœ¨æ¯è¡Œæ·»åŠ ä¸€ä¸ªé€‰é¡¹

    geometry=1920x1080
    dpi=96

##### noVnc

novnc æä¾›äº†ä¸€ç§äº‘æ¡Œé¢æ–¹æ¡ˆï¼Œä½¿å¾—ç”¨æˆ·ç™»å½•ç½‘é¡µå³å¯ä½¿ç”¨è¿œç¨‹æœåŠ¡å™¨ã€‚noVNC è¢«æ™®éç”¨åœ¨å„å¤§äº‘è®¡ç®—ã€è™šæ‹Ÿæœºæ§åˆ¶é¢æ¿ä¸­ï¼Œæ¯”å¦‚ OpenStack Dashboard å’Œ OpenNebula Sunstone éƒ½ç”¨çš„æ˜¯ noVNCã€‚

    https://blog.csdn.net/jgku/article/details/127832459

    https://juejin.cn/post/6915679209692233735

    Debian11.6é…ç½® noVNC åšè¿œç¨‹æ¡Œé¢æœåŠ¡
        https://blog.csdn.net/lggirls/article/details/129024338

noVNC é€šè¿‡åœ¨ç½‘é¡µä¸Š html5 çš„ Canvasï¼Œè®¿é—®è¿œç¨‹æœºå™¨ä¸Š vncserver æä¾›çš„ vnc æœåŠ¡ï¼Œéœ€è¦åœ¨è¿œç¨‹æœºå™¨ä¸Šå®‰è£… websockfy åš tcp åˆ° websocket çš„è½¬åŒ–ï¼Œæ‰èƒ½åœ¨ html5 ä¸­æ˜¾ç¤ºå‡ºæ¥ã€‚

ç”¨æˆ·è¿æ¥è¿œç¨‹çš„ç½‘é¡µå°±æ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯ï¼Œç±»ä¼¼ Windows ä¸‹é¢çš„ vncviewerï¼Œåªæ˜¯æ­¤æ—¶å¡«çš„ä¸æ˜¯è£¸éœ²çš„ vnc æœåŠ¡çš„ ip+portï¼Œè€Œæ˜¯ç”± noVNC æä¾›çš„ websockets çš„ä»£ç†ï¼Œåœ¨ noVNC ä»£ç†æœåŠ¡å™¨ä¸Šè¦é…ç½®æ¯ä¸ª vnc æœåŠ¡ï¼ŒnoVNC æä¾›ä¸€ä¸ªæ ‡è¯†ï¼Œå»åå‘ä»£ç†æ‰€é…ç½®çš„ vnc æœåŠ¡ã€‚

æœåŠ¡å™¨æ­å»º novnc

    å®‰è£… vncserver: yum install -y tigervnc

    å®‰è£… Node.jsï¼šhttps://nodejs.org/en/download/ï¼ˆç”¨äºæ‰§è¡ŒWebsockify.jsï¼‰

    ä¸‹è½½ novncï¼šhttp://github.com/kanaka/noVNC/zipball/master

noVNC è¿è¡Œæ—¶æ‰§è¡Œçš„è„šæœ¬ä¸º noVNC/utils ç›®å½•ä¸‹çš„ launch.shï¼Œé…ç½®åŠå‚æ•°ä¿®æ”¹ç›´æ¥åœ¨ lauch.sh ä¸­è®¾ç½®

    â€“listen åé¢åŠ noVNCè¿è¡Œæ—¶çš„ç«¯å£ï¼Œé»˜è®¤ä¸º6080(â»…2.2.3)
    â€“vnc åé¢è·Ÿvncä¼šè¯çš„ä¿¡æ¯ï¼Œå¦‚172.16.0.56:5901

    â€“cert æŒ‡å®šè¯ä¹¦(â»…2.2.4)

    â€“web ç”¨æ¥æŸ¥æ‰¾vnc.htmlçš„ç›®å½•.æ ¹æ®ä»£ç é€»è¾‘ï¼Œåœ¨noVNCç›®å½•æˆ–è€…noVNC/utilsç›®å½•ä¸‹æ‰§è¡Œæ—¶éƒ½æ— éœ€è®¾ç½®æ­¤å‚ æ•°ï¼Œwebå˜é‡ä¼šè‡ªåŠ¨åœ¨å½“å‰ç›®å½•æˆ–è€…ä¸Šä¸€çº§ç›®å½•æŸ¥æ‰¾vnc.htmlã€‚

    â€“ssl-only é™åˆ¶åªèƒ½ç”¨httpsè¿›è¡Œvncè¿œç¨‹ä¼šè¯ï¼Œæ­¤æ—¶httpè®¿é—®å¤±æ•ˆã€‚è£…è½½å®‰å…¨è¯ä¹¦åï¼Œæ­¤å‚æ•°æ‰ä¼šç”Ÿæ•ˆï¼Œå¦åˆ™ noVNCè¿›ç¨‹æ— æ³•è¿è¡Œ

å®‰è£… Websockifyï¼š

    https://github.com/novnc/websockify/archive/master.zip

å¯åŠ¨:

    nohup python /root/noVNC/utils/websockify --web /root/noVNC --target-config=/srv/nfs4/vnc_tokens 6080 >> /root/noVNC/novnc.log &

å½“ç„¶ï¼Œæœ€å¥½æ˜¯ç›´æ¥é‡‡ç”¨å·²æœ‰çš„dockeré•œåƒ:

    docker pull dorowu/ubuntu-desktop-lxde-vnc

ç›¸å…³è½¯ä»¶

    MobaXterm: é»˜è®¤æœ‰X Window æœåŠ¡ï¼Œå¯ä»¥ç›´æ¥å¼¹å‡º GUI

    vncviewer: æœ€å¸¸ç”¨çš„ vnc å®¢æˆ·ç«¯

    xming: å¼€æºX Serverï¼Œæ­é…Puttyä½¿ç”¨ã€‚å‚è§ï¼šhttp://www.straightrunning.com/XmingNotes/

    UltraVNCï¼šhttp://www.uvnc.com/ï¼ˆWindowsç¯å¢ƒä¸‹çš„ VNC Serverï¼Œè¿˜æœ‰ TightVNCã€TigerVNCã€RealVNC ç­‰ï¼Œå…¶ä¸­ RealVNC ä¸èƒ½é€šè¿‡ noVNCï¼‰

#### Wayland ä¸‹çš„è¿œç¨‹æ¡Œé¢

åŸç”Ÿä½¿ç”¨ wayland ä½“ç³»è€Œä¸æ˜¯ä½¿ç”¨å…¼å®¹æ¨¡å— xwayland çš„è¿œç¨‹æ¡Œé¢æ¯”è¾ƒå°‘ï¼ŒåŸç†ä¹Ÿä¸åŒï¼Œæœ‰åŸºäº vnc çš„ï¼Œæœ‰åŸºäºåŸç”Ÿ wayland æ¨¡å—çš„ã€‚

ç›®å‰çš„å¤§å¤šæ•°è¿œç¨‹æ¡Œé¢è½¯ä»¶ä½¿ç”¨ rdp åè®® å’Œ vnc åè®®ï¼Œå…¶å®ç°éƒ½æ˜¯åŸºäº xwindow çš„ï¼Œæ‰€ä»¥ wayland ç¯å¢ƒæœ‰ xvnc æˆ– xwayland ç»„ä»¶è¿›è¡Œå…¼å®¹åŒ–çš„æ”¯æ’‘ï¼Œå¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚

å®Œå…¨åŸºäº waylande å®ç°çš„è¿œç¨‹æ¡Œé¢è½¯ä»¶è¾ƒå°‘ï¼Œè§ä¸‹ã€‚

##### åŸºäº VNC çš„ WayVNC

åœ¨æœåŠ¡å™¨ä¸Šå®‰è£…åï¼Œå®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨ vnc çš„æ–¹å¼è¿œç¨‹è¿æ¥ Wayland æ¡Œé¢

    https://docs.freebsd.org/en/books/handbook/wayland/#wayland-remotedesktop
        ä¸­æ–‡ç‰ˆ https://freebsd.gitbook.io/freebsd-handbook/di-6-zhang-freebsd-zhong-de-wayland/6.1.-wayland-gai-shu

å¦‚æœä½ æƒ³ä½¿ç”¨ vnc çš„æ–¹å¼è¿æ¥ Wayland æ¡Œé¢ï¼Œå‚³çµ±çš„ x11 VNC Server å¯èƒ½å°±æ— æ³•ä½¿ç”¨ï¼Œæ­¤æ™‚è¦æ”¹ç”¨ WayVNC é€™å€‹æ–°æŠ€è¡“ã€‚

wayvnc è¦æ±‚æ¡Œé¢æˆ–çª—å£ç®¡ç†å™¨æ”¯æŒ Waylandï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨ sway - i3 å…¼å®¹ Wayland compositorã€‚

    æœåŠ¡å™¨ç«¯

        https://github.com/any1/wayvnc
            https://github.com/any1/wayvnc/blob/master/FAQ.md
            https://www.mankier.com/1/wayvnc

    Wayland ç¯å¢ƒ VNC

        https://cloud-atlas.readthedocs.io/zh_CN/latest/linux/desktop/wayland/index.html

    WayVNC ä½¿ç”¨æ•™å­¸ https://ivonblog.com/posts/linux-wayvnc/

ç”±äº Wayland ä¸å†æ˜¯ X window ç³»ç»Ÿçš„ cs å·¥ä½œæ¨¡å¼ï¼ŒWayVNC é€šè¿‡ wlroots-based Wayland compositors çš„ VNC serverï¼Œé€šè¿‡é™„åŠ åˆ°ä¸€ä¸ªè¿è¡Œçš„ Wayland ä¼šè¯ï¼Œåˆ›å»ºè™šæ‹Ÿè¾“å…¥è®¾å¤‡ï¼Œä»¥åŠé€šè¿‡ RFB åè®®è¾“å‡ºä¸€ä¸ªå•ä¸€æ˜¾ç¤ºï¼Œæ¥å®ç° VNCã€‚

å®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨ TigerVNC è¿›è¡Œè¿æ¥ã€‚

###### æœåŠ¡å™¨ç«¯å®‰è£…é…ç½®

    dnf install wayvnc

æ£€æŸ¥ sshd é…ç½®æ–‡ä»¶ /etc/ssh/sshd_config å‚æ•°

    AllowTcpForwarding yes

    X11Forwarding yes

ä¸ºç¡®ä¿å®‰å…¨ï¼Œéœ€è¦ä½¿ç”¨è‡ªç­¾å ssl è¯ä¹¦

    # https://github.com/any1/wayvnc#encryption--authentication
    openssl req -x509 -newkey rsa:4096 -sha256 -days 3650 -nodes \
        -keyout key.pem -out cert.pem -subj /CN=localhost \
        -addext subjectAltName=DNS:localhost,DNS:localhost,IP:127.0.0.1

ä¸Šé¢çš„æ ¼å¼åªç”¨äºæœ¬æœºæµ‹è¯•ï¼Œå†…ç½‘ä½¿ç”¨éœ€è¦æŠŠ localhost å’Œ 127.0.0.1 æ”¹ä¸ºä½ çš„ä¸»æœºåå’Œip

ç„¶åæ·»åŠ åˆ°é…ç½®æ–‡ä»¶ ~/.config/wayvnc/config

    # https://github.com/any1/wayvnc#encryption--authentication
    address=0.0.0.0
    enable_auth=true
    username=username
    password=password
    private_key_file=/path/to/key.pem
    certificate_file=/path/to/cert.pem

æœ‰2ç§æ–¹å¼å¯åŠ¨ wayvnc æœåŠ¡å™¨:

1ã€ç®€å•çš„æœåŠ¡å™¨ç«¯å¯åŠ¨æ–¹æ³•å°±æ˜¯:

    # wayvnc localhost 5900
    # wayvnc 0.0.0.0
    % wayvnc -C ~/.config/wayvnc/config

wayvnc å•Ÿå‹•å¾Œä¸æœƒæœ‰ä»»ä½•è¼¸å‡ºï¼Œè¦é—œé–‰è«‹ç”¨CTRL+C

åœ¨ç»ˆç«¯å¯åŠ¨æ— å¤´æ¨¡å¼(headless)

    # https://wiki.archlinux.org/title/OpenGL#Mesa
    #   https://docs.mesa3d.org/envvars.html
    LIBGL_ALWAYS_SOFTWARE=true
    GALLIUM_DRIVER=driver  # driver å¯ä»¥æ˜¯ softpipe , llvmpipe æˆ–è€… swr
    export MESA_LOADER_DRIVER_OVERRIDE=zink  # çœ‹ä½ çš„æ˜¾å¡é©±åŠ¨

    XDG_RUNTIME_DIR=/tmp/ WLR_BACKENDS=headless WLR_LIBINPUT_NO_DEVICES=1 sway

2ã€åœ¨swayå†…éƒ¨å¯åŠ¨ wayvnc

    swaymsg --socket /tmp/sway-ipc.*.sock exec 'WAYLAND_DISPLAY=wayland-1 wayvnc -C ~/.config/wayvnc/config 0.0.0.0'

###### ä½¿ç”¨å®¢æˆ·ç«¯ wlvncc

æ”¯æŒ sway çš„å®¢æˆ·ç«¯è½¯ä»¶ wlvncc

    https://github.com/any1/wlvncc

Wayland çš„ VNC å®¢æˆ·ç«¯å¯ä»¥é‡‡ç”¨ wlvncc ã€‚WayVNC 0.5 æ”¯æŒä½¿ç”¨ OpenH268 RFB åè®®æ‰©å±•çš„ H.264 ç¼–ç ã€‚

ç¼–è¯‘ä¾èµ–:

    GCC/clang
    meson
    ninja
    pkg-config
    wayland-protocols

ç¼–è¯‘å’Œè¿è¡Œ:

    git clone https://github.com/any1/aml.git
    git clone https://github.com/any1/wlvncc.git

    mkdir wlvncc/subprojects
    cd wlvncc/subprojects
    ln -s ../../aml .
    cd ..  # åœ¨wlvnccç›®å½•

    meson build
    ninja -C build

    ./build/wlvncc <address>

###### åœ¨ ssh éš§é“é‡Œå®‰å…¨ä½¿ç”¨å®¢æˆ·ç«¯

ä½¿ç”¨ ssh åšæœ¬åœ°ç«¯å£è½¬å‘è¿›è¡Œä¿æŠ¤ã€‚

å¦‚æœæœåŠ¡å™¨ç«¯å¯åŠ¨æ­£å¸¸ï¼Œå¯ä»¥åœ¨å®¢æˆ·ç«¯ä½¿ç”¨:

    ssh -FL 9901:localhost:5901 <user>@<SERVER_IP> sleep 5; vncviewer localhost:9901

å¦‚æœä¸€æ­¥ä¸€æ­¥æ“ä½œ

    ssh -L 9901:localhost:5901 user@192.168.0.243  ä¸è¦å…³é—­è¿™ä¸ªçª—å£

    åœ¨æœ¬æ©Ÿé–‹å•Ÿ RealVNC VNC Viewerï¼Œè¼¸å…¥é€£ç·šIPï¼š

        localhost:9901

##### åŸºäº weston çš„ waypipe

WayPipe æ˜¯åŸç”Ÿæ”¯æŒ Wayland çš„æ¡Œé¢å®¢æˆ·ç«¯å·¥å…·ï¼Œå®ƒå€ŸåŠ© ssh å®ç°è¿œç¨‹æ¡Œé¢ï¼Œé¡ä¼¼ SSH X11 forwardingçš„æŠ€è¡“ï¼Œæ”¯æŒ sway çª—å£ç®¡ç†å™¨ã€‚

    https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/getting_started_with_the_gnome_desktop_environment/remotely-accessing-an-individual-application-wayland_getting-started-with-the-gnome-desktop-environment#doc-wrapper

    https://gitlab.freedesktop.org/mstoeckl/waypipe
        https://mstoeckl.com/notes/gsoc/blog.html

    https://ivonblog.com/posts/waypipe-wayland-over-ssh/

å®‰è£…æ—¶éœ€è¦ openssh å’Œ weston

    # dnf install openssh
    # dnf install weston
    dnf install waypipe

ssh è¿æ¥åˆ° theserverï¼Œè¿œç¨‹æ‰§è¡Œ weston-terminal ç¨‹åº

    waypipe ssh -C user@theserver weston-terminal

å¯åŠ¨å…¼å®¹æ–¹å¼

    # KDE
    waypipe ssh -C ivon@192.168.1.104 startplasma-wayland

å¦‚æ­¤ä¸€ä¾†å°±èƒ½å•Ÿå‹•å…¶ä»–ä¸æ”¯æ´ Wayland å”å®šçš„èˆŠç‰ˆæ‡‰ç”¨ç¨‹å¼ï¼Œä½†æ˜¯è©²æ¡Œé¢è¦–çª—ç„¡æ³•ç¸®æ”¾ã€‚

æœ¬åœ°åŒ–ä½¿ç”¨

    /usr/bin/waypipe -s /tmp/socket-local client &
    ssh -R /tmp/socket-remote:/tmp/socket-local -t user@theserver \
        /usr/bin/waypipe -s /tmp/socket-remote server -- \
        /usr/bin/weston-terminal
    kill %1

Weston æ˜¯ Wayland çš„åˆæˆå™¨ï¼ˆcompositorï¼‰ï¼Œä¸€èˆ¬å’Œ Wayland åŒæ­¥å‘å¸ƒã€‚

    https://wiki.archlinux.org/title/Weston

    https://blog.csdn.net/hexiaolong2009/article/details/104852721

    https://cloud.tencent.com/developer/article/1445734

ç›®å‰æœ€æ–°çš„ Weston 8.0.0 æ”¯æŒå¦‚ä¸‹å‡ ç§ backendï¼š

    drm-backend

        é»˜è®¤åç«¯ï¼Œåœ¨ Ctrl+Alt+F4 åˆ‡æ¢åˆ°è™šæ‹Ÿç»ˆç«¯åç›´æ¥è¾“å…¥å‘½ä»¤ wetson å³å¯å¯åŠ¨

    fbdev-backend

        ä¸æ”¯æŒ OpenGL ç¡¬ä»¶åŠ é€Ÿï¼Œå› æ­¤åªèƒ½ä½¿ç”¨ pixman åš CPU çº¯è½¯ç»˜æ“ä½œï¼Œç•Œé¢ä¼šæ¯”è¾ƒå¡é¡¿ã€‚
        weston --backend=fbdev-backend.so

    headless-backend

        ä¸å¸¦ä»»ä½• UI ç•Œé¢ï¼Œä¸»è¦ç”¨äº weston è‡ªæµ‹è¯•

    rdp-backend

        ç”¨äºè¿œç¨‹æ¡Œé¢

    wayland-backend

        å…ˆå¯åŠ¨ä¸€ä¸ª weston
        åœ¨ Weston ç»ˆç«¯é‡Œï¼Œè¾“å…¥ weston å‘½ä»¤å†å¯åŠ¨ä¸€ä¸ª Weston æ¡Œé¢

    x11-backend

        ç›´æ¥åœ¨ GNOME ç»ˆç«¯é‡Œæ‰§è¡Œ weston å‘½ä»¤ï¼ŒWeston çš„ç•Œé¢è¾“å‡ºï¼Œå°†è¢«ä½œä¸ºä¸€ä¸ª X Window é€åˆ° X Server ä¸­å»æ˜¾ç¤ºã€‚

    xwayland

        å®ƒä¸æ˜¯ä¸€ä¸ª backendï¼Œå®ƒåªæ˜¯ Wayland çš„ä¸€ä¸ªæ‰©å±•åŠŸèƒ½ï¼Œå¯ä»¥è®©ä½ åœ¨ Weston ä¸­è¿è¡Œ X çš„ç¨‹åºã€‚
        æ“ä½œæ­¥éª¤ï¼š

            sudo apt install xwaylandï¼Œå®‰è£… /usr/bin/Xwayland å¯æ‰§è¡Œç¨‹åºï¼›
            weston --modules=xwayland.soï¼Œéšä¾¿ä»¥å“ªç§ backend æ–¹å¼å¯åŠ¨éƒ½å¯ä»¥ï¼›

        å¯åŠ¨åï¼Œå¯ä»¥ç›´æ¥åœ¨ Weston ç»ˆç«¯ä¸­è¿è¡Œ X ç¨‹åºï¼Œå¦‚ x-terminal-emulatorã€‚

SSHè¿œç¨‹å¯åŠ¨

    weston --tty=1

ssh å¯åŠ¨æ–¹å¼éœ€è¦æ˜ç¡®æŒ‡å®šä½¿ç”¨å“ªä¸ªç»ˆç«¯æ¥æ˜¾ç¤ºã€‚

ä¸²å£å¯åŠ¨

    sudo -E weston --tty=1

ä¸²å£å¯åŠ¨åŒæ ·éœ€è¦æ˜ç¡®æŒ‡å®šä½¿ç”¨å“ªä¸ªVTæ¥æ˜¾ç¤ºã€‚

##### åŸºäº Weston çš„ QT Wayland

    https://runebook.dev/zh/docs/qt/wayland-and-qt

    https://doc.qt.io/qt-6.2/wayland-and-qt.html

Qt å®¢æˆ·ç«¯å¯ä»¥åœ¨ä»»ä½• Wayland åˆæˆå™¨ä¸Šè¿è¡Œï¼ŒåŒ…æ‹¬ Weston --- Wayland é¡¹ç›®çš„ä¸€éƒ¨åˆ†è€Œå¼€å‘çš„å‚è€ƒåˆæˆå™¨ã€‚ä»»ä½• Qt ç¨‹åºéƒ½å¯ä»¥ä½œä¸º Wayland å®¢æˆ·ç«¯(ä½œä¸ºå¤šè¿›ç¨‹ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†)æˆ–ç‹¬ç«‹çš„å®¢æˆ·ç«¯(å•è¿›ç¨‹)è¿è¡Œã€‚

##### wayland ä¸‹åˆ‡æ¢ä½¿ç”¨ xorg æ¡Œé¢

wayland ä¸‹å¯ä»¥å®ç°è¿œç¨‹æ¡Œé¢ï¼Œä¸‹é¢çš„æ“ä½œè¿‡æ—¶äº†ï¼Œä»…ä¾›å‚è€ƒ

    https://www.kclouder.cn/posts/53908.html

GDM (Gnome)åœ¨ RHEL8 ä¸­ä½¿ç”¨ Wayland ä½œä¸ºé»˜è®¤æ˜¾ç¤ºæœåŠ¡å™¨ï¼Œå–ä»£äº†åœ¨ RHEL7 ä¸­ä½¿ç”¨çš„ xorg æœåŠ¡å™¨ã€‚

åœ¨ RHEL8 ä¸­ï¼ŒVNC åè®®çš„åœ°ä½ä¼¼ä¹æœ‰æ‰€ä¸‹é™ï¼Œå› ä¸º Wayland å¹¶ä¸æ”¯æŒå±å¹•å…±äº«å’Œå±å¹•å½•åˆ¶åŠŸèƒ½ã€‚ä½†æ˜¯ï¼Œè¿™ä¸ªåŠŸèƒ½åœ¨ xorg ä¸­ä»ç„¶å¯ç”¨ã€‚å› æ­¤ï¼Œè¦ä½¿ç”¨ VNC Server æˆ‘ä»¬å¿…é¡»å°† GDM åˆ‡æ¢åˆ° xorgï¼Œä½¿ xorg æˆä¸º RHEL8 é»˜è®¤çš„æ˜¾ç¤ºæœåŠ¡å™¨ã€‚

ä¿®æ”¹ GDM é…ç½®æ–‡ä»¶ /etc/gdm/custom.conf

å–æ¶ˆæ³¨é‡Š waylandEnable=false

å®‰è£…é…ç½® tigervnc

    yum install -y tigervnc-server xorg-x11-fonts-Type1

åœ¨ /etc/systemd/system/ ä¸­åˆ›å»ºé…ç½®æ–‡ä»¶ï¼Œä»¥ä¾¿å°† VNC æœåŠ¡ä½œä¸ºç³»ç»ŸæœåŠ¡è¿è¡Œã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒVNC æœåŠ¡å™¨ä½¿ç”¨ç«¯å£ 5900ï¼Œä½†æ˜¯å¦‚æœä¸º VNC è®¾ç½®ç«¯å£åç§»é‡ï¼Œåˆ™å¯ä»¥åœ¨é»˜è®¤ç«¯å£ 5900 çš„å­ç«¯å£ä¸Šè¿è¡Œ VNC æœåŠ¡å™¨ã€‚ä¾‹å¦‚æˆ‘ä»¬ä½¿ç”¨ 9 å·ç«¯å£ï¼Œé‚£ä¹ˆå°±æ˜¯ 5909ã€‚

    é…ç½®æ–‡ä»¶åå°±æ˜¯ /etc/systemd/system/vncserver@:.service

ç¼–è¾‘é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼Œå°†ç”¨æˆ·åæ”¹ä¸ºè‡ªå·±çš„ç”¨æˆ·åå³å¯ï¼Œè¿™é‡Œçš„ç”¨æˆ·åæ˜¯â€œjackyâ€ï¼Œæ‰€ä»¥è¿™é‡Œä¸€å…±éœ€è¦ä¿®
æ”¹å››å¤„åç§°ã€‚

    vi /etc/systemd/system/vncserver@:9.service

``` ini
[Unit]
Description=Remote desktop service (VNC)
After=syslog.target network.target

[Service]
Type=forking
WorkingDirectory=/home/jacky
User=jacky
Group=jacky
PIDFile=/home/jacky/.vnc/%H%i.pid
ExecStartPre=/bin/sh -c â€˜/usr/bin/vncserver -kill %i > /dev/null 2>&1 :â€™
ExecStart=/usr/bin/vncserver -autokill %i
ExecStop=/usr/bin/vncserver -kill %i
Restart=on-success
RestartSec=15

[Install]
WantedBy=multi-user.target
```

å¯åŠ¨ VNC Serverã€‚æ³¨æ„è¦åˆ‡æ¢åˆ°è¦ä½¿ç”¨ VNC çš„è´¦å·ï¼Œé¦–æ¬¡å¯åŠ¨ä¼šæç¤ºè¾“å…¥ç”¨æˆ·åå’Œå¯†ç ã€‚

    vncserver

ç¦ç”¨ SELINUX

    setenforce 0
    sed -i â€˜s/enforcing/disabled/gâ€™ /etc/selinux/config2ã€ç¦ç”¨SELINUX

æ‰§è¡Œä»¥ä¸‹å‘½ä»¤åœ¨ systemctl å¯ç”¨ VNC Server

    systemctl daemon-reload
    systemctl start vncserver@:9.service
    systemctl enable vncserver@:9.service

æ·»åŠ é˜²ç«å¢™è§„åˆ™ï¼Œæˆ–è€ƒè™‘ç›´æ¥ç¦ç”¨é˜²ç«å¢™

    firewall-cmd -permanent -add-port=5909/tcp
    firewall-cmd -reload

è¿æ¥æœåŠ¡å™¨

è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ VNC Viewer æ¥è¿æ¥ RHEL8 ç³»ç»Ÿï¼Œè¾“å…¥ VNC Server çš„ IP åœ°å€ï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨çš„æ˜¯ 9 å·ç«¯å£ï¼Œæ‰€ä»¥ç«¯å£å·å¯ä»¥ä½¿ç”¨ 5909 æˆ– 9ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š

    ip address:5909 æˆ– ip address:9

ç¡®è®¤é€šè¿‡ VNC Viewer å¯ä»¥æ­£å¸¸ç™»å½•åˆ° RHEL8 ç³»ç»Ÿæ¡Œé¢ã€‚

### æ¡Œé¢ç¯å¢ƒç»Ÿä¸€å¯†ç ç®¡ç†å™¨ --- keyring-daemon

å¯†ç ç®¡ç†å™¨ï¼šä¿å­˜ sshã€gpg ç­‰å¯†é’¥çš„å¯†ç ï¼ŒåŒ…æ‹¬æµè§ˆå™¨ä¸­ web ç½‘ç«™çš„å¯†ç ã€WIFI è¿æ¥å¯†ç ç­‰ï¼Œå®ç°è‡ªåŠ¨å¡«å……ï¼Œæ”¯æŒæ¥ç®¡å¤šç§åº”ç”¨è½¯ä»¶çš„å¯†ç ç®¡ç†ã€‚é»˜è®¤ä½¿ç”¨ä½ çš„ç™»å½•èº«ä»½è¿›è¡ŒåŠ å¯†ï¼Œæ‰€ä»¥åœ¨ç”¨æˆ·ç™»å½•åå¯ä»¥å®ç°è‡ªåŠ¨è§£é”å¯†ç ç®¡ç†å™¨ã€‚

    https://wiki.archlinux.org/title/GNOME/Keyring

ç°åœ¨æµè¡Œçš„å¤§å¤šæ•° Linux æ¡Œé¢ç¯å¢ƒç°åœ¨éƒ½å¼•å…¥äº†å¯†ç ç®¡ç†å™¨è¿™ä¸€å·¥å…·ï¼Œç§°ä¸º keyring é’¥åŒ™åœˆ

    æ³¨æ„åŒºåˆ«äº GPG keyring é’¥åŒ™åœˆï¼Œé‚£ä¸ªæ˜¯ç»´æŠ¤å¯†é’¥é—´çš„ä¿¡ä»»å…³ç³»

    åå°è¿›ç¨‹ keyring-daemonï¼Œæ¥ç®¡å·²çŸ¥åº”ç”¨çš„è¾“å…¥å¯†ç è¯·æ±‚ï¼Œç»Ÿä¸€æŠŠç”¨æˆ·è¾“å…¥çš„å¯†ç ä¿å­˜èµ·æ¥ï¼Œåœ¨åº”ç”¨ç¨‹åºè¯·æ±‚å¯†ç å’Œç”¨æˆ·è¾“å…¥å¯†ç ä¹‹é—´æˆä¸ºä¸€ä¸ªä»£ç†ã€‚

    é»˜è®¤ä½¿ç”¨ç”¨æˆ·çš„ç™»å½•å¯†ç åŠ å¯†ä¿å­˜è¿™äº›å¯†ç åˆ°æœ¬åœ°ï¼Œè¿™æ ·åªè¦ç”¨æˆ·ä½¿ç”¨æœ¬åœ°è´¦æˆ·çš„å¯†ç ç™»å½•æ¡Œé¢ï¼Œä¼šåˆ©ç”¨ç™»å½•å¯†ç è§£é”é’¥åŒ™åœˆï¼Œä»è€Œå®ç°æµè§ˆå™¨ç™»å½•ç½‘ç«™ã€ä½¿ç”¨ sshã€gpg ç­‰éƒ½å¯ä»¥å…é™¤è¾“å…¥ç›¸å…³å¯†ç ã€‚

å¯†ç ç®¡ç†å™¨æ¥ç®¡äº†å¤šç§å¯†ç çš„è‡ªåŠ¨ä¿å­˜å’Œè‡ªåŠ¨å¡«å†™ï¼š

    æ”¯æŒæµè¡Œçš„æµè§ˆå™¨ã€åŠå…¬è½¯ä»¶ã€å„ç§æµè¡Œçš„å•†ä¸šè½¯ä»¶ç­‰è‡ªåŠ¨ä¿å­˜å¯†ç ï¼Œæ¯”å¦‚åœ¨ç”¨æˆ·ä½¿ç”¨æµè§ˆå™¨ç™»å½• web ç½‘ç«™æ—¶è‡ªåŠ¨ä¿å­˜å’Œå¡«å……å¯†ç ï¼šåœ¨åˆæ¬¡è¾“å…¥å¯†ç æ—¶ï¼Œç³»ç»Ÿçš„å¯†ç ç®¡ç†å™¨ä¼šå¼¹çª—æç¤ºä¿å­˜è¯¥å¯†ç ï¼Œåœ¨ç”¨æˆ·ç¡®è®¤åä¼šè¢«åŠ å¯†ä¿å­˜ï¼Œä»¥ååœ¨è¯¥é¡µé¢éœ€è¦å¡«å†™å¯†ç æ—¶ä¼šè‡ªåŠ¨å¡«å†™ã€‚

    æ”¯æŒ sshã€gpgã€git ç­‰åº”ç”¨åœ¨é‰´æƒæ—¶è‡ªåŠ¨æ¥ç®¡åŸ ssh-agentã€gpg pinentryã€git å‡­æ®ç®¡ç†å™¨ credential.helper çš„å·¥ä½œï¼š

        ä»¥ ssh å¯†é’¥ç™»å½•ä¸ºä¾‹ï¼Œåœ¨åˆæ¬¡ä½¿ç”¨ ssh å¯†é’¥æ—¶ï¼Œå¯†ç ç®¡ç†å™¨ä¼šå¼¹æ¡†è¦æ±‚è¾“å…¥è¯¥å¯†é’¥çš„ä¿æŠ¤å¯†ç ï¼Œåœ¨ç”¨æˆ·ç¡®è®¤åè¯¥å¯†ç ä¼šè¢«é’¥åŒ™åœˆåŠ å¯†ä¿å­˜ï¼Œåœ¨ä»¥åä½¿ç”¨å¯†é’¥æ—¶ä¼šè‡ªåŠ¨è°ƒå–ä¿å­˜çš„å¯†ç ã€‚å¯¹ç”¨æˆ·æ¥è¯´ï¼Œåªè¦ç¬¬ä¸€æ¬¡ä½¿ç”¨ ssh å¯†é’¥æ—¶ï¼Œåœ¨å¯†ç ç®¡ç†å™¨æç¤ºè¦æ±‚è¾“å…¥å¯†é’¥çš„ä¿æŠ¤å¯†ç æ—¶é€‰æ‹©åŠ å…¥é’¥åŒ™åœˆï¼Œåˆ™ä»¥åä½¿ç”¨è¯¥å¯†é’¥çš„åœºæ™¯ä¸‹ï¼Œå¯†ç ç®¡ç†å™¨ä¼šåœ¨åå°ç›´æ¥ç»™ ssh åº”ç”¨è¿”å›è¯¥å¯†é’¥çš„ä¿æŠ¤å¯†ç ï¼Œä¸å†éœ€è¦ç”¨æˆ·æ‰‹å·¥è¾“å…¥ã€‚å½“ç„¶ï¼Œå‰ææ˜¯å·²ç»ç”¨å¯†ç ç™»å½•äº†æ¡Œé¢ï¼Œé¡ºä¾¿è§£é”äº†é’¥åŒ™åœˆ

            GNOME æ¡Œé¢ç¯å¢ƒä¸‹çš„ä½¿ç”¨ç»ˆç«¯æ˜¯ï¼Œshell ç¯å¢ƒä¸‹çš„ ssh-agent å¯†é’¥ä»£ç†ï¼Œéœ€è¦è®¾ç½®å˜é‡æŒ‡å‘ gnome-keyring-daemonï¼Œè¯¦è§ [å¤šä¼šè¯å¤ç”¨ ssh å¯†é’¥ä»£ç†](bash_profile.sh)ã€‚

            KDE æ¡Œé¢ç¯å¢ƒä¹Ÿæ˜¯ç±»ä¼¼æƒ…å†µã€‚

åŸç†ï¼šç”¨æˆ·ä½¿ç”¨çš„åº”ç”¨ç¨‹åºï¼Œå…¶è¯»å–å¯†ç çš„ API è°ƒç”¨ä¼šè¢«å¯†ç ç®¡ç†å™¨ï¼ˆkeyring-daemonï¼‰æ¥ç®¡

    ç”¨æˆ·åœ¨ç›¸å…³çš„åº”ç”¨è½¯ä»¶ä¸­è¾“å…¥å¯†ç ï¼Œå¦‚æµè§ˆå™¨ç™»å½• web ç½‘ç«™çš„å¯†ç ï¼Œä½¿ç”¨ sshã€gpg ã€git æ—¶è¾“å…¥çš„å¯†é’¥çš„ä¿æŠ¤å¯†ç ï¼Œåªè¦é¦–æ¬¡é‡åˆ°çš„å¯†ç éƒ½ä¼šè¢«å¯†ç ç®¡ç†å™¨è¯†åˆ«ï¼Œæç¤ºç”¨æˆ·æ˜¯å¦ä¿å­˜åˆ°é’¥åŒ™åœˆã€‚

    ä¿å­˜åˆ°é’¥åŒ™åœˆæ—¶ï¼Œä¼šä½¿ç”¨ç”¨æˆ·æœ¬åœ°å¸æˆ·çš„ç™»å½•å¯†ç å¯¹è¿™äº›å¯†ç è¿›è¡ŒåŠ å¯†ï¼ˆä¹Ÿå¯ä¸ºå…¶è®¾ç½®å•ç‹¬çš„å¯†ç ï¼‰ã€‚

    å½“ç”¨æˆ·å†æ¬¡é‡åˆ°åº”ç”¨è½¯ä»¶æç¤ºè¾“å…¥å¯†ç æ—¶ï¼Œåªè¦åº”ç”¨è½¯ä»¶è¯»å–å¯†ç çš„ API è¢«å†æ¬¡è°ƒç”¨ï¼Œåˆ™å¯†ç ç®¡ç†å™¨ä¼šå…ˆè§£é”é’¥åŒ™åœˆï¼ˆç”¨æˆ·åˆæ¬¡ç™»å½•æ—¶éœ€è¦è¾“å…¥ç™»å½•å¯†ç ï¼‰ï¼Œä¹Ÿå³è§£å¯†è¯¥å¯†ç ï¼ˆä½¿ç”¨ç”¨æˆ·ç»™å‡ºçš„ç™»å½•å¯†ç ï¼‰ï¼Œè¿”å›ç»™ç›¸å…³åº”ç”¨çš„ API è°ƒç”¨ã€‚

å¯†ç ç®¡ç†ä¸ç”¨æˆ·çš„äº¤äº’æ–¹å¼ï¼š

ä¸ºäº†ä½¿ç”¨æ–¹ä¾¿ï¼Œâ€œé’¥åŒ™åœˆâ€é»˜è®¤ä½¿ç”¨ç”¨æˆ·çš„ç™»å½•å¯†ç è¿›è¡ŒåŠ å¯†ï¼Œè¿™æ ·åœ¨ç”¨æˆ·ä½¿ç”¨å¯†ç ç™»å½•ç³»ç»Ÿåï¼Œå¯†ç ç®¡ç†å™¨ä¸éœ€è¦æç¤ºç”¨æˆ·è¾“å…¥å¯†ç è§£é”â€œé’¥åŒ™åœˆâ€ï¼Œè¿™æ ·å¤§å¤§æ–¹ä¾¿äº†æ—¥å¸¸ä½¿ç”¨ã€‚

    ç”¨æˆ·å¯ä»¥è®¾ç½®é’¥åŒ™åœˆä½¿ç”¨å•ç‹¬çš„å¯†ç ï¼Œè¿™æ ·çš„è¯ç”¨æˆ·ä½¿ç”¨ç™»å½•å¯†ç ç™»å½•ç³»ç»Ÿåâ€œé’¥åŒ™åœˆâ€æ˜¯æœªè§£é”çš„ï¼Œgnome æ¡Œé¢ç¯å¢ƒä¼šåœ¨ç”¨æˆ·ç™»å½•è¿›å…¥æ¡Œé¢åå¼¹çª—æç¤ºï¼Œè§£é”é’¥åŒ™åœˆ â€œEnter password to unlock your key ringâ€ï¼Œç”¨æˆ·éœ€è¦è¾“å…¥è‡ªå·±è®¾ç½®çš„å•ç‹¬å¯†ç æ‰èƒ½è§£é”â€œé’¥åŒ™åœˆâ€ã€‚

å¦‚æœåœ¨ç™»å½• gnome æ¡Œé¢æ—¶æ²¡æœ‰è¾“å…¥ç™»å½•å¯†ç ï¼Œæ¯”å¦‚ä½¿ç”¨äººè„¸è¯†åˆ«æˆ–æŒ‡çº¹ç™»å½•äº†æ¡Œé¢ï¼Œç³»ç»ŸåŒæ ·ä¼šåœ¨ç”¨æˆ·ç™»å½•è¿›å…¥æ¡Œé¢åå¼¹çª—æç¤ºï¼Œè§£é”é’¥åŒ™åœˆ â€œEnter password to unlock your key ringâ€ï¼Œç”¨æˆ·éœ€è¦è¾“å…¥ç™»å½•å¯†ç æ‰èƒ½è§£é”â€œé’¥åŒ™åœˆâ€ã€‚

    è¿™æ˜¯å› ä¸º gnome-keyring ä½¿ç”¨ç™»å½•å¯†ç ä½œä¸ºåŠ å¯†å¯†é’¥ï¼Œä¸è¾“å…¥ç™»å½•å¯†ç å°±æ— æ³•è§£é”å…¶ä¿å­˜çš„å„ç§å¯†é’¥å’Œå¯†ç ï¼Œè€Œ gnome-keyring ç›®å‰ä¸æ”¯æŒé¢éƒ¨è¯†åˆ«ã€æŒ‡çº¹è¯†åˆ«çš„æ•°æ®ä½œä¸ºåŠ å¯†å¯†é’¥ã€‚

å¦‚æœåœ¨ç™»å½•æ¡Œé¢åï¼Œæç¤ºè¾“å…¥ç™»å½•å¯†ç è§£é”é’¥åŒ™åœˆæ—¶ï¼Œé€‰æ‹©äº†å–æ¶ˆï¼š

    åˆ™ keyring-daemon ä¼šæŠŠé‰´æƒè¯·æ±‚ä¼ å›åˆ°å„ä¸ªåº”ç”¨ç¨‹åºï¼Œä¹Ÿå°±æ˜¯è‡ªå·±ä¸å†æ¥ç®¡å¯†é’¥å¤„ç†äº†ã€‚è¿™æ ·åœ¨åº”ç”¨ç¨‹åºéœ€è¦è¾“å…¥å¯†ç çš„åœºåˆï¼Œå°±ä¼šåƒä¹‹å‰ä¸€æ ·ï¼Œå„åº”ç”¨è½¯ä»¶è‡ªè¡Œå¼¹çª—æç¤ºç”¨æˆ·è¾“å…¥å¯†ç ã€‚å¯†ç ç®¡ç†å™¨ä¸ä¼šå†å¼¹å‡ºè§£é”é’¥åŒ™åœˆçš„æç¤ºäº†ï¼Œå³ä¾¿ä½¿ç”¨çš„æ˜¯é’¥åŒ™åœˆé‡Œä¿å­˜è¿‡çš„åŠ å¯†å¯†é’¥ã€‚

    å› ä¸ºç™»å½•åé€‰æ‹©äº†ä¸è§£é”é’¥åŒ™åœˆï¼Œåœ¨ç³»ç»Ÿå¼¹çª—æ—¶è¦ä»”ç»†çœ‹ä¸‹æç¤ºï¼Œåˆ°åº•æ˜¯åº”ç”¨ç¨‹åºçš„å¯†ç è¾“å…¥ç•Œé¢ï¼Œè¿˜æ˜¯é’¥åŒ™åœˆè§£é”çš„ç•Œé¢ï¼ŒäºŒè€…çš„å¯†ç æ˜¯ä¸åŒçš„ã€‚

ä½¿ç”¨å›¾å½¢åŒ–å·¥å…·å¯ä»¥æ–¹ä¾¿çš„çœ‹åˆ°é’¥åŒ™åœˆæ˜¯å¦å¤„äºè§£é”çŠ¶æ€ï¼Œç‚¹å‡»å›¾æ ‡ä¼šæç¤ºè¾“å…¥ç™»å½•å¯†ç è§£é”è¯¥é’¥åŒ™åœˆï¼Œè¯¦è§ä¸‹é¢å­ç« èŠ‚ã€‚

> MacOSï¼š ä¹Ÿæœ‰è‡ªå·±çš„å¯†é’¥ç®¡ç†å™¨

ç•¥

> ç¬¬ä¸‰æ–¹å¯†ç ç®¡ç†å™¨

KeePass æ˜¯ä¸€ä¸ªå…è´¹çš„å¼€æºå¯†ç ç®¡ç†å™¨ï¼Œå®ƒå¯ä»¥å¸®åŠ©æ‚¨ä»¥å®‰å…¨çš„æ–¹å¼ç®¡ç†æ‚¨çš„å¯†ç ã€‚æ‚¨å¯ä»¥å°†æ‰€æœ‰å¯†ç å­˜å‚¨åœ¨ä¸€ä¸ªç”¨ä¸»å¯†é’¥é”å®šçš„æ•°æ®åº“ä¸­ã€‚å› æ­¤ï¼Œæ‚¨åªéœ€è®°ä½ä¸€ä¸ªä¸»å¯†é’¥å³å¯è§£é”æ•´ä¸ªæ•°æ®åº“ã€‚æ•°æ®åº“æ–‡ä»¶ä½¿ç”¨åŠ å¯†ç®—æ³•ï¼ˆAES-256ã€ChaCha20å’ŒTwofishï¼‰è¿›è¡ŒåŠ å¯†ã€‚

    https://keepass.info/

    https://wiki.archlinux.org/title/KeePass

Bitwarden å¯ docker éƒ¨ç½²å®ç°è‡ªæ‰˜ç®¡

    https://zhuanlan.zhihu.com/p/130492433

#### Gnome æ¡Œé¢çš„å¯†ç ç®¡ç†å™¨åº”ç”¨ç¨‹åº

GNOME Keyringï¼ˆgnome-keyringï¼‰é’¥åŒ™åœˆ

    https://cn.linux-terminal.com/?p=3195

    https://wiki.gnome.org/action/show/Projects/GnomeKeyring

    https://wiki.archlinux.org/title/GNOME/Keyring

    https://zhuanlan.zhihu.com/p/128133025

æ“ä½œç³»ç»Ÿè½¯ä»¶åŒ… gnome-keyring æä¾›äº†å„ç§ç»„ä»¶å®ç°è¯¥åŠŸèƒ½ã€‚

æ”¯æŒç™»å½•è§£é”ï¼Œpam ä½¿ç”¨ pam_gnome_keyring.so

å› ä¸ºä»£æ›¿äº† ssh-agentã€gpg-agent çš„åŠŸèƒ½ï¼Œæ‰€ä»¥ gnome-keyring-daemon ä¸èƒ½ä¸ä¹‹å…±å­˜ï¼Œä½¿ç”¨ä¸€ä¸ªå³å¯

å›¾å½¢ç•Œé¢ç®¡ç†ç¨‹åºå« Passwords and Keysï¼Œå…¶å‘½ä»¤è¡Œç¨‹åºå seahorse

    ç”¨æˆ·å¯ä»¥å»ºç«‹å¤šä¸ªé’¥åŒ™åœˆï¼Œæ™®é€šä½¿ç”¨ä¸ºäº†æ–¹ä¾¿ä¿æŒä¸€ä¸ªå°±å¯ä»¥äº†ã€‚

    å¦‚æœä½ ä¿®æ”¹äº†è´¦æˆ·å¯†ç ï¼Œè®°å¾—è¿˜å¾—é‡è®¾é’¥åŒ™åœˆå¯†ç ã€‚å‡å¦‚ä½ ä¸è®°å¾—ä»ç„¶è¢«é’¥åŒ™åœˆä½¿ç”¨çš„è€çš„è´¦æˆ·å¯†ç ï¼šåªèƒ½ç§»é™¤è€çš„é’¥åŒ™åœˆï¼Œä¹Ÿå°±æ˜¯è¯´ä½ ä¿å­˜çš„é‚£äº›å¯†ç ä¹Ÿéƒ½åˆ æ‰äº†

#### KDE æ¡Œé¢çš„å¯†ç ç®¡ç†å™¨åº”ç”¨ç¨‹åº

kde å¯†ç ç®¡ç†å™¨ï¼šKDE Wallet - åŸå KDE é’±åŒ…ï¼ˆKWalletï¼‰ï¼Œåœ¨ 22 ç‰ˆåæ”¹åä¸ºæ›´è´´åˆ‡çš„ KDE å¯†ç åº“

    https://apps.kde.org/zh-cn/kwalletmanager5/

    https://userbase.kde.org/KDE_Wallet_Manager

    https://wiki.archlinux.org/title/KDE_Wallet

    https://www.jwillikers.com/gnome-keyring-in-kde-plasma

å›¾å½¢ç•Œé¢ç®¡ç†ç¨‹åºæ˜¯ KWalletManagerã€‚

ä»¥å‰ KDE Wallet æ”¯æŒ sshã€gitï¼Œä¸æ”¯æŒ gpgï¼Œéœ€è¦ç”¨ KGpg å·¥å…·è‡ªåŠ¨ä¿å­˜å’Œå¡«å†™ gpg çš„å¯†ç 

        https://userbase.kde.org/KGpg

        https://apps.kde.org/kgpg/

æ‰‹å·¥è°ƒèµ·æ¥ kwalletd è¿›ç¨‹ï¼š

    # KDE æ¡Œé¢ç¯å¢ƒç”¨è‡ªå·±çš„ KWallet ç®¡ç†æ¥ç®¡äº†å…¨ç³»ç»Ÿçš„å¯†ç å’Œå¯†é’¥ï¼Œå›¾å½¢åŒ–å·¥å…·å¯ä½¿ç”¨ kwalletmanager5 è¿›è¡Œç®¡ç†
    # systemctl --user status plasma-kwallet-pam.service
    # $(/usr/bin/kwalletd6 >/dev/null 2>&1)

> è‡ªåŠ¨å¡«å†™ gpg å¯†ç 

ç°åœ¨çš„ KDE Walletï¼Œæ·»åŠ é’±åŒ…æ—¶ï¼Œå¯ä»¥è®¾ç½®ç‹¬ç«‹çš„å¯†ç ï¼Œæˆ–ä½¿ç”¨ä½ ç°æœ‰çš„ gpg å¯†é’¥ï¼Œä»¥æ­¤åŠ å¯†ä¿å­˜ä½ å„ç§çš„å¯†ç ã€‚å»ºè®®ä¸ºäº†æ–¹ä¾¿ï¼Œè®¾ç½®ç‹¬ç«‹çš„å¯†ç ï¼Œè·Ÿä½ ç”¨æˆ·ç™»å½•æ¡Œé¢çš„å¯†ç ç›¸åŒï¼Œè¿™æ ·ç”¨æˆ·ç™»å½•æ¡Œé¢åå°±è‡ªåŠ¨è§£é”äº†ä½ çš„ kde walletã€‚

KDE6 é»˜è®¤ä½¿ç”¨ gpg-agent ä¸ KWallet äº¤äº’ï¼Œæ— éœ€é¢å¤–é…ç½®ï¼š

    åˆæ¬¡ä½¿ç”¨ gpg çš„ç­¾åç­‰åŠŸèƒ½æ—¶ï¼Œä¼šè‡ªåŠ¨å¼¹å‡º kde é’±åŒ…çš„æ·»åŠ å¯†é’¥ç•Œé¢ï¼Œæç¤ºè¾“å…¥ gpg å¯†é’¥çš„ä¿æŠ¤å¯†ç ï¼Œå¯é€‰ä¿å­˜åˆ° kde é’±åŒ…ã€‚

    åªè¦é€‰æ‹©äº†ä¿å­˜åˆ° kde é’±åŒ…ï¼Œä»¥åä½¿ç”¨åˆ° gpg å¯†é’¥æ—¶ï¼Œåªä¼šæç¤ºè§£é” kde é’±åŒ…çš„å¯†ç ï¼Œä¸ä¼šå†éœ€è¦è¾“å…¥ gpg å¯†é’¥çš„ä¿æŠ¤å¯†ç äº†

æ£€æŸ¥ GPG æ˜¯å¦æ­£å¸¸å·¥ä½œï¼š

    $ gpg --list-keys

æµ‹è¯•ç­¾åï¼Œåº”ä¸å†æç¤ºè¾“å…¥ gpg å¯†é’¥çš„ä¿æŠ¤å¯†ç ï¼š

    $ echo "test" | gpg --clearsign

    è¾“å…¥ ^d é€€å‡º

> KDE Wallet ä¸æ”¯æŒè‡ªåŠ¨å¡«å†™ ssh å¯†é’¥çš„ä¿æŠ¤å¯†ç 

é»˜è®¤æƒ…å†µä¸‹ï¼ŒKWallet ä¸ä¼šè‡ªåŠ¨æ‹¦æˆªæˆ–å­˜å‚¨ ssh å¯†é’¥çš„ä¿æŠ¤å¯†ç ï¼Œç”¨æˆ·åªèƒ½è‡ªè¡Œä½¿ç”¨ ssh-agent è¿›è¡Œç¼“å­˜ã€‚

    # è¿™ä¸ª ksshaskpass æ²¡ç”¨
    # https://github.com/KDE/ksshaskpass
    SSH_ASKPASS=/usr/bin/ksshaskpass

KDE æ¡Œé¢ç¯å¢ƒç”¨è‡ªå·±çš„ systemd å•å…ƒæ–‡ä»¶ ssh-agent.service æœåŠ¡å®ç°å¤ç”¨ ssh-agentï¼Œåˆæ¬¡ä½¿ç”¨ ssh å¯†é’¥éœ€è¦æ‰‹å·¥è¾“å…¥SSH å¯†é’¥å¯†ç ï¼Œç”¨ä»¥ä¸‹å‘½ä»¤é¢„åŠ è½½èµ·æ¥å³å¯ï¼š

    $ ssh-add

æœ€å¤šå¯ä»¥åˆ©ç”¨ kWallet çš„è‡ªå®šä¹‰æ¡ç›®ï¼Œè®°å½•æˆ–æ˜¾ç¤ºä½ çš„ ssh å¯†ç 

    è¿›å…¥ä½ çš„ KWalletï¼Œåœ¨ Passwords->Passwords ä¸‹ new ä¸€ä¸ªæ–°æ¡ç›®ï¼Œèµ·å sshï¼Œè¾“å…¥å¯†ç çš„å†…å®¹ï¼Œç‚¹å‡» save

    éªŒè¯ï¼Œåœ¨å‘½ä»¤è¡ŒæŸ¥çœ‹ä½ æ·»åŠ çš„æ¡ç›®ï¼Œæœ€åçš„å‚æ•° ddd æ˜¯ä½ çš„é’±åŒ…çš„åå­—ï¼Œé»˜è®¤é’±åŒ…æ˜¯ kdewallet

        $ kwallet-query -r ssh ddd
        your_password

### Linux ä¸‹çš„ â€œWindows Helloâ€ äººè„¸è¯†åˆ«è®¤è¯ --- Howdy

æç¤ºï¼š

    äººè„¸è¯†åˆ«å’ŒæŒ‡çº¹è¯†åˆ«çš„å®‰å…¨æ€§ä¸å¦‚å¯†ç ã€å¯†é’¥ã€yubi-key ç­‰è®¤è¯æ–¹å¼ï¼Œæ›´å®¹æ˜“è¢«é€ å‡ï¼Œå»ºè®®åªç”¨äºä¸ªäººç”µè„‘çš„å®½æ¾ä½¿ç”¨åœºæ™¯

åŸºäºäººè„¸è¯†åˆ«çš„è®¤è¯è§£é”åŠŸèƒ½ï¼Œä½¿ç”¨æ‘„åƒå¤´è¯†åˆ«é¢éƒ¨ç¡®è®¤ç”¨æˆ·ï¼Œå¯ç”¨äºç”¨æˆ·ç™»å½•ã€sudo ç­‰éœ€è¦æ‰‹å·¥è¾“å…¥å¯†ç çš„åœºåˆ

    https://github.com/boltgolt/howdy

        Fedora ä¸‹çš„å®‰è£…å’Œè®¾ç½®è¯´æ˜ https://copr.fedorainfracloud.org/coprs/principis/howdy/

    è¯„è®ºå¾ˆå…¨é¢ https://linuxreviews.org/Howdy

    è¿™é‡Œè¯´äº†çº¢å¤–å‘å°„å™¨çš„è°ƒè¯• https://wiki.archlinux.org/title/Howdy

    ä¸­æ–‡æœ€å…¨é¢çš„ https://wszqkzqk.github.io/2021/08/17/%E5%9C%A8Manjaro%E4%B8%8B%E9%85%8D%E7%BD%AE%E4%BA%BA%E8%84%B8%E8%AF%86%E5%88%AB/

é¦–å…ˆä½ è¦æœ‰ä¸€ä¸ªæ”¯æŒ â€œWindows Helloâ€ æ ‡å‡†çš„å†…ç½®çº¢å¤–å‘å°„å™¨çš„æ‘„åƒå¤´ IR cameraã€‚

Howdy é€šè¿‡ OpenCV å’Œ Python æ„å»ºï¼Œæ”¯æŒä½¿ç”¨å†…ç½®çº¢å¤–å‘å°„å™¨çš„æ‘„åƒå¤´æ¥è¯†åˆ«ç”¨æˆ·é¢éƒ¨ã€‚é€šè¿‡è°ƒç”¨ Linux çš„ PAM èº«ä»½éªŒè¯ç³»ç»Ÿï¼Œæ„å‘³ç€ä¸ä»…å¯ä»¥ä½¿ç”¨äººè„¸è¯†åˆ«ç™»å½•æ¡Œé¢ç¯å¢ƒï¼Œè¿˜å¯ä»¥å°†å…¶ç”¨äº sudoã€suã€polkit-1 ä»¥åŠå¤§å¤šæ•°éœ€è¦ä½¿ç”¨å…¶ä»–å¸æˆ·å¯†ç çš„åœºæ™¯ã€‚

å› ä¸º howdy æ“ä½œ pamï¼Œæ‰€ä»¥å®ƒçš„ç¨‹åºæ‰§è¡Œå’Œè®¾ç½®éƒ½éœ€è¦ root æƒé™ï¼Œæ·»åŠ é¢éƒ¨æ¨¡å‹æ—¶å¯ä»¥æŒ‡å®šç”¨æˆ·åã€‚

Fedora ä¸‹å®‰è£… howdy

    $ sudo dnf copr enable principis/howdy
    $ sudo dnf --refresh install howdy

    å¯é€‰ï¼šå¦‚æœ Linux å†…æ ¸ä¸æ”¯æŒä½ çš„çº¢å¤–å‘å°„å™¨ï¼Œåœ¨è¿™é‡ŒæŸ¥æ‰¾å®‰è£…é©±åŠ¨

        https://github.com/EmixamPP/linux-enable-ir-emitter

1ã€ç¡®å®šæ‘„åƒå¤´è®¾å¤‡

æ‘„åƒå¤´ä¸€èˆ¬éƒ½æ˜¯ usb è®¾å¤‡ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è¯†åˆ«

    $ lsusb
    Bus 001 Device 011: ID 04f2:b612 Chicony Electronics Co., Ltd USB2.0 FHD UVC WebCam

ç„¶åæŸ¥çœ‹ç³»ç»Ÿæ˜¯å¦è¯†åˆ«å‡ºæ‘„åƒå¤´è®¾å¤‡ï¼š

åˆ—å‡ºå½“å‰æ‰€æœ‰çš„æ‘„åƒå¤´è®¾å¤‡ï¼Œå³ä½¿åªæœ‰ä¸€ä¸ªæ‘„åƒå¤´ï¼Œä¹Ÿä¼šåˆ—å‡ºå¤šä¸ªè®¾å¤‡ï¼Œå…¶å®æ˜¯å¯¹åº”äº†ä¸åŒçš„åŠŸèƒ½ï¼Œæˆ‘ä»¬ä¸»è¦å…³æ³¨ video0 å’Œ video2

    $ ls /dev/video*

ä¸€èˆ¬æ¥è¯´ï¼Œæ™®é€šæ‘„åƒå¤´æ˜¯ /dev/video0 ï¼Œå¯ä»¥æ‰“å¼€çº¢å¤–å‘å°„å™¨çš„æ‘„åƒå¤´æ˜¯ /dev/video2ã€‚å¦‚æœä½ çš„æ‘„åƒå¤´æ˜¯å¸¦çº¢å¤–å‘å°„å™¨çš„ï¼Œä¼šæœ‰ä¸¤ä¸ªè®¾å¤‡å¯ç”¨ï¼šè®¾å¤‡ video0 æ˜¯æ™®é€šæ‘„åƒå¤´ï¼Œè®¾å¤‡ video2 æ˜¯æ‰“å¼€çº¢å¤–å‘å°„å™¨ä¸‹çš„æ‘„åƒå¤´

    å¼€å¯çº¢å¤–å‘å°„åŠŸèƒ½å¯ä»¥æé«˜è¯†åˆ«çš„å‡†ç¡®åº¦ä¸å®‰å…¨æ€§ï¼Œè€Œä¸”çº¢å¤–å‘å°„å¼æ‘„åƒå¤´æ”¯æŒå…¨é»‘æš—çŠ¶æ€ä¸‹çš„äººè„¸è¯†åˆ«

ç”¨ VLC ç¡®è®¤æ‰€é€‰æ‘„åƒå¤´è®¾å¤‡å·¥ä½œæ­£å¸¸

    vlc èœå•ä¸­çš„ åª’ä½“ - æ‰“å¼€æ•è·è®¾å¤‡ - é«˜çº§é€‰é¡¹ï¼ˆadvance optionsï¼‰ï¼Œé€‰æ‹©è§†é¢‘æ•è·è®¾å¤‡ /dev/video0ï¼Œ ç¡®å®š - æ’­æ”¾ ä¹‹åæ˜¾ç¤ºçš„æ‘„åƒå¤´æ•æ‰åˆ°çš„ç”»é¢ã€‚å¦‚æœæ˜¯å¸¦çº¢å¤–å‘å°„å™¨çš„æ‘„åƒå¤´è¿˜å¯ä»¥é€‰ /dev/video2 è¿›è¡Œæµ‹è¯•ã€‚

å¯é€‰å®‰è£…ï¼šæ‘„åƒå¤´ç®¡ç†è½¯ä»¶åŒ… v4l-utils

    $ sudo dnf install v4l-utils

    åˆ—å‡ºå½“å‰æ‰€æœ‰çš„æ‘„åƒå¤´è®¾å¤‡ï¼Œå¯¹æ™®é€šæ‘„åƒå¤´æˆ‘ä»¬ä½¿ç”¨ video0

        $ v4l2-ctl --list-devices
        UVC Camera (046d:0825) (usb-0000:00:14.0-9):
            /dev/video0
            /dev/video1
            /dev/media0

        æ”¯æŒçº¢å¤–å‘å°„å™¨çš„æ‘„åƒå¤´çš„è®¾å¤‡æ›´å¤šï¼Œæˆ‘ä»¬ä½¿ç”¨ video2
        $ v4l2-ctl --list-devices
        USB2.0 FHD UVC WebCam: USB2.0 F (usb-0000:00:14.0-5.4):
            /dev/video0
            /dev/video1
            /dev/video2
            /dev/video3
            /dev/media0
            /dev/media1

    åé¢å¦‚æœè¿è¡Œ howdy é‡åˆ°æ‘„åƒå¤´ä¸å·¥ä½œï¼Œç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å½“å‰æ‘„åƒå¤´æ”¯æŒçš„åƒç´ å°ºå¯¸

        $ v4l2-ctl -d /dev/video0 --list-formats-ext

        ç„¶åæ‰¾ä¸€ä¸ªåˆé€‚çš„åˆ†è¾¨ç‡å¡«å†™åˆ° howdy çš„é…ç½®æ–‡ä»¶ä¸­çš„ frame_width å’Œ frame_height å­—æ®µå³å¯ã€‚

2ã€é…ç½®æ‘„åƒå¤´

è®¾å¤‡è·¯å¾„æ³¨æ„åŒºåˆ«ï¼šæ™®é€šæ‘„åƒå¤´æ˜¯ /dev/video0ï¼Œå¦‚æœä½ çš„æ‘„åƒå¤´æ”¯æŒçº¢å¤–å‘å°„å™¨ï¼Œåº”è¯¥é€‰æ‹© /dev/video2ï¼Œå¦‚æœé€‰æ‹©äº† /dev/video0 æ˜¯ä¸ä¼šæ‰“å¼€çº¢å¤–å‘å°„å™¨çš„

    $ sudo howdy config ä¼šè°ƒç”¨ nano æ‰“å¼€é…ç½®æ–‡ä»¶

    æˆ–ç›´æ¥æ‰‹å·¥ç¼–è¾‘ /lib64/security/howdy/config.ini æ–‡ä»¶

        device_path = /dev/video2

éªŒè¯æ‘„åƒå¤´é…ç½®

    $ sudo howdy test

    ä¼šæ‰“å¼€ä¸€ä¸ªçª—å£æ˜¾ç¤ºæ‘„åƒå¤´çš„å†…å®¹ï¼Œå¦‚æœæ‘„åƒå¤´å¼€å¯äº†çº¢å¤–å‘å°„å™¨å…¶æŒ‡ç¤ºç¯ä¼šé—ªçƒï¼Œåœæ­¢è¿è¡Œå¯åœ¨å‘½ä»¤è¡Œçª—å£æŒ‰ ctrl+c

3ã€å¯¹ Redhat ç³»ç­‰å¼€å¯ SELinux çš„æ“ä½œç³»ç»Ÿå¦‚ Fedoraï¼Œéœ€è¦é…ç½® SELinux

    https://github.com/boltgolt/howdy/issues/711#issuecomment-1306559496

ç¼–è¾‘ä¸€ä¸ª howdy.te æ–‡ä»¶

```conf

module howdy 1.0;

require {
    type lib_t;
    type xdm_t;
    type v4l_device_t;
    type sysctl_vm_t;
    class chr_file map;
    class file { create getattr open read write };
    class dir add_name;
}

#============= xdm_t ==============
allow xdm_t lib_t:dir add_name;
allow xdm_t lib_t:file { create write };
allow xdm_t sysctl_vm_t:file { getattr open read };
allow xdm_t v4l_device_t:chr_file map;

```

ç„¶åæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š

    $ checkmodule -M -m -o howdy.mod howdy.te
    $ semodule_package -o howdy.pp -m howdy.mod
    $ sudo semodule -i howdy.pp

4ã€é…ç½® PAM åœ¨é‰´æƒæ—¶è°ƒç”¨äººè„¸è¯†åˆ«

è°ƒæ•´ PAM é…ç½®ï¼Œä¼˜å…ˆä½¿ç”¨äººè„¸è¯†åˆ«è¿›è¡ŒéªŒè¯ï¼Œè‹¥äººè„¸è¯†åˆ«éªŒè¯å¤±è´¥ï¼Œå›è½åˆ°åŸè¾“å…¥å¯†ç è¿›è¡ŒéªŒè¯ã€‚

pam æ§åˆ¶æ–‡ä»¶çš„è¯´æ˜å‚è§ç« èŠ‚ [PAM --- Linux ä½¿ç”¨çš„å®‰å…¨éªŒè¯æ–¹å¼](init_a_server think)ã€‚

> è§£é” sudo

ç¼–è¾‘ /etc/pam.d/sudo æ–‡ä»¶ï¼Œåœ¨æ’é™¤æ³¨é‡Šè¯­å¥åçš„é¦–è¡ŒåŠ å…¥å¦‚ä¸‹å†…å®¹

    #%PAM-1.0
    auth       sufficient   pam_python.so /lib64/security/howdy/pam.py  <--è¦ä¿è¯åœ¨æœ€å‰
    auth       include      system-auth
    account    include      system-auth
    ...

    å¦‚æœæ˜¯ä½ æœ¬äººæœ¬æœºä½¿ç”¨ï¼Œå¯ä»¥å¯¹ su æ–‡ä»¶åšç›¸åŒçš„ä¿®æ”¹ï¼Œè¿™æ ·æ‰§è¡Œ su å‘½ä»¤ä¹Ÿå¯ä»¥ä½¿ç”¨é¢éƒ¨è¯†åˆ«äº†ï¼ˆéœ€è¦åœ¨ howdy ç»™ root ç”¨æˆ·æ·»åŠ é¢éƒ¨æ¨¡å‹ï¼Œè§ä¸‹é¢ï¼‰

        #%PAM-1.0
        auth    sufficient  pam_rootok.so
        auth    sufficient  pam_python.so /lib64/security/howdy/pam.py <-- æ·»åŠ ä¸ºç¬¬äºŒè¡Œ
        ...

> è§£é”ç™»å½•å¯†ç å’Œé”å±å¯†ç 

ç¼–è¾‘ /etc/pam.d/gdm-password

    auth    [success=done ignore=ignore default=bad] pam_selinux_permit.so
    auth    sufficient    pam_python.so /lib64/security/howdy/pam.py  <-- æ·»åŠ åœ¨è¿™ä¸¤è¡Œä¹‹é—´
    auth    substack      password-auth

ä½¿ç”¨è¯´æ˜ï¼š

    åœ¨ sudo ä¼šè‡ªåŠ¨å¯åŠ¨äººè„¸è¯†åˆ«ï¼Œå¦‚æœäººè„¸è¯†åˆ«å¤±è´¥ï¼Œä¼šå›è½åˆ°ä½¿ç”¨å¯†ç éªŒè¯ã€‚

    åœ¨ç™»å½•ç•Œé¢ï¼Œäººè„¸è¯†åˆ«ä¸ä¼šåƒ Windows Hello é‚£æ ·è‡ªåŠ¨å¯åŠ¨ï¼Œä½†æ˜¯ä¸éœ€è¦è¾“å…¥å¯†ç ï¼Œåªéœ€ç‚¹å‡»ç™»å½•æŒ‰é’®æˆ–æŒ‰å›è½¦é”®ä¼šä¼˜å…ˆè°ƒç”¨äººè„¸è¯†åˆ«ï¼Œå¦‚æœäººè„¸è¯†åˆ«å¤±è´¥ï¼Œä¼šå›è½åˆ°ä½¿ç”¨å¯†ç éªŒè¯ã€‚

    åœ¨é”å±ç•Œé¢ä¸­ç‚¹å‡»é¼ æ ‡å³å¯è‡ªåŠ¨è§£é”ï¼Œå¦‚æœäººè„¸è¯†åˆ«å¤±è´¥ï¼Œä¼šå›è½åˆ°ä½¿ç”¨å¯†ç éªŒè¯ã€‚

> ç›®å‰ä¸æ”¯æŒè§£é” gnome-keyringï¼š

    https://github.com/boltgolt/howdy/issues/438

åœ¨é€šè¿‡äººè„¸è¯†åˆ«ç™»å½•æ¡Œé¢åï¼Œgnome æ¡Œé¢ç¯å¢ƒä¼šå¼¹çª—æç¤ºè¾“å…¥ç™»å½•å¯†ç è§£é” gnome é’¥åŒ™åœˆã€‚

åŸå› ï¼šè§ç« èŠ‚ [æ¡Œé¢ç¯å¢ƒç»Ÿä¸€å¯†ç ç®¡ç†å™¨ --- keyring-daemon] é‡Œ â€œç”¨æˆ·äº¤äº’â€ éƒ¨åˆ†çš„è§£é‡Šã€‚

è§£å†³åŠæ³•ï¼šç»™ gnome-keyring è®¾ç½®ç©ºå¯†ç ï¼Œæˆ–å‚ç…§æŒ‡çº¹ç™»å½•çš„è§£å†³åŠæ³•ï¼Œä½¿ç”¨ u ç›˜ç­‰è®¾å¤‡å•ç‹¬ä¿å­˜ä½ çš„ gnome-keyring å¯†ç  <https://wiki.archlinux.org/title/Fingerprint_GUI#Password>ã€‚

éªŒè¯ï¼š

    $ gpg --sign some.file

å¦‚æœæœªè§£é” gnome-keyringï¼Œè¿™é‡Œä¼šæç¤ºè¾“å…¥ gpg å¯†é’¥çš„ä¿æŠ¤å¯†ç ï¼ˆä¸æ˜¯è§£é” gnome-keyring çš„å¯†ç ï¼‰

5ã€ï¼ˆå¯é€‰ï¼‰é…ç½® polkit

    é¢„è®¡åœ¨ v3.0 ç‰ˆæœ¬å½»åº•è§£å†³èº«ä»½éªŒè¯ç±»é—®é¢˜

gnome æ¡Œé¢ç¯å¢ƒè®¾ç½®ç³»ç»Ÿå‚æ•°çš„æŸäº›é€‰é¡¹æ—¶éœ€è¦ç‚¹å‡»è§£é”æŒ‰é’®ï¼Œä¼šè°ƒç”¨ polkit-1 è¿™æ ·çš„ GUI æˆæƒéªŒè¯å·¥å…·ï¼Œå¼¹å‡ºä¸€ä¸ªå¯†ç è¾“å…¥çª—å£ã€‚è¿™é‡Œä¹Ÿå¯ä»¥æ·»åŠ é¢éƒ¨è¯†åˆ«å…é™¤è¾“å…¥å¯†ç ã€‚

éœ€è¦æ‰‹å·¥ä¿®æ”¹ polkit ç­–ç•¥

    https://github.com/boltgolt/howdy/issues/630

æœ¬ä¿®æ”¹æ–¹æ³•å¯èƒ½ä¸å¤Ÿå®Œå–„ï¼š

    é¢éƒ¨è¯†åˆ«è·³è¿‡äº† polkit-1 æ–‡ä»¶ä¸­å…¶å®ƒçš„ system-auth ç­–ç•¥ï¼Œä¸çŸ¥é“æ˜¯å¦è¿˜æœ‰å“ªäº›å—é™äºè¾“å…¥å¯†ç çš„å¼€å…³æœªè§£é”ã€‚è¿™ä¸ª github ç”¨æˆ·å¹²è„†æ·»åŠ åˆ° system-auth <https://github.com/boltgolt/howdy/issues/630#issuecomment-1014654035>ï¼Œä½†æ˜¯è¿˜ä¼šå¼¹å‡ºå¯†ç æç¤ºï¼Œåº”è¯¥æ˜¯ç±»ä¼¼ gnome-keyring ä½¿ç”¨ç™»å½•å¯†ç åŠ å¯†å­˜å‚¨æ•°æ®çš„åœºåˆï¼Œå¿…é¡»ä½¿ç”¨ç™»å½•å¯†ç æ‰èƒ½è§£é”ã€‚

    æ­£è§„åšæ³•æ˜¯ï¼Œhowdy åº”è¯¥åƒ xrdp é‚£æ ·å•ç‹¬ç”³è¯·æƒé™å“åº” polkit ç­–ç•¥ï¼Œå‚è§ç« èŠ‚ [xrdp è¿œç¨‹æ¡Œé¢ç”¨æˆ·ç›¸å¯¹æœ¬åœ°ç™»å½•ç”¨æˆ·æœ‰æƒé™åŒºåˆ«]ã€‚

ç¼–è¾‘ /etc/pam.d/polkit-1 æ–‡ä»¶

```conf

#%PAM-1.0

auth       sufficient   pam_python.so /lib64/security/howdy/pam.py  <--- æ·»åŠ åœ¨é¦–è¡Œ
auth       include      system-auth
account    include      system-auth
password   include      system-auth
session    include      system-auth

```

é…ç½®åï¼Œä¼šåœ¨è°ƒç”¨åˆ° polkit çš„åœºæ™¯ä¸‹ä½¿ç”¨äººè„¸è¯†åˆ«ã€‚å¦‚æœåŒæ­¥å¼¹å‡ºå¯†ç æ¡†ï¼Œæ­¤æ—¶äººè„¸è¯†åˆ«å·²ç»å¯ç”¨ï¼Œä¸éœ€è¦ä»»ä½•è¾“å…¥å³å¯å®ŒæˆéªŒè¯ï¼Œä¹Ÿæ— éœ€ç‚¹å‡»ç¡®è®¤å¯†ç çš„æŒ‰é’®ï¼Œå¦‚æœäººè„¸è¯†åˆ«å¤±è´¥ï¼Œæ‰ä¼šå›è½åˆ°ä½¿ç”¨å¯†ç éªŒè¯ã€‚

6ã€æ‰‹å·¥è°ƒæ•´å‡ ä¸ªé€‰é¡¹ä¿æŠ¤ä½ çš„éšç§

> é¿å…è‡ªåŠ¨æ‹ç…§å­˜æ¡£

ç¼–è¾‘ /lib64/security/howdy/config.ini

    https://wiki.archlinux.org/title/Howdy#Secure_the_installation

    [snapshots]
    capture_failed = false   <----- è¿™ä¸ªé…Œæƒ…æ”¾å¼€
    capture_successful = false

    æ¯æ¬¡è¢«è°ƒç”¨æ—¶æ‹çš„ç…§ç‰‡é»˜è®¤ä¼šæ‰”åˆ° /lib64/security/howdy/snapshots/ ç›®å½•

> Intel æ˜¾å¡é¿å…é¢‘ç¹æ‰“å° MFX æ¶ˆæ¯

å‘½ä»¤è¡Œä¸‹ä½¿ç”¨ï¼Œé»˜è®¤åœ¨ sudo è®¤è¯æˆåŠŸåæ€»æ˜¯æ‰“å°è°ƒè¯•ä¿¡æ¯ï¼Œå¤ªçƒ¦äººã€‚

ç¼–è¾‘ /etc/profile.d/howdy.sh å’Œ /etc/profile.d/howdy.csh æ–‡ä»¶ï¼ŒæŸ¥æ‰¾å¦‚ä¸‹å†…å®¹

    OPENCV_VIDEOIO_PRIORITY_INTEL_MFX

å–æ¶ˆè¯¥è¯­å¥çš„æ³¨é‡Šå³å¯ã€‚

> è°ƒæ•´howdyçš„æƒé™

    æ–°ç‰ˆçš„ howdy ä¸éœ€è¦è°ƒæ•´ä»¥ä¸‹æƒé™äº†

å› ä¸ºå¤§å¤šæ•°æ¡Œé¢ç¯å¢ƒå†…ç½®çš„é”å±ç•Œé¢ï¼ˆä¸æ˜¯æŒ‡DMçš„ç™»å½•ç•Œé¢ï¼‰å¹¶æœªä»¥rootèº«ä»½è¿è¡Œï¼Œè€Œhowdyçš„æ–‡ä»¶åœ¨é»˜è®¤çŠ¶æ€ä¸‹å¯¹érootç”¨æˆ·ä¸å¯è¯»ï¼Œæ•…æ­¤æ—¶é”å±ç•Œé¢æ— æ³•å¯ç”¨äººè„¸è¯†åˆ«

    # sudo chmod -R 755 /lib/security/howdy/
    $ chmod o+x /lib64/security/howdy/dlib-data

7ã€æ·»åŠ ä¸€ä¸ªé¢éƒ¨æ¨¡å‹ï¼š

ç»™å½“å‰ç”¨æˆ·æ·»åŠ ä¸€ä¸ªé¢éƒ¨æ¨¡å‹ï¼Œä¼šæç¤ºç»™å‡ºæ ‡ç­¾ï¼Œå³ä¸€ä¸ªç”¨æˆ·å¯ä»¥æœ‰å¤šä¸ªé¢éƒ¨æ¨¡å‹ï¼Œå¤šæ¬¡è¿è¡Œå³å¯

    $ sudo howdy add

    å»ºè®®å¤šä¸ªï¼Œæ¯”å¦‚ noglassesã€withglasses

ç»™å…¶å®ƒç”¨æˆ·æ·»åŠ 

    # ä¸å»ºè®®ç»™ root ç”¨æˆ·æ·»åŠ é¢éƒ¨è¯†åˆ«ï¼Œç”¨ sudo su å°±æŒºå¥½ https://github.com/boltgolt/howdy/issues/180
    $ sudo howdy -U root add

å…¶å®ƒå‘½ä»¤

    $ sudo howdy list             æŸ¥çœ‹è®°å½•çš„é¢éƒ¨æ¨¡å‹åˆ—è¡¨
    $ sudo howdy remove face_ID   åˆ é™¤æŒ‡å®š ID çš„é¢éƒ¨è®°å½•
    $ sudo howdy clear            æ¸…é™¤æ‰€æœ‰é¢éƒ¨æ¨¡å‹è®°å½•
    $ sudo howdy disable 1        ç¦ç”¨ Howdy åŠŸèƒ½
    $ sudo howdy disable 0        å¯ç”¨ Howdy åŠŸèƒ½

8ã€éªŒè¯åŠŸèƒ½

    æµ‹è¯• sudo
    $ sudo whoami
    Identified face as xxx
    root

    æµ‹è¯•é”å±
    $ win + l

    æ¡Œé¢->è®¾ç½®-> Usersï¼Œç‚¹å‡» unlockï¼Œæµ‹è¯• Polkit è§£é”

    $ sudo reboot æµ‹è¯•ç™»å½•

### å¼€å¯æŒ‡çº¹ç™»å½•

    http://www.freedesktop.org/wiki/Software/fprint/fprintd

    https://help.gnome.org/users/gnome-help/stable/session-fingerprint.html.en

    https://wiki.archlinux.org/title/Fingerprint_GUI

    Debian å®‰è£… pam-auth-update åŒ…

        https://wiki.debian.org/SecurityManagement/fingerprint%20authentication

    https://winq.gitee.io/fprint-fedora/

    https://blog.csdn.net/weixin_31762925/article/details/116771481

ä»¥ä¸‹ä»…ä¾›å‚è€ƒï¼š

    Gnome æ¡Œé¢å·²ç»å†…ç½®è¯¥åŠŸèƒ½ï¼Œåœ¨ Settings -> User ä¸‹é¢çš„é€‰é¡¹æ‰¾æ‰¾ï¼Œåªè¦ä½ çš„æŒ‡çº¹è®¾å¤‡è¢«æ”¯æŒå³å¯æ­£å¸¸ä½¿ç”¨ï¼Œé»˜è®¤åªæ”¯æŒç³»ç»Ÿç™»å½•å’Œ sudo ç­‰é‰´æƒå…å¯†ç ã€‚

è·Ÿé¢éƒ¨è¯†åˆ«ç™»å½•ç›¸åŒï¼Œç›®å‰ä¸æ”¯æŒè§£é” gnome-keyringï¼Œè¯¦è§ç« èŠ‚ [Linux ä¸‹çš„ â€œWindows Helloâ€ äººè„¸è¯†åˆ«è®¤è¯ --- Howdy] é‡Œâ€œç›®å‰ä¸æ”¯æŒè§£é” gnome-keyringâ€çš„è§£é‡Šã€‚

> å¯ä»¥é¢å¤–å®‰è£… libpam-fprintd åŒ…ä»¥ä¿å­˜è§£é” gnome é’¥åŒ™ç¯çš„å¯†ç 

è¿˜å¯ä»¥é€‰æ‹©ç»™æ›´å¤šçš„ pam åŠŸèƒ½å¼€å¯æŒ‡çº¹éªŒè¯ï¼š

    $ sudo pam-auth-update

    [*] Fingerprint authentication

    [*] Unix authentication

    [*] Register user sessions in the systemd control group hierarchy

    [ ] Create home directory on login

    [*] GNOME Keyring Daemon â€“ Login keyring management

    [*] eCryptfs Key/Mount Management

    [*] Inheritable Capabilities Management

> å®‰è£… fprintd å®ç°æŒ‡çº¹ç™»å½•

å…ˆç¡®è®¤ä½ çš„å‘è¡Œç‰ˆæ˜¯å¦æ”¯æŒè¯¥æŒ‡çº¹è®¾å¤‡

    $ lsusb

æ ¹æ®è¾“å‡ºä¿¡æ¯åœ¨ç½‘å€ <https://fprint.freedesktop.org/supported-devices.html> æŸ¥è¯¢ã€‚

ç¡®è®¤ç³»ç»Ÿä¸Šéœ€è¦æœ‰è½¯ä»¶åŒ… fprintd

    # sudo apt install fprintd libpam-fprintd
    $ sudo dnf install fprintd fprintd-pam

ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ·»åŠ æŒ‡å®šæ‰‹æŒ‡çš„æŒ‡çº¹,ä¸€å…±è¦æ±‚æ‰«æäº”æ¬¡

    $ sudo fprintd-enroll ç”¨æˆ·å
    Using device /net/reactivated/Fprint/Device/0
    Enrolling right-index-finger finger.
    Enroll result: enroll-stage-passed
    Enroll result: enroll-stage-passed
    Enroll result: enroll-stage-passed
    Enroll result: enroll-stage-passed
    Enroll result: enroll-stage-passed
    Enroll result: enroll-completed

åˆ—å‡ºæœ¬æœºæŒ‡å®šç”¨æˆ·ä¸‹å·²æ³¨å†Œçš„æŒ‡çº¹ä¿¡æ¯

    $ sudo fprintd-list winq

éªŒè¯æ‚¨æœ¬æœºåˆšæ³¨å†Œè¿‡çš„æŒ‡çº¹ä¿¡æ¯æ˜¯å¦æ­£ç¡®

    $ sudo fprintd-verify winq
    Using device /net/reactivated/Fprint/Device/0
    Listing enrolled fingers:
    - #0: right-index-finger
    Verify started!
    Verifying: right-index-finger
    Verify result: verify-match (done)

### Scrcpy --- åœ¨ Linux æ¡Œé¢æ˜¾ç¤ºå’Œæ§åˆ¶ Android è®¾å¤‡

Scrcpy å¯ä»¥é€šè¿‡ Linux æ¡Œé¢æ˜¾ç¤ºå’Œæ§åˆ¶ Android è®¾å¤‡ï¼Œç±»ä¼¼ Samsung Dex çš„ä½¿ç”¨æ–¹å¼ï¼Œç”¨ç”µè„‘ç©æ‰‹æœºï¼š

    https://github.com/Genymobile/scrcpy

    https://zhuanlan.zhihu.com/p/606448877

Scrcpy æ”¯æŒ Windows/Linux/macOS å¤šä¸ªå¹³å°ï¼Œéœ€è¦ä½ çš„æ‰‹æœºæ‰“å¼€ usb è°ƒè¯•æ¨¡å¼ï¼Œè¿™æ ·  Scrcpy æ‰å¯ä»¥æ“ä½œä½ çš„æ‰‹æœºå±å¹•ã€‚

å¦‚æœæ„Ÿè§‰ä¸å®‰å…¨ï¼Œåªæ˜¯éœ€è¦åœ¨æ¡Œé¢æ“ä½œä½ çš„æ‰‹æœºçš„åŸºæœ¬åŠŸèƒ½ï¼Œå®‰è£… gnome æ‰©å±• GSConnect å°±å¤Ÿäº†ã€‚å®ƒå¯ä»¥æ“ä½œå±€åŸŸç½‘è”ç½‘ï¼ˆWIFIï¼‰çš„ä½ çš„æ‰‹æœºï¼Œæ”¯æŒä¼ é€æ–‡ä»¶ã€å‘é€çŸ­ä¿¡ã€æŸ¥çœ‹é€šçŸ¥ç­‰æ“ä½œï¼Œè¯¦è§ä¸Šé¢ç« èŠ‚ [ä½¿ç”¨ gnome æ‰©å±•]ã€‚

è¿˜å¯ä»¥å®‰è£…å®‰å“è™šæ‹Ÿæœºï¼Œå®ç°åœ¨ Linux æ¡Œé¢è¿è¡Œå®‰å“ apkï¼Œè¯¦è§ç« èŠ‚ [å®‰å“è™šæ‹ŸåŒ–](virtualization think)ã€‚

å®‰è£…

    Debian ç³»å¯ä»¥ä»å®˜æ–¹å­˜å‚¨åº“å®‰è£… scrcpy

        $ sudo apt install scrcpy

    Fedora ç³»æš‚æ—¶è¿˜æœªæ”¶å½•åˆ°å®˜æ–¹å­˜å‚¨åº“ï¼Œå¯ä»¥ä» Cool Other Packages Repository (COPR)å®‰è£…å®ƒï¼š

        $ sudo dnf copr enable zeno/scrcpy
        $ sudo dnf install scrcpy

æœ‰ä¸¤ç§è¿æ¥æ–¹å¼ï¼š

ä¸€ã€åœ¨ Linux ä¸­é€šè¿‡ USB è¿æ¥åˆ° Android è®¾å¤‡

å®‰è£…å®Œæˆåï¼Œè¯·è®°å¾—å¦‚å‰æ‰€è¿°åœ¨æ‚¨çš„ Android è®¾å¤‡ä¸­å¯ç”¨USBè°ƒè¯•ï¼ˆè½¬åˆ°è®¾ç½®=>å¼€å‘äººå‘˜â€“> é€‰é¡¹=>USB è°ƒè¯•ï¼‰ï¼Œç„¶åé€šè¿‡ USB æ•°æ®çº¿å°†æ‚¨çš„è®¾å¤‡è¿æ¥åˆ° Linux å°å¼ç”µè„‘ã€‚

åœ¨ Linux æ¡Œé¢ä¸‹çš„å‘½ä»¤è¡Œè¿è¡Œï¼š

    $ scrcpy

æ‰‹æœºä¸Šä¼šå¼¹å‡ºçª—å£ä»¥è¯·æ±‚æˆæƒä»¥å…è®¸ä»è®¡ç®—æœºè¿›è¡Œ USB è°ƒè¯•ï¼Œç„¶åé€‰æ‹©å…è®¸ç»§ç»­ã€‚

ç„¶åå†æ¬¡é‡æ–°è¿è¡Œ `scrcpy`ï¼Œä¼šçœ‹åˆ°å¼¹å‡ºä¸€ä¸ªçª—å£ï¼Œæ˜¾ç¤ºæ‚¨è®¾å¤‡çš„æ´»åŠ¨å±å¹•ï¼Œç§° â€œé•œåƒâ€ï¼Œç”¨é¼ æ ‡æ¨¡ä»¿ä½ çš„æ‰‹æŒ‡æ“ä½œå³å¯ã€‚

å¦‚æœè¿è¡Œ scrcpy æç¤º â€œlibopenh264.so.7 is missing, openh264 support will be disabledâ€ ï¼Œè¯´æ˜ä½ çš„ Linux æ¡Œé¢ç¯å¢ƒéœ€è¦å®‰è£…å®Œå…¨ç‰ˆæœ¬çš„ ffmpegï¼Œè¯¦è§ç« èŠ‚ [å®‰è£… full ffmpeg](init_a_server think)ã€‚

äºŒã€åœ¨ Linux æ¡Œé¢ä¸­é€šè¿‡ Wifi è¿æ¥åˆ° Android è®¾å¤‡

é¦–å…ˆï¼Œåœ¨æ‚¨çš„è®¡ç®—æœºä¸Šå®‰è£… adb å‘½ä»¤è¡Œå·¥å…·ï¼Œè¿™æ˜¯å®‰å“æ“ä½œç³»ç»Ÿçš„å¼€å‘å·¥å…·ã€‚å¦‚æœæ‚¨å·²ç»å®‰è£…äº†adbå·¥å…·ï¼Œè¯·è·³è¿‡ä¸‹é¢çš„å®‰è£…æ­¥éª¤ï¼š

    # åœ¨Debianã€Ubuntu å’Œ Mintä¸Š
    $ sudo apt install adb

    # åœ¨RHEL/CentOS/Fedoraå’ŒRocky Linux/AlmaLinuxä¸Š
    $ sudo yum install adb

    # åœ¨Arch Linuxä¸Š
    $ sudo pacman -S adb

åœ¨æ‚¨çš„è®¡ç®—æœºä¸Šå®‰è£… adb å·¥å…·åï¼Œå°†æ‚¨çš„ Android è®¾å¤‡å’Œè®¡ç®—æœºè¿æ¥åˆ°å…¬å…± Wi-Fi ç½‘ç»œã€‚ç„¶åä½¿ç”¨ USB æ•°æ®çº¿å°† Android è®¾å¤‡è¿æ¥åˆ°è®¡ç®—æœºã€‚

æ¥ä¸‹æ¥ï¼Œä»ç›®æ ‡è®¾å¤‡ä¸Šæ–­å¼€USBç”µç¼†å¹¶æ‰¾åˆ°Androidè®¾å¤‡çš„ IP åœ°å€ï¼ˆè½¬åˆ°è®¾ç½® â€“> è¿æ¥ â€“> Wi-Fi â€“> Wi-Fi åç§° â€“> ç‚¹å‡»å…¶è®¾ç½®ï¼‰æˆ–è¿è¡Œä»¥ä¸‹å‘½ä»¤ä»¥æŸ¥çœ‹è®¾å¤‡IPåœ°å€ï¼š

    $ adb shell ip route

æŸ¥æ‰¾ Android è®¾å¤‡ IP åœ°å€

ç„¶åé€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤å°†ç›®æ ‡Androidè®¾å¤‡è®¾ç½®ä¸ºåœ¨ç«¯å£5555ä¸Šä¾¦å¬TCP/IPè¿æ¥ï¼ˆæ£€æŸ¥è®¾å¤‡ä¸Šçš„ä»»ä½•æç¤ºï¼‰ï¼š

    $ adb tcpip 5555

æ¥ä¸‹æ¥ï¼Œæ–­å¼€USBç”µçº¿å¹¶ä½¿ç”¨å…¶ IP åœ°å€è¿æ¥ç›®æ ‡è®¾å¤‡ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

    $ adb connect 192.168.1.4:5555

ç„¶åå°±å¯ä»¥è¿è¡Œ scrcpy å®ç°åœ¨ Linux æ¡Œé¢ä¸Šé•œåƒ Android è®¾å¤‡çš„å±å¹•ã€‚

ä»ç»ˆç«¯è¿è¡Œä»¥ä¸‹å‘½ä»¤ä¹Ÿå¯ä»¥å¯åŠ¨scrcpyï¼š

        $ scrcpy

å¦‚æœå‘½ä»¤æˆåŠŸè¿è¡Œï¼Œå°†æ‰“å¼€ä¸€ä¸ªçª—å£ï¼Œæ˜¾ç¤ºæ‚¨è®¾å¤‡çš„æ´»åŠ¨å±å¹•ï¼Œç§° â€œé•œåƒâ€ã€‚

å¦‚æœéœ€è¦è¦æ§åˆ¶é•œåƒçš„ Android å±å¹•çš„å®½åº¦å’Œé«˜åº¦ï¼Œè¯·ä½¿ç”¨å‘½ä»¤è¡Œ --max-sizeæˆ–-m å¼€å…³ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

    # scrcpy --max-size=1024
    $ scrcpy -m 1024

ä½¿ç”¨é”®ç›˜å’Œé¼ æ ‡æ§åˆ¶æŸäº› Android è®¾çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·è½¬åˆ°scrcpy Github å­˜å‚¨åº“æŸ¥çœ‹æ–‡æ¡£ï¼š

    https://github.com/Genymobile/scrcpy#user-documentation

ç®€å•æ¥è¯´ï¼š

    é¼ æ ‡å·¦é”®ç›¸å½“äºå•æŒ‡æ“ä½œï¼Œå³é”®æ˜¯è¿”å›é”®ï¼Œæ¯å±æ—¶ä¼šç‚¹äº®æ‰‹æœºå±å¹•ã€‚

    å¦‚æœæ“ä½œä¸­å‡ºç°éœ€è¦ç”¨æˆ·åœ¨æ‰‹æœºä¸Šæ“ä½œçš„å†…å®¹ï¼Œscrcpy ä¼šé»‘å±ï¼ŒæŒ‰ esc å¯å–æ¶ˆã€‚

ä¸‹è¡¨ä¸­çš„ MOD è¡¨ç¤ºä¿®é¥°é”®ï¼Œåœ¨ Windows ä¸­å¯¹åº” win æˆ– alt é”®ï¼Œåœ¨ Macä¸­å¯¹åº” cmd é”®ï¼š

    å¿«æ·é”®                      å®æ–½çš„åŠ¨ä½œ

    å³é”®ç‚¹å‡»                ç­‰åŒäºç‚¹äº®å±å¹•
    Ctrl + ç‚¹å‡»å’Œç§»åŠ¨        ç›¸å½“äºå¤šæŒ‡æåˆåŠ¨ä½œ

    MOD + f                åˆ‡æ¢åˆ°å…¨å± / å–æ¶ˆå…¨å±
    MOD + å·¦                å¾€å·¦æ—‹è½¬å±å¹•
    MOD + å³                å¾€å³æ—‹è½¬å±å¹•
    MOD + g                é‡ç½®å±å¹•å°ºå¯¸åˆ° åƒç´ æ¯”1:1ï¼ˆä¸€èˆ¬éƒ½æ˜¯å˜å¾—ç¡•å¤§ï¼‰
    MOD + w                é‡ç½®å±å¹•å°ºå¯¸æ¶ˆé™¤é»‘è‰²è¾¹æ¡†

    MOD + h                ç­‰åŒäº home é”®
    MOD + b                ç­‰åŒäº è¿”å› é”®
    MOD + s                ç­‰åŒäºåˆ‡æ¢appæ“ä½œ

    MOD + m                å¯¹åº”è§£é”å±çš„æŒ‰é”®ï¼Œå¦‚æœæ˜¯é”å±çš„è¯ï¼Œä»…ç‚¹äº®å±å¹•

    MOD + p                ç­‰åŒäºæŒ‰ç”µæºé”®

    MOD + ä¸‹                å‡å°‘éŸ³é‡
    MOD + ä¸Š                å¢åŠ éŸ³é‡

    MOD + o                æŠŠè®¾å¤‡å±å¹•å…³é—­ä½†ä¿æŒé•œåƒåŒæ­¥
    MOD + Shift + o        ç‚¹äº®è®¾å¤‡å±å¹•
    MOD + r                æ—‹è½¬å±å¹•ï¼ˆæµ‹è¯•å¥½åƒä¸å¥½ç”¨ï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯å¿«æ·é”®å†²çªï¼‰
    MOD + n                æ‰“å¼€æ¶ˆæ¯é¢æ¿
    MOD + n + n            åŒå‡»nï¼Œæ‰“å¼€é¡¶éƒ¨è®¾ç½®æ 
    MOD + shift + n        æ”¶èµ·é¢æ¿
    MOD + c                åŒæ­¥å¤åˆ¶åˆ°ç”µè„‘å‰ªè´´æ¿
    MOD + x                åŒæ­¥å‰ªè´´åˆ°ç”µè„‘å‰ªè´´æ¿
    MOD + v                åŒæ­¥ç²˜è´´ç”µè„‘å‰ªè´´æ¿çš„å†…å®¹ï¼ˆpc->æ‰‹æœºæˆ–æ‰‹æœº->pcå‡å¯ï¼‰
    MOD + i                å¯ç”¨æˆ–ç¦ç”¨FPSè®¡æ•°

    å®‰è£…APK                 æ‹–æ‹½APKæ–‡ä»¶åˆ°çª—å£
    æ¨é€æ–‡ä»¶åˆ°æ‰‹æœº            æ‹–æ‹½éAPKæ–‡ä»¶åˆ°çª—å£ï¼Œé»˜è®¤æ”¾åˆ° /sdcard/Movies ç›®å½•ä¸‹

ä¿®é¥°é”®å¯ä»¥åœ¨å‘½ä»¤è¡Œå‚æ•°è¿›è¡Œä¿®æ”¹ï¼Œå¯é€‰çš„é”®æœ‰ lctrlã€rctrlã€laltã€raltã€lsuper å’Œ rsuper

    $ scrcpy --shortcut-mod=lalt

### steamã€wine åŠ Moonlight/Sunshine ä¸²æµ

åœ¨ Linux ä¸Šè¿è¡Œ Windows ç¨‹åºçš„å‡ ç§æ–¹æ³•

    https://itsfoss.com/use-windows-applications-linux/

æœ€æ–¹ä¾¿çš„æ˜¯å®‰è£…ä½¿ç”¨ steam æ¸¸æˆå¹³å°ï¼Œä»ä¸‹è½½åˆ°å®‰è£…åˆ°è¿è¡Œï¼Œä¸ç®¡æ˜¯ç© Windows æ¸¸æˆè¿˜æ˜¯ä¸²æµåˆ°ç”µè§†ï¼Œç»Ÿç»Ÿæå®šäº†ã€‚

    https://www.linuxcapable.com/how-to-install-steam-on-fedora-linux/

å¦‚æœä½ æ˜¯ä¸ªæ¸¸æˆå‘çƒ§å‹ï¼Œåœ¨å¤šä¸ªå¹³å°æœ‰ä¼—å¤šæ¸¸æˆï¼Œè¿˜å¯ä»¥å®‰è£…ä¸ª lutris å¹³å°ï¼ŒæŠŠä½ çš„å„ä¸ªæ¸¸æˆå¹³å°å’Œæ¨¡æ‹Ÿå™¨éƒ½ç»¼åˆèµ·æ¥äº†

    https://lutris.net/about

æˆ–è€…ç›´æ¥å®‰è£…ç¤¾åŒºé¡¹ç›® Nobaraï¼Œé¢„è£…äº†æ¸¸æˆå®¢æˆ·ç«¯ Lutrisã€Steamã€OBS Studio å’Œ Kdenlive

        https://nobaraproject.org/

        https://zhuanlan.zhihu.com/p/469095571
            https://itsfoss.com/linux-gaming-distributions/

å®‰è£… mangohud çœ‹ fps

    $ sudo dnf install mangohud

å½“å‰çš„ openGL é©±åŠ¨ç‰ˆæœ¬

    $ glxinfo -B
    name of display: :0
    display: :0  screen: 0
    direct rendering: Yes
    Extended renderer info (GLX_MESA_query_renderer):
        Vendor: Intel (0x8086)
        Device: Mesa Intel(R) HD Graphics 610
        Version: 23.1.6
        Accelerated: yes
        Video memory: 64000MB
        Unified memory: yes
        Preferred profile: core (0x1)
        Max core profile version: 4.6
        Max compat profile version: 4.6
        Max GLES1 profile version: 1.1
        Max GLES[23] profile version: 3.2
    OpenGL vendor string: Intel
    OpenGL renderer string: Mesa Intel(R) HD Graphics 610
    OpenGL core profile version string: 4.6 (Core Profile) Mesa 23.1.6
    OpenGL core profile shading language version string: 4.60
    OpenGL core profile context flags: (none)
    OpenGL core profile profile mask: core profile

    OpenGL version string: 4.6 (Compatibility Profile) Mesa 23.1.6
    OpenGL shading language version string: 4.60
    OpenGL context flags: (none)
    OpenGL profile mask: compatibility profile

    OpenGL ES profile version string: OpenGL ES 3.2 Mesa 23.1.6
    OpenGL ES profile shading language version string: OpenGL ES GLSL ES 3.20

#### Steam on Linuxï¼šsteam play / steam link

Steam å±äºå•†ä¸šé—­æºè½¯ä»¶ï¼Œä½†æ˜¯å„å¤§å‘è¡Œç‰ˆéƒ½æä¾›äº†å®‰è£… steam çš„æ–¹å¼

    Steam/GOG.com/gameshub.com
        https://itsfoss.com/linux-gaming-guide/

    åœ¨ FreeBSD å®‰è£…
        https://ivonblog.com/posts/install-steam-proton-on-freebsd/

    ç© doom eternal
        https://www.addictivetips.com/ubuntu-linux-tips/doom-eternal-on-linux

ä»æ¡Œé¢çš„ Gnome â€œè½¯ä»¶(Software)â€ / Kde â€œå‘ç°(Discoery)â€ é‡Œæœç´¢ steamï¼Œä»å‘è¡Œç‰ˆå†…ç½®çš„ç¬¬ä¸‰æ–¹å­˜å‚¨åº“å®‰è£… steamï¼Œä½¿ç”¨å‘½ä»¤è¡Œ `dnf install steam` å®‰è£…ä¹Ÿå¯ä»¥ã€‚æ¨èå®‰è£… flatpak ç‰ˆçš„ï¼Œå®¹å™¨éš”ç¦»çš„å®‰å…¨æ€§æ›´å¥½ã€‚

##### Steam Playï¼ˆåŸprotonï¼‰ ç© Windows éŠæˆ²

    https://itsfoss.com/steam-play/

    https://ivonblog.com/posts/install-steam-on-linux/

    https://fedoramagazine.org/set-up-fedora-silverblue-gaming-station/

Steam Play é€™å€‹è¨ˆç•«è®“ç©å®¶åœ¨è³¼è²·éŠæˆ²å¾Œèƒ½æ–¼ Linuxã€Windowsã€macOS éŠç©ï¼ŒèƒŒå¾Œä½¿ç”¨çš„æŠ€è¡“æ˜¯  "Steam Proton"ï¼ŒåŸºæ–¼ Wine ç ”ç™¼çš„è½‰è­¯å±¤ï¼ŒValve è‡ªå®¶çš„ Steam Deck æŒæ©Ÿä¹Ÿæœ‰ç”¨åˆ° Steam Proton æŠ€è¡“ã€‚

è®¾ç½®ï¼šé»é¸ Steam å·¦ä¸Šè§’ â†’ Settings -> Compatibilityï¼Œå‹¾é€‰æ‰€æœ‰é€‰é¡¹ï¼Œçœ‹æ¥è¿™ä¸ªæŠ€æœ¯è¦éšå…¥åº•å±‚è‡ªåŠ¨å¯ç”¨ï¼Œä¸å†éœ€è¦ç”¨æˆ·å¹²é¢„

    ä¹‹å‰ï¼šé»é¸ Steam å·¦ä¸Šè§’ â†’ Steam Playï¼Œå‹¾é¸ ã€Œç‚ºæ‰€æœ‰ç”¢å“å•Ÿç”¨ Steam Playã€ï¼Œä¹‹å¾Œé¸æ“‡ä¸‹è¼‰æœ€æ–°çš„ Protonï¼Œå†æŒ‰ä¸‹ç¢ºå®šã€‚é»é¸ Steam å·¦ä¸Šè§’ â†’ é›¢é–‹ Steamï¼Œé‡æ–°å•Ÿå‹• Steamã€‚

ç„¶å¾Œä¸‹è¼‰ä¸€ä¸ª Windows å¹³å°çš„éŠæˆ²ï¼Œå®ƒå°±æœƒä¸€ä½µå®‰è£ Proton ç­‰ç›¸å…³å…¼å®¹å±‚çš„åŒ…ã€‚

æ–¼æ˜¯ä½ å°±å¯ä»¥åœ¨ Linux ä¸Šç© Windows éŠæˆ²äº†ï¼

ä½¿ç”¨ Proton å®‰è£…é Steam æ¸¸æˆ

    ç®€çŸ­çš„å›ç­”æ˜¯ï¼Œæ˜¯çš„ï¼Œä½ å¯ä»¥ã€‚Steam åº”ç”¨ç¨‹åºå…è®¸æ‚¨å°†é Steam æ¸¸æˆæ·»åŠ åˆ°åº“ä¸­ã€‚æ‚¨éœ€è¦åšçš„å°±æ˜¯æ‰“å¼€ Steam > æ·»åŠ æ¸¸æˆï¼ˆåœ¨åº”ç”¨ç¨‹åºçš„å·¦ä¸‹è§’ï¼‰> æ·»åŠ é Steam æ¸¸æˆ > å¯¼èˆªåˆ°æ‚¨çš„æ¸¸æˆçš„ .exe æ–‡ä»¶ > æ·»åŠ é€‰å®šçš„ç¨‹åºã€‚

ç”¨ Flatpak è£ Steam çš„è©±ï¼ŒéŠæˆ²æ”¶è—åº«ä½æ–¼ ~/.var/app/com.valvesoftware.Steam/data/Steam/steamapps/ã€‚

ç‚ºäº†å®‰å…¨æ€§è€ƒé‡ï¼ŒFlatpak ç‰ˆçš„ Steam é è¨­åªèƒ½å­˜å–ä½¿ç”¨è€…çš„ $HOME ç›®å½•ï¼Œç„¡æ³•å­˜å–å…¶ä»–ç¡¬ç¢Ÿã€‚

###### ç»™ steam å¢åŠ é¢å¤–çš„å­˜å‚¨ç©ºé—´

    https://github.com/flathub/com.valvesoftware.Steam/wiki#i-want-to-add-external-disk-for-steam-libraries

å¦‚æœä½ æƒ³ç§»å‹• Steam æ”¶è—åº«ï¼Œæˆ–æ˜¯æ²¿ç”¨èˆŠæœ‰çš„ Steam æ”¶è—åº«ï¼Œå°±å¾—é–‹æ”¾å­˜å–é›»è…¦ç‰¹å®šç›®éŒ„çš„æ¬Šé™ã€‚

ä¾‹å¦‚ï¼Œä½ çš„ç¬¬äºŒå€‹ç¡¬ç¢Ÿå·²ç¶“æœ‰ Steam é€™å€‹ç›®éŒ„ï¼Œè€Œå®ƒçš„å®Œæ•´è·¯å¾‘æ˜¯ /run/media/user/SSD2/Steam

ç›®å‰ steam å·²ç»æ”¯æŒ flatpake é—¨æˆ·è®¿é—®ç”³è¯·ç›®å½•äº†ï¼Œç›´æ¥æ“ä½œé€‰é¡¹è®¾ç½®å³å¯ï¼šé»é¸ Steamå·¦ä¸Šè§’ â†’ é›¢é–‹ Steamã€‚ç„¶å¾Œé‡æ–°å•Ÿå‹• Steamï¼Œåœ¨å·¦ä¸Šè§’èœå•é€‰ï¼šè¨­å®šï¼Œåœ¨å¼¹å‡ºçª—å£çš„å·¦ä¾§å¯¼èˆªé¡µé¢é€‰æ‹©æ¡ç›®ï¼šå­˜å‚¨(Storage)ï¼Œåœ¨å³ä¾§é¡µé¢ä¸Šéƒ¨é»˜è®¤çš„ä¸‹æ‹‰åˆ—è¡¨ç‚¹å‡» â€œAdd Driveâ€ï¼Œç„¶åè¾“å…¥ä½ çš„æ–°å­˜å‚¨ç©ºé—´çš„è·¯å¾„ã€‚ç„¶åå†æ¬¡ç‚¹å‡»ä¸‹æ‹‰åˆ—è¡¨ï¼Œé€‰æ‹©å·²ç»æˆä¸ºæ¡ç›®çš„æ–°è·¯å¾„ï¼Œä¸‹é¢ä¼šåˆ—å‡ºæ–°è·¯å¾„çš„è¯¦æƒ…ï¼Œç‚¹å‡»å³ä¾§çš„ä¸‰ä¸ªç‚¹çš„æŒ‰é’®ï¼Œé€‰æ‹©â€œMake Defaultâ€ï¼Œè¿™æ ·ä»¥åå®‰è£…çš„æ¸¸æˆéƒ½ä¼šä¿å­˜åˆ°è¿™é‡Œäº†ã€‚

    åŸæ¥ä¸æ”¯æŒçš„æ—¶å€™ï¼Œéœ€è¦å…ˆä½¿ç”¨ override çš„ç²—æš´æ–¹å¼å¼€å¯æƒé™ï¼š

        ä½¿ç”¨ flatpak override æŒ‡ä»¤é–‹æ”¾å­˜å–æ¬Šé™ï¼š

            $ flatpak override com.valvesoftware.Steam --user --filesystem="/path/to/mountpoint/"

        æˆ–è€…ä½¿ç”¨å›¾å½¢åŒ–çš„ flatpak è½¯ä»¶æƒé™å·¥å…· flatsealï¼šé€‰ Steam -> "Filesystem" section -> Other files -> Enter /path/to/mountpoint/

    override ç›¸å…³çŸ¥è¯†å‚è§ [Flatpak ç›´æ¥è®¿é—®æ–‡ä»¶ç³»ç»Ÿ](init_a_server)ã€‚

å¦‚æœæŠ¥é”™æç¤ºæ— æ³•è®¿é—®ï¼Œéœ€è¦ç”¨å‘½ä»¤æ·»åŠ 

    https://github.com/ValveSoftware/steam-for-linux/issues/9640#issuecomment-1887854957

    Open with

        $ steam steam://open/console

        Flatpak: use `flatseal` open host filesystem first then run `flatpak run com.valvesoftware.Steam steam://open/console`

    Then type inï¼š

        library_folder_add <path>

##### Steam Link ç”¨å¦ä¸€éƒ¨é›»è…¦ä¸²æµéŠç© Linux é›»è…¦çš„ Steam éŠæˆ²

    https://store.steampowered.com/app/353380/Steam_Link

    https://help.steampowered.com/en/faqs/view/6424-467A-31D9-C6CB

    https://behind-the-scenes.net/running-steam-link-on-a-raspberry-pi/

å‡è®¾æœ‰ç‹¬ç«‹æ˜¾å¡çš„è®¡ç®—æœºä½œä¸ºæœåŠ¡ç«¯ï¼Œå®‰è£… steamï¼Œè®¾ç½®ä¸²æµåˆ°å¦ä¸€å°è®¾å¤‡ä¸Šç©æ¸¸æˆï¼Œæ¯”å¦‚æ™ºèƒ½ç”µè§†ã€æœºé¡¶ç›’ã€æ ‘è“æ´¾ã€æ‰‹æœºç­‰ã€‚

1ã€æœåŠ¡ç«¯ç”µè„‘ï¼Œå®‰è£… steam å¹¶å¯åŠ¨ï¼Œç™»å½• steam è´¦æˆ·ã€‚

2ã€å®¢æˆ·ç«¯æ ‘è“æ´¾å®‰è£… steamlink

    $ sudo apt install steamlink

Raspbian Bullseyeï¼ˆæ’°å†™æœ¬æ–‡æ—¶çš„æœ€æ–°ç‰ˆæœ¬ï¼‰ä¸èµ·ä½œç”¨ï¼ŒRaspbian Busterï¼ˆ32ä½ï¼‰çš„å®Œæ•´ç‰ˆæœ¬å·¥ä½œæ­£å¸¸ã€‚

å®¢æˆ·ç«¯ Linux éœ€è¦æœ‰æ¡Œé¢ç¯å¢ƒï¼Œå¦‚æœæ˜¯ X windows ç¯å¢ƒç”¨ ctl + alt + F1 åœ¨æ§åˆ¶å°æ‰§è¡Œå‘½ä»¤ `steamlink`

å¦‚æœæ²¡æœ‰æ¡Œé¢ç¯å¢ƒï¼Œæ¯”å¦‚ä½ çš„æ ‘è“æ´¾ä¸Šè¿è¡Œçš„ Raspbian ç‰ˆæœ¬æ˜¯ â€œRaspbian Stretch Liteâ€ è¿™æ ·çš„çº¯å‘½ä»¤è¡Œç‰ˆæœ¬ï¼Œé‚£ä¹ˆä½ éœ€è¦å®‰è£…ä¸€ä¸ªé¢å¤–çš„åŒ… â€œzenityâ€ï¼Œä»¥ä½¿ Steam Link è½¯ä»¶æ­£å¸¸å·¥ä½œ

    $ sudo apt install zenity

    zenity çš„ä½¿ç”¨è¯¦è§ç« èŠ‚ [å¯ä¸å‘½ä»¤è¡Œäº¤äº’çš„å›¾å½¢ç•Œé¢ zenity]

3ã€è¿æ¥æœåŠ¡ç«¯ç”µè„‘å’Œä¸²æµè®¾å¤‡ï¼ˆå®¢æˆ·ç«¯ï¼‰

åœ¨æœåŠ¡ç«¯ç”µè„‘è¿è¡Œ steamï¼Œç­‰å¾…å®¢æˆ·ç«¯ã€‚

åœ¨å®¢æˆ·ç«¯ä¸²æµè®¾å¤‡ä¸Šè¿è¡Œ steamlinkï¼Œå¯ä»¥ç™»å½•ä½ çš„ steam è´¦æˆ·

    å¦‚æœæ˜¯å±€åŸŸç½‘ç¯å¢ƒï¼Œä¸éœ€è¦ç™»å½• steam å°±ä¼šè‡ªåŠ¨å‘ç°ä½ çš„æœåŠ¡ç«¯ï¼Œç‚¹é€‰åä¼šæç¤ºä¸€ä¸ª â€œæˆæƒç â€ï¼Œéœ€è¦åœ¨æœåŠ¡ç«¯è¾“å…¥è¯¥ pin ç 

        å¦‚æœæ²¡æœ‰å‡ºç°ä½ çš„æœåŠ¡ç«¯ç”µè„‘ï¼Œè¯·ç¡®ä¿ä½ åœ¨Steamä¸Šå¯ç”¨äº† â€œå®¶åº­æµåª’ä½“â€ï¼Œå¹¶ä¸”åœ¨æœåŠ¡ç«¯ç”µè„‘ä¸Šæ­£åœ¨è¿è¡Œ Steamã€‚åœ¨æœåŠ¡ç«¯ç”µè„‘ä¸Šæ‰§è¡Œ Steam åï¼Œå¯ç”¨ â€œå®¶åº­æµåª’ä½“â€æŒ‰ â€œé‡æ–°æ‰«æâ€ã€‚

åœ¨æœåŠ¡ç«¯ç”µè„‘ï¼Œæ‰“å¼€ steam çš„å·¦ä¸Šè§’ -> è®¾ç½® -> è¿œç¨‹ç•…ç©ï¼ˆPlayï¼‰ï¼Œæ·»åŠ è¯¥æˆæƒç å³æ·»åŠ äº†è¿™ä¸ªè®¾å¤‡ã€‚ç°åœ¨çš„ç‰ˆæœ¬ä¼šè‡ªåŠ¨å¼¹å‡ºä¸€ä¸ªçª—å£ï¼Œæç¤ºæœ‰è®¾å¤‡ç”³è¯·è¿æ¥ï¼Œè¾“å…¥ä¸Šé¢å®¢æˆ·ç«¯æç¤ºçš„ pin ç å³å¯ã€‚

é…ç½®æ¸¸æˆæ§åˆ¶å™¨

steamlink æ”¯æŒå¾ˆå¤šæ¸¸æˆæ§åˆ¶å™¨ï¼Œæ ‘è“æ´¾æ”¯æŒçš„æ¸¸æˆæ§åˆ¶å™¨å‚è§ä¸‹é¢

    https://behind-the-scenes.net/raspberry-pi-compatible-game-controllers/

ä¸»è¦å°±æ˜¯æŠŠæ§åˆ¶å™¨å¯¹åº”çš„æŒ‰é’®è®¾ç½®å¥½åŠŸèƒ½å³å¯ã€‚

4ã€ç©æ¸¸æˆæ’­è§†é¢‘

åœ¨å®¢æˆ·ç«¯çš„ Steam link é€‰æ‹©ä½ çš„æœåŠ¡ç«¯ç”µè„‘ï¼Œç‚¹å‡»é€‰æ‹© Play å³ä¼šå‡ºç°æ–°çš„é¡µé¢ï¼Œå¯é€‰æ‹©æ‰§è¡ŒæœåŠ¡ç«¯çš„ steam ä¸Šçš„æ¸¸æˆäº†

    å®¢æˆ·ç«¯ Steam link è¦é€€å‡ºä¸²æµé•¿æŒ‰ Esc å³å¯ï¼Œå†æ¬¡æŒ‰ esc åˆ™é€€å‡º Steam linkï¼Œè¿”å›åˆ°å‘½ä»¤è¡Œã€‚

è‹¥è¦åœ¨å‡ºé—¨åœ¨å¤–ç©æ¸¸æˆï¼Œéœ€è¦ä½¿ç”µè„‘ä¿æŒæ‰“å¼€å’Œè”æœºçŠ¶æ€ï¼Œç”µè„‘å¯ä»¥å¤„äºç¡çœ æ¨¡å¼ï¼Œåªè¦æå‰åœ¨å®¢æˆ·ç«¯è®¾å¤‡ä¸Šé…ç½®è¿‡ï¼Œå¯ä»¥é€‰æ‹©å”¤é†’ã€‚

å¦‚æœè¦æ’­æ”¾å½±éŸ³ï¼Œåœ¨æœåŠ¡ç«¯çš„ steam é€‰æ‹© â€œé steam æ¸¸æˆâ€ï¼Œç„¶åé€‰æ‹©ä½ çš„æ’­æ”¾å™¨ç¨‹åºå³å¯ã€‚

    å¦‚æœæ‚¨åœ¨ç”µè„‘ä¸Šå¼ºåˆ¶é€€å‡º Steamï¼ˆALT+F4ï¼‰ï¼Œå±å¹•é•œåƒå°†ä¿æŒæ´»åŠ¨çŠ¶æ€
    æ‚¨å¯ä»¥åœ¨ç”µè§†ä¸Šè®¿é—®è®¡ç®—æœº
    è¿™ä½¿æ‚¨å¯ä»¥åœ¨ç”µè§†ä¸ŠæŸ¥çœ‹ç”µå½±ï¼Œå›¾ç‰‡ï¼Œæ–‡æ¡£æˆ–ç½‘ç«™
    å¦‚æœæ‚¨è¿˜æ²¡æœ‰æ™ºèƒ½ç”µè§†ï¼Œè¿™å¯¹äºåœ¨Raspberry Piä¸Šå¸¦æ¥Windowsåº”ç”¨ç¨‹åºçš„å¼ºå¤§åŠŸèƒ½å¯èƒ½å¾ˆæœ‰ç”¨

ç›®å‰å·²ç»æ”¯æŒæ ‘è“æ´¾ï¼Œæ‰€ä»¥æ ‘è“æ´¾åªè¦å®‰è£… Steam linkï¼Œç”¨ hdmi çº¿è¿æ¥ç”µè§†å³å¯ç©ä½ ç”µè„‘ä¸Šçš„æ¸¸æˆäº†ã€‚

    https://www.bilibili.com/video/BV1Cs4y1B7zQ/

    éœ€è¦æœ‰æ¡Œé¢ç¯å¢ƒæ‰èƒ½ä½¿ç”¨ steamlink

        sudo apt install steamlink

    å®‰è£…ä¸­æç¤º GPU æ˜¾å­˜è¦è‡³å°‘ 128 MBï¼Œå¹¶å®‰è£…ä¸€å †ä¾èµ–åŒ…ï¼Œè°ƒæ•´æ ‘è“æ´¾ GPU æ˜¾å­˜ç”¨é‡å‚è§ç« èŠ‚ [è°ƒæ•´ä½ çš„æ˜¾å­˜å®¹é‡](raspberry-pi.md)ã€‚

    åœ¨æ ‘è“æ´¾æ¡Œé¢ä¸Šè¿è¡Œ steam link æç¤ºä¸æ”¯æŒ x11ï¼ŒæŒ‰ ctrl+alt+F1 åˆ‡æ¢åˆ°æ§åˆ¶å°è¿è¡Œå³å¯ã€‚

##### Battle.Net on steam

    https://mag37.org/posts/linux_gaming/#battlenet-on-steamproton

Download the regular BattleNet-Setup.exe.

    https://download.battle.net/en-us/?product=bnetdesk

    Add it to steam as non-steam game.

    Click properties -> compatibility -> Force specific â€¦ and choose latest proton/GE.

Play! To launch the installer, follow the steps until its done then close it.

Now Add the freshly installed Battle.net.

    Add non-steam game

    Browse to `home/user/.local/share/Steam/steamapps/compatdata/`

    Make sure to have â€œall filesâ€ as file type.

    Find the latest modified directory, 10-digit name and enter it.

        Go to pfx/drive_c/Program Files (x86)/Battle.net

        Select Battle.net Launcher.exe

    Click properties -> compatibility -> Force specific â€¦ and choose latest proton/Proton-GE.

Done - Now install your Battle.net games or browser for already installed ones.

#### Moonlight/Sunshine for Linux

å¼€æºçš„æ–¹æ¡ˆï¼Œé›²ç«¯ä¸²æµéŠæˆ²è»Ÿé«”ï¼Œå¯è®“ä½ å¾å¦ä¸€éƒ¨é›»è…¦ä¸²æµç©éŠæˆ²

    https://zhuanlan.zhihu.com/p/694331494

    https://www.bilibili.com/read/cv24132717/

    https://blog.csdn.net/qq_38836741/article/details/129045274

    Sunshine + Moonlight çº¯è½¯ä»¶å®ç°å…¨å¹³å°è®¾å¤‡ä½œ Linux å‰¯å±
        https://zhuanlan.zhihu.com/p/678206086

    https://zhuanlan.zhihu.com/p/139160734
    https://zhuanlan.zhihu.com/p/461015191
    https://bbs.a9vg.com/thread-5365751-1-1.html

Moonlight æ˜¯ä¸€æ¬¾å¼€æºçš„åˆ©ç”¨ Nvidia GameStream è¿›è¡Œè¿œç¨‹ä¸²æµæ¸¸æˆçš„è½¯ä»¶ï¼Œå¸¸è§„æ¥è¯´ä½¿ç”¨ Nvidia GameStream ä¸²æµé™¤éœ€è¦ä¸€æ¬¾æ”¯æŒ GameStream çš„æ˜¾å¡ä»¥å¤–ï¼Œè¿˜éœ€è¦ Nvidia Shieldè®¾ å¤‡çš„æ”¯æŒæ¥æ¥æ”¶ä¸²æµï¼Œç”¨ Moonlight å°±æ˜¯åšäº† Shield çš„å·¥ä½œã€‚ä½¿èƒ½å®‰è£… Moonlight çš„è®¾å¤‡éƒ½èƒ½æˆä¸º GameStream ä¸²æµå®¢æˆ·ç«¯ã€‚

å› ä¸ºåœ¨æµå‘é€ç«¯ï¼ˆæ¸¸æˆæ‰§è¡Œç«¯ï¼‰éœ€è¦å®‰è£…è‹±ä¼Ÿè¾¾ GeForce æ˜¾å¡ï¼ˆNå¡ï¼‰ï¼Œå¹¶å®‰è£… GeForce Experience æ³¨å†Œ nvidia è´¦æˆ·ï¼Œæ‰€ä»¥æ²¡äººç”¨ã€‚Nvidia è¿™å¥—ä¸²æµæ–¹æ¡ˆå·²ç»é€€å‡ºå¸‚åœºäº†ï¼Œç°åœ¨çš„æ–¹æ¡ˆæ˜¯

    æµå‘é€ç«¯å®‰è£… sunshine ---- Nvidia/AMD/Intel æ ¸æ˜¾ ä¸‰å¹³å°é€šç”¨çš„ä¸²æµæœåŠ¡ç«¯

    åœ¨æµæ¥æ”¶ç«¯ï¼ˆç”µè§†ã€æ‰‹æœºæˆ–å¹³æ¿ï¼‰å®‰è£… Moonlight çš„å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºã€‚

æµæ¥æ”¶ç«¯å’Œå‘é€ç«¯è¿æ¥åˆ°åŒä¸€ä¸ªå†…ç½‘ç¯å¢ƒé‡Œå³å¯å®ç°ä¸²æµã€‚

##### æµå‘é€ç«¯

æœåŠ¡ç«¯å®‰è£… sunshine

    https://github.com/loki-47-6F-64/sunshine#usage

Fedora ç”¨ flatpak å®‰è£…å³å¯

    flatpak search sunshine

Windows æ“ä½œç³»ç»Ÿä¸‹æœåŠ¡ç«¯å®‰è£…

    å®‰è£…æ‰‹æŸ„é©±åŠ¨

        https://github.com/ViGEm/ViGEmBus/releases

        ä¸‹è½½ ViGEmBusSetup_x64.msi æˆ– ViGEmBusSetup_x86.msi åå®‰è£…

    å®‰è£… sunshine æœåŠ¡ç«¯

        https://github.com/loki-47-6F-64/sunshine/releases

        ä¸‹è½½ Sunshine-Windows.zip å¹¶è§£å‹è‡³ä»»æ„ä½ç½®

##### æµæ¥æ”¶ç«¯

å®¢æˆ·ç«¯å®‰è£… Moonlightï¼Œæ³¨æ„ Linux å¹³å°éœ€è¦æœ‰æ¡Œé¢ç¯å¢ƒ

    https://moonlight-stream.org/

Windows, macOS, and Steam Link

    https://github.com/moonlight-stream/moonlight-qt/releases

android å®¢æˆ·ç«¯:

    https://github.com/moonlight-stream/moonlight-android/releases

    æ²¡ root ä¸‹ nonroot ç‰ˆæœ¬

iOS å®¢æˆ·ç«¯:

    https://apps.apple.com/app/moonlight-game-streaming/id1000551566

Fedora ç”¨ flatpak å®‰è£…å³å¯

    # https://flathub.org/apps/details/com.moonlight_stream.Moonlight
    flatpak search moonlight

> æ ‘è“æ´¾å®‰è£… moonlight

    https://github.com/moonlight-stream/moonlight-docs/wiki/Installing-Moonlight-Qt-on-Raspberry-Pi-4

æ­¥éª¤è¾ƒå¤šï¼ŒæŒ‰é¡¹ç›®æŒ¨ä¸ªåšå§ã€‚

ç¼–è¾‘ /boot/config.txt and reboot your Pi

    è°ƒæ•´æ ‘è“æ´¾ GPU æ˜¾å­˜ç”¨é‡çš„æ–¹æ³•å‚è§ç« èŠ‚ [è°ƒæ•´ä½ çš„æ˜¾å­˜å®¹é‡](raspberry-pi.md)ã€‚

    è¦ä½¿ç”¨æ ‘è“æ´¾çš„ HEVC è§£ç ï¼ˆæç¤ºåºŸå¼ƒäº†ï¼‰

        # https://github.com/moonlight-stream/moonlight-docs/wiki/Installing-Moonligdht-Qt-on-Raspberry-Pi-4#hevc-and-hdr-support
        dtoverlay=rpivid-v4l2

    Raspbian Bullseye è¿˜å¾—æ”¹

        # https://github.com/moonlight-stream/moonlight-docs/wiki/Installing-Moonlight-Qt-on-Raspberry-Pi-4#raspbian-bullseye
        dtoverlay=vc4-fkms-v3d

åœ¨æ¡Œé¢æŒ‰ ctrl+alt+F1 åˆ‡æ¢åˆ°æ§åˆ¶å°è¿è¡Œ `moonlight-qt`

    # https://github.com/moonlight-stream/moonlight-docs/wiki/Installing-Moonlight-Qt-on-Raspberry-Pi-4#raspbian-bullseye
    #  Qt Critical: Could not queue DRM page flip on screen HDMI1 (Permission denied)
    env QT_QPA_EGLFS_KMS_ATOMIC=1 moonlight-qt

    GUI å°†å‡ºç°åœ¨è¿æ¥åˆ°æœ€é è¿‘ USB-C ç”µæºçº¿çš„ mini-HDMI ç«¯å£çš„æ˜¾ç¤ºå™¨ä¸Šã€‚è¿™æ˜¯æ ‘è“æ´¾4çš„ä¸»æ˜¾ç¤ºè¾“å‡ºç«¯å£ï¼Œå®ƒæ ‡æ³¨äº† HDMI0ï¼ˆå¯ä»¥ä»¥ç›¸åŒçš„æ–¹å¼è¿æ¥ç¬¬äºŒä¸ªå±å¹•åˆ° HDMI1ï¼‰ã€‚å¦‚æœä»æ ‘è“æ´¾æ¡Œé¢ç¯å¢ƒå¤–éƒ¨å¯åŠ¨ Moonlight æ—¶æ²¡æœ‰çœ‹åˆ° UI å‡ºç°ï¼Œè¯·ç¡®ä¿æ‚¨çš„æ˜¾ç¤ºå™¨è¿æ¥åˆ°æ­£ç¡®çš„ç«¯å£ã€‚

    å¦‚æœæ‚¨çš„æ˜¾ç¤ºå™¨å·²æ’å…¥ä¸» HDMI è¾“å‡ºï¼Œå¹¶ä¸”åœ¨ä»æ§åˆ¶å°å¯åŠ¨ Moonlight æ—¶ä»ç„¶çœ‹ä¸åˆ° UIï¼Œè¯·å°è¯•ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯åŠ¨ Moonlightï¼š

        QT_QPA_EGLFS_ALWAYS_SET_MODE=1 moonlight-qt

ç•Œé¢ä¸­ä¼šè‡ªåŠ¨æ˜¾ç¤ºå½“å‰å±€åŸŸç½‘æœç´¢åˆ°çš„å‘é€ç«¯ï¼Œç‚¹å‡»å›¾æ ‡å³å¯è¿æ¥ï¼Œç¬¬ä¸€æ¬¡ä¼šæç¤ºä¸€ä¸ª pin ç ï¼Œåœ¨å‘é€ç«¯æ‰¾ pin ç è¾“å…¥ç•Œé¢å¡«å…¥å³å¯é€šè¿‡è®¤è¯ã€‚

##### è¿æ¥

    ç¡®ä¿å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯åœ¨åŒä¸€å±€åŸŸç½‘

    å®¢æˆ·ç«¯å®‰è£…åæ‰“å¼€åº”è¯¥ä¼šè‡ªåŠ¨æœç´¢åˆ°ä¸»æœº

    å¦‚æœæ²¡æœ‰çš„è¯åœ¨æœåŠ¡ç«¯è®¾å¤‡è¿è¡Œipconfigè·å–ip

    ç„¶ååœ¨å®¢æˆ·ç«¯ç‚¹å³ä¸Šè§’åŠ å·è¾“å…¥ IP å³å¯

    å»ºç«‹è¿æ¥åï¼Œç‚¹å‡»æ¡Œé¢ï¼ˆDESKTOPï¼‰å°†å¯åŠ¨æ¡Œé¢ä¸²æµã€‚

    é€€å‡º moonlight æŒ‰ alt + escï¼ŒWindowså®¢æˆ·ç«¯è¦ç‰¢è®°Ctrl+shift+alt+qæ˜¯é€€å‡ºä¸²æµçš„å¿«æ·æ–¹å¼ï¼Œå…¨å±çŠ¶æ€ä¸‹å„ç§æ“ä½œéƒ½ä¼šè§†ä¸ºå¯¹è¿œç¨‹ç”µè„‘çš„æ“ä½œã€‚

å¸¸è§ä½¿ç”¨é—®é¢˜ï¼š

    pin ç åœ¨å“ª:

        https://127.0.0.1:47990 é¡¶éƒ¨ pin

    æ‰‹åŠ¨æ‰“å¼€sunshineå‘½ä»¤:

        net start sunshinesvc

    å†…ç½‘ç©¿é€ç«¯å£ï¼Œåœ¨è·¯ç”±å™¨ä¾§è®¾ç½®ç«¯å£è½¬å‘å¯åœ¨äº’è”ç½‘è®¿é—®

        TCP 47984,47989,48010
        UDP 5353,47998,47999,48000,48002,48010

    ipv6æ”¯æŒæœ‰é—®é¢˜ è¿æ¥åå‡ºç°ç”»é¢ç«‹åˆ»æ–­æ‰:

        audio-sink/virtual-sinkè®¾ç½®æœ‰é—®é¢˜

    é™¤äº†ç©steamçš„æ¸¸æˆï¼Œæˆ‘è¿˜æƒ³ä¸²æµå„ç§æ¨¡æ‹Ÿå™¨æ€ä¹ˆåŠï¼Ÿ
    Aï¼šå»ºè®®ç›´æ¥ä¸²æµæ•´ä¸ªæ¡Œé¢ï¼Œæ–¹æ³•æ˜¯å‘é€æ®µçš„ç¨‹åºä¸­æ·»åŠ  â€œmstsc.exeâ€ï¼Œè·¯å¾„ä¸ºï¼šâ€œC:\Windows\System32\mstsc.exeâ€ï¼Œä¸²æµäº†æ¡Œé¢æˆ‘æƒ³ä¸‹é¢ä½ è¯¥æ‡‚æ€ä¹ˆåšäº†ï¼

    ç›®å‰UWPï¼ˆWIN10å•†åº—ï¼‰æ¸¸æˆæ¯”å¦‚ã€Šæé™ç«é€Ÿï¼šåœ°å¹³çº¿3ã€‹åœ¨ä¸²æµåæ‰‹æŸ„ä¸è®¤
    Aï¼šè¯·ä¸è¦åœ¨ Moonlight è¿è¡Œæ¡Œé¢å†å»æ‰“å¼€æ¸¸æˆã€‚è¯·ç›´æ¥åœ¨ Moonlight ä¸­è¿è¡Œ UWP æ¸¸æˆ

    ä¹°ä¸ªæ˜¾å¡æ¬ºéª—å™¨ï¼Œhdmiçš„æ¥å¤´ï¼Œè®©ç¬”è®°æœ¬ä»¥ä¸ºå¤–æ¥äº†èµ°ç‹¬æ˜¾è¾“å‡ºç„¶åä¸²æµï¼Œè¿™æ ·å¯ä»¥è§£å†³ä¸€äº›æ¸¸æˆçš„å¼‚å¸¸é»‘å±é—®é¢˜ã€‚

#### vlc player ä¸²æµè§†é¢‘

    https://www.thewindowsclub.com/stream-videos-lan-vlc-media-player

    https://www.thewindowsclub.com/how-to-play-rtsp-stream-in-vlc-media-player

    https://fanrongbin.com/raspberrypi-autostart-vlc-autoplay-rtsp-stream/

    https://blog.csdn.net/m0_60259116/article/details/126351373

ç±»ä¼¼å¯ä»¥ä¸²æµè§†é¢‘çš„è¿˜æœ‰ Jellyfinï¼Œè¯¦è§ç« èŠ‚ [è‡ªå»º Jellyfin ç§äººå½±é™¢](raspberry-pi think)ã€‚

å¦‚æœæ˜¯ flatpak å®‰è£…çš„ vlcï¼Œéœ€è¦åœ¨ flatseal ä¸­å¼€æ”¾ vlc çš„ç«¯å£æƒé™ã€‚

å‘é€æ–¹ï¼Œæ‰“å¼€ vlcï¼Œèœå•é€‰æ‹©ï¼š

    â€œMediaâ€ --> â€œStreamâ€ï¼Œæ·»åŠ ä½ è¦æ’­æ”¾çš„è§†é¢‘æ–‡ä»¶ï¼Œç‚¹å‡» â€œAddâ€ï¼Œè¿˜å¯ä»¥é€‰æ‹©å­—å¹•æ–‡ä»¶ï¼Œä¹Ÿç‚¹å‡» â€œaddâ€ï¼Œç„¶åç‚¹å‡»ä¸‹é¢çš„ â€œStreamâ€ æŒ‰é’®ã€‚

    åœ¨å¼¹å‡ºçš„æ–°çª—å£é€‰æ‹© â€œNextâ€ï¼Œåœ¨ä¸‹ä¸€ä¸ªé¡µé¢ï¼Œä¸²æµæ–¹å¼é€‰æ‹© RTP å’Œ http ç‚¹å‡» â€œaddâ€ï¼Œæˆ–é€‰æ‹© RSTP ç‚¹å‡» â€œaddâ€ï¼Œåœ¨åé¢çš„æ ‡ç­¾é¡µè®¾ç½®å¯¹åº”çš„åç§°ã€è·¯å¾„ã€ç«¯å£ç­‰ï¼Œç„¶åç‚¹å‡»ä¸‹ä¸€æ­¥

    åœ¨æ–°é¡µé¢é€‰æ‹©ä¸€ä¸ªè½¬ç ç¼–ç æ–¹å¼ï¼Œæ³¨æ„è¦è·Ÿä¸Šé¢çš„ä¸²æµæ–¹å¼å¯¹åº”ï¼Œå¦‚ RSTP æ–¹å¼æˆ‘é€‰æ‹©çš„æ˜¯ â€œVide-H.264+MP3(TS)â€ï¼Œç‚¹å‡»ä¸‹ä¸€æ­¥ï¼Œç„¶åç‚¹å‡» â€œStreamâ€ æŒ‰é’®ã€‚

    è¿™æ—¶æ¨æµå·²ç»å¼€å§‹äº†ï¼Œå¯ä»¥çœ‹åˆ° vlc çª—å£ä¸‹æ–¹æ—¶é—´æ çš„ç§’æ•°å˜åŒ–ã€‚

    æ³¨æ„å¦‚æœæ˜¯ flatpak å®‰è£…çš„ vlcï¼Œéœ€è¦æ”¾å¼€å¯¹åº”çš„ç«¯å£æƒé™ï¼Œä¸ç„¶æ— æ³•å¯¹å¤–å¹¿æ’­ã€‚

æ¥æ”¶æ–¹ï¼Œå±€åŸŸç½‘å†…çš„å…¶ä»–è®¡ç®—æœºä¸Šï¼Œæ‰“å¼€ vlcï¼Œèœå•é€‰æ‹©ï¼š

    RTP æµï¼š

        â€œViewâ€ ---> â€œPlaylistâ€ï¼Œåœ¨å¼¹å‡ºçª—å£é€‰æ‹© â€œLocal Networkâ€ï¼Œåº”è¯¥å¯ä»¥çœ‹åˆ°å‘é€æ–¹è®¾ç½®çš„åç§°ï¼ŒåŒå‡»å³å¯æ’­æ”¾äº†ã€‚

    RTSP æµï¼š

        â€œMediaâ€ --> â€œOpen network Streamâ€ï¼Œåœ¨å¼¹å‡ºçª—å£è¾“å…¥å‘é€æ–¹çš„åœ°å€ rtsp://192.168.0.xx:8554/your_path

        ä¸ºé˜²æ­¢ç½‘é€Ÿä¸å¥½æ’­æ”¾æœ‰å¡é¡¿ï¼Œå‹¾é€‰ â€œShow more optionsâ€ï¼Œåœ¨æ–°å¢çš„å†…å®¹ä¸­ç»™ â€œcachingâ€ é€‰é¡¹å¢åŠ ç¼“å†²æ—¶é—´ï¼Œæ¯”å¦‚ 30 ç§’

        ç‚¹å‡» â€œplayâ€ æŒ‰é’®å³å¯æ’­æ”¾ã€‚

#### ä½¿ç”¨ FFmpeg å½•åˆ¶æµè§†é¢‘åˆ°æ–‡ä»¶

åˆ†æè§†é¢‘æµä¿¡æ¯

    $ ffprobe -i rtsp://your_stream_url -show_streams

ç¡®è®¤æœ¬æœºæ˜¯å¦æ”¯æŒ h265:

    $ ffmpeg -codecs | grep hevc

> åˆ†æ®µå½•åˆ¶ RTSP è§†é¢‘æµ

ä½¿ç”¨ segment è¿‡æ»¤å™¨æ¥å°†è§†é¢‘æµåˆ†å‰²æˆå¤šä¸ªè¾ƒå°çš„æ–‡ä»¶ã€‚è¿™å¯ä»¥é€šè¿‡æŒ‡å®š -f segment å‚æ•°å’Œè¾“å‡ºæ–‡ä»¶çš„å‰ç¼€æ¥å®ç°ã€‚

    $ ffmpeg -rtsp_transport tcp -i rtsp://your_stream_url -c copy -f segment -segment_time 60 stream_piece_%02d.mp4

    -segment_time 60 è¡¨ç¤ºæ¯ä¸ªè§†é¢‘æ–‡ä»¶çš„æ—¶é•¿ä¸º 60 ç§’ï¼Œä½†ç¨æœ‰è¯¯å·®ï¼Œh256å‹ç¼©çš„è§†é¢‘å¤§æ¦‚ 5.4MBã€‚

    stream_piece_%02d.mp4 æ˜¯è¾“å‡ºæ–‡ä»¶çš„æ ¼å¼ï¼Œ%02d æ˜¯ä¸€ä¸ªå ä½ç¬¦ï¼ŒFFmpeg ä¼šè‡ªåŠ¨ä¸ºæ¯ä¸ªæ–‡ä»¶ç¼–å·ã€‚

æ‰€ä»¥ï¼Œå¦‚æœæ˜¯æ¯ 15åˆ†é’Ÿ(900ç§’) ä¸€ä¸ªæ–‡ä»¶ï¼Œçº¦ 81MBï¼Œä¸€å¤©å°±æ˜¯ 96ä¸ªæ–‡ä»¶ã€‚è®¾ç½® %02d ä¼šå¾ªç¯ä½¿ç”¨çš„æ–‡ä»¶åï¼Œå¦‚æœåªä¿ç•™ä¸€å¤©çš„è§†é¢‘æ–‡ä»¶ï¼Œä¸¤ä½æ•°æ–‡ä»¶åå¤Ÿç”¨äº†ã€‚

ä¸€å¤©ä¸‹æ¥çš„å®¹é‡éœ€æ±‚å¤§æ¦‚ 5.4MB * 1440 çº¦ 8GBã€‚å¦‚æœæ˜¯ 32GB çš„å­˜å‚¨å¡ï¼Œå¤§æ¦‚èƒ½ä¿å­˜ 4 å¤©çš„è§†é¢‘ã€‚

å¦‚æœä½¿ç”¨ %3d åšæ–‡ä»¶åï¼Œåˆ™æœ€å¤š 1000 ä¸ªæ–‡ä»¶å¾ªç¯å†™å…¥ï¼Œ32GB çš„å­˜å‚¨å¡æƒ³ä¿ç•™ 4 å¤©çš„è¯ï¼Œæ¯ä¸ªæ–‡ä»¶çš„æ—¶é•¿æœ€çŸ­ 1440*60/(1000/4) çº¦ 350 ç§’ï¼Œæƒ³ä¿ç•™ 3 å¤©åˆ™æ–‡ä»¶æ—¶é•¿æœ€çŸ­ 260 ç§’ï¼Œä¿ç•™2å¤©åˆ™æ–‡ä»¶æ—¶é•¿æœ€çŸ­ 175 ç§’ã€‚

è¿˜å¯ä»¥ä½¿ç”¨ -limit_filesize 100MB é€‰é¡¹æ¥é™åˆ¶è¾“å‡ºæ–‡ä»¶çš„å¤§å°ã€‚å½“æ–‡ä»¶è¾¾åˆ°æŒ‡å®šå¤§å°æ—¶ï¼ŒFFmpeg å°†è‡ªåŠ¨å¼€å§‹ä¸€ä¸ªæ–°çš„æ–‡ä»¶ã€‚

> æ¨é€æœ¬åœ°è§†é¢‘åˆ°æµåª’ä½“æœåŠ¡å™¨

    $ ffmpeg -re -i "D:\test.mp4" -vcodec h264 -acodec aac -f rtsp -rtsp_transport tcp rtsp://192.168.0.110/live/test

#### wine

wine æ¨¡æ‹Ÿ Win32 æ¥å£è°ƒç”¨çš„ä¸­é—´å±‚ï¼Œç±»ä¼¼ MGW å’Œ Cygwin çš„å®ç°æ€è·¯ï¼Œå¯ä»¥ç›´æ¥è¿è¡Œ Windows çš„è½¯ä»¶ï¼Œè¿™æ ·å°±çœå»ç”¨è™šæ‹Ÿæœºå®‰è£… Windows äº†

    https://docs.fedoraproject.org/en-US/quick-docs/wine/

    https://www.winehq.org/
        æ”¯æŒçš„è½¯ä»¶åˆ—è¡¨ï¼Œæ¸¸æˆå±…å¤šå“¦ https://appdb.winehq.org/

    wayland ä¸‹çš„ wine ä¸å†ä½¿ç”¨ x11 ä½“ç³»
        https://github.com/varmd/wine-wayland

    https://www.cnblogs.com/garyw/p/13468491.html

    https://zhuanlan.zhihu.com/p/108106453

    https://www.linuxcapable.com/how-to-install-wine-on-fedora-linux/

    https://zhuanlan.zhihu.com/p/60876915

    https://bbs.deepin.org/en/post/179509

    ç”¨ Vulkan å®ç°çš„ DirectX é©±åŠ¨ç¨‹åº
        https://github.com/doitsujin/dxvk#how-to-use

    ç¤ºä¾‹
        https://github.com/shuvozula/steam-gta5-linux

å…¶ä»–ç‰ˆæœ¬ï¼š

    proton æ˜¯ Valve ä¸ºä»–ä»¬çš„ steam å¼„çš„ wine è¡ç”Ÿç‰ˆï¼Œéƒ¨åˆ† steam æ¸¸æˆä½¿ç”¨å®ƒ

    crossover æ˜¯ wine çš„ä¸€ä¸ªå•†ä¸šåº”ç”¨

å¯ä»¥ä»å‘è¡Œç‰ˆè‡ªå¸¦çš„å­˜å‚¨åº“ dnf å®‰è£…ï¼Œæˆ–ä½¿ç”¨ wine å®˜æ–¹å­˜å‚¨åº“å®‰è£… Wine çš„æœ€æ–°ç¨³å®šç‰ˆï¼š

> å®‰è£… Wine32

ç›®å‰å¤§å¤šæ•°æ¸¸æˆå’Œ Windows åº”ç”¨ç¨‹åºæ˜¯ä¸º 32 ä½ä½“ç³»ç»“æ„ç³»ç»Ÿå¼€å‘çš„ï¼Œä¸ºäº†æ›´å¥½çš„å…¼å®¹æ€§ï¼Œåº”è¯¥å®‰è£… 32 ä½çš„ç‰ˆæœ¬

    $ sudo dnf install wine.i686 wine-mono

    $ sudo apt install wine32

    $ wine --version

NOTE: ä» Fedora 46 å¼€å§‹å–æ¶ˆ 32 ä½ç¨‹åºçš„å…¼å®¹æ€§æ”¯æŒï¼Œæ³¨æ„ wine çš„åº”å¯¹æªæ–½ã€‚

    Fedora å¯¹ 32 ä½æ¶æ„çš„æ”¯æŒå‰Šå‡å·²æœ‰å¤šå¹´çš„å‘å±•è½¨è¿¹ã€‚æ—©åœ¨ Fedora 31 ç‰ˆæœ¬ä¸­ï¼Œç³»ç»Ÿå°±å·²åœæ­¢æä¾› i686 æ¶æ„çš„å†…æ ¸åŒ…ä»¥åŠå®‰è£…é•œåƒï¼Œä½†ä»ä¿ç•™äº†é€šè¿‡ multilib æ–¹å¼åœ¨ 64 ä½ç³»ç»Ÿä¸Šè¿è¡Œ 32 ä½åº”ç”¨çš„èƒ½åŠ›ã€‚

    æ­¤æ¬¡ææ¡ˆçš„ç›®æ ‡æ˜¯è¿›ä¸€æ­¥å–æ¶ˆå¯¹ i686 è½¯ä»¶åŒ…çš„æ„å»ºæ”¯æŒï¼Œå½»åº•æ‘†è„±å¯¹è€æ—§ 32 ä½æ¶æ„çš„å…¼å®¹éœ€æ±‚ã€‚æ•´ä¸ªè¿‡ç¨‹è¢«è§„åˆ’ä¸ºä¸¤ä¸ªé˜¶æ®µï¼šé¦–å…ˆç§»é™¤ multilib æ”¯æŒï¼Œæ­¤é˜¶æ®µè‹¥å‘ç°é—®é¢˜ä»å¯æ¢å¤ï¼›ç¬¬äºŒé˜¶æ®µåˆ™æ˜¯å…¨é¢åœæ­¢ i686 åŒ…çš„æ„å»ºï¼Œä¸€æ—¦å®æ–½åˆ™éš¾ä»¥é€†è½¬ï¼Œå› ä¸ºè¿™æ„å‘³ç€éœ€è¦ä»é›¶é‡å»ºæ•´ä¸ªæ¶æ„ä½“ç³»ã€‚

> ä½¿ç”¨ wine å®˜æ–¹å­˜å‚¨åº“å®‰è£… Wine

ä¸»è¦ç›®çš„æ˜¯ä» Wine å®˜æ–¹å­˜å‚¨åº“å®‰è£…çš„ç¨³å®šç‰ˆæœ¬ï¼Œæ¯” Fedora é»˜è®¤å­˜å‚¨åº“ä¸­å¯ç”¨çš„ç‰ˆæœ¬æ–°ã€‚ç¼ºç‚¹æ˜¯ä¸€æ—¦ä½ çš„æ“ä½œç³»ç»Ÿå¤§ç‰ˆæœ¬å‡çº§ï¼Œè¦è®°å¾—åˆ é™¤ä¹‹å‰æ‰‹åŠ¨å®‰è£…çš„ç¬¬ä¸‰æ–¹å­˜å‚¨åº“ï¼Œå‡çº§åæ¢ä¸ºå¯¹åº”çš„å­˜å‚¨åº“ã€‚è€Œä¸”æ²¡æœ‰å›½å†…é•œåƒï¼Œä»è¿™ä¸ªåº“ä¸‹è½½æ¯”è¾ƒç—›è‹¦ã€‚

å…ˆå®‰è£…å®˜æ–¹å­˜å‚¨åº“

    # https://wiki.winehq.org/Category:Distributions
    # https://dl.winehq.org/wine-builds/fedora/
    $ sudo dnf config-manager --add-repo https://dl.winehq.org/wine-builds/fedora/$(rpm -E %fedora)/winehq.repo

å¦‚æœä½¿ç”¨ rpm-ostree å®‰è£…ï¼Œå‚è§ç« èŠ‚ [æ·»åŠ  RPMFusion å­˜å‚¨åº“]ï¼Œæ­¥éª¤ä¸€è‡´ï¼Œæ›¿æ¢åœ°å€å³å¯ã€‚

ç„¶åå†å®‰è£…ç¨³å®šç‰ˆ

    $ sudo dnf install winehq-stable

    å¦‚æœå–œæ¬¢å°é²œï¼Œç­‰ä¸åŠç¨³å®šç‰ˆï¼Œå¯ä»¥è¯•è¯•æš‚å­˜ç‰ˆ

        $ sudo dnf install winehq-staging

    $ wine --version

wine çš„å®˜æ–¹å­˜å‚¨åº“ä¸ºäº†åŒºåˆ«äº Fedora é»˜è®¤å­˜å‚¨åº“ï¼Œè½¯ä»¶åŒ…çš„åç§°æ˜¯ä¸åŒçš„ï¼Œæ¯”è¾ƒå®¹æ˜“åŒºåˆ†ã€‚

> å›½å†…é•œåƒ

åªæ”¯æŒ Debian/Ubuntu

    https://mirrors.tuna.tsinghua.edu.cn/help/wine-builds/

    https://help.mirrors.cernet.edu.cn/wine-builds/

> å®‰è£…åçš„é…ç½®å·¥ä½œï¼š

    https://blog.csdn.net/Gerald_Jones/article/details/80781378

å®‰è£… Wine åï¼Œå¿…é¡»å®‰è£…ä¸€äº›ä¾èµ–åŒ…å¹¶è®¾ç½®å¿…è¦çš„ç¯å¢ƒï¼Œä¸€ç§æ–¹æ³•æ˜¯åœ¨ç»ˆç«¯ä¸­è¿è¡Œ â€œwinecfgâ€ å‘½ä»¤

    åœ¨æ¯æ¬¡ Wine å‡çº§æˆ–å®‰è£…æ–°çš„ Windows åº”ç”¨ç¨‹åºåï¼Œéƒ½è¦è¿è¡Œ â€œwinecfgâ€ å‘½ä»¤é‡æ–°è®¾ç½®ç¯å¢ƒã€‚

NOTEï¼šä¸è¦ä»¥ `sudo` æ‰§è¡Œ winecfg

å¦‚æœæ‚¨å¸Œæœ›å°† Wine ç¯å¢ƒä½œä¸ºâ€œ32 ä½â€ç³»ç»Ÿå¯åŠ¨ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿›è¡Œå¿…è¦çš„è°ƒæ•´

    $ export WINEARCH=win32 export WINEPREFIX=~/.wine32 winecfg
    wine: created the configuration directory '/home/uu/.wine32'
    wine: '/home/uu/.wine32' is a 32-bit installation, it cannot support 64-bit applications.

    $ WINEPREFIX=~/wine32 wine xxx.exe

æ‰“å¼€ winecfg

    https://www.imooc.com/article/35491

ç¡®ä¿ç¬¬ä¸€ä¸ªæ ‡ç­¾é¡µä¸­çš„ Windows ç‰ˆæœ¬å·²ç»è®¾ç½®æˆäº† Windows 7ã€‚æš´é›ªä¸å†å¯¹ä¹‹å‰çš„ç‰ˆæœ¬æä¾›æ”¯æŒã€‚ç„¶åè¿›å…¥ â€œStagingâ€ æ ‡ç­¾é¡µã€‚ è¿™é‡Œæ ¹æ®ä½ ç”¨çš„æ˜¯ staging ç‰ˆæœ¬çš„ Wine è¿˜æ˜¯æ‰“äº† Gallium è¡¥ä¸çš„ Wine æ¥è¿›è¡Œé€‰æ‹©ã€‚

    ä¸ç®¡æ˜¯å“ªä¸ªç‰ˆæœ¬çš„ Wineï¼Œéƒ½éœ€è¦å¯ç”¨ VAAPI ä»¥åŠ EAXã€‚è‡³äºæ˜¯å¦éšè— Wine çš„ç‰ˆæœ¬åˆ™ç”±ä½ è‡ªå·±å†³å®šã€‚

å­—ä½“é…ç½®

    https://blog.csdn.net/SHIGUANGTUJING/article/details/89291732

æ¨¡æ‹Ÿçš„ Windows ç›¸å…³ç›®å½•åœ¨ ~/.wine ä¸‹é¢ï¼Œå¯ä»¥ä» Windows æ“ä½œç³»ç»Ÿ windows/Fonts æ‹·è´ sim* å­—ä½“ åˆ°å¯¹åº”çš„ç›®å½•

    $ trees ~/.wine
    [ç›®å½•æ ‘ï¼Œæœ€å¤š2çº§ï¼Œæ˜¾ç¤ºç›®å½•å’Œå¯æ‰§è¡Œæ–‡ä»¶çš„æ ‡è¯†ï¼Œè·³è¿‡.gitç­‰ç›®å½•]
    /home/uu/.wine/
    â”œâ”€â”€ dosdevices/
    â”‚   â”œâ”€â”€ c: -> ../drive_c/
    â”‚   â”œâ”€â”€ lpt1 -> /dev/lp0
    â”‚   â”œâ”€â”€ lpt2 -> /dev/lp1
    â”‚   â”œâ”€â”€ lpt3 -> /dev/lp2
    â”‚   â”œâ”€â”€ lpt4 -> /dev/lp3
    â”‚   â””â”€â”€ z: -> //
    â”œâ”€â”€ drive_c/
    â”‚   â”œâ”€â”€ ProgramData/
    â”‚   â”œâ”€â”€ Program Files/
    â”‚   â”œâ”€â”€ Program Files (x86)/
    â”‚   â”œâ”€â”€ users/
    â”‚   â””â”€â”€ windows/
    â”œâ”€â”€ system.reg
    â”œâ”€â”€ .update-timestamp
    â”œâ”€â”€ userdef.reg
    â””â”€â”€ user.reg

    10 directories, 8 files

å­—ä½“é…ç½®çš„ zh_font.reg

```ini
[HKEY_LOCAL_MACHINE\Software\Microsoft\Windows NT\CurrentVersion\FontSubstitutes]
"Arial"="simsun"
"Arial CE,238"="simsun"
"Arial CYR,204"="simsun"
"Arial Greek,161"="simsun"
"Arial TUR,162"="simsun"
"Courier New"="simsun"
"Courier New CE,238"="simsun"
"Courier New CYR,204"="simsun"
"Courier New Greek,161"="simsun"
"Courier New TUR,162"="simsun"
"FixedSys"="simsun"
"Helv"="simsun"
"Helvetica"="simsun"
"MS Sans Serif"="simsun"
"MS Shell Dlg"="simsun"
"MS Shell Dlg 2"="simsun"
"System"="simsun"
"Tahoma"="simsun"
"Times"="simsun"
"Times New Roman CE,238"="simsun"
"Times New Roman CYR,204"="simsun"
"Times New Roman Greek,161"="simsun"
"Times New Roman TUR,162"="simsun""Tms Rmn"="simsun"

```

ç„¶ååœ¨ç»ˆç«¯æ‰§è¡Œ `wine regedit zh_font.reg`

##### å¦‚ä½•ä½¿ç”¨ Wine

å¯¹éœ€è¦å®‰è£…çš„ Windows ç¨‹åºï¼Œä¸‹è½½å¹¶ä½¿ç”¨ Wine æ‰“å¼€ xxxInstall.exe æ–‡ä»¶

    åœ¨æ¡Œé¢ç¯å¢ƒçš„æ–‡ä»¶ç®¡ç†å™¨ä¸­ï¼Œå³é”®å•å‡».exeæ–‡ä»¶ï¼Œé€‰æ‹© â€œä½¿ç”¨ Wine Windows ç¨‹åºåŠ è½½å™¨æ‰“å¼€â€ å¹¶é€‰æ‹© Wine åº”ç”¨ç¨‹åºæ¥è¿è¡Œè¯¥æ–‡ä»¶ï¼Œå‰©ä¸‹çš„å°±æ˜¯å®‰è£…å’Œè¿è¡Œäº†ï¼Œè·Ÿ Windows ä¸‹çš„ä½¿ç”¨ä½“éªŒæ˜¯ä¸€è‡´çš„ã€‚

æ³¨æ„å®‰å…¨

    å› ä¸ºä¸‹è½½çš„ç¨‹åºä¸çŸ¥é“æ¥æºæ˜¯å¦æ­£è§„ï¼Œåº”è¯¥æ–°å»ºä¸ªç”¨æˆ·å®‰è£…å¹¶è¿è¡Œè¿™äº›ç¨‹åº

è£…å¥½ Wine ä»¥åï¼Œåœ¨ç»ˆç«¯è¾“å…¥ `regedit` å¯ä»¥æ‰“å¼€ wine çš„æ³¨å†Œè¡¨ç¼–è¾‘å™¨äº†

    http://wiki.winehq.org/regedit

    $ wine regedit xxx.reg ç›´æ¥å¯¼å…¥æ³¨å†Œè¡¨

åœ¨è‹±æ–‡ Linux ä¸‹æ‰§è¡Œ Win 7/WinXp æ—¶ä»£çš„ç®€ä½“ä¸­æ–‡ç¨‹åº

    # en_US.utf8
    $ env LANG=zh_CN.GBK wine your_app.exe

å¦‚æœæ˜¯ä¸­æ–‡ Linuxï¼Œåˆ™æ¢æˆï¼š

    $ env LANG=zh_CN.UTF-8 wine your_app.exe

> ç”¨ Winetricks é…ç½® WINE

    https://wiki.winehq.org/Winetricks

    https://www.cnblogs.com/jikexianfeng/p/5769430.html

winecfg è®©ä½ å¯ä»¥æ”¹å˜ WINE æœ¬èº«çš„è®¾ç½®ï¼Œè€Œ winetricks åˆ™å¯ä»¥è®©ä½ æ”¹é€ å®é™…çš„ Windows å±‚ï¼Œå®ƒå¯ä»¥è®©ä½ å®‰è£… Windows é‡è¦çš„ç³»ç»Ÿç»„ä»¶ï¼Œæ¯”å¦‚ .dllã€€æ–‡ä»¶å’Œç³»ç»Ÿå­—ä½“ï¼Œè¿˜å¯ä»¥å…è®¸ä½ ä¿®æ”¹ Windows æ³¨å†Œè¡¨çš„ä¿¡æ¯ã€‚å®ƒè¿˜æœ‰ä»»åŠ¡ç®¡ç†å™¨ã€å¸è½½å·¥å…·å’Œæ–‡ä»¶æµè§ˆå™¨ã€‚ å°½ç®¡ winetricks å¯ä»¥åšä»¥ä¸Šè¿™äº›å·¥ä½œï¼Œä½†æ˜¯å¤§éƒ¨åˆ†æ—¶é—´æˆ‘ä»¬ç”¨åˆ°çš„åŠŸèƒ½ä¹Ÿå°±æ˜¯ç®¡ç† dll æ–‡ä»¶å’Œã€€Windowsã€€ç»„ä»¶ã€‚

    # åˆ›å»ºä¸“ç”¨ Wine å‰ç¼€
    $ WINEPREFIX=~/.wine-win7 winecfg
    åœ¨å¼¹å‡ºçš„çª—å£ä¸­ï¼Œå°† Windows ç‰ˆæœ¬è®¾ç½®ä¸º Windows 7

    # ä¸ºç‰¹å®š Wine å‰ç¼€å®‰è£…
    $ WINEPREFIX=~/.wine-win7 winetricks dxvk d3dx9 corefonts cjkfonts gdiplus vcrun2019

> wine ä¸éœ€è¦çª—å£ç®¡ç†å™¨ï¼ˆGNOMEæˆ–KDEï¼‰ä¹Ÿå¯ä»¥æ­£å¸¸åœ°è¿è¡Œ

å¦‚æœä½ åœ¨ä¸€ä¸ªå•ç‹¬çš„ X server ä¸‹è¿è¡Œæ¸¸æˆï¼Œä½ ä¼šå¾—åˆ°æ˜æ˜¾çš„æ€§èƒ½æå‡ã€‚åœ¨è¿è¡Œæ¸¸æˆä¹‹å‰ï¼Œå…³é—­ GDM æˆ– KDMï¼Œè¿˜ä¼šå¾—åˆ°æ›´å¤§çš„æ€§èƒ½æå‡ï¼ˆåªèƒ½é€šè¿‡æ§åˆ¶ï¼ˆconsoleï¼‰å°æ¥å®ç°ï¼‰ã€‚

    https://blog.csdn.net/Gerald_Jones/article/details/80781378

    1ã€é¦–å…ˆï¼Œåœ¨ç»ˆç«¯ä¸‹å»ºç«‹ä¸€ä¸ªè„šæœ¬ ä»£ç : nano launcher.shï¼ˆå¯ä»¥ç”¨vimæ›¿æ¢nanoï¼‰

    2ã€å¤åˆ¶ä¸‹é¢çš„æ–‡å­—åˆ°ç»ˆç«¯é‡Œã€‚å¦‚æœä½ æ²¡æœ‰nVidiaçš„æ˜¾å¡ï¼Œå°±åˆ é™¤nvidia settingsçš„é‚£éƒ¨åˆ†ï¼Œç„¶åç”¨ä½ çš„æ¸¸æˆçš„æ­£ç¡®è·¯å¾„æ›¿æ¢é‡Œé¢çš„è·¯å¾„ ä»£ç :

    #!/bin/sh

    # uncomment if launching from console session
    #sudo /etc/init.d/gdm stop
    # KDE use this instead
    #sudo /etc/init.d/kdm stop

    # Launches a new X session on display 3.
    # If you donâ€™t have an Nvidia card,take out the â€œ& nvidia-settings â€“load-config-onlyâ€ part
    X :3 -ac & nvidia-settings â€“load-config-only

    # Goto game dir (modify as needed)
    cd â€œ$HOME/.wine/drive_c/Program Files/Game/Directory/â€

    # Forces the system to have a break for 2 seconds, X doesnâ€™t launch instantly
    sleep 2

    # Launches game (modify as needed)
    DISPLAY=:3 WINEDEBUG=-all wine â€œC:/Program Files/Game/Directory/game.exeâ€

    3ã€æŠŠæ–‡ä»¶ä¿å­˜åˆ°ä½ çš„ä¸»æ–‡ä»¶å¤¹
    4ã€ç„¶åï¼Œç»™ä½ çš„è„šæœ¬åŠ ä¸Šå¯æ‰§è¡Œå±æ€§ ä»£ç : chmod +x ~/launcher.sh
    5ã€è¿è¡Œè„šæœ¬

        ./launcher.sh

    6ã€ç»“æŸæ¸¸æˆåï¼Œç”¨CTRL-ALT-BACKSPACEå›åˆ°æ¡Œé¢

##### ç¤ºä¾‹ï¼šç”¨ wine è¿è¡Œé­”å…½äº‰éœ¸3

    https://blog.csdn.net/zhongdajiajiao/article/details/51635208
        http://linux-wiki.cn/wiki/%E7%94%A8Wine%E8%BF%90%E8%A1%8C%E9%AD%94%E5%85%BD%E4%BA%89%E9%9C%B8III

æŠŠ war3 æ”¾åˆ°æŸä¸ªç›®å½•ä¸‹ï¼Œæ¯”å¦‚æ”¾åˆ° $HOME ç›®å½•ä¸‹ï¼Œå¦‚æ˜¯ /home/abc/war3ã€‚

å¯¼å…¥ war3 çš„æ³¨å†Œè¡¨æ–‡ä»¶

    $ wine regedit initWar3.reg

    $ wine regedit 1920x1080.reg

    $ wine regedit è‹±æ–‡windows_è½¬ä¸­æ–‡ç‰ˆæœ¬ä¿¡æ¯chn.reg

ç›´æ¥ä½¿ç”¨ wine çš„é»˜è®¤é…ç½®è¿è¡Œç®€ä½“ä¸­æ–‡ç‰ˆ war3 å³å¯

    $ env LANG=zh_CN.GBK WINEDEBUG=-all wine war3.exe -opengl

    å¦‚æœæ˜¾å¡é©±åŠ¨ä¸å…¼å®¹ï¼Œå¼ºåˆ¶æŒ‡å®šç‰ˆæœ¬

        $ env LANG=zh_CN.GBK MESA_GL_VERSION_OVERRIDE=4.5 wine war3.exe -opengl

å¦å¤–ï¼Œå¦‚æœä½ å®‰è£…äº†å¤šä¸ªç¨‹åºï¼Œå¹¶éœ€è¦ä¸åŒçš„ç¯å¢ƒå»è¿è¡Œï¼š

ä¸ºäº†ä½¿ war3 çš„ wine ç¯å¢ƒå’Œé»˜è®¤çš„ wine ç¯å¢ƒä¸ç›¸äº’æ±¡æŸ“ï¼Œåº”è¯¥ç»™å®ƒåˆ›å»ºå•ç‹¬çš„é…ç½®æ–‡ä»¶ï¼Œé€šè¿‡å¦‚ä¸‹å‘½ä»¤æ¥å¯åŠ¨

    WINEPREFIX=~/.war3 wine ~/war3/war3.exe

å³ war3 çš„è¿è¡Œç¯å¢ƒä¸º ~/.war3

ä¸ºäº†ä½¿ç”¨æ–¹ä¾¿ï¼Œæˆ‘ä»¬å¯ä»¥ç»™war3åˆ›å»ºä¸€ä¸ªæ¡Œé¢å¿«æ·æ–¹å¼ï¼Œé¼ æ ‡å³é”®æ¡Œé¢ç©ºç™½å¤„ï¼Œç¼–è¾‘ /usr/share/applications/war3.desktop

è¾“å…¥ä»¥ä¸‹å†…å®¹ï¼š

```ini
[Desktop Entry]
Name=war3
Exec=env LANG=zh_CN.GBK MESA_GL_VERSION_OVERRIDE=4.5 wine Z:/home/user/game/Warcraft\ III/war3.exe -opengl
Type=Application
StartupNotify=true
Comment=war3
Path=/home/user/game/Warcraft\ III
Icon=/home/user/game/Warcraft\ III/war3.jpg
StartupWMClass=war3.exe

```

ä¿å­˜é€€å‡º

    chmod 755 war3.desktop

ç°åœ¨å¯ä»¥åŒå‡»å›¾æ ‡æ‰“å¼€ war3 äº†ã€‚

##### æ›´æ–¹ä¾¿çš„ Bottles

æ›´æ–¹ä¾¿çš„å›¾å½¢ç•Œé¢é…ç½®ä½ çš„ wineï¼Œè‡ªåŠ¨å®‰è£…å„ç§ä¾èµ–åº“ï¼Œæ¯” wine è‡ªå¸¦çš„é…ç½®æ–¹ä¾¿å¤šäº†

Wine ä½¿ç”¨ä¸€ä¸ªè¢«ç§°ä¹‹ä¸º â€œWineprefixâ€ çš„é…ç½®ç›®å½•æ¥æ§åˆ¶ä½¿ç”¨ Wine è¿è¡Œçš„ Windows ç¨‹åºï¼Œè¿™ä¸ªç›®å½•ä¹Ÿè¢«æ¯”å–»ä½œ â€œbottleâ€ï¼Œè€Œ â€œBottlesâ€ æ˜¯ä¸€ä¸ªåŸºäºæ­¤æœºåˆ¶çš„è½¯ä»¶ã€‚åœ¨æ­¤ï¼Œæˆ‘å°† â€œWineprefixâ€ å’Œ â€œbottleâ€ å°è¯•ç¿»è¯‘ä¸º â€œWine å‰ç½®é…ç½®â€ å’Œ â€œå‰ç½®ç“¶â€ã€‚

ç”¨ Wine è·‘ Windows exe é€šå¸¸éœ€è¦æ‰“æŒ‡ä»¤ï¼Œè€Œ Bottles å°‡éç¨‹ç°¡åŒ–ç‚ºåªè¦é»å¹¾ä¸‹å°±èƒ½åŸ·è¡Œ Windows ç¨‹å¼ï¼Œç”¨ä¾†è·‘å°ç¨‹å¼ååˆ†æœ‰ç”¨ã€‚

    https://ivonblog.com/posts/setup-linux-bottles/

ç”¨ gnome software æœç´¢ æˆ– flatpak å°±å¯ä»¥å®‰è£…

    https://docs.usebottles.com/
        https://github.com/bottlesdevs/Bottles

    https://www.linuxmi.com/bottles-linux-windows-app.html

    https://linux.cn/article-16258-1.html
        https://zhuanlan.zhihu.com/p/659723921

    https://linux.cn/article-14285-1.html

ç«å“è¿˜æœ‰ Whiskyï¼Œåœ¨Macä¸Šè¿è¡ŒWindowsè½¯ä»¶å’Œæ¸¸æˆ

    https://github.com/Whisky-App/Whisky

### Linux æ¡Œé¢æ­»æœºæ€ä¹ˆåŠ

    https://blog.csdn.net/qq_39779233/article/details/114758689

    https://wiki.archlinux.org/title/Keyboard_shortcuts

æŸ¥çœ‹æ—¥å¿—

    $ journalctl -f -o cat /usr/bin/gnome-shell

æ¡Œé¢çš„å›¾å½¢ç•Œé¢çªç„¶å¡ä½ä¸”æ— æ³•æ“ä½œæ—¶ï¼Œå°è¯•â€œç™»å½•æ§åˆ¶å°â€ï¼Œæ³¨é”€å½“å‰ç”¨æˆ·é‡æ–°ç™»å½•

æŒ‰ CTRL + ALT + F3 ä¼šåˆ‡æ¢åˆ°æ§åˆ¶å°ç™»å½•çš„å­—ç¬¦ç•Œé¢ï¼Œå…³äºæ§åˆ¶å°ç™»å½•å‚è§ç« èŠ‚ [ç™»å½•æ§åˆ¶å° tty login]ã€‚

è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ç™»å½•ï¼Œæ­¤æ—¶è¾“å…¥å‘½ä»¤ï¼Œè¯´æ³•å¤ªå¤šå¾…éªŒè¯

    é‡å¯æ˜¾ç¤ºç®¡ç†å™¨æœåŠ¡ï¼š `sudo systemctl restart gdm/kdm/lightdm`

    æ³¨é”€æ¡Œé¢é‡æ–°ç™»å½•ç³»ç»Ÿï¼š`sudo pkill Xorg` æˆ–è€… `sudo systemctl restart systemd-logind`

    `ps -t tty1` æ‰¾åˆ°è¿›ç¨‹ä¸­ xinit/xwindowâ€¦ æˆ– gnome-session-binary çš„ pidï¼Œ ç„¶å `kill -9 pid` å³å¯

    è¾“å…¥ `init 3` å³å¯åœæ­¢ X windowï¼Œè¾“å…¥ `startx` é‡æ–°å¯åŠ¨æ¡Œé¢

æ“ä½œå®Œæˆä¹‹åç­‰å¾…ä¸€ä¼šå„¿å°±ä¼šé‡æ–°è¿›å…¥æ¡Œé¢ï¼Œç³»ç»Ÿå¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ã€‚

#### â€œé­”æ³•é”®â€ å¤§æ³•æ‰‹å·¥é‡å¯å†…æ ¸reisub

å½»åº•æ­»æœºï¼Œé”®ç›˜æ— æ³•è¾“å…¥ä»»ä½•å†…å®¹ï¼Œæ— æ³•è¿›å…¥æ§åˆ¶å°æ³¨é”€å½“å‰ç”¨æˆ·ï¼Œå¯ä»¥ä½¿ç”¨â€œé­”æ³•é”®â€å¼ºåˆ¶é‡å¯ï¼š

    https://www.kernel.org/doc/html/latest/admin-guide/sysrq.html

    https://fedoraproject.org/wiki/QA/Sysrq

    https://wiki.ubuntu.com/Kernel/CrashdumpRecipe

    https://www.cnblogs.com/ylan2009/articles/2322950.html

    https://www.cnblogs.com/klb561/p/11013746.html

ä½¿ç”¨ Magic SysRq key éœ€è¦æ»¡è¶³ 3 ä¸ªå‰ç½®æ¡ä»¶ï¼š

1ã€é”®ç›˜ä¸Šæœ‰ Print Screen(SysRq) é”®

2ã€ç³»ç»Ÿä½¿ç”¨çš„å†…æ ¸ï¼Œåœ¨ç¼–è¯‘æ—¶æ‰“å¼€äº† CONFIG_MAGIC_KEY é€‰é¡¹

    $ grep -F CONFIG_MAGIC_SYSRQ /boot/config-$(uname -r)
    CONFIG_MAGIC_SYSRQ=y  # y è¡¨ç¤ºå·²å¼€å¯

3ã€ç³»ç»Ÿé…ç½® Magic Sysrq Key ä¸ºå¯ç”¨

    ä¸´æ—¶å¯ç”¨

        # sudo echo "1" > /proc/sys/kernel/sysrq  # Fedora ä¸æ”¯æŒè¿™æ ·å†™å…¥
        $ sudo sysctl -w kernel.sysrq=1

    é•¿æœŸä½¿ç”¨ï¼Œç¼–è¾‘ /etc/sysctl.conf æ·»åŠ å¦‚ä¸‹ï¼š

        kernel.sysrq = 1

    æ›´æ”¹é…ç½®åä½¿ç”¨ä»¥ä¸‹æ–¹å¼æ¿€æ´»

        $ sudo sysctl -p

éªŒè¯ï¼š

    $ cat /proc/sys/kernel/sysrq
    1

æ»¡è¶³äº†å‰ç½®æ¡ä»¶ï¼Œåœ¨ç³»ç»Ÿæ­»æœºå¼‚å¸¸æ—¶ï¼ŒæŒ‰ä½ Alt ä¸æ”¾ï¼Œé¡ºæ¬¡æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š

    æŒ‰ sysrq é”®ï¼Œå¦‚æœæ˜¯ç¬”è®°æœ¬é”®ç›˜å¯èƒ½éœ€è¦ç»„åˆé”® Fn + SysRq

    æ¾å¼€ sysrq é”®ï¼Œå¦‚æœæ˜¯ç¬”è®°æœ¬é”®ç›˜æ¾å¼€ Fn + SysRq

        SysRq å«åšç³»ç»Ÿè¯·æ±‚ï¼Œè¿™ä¸ªæ—¶å€™è¾“å…¥çš„ä¸€åˆ‡éƒ½ä¼šç›´æ¥ç”± Linux å†…æ ¸æ¥å¤„ç†ï¼Œå®ƒå¯ä»¥è¿›è¡Œè®¸å¤šä½çº§æ“ä½œã€‚

    ä¾æ¬¡æŒ‰ä¸‹å­—æ¯ r e i s u b ï¼Œæ¯ä¸ªå­—æ¯éœ€è¦é—´éš” 5-10s å†æ‰§è¡Œä¸‹ä¸€ä¸ªåŠ¨ä½œã€‚ reisub ä¸­çš„æ¯ä¸€ä¸ªå­—æ¯éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹æ“ä½œï¼Œåˆ†åˆ«è¡¨ç¤ºï¼š

        r : unRaw       å°†é”®ç›˜æ§åˆ¶ä» X Server é‚£é‡ŒæŠ¢å›æ¥ï¼Œä½¿æŒ‰é”®å¯ä»¥ç©¿é€ x server æ•æ‰ä¼ é€’ç»™å†…æ ¸

            k : Sak (Secure Access Key) ç¡®ä¿ä½¿ç”¨ init è¿›ç¨‹å¯åŠ¨çš„ç»ˆç«¯ï¼Œé˜²æœ¨é©¬

        e : tErminate   å‘é™¤ init å¤–è¿›ç¨‹å‘é€ SIGTERM ä¿¡å·ï¼Œè®©å…¶è‡ªè¡Œç»“æŸ

        i : kIll        å‘é™¤ init ä»¥å¤–æ‰€æœ‰è¿›ç¨‹å‘é€ SIGKILL ä¿¡å·ï¼Œå¼ºåˆ¶ç»“æŸè¿›ç¨‹

        s : Sync        åŒæ­¥ç¼“å†²åŒºæ•°æ®åˆ°ç¡¬ç›˜ï¼Œé¿å…æ•°æ®ä¸¢å¤±

        u : Unmount     å°†æ‰€æœ‰å·²ç»æŒ‚è½½çš„æ–‡ä»¶ç³»ç»Ÿ é‡æ–°æŒ‚è½½ä¸ºåªè¯»

        b : reBoot      ç«‹å³é‡å¯è®¡ç®—æœº

æ¯æŒ‰ä¸€æ¬¡éƒ½ç­‰é‚£ä¹ˆå‡ ç§’ç§ï¼Œä½ ä¼šå‘ç°æ¯æŒ‰ä¸€æ¬¡ï¼Œå±å¹•ä¸Šä¿¡æ¯éƒ½ä¼šæœ‰æ‰€å˜åŒ–ã€‚æœ€åæŒ‰ä¸‹ b æ—¶ï¼Œå±å¹•æ˜¾ç¤º resetï¼Œè¿™æ—¶ä½ çš„æ‰‹å¯ä»¥æ¾å¼€äº†ï¼Œç­‰å‡ ç§’é’Ÿï¼Œè®¡ç®—æœºå°±ä¼šå®‰å…¨é‡å¯ã€‚åˆ‡è®°ä¸å¯å¿«é€Ÿè¿æŒ‰ï¼Œå¦åˆ™åæœå’Œæ‰£ç”µæ± æ‹”ç”µæºçº¿æ— å¼‚ã€‚

æ‹“å±•ï¼š

    # ç«‹å³é‡æ–°å¯åŠ¨è®¡ç®—æœº
    echo "b" > /proc/sysrq-trigger

    # ç«‹å³å…³é—­è®¡ç®—æœº
    echo "o" > /proc/sysrq-trigger

    # å¯¼å‡ºå†…å­˜åˆ†é…çš„ä¿¡æ¯ ï¼ˆå¯ä»¥ç”¨/var/log/message æŸ¥çœ‹ï¼‰
    echo "m" > /proc/sysrq-trigger

    # å¯¼å‡ºå½“å‰CPUå¯„å­˜å™¨ä¿¡æ¯å’Œæ ‡å¿—ä½çš„ä¿¡æ¯
    echo "p" > /proc/sysrq-trigger

    # å¯¼å‡ºçº¿ç¨‹çŠ¶æ€ä¿¡æ¯
    echo "t" > /proc/sysrq-trigger

    # æ•…æ„è®©ç³»ç»Ÿæºƒ
    echo "c" > /proc/sysrq-trigger

    # ç«‹å³é‡æ–°æŒ‚è½½æ‰€æœ‰çš„æ–‡ä»¶ç³»ç»Ÿ
    echo "s" > /proc/sysrq-trigger

    # ç«‹å³é‡æ–°æŒ‚è½½æ‰€æœ‰çš„æ–‡ä»¶ç³»ç»Ÿä¸ºåªè¯»
    echo "u" > /proc/sysrq-trigger

### Linux æ¡Œé¢çš„åŸºæœ¬ç›®å½•è§„èŒƒ XDGï¼ˆX Desktop Groupï¼‰

å¯¹æ¡Œé¢çš„å›¾å½¢åŒ–ç¯å¢ƒæ¥è¯´ï¼Œè§„èŒƒåŒ–çš„ä½¿ç”¨ç›®å½•ï¼Œç”¨å„ç§å˜é‡æ¥æŒ‡å®šï¼Œæœ‰ä¸€å¥—å…·ä½“çš„è§„åˆ™ï¼Œå®šç¾©äº†åŸºæœ¬çš„ Linux ä¸‹çš„ X Window System (X11) ä»¥åŠå…¶ä»– Unix-like ä½œæ¥­ç³»çµ±çš„æ¡Œé¢ç’°å¢ƒã€‚ç›®å‰æœ€æµè¡Œçš„ freedesktop çš„è§„èŒƒç§°ä¸º XDG

    https://www.freedesktop.org/software/systemd/man/file-hierarchy.html

    https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html

    https://wiki.archlinux.org/index.php/XDG_Base_Directory
    https://wiki.archlinux.org/title/Xdg-utils

    https://catcat.cc/post/wn3np/

    https://blog.csdn.net/u014025444/article/details/94029895

    https://winddoing.github.io/post/ef694e1f.html

    https://blog.csdn.net/weixin_29702195/article/details/116886216

    https://blog.csdn.net/u014025444/article/details/94029895

Linux æ“ä½œç³»ç»Ÿçš„åŸºæœ¬ç›®å½•ç»“æ„å‚è§ç« èŠ‚ [Linux ç›®å½•å’Œåˆ†åŒº](shellcmd.md)ã€‚

XDG åŸºæœ¬ç›®å½•è§„èŒƒåŸºäºä»¥ä¸‹æ¦‚å¿µï¼š

    XDG ç¯å¢ƒå˜é‡             è¯´æ˜                                    é»˜è®¤å€¼

    $XDG_DATA_HOME      ç”¨äºå†™å…¥ç‰¹å®šç”¨æˆ·æ•°æ®æ–‡ä»¶çš„åŸºæœ¬ç›®å½•              $HOME/.local/share
    $XDG_CONFIG_HOME    ç”¨äºå†™å…¥ç‰¹å®šç”¨æˆ·çš„é…ç½®æ–‡ä»¶åŸºæœ¬ç›®å½•              $HOME/.config
    $XDG_DATA_DIRS      é¦–é€‰çš„åŸºæœ¬æ•°æ®ç›®å½•                           /usr/local/share/:/usr/share/ ç­‰

    $XDG_CONFIG_DIRS    é¦–é€‰çš„åŸºæœ¬é…ç½®ç›®å½•                           /etc/xdg
    $XDG_CACHE_HOME     ç”¨äºå†™å…¥ç”¨æˆ·ç‰¹å®šçš„éå¿…è¦ï¼ˆç¼“å­˜ï¼‰æ•°æ®çš„åŸºæœ¬ç›®å½•    $HOME/.cache
    $XDG_RUNTIME_DIR    ç”¨æˆ·æ”¾ç½®ç‰¹å®šäºç”¨æˆ·çš„è¿è¡Œæ—¶æ–‡ä»¶å’Œå…¶ä»–æ–‡ä»¶å¯¹è±¡

$XDG_RUNTIME_DIR æ˜¯ç”¨æˆ·ç‰¹å®šçš„ä¸é‡è¦çš„è¿è¡Œæ—¶æ–‡ä»¶å’Œå…¶ä»–æ–‡ä»¶å¯¹è±¡ï¼ˆä¾‹å¦‚å¥—æ¥å­—ï¼Œå‘½åç®¡é“â€¦ï¼‰å­˜å‚¨çš„åŸºæœ¬ç›®å½•ã€‚è¯¥ç›®å½•å¿…é¡»ç”±ç”¨æˆ·æ‹¥æœ‰ï¼Œå¹¶ä¸”ä»–å¿…é¡»æ˜¯å”¯ä¸€å…·æœ‰è¯»å†™è®¿é—®æƒé™çš„ç›®å½•ã€‚å®ƒçš„Unixè®¿é—®æ¨¡å¼å¿…é¡»æ˜¯ 0700ã€‚

ç›®å½•çš„ç”Ÿå‘½å‘¨æœŸå¿…é¡»ç»‘å®šåˆ°ç™»å½•ç”¨æˆ·ã€‚å¿…é¡»åœ¨ç”¨æˆ·é¦–æ¬¡ç™»å½•æ—¶åˆ›å»ºï¼Œå¦‚æœç”¨æˆ·å®Œå…¨æ³¨é”€ï¼Œåˆ™å¿…é¡»åˆ é™¤è¯¥ç›®å½•ã€‚å¦‚æœç”¨æˆ·å¤šæ¬¡ç™»å½•ï¼Œä»–åº”è¯¥æŒ‡å‘åŒä¸€ç›®å½•ï¼Œå¹¶ä¸”å¿…é¡»ä»ç¬¬ä¸€æ¬¡ç™»å½•åˆ°ä»–åœ¨ç³»ç»Ÿä¸Šçš„æœ€åä¸€æ¬¡ç™»å‡ºæ—¶ç»§ç»­å­˜åœ¨ï¼Œè€Œä¸æ˜¯åœ¨ä¸¤è€…ä¹‹é—´åˆ é™¤ã€‚ç›®å½•ä¸­çš„æ–‡ä»¶å¿…é¡»ä¸èƒ½åœ¨é‡æ–°å¯åŠ¨æˆ–å®Œå…¨æ³¨é”€/ç™»å½•å¾ªç¯åç»§ç»­å­˜åœ¨ã€‚

è¯¥ç›®å½•å¿…é¡»ä½äºæœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸Šï¼Œä¸ä¸ä»»ä½•å…¶ä»–ç³»ç»Ÿå…±äº«ã€‚è¯¥ç›®å½•å¿…é¡»å®Œå…¨æŒ‰ç…§æ“ä½œç³»ç»Ÿçš„æ ‡å‡†è¿›è¡Œã€‚æ›´å…·ä½“åœ°è¯´ï¼Œåœ¨ç±»Unixæ“ä½œç³»ç»Ÿä¸Šï¼ŒAF_UNIXå¥—æ¥å­—ï¼Œç¬¦å·é“¾æ¥ï¼Œç¡¬é“¾æ¥ï¼Œé€‚å½“çš„æƒé™ï¼Œæ–‡ä»¶é”å®šï¼Œç¨€ç–æ–‡ä»¶ï¼Œå†…å­˜æ˜ å°„ï¼Œæ–‡ä»¶æ›´æ”¹é€šçŸ¥ï¼Œå¿…é¡»æ”¯æŒå¯é çš„ç¡¬é“¾æ¥è®¡æ•°ï¼Œå¹¶ä¸”å¯¹æ–‡ä»¶åæ²¡æœ‰é™åˆ¶åº”è¯¥å¼ºåŠ å­—ç¬¦é›†ã€‚æ­¤ç›®å½•ä¸­çš„æ–‡ä»¶å¯èƒ½éœ€è¦å®šæœŸæ¸…ç†ã€‚ä¸ºç¡®ä¿ä¸åˆ é™¤æ‚¨çš„æ–‡ä»¶ï¼Œä»–ä»¬åº”è‡³å°‘æ¯6å°æ—¶å•è°ƒæ—¶é—´ä¿®æ”¹ä¸€æ¬¡è®¿é—®æ—¶é—´æˆ³è®°ï¼Œæˆ–è€…åœ¨æ–‡ä»¶ä¸Šè®¾ç½®â€œç²˜æ»â€ä½ã€‚

å¦‚æœ $XDG_RUNTIME_DIR æœªè®¾ç½®ï¼Œåº”ç”¨ç¨‹åºåº”å›é€€åˆ°å…·æœ‰ç±»ä¼¼åŠŸèƒ½çš„æ›¿æ¢ç›®å½•å¹¶æ‰“å°è­¦å‘Šæ¶ˆæ¯ã€‚åº”ç”¨ç¨‹åºåº”ä½¿ç”¨æ­¤ç›®å½•è¿›è¡Œé€šä¿¡å’ŒåŒæ­¥ï¼Œå¹¶ä¸”ä¸åº”åœ¨å…¶ä¸­æ”¾ç½®è¾ƒå¤§çš„æ–‡ä»¶ï¼Œå› ä¸ºå®ƒå¯èƒ½é©»ç•™åœ¨è¿è¡Œæ—¶å†…å­˜ä¸­ï¼Œå¹¶ä¸”ä¸ä¸€å®šå¯ä»¥äº¤æ¢åˆ°ç£ç›˜ã€‚

ç¯å¢ƒå˜é‡æ¸…å•ï¼šç”¨æˆ·å±‚é¢å˜é‡ï¼ˆUser-Level Variablesï¼‰

    $XDG_DATA_HOME          $HOME/.local/share/

        å‚¨ç”¨æˆ·ç‰¹å®šçš„æ•°æ®æ–‡ä»¶çš„åŸºå‡†ç›®å½•ã€‚é€šå¸¸æ¥è¯´æ–‡ä»¶è¾ƒå¤§ï¼Œæœ‰åå¤ä½¿ç”¨çš„ä»·å€¼ï¼Œå»ºè®®å¤‡ä»½é‡Œé¢çš„æ–‡ä»¶ã€‚

        ä½¿ç”¨åœºæ™¯ï¼š

            ç”¨æˆ·ä¸‹è½½çš„æ’ä»¶ï¼›
            ç¨‹åºäº§ç”Ÿçš„æ—¥å¿—ã€å†å²è®°å½•ã€ç¦»çº¿èµ„æºç­‰æ•°æ®æ–‡ä»¶ï¼›
            ç”¨æˆ·è¾“å…¥å†å²ã€ä¹¦ç­¾ã€é‚®ä»¶ç­‰ã€‚

    $XDG_CONFIG_HOME        $HOME/.config/

        å­˜å‚¨ç”¨æˆ·ç‰¹å®šçš„é…ç½®æ–‡ä»¶çš„åŸºå‡†ç›®å½•ï¼Œå»ºè®®å¤‡ä»½é‡Œé¢çš„æ–‡ä»¶ã€‚

        ä½¿ç”¨åœºæ™¯ï¼š

            ç”¨æˆ·é…ç½®ã€‚

        ä¸€èˆ¬æ¥è¯´ï¼Œè¿™ä¸ªåœ°æ–¹å¯ä»¥åœ¨ç¨‹åºåˆå§‹åŒ–çš„æ—¶å€™å­˜å‚¨ä¸€ä¸ªé»˜è®¤çš„é…ç½®æ–‡ä»¶ä¾›åŠ è½½å’Œä¿®æ”¹ã€‚

    $XDG_CACHE_HOME         $HOME/.cache/

        åº”å­˜å‚¨ç”¨æˆ·ç‰¹å®šçš„éé‡è¦æ€§æ•°æ®æ–‡ä»¶çš„åŸºå‡†ç›®å½•ï¼Œå»ºè®®å¤‡ä»½é‡Œé¢çš„æ–‡ä»¶ã€‚

        ä½¿ç”¨åœºæ™¯ï¼š

            ç¼“å­˜çš„ç¼©ç•¥å›¾ã€æ­Œæ›²æ–‡ä»¶ã€è§†é¢‘æ–‡ä»¶ç­‰ã€‚
            ç¨‹åºåº”è¯¥åšåˆ°å“ªæ€•è¿™ä¸ªç›®å½•è¢«ç”¨æˆ·åˆ äº†ä¹Ÿèƒ½æ­£å¸¸è¿è¡Œã€‚

    $XDG_RUNTIME_DIR

        åº”å­˜å‚¨ç”¨æˆ·ç‰¹å®šçš„éé‡è¦æ€§è¿è¡Œæ—¶æ–‡ä»¶å’Œä¸€äº›å…¶ä»–æ–‡ä»¶å¯¹è±¡ï¼ˆä¾‹å¦‚å¥—æ¥å­—ï¼Œå‘½åç®¡é“â€¦ï¼‰å­˜å‚¨çš„åŸºæœ¬ç›®å½•

        è¯¥ç›®å½•å¿…é¡»ç”±ç”¨æˆ·æ‹¥æœ‰ï¼Œå¹¶ä¸”è¯¥ç”¨æˆ·å¿…é¡»æ˜¯å”¯ä¸€å…·æœ‰è¯»å†™è®¿é—®æƒé™çš„ã€‚è¯¥ç›®å½•çš„ Unix è®¿é—®æ¨¡å¼å¿…é¡»æ˜¯ 0700ã€‚

ç”¨æˆ·å±‚é¢ç›®å½•çš„ç”Ÿå‘½å‘¨æœŸå¿…é¡»ç»‘å®šåˆ°ç™»å½•ç”¨æˆ·ã€‚å¿…é¡»åœ¨ç”¨æˆ·é¦–æ¬¡ç™»å½•æ—¶åˆ›å»ºï¼Œå¦‚æœç”¨æˆ·å®Œå…¨æ³¨é”€ï¼Œåˆ™å¿…é¡»åˆ é™¤è¯¥ç›®å½•ã€‚å¦‚æœç”¨æˆ·å¤šæ¬¡ç™»å½•ï¼Œä»–åº”è¯¥æŒ‡å‘åŒä¸€ç›®å½•ï¼Œå¹¶ä¸”å¿…é¡»ä»ç¬¬ä¸€æ¬¡ç™»å½•åˆ°ä»–åœ¨ç³»ç»Ÿä¸Šçš„æœ€åä¸€æ¬¡ç™»å‡ºæ—¶ç»§ç»­å­˜åœ¨ï¼Œè€Œä¸æ˜¯åœ¨ä¸¤è€…ä¹‹é—´åˆ é™¤ã€‚ç›®å½•ä¸­çš„æ–‡ä»¶å¿…é¡»ä¸èƒ½åœ¨é‡æ–°å¯åŠ¨æˆ–å®Œå…¨æ³¨é”€/ç™»å½•å¾ªç¯åç»§ç»­å­˜åœ¨ã€‚

ç”¨æˆ·å±‚é¢ç›®å½•å¿…é¡»ä½äºæœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸Šï¼Œä¸ä¸ä»»ä½•å…¶ä»–ç³»ç»Ÿå…±äº«ã€‚è¯¥ç›®å½•å¿…é¡»å®Œå…¨æŒ‰ç…§æ“ä½œç³»ç»Ÿçš„æ ‡å‡†è¿›è¡Œã€‚æ›´å…·ä½“åœ°è¯´ï¼Œåœ¨ç±»Unixæ“ä½œç³»ç»Ÿä¸Šï¼ŒAF_UNIXå¥—æ¥å­—ï¼Œç¬¦å·é“¾æ¥ï¼Œç¡¬é“¾æ¥ï¼Œé€‚å½“çš„æƒé™ï¼Œæ–‡ä»¶é”å®šï¼Œç¨€ç–æ–‡ä»¶ï¼Œå†…å­˜æ˜ å°„ï¼Œæ–‡ä»¶æ›´æ”¹é€šçŸ¥ï¼Œå¿…é¡»æ”¯æŒå¯é çš„ç¡¬é“¾æ¥è®¡æ•°ï¼Œå¹¶ä¸”å¯¹æ–‡ä»¶åæ²¡æœ‰é™åˆ¶åº”è¯¥å¼ºåŠ å­—ç¬¦é›†ã€‚æ­¤ç›®å½•ä¸­çš„æ–‡ä»¶å¯èƒ½éœ€è¦å®šæœŸæ¸…ç†ã€‚ä¸ºç¡®ä¿ä¸åˆ é™¤æ‚¨çš„æ–‡ä»¶ï¼Œä»–ä»¬åº”è‡³å°‘æ¯6å°æ—¶å•è°ƒæ—¶é—´ä¿®æ”¹ä¸€æ¬¡è®¿é—®æ—¶é—´æˆ³è®°ï¼Œæˆ–è€…åœ¨æ–‡ä»¶ä¸Šè®¾ç½®â€œç²˜æ»â€ä½ã€‚

å¦‚æœ $XDG_RUNTIME_DIR æœªè®¾ç½®ï¼Œåº”ç”¨ç¨‹åºåº”å›é€€åˆ°å…·æœ‰ç±»ä¼¼åŠŸèƒ½çš„æ›¿æ¢ç›®å½•å¹¶æ‰“å°è­¦å‘Šæ¶ˆæ¯ã€‚åº”ç”¨ç¨‹åºåº”ä½¿ç”¨æ­¤ç›®å½•è¿›è¡Œé€šä¿¡å’ŒåŒæ­¥ï¼Œå¹¶ä¸”ä¸åº”åœ¨å…¶ä¸­æ”¾ç½®è¾ƒå¤§çš„æ–‡ä»¶ï¼Œå› ä¸ºå®ƒå¯èƒ½é©»ç•™åœ¨è¿è¡Œæ—¶å†…å­˜ä¸­ï¼Œå¹¶ä¸”ä¸ä¸€å®šå¯ä»¥äº¤æ¢åˆ°ç£ç›˜ã€‚

ç¯å¢ƒå˜é‡æ¸…å•ï¼šç³»ç»Ÿå±‚é¢å˜é‡ï¼ˆSystem-Level Variablesï¼‰

    $configï¼Œé»˜è®¤ä¸º ~/.config : /etc

        å¦‚æœåœ¨å°è¯•ç¼–å†™æ–‡ä»¶æ—¶ï¼Œç›®æ ‡ç›®å½•ä¸å­˜åœ¨ï¼Œåˆ™åº”å°è¯•ä½¿ç”¨æƒé™ 0700 åˆ›å»ºç›®æ ‡ç›®å½•ã€‚

        å¦‚æœç›®æ ‡ç›®å½•å·²å­˜åœ¨ï¼Œåˆ™ä¸åº”æ›´æ”¹æƒé™ã€‚

        åº”ç”¨ç¨‹åºåº”å‡†å¤‡å¥½å¤„ç†æ— æ³•å†™å…¥æ–‡ä»¶çš„æƒ…å†µï¼Œå› ä¸ºè¯¥ç›®å½•ä¸å­˜åœ¨ä¸”æ— æ³•åˆ›å»ºï¼Œæˆ–è€…å‡ºäºä»»ä½•å…¶ä»–åŸå› ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒå¯ä»¥é€‰æ‹©å‘ç”¨æˆ·å‘ˆç°é”™è¯¯æ¶ˆæ¯ã€‚

    $XDG_CONFIG_DIRS        /etc/xdg/

        æŒ‰ç…§åå¥½é¡ºåºçš„åŸºå‡†ç›®å½•é›†ï¼Œç”¨æ¥æœç´¢é™¤äº† $XDG_CONFIG_HOME ç›®å½•ä¹‹å¤–çš„é…ç½®æ–‡ä»¶ã€‚

        è¯¥ç›®å½•ä¸­çš„æ–‡ä»¶å¤¹åº”è¯¥ç”¨å†’å·ï¼ˆ:ï¼‰éš”å¼€ã€‚

        ä½¿ç”¨åœºæ™¯ï¼š

            å¯ä»¥è¢«ç”¨æˆ·ç‰¹å®šçš„é…ç½®æ–‡ä»¶æ‰€è¦†ç›–çš„ç³»ç»Ÿå±‚é¢çš„é…ç½®æ–‡ä»¶ã€‚

        ä¸€èˆ¬æ¥è¯´ï¼Œåº”ç”¨ç¨‹åºå®‰è£…çš„æ—¶å€™å¯ä»¥åŠ è½½é…ç½®æ–‡ä»¶åˆ°è¿™ä¸ªç›®å½•ã€‚

    $XDG_DATA_DIRS          /usr/local/share/:/usr/share/

        æŒ‰ç…§åå¥½é¡ºåºçš„åŸºå‡†ç›®å½•é›†ï¼Œç”¨æ¥æœç´¢é™¤äº† $XDG_DATA_HOME ç›®å½•ä¹‹å¤–çš„æ•°æ®æ–‡ä»¶ã€‚

        è¯¥ç›®å½•ä¸­çš„æ–‡ä»¶å¤¹åº”è¯¥ç”¨å†’å·ï¼ˆ:ï¼‰éš”å¼€ã€‚

        ä½¿ç”¨åœºæ™¯ï¼š

            å¯ä»¥è¢«æ‰€æœ‰ç”¨æˆ·ä½¿ç”¨çš„æ’ä»¶æˆ–è€…ä¸»é¢˜ã€‚

        ä¸€èˆ¬æ¥è¯´ï¼Œåº”ç”¨ç¨‹åºå®‰è£…çš„æ—¶å€™å¯ä»¥åŠ è½½æ’ä»¶ã€ä¸»é¢˜ç­‰æ–‡ä»¶åˆ°è¿™ä¸ªç›®å½•ã€‚

å‚è€ƒè§„èŒƒ

    æ–‡ä»¶                å‚è€ƒè§„èŒƒï¼šsubdiråº”è¯¥ä¸ºè½¯ä»¶å
    æ•°æ®æ–‡ä»¶        $datadir/subdir/filename
    é…ç½®æ–‡ä»¶        $confdir/subdir/filename

#### xdg-utils

å¸¸ç”¨çš„æ¡Œé¢ç¯å¢ƒæ“ä½œç»Ÿä¸€åŒ–ï¼Œæ¯”å¦‚å®‰è£…åº”ç”¨èœå•ï¼Œè®¾ç½®é»˜è®¤æµè§ˆå™¨ï¼Œè®¾ç½®é»˜è®¤ç”µå­é‚®ä»¶å®¢æˆ·ç«¯ï¼Œè®¾ç½®é»˜è®¤çš„åª’ä½“æ’­æ”¾å™¨ç­‰ç­‰

    https://wiki.archlinux.org/title/Xdg-utils

    https://juejin.cn/post/6844903944922087438

ä½¿ç”¨é¦–é€‰ç¨‹åºæ‰“å¼€ä¸€ä¸ªæ–‡ä»¶æˆ–é“¾æ¥ï¼Œæ¯”å¦‚æ‰“å¼€æ–‡ä»¶æ–‡ä»¶ç®¡ç†å™¨ã€æ‰“å¼€é‚®ä»¶ã€æ‰“å¼€æµè§ˆå™¨ï¼Œç»Ÿä¸€åˆ°ä¸€ä¸ªå·¥å…·ä¸‹é¢äº†

    xdg-open â€” opens a file or URL in the user's preferred application

xdg-utils ä» utils åç¼€æˆ‘ä»¬å¯ä»¥çŸ¥é“è¿™æ˜¯ä¸€ç»„å·¥å…·ï¼Œç›®çš„å°±æ˜¯èƒ½å¤Ÿè®©åº”ç”¨è½»æ¾çš„é›†æˆåœ¨ç”¨æˆ·çš„æ¡Œé¢ç¯å¢ƒï¼Œä¸å¿…è€ƒè™‘ç‰¹å®šçš„ç”¨æˆ·è¿è¡Œæ¡Œé¢ç¯å¢ƒã€‚

è¿™ç»„å·¥å…·é›†åŒ…æ‹¬ï¼š

    xdg-desktop-menu - å®‰è£…æ¡Œé¢åº”ç”¨èœå•é¡¹
    xdg-desktop-icon - åœ¨ç”¨æˆ·æ¡Œé¢å®‰è£…å›¾æ ‡
    xdg-email - ä½¿ç”¨ç”¨æˆ·é»˜è®¤ç”µå­é‚®ä»¶å®¢æˆ·ç«¯å†™ä¸€å°æ–°é‚®ä»¶ï¼Œå¯ä»¥ä½¿ç”¨å‚æ•°æŒ‡å®šä¸»é¢˜ã€å†…å®¹ã€é™„ä»¶ç­‰
    xdg-icon-resource - ä¸ºåº”ç”¨ç¨‹åºçš„å¯åŠ¨ç¨‹åºå®‰è£…ä¸€ä¸ªå›¾ç‰‡èµ„æº
    xdg-mime - æŸ¥è¯¢å…³äºæ–‡ä»¶ç±»å‹å¤„ç†çš„ä¿¡æ¯ï¼Œå¹¶ä¸ºæ–°æ–‡ä»¶ç±»å‹æ·»åŠ æè¿°
    xdg-open - ä»¥ç”¨æˆ·é¦–é€‰çš„åº”ç”¨ç¨‹åºæ‰“å¼€ä¸€ä¸ªURLï¼Œç”¨äºåˆ†åˆ«å¤„ç†å„è‡ªçš„URLæˆ–æ–‡ä»¶ç±»å‹
    xdg-screensaver - å±å¹•ä¿æŠ¤ç¨‹åºçš„æ§åˆ¶å·¥å…·ï¼Œå¦‚ï¼šé”å±ç­‰
    xdg-settings - æŸ¥çœ‹ã€è®¾ç½®é»˜è®¤webæµè§ˆå™¨å’ŒURLå¤„ç†ç¨‹åº

### GNOMEï¼ŒXorgï¼ŒX Windowï¼ŒX Serverï¼ŒWaylandæ˜¯ä»€ä¹ˆå…³ç³»

    https://www.zhihu.com/question/503270852

    https://zhuanlan.zhihu.com/p/134325713

    https://zhuanlan.zhihu.com/p/427637159

X window æ˜¯ä¸€ä¸ªæŠ€æœ¯ä½“ç³»

    åˆå« X çª—å£ç³»ç»Ÿï¼Œæœ€åˆèµ·æºäº1984å¹´ï¼Œæ˜¯ä¸ºäº†è§£å†³ç±» unix ç³»ç»Ÿçš„å›¾å½¢æ˜¾ç¤ºé—®é¢˜è€Œæ¨å‡ºçš„æ˜¾ç¤ºæ¥å£ã€‚å®ƒä½¿ç”¨ unix å¥—æ¥å­—å¼çš„ c/s æ¨¡å¼ï¼Œä»è€Œåˆ†ç¦»å‡ºäº†å‰ç«¯å’Œåç«¯ä¸¤éƒ¨åˆ†ï¼Œå¤©ç”Ÿå°±æ”¯æŒè¿œç¨‹åˆ†å¸ƒã€‚

        ä¹Ÿå°±æ˜¯è¯´ï¼Œåº”ç”¨ç¨‹åºå’Œæ˜¾ç¤ºå™¨ä¸å¿…åœ¨åŒä¸€å°è®¡ç®—æœºä¸Šï¼Œæ¯ä¸€ä¸ªçª—å£åº”ç”¨ç¨‹åºå¯¹åº”ä¸€ä¸ªï¼ˆæˆ–å¤šä¸ªï¼Ÿï¼‰X Clientï¼Œç”¨æˆ·çš„æ˜¾ç¤ºç•Œé¢ä¸Šè¿è¡Œçš„æ˜¯ X Serverã€‚æ³¨æ„è¿™é‡Œæœ¬åœ°è¿è¡Œçš„æ˜¯ X serverï¼Œè¿œç¨‹æœåŠ¡å™¨è¿è¡Œå›¾å½¢åŒ–ç¨‹åºä½¿ç”¨çš„æ˜¯ X clientã€‚æ³¨æ„è¿™ä¸ªæ¦‚å¿µåªæ˜¯ç¨‹åºå®ç°æ—¶çš„æœ¯è¯­ï¼Œè·Ÿæˆ‘ä»¬å®‰è£…åº”ç”¨æ—¶æœ¬åœ°ç§°å®¢æˆ·ç«¯ï¼Œè¿œç¨‹ç§°æœåŠ¡ç«¯ä¸åŒã€‚

        å°± X windows æ¡Œé¢ä½“ç³»æ¥è¯´ï¼Œå¤©ç”Ÿå°±æ”¯æŒè¿œç¨‹ï¼ŒXServer å’Œ XClient åœ¨åŒä¸€å°ç”µè„‘ä¸Šå°±æ˜¯è¿æ¥æœ¬åœ°æ¡Œé¢ï¼Œé€šè¿‡  ssh -x è¿æ¥å°±æ˜¯è¿œç¨‹æ¡Œé¢äº†ï¼Œæ²¡æœ‰æœ¬è´¨åŒºåˆ«ã€‚

    Xserverï¼šç”¨æ¥å¤„ç†ç”¨æˆ·è¾“å…¥å’Œç³»ç»Ÿè¾“å‡ºçš„æŒ‡ä»¤ã€‚X server è¿è¡Œåœ¨å·¥ä½œç«™ä¸Šï¼Œè€Œç”¨æˆ·åœ¨å…·æœ‰æ›´å¼ºå¤„ç†èƒ½åŠ›çš„è¿œç¨‹è®¡ç®—æœºä¸Šè¿è¡Œåº”ç”¨ç¨‹åºæ˜¯å¾ˆå¸¸è§çš„ã€‚

    X11(X Window System)ï¼šLinux æ¡Œé¢æ˜¾ç¤ºçš„åè®®ã€‚

    Xorgï¼šæ˜¯ Linux ä¸Šé€šç”¨çš„æ¡Œé¢ç¯å¢ƒï¼ˆåç«¯ï¼‰æœåŠ¡å™¨ï¼ˆX11çš„ä¸€ç§å…·ä½“å¼€æºå®ç°ï¼‰ã€‚å®ƒä½¿ç”¨ X11 åè®®ä¸ X client ç«¯åº”ç”¨ç¨‹åºè¿›è¡Œäº¤äº’çš„åº”ç”¨ç¨‹åºï¼ŒX Server åœ¨æ˜¾ç¤ºå™¨ä¸Šç»˜åˆ¶å†…å®¹å¹¶å‘é€è¾“å…¥äº‹ä»¶ï¼Œä¾‹å¦‚é¼ æ ‡ç§»åŠ¨ï¼Œå•å‡»å’Œå‡»é”®ã€‚å› ä¸ºå®ƒä¸ç›´æ¥ä¼ é€å›¾åƒæ•°æ®ï¼Œæ‰€ä»¥æ¯”è¾ƒèŠ‚çº¦å¸¦å®½ã€‚

    ç°åœ¨å¤§å¤šæ—¶å€™ï¼Œå¯ä»¥æŠŠ Xorgã€X11ã€X Server è¯´æˆ x-window ä½“ç³»çš„åŒä¸€ä¸ªä¸œè¥¿ï¼Œå°±æ˜¯ Linux æ¡Œé¢çš„ X åç«¯æœåŠ¡å™¨

        Xorg çš„å‰ç«¯å®ç°å°±æ˜¯ X serverï¼Œæ‰€ä»¥åˆç§° Xorg xserver æˆ– X11 server

ç°åœ¨ä¸»æµçš„ GNOMEã€KDEã€Xfce ç­‰æ¡Œé¢ç¯å¢ƒï¼Œä½¿ç”¨çš„ X Window ä½“ç³»éƒ½æ˜¯åŸºäº Xorg åŸºç¡€ä¹‹ä¸Šå¼€å‘ï¼Œä¹Ÿå°±æ˜¯æ¡Œé¢è½¯ä»¶ï¼ˆæˆ–è€…æ˜¯å›¾å½¢è½¯ä»¶ï¼‰çš„é›†åˆ

    x window ä½“ç³»çš„é€šç”¨å‘½ä»¤ï¼š startx åœ¨å‘½ä»¤è¡Œä¸‹å¯åŠ¨æ¡Œé¢ç¯å¢ƒ

æŸ¥çœ‹å½“å‰æ¡Œé¢ç¯å¢ƒæ˜¯ä»€ä¹ˆç±»å‹

    $ echo $XDG_SESSION_TYPE

GTK+ and Qt

    è¿™ä¸¤ä¸ªæ˜¯ GUI toolkits è½¯ä»¶åº“ï¼Œç±»ä¼¼ c è¯­è¨€çš„ stdio.hï¼Œwin32ï¼Œjava é‡Œ import çš„å„ç§å¤–éƒ¨åŒ…ï¼Œå¯ä»¥ä»»å¼€å‘è€…è°ƒç”¨ï¼ˆåº”è¯¥æ˜¯ C/C++ ä½¿ç”¨çš„åº“ï¼‰å»åˆ›å»ºä¸€äº›å›¾å½¢ç•Œé¢é‡Œé¢çš„æ§ä»¶ï¼Œä¾‹å¦‚ buttonï¼Œä¸‹æ‹‰èœå•ï¼Œçª—å£ç­‰ã€‚æˆ‘è®°å¾— JAVA é‡Œé¢ä¹Ÿæœ‰ç±»ä¼¼ AWT å’Œ Swing åº“ã€‚ç”¨è¿™ä¸€å¥—åº“å¼€å‘å‡ºçš„å›¾å½¢ç©ºé—´å°†ä¼šæœ‰ä¸€å¥—ç»Ÿä¸€çš„é£æ ¼å’Œæ ‡å‡†ï¼Œè¿™å°±æ˜¯ä¸åŒç³»ç»Ÿå®‰è£…çš„ä¸åŒè½¯ä»¶æœ‰çš„æ—¶å€™ä¼šæœ‰ç›¸åŒçš„æ ·å¼ï¼Œå› ä¸ºä»–ä»¬å¯èƒ½ä½¿ç”¨äº† GTK æˆ–è€… QT çš„åº“ã€‚

    KDE é»˜è®¤ä½¿ç”¨ Qt åº“å¼€å‘ï¼ŒGnome é»˜è®¤ä½¿ç”¨ GTK+ åº“å¼€å‘ï¼Œè€Œè¿™ä¸¤å¥—åº“åˆæ˜¯åŸºäº X window server çš„ï¼Œéœ€è¦éµå®ˆ x11 åè®®ï¼Œåœ¨ xwindow server ä¸Šè¿è¡Œï¼Œä½œä¸º client åº”ç”¨å®ç°çš„åŸºç¡€ç±»åº“ã€‚

Gnome 50(Fedora 43) å¼€å§‹å°†å½»åº•ç§»é™¤ x11 ä½“ç³»ï¼Œå®Œå…¨åˆ‡æ¢åˆ°ä½¿ç”¨ wayland ä½“ç³»ï¼Œå¯¹ x11 å°†ä½¿ç”¨ xwayland æŠ€æœ¯ä¿æŒå…¼å®¹ã€‚

#### Wayland

    https://docs.freebsd.org/en/books/handbook/wayland/

    https://wiki.archlinux.org/title/Wayland

    https://zhuanlan.zhihu.com/p/503627248

    ç”¨ Wayland å¼€å¯ Linux
        https://zhuanlan.zhihu.com/p/531205278

    GNOME è®¾ç½®é»˜è®¤ wayland æˆ– xorg
        https://docs.fedoraproject.org/en-US/quick-docs/switching-desktop-environments/

Wayland æ˜¯ä¸ X Window å¯¹ç­‰çš„æ¦‚å¿µï¼Œå±äºå¦ä¸€ç§æ˜¾ç¤ºæ ‡å‡†ï¼Œç›®çš„åœ¨äºæ›¿ä»£ X Window

    Wayland åªæ˜¯æä¾›ä¸€ä¸ªåè®®çš„åŸºç¡€æŠ½è±¡ï¼Œå‚è€ƒå®ç°å« Weston

    Gnomeã€KDE ç­‰éƒ½æœ‰å¯¹åº”çš„ Wayland å®ç°

    ä¸å†æ˜¯ Client-Server æ¨¡å¼ï¼Œè¿œç¨‹æ¡Œé¢çš„å®ç°æ–¹å¼ä¸åŒ

    Wayland ä½¿ç”¨ Xwayland ç»„ä»¶å…¼å®¹ä¾èµ– X11 çš„ä¼ ç»Ÿåº”ç”¨ï¼ŒåŸºäº X Window çš„ VNC è¿œç¨‹æ¡Œé¢ç¨‹åºè¿æ¥åˆ° wayland æ¡Œé¢ç¯å¢ƒæ—¶ç”± xvnc ç»„ä»¶æä¾›æ”¯æŒã€‚å¯¹äºæ™®é€šç”¨æˆ·æ¥è¯´ï¼Œä½“éªŒä¸åˆ°å˜åŒ–ã€‚

Wayland è‡ªå¸¦çš„ terminal emulator å« foot

    https://man.archlinux.org/man/foot.1.en
        https://codeberg.org/dnkl/foot

Wayland ç¯å¢ƒä½¿ç”¨ QT åº”ç”¨å¦‚æœå¯åŠ¨æŠ¥é”™ï¼Œéœ€è¦ä¿®æ”¹ /etc/environment

    QT_QPA_PLATFORM=wayland

### æ˜¾ç¤ºç®¡ç†å™¨ï¼ˆDisplayManagerï¼‰è®¾ç½®ç™»å½•åçš„æ¡Œé¢ç¯å¢ƒ

æ˜¾ç¤ºç®¡ç†å™¨åˆå«åš â€œç™»å½•ç®¡ç†å™¨â€ï¼Œå¦‚ gdmã€sddmã€lightdm ç­‰ï¼Œå…¶ä½œç”¨ä»…ä»…åªæ˜¯åœ¨ä½ å¼€æœºåï¼Œè®©ä½ è¾“å…¥ç”¨æˆ·åå’Œå¯†ç å¤„ç†ç”¨æˆ·èº«ä»½éªŒè¯ç™»å½•ï¼Œç„¶åå¼•å¯¼è¿›å…¥æ¡Œé¢ï¼Œè‡³æ­¤ä»»åŠ¡å®Œæˆï¼Œä¹‹åå°±äº¤ç»™æ¡Œé¢ç¯å¢ƒäº†ã€‚ä½ å¯ä»¥ä¸éœ€è¦ DMï¼Œç›´æ¥é€šè¿‡ startxè„šæœ¬å‘½ä»¤è¿›å…¥æ¡Œé¢ã€‚

    https://wiki.archlinux.org/title/Display_manager
        https://wiki.archlinux.org/title/GDM

    https://zhuanlan.zhihu.com/p/272740410

è®¾ç½®å¼€æœºå¯åŠ¨åˆ°æ¡Œé¢è¿˜æ˜¯å‘½ä»¤è¡Œï¼Œä¸»æµçš„æ¡Œé¢ç¯å¢ƒéƒ½ç”¨ systemctl æ¥ç®¡äº†ï¼Œæœ‰ä¸“é—¨çš„æ§åˆ¶å‘½ä»¤ï¼Œå‚è§ç« èŠ‚ [æ¡Œé¢ç¯å¢ƒçš„å¼€æœºè‡ªå¯åŠ¨]ã€‚å¦‚æœæ˜¯å¯åŠ¨åˆ°æ¡Œé¢ï¼Œsystemctl ä¼šè‡ªåŠ¨è°ƒåº¦åˆ°æ˜¾ç¤ºç®¡ç†å™¨è¿›è¡Œç”¨æˆ·ç™»å½•ã€‚

æ‰€ä»¥é¦–å…ˆè¦ç¡®ä¿ systemd è®¾ç½®å¼€æœºæ—¶å¯åŠ¨åˆ°æ¡Œé¢

    # ä¸€èˆ¬éƒ½ä½¿ç”¨ systemctl è¿›è¡Œæ§åˆ¶äº†
    $ systemctl get-default
    graphical.target

ç„¶åç¡®ä¿ systemd çš„æ˜¾ç¤ºç®¡ç†å™¨æœåŠ¡ä¹Ÿæ˜¯å¯åŠ¨çš„ã€‚

å¦‚æœå®‰è£…äº†å¤šä¸ªæ¡Œé¢ç¯å¢ƒï¼Œå¯ä»¥åœ¨æ˜¾ç¤ºç®¡ç†å™¨é€‰æ‹©å¯åŠ¨åˆ°å“ªä¸ªæ¡Œé¢ç¯å¢ƒ

    å¦‚æœæ˜¯æœ¬åœ°ç™»å½•ï¼Œåœ¨æ˜¾ç¤ºç®¡ç†å™¨çš„ç”¨æˆ·ç™»å½•ç•Œé¢ï¼Œç‚¹å‡»å³ä¸‹æ–¹çš„å°é½¿è½®å¯ä»¥é€‰æ‹©ä½¿ç”¨ä½•ç§æ¡Œé¢ç¯å¢ƒ

    å¦‚æœæ˜¯ xrdp è¿œç¨‹ç™»å½•ï¼Œåœ¨ â€œsessionâ€ å¤„é€‰æ‹©

å¦‚æœå®‰è£…äº†å¤šä¸ªæ˜¾ç¤ºç®¡ç†å™¨ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•åœ¨å®ƒä»¬ä¹‹é—´è¿›è¡Œé€‰æ‹©

    sudo dpkg-reconfigure gdm3

    GNOME æ˜¾ç¤ºç®¡ç†å™¨ gdmï¼Œåœ¨ flatpak æœ â€œLogin Manager Settingsâ€ å¯ä»¥å®šåˆ¶å‘ˆç°ç•Œé¢

    KDE çš„æ˜¾ç¤ºç®¡ç†å™¨ sddm

    Ubuntu Unity æ¡Œé¢æ˜¾ç¤ºç®¡ç†å™¨ lightdm

    Wayland Login Manager æ”¯æŒ x-window/wayland ç¯å¢ƒçš„å‘½ä»¤è¡Œä¸‹çš„æ˜¾ç¤ºç®¡ç†å™¨ wayland-lyl
    https://docs.freebsd.org/en/books/handbook/wayland/#wayland-ly

### çª—å£ç®¡ç†å™¨ï¼ˆWindows Managerï¼‰

çª—å£ç®¡ç†å™¨ vs æ¡Œé¢ç¯å¢ƒ

    çª—å£ç®¡ç†å™¨ï¼ˆWindows Managerï¼‰ï¼Œè´Ÿè´£ç»˜åˆ¶çª—å£çš„è¾¹æ¡†ï¼Œå¤„ç†çª—å£è¿è¡Œæ¯”å¦‚ç§»åŠ¨ã€æœ€å°åŒ–ä¹‹ç±»çš„è¡Œä¸ºã€‚

        https://linux.net.cn/article-12068-1.html

    æ¡Œé¢ï¼ˆDesktop Environmentï¼‰ï¼Œæ˜¯çª—å£ç®¡ç†å™¨çš„è¶…é›†ï¼Œå®ƒä½¿ç”¨åˆæˆå™¨ï¼ˆCompositorï¼‰æŠŠå¤šä¸ªç¨‹åºçª—å£ç»˜åˆ¶å‡ºçš„å†…å®¹ï¼ŒæŠŠå®ƒä»¬åˆæˆå‡ºæ¥å¹¶é«˜æ•ˆåœ°å¢é‡æ›´æ–°ç”¨æˆ·ç•Œé¢ GUIã€‚æ¯”å¦‚ compiz è¿™ç§åŸºäº OpenGL çš„æ··åˆå‹çª—å£ç®¡ç†å™¨ï¼Œç”¨ç«‹ä½“çš„æ–¹å¼æ˜¾ç¤ºçª—å£åˆ‡æ¢ã€‚

æˆ‘ä»¬å¸¸ç”¨çš„ Gnome å°±æ˜¯ä¸€ä¸ªæ¡Œé¢ç¯å¢ƒï¼Œé»˜è®¤ä½¿ç”¨ Metacity ä½œä¸ºçª—å£ç®¡ç†å™¨ã€‚

å¸¸è§çš„çª—å£ç®¡ç†å™¨ä¸€èˆ¬éƒ½åŸºäº wlroots åº“ï¼šä¸€ä¸ªä¸ºåŸºäº wayland çš„å„ç±» wm/deï¼ˆæˆ–è€…å«compositorï¼‰æä¾›åŸºç¡€è®¾æ–½çš„é¡¹ç›®

    https://gitlab.freedesktop.org/wlroots/wlroots

ä½¿ç”¨çª—å£ç®¡ç†å™¨ï¼Œéœ€è¦è‡ªå·±é…ç½®è½¯ä»¶æºï¼Œè‡ªå·±å®‰è£…å­—ä½“ï¼Œfirefox å‡æ­»é—®é¢˜è‡ªå·±è§£å†³ã€‚

    https://zhuanlan.zhihu.com/p/47526909

    https://www.zhihu.com/question/41364792

    https://zhongguo.eskere.club/%E9%80%82%E7%94%A8%E4%BA%8E-linux-%E7%9A%84-5-%E4%B8%AA%E6%9C%80%E4%BD%B3%E7%AA%97%E5%8F%A3%E7%AE%A1%E7%90%86%E5%99%A8/2021-10-03/

å¹³é“ºå¼çª—å£ç®¡ç†å™¨ï¼šè‡ªåŠ¨æ’åˆ—çª—å£ï¼Œä»¥ä¸é‡å çš„æ–¹å¼å æ®æ•´ä¸ªå±å¹•ï¼Œè‡ªåŠ¨çš„è¢«è°ƒæ•´å„ä¸ªçª—å£å¤§å°ã€‚

    i3 WM - æ›´å¥½çš„å¹³é“ºåŠåŠ¨æ€çª—å£ç®¡ç†å™¨ã€‚å®Œå…¨é‡å†™ã€‚ç›®æ ‡å¹³å°æ˜¯ GNU/Linux å’Œ BSD æ“ä½œç³»ç»Ÿã€‚

    i3-gaps - i3-gaps æ˜¯æ‹¥æœ‰æ›´å¤šåŠŸèƒ½çš„ i3ã€‚

    sway - i3 çš„ wayland å®ç°ï¼ŒSwayFX åŠ¨æ€å£çº¸å®ç°äº†æ¡Œé¢èƒŒæ™¯æ·»åŠ å„ç§ç‰¹æ•ˆå’ŒåŠ¨ç”»

    Miracle-WM - æ–°å‡ºç°çš„ä¸€ä¸ª wayland ä¸‹çš„å¹³é“ºå¼çª—å£ç®¡ç†å™¨ï¼Œç›®æ ‡æ˜¯è¶…è¶Š i3/sway

    Pop!_OS Shell - Pop Shell æ˜¯åŸºäº GNOME shell çš„çª—å£ç®¡ç†å™¨ï¼Œé”®ç›˜é©±åŠ¨ï¼Œè‡ªåŠ¨å¹³é“ºã€‚

    Bspwm - bspwm æ˜¯ä¸€ä¸ªå¹³é“ºå¼çª—å£ç®¡ç†å™¨ï¼Œå°†çª—å£ä»¥äºŒå‰æ ‘çš„å¶ç»“ç‚¹çš„æ–¹å¼å±•ç°ã€‚

    Herbstluftwm - ä½¿ç”¨ Xlib å’Œ Glib çš„æ‰‹å·¥å¹³é“ºå¼çª—å£ç®¡ç†å™¨ã€‚

    Qtile - qtile æ˜¯ä¸€æ¬¾å…¨åŠŸèƒ½ï¼Œå¯ hack çš„å¹³é“ºçª—å£ç®¡ç†å™¨ï¼Œä½¿ç”¨ Python ç¼–å†™å’Œé…ç½®ã€‚

    wayfire - åŸºäº Wayland çš„ 3D æ··æˆå™¨

        https://github.com/WayfireWM/wayfire/wiki

        é…ç½®æ–‡ä»¶ä½ç½®ï¼š~/.config/wayfire.ini

        Wayfire ç›¸å…³é…ç½®ä¸ç¾åŒ–æ–¹æ¡ˆ https://alancorn.github.io/blogs/2023/wayfire.html

å åŠ å¼çª—å£ç®¡ç†å™¨ï¼šæµ®åŠ¨å¼çª—å£ç®¡ç†å™¨ï¼Œç”±äºå±å¹•ç©ºé—´æœ‰é™ï¼Œå½“å‰æ¿€æ´»çš„çª—å£ä¼šæµ®åœ¨æœ€ä¸Šé¢ï¼Œè€Œé®ä½ä¸‹é¢çš„çª—å£ã€‚

    labwc - æ¯” wayfire æ›´è½»é‡çº§ï¼Œæ ‘è“æ´¾ 3 ä¹Ÿå¯ä»¥ä½¿ç”¨

        https://mephisto.cc/series/labwc/

        çª—å£ç®¡ç†å™¨labwcä½¿ç”¨è®° https://mephisto.cc/tech/labwc/
            é…ç½®æ–‡ä»¶å‚è€ƒ https://github.com/kmephistoh/dotfiles/tree/main/.config/labwc

    Openbox - é«˜åº¦å¯é…ç½®ï¼Œå¸¦æœ‰å¯æ‰©å±•æ ‡å‡†æ”¯æŒçš„ä¸‹ä¸€ä»£çª—å£ç®¡ç†å™¨ã€‚

    2bwm - å¿«é€Ÿçš„æµ®åŠ¨çª—å£ç®¡ç†ï¼Œæœ‰ä¸¤ä¸ªç‰¹æ®Šè¾¹ç•Œï¼ŒåŸºäº XCB åº“ï¼Œç”± mcwm è¡ç”Ÿã€‚

    Blackbox - å¿«é€Ÿï¼Œè½»é‡åŒ–çš„ X çª—å£ç³»ç»Ÿçª—å£ç®¡ç†å™¨ï¼Œæ²¡æœ‰é‚£äº›çƒ¦äººçš„åº“ä¾èµ–ã€‚

    Fluxbox - åŸºäº Blackbox 0.61.1 ä»£ç çš„ X çª—å£ç®¡ç†å™¨ã€‚

åŠ¨æ€çª—å£ç®¡ç†å™¨

    awesome - é«˜åº¦å¯é…ç½®ï¼Œä¸‹ä¸€ä»£ X æ¡†æ¶çª—å£ç®¡ç†å™¨

        https://blog.kelu.org/tech/2021/12/29/linux-awesome-wm.html

        https://blog.theerrorlog.com/switching-from-gnome-shell-to-awesome-wm-zh.html

        awesome çª—å£ç®¡ç†å™¨ä½¿ç”¨å¤‡å¿˜ https://blog.kelu.org/tech/2021/12/29/linux-awesome-wm.html

    dwm - X åŠ¨æ€çª—å£ç®¡ç†å™¨ã€‚å®ƒä»¥å¹³é“ºï¼Œå•ç‰‡é•œä»¥åŠæµ®åŠ¨å¸ƒå±€çš„æ–¹å¼ç®¡ç†çª—å£

        https://zhuanlan.zhihu.com/p/183861786

    spectrwm - å°å‹åŠ¨æ€å¹³é“º X11 çª—å£ç®¡ç†å™¨ã€‚ä¸»è¦å— xmonad å’Œ dwm å¯å‘ã€‚

    xmonad - åŠ¨æ€å¹³é“º X11 çª—å£ç®¡ç†å™¨ï¼Œç”¨ Haskell ç¼–å†™å’Œé…ç½®ã€‚

çª—å£ç®¡ç†å™¨èƒŒåçš„å·¥å…· --- åˆæˆå™¨ï¼ˆCompositorï¼‰ï¼š

    Mutter  -  GNOMEçš„çª—å£ç®¡ç†å™¨å’Œåˆæˆå™¨

    Compton - Compton æ˜¯ä¸€æ¬¾ç‹¬ç«‹çš„åˆæˆç®¡ç†å™¨ï¼Œé€‚åˆåŒæ²¡æœ‰åŸç”Ÿæä¾›åˆæˆåŠŸèƒ½çš„çª—å£ç®¡ç†å™¨ä¸€åŒä½¿ç”¨ã€‚

    Gamescope - Gamescope æ˜¯ä¸€æ¬¾å¾®åˆæˆå™¨ï¼Œæä¾›ä¸€ä¸ªå¸¦æœ‰ç‹¬ç«‹è¾“å…¥ï¼Œåˆ†è¾¨ç‡å’Œåˆ·æ–°ç‡çš„æ²™ç›’ Xwayland æ¡Œé¢ã€‚

    Sway - Sway æ˜¯å¹³é“º Wayland åˆæˆå™¨ï¼Œæ›¿ä»£ X11 ä¸‹ i3 çª—å£ç®¡ç†å™¨ï¼ˆswayæ˜ç¡®è¯´ä¸æ”¯æŒè‹±ä¼Ÿè¾¾æ˜¾å¡ï¼‰ã€‚

    Mir - Miracle-WM çš„åˆæˆå™¨

    Xcompmgr - Xcompmgr æ˜¯ä¸€ä¸ªç®€å•çš„åˆæˆç®¡ç†å™¨ï¼Œèƒ½å¤Ÿæ¸²æŸ“ä¸‹æ‹‰é˜´å½±ï¼Œä½¿ç”¨ transset å·¥å…·çš„è¯ï¼Œè¿˜å¯ä»¥å®ç°ç®€å•çš„çª—å£é€æ˜ã€‚

    Compizï¼šOpenGL çª—å£å’Œåˆæˆç®¡ç†å™¨ï¼Œèƒ½å®ç°ä¸‰ç»´çš„åˆ‡æ¢çª—å£

        http://wiki.compiz.org/CommonKeyboardShortcuts

        Fedora ç‰ˆ https://spins.fedoraproject.org/zh_Hans_CN/mate-compiz

        Compizï¼š2022å¹´å¹´ä¸­å®‰è£…ã€é…ç½®å’Œä½¿ç”¨ https://ubunlog.com/zh-CN/compiz%E5%AE%89%E8%A3%85%E4%BD%BF%E7%94%A82022/

        compizconfigè®¾ç½® https://blog.csdn.net/ysynhtt/article/details/44948989

        ä½¿ç”¨compiz https://blog.csdn.net/kewen_123/article/details/115871744

    Hyprland: ä¸€ä¸ªåŸºäº wlroots çš„åŠ¨æ€å¹³é“º Wayland åˆæˆå™¨ï¼ŒåŠ¨æ€çª—å£çš„å˜æ¢å¿«é€Ÿå¹³æ»‘

        https://wiki.hyprland.org/Getting-Started/Master-Tutorial/

        https://cascade.moe/posts/hyprland-configure/

        https://www.bilibili.com/read/cv22707313/

        ä¸ä½¿ç”¨ wayland çš„ Hypr --- ä½¿ç”¨ Xorg çš„çª—å£ç®¡ç†å™¨
            https://github.com/vaxerski/Hypr

#### i3

é€šè¿‡é”®ç›˜æ“ä½œçš„ i3 å¹³é“ºçª—å£ç®¡ç†å™¨ä½¿ç”¨ Linux æ¡Œé¢ï¼Œå½“æ‚¨å¼€å§‹ä½¿ç”¨ i3 æ—¶ï¼Œæ‚¨éœ€è¦è®°ä½å…¶ä¸­çš„ä¸€äº›å¿«æ·æ–¹å¼æ‰èƒ½ä½¿ç”¨ã€‚

    https://i3wm.org/docs/userguide.html

    è‡ªå®šä¹‰å‚è€ƒ

        https://github.com/Karmenzind/dotfiles-and-scripts/blob/master/home_k/.config/i3/common

        https://github.com/Karmenzind/dotfiles-and-scripts/blob/master/home_k/.config/i3status/config

        ä»é›¶å¼€å§‹é…ç½® i3-wm https://obster-y.github.io/zh-cn/posts/c4304786-bbc2-11eb-8847-0772b2ac4cf2/

    https://zhuanlan.zhihu.com/p/44783017

    https://zhuanlan.zhihu.com/p/51077654

    https://segmentfault.com/a/1190000022083424

åœ¨è¿œç¨‹æ¡Œé¢ xrdp ä¸‹ä½¿ç”¨ i3ï¼Œéœ€è¦ç»„ä»¶ xorgxrdpï¼Œå‚è§ç« èŠ‚ [xorgxrdp]ã€‚

å®‰è£…

    # ä¸å®‰è£… urxvtï¼Œæ¢ä¸º terminator
    $ sudo dnf install -y i3 i3-ipc i3status i3lock dmenu terminator --exclude=rxvt-unicode

    $ sudo dnf group install "i3 desktop" "Window Managers"

    # é«˜åˆ†è¾¨ç‡å°å±éœ€è¦è°ƒæ•´ä¸€ä¸‹dpi
    $ echo 'Xft.dpi: 192' > ~/.Xresources

å‰å¯¼é”®å« mod é”®ï¼Œå¯ä»¥ç”±ç”¨æˆ·è®¾å®šï¼Œå¯ä»¥æ˜¯ Mod1(alté”®) æˆ–è€…æ˜¯ Mod4(Super/Win)ã€‚

    # ++++++=å®šä¹‰æŒ‰é”®å˜é‡=++++++#
    # (Mod1 = Alt, Mod4 = Super/Win)
    set $mod Mod4
    set $m_alt Mod1

    æ‰“å¼€ç»ˆç«¯ urxvt          <mod> + <ENTER>

    ä½¿ç”¨å‘½ä»¤åŒº              <mod> + d ï¼Œå¦‚æœè¾“å…¥â€œ i3-msg exit ",è¿è¡Œè¯¥å‘½ä»¤å³å¯é€€å‡º i3 wm

    åˆ‡æ¢åˆ°å·¥ä½œåŒº num        <mod> + num

    æŠŠçª—å£ç§»åˆ°å·¥ä½œåŒº num    $mod+Shift+num

    åˆ‡æ¢çª—å£                Super+hæˆ–jæˆ–kæˆ–l æˆ–è€… Super+ä¸Šä¸‹å·¦å³ç®­å¤´

    æ€æ‰çª—å£                Super+Shift+q

    é€€å‡º i3                 Super+Shift+e

çª—å£æ¨¡å¼

    çª—å£åœ¨å±‚å ã€ æ ‡ç­¾å’Œå¹³é“ºä¹‹é—´æ¥å›åˆ‡æ¢    Super+sã€wã€e

    å¹³é“ºæ¨¡å¼åˆ‡æ¢æ°´å¹³æˆ–å‚ç›´               super+vã€hï¼Œå†å¼€æ–°çª—å£å°±å¯ä»¥çœ‹åˆ°å˜åŒ–äº†

åˆ‡æ¢æ¨¡å¼åï¼Œæ–°å¼€çª—å£æ˜¯åœ¨å½“å‰çª—å£åŒºåŸŸæ‰§è¡Œä½ çš„æ¨¡å¼ï¼Œä¸æ–­çš„åœ¨å­çª—å£å¥—å¨ƒã€‚

åœ¨ i3 ä¸­ï¼Œå·¥ä½œåŒºæ˜¯å¯¹çª—å£è¿›è¡Œåˆ†ç»„çš„ä¸€ç§ç®€å•æ–¹æ³•ã€‚æ‚¨å¯ä»¥æ ¹æ®æ‚¨çš„å·¥ä½œæµä»¥ä¸åŒçš„æ–¹å¼å¯¹å®ƒä»¬è¿›è¡Œåˆ†ç»„ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥å°†æµè§ˆå™¨æ”¾åœ¨ä¸€ä¸ªå·¥ä½œåŒºä¸Šï¼Œç»ˆç«¯æ”¾åœ¨å¦ä¸€ä¸ªå·¥ä½œåŒºä¸Šï¼Œå°†ç”µå­é‚®ä»¶å®¢æˆ·ç«¯æ”¾åœ¨ç¬¬ä¸‰ä¸ªå·¥ä½œåŒºä¸Šç­‰ç­‰ã€‚

é…ç½®æ–‡ä»¶ /etc/i3/config åŠ ~/.config/i3/configï¼Œæˆ–å‘½ä»¤ i3-config-wizard

    # å…ˆæŠŠå±ä¿åŠŸèƒ½å…³äº†ï¼š
    exec --no-startup-id xset s 0

    # é»‘å±ã€ç¡çœ ã€æ–­ç”µæ—¶é—´åˆ†åˆ«è®¾ä¸º6000sï¼Œ8000sï¼Œ9000sï¼Œä¹Ÿå¯ä»¥åªå†™å‰ä¸€ä¸ªï¼Œä¸å¿…ä¸‰ä¸ªéƒ½å†™
    exec --no-startup-id xset dpms 6000 8000 9000

    # win+c å¯ä»¥è°ƒå‡ºé€‰é¡¹ï¼Œä½ å¯ä»¥é€‰æ‹©é”å±(L)ï¼Œæ³¨é”€(O)ï¼Œé‡å¯(R)ï¼Œå…³æœº(S)ï¼Œé€€å‡ºé€‰é¡¹(Esc)ã€‚
    set $mode_system  lock(L) logout(O) reboot(R) shutdown(S) exit(Esc)
    bindsym $mod+c mode "$mode_system"
    mode "$mode_system" {
        bindsym l exec --no-startup-id i3lock -c '#000000', mode "default"
        bindsym o exec --no-startup-id i3-msg exit, mode "default"
        bindsym r exec --no-startup-id systemctl reboot, mode "default"
        bindsym s exec --no-startup-id systemctl poweroff, mode "default"
        bindsym Escape mode "default"
    }

    # å¸¸ç”¨çš„è½¯ä»¶åœ¨ç”¨æˆ·è®¾å®šçš„å·¥ä½œåŒºæ‰“å¼€ï¼š
    # æ‰“å¼€URxvtçš„åŒæ—¶åˆ‡æ¢åˆ°tabæ¨¡å¼
    for_window [class="URxvt"] layout tabbed
    # æ‰“å¼€è½¯ä»¶æ—¶è‡ªåŠ¨ç§»è‡³ç›¸åº”å·¥ä½œåŒº
    assign [class="URxvt"] $WS1
    assign [class="Thunar"] $WS1
    assign [class="Firefox"] $WS2
    assign [class="Zathura"] $WS3
    assign [class="Gvim"] $WS4
    assign [class="Ise"] $WS5
    assign [class="VirtualBox"] $WS6

#### sway

i3 çš„ wayland å®ç°ï¼Œæ“ä½œçƒ­é”®å‚è€ƒ i3

    https://swaywm.org/

        https://github.com/swaywm/sway/wiki

        https://wiki.archlinux.org/title/Sway

    freebsd å…¨é¢ä»‹ç»

        https://docs.freebsd.org/en/books/handbook/wayland/#wayland-sway

    sway - i3å…¼å®¹Wayland compositor
        https://cloud-atlas.readthedocs.io/zh_CN/latest/linux/desktop/sway/index.html#sway

    æ¢ç´¢ Linux æ¡Œé¢å…¨é¢ waylandåŒ–ï¼ˆåŸºäºswaywmï¼‰
        https://zhuanlan.zhihu.com/p/462322143

    Sway: ä»å°è¯•åˆ°æ”¾å¼ƒ
        https://coda.world/sway-explore-and-giveup

    https://zhuanlan.zhihu.com/p/441251646
    https://blog.tiantian.cool/wayland/
    https://zhuanlan.zhihu.com/p/462322143
    https://www.fosskers.ca/en/blog/wayland

èµ·å› 

ä¹‹å‰é‡è£…ç³»ç»Ÿæ—¶æŠŠæ¡Œé¢ç¯å¢ƒæ¢æˆäº† Wayland Gnomeï¼Œç»è¿‡ä¸€æ®µæ—¶é—´çš„ä½¿ç”¨ï¼Œæ„Ÿè§‰è‡ªå·±å¯¹ Gnome è¿™ç§å¯’é…¸å¤§é“è‡³ç®€çš„é£æ ¼è¿˜æ˜¯å¾ˆæ»¡æ„çš„ï¼Œä¸è¿‡å®ƒçš„çª—å£ç®¡ç†å®åœ¨æ˜¯æœ‰äº›æ··ä¹±ï¼Œäºæ˜¯èŒç”Ÿäº†è¯•ç”¨ä¸€ä¸‹å¹³é“ºå¼çª—å£ç®¡ç†å™¨çš„æƒ³æ³•ã€‚

ç”±äºéš¾ä»¥æ¥å—å€’é€€å› X Serverï¼Œæ‰€ä»¥ Sway è‡ªç„¶æˆäº†é¦–é€‰ã€‚ç„¶åç›¸å¯¹äº Gnome è¿™ç§å®Œæ•´çš„æ¡Œé¢ç¯å¢ƒï¼ŒSway å°±çœŸçš„åªæ˜¯ä¸ªçª—å£ç®¡ç†å™¨è€Œå·²ï¼Œæ‰€ä»¥éœ€è¦è¿›è¡Œå¤§é‡é…ç½®æ‰èƒ½æ»¡è¶³æ—¥å¸¸éœ€æ±‚å…¶å®è¯´ç™½äº†æˆ‘çœŸæ­£éœ€è¦çš„æ˜¯ä¸€ä¸ªä½¿ç”¨å¹³é“ºå¼çª—å£ç®¡ç†å™¨çš„æ¡Œé¢ç¯å¢ƒã€‚

å¯¹æ¯”

è™½ç„¶æˆ‘ä¸ªäººå•çº¯æ˜¯ä¸ºäº†æ›´å¥½çš„ç®¡ç†çª—å£è€Œè¯•ç”¨ Swayï¼Œä¸è¿‡å®é™…ä¸Šåœ¨é€‰æ‹©å¹³é“ºå¼/å †å å¼çª—å£ç®¡ç†å™¨çš„åŸå› ä¸Šç¡®å®å­˜åœ¨æ›´å¤šè€ƒé‡ã€‚

å¹³é“ºå¼çª—å£ç®¡ç†å™¨

çª—å£è¢«æ‘†æ”¾çš„æ•´æ•´é½é½ï¼Œå¼ºè¿«ç—‡ç‹‚å–œï¼
å±å¹•å¤ªå¤§äº†ï¼Œæ”¾çœ¼æœ›å»å…¨æ˜¯å±å¹•ï¼Œå®Œå…¨æ²¡å¿…è¦å †å çª—å£ï¼Œåªè¦ç›´æ¥é“ºå¼€å°±è¡Œäº†ã€‚
å¾€å¾€æ›´åŠ è½»é‡åŒ–ï¼Œå¯¹ç¡¬ä»¶çš„éœ€æ±‚è¾ƒä½ã€‚
å–œæ¬¢ä½¿ç”¨å›ºå®šçš„å¸ƒå±€æ˜¾ç¤ºçª—å£ã€‚
ä¸å–œæ¬¢ç¢°é¼ æ ‡ï¼Œå¸Œæœ›é€šè¿‡é”®ç›˜è¿›è¡Œå¤§éƒ¨åˆ†çš„æ“ä½œã€‚
å †å å¼çª—å£ç®¡ç†å™¨
å †å å¼çª—å£ç®¡ç†å™¨å¾€å¾€ä¼´éšç€æˆç†Ÿçš„æ¡Œé¢ç¯å¢ƒï¼Œçœæ—¶çœåŠ›ï¼Œå¼€ç®±å³ç”¨ï¼
è·Ÿéšä¸»æµï¼Œç¬¦åˆå¤§å¤šæ•°äººçš„ä½¿ç”¨ä¹ æƒ¯ï¼Œä¹Ÿæ„å‘³ç€ç¢°åˆ°å†·é—¨é—®é¢˜çš„æƒ…å†µæ›´å°‘ã€‚
å¯ä»¥è‡ªç”±çš„æ‘†æ”¾çª—å£ï¼Œè¿™ç‚¹åœ¨å°å±å¹•ä¸Šä¼˜åŠ¿å¾ˆæ˜æ˜¾ã€‚

é…ç½®

å¦‚å‰æ–‡æ‰€è¨€ï¼ŒSway åªæ˜¯ä¸€ä¸ªå•çº¯çš„çª—å£ç®¡ç†å™¨ï¼Œéœ€è¦è¿›è¡Œå„ç§é…ç½®æ‰èƒ½å‹‰å¼ºè¾¾åˆ°å¯ç”¨çš„çŠ¶æ€ï¼Œç”±äºé…ç½®å¤ªè¿‡çç¢ï¼Œè¿™é‡Œåªç®€å•çš„æä¸€ä¸‹å…¶å®æ˜¯å•çº¯çš„æ‡’ï¼Œä»¥åæœ‰æ—¶é—´å¯èƒ½ä¼šæ›´æ–°è¯¦ç»†é…ç½®ã€‚

Sway  å¿«æ·é”®

é»˜è®¤çš„ Terminal Emulator
å­—ä½“
åˆ†è¾¨ç‡ä»¥åŠåˆ·æ–°ç‡
å£çº¸
åˆ©ç”¨ swayidle å®ç°è‡ªåŠ¨é”å±
Application Launcher/Status Bar æ‰€è°ƒç”¨çš„ç¨‹åº
çª—å£é—´è·
é¼ æ ‡ä¸»é¢˜ xcursor_theme
å…¶ä»–éœ€è¦éš Sway è¿è¡Œçš„å‘½ä»¤(exec_always{ ... })ï¼Œä¾‹å¦‚
    å¯åŠ¨ exec /usr/bin/foo
    è®¾ç½® gtk ç¨‹åºä¸»é¢˜ gsettings set org.gnome.desktop.interface foo bar
    è®¾ç½® XDG_SESSION_TYPE ä»¥åŠ DESKTOP_SESSION ç¯å¢ƒå˜é‡

çŠ¶æ€æ 

Sway æœ‰è‡ªå¸¦çš„çŠ¶æ€æ  swaybarï¼Œä¸è¿‡ç›®å‰æ¯”è¾ƒçƒ­é—¨çš„æ˜¯ waybar

Application Launcher

ä¸€èˆ¬ä½¿ç”¨ wofiï¼Œä¸è¿‡ä¹Ÿå¯ä»¥è‡ªå·±å†™è„šæœ¬é…åˆ fzf æ¥å®ç°ã€‚å…³æœºèœå•ä¹Ÿå¯ä»¥é€šè¿‡ç±»ä¼¼çš„æ–¹å¼è¿›è¡Œç”Ÿæˆå’Œè°ƒç”¨ã€‚

Display Manager

å¯ä»¥ç›´æ¥ä»ç»ˆç«¯å¯åŠ¨ swayï¼Œä¸è¿‡æˆ‘ä»ç„¶ä½¿ç”¨äº† GDM ä½œä¸º Display Managerï¼Œé¦–å…ˆæ˜¯å› ä¸ºå¯ä»¥è‡ªåŠ¨è¯»å– ~/.config/environment.d/*.conf é‡Œçš„ç¯å¢ƒå˜é‡ï¼Œå…¶æ¬¡æ˜¯ä¸ºäº†è‡ªåŠ¨è§£é” gnome-keyringã€‚ä¹Ÿä¸éœ€è¦è¿›è¡Œé¢å¤–çš„è®¾å®šï¼Œå¯ä»¥ç›´æ¥ä»ç™»å½•ç•Œé¢é€‰æ‹©è¿›å…¥ Swayã€‚

é”å±

ç›®å‰å¯ä»¥ä½¿ç”¨ swaylock æˆ–è€… swaylock-effects(AUR)ï¼Œæ²¡æœ‰ä»€ä¹ˆé«˜çº§çš„è®¾å®šï¼Œç›®å‰å°±æ˜¾å¾—å¾ˆç®€é™‹ã€‚æˆ‘ä¹Ÿå°è¯•è¿‡è°ƒç”¨ GDMï¼Œä¸è¿‡ä»¥å¤±è´¥è€Œå‘Šç»ˆã€‚

GTK ä¸»é¢˜

è®¾ç½®ä¸»é¢˜æ—¶ä¸ä½†è¦å¯¹ $XDG_CONFIG_HOME/gtk-*.0/settings.ini è¿›è¡Œè®¾ç½®ï¼ŒåŒæ—¶éœ€è¦è¿è¡Œ gsettings set ...ï¼Œæ€»è€Œè¨€ä¹‹å°±æ˜¯èƒ½è®¾ç½®çš„åœ°æ–¹éƒ½è®¾ç½®ä¸€éï¼Œä»è€Œé˜²æ­¢ç¨‹åºåªè¯»å–ç‰¹å®šä½ç½®çš„é…ç½®æ–‡ä»¶ã€‚

QT ä¸»é¢˜

ç”±äºæˆ‘æ²¡æœ‰ä½¿ç”¨ä»»ä½•åŸºäº QT çš„ç¨‹åºï¼Œæ‰€ä»¥ç›´æ¥çœç•¥äº†è¿™ä¸ªæ­¥éª¤ã€‚

é¼ æ ‡ä¸»é¢˜

ä»¥æˆ‘ä½¿ç”¨çš„ Breeze ä¸»é¢˜ä¸ºä¾‹ï¼Œéœ€è¦åœ¨å¤šä¸ªåœ°æ–¹è¿›è¡Œè®¾ç½®ï¼Œä»è€Œä¿è¯è¦†ç›–æ‰€æœ‰ç¨‹åºï¼š

    ç¯å¢ƒå˜é‡ XCURSOR_THEME="Breeze"

    seat seat0 xcursor_theme Breeze 24

GTK: settings.ini ä¸­ cursor-theme='Breeze'ï¼Œä»¥åŠè¿è¡Œ gsettings set org.gnome.desktop.interface cursor-theme 'Breeze'ã€‚

QT: æˆ‘æ²¡è®¾ç½®ã€‚

å¦‚æœç¼ºå°‘è®¾ç½®å¯èƒ½ä¼šå¯¼è‡´é¼ æ ‡æŒ‡é’ˆåœ¨éƒ¨åˆ†ç¨‹åºã€æˆ–è€…éƒ¨åˆ†ä½ç½®(ä¾‹å¦‚æ ‡é¢˜æ )å˜æˆé»˜è®¤æ ·å¼ã€‚

å‰ªè´´æ¿

Sway ä¸‹é»˜è®¤å…³é—­çª—å£æ—¶ä¼šæ¸…ç©ºå‰ªè´´æ¿ï¼Œå…¶å®æˆ‘è¿˜æŒºå–œæ¬¢è¿™ç§æ¨¡å¼çš„ï¼Œå¦‚æœå¸Œæœ›åœ¨çª—å£å…³é—­åä»æ—§ä¿ç•™å‰ªè´´æ¿ä¸­çš„å†…å®¹ï¼Œå¯ä»¥é€šè¿‡ clipman å®ç°ã€‚

æˆªå›¾

ä½¿ç”¨ grim å®ç°æˆªå›¾åŠŸèƒ½ã€‚

ç³»ç»Ÿé€šçŸ¥

ä½¿ç”¨ mako å®ç°ç®€å•çš„ç³»ç»Ÿé€šçŸ¥ã€‚

Autostart

Sway å¹¶ä¸ä¼šè‡ªåŠ¨è¿è¡Œ $XDG_CONFIG_DIRS/autostart é‡Œçš„ç¨‹åºï¼Œéœ€è¦è‡ªå·±å†™ç›¸åº”çš„ systemd user unit å®ç°ã€‚

ç»“å±€

å®é™…ä¸Šå¹³é“ºå¼çª—å£ç®¡ç†æ¨¡å¼æœ¬èº«è¿˜æ˜¯ä»¤æˆ‘ç›¸å½“æ»¡æ„çš„ï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯æœ€ç»ˆæ”¾å¼ƒäº†æŠŠ Sway å½“ä½œä¸»åŠ›çš„æƒ³æ³•ï¼Œä¸»è¦åŸå› ï¼š

çª—å£ç‰¹æ•ˆ

Sway é™¤äº†ç»™çª—å£åŠ ä¸Šä¸€ä¸ªç®€é™‹çš„æ ‡é¢˜æ å’Œè¾¹æ¡†ä»¥å¤–ä¸æ”¯æŒä»»ä½•ç‰¹æ•ˆï¼Œå¹¶ä¸”å¼€å‘è€…å·²ç»åšå†³è¡¨ç¤º Sway çš„ä¸»è¦ç›®æ ‡æ˜¯ç¨³å®šæ‰€ä»¥ä¸ä¼šå»æ”¯æŒé«˜çº§ç‰¹æ•ˆã€‚

è™½ç„¶æˆ‘ä¸ªäººå¯¹çª—å£ç‰¹æ•ˆçš„è¦æ±‚æ˜¯ç®€çŸ­ã€ç®€çº¦ï¼Œä½†æ˜¯ Sway åªèƒ½ç”¨ç®€é™‹æ¥å½¢å®¹ï¼Œè€Œæ˜æ˜æ·»åŠ ä¸€äº›ç®€å•çš„ç‰¹æ•ˆå°±èƒ½ä½¿çª—å£çš„è§†è§‰æ•ˆæœæå‡å¾ˆå¤šã€‚

å¦å¤–ä¼—æ‰€å‘¨çŸ¥ X Server èµ°ä¸Šäº†ä¸æ··æˆå™¨é€šä¿¡çš„ç•¸å½¢é“è·¯çš„åŸå› ä¹‹ä¸€å°±æ˜¯å¯¹ç‰¹æ•ˆã€é€æ˜ã€åœ†è§’è¾¹æ¡†çš„éœ€æ±‚ã€‚è€Œå¦‚ä»Šç«™åœ¨ wayland çš„è‚©è†€ä¸Šï¼Œå´ä¸ä½¿ç”¨ä»»ä½•çª—å£ç‰¹æ•ˆæœªå…æ˜¾å¾—æ— æ³•ç‰©å°½å…¶ç”¨ã€‚

æœ€åä¸çŸ¥é“æ˜¯å¦å’Œè¿™ä¸ªæœ‰å…³ï¼ŒåŒæ ·çš„é¼ æ ‡ä¸»é¢˜åœ¨ Gnome å’Œ KDE ä¸‹æ˜¾ç¤ºæ•ˆæœæ˜¯ä¸€è‡´çš„ï¼Œä½†æ˜¯åœ¨ Sway ä¸‹é¢œè‰²å°±æ·±å¾—æœ‰ç‚¹ä¸è‡ªç„¶ã€‚

é›†æˆåº¦å¤ªä½

å°±å¦‚æ–‡ä¸­åå¤æåŠçš„é‚£æ ·ï¼ŒSway ä»…ä»…æ˜¯ä¸ªçª—å£ç®¡ç†å™¨è€Œå·²ï¼Œæ‰€ä»¥å¾ˆå¤šä¸œè¥¿ä¸èƒ½åƒä½¿ç”¨é«˜é›†æˆåº¦çš„æ¡Œé¢ç¯å¢ƒæ—¶é‚£æ ·æ–¹ä¾¿ï¼Œä¾‹å¦‚å¾ˆå¤šè®¾ç½®éœ€è¦åœ¨å¤šä¸ªåœ°æ–¹è¿›è¡Œé‡å¤é…ç½®ï¼Œä¸æ”¯æŒ XDG Autostart, æ’ä¸Šä¼˜ç›˜åè‡ªåŠ¨æŒ‚è½½ï¼Œæ›´åˆ«æåœ¨é€šçŸ¥ä¸­å¿ƒé‡Œé¢ç›´æ¥é€šè¿‡å•å‡»æ¶ˆæ¯æ‰“å¼€ç›¸åº”çš„ç¨‹åºè¿™ç±»ä½“éªŒäº†ã€‚å½“ç„¶è¿™äº›é—®é¢˜éƒ½å¯ä»¥é€šè¿‡è‡ªå·±å†™ä»£ç è§£å†³ï¼Œä½†æ˜¯è¿™ç§æ„Ÿè§‰çœŸçš„å°±æ˜¯ GNU/Carã€‚

å†·é—¨

ä¸åƒ i3 ä¹‹ç±»çš„é‚£æ ·çƒ­é—¨ï¼Œè¿™ç›´æ¥å¯¼è‡´äº†å¯ä»¥å·å‚è€ƒçš„é…ç½®æ›´å°‘ï¼ŒåŒæ—¶ç”Ÿæ€åœˆå†…çš„å„ç§å·¥å…·ä¹Ÿå¼€å‘ç¼“æ…¢ã€‚åŒæ—¶å¹³é“ºå¼çª—å£ç®¡ç†å™¨æœ¬èº«ä¹Ÿç›¸å¯¹å†·é—¨ï¼Œå¯¼è‡´åœ¨éƒ¨åˆ†â€œå–œæ¬¢å¼¹å°çª—â€çš„ç¨‹åºä¸Šé¢ä½“éªŒè¾ƒå·®ï¼Œå½“ç„¶è¿™ç§ä½“éªŒå¯ä»¥é€šè¿‡ä¿®æ”¹é…ç½®è¿›è¡Œæ”¹å–„ï¼Œä¸è¿‡å§‹ç»ˆæ˜¯å¤šäº†ä¸€ä¸ªæ­¥éª¤ã€‚

#### ä½¿ç”¨çª—å£ç®¡ç†å™¨éœ€è¦è‡ªè£…ç»„ä»¶

çŠ¶æ€æ  waybar

    å¯ä»¥å®ç°é¢å¤–çš„åŠŸèƒ½ï¼Œä¾‹å¦‚é€šè¿‡è°ƒç”¨ `curl 'https://wttr.in/?format=1'` æ¥æ˜¾ç¤ºå¤©æ°”ã€è°ƒç”¨è‡ªå·±å†™çš„è„šæœ¬å®šæœŸæ£€æŸ¥æ›´æ–°ç­‰ã€‚

        https://github.com/Alexays/Waybar/wiki

        ç¤ºä¾‹

            https://github.com/Alexays/Waybar/wiki/Examples

            https://github.com/kmephistoh/dotfiles

é”å± swaylock

å…³æœºèœå• wlogoutï¼Œé˜²æ­¢çª—å£ç®¡ç†å™¨é»˜è®¤çš„ exit æ—¶ï¼Œç›´æ¥å°±é€€å‡ºç³»ç»Ÿå›åˆ°ç™»å½•ç•Œé¢

å£çº¸è½¯ä»¶

    swaybg  https://github.com/swaywm/swaybg
    swww    https://github.com/LGFae/swww
    mpvpaper ç”¨ mpv æ’­æ”¾è§†é¢‘ä½œä¸ºå£çº¸ https://github.com/GhostNaN/mpvpaper

### æ¡Œé¢ç¯å¢ƒçš„å¼€æœºè‡ªå¯åŠ¨

    å¦‚æœè¦é…ç½®ç™»å½•åˆ°æ¡Œé¢åè‡ªåŠ¨å¯åŠ¨å›¾å½¢åŒ–è½¯ä»¶ï¼Œæ‰“å¼€ Gnome Tweaksï¼Œç‚¹å‡» " Startup Applications" æ·»åŠ å³å¯ã€‚

RHEL ç³»å’Œ Debian ç³»éƒ½æ¡ç”¨äº† XDG è§„èŒƒï¼Œè¯¦è§ç« èŠ‚ [Linux æ¡Œé¢çš„åŸºæœ¬ç›®å½•è§„èŒƒ XDGï¼ˆX Desktop Groupï¼‰].

#### æœ¬åœ°ç™»å½•åˆ‡æ¢å›¾å½¢æ¨¡å¼æˆ–æ§åˆ¶å°ç™»å½•

Fedora çš„æ¡Œé¢ç¯å¢ƒåŒæ—¶æ”¯æŒ x-window å’Œ waylandï¼Œå…³é—­å›¾å½¢æ¨¡å¼å¼€æœºåä¼šåœç•™åœ¨æ§åˆ¶å°ç™»å½•ï¼ŒæŒ‰ ctl + alt + F1/F2/F3/F4ï¼Œåˆ‡æ¢æ§åˆ¶å°ä½¿ç”¨å³å¯ï¼š

    æ‰§è¡Œ `startx` ä¼šåœ¨å½“å‰æ§åˆ¶å°å¯åŠ¨ä¸€ä¸ª x-window æ¡Œé¢ç¯å¢ƒï¼Œç‚¹å‡»æ³¨é”€ä¼šé€€å›åˆ°æ§åˆ¶å°

    æ‰§è¡Œ `sudo systemctl isolate graphical.target` ä¼šå¯åŠ¨ waylan æ¡Œé¢ç¯å¢ƒï¼Œæ‰§è¡Œ `sudo systemctl isolate multi-user.target` ä¼šé€€å›åˆ°å‘½ä»¤è¡Œç¯å¢ƒã€‚

    å¦‚æœä½ çš„ç³»ç»Ÿæ²¡æœ‰æ¡Œé¢ç¯å¢ƒï¼Œ åªéœ€è¦æŒ‰ä¸‹ Alt+Fn é”®å³å¯åˆ‡æ¢å„ä¸ªæ§åˆ¶å°ï¼Œä¸éœ€è¦æŒ‰ä¸‹ CTRLã€‚

å¦è§ç« èŠ‚ [ç™»å½•æ§åˆ¶å° tty login].

#### X11 å¯åŠ¨è¿‡ç¨‹

åŸºäº x-window çš„æ¡Œé¢ç¯å¢ƒçš„å¯åŠ¨è¿‡ç¨‹

    https://wiki.archlinux.org/title/Xinit#Autostart_X_at_login

    https://faq.i3wm.org/question/18/how-do-xsession-xinitrc-and-i3config-play-together.1.html

        https://tldp.org/HOWTO/XWindow-User-HOWTO/runningx.html

        https://dev.leiyanhui.com/c/arch-install-xrdp/

å…·ä½“å¯åŠ¨è¿‡ç¨‹ï¼š

    åœ¨å‘½ä»¤è¡Œæ‰§è¡Œ `startx` å°†é€šè¿‡é¦–å…ˆè°ƒç”¨ xinit æ¥å¯åŠ¨ Xã€‚

    xinit å°†åœ¨ç”¨æˆ·çš„ä¸»ç›®å½•ä¸­æŸ¥æ‰¾ä¸€ä¸ª ~/.xinitrc æ–‡ä»¶ï¼Œä»¥ä½œä¸º shell è„šæœ¬è¿è¡Œã€‚

    xinitrc ç”¨äºè®¾ç½®åˆé€‚çš„ X ç¯å¢ƒï¼Œå¹¶å¯åŠ¨å…¶ä»–ç¨‹åºï¼Œå³æˆ‘ä»¬å¯èƒ½å¸Œæœ›åœ¨ X å¯åŠ¨åç«‹å³å¯ç”¨çš„â€œå®¢æˆ·ç«¯â€ã€‚

    çª—å£ç®¡ç†å™¨æˆ–æ¡Œé¢ç¯å¢ƒé€šå¸¸æ˜¯æœ€åä¸€ä¸ªå¯åŠ¨çš„åº”ç”¨ç¨‹åºã€‚

ä¸€ã€è®¾ç½®ç™»å½•ç»ˆç«¯åè‡ªåŠ¨å¯åŠ¨æ¡Œé¢ï¼Œç¼–è¾‘ ~/.bash_profile æ–‡ä»¶

    if [ -z "${DISPLAY}" ] && [ "${XDG_VTNR}" -eq 1 ]; then
        exec startx
    fi

å¦‚æœè¦è‡ªè¡Œé€‰æ‹©å¤šä¸ªæ¡Œé¢è‡ªè¡Œå¯åŠ¨ï¼Œå…ˆç¼–è¾‘ ~/.xinitrc æ–‡ä»¶

    # Here Xfce is kept as default
    session=${1:-xfce}

    case $session in
        i3|i3wm           ) exec i3;;
        kde               ) exec startplasma-x11;;
        xfce|xfce4        ) exec startxfce4;;
        # No known session, try to run it as command
        *                 ) exec $1;;
    esac

ç„¶åæ‰‹å·¥å¯åŠ¨

    $ xinit session

    æˆ–

    $ startx ~/.xinitrc session

äºŒã€æ›´å¸¸è§çš„æ–¹æ³•æ˜¯ â€œGUI ç™»å½•â€ï¼š

    X åœ¨ç™»å½•ä¹‹å‰è¿è¡Œï¼Œå…¶ä½¿ç”¨ xdmï¼ˆæ˜¾ç¤ºç®¡ç†å™¨ï¼‰ç”¨äºæ­¤ç›®çš„ã€‚

    ç™»å½•ç®¡ç†å™¨ï¼ˆå¦‚GDMï¼ŒKDMï¼ŒXDMï¼‰ä¼šæŸ¥æ‰¾æ‰§è¡Œ ~/.xsessionã€‚

    æ‰€ä»¥ xdm çš„ ~/.xsession å¤§è‡´ç›¸å½“äº startx çš„ ~/.xinitrcã€‚

æ‰€ä»¥ï¼Œæ ¹æ®æ‚¨å¯åŠ¨ X çš„æ–¹å¼ï¼Œè®¡ç®—æœºå°†æ‰§è¡Œ ~/.xinitrc æˆ– ~/.xsession æ–‡ä»¶ã€‚

åœ¨æ¡Œé¢å¯åŠ¨çš„æœ€åé˜¶æ®µï¼Œå¦‚æœä½ ä» ~/.xinitrc æˆ– ~/.xsession æ‰§è¡Œ i3wm çª—å£ç®¡ç†å™¨ï¼Œé‚£ä¹ˆ i3wm å°†ä» ~/.i3/config è¯»å–å…¶åˆå§‹é…ç½®ã€‚

åˆ©ç”¨è¿™ç‚¹ï¼Œç”¨æˆ·å¯ä»¥åˆ›å»ºä¸€ä¸ªç»Ÿä¸€ä¸¤ç§ç™»å½•æ–¹å¼çš„å•ä¸ªè„šæœ¬ï¼š

    `echo "exec i3" >> ~/.xinitrc`ã€‚

    # åˆ›å»º xdm ç­‰æ•ˆçš„ç¬¦å·é“¾æ¥
    ln -s $HOME/.xinitrc $HOME/.xsession

åœ¨å¯åŠ¨ X11 æ—¶ï¼Œå°†è¿è¡Œ .xinitrc æˆ– .xsession è„šæœ¬ï¼Œå¹¶ä¸”è„šæœ¬å®Œæˆåï¼ŒX11 ä¼šå…³é—­ï¼šå½“ .xinitrc å®Œæˆæ—¶ï¼Œä¹Ÿå°±æ˜¯ X11 ç»“æŸçš„æ—¶å€™ï¼Œè€Œä¸æ˜¯å½“ä½ çš„çª—å£ç®¡ç†å™¨é€€å‡ºæ—¶æ‰å…³é—­ã€‚

å¦å¤–ï¼ŒGDM ç™»å½•ä¼¼ä¹å¿½ç•¥äº†â€œ~/.xsessionâ€ï¼Œå› æ­¤è¿™å¹¶ä¸èƒ½ä½¿å…¶æˆä¸º Ubuntu ç”¨æˆ·çš„é€‰é¡¹ã€‚

#### å¼€æœºå¯åŠ¨åˆ°å‘½ä»¤è¡Œï¼Œç›´æ¥å¯åŠ¨æ˜¾ç¤ºç®¡ç†å™¨

```bash

# https://github.com/martinpitt/pitti-workstation-oci
if [ "$(tty)" = "/dev/tty1" ]; then
    export `gnome-keyring-daemon --start --components=ssh`
    export BROWSER=firefox-wayland
    export XDG_CURRENT_DESKTOP=sway
    exec sway > $XDG_RUNTIME_DIR/sway.log 2>&1
fi

```

#### è‡ªåŠ©æœº Kiosk æ¨¡å¼ --- å°†ä¼šè¯é™åˆ¶ä¸ºå•ä¸ªåº”ç”¨ç¨‹åº

åœ¨ GNOME ç™»å½•å±å¹•ä¸­ï¼Œä»é½¿è½®æŒ‰é’®èœå•ä¸­é€‰æ‹©ä½ çš„ kiosk åº”ç”¨

    https://access.redhat.com/documentation/zh-cn/red_hat_enterprise_linux/9/html/customizing_the_gnome_desktop_environment/assembly_restricting-the-session-to-a-single-application_customizing-the-gnome-desktop-environment

    Windows ä¹Ÿæœ‰ https://learn.microsoft.com/en-us/windows/configuration/kiosk-single-app

å•åº”ç”¨æ¨¡å¼ä¸‹å¯åŠ¨ GNOME ä¼šè¯ï¼Œä¹Ÿç§°ä¸º kiosk æ¨¡å¼ã€‚åœ¨æ­¤ä¼šè¯ä¸­ï¼ŒGNOME åªä¼šæ˜¾ç¤ºæ‚¨é€‰æ‹©çš„åº”ç”¨ç¨‹åºçš„å®Œæ•´å±å¹•çª—å£ã€‚è¿™æ ·ä½ çš„è®¡ç®—æœºå°±å¯ä»¥ä½œä¸ºä¸€å°è‡ªåŠ©æœåŠ¡æœºæä¾›å…¬ä¼—æœåŠ¡äº†ã€‚

    $ sudo dnf install gnome-kiosk gnome-kiosk-script-session

è¿˜å¯ä»¥å®‰è£… remmina-gnome-session è½¯ä»¶åŒ…ï¼Œå®ç°å¼€æœºè‡ªå¯åŠ¨åˆ°è¿œç¨‹æ¡Œé¢

    $ sudo dnf install remmina-gnome-session

#### å…³é—­æ¡Œé¢ç¯å¢ƒå¼€æœºè‡ªå¯åŠ¨

ä¸ºäº†èŠ‚çº¦å†…å­˜ï¼Œå¯ä»¥è®¾ç½®æˆæœ¬åœ°å¼€æœºè¿›å…¥å‘½ä»¤è¡Œæ¨¡å¼ï¼Œæ‰‹å·¥æ‰§è¡Œå‘½ä»¤æ‰è¿›å…¥æ¡Œé¢ç¯å¢ƒï¼Œæˆ–ç›´æ¥å¯åŠ¨å•ç‹¬çš„å›¾å½¢åŒ–åº”ç”¨ç¨‹åºã€‚

    https://www.redhat.com/sysadmin/configure-systemd-startup-targets

    https://docs.fedoraproject.org/en-US/quick-docs/understanding-and-administering-systemd/index.html#mapping-runlevels-to-targets

    https://askubuntu.com/questions/1242965/how-to-disable-gui-in-ubuntu

    https://askubuntu.com/questions/76543/

    https://superuser.com/questions/443997

    https://www.tecmint.com/change-runlevels-targets-in-systemd/

ä¸€ã€è€å¼çš„ X-window ç³»ç»Ÿï¼Œå…³é—­å¼€æœºè‡ªå¯åŠ¨å‚è§ç« èŠ‚ [X11 å¯åŠ¨è¿‡ç¨‹]ã€‚

äºŒã€å¯¹ä½¿ç”¨ systemd ç®¡ç†çš„æ¡Œé¢ç¯å¢ƒ

/etc/inittab æ–‡ä»¶çš„è¯´æ˜ï¼š

    Ctrl-Alt-Delete is handled by /usr/lib/systemd/system/ctrl-alt-del.target

    systemd uses 'targets' instead of runlevels. By default, there are two main targets:

        multi-user.target: analogous to runlevel 3

        graphical.target: analogous to runlevel 5

    To view current default target, run:

        systemctl get-default

    To set a default target, run:

        systemctl set-default TARGET.target

æŸ¥çœ‹ç™»å½•åå¯åŠ¨çš„è®¾ç½®é€‰é¡¹

    $ systemctl get-default

    å¯åŠ¨åˆ°æ¡Œé¢æ˜¯ graphical.targetï¼Œå¯åŠ¨åˆ°å‘½ä»¤è¡Œæ˜¯ multi-user.targetã€‚

åœ¨ç³»ç»Ÿè¿è¡Œæ—¶è¿›è¡Œåˆ‡æ¢ï¼š

    # åˆ‡æ¢åˆ°å‘½ä»¤è¡Œæ¨¡å¼ï¼Œç­‰æ•ˆ init 3ï¼Œåœ¨ Fedora ä¸‹ä¼šé€€å‡ºåˆ°æ§åˆ¶å° ctl+alt+F2ã€‚
    $ sudo systemctl isolate multi-user.target

    # åˆ‡æ¢åˆ°å›¾å½¢æ¨¡å¼ï¼Œç­‰æ•ˆ init 5
    $ sudo systemctl isolate graphical.target

è®¾ç½®å¼€æœºè‡ªå¯åŠ¨ï¼š

    è®¾ç½®ä¸ºç™»å½•åå¯åŠ¨åˆ°å‘½ä»¤è¡Œï¼ˆæ§åˆ¶å°ï¼‰

        $ sudo systemctl set-default multi-user.target

    è®¾ç½®ä¸ºç™»å½•åå¯åŠ¨åˆ°å›¾å½¢ç•Œé¢

        $ sudo systemctl set-default graphical.target

    ç„¶åé‡å¯è®¡ç®—æœºå³å¯

        $ sudo systemctl reboot

æ˜¾ç¤ºç®¡ç†å™¨ä¹Ÿåº”è¯¥æ˜¯å¯ç”¨çŠ¶æ€

    $ sudo systemctl enable gdm/kdm/lightdm

ä¸‰ã€åˆ©ç”¨ systemd ç®¡ç†çš„æ˜¾ç¤ºç®¡ç†å™¨ä¹Ÿå¯å•ç‹¬æ§åˆ¶å¯åœï¼ˆå†…å­˜å ç”¨è¿˜æ˜¯å¤§ï¼Œä¸å¦‚ä¸Šé¢çš„æ–¹æ³•ï¼‰

    # lightdm sddm
    $ sudo systemctl disable gdm

    ä¹Ÿå¯æ‰‹å·¥å¯åŠ¨ã€åœæ­¢æŒ‡å®šçš„æ˜¾ç¤ºç®¡ç†å™¨æœåŠ¡

        # lightdm sddm
        $ sudo systemctl start gdm

å››ã€å•ç‹¬è®¾ç½®æ˜¾ç¤ºç®¡ç†å™¨æœåŠ¡æ˜¯å¦å¼€æœºè‡ªå¯åŠ¨ï¼Œç¼–è¾‘æ§åˆ¶æ–‡ä»¶

lightdm

    https://wiki.debian.org/LightDM

    # åˆè¯´  /etc/lightdm/lightdm.conf
    echo 'manual' | sudo tee /etc/init/lightdm.override

    æ‰‹å·¥å¯åŠ¨ã€åœæ­¢

        startx

    å¦‚æœè¡Œä¸é€šé‚£å°±æ˜¯ç”¨ systemd ç®¡ç†äº†

gdm

    https://wiki.debian.org/GDM#systemd

    # åˆè¯´ /etc/gdm3/daemon.conf
    æˆ–ç¼–è¾‘  /etc/init/gdm.conf

        stop on runlevel [0126]
        #================================================================
        #start on ((filesystem
        #           and runlevel [!026]
        #           and started dbus
        #           and (drm-device-added card0 PRIMARY_DEVICE_FOR_DISPLAY=1
        #                or stopped udev-fallback-graphics))
        #          or runlevel PREVLEVEL=S)
        #
        #stop on runlevel [0126]
        #================================================================

    æ‰‹å·¥å¯åŠ¨ã€åœæ­¢

        startx

    å¦‚æœè¡Œä¸é€šé‚£å°±æ˜¯ç”¨ systemd ç®¡ç†äº†

sddm

    https://wiki.debian.org/SDDM

    # åˆè¯´ /etc/sddm.conf
    ç¼–è¾‘ /etc/init/kdm.conf

        stop on runlevel [0126]
        #================================================================
        #start on ((filesystem
        #           and runlevel [!026]
        #           and started dbus
        #           and (drm-device-added card0 PRIMARY_DEVICE_FOR_DISPLAY=1
        #                or stopped udev-fallback-graphics))
        #          or runlevel PREVLEVEL=S)
        #
        #stop on runlevel [0126]
        #================================================================

    æ‰‹å·¥å¯åŠ¨ã€åœæ­¢

        startx

    å¦‚æœè¡Œä¸é€šé‚£å°±æ˜¯ç”¨ systemd ç®¡ç†äº†

äº”ã€åœ¨æ“ä½œç³»ç»Ÿå¯åŠ¨åˆ†åŒºç®¡ç†è®¾ç½®å¼€æœºåè¿›å…¥ä½•ç§ç¯å¢ƒ

ç›´æ¥ç¼–è¾‘ grub æ¡ç›®ï¼Œåœ¨ 'linux  ....' è¡Œçš„æœ«å°¾åŠ  3 åˆ™ç­‰æ•ˆäºå¼€æœº init 3 è¿›å…¥å‘½ä»¤è¡Œç¯å¢ƒã€‚

### ä¸è¿›å…¥æ¡Œé¢ç¯å¢ƒï¼Œæ§åˆ¶å°æ‰§è¡Œå›¾å½¢åŒ–ç¨‹åº

åœ¨ Linux ç³»ç»Ÿä¸­ï¼Œå³ä½¿ä¸è¿›å…¥æ¡Œé¢ç¯å¢ƒï¼Œå¯ä»¥åœ¨æ²¡æœ‰ä»»ä½•è£…é¥°ã€æ¡Œé¢æˆ–çª—å£ç®¡ç†çš„æƒ…å†µä¸‹å¯åŠ¨åº”ç”¨ç¨‹åºï¼Œå³é€šè¿‡å‘½ä»¤è¡Œåœ¨æ§åˆ¶å°ï¼ˆconsoleï¼‰ä¸‹æ‰§è¡Œå›¾å½¢åŒ–ç¨‹åºã€‚

#### åœ¨ Wayland ç¯å¢ƒæ§åˆ¶å°ä¸‹æ‰§è¡Œå›¾å½¢åŒ–ç¨‹åº

GNOME ä½¿ç”¨ Wayland ä½œä¸ºé»˜è®¤æ˜¾ç¤ºæœåŠ¡å™¨ï¼Œè¿è¡Œå›¾å½¢åŒ–ç¨‹åºçš„æ–¹å¼ä¸ä¼ ç»Ÿçš„ Xorg æœ‰æ‰€ä¸åŒã€‚Wayland çš„è®¾è®¡æ›´åŠ ç°ä»£åŒ–ï¼Œä½†å®ƒçš„å·¥ä½œæ–¹å¼ä¸ Xorg æœ‰æ˜¾è‘—åŒºåˆ«ï¼Œå› æ­¤éœ€è¦ä¸€äº›é¢å¤–çš„æ­¥éª¤æ¥åœ¨æ§åˆ¶å°ä¸‹è¿è¡Œå›¾å½¢åŒ–ç¨‹åºã€‚

ä»¥ä¸‹æ˜¯åœ¨ Wayland æ¡Œé¢ç¯å¢ƒï¼ˆå¦‚ GNOMEï¼‰ä¸­ï¼Œä¸è¿›å…¥æ¡Œé¢ç¯å¢ƒï¼Œç›´æ¥åœ¨æ§åˆ¶å°ä¸‹è¿è¡Œå›¾å½¢åŒ–ç¨‹åºçš„æ–¹æ³•ï¼š

1ã€ç¡®ä¿ Wayland ä¼šè¯å·²å¯åŠ¨

Wayland éœ€è¦ä¸€ä¸ªè¿è¡Œçš„ä¼šè¯ï¼ˆsessionï¼‰æ¥ç®¡ç†æ˜¾ç¤ºå’Œè¾“å…¥ã€‚å¦‚æœä½ æ²¡æœ‰è¿›å…¥æ¡Œé¢ç¯å¢ƒï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å¯åŠ¨ä¸€ä¸ª Wayland ä¼šè¯ï¼š

ä½¿ç”¨ gnome-shell å¯åŠ¨ Wayland ä¼šè¯

    gnome-shell --wayland --display-server

è¿™ä¼šå¯åŠ¨ä¸€ä¸ª GNOME Shell å®ä¾‹ï¼Œå¹¶ä½¿ç”¨ Wayland ä½œä¸ºæ˜¾ç¤ºæœåŠ¡å™¨ã€‚

2ã€è®¾ç½® WAYLAND_DISPLAY ç¯å¢ƒå˜é‡

Wayland ä½¿ç”¨ WAYLAND_DISPLAY ç¯å¢ƒå˜é‡æ¥æŒ‡å®šæ˜¾ç¤ºå™¨çš„è¿æ¥ã€‚ä½ éœ€è¦è®¾ç½®è¿™ä¸ªå˜é‡ï¼Œä»¥ä¾¿å›¾å½¢åŒ–ç¨‹åºçŸ¥é“å¦‚ä½•è¿æ¥åˆ° Wayland æœåŠ¡å™¨ã€‚

é¦–å…ˆï¼ŒæŸ¥æ‰¾å½“å‰è¿è¡Œçš„ Wayland æ˜¾ç¤ºæœåŠ¡å™¨çš„åç§°ã€‚é€šå¸¸ï¼ŒWayland æ˜¾ç¤ºæœåŠ¡å™¨çš„åç§°ç±»ä¼¼äº wayland-0 æˆ– wayland-1ã€‚ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥æ‰¾ï¼š

    ls /run/user/$(id -u)/wayland-*

å‡è®¾è¾“å‡ºæ˜¯ /run/user/1000/wayland-0ï¼Œé‚£ä¹ˆä½ å¯ä»¥è®¾ç½®ç¯å¢ƒå˜é‡ï¼š

    export WAYLAND_DISPLAY=wayland-0

3ã€è¿è¡Œå›¾å½¢åŒ–ç¨‹åº

æƒé™ï¼šä½ éœ€è¦æœ‰æƒé™è®¿é—® Wayland socketã€‚è¿™é€šå¸¸æ„å‘³ç€ä½ éœ€è¦ä»¥å¯åŠ¨ Wayland ä¼šè¯çš„åŒä¸€ä¸ªç”¨æˆ·èº«ä»½è¿è¡Œå›¾å½¢åŒ–ç¨‹åºã€‚

    å¦‚æœä½ ä¸æ˜¯ä»¥å¯åŠ¨ Wayland ä¼šè¯çš„ç”¨æˆ·èº«ä»½ç™»å½•ï¼Œä½ å¯èƒ½éœ€è¦ç»™å½“å‰ç”¨æˆ·æƒé™
    æ³¨æ„ï¼šWayland æ›´åŠ å®‰å…¨ï¼Œä¸æä¾›åƒ X11 çš„ xhost è¿™æ ·çš„ç®€å•æƒé™æœºåˆ¶
    ä½ å¯ä»¥è€ƒè™‘ä½¿ç”¨ machinectl shell æˆ–è€… systemd-run --user æ¥è·å¾—è®¿é—®æƒé™

è®¾ç½®å¥½ WAYLAND_DISPLAY ç¯å¢ƒå˜é‡åï¼Œä½ å¯ä»¥ç›´æ¥åœ¨æ§åˆ¶å°ä¸­è¿è¡Œæ”¯æŒ Wayland çš„å›¾å½¢åŒ–ç¨‹åºã€‚ä¾‹å¦‚ï¼Œè¿è¡Œ geditï¼š

    #  å¯¹äºä¸€äº›åŒæ—¶æ”¯æŒ Xorg å’Œ Wayland çš„å›¾å½¢åŒ–ç¨‹åºï¼Œè®¾ç½® GDK_BACKEND æŒ‡å®šä½¿ç”¨ Wayland åç«¯
    # export GDK_BACKEND=wayland

    gedit

å¦‚æœç¨‹åºæ”¯æŒ Waylandï¼Œå®ƒä¼šåœ¨ Wayland ä¼šè¯ä¸­æ˜¾ç¤ºå‡ºæ¥ã€‚

å¦‚æœåœ¨è¿è¡Œå›¾å½¢åŒ–ç¨‹åºæ—¶é‡åˆ°æƒé™æˆ–ä¼šè¯ç›¸å…³çš„é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨dbus-run-sessionå‘½ä»¤æ¥å¯åŠ¨ç¨‹åºï¼Œå®ƒä¼šåœ¨ä¸€ä¸ªæ–°çš„ D-Bus ä¼šè¯ä¸­è¿è¡ŒæŒ‡å®šçš„å‘½ä»¤ï¼Œç¡®ä¿ç¨‹åºèƒ½å¤Ÿæ­£å¸¸è®¿é—®æ‰€éœ€çš„æœåŠ¡å’Œèµ„æºã€‚ä¾‹å¦‚ï¼š

    dbus-run-session gnome-calculator

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç›´æ¥ä» TTY å¯åŠ¨å›¾å½¢åŒ–ç¨‹åºçš„æ–¹å¼åœ¨ Wayland ä¸Šä¸å¦‚åœ¨ X11 ä¸Šå¸¸è§æˆ–ç›´æ¥ã€‚å¦‚æœä½ é‡åˆ°å›°éš¾ï¼Œæœ€ç®€å•çš„åŠæ³•å¯èƒ½æ˜¯åˆ‡æ¢åˆ°å·²æœ‰çš„ Wayland ä¼šè¯ä¸­å»å¯åŠ¨åº”ç”¨ï¼Œæˆ–è€…ä½¿ç”¨ XWaylandï¼ˆä¸€ç§å…¼å®¹å±‚ï¼Œå…è®¸ä½ åœ¨ Wayland ä¼šè¯ä¸­è¿è¡Œ X11 åº”ç”¨ç¨‹åºï¼‰

    è¿è¡Œ Xwayland æ¥å…¼å®¹ä¸€äº›åªèƒ½åœ¨ Xorg ä¸Šè¿è¡Œçš„å›¾å½¢åŒ–ç¨‹åºã€‚å¯ä»¥å…ˆç¡®è®¤ Xwayland æ˜¯å¦æ­£åœ¨è¿è¡Œï¼š

        ps ax | grep xwayland

    å¦‚æœ Xwayland æ­£åœ¨è¿è¡Œï¼Œå¯é€šè¿‡è®¾ç½®DISPLAYç¯å¢ƒå˜é‡æ¥ä½¿ç”¨å®ƒè¿è¡Œå›¾å½¢åŒ–ç¨‹åºï¼Œä¾‹å¦‚ï¼š

        export DISPLAY=:0
        firefox

è¦åˆ‡æ¢åˆ°ç°æœ‰çš„ Wayland ä¼šè¯ï¼Œå¯ä»¥ä½¿ç”¨ç±»ä¼¼ loginctl æˆ– machinectl çš„å·¥å…·ï¼Œå…·ä½“å–å†³äºä½ çš„ç³»ç»Ÿé…ç½®ã€‚ä¾‹å¦‚ï¼š

    # åˆ—å‡ºæ‰€æœ‰ä¼šè¯
    loginctl list-sessions

    # å‡è®¾ä½ æƒ³åˆ‡æ¢åˆ°ä¼šè¯ ID ä¸º 1 çš„ä¼šè¯
    loginctl attach 1

    # æˆ–è€…ä½¿ç”¨ machinectl shell ç›´æ¥è¿›å…¥ä¼šè¯
    machinectl shell :1 /bin/bash

4ã€ä½¿ç”¨ weston ä½œä¸º Wayland åˆæˆå™¨

å¦‚æœä½ æ²¡æœ‰ä½¿ç”¨ GNOME Shellï¼Œè€Œæ˜¯å¸Œæœ›å¯åŠ¨ä¸€ä¸ªè½»é‡çº§çš„ Wayland ä¼šè¯ï¼Œå¯ä»¥ä½¿ç”¨ westonï¼ˆä¸€ä¸ªç‹¬ç«‹çš„ Wayland åˆæˆå™¨ï¼‰ã€‚é¦–å…ˆå®‰è£… westonï¼š

    sudo apt install weston  # å¯¹äº Debian/Ubuntu
    sudo dnf install weston  # å¯¹äº Fedora

ç„¶åå¯åŠ¨ westonï¼š

    weston

å¯åŠ¨åï¼Œweston ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ Wayland ä¼šè¯ã€‚ä½ å¯ä»¥åœ¨ weston ç»ˆç«¯ä¸­è¿è¡Œå›¾å½¢åŒ–ç¨‹åºã€‚

5ã€ä½¿ç”¨ sway ä½œä¸º Wayland åˆæˆå™¨

sway æ˜¯ä¸€ä¸ªå…¼å®¹ Wayland çš„å¹³é“ºå¼çª—å£ç®¡ç†å™¨ï¼Œç±»ä¼¼äº i3ã€‚ä½ å¯ä»¥ä½¿ç”¨ sway æ¥å¯åŠ¨ä¸€ä¸ª Wayland ä¼šè¯ï¼š

    sway

åœ¨ sway ä¼šè¯ä¸­ï¼Œä½ å¯ä»¥ç›´æ¥è¿è¡Œæ”¯æŒ Wayland çš„å›¾å½¢åŒ–ç¨‹åºã€‚

6ã€æ£€æŸ¥ç¨‹åºæ˜¯å¦æ”¯æŒ Wayland

å¹¶éæ‰€æœ‰å›¾å½¢åŒ–ç¨‹åºéƒ½åŸç”Ÿæ”¯æŒ Waylandã€‚ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ£€æŸ¥ç¨‹åºæ˜¯å¦æ”¯æŒ Waylandï¼š

æŸ¥çœ‹ç¨‹åºçš„æ–‡æ¡£æˆ–å®˜æ–¹ç½‘ç«™ã€‚

ä½¿ç”¨ env WAYLAND_DEBUG=1 <ç¨‹åº> è¿è¡Œç¨‹åºï¼Œè§‚å¯Ÿè¾“å‡ºä¸­æ˜¯å¦æœ‰ Wayland ç›¸å…³çš„æ—¥å¿—ã€‚

å¦‚æœç¨‹åºä¸æ”¯æŒ Waylandï¼Œå®ƒå¯èƒ½ä¼šå›é€€åˆ° XWaylandï¼ˆWayland çš„ X11 å…¼å®¹å±‚ï¼‰ã€‚XWayland ä¼šè‡ªåŠ¨å¤„ç† X11 ç¨‹åºçš„æ˜¾ç¤ºï¼Œå› æ­¤ä½ ä»ç„¶å¯ä»¥è¿è¡Œè¿™äº›ç¨‹åºã€‚

7ã€ä½¿ç”¨ dbus-run-session å¯åŠ¨ç‹¬ç«‹ä¼šè¯

å¦‚æœä½ å¸Œæœ›åœ¨ä¸€ä¸ªç‹¬ç«‹çš„ä¼šè¯ä¸­è¿è¡Œå›¾å½¢åŒ–ç¨‹åºï¼Œå¯ä»¥ä½¿ç”¨ dbus-run-sessionï¼š

    dbus-run-session -- gnome-shell --wayland --display-server

ç„¶ååœ¨æ–°ä¼šè¯ä¸­è¿è¡Œå›¾å½¢åŒ–ç¨‹åºã€‚

8ã€è¿œç¨‹è¿è¡Œ Wayland ç¨‹åº

å¦‚æœä½ é€šè¿‡ SSH è¿æ¥åˆ°è¿œç¨‹æœºå™¨ï¼Œå¹¶å¸Œæœ›è¿è¡Œ Wayland ç¨‹åºï¼Œå¯ä»¥ä½¿ç”¨ waypipe æˆ– ssh -Xï¼ˆé€šè¿‡ XWayland è¿è¡Œç¨‹åºï¼‰ã€‚

ä½¿ç”¨ waypipe

waypipe æ˜¯ä¸€ä¸ªç”¨äºè¿œç¨‹è¿è¡Œ Wayland ç¨‹åºçš„å·¥å…·ã€‚é¦–å…ˆå®‰è£… waypipeï¼š

    sudo apt install waypipe  # å¯¹äº Debian/Ubuntu
    sudo dnf install waypipe  # å¯¹äº Fedora

ç„¶ååœ¨è¿œç¨‹æœºå™¨ä¸Šè¿è¡Œï¼š

    waypipe ssh user@remote_host gedit

å¦ä¸€ä¸ªè¯´æ³•ï¼š

    ssh -Y user@remotehost waypipe ssh xclock

    è¿™é‡Œçš„ -Y å‚æ•°å¯ç”¨äº†ä¿¡ä»»çš„ X11 è½¬å‘ï¼Œè€Œ waypipe ssh åˆ™ç¡®ä¿äº† Wayland æµé‡èƒ½å¤Ÿæ­£ç¡®åœ°è¢«è½¬å‘åˆ°å®¢æˆ·ç«¯16ã€‚

æ€»ç»“

åœ¨ Wayland ç¯å¢ƒä¸‹è¿è¡Œå›¾å½¢åŒ–ç¨‹åºçš„å…³é”®æ˜¯ï¼š

ç¡®ä¿ Wayland ä¼šè¯å·²å¯åŠ¨ï¼ˆå¦‚ GNOME Shellã€Weston æˆ– Swayï¼‰ã€‚

è®¾ç½® WAYLAND_DISPLAY ç¯å¢ƒå˜é‡ä»¥è¿æ¥åˆ°æ­£ç¡®çš„ Wayland æ˜¾ç¤ºæœåŠ¡å™¨ã€‚

è¿è¡Œæ”¯æŒ Wayland çš„å›¾å½¢åŒ–ç¨‹åºã€‚

å¦‚æœç¨‹åºä¸æ”¯æŒ Waylandï¼Œå®ƒä¼šé€šè¿‡ XWayland è¿è¡Œï¼Œå› æ­¤ä½ ä»ç„¶å¯ä»¥åœ¨ Wayland ä¼šè¯ä¸­ä½¿ç”¨å®ƒã€‚

#### åœ¨ Xorg ç¯å¢ƒæ§åˆ¶å°ä¸‹æ‰§è¡Œå›¾å½¢åŒ–ç¨‹åº

1ã€ç¡®ä¿å·²å®‰è£…å›¾å½¢åŒ–ç¨‹åºæ‰€éœ€çš„ä¾èµ–

é¦–å…ˆï¼Œç¡®ä¿ç³»ç»Ÿä¸­å·²å®‰è£…æ‰€éœ€çš„å›¾å½¢åº“å’Œä¾èµ–é¡¹ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ è¦è¿è¡Œä¸€ä¸ªåŸºäº GTK æˆ– Qt çš„åº”ç”¨ç¨‹åºï¼Œéœ€è¦ç¡®ä¿è¿™äº›åº“å·²å®‰è£…ã€‚

2ã€è®¾ç½® DISPLAY ç¯å¢ƒå˜é‡

å›¾å½¢åŒ–ç¨‹åºéœ€è¦çŸ¥é“å°†å›¾å½¢è¾“å‡ºåˆ°å“ªä¸ªæ˜¾ç¤ºå™¨ã€‚é€šå¸¸ï¼ŒXorg æœåŠ¡å™¨ä¼šç®¡ç†æ˜¾ç¤ºå™¨çš„è¿æ¥ã€‚ä½ éœ€è¦è®¾ç½® DISPLAY ç¯å¢ƒå˜é‡æ¥æŒ‡å®šæ˜¾ç¤ºå™¨ã€‚

    export DISPLAY=:0

è¿™é‡Œçš„ :0 è¡¨ç¤ºç¬¬ä¸€ä¸ªæ˜¾ç¤ºå™¨ã€‚å¦‚æœä½ æœ‰å¤šä¸ªæ˜¾ç¤ºå™¨æˆ– X æœåŠ¡å™¨å®ä¾‹ï¼Œå¯èƒ½éœ€è¦è°ƒæ•´è¿™ä¸ªå€¼ã€‚

3ã€å¯åŠ¨ Xorg æœåŠ¡å™¨ï¼ˆå¦‚æœæœªè¿è¡Œï¼‰

å¦‚æœ Xorg æœåŠ¡å™¨æœªè¿è¡Œï¼Œä½ éœ€è¦æ‰‹åŠ¨å¯åŠ¨å®ƒã€‚å¯ä»¥ä½¿ç”¨ startx å‘½ä»¤æ¥å¯åŠ¨ Xorg æœåŠ¡å™¨ï¼š

    startx

å¯åŠ¨åï¼ŒXorg æœåŠ¡å™¨ä¼šåœ¨åå°è¿è¡Œï¼Œå¹¶å‡†å¤‡å¥½æ¥æ”¶å›¾å½¢åŒ–ç¨‹åºçš„è¾“å‡ºã€‚

4ã€åœ¨æ§åˆ¶å°ä¸­è¿è¡Œå›¾å½¢åŒ–ç¨‹åº

è®¾ç½®å¥½ DISPLAY ç¯å¢ƒå˜é‡åï¼Œä½ å¯ä»¥ç›´æ¥åœ¨æ§åˆ¶å°ä¸­è¿è¡Œå›¾å½¢åŒ–ç¨‹åºã€‚ä¾‹å¦‚ï¼Œè¿è¡Œ gedit æ–‡æœ¬ç¼–è¾‘å™¨ï¼š

    gedit

ç¨‹åºåº”è¯¥ä¼šåœ¨ Xorg æœåŠ¡å™¨ç®¡ç†çš„æ˜¾ç¤ºå™¨ä¸Šæ˜¾ç¤ºå‡ºæ¥ã€‚

5ã€ä½¿ç”¨ xinit å¯åŠ¨å•ä¸ªç¨‹åº

å¦‚æœä½ åªæƒ³è¿è¡Œä¸€ä¸ªå›¾å½¢åŒ–ç¨‹åºè€Œä¸å¯åŠ¨å®Œæ•´çš„æ¡Œé¢ç¯å¢ƒï¼Œå¯ä»¥ä½¿ç”¨ xinit å‘½ä»¤ã€‚ä¾‹å¦‚ï¼š

    xinit /usr/bin/gedit -- :1

è¿™é‡Œçš„ :1 è¡¨ç¤ºä½¿ç”¨ç¬¬äºŒä¸ªæ˜¾ç¤ºå™¨ï¼ˆå¦‚æœ :0 å·²è¢«å ç”¨ï¼‰ã€‚

6ã€ä½¿ç”¨ xvfb è™šæ‹Ÿæ˜¾ç¤ºå™¨ï¼ˆæ— å¤´ç¯å¢ƒï¼‰

å¦‚æœä½ åœ¨æ²¡æœ‰ç‰©ç†æ˜¾ç¤ºå™¨çš„æœåŠ¡å™¨ä¸Šè¿è¡Œå›¾å½¢åŒ–ç¨‹åºï¼Œå¯ä»¥ä½¿ç”¨ Xvfbï¼ˆX Virtual Framebufferï¼‰æ¥åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿæ˜¾ç¤ºå™¨ï¼š

    Xvfb :1 -screen 0 1024x768x24 &
    export DISPLAY=:1
    gedit

7ã€ä½¿ç”¨ ssh -X è¿œç¨‹è¿è¡Œå›¾å½¢åŒ–ç¨‹åº

å¦‚æœä½ é€šè¿‡ SSH è¿œç¨‹è¿æ¥åˆ° Linux ç³»ç»Ÿï¼Œå¯ä»¥ä½¿ç”¨ ssh -X æˆ– ssh -Y æ¥å¯ç”¨ X11 è½¬å‘ï¼Œç„¶ååœ¨è¿œç¨‹ç»ˆç«¯ä¸­è¿è¡Œå›¾å½¢åŒ–ç¨‹åºï¼š

    ssh -X user@remote_host
    gedit

å›¾å½¢åŒ–ç¨‹åºä¼šåœ¨æœ¬åœ°æ˜¾ç¤ºå™¨ä¸Šæ˜¾ç¤ºã€‚

æ€»ç»“

é€šè¿‡è®¾ç½® DISPLAY ç¯å¢ƒå˜é‡å¹¶ç¡®ä¿ Xorg æœåŠ¡å™¨æ­£åœ¨è¿è¡Œï¼Œä½ å¯ä»¥åœ¨ä¸è¿›å…¥æ¡Œé¢ç¯å¢ƒçš„æƒ…å†µä¸‹ä»æ§åˆ¶å°è¿è¡Œå›¾å½¢åŒ–ç¨‹åºã€‚å¦‚æœæ˜¯åœ¨æ— å¤´ç¯å¢ƒä¸­ï¼Œå¯ä»¥ä½¿ç”¨ Xvfb æ¥åˆ›å»ºè™šæ‹Ÿæ˜¾ç¤ºå™¨ã€‚

> åˆ©ç”¨æ˜¾ç¤ºç®¡ç†å™¨ç›´æ¥æ‰§è¡Œå›¾å½¢åŒ–åº”ç”¨ç¨‹åº

    https://wiki.archlinux.org/title/Display_manager#Starting_applications_without_a_window_manager

è®¾ä¸ºæ¡Œé¢ç™»å½•åï¼Œå°†ç«‹å³å¯åŠ¨è®¾ç½®çš„åº”ç”¨ç¨‹åºã€‚å½“æ‚¨å…³é—­åº”ç”¨ç¨‹åºæ—¶ï¼Œæ‚¨å°†è¢«å¸¦å›ç™»å½•ç®¡ç†å™¨ï¼ˆä¸æ³¨é”€æ­£å¸¸çš„æ¡Œé¢ç¯å¢ƒæˆ–çª—å£ç®¡ç†å™¨ç›¸åŒï¼‰ï¼Œåªéœ€è¦ç¼–è¾‘ /usr/share/xsessions/web-browser.desktop

```ini
[Desktop Entry]
Name=Web Browser
Comment=Use a web browser as your session
Exec=/usr/bin/google-chrome --auto-launch-at-startup
TryExec=/usr/bin/google-chrome --auto-launch-at-startup
Icon=google-chrome
Type=Application
```

> åˆ©ç”¨ systemd å•å…ƒï¼Œä¸ä½¿ç”¨æ˜¾ç¤ºç®¡ç†å™¨ï¼Œç›´æ¥ç™»å½• xorg æ¡Œé¢

    https://wiki.archlinux.org/title/Systemd/User#Automatic_login_into_Xorg_without_display_manager

æ„Ÿè§‰è¿™ systemd ç®¡çš„è¶Šæ¥è¶Šå¤šï¼Œç›´æ¥åšä¸€ä¸ª systemd æ“ä½œç³»ç»Ÿå¾—äº†ã€‚

å¦ä¸€ä¸ªè¯´æ³•ï¼šX11 åœ¨å‘½ä»¤è¡Œæ‰‹å·¥æ‰§è¡Œå›¾å½¢åŒ–åº”ç”¨ç¨‹åº

    https://wiki.archlinux.org/title/Xinit#Starting_applications_without_a_window_manager

ä¸€ã€å¯¹è€å¼çš„ x ç³»ç»Ÿ

    startx nautilus

ç¼–è¾‘ ~/.xinitrc æ–‡ä»¶

    exec chromium

åœ¨å‘½ä»¤è¡Œç¯å¢ƒæ‰§è¡Œ `startx` ä¼šè¿›å…¥ x11 çš„æ¡Œé¢ç¯å¢ƒï¼Œæ³¨æ„å¦‚æœæ˜¯ Fedora Silverblue çš„ x11 æ¡Œé¢ä¼šæ— æ³•ä»ç»ˆç«¯è¿›å…¥ toolbox

åœ¨æ¡Œé¢é€‰æ‹© logout å³ä¼šé€€å‡ºåˆ°å‘½ä»¤è¡Œç¯å¢ƒã€‚

äºŒã€å¦‚æœè¦ç”¨ x-window é–‹å•Ÿå¾Œè‡ªå‹•å•Ÿå‹•æ‡‰ç”¨ç¨‹å¼,è«‹è‡ªè¡Œä¿®æ”¹æˆ–æ˜¯æ–°å¢ .desktop æª”æ¡ˆï¼š

System-wide autostart directories:

    /etc/xdg/autostart

    /usr/share/autostart

    User specific autostart directories:

    ~/.config/autostart

    ~/.kde/share/autostart (KDE specific)

    ~/.kde/Autostart (KDE specific)

æˆ‘å€‘ä¾†çœ‹çœ‹åŸºæœ¬çš„ .desktop æª”æ¡ˆå…§å®¹æœ‰å“ªäº›

    [root@benjr ~]# cat ~/.config/autostart/gnome-terminal.desktop

    [Desktop Entry]

    Type=Application

    Exec=gnome-terminal

    Hidden=false

    X-GNOME-Autostart-enabled=true

    Name[en_US]=test

    Name=test

    Comment[en_US]=xdg testing

    Comment=xdg testing

    Type=Application

    Exec=gnome-terminal

æœ€é‡è¦çš„å°±æ˜¯æŒ‡å®šè¦åŸ·è¡Œå“ªä¸€å€‹ç¨‹å¼ï¼Œè¿™æ ·å®ç°åœ¨å‘½ä»¤è¡Œç›´æ¥å¯åŠ¨å›¾å½¢åŒ–åº”ç”¨ç¨‹åºï¼Œæ— éœ€è¿›å…¥æ¡Œé¢ç¯å¢ƒã€‚

    Hidden=false

    X-GNOME-Autostart-enabled=true

    Name[en_US]=test

    Name=test

    Comment[en_US]=xdg testing

    Comment=xdg testing

## Windows ä¸‹çš„ GNU/POSIX ç¯å¢ƒ

å¦‚æœåªæ˜¯æƒ³åš Windowsã€macOS å’Œ Linux ç­‰å¤šä¸ªæ“ä½œç³»ç»Ÿè·¨å¹³å°åº”ç”¨ç¨‹åºï¼Œä½¿ç”¨ QT(c++/python) æˆ–åŸºäº Chromium+Node.js çš„ Electron æ¡†æ¶çš„åº”ç”¨ç¨‹åºæ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚

å¯¹ GNOME/GTK+ ç¯å¢ƒå¯ä»¥è€ƒè™‘ç”¨ python çš„ PyGObject å›¾å½¢åº“ï¼Œæ™®é€šåº”ç”¨ç¨‹åºçš„ç•Œé¢ç”¨è¿™ä¸ªè¶³å¤Ÿäº†ï¼Œé€šè¿‡ mingw ä¹Ÿå¯åœ¨ Windows ä¸‹è¿è¡Œï¼š

    https://gnome.pages.gitlab.gnome.org/pygobject/getting_started.html

    https://www.gtk.org/docs/installations/windows/

### ç¯å¢ƒæ–¹æ¡ˆé€‰æ‹©

Windows 10+ ä¸‹ä½¿ç”¨ WSL å¼€å‘ GNU ç¯å¢ƒè®¾ç½®

    https://github.com/hsab/WSL-config

Windows C++ å¼€å‘ç¯å¢ƒé…ç½®

    g++ 7.0 + git + cmake

    code::block / vscode / SourceInsight

    WinSCP åŒæ­¥æœ¬åœ°å’Œç¼–è¯‘æœºä»£ç 

    BeyondCompare å›¾å½¢åŒ–åˆå¹¶ä»£ç 
        æ¨èç”¨ meld æˆ– Diffuse æ›¿æ¢ BeyondCompareï¼Œå‚è§ç« èŠ‚ [ç»™èµ„æºç®¡ç†å™¨æ·»åŠ  meld å³é”®èœå•]

    tmux + vim ç›´æ¥åœ¨ç¼–è¯‘æœºå†™ä»£ç ï¼Œæ–¹ä¾¿éšæ—¶sshä¸Šå»å¤åŸç°åœºç»§ç»­ã€‚

    é™æ€ä»£ç åˆ†æå·¥å…· SourceInsight

    Understand ç‹è€…æ²¡æœ‰ä¹‹ä¸€
        https://www.scitools.com
        https://blog.csdn.net/jojozym/article/details/104722107
        https://www.zhihu.com/question/19570229/answer/1626066191

    åº“ toft + chrome + leveldb + folly + zeromq

#### å„æ¡†æ¶å¯¹Windowsæœ¬åœ°èµ„æºçš„è®¿é—®æ–¹å¼ä¸åŒ

è™½ç„¶éƒ½æ˜¯ä½¿ç”¨ mintty.exe ä½œä¸ºæœ¬åœ°ç»ˆç«¯æ¨¡æ‹Ÿå™¨ï¼Œä½†å„æ¡†æ¶å¯¹ Windows ç›®å½• C:\> çš„è§£é‡Šä¸åŒï¼Œshellæ“ä½œçš„ä½ç½®ä¸ä¸€æ ·

    Cygwin  /cygdrive/c

    MSYS2   /c

    wsl     /mnt/c

#### MGW å’Œ Cygwin çš„å®ç°æ€è·¯

MingW åœ¨ç¼–è¯‘æ—¶å¯¹äºŒè¿›åˆ¶ä»£ç è½¬è¯‘

    MingW (gcc ç¼–è¯‘åˆ°mscrt)åŒ…å« gcc å’Œä¸€ç³»åˆ—å·¥å…·ï¼Œæ˜¯ Windows ä¸‹çš„ gnu ç¯å¢ƒã€‚

    ç¼–è¯‘ linux c++ æºä»£ç ï¼Œç”Ÿæˆ Windows ä¸‹çš„ exe ç¨‹åºï¼Œå…¨éƒ¨ä½¿ç”¨ä» KERNEL32 å¯¼å‡ºçš„æ ‡å‡† Windows ç³»ç»Ÿ APIï¼Œç›¸æ¯” Cygwin ä½“ç§¯æ›´å°ï¼Œä½¿ç”¨æ›´æ–¹ä¾¿ã€‚

    å¦‚åˆ›å»ºè¿›ç¨‹ï¼Œ Windows ç”¨ CreateProcess() ï¼Œè€Œ Linux ä½¿ç”¨ fork()ï¼šä¿®æ”¹ç¼–è¯‘å™¨ï¼Œè®© Window ä¸‹çš„ç¼–è¯‘å™¨æŠŠè¯¸å¦‚ fork() çš„è°ƒç”¨ç¿»è¯‘æˆç­‰ä»·çš„ mscrt CreateProcess() å½¢å¼ã€‚

Cygwin åœ¨ç¼–è¯‘æ—¶ä¸­é—´åŠ äº†ä¸ªç¿»è¯‘å±‚ cygwin1.dll

    https://zhuanlan.zhihu.com/p/56572298

    Cygwin ç”Ÿæˆçš„ç¨‹åºä¾ç„¶æœ‰ fork() è¿™æ ·çš„ Linux ç³»ç»Ÿè°ƒç”¨ï¼Œä½†ç›®æ ‡åº“æ˜¯ cygwin1.dllã€‚

    Cygwinï¼ˆPOSIXæ¥å£è½¬æ¢åæ“ä½œwindowsï¼‰åœ¨Windowsä¸­å¢åŠ äº†ä¸€ä¸ªä¸­é—´å±‚â€”â€”å…¼å®¹POSIXçš„æ¨¡æ‹Ÿå±‚ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šæ„å»ºäº†å¤§é‡Linux-likeçš„è½¯ä»¶å·¥å…·ï¼Œç”±æ­¤æä¾›äº†ä¸€ä¸ªå®Œæ•´çš„ POSIX Linux ç¯å¢ƒï¼ˆä»¥ GNU å·¥å…·ä¸ºä»£è¡¨ï¼‰ï¼Œæ¨¡æ‹Ÿå±‚å¯¹linux c++ä»£ç çš„æ¥å£å¦‚åŒ UNIX ä¸€æ ·ï¼Œ å¯¹Windowsç”± win32 çš„ API å®ç°çš„cygwin1.dllï¼Œè¿™å°±æ˜¯ Cygwin çš„åšæ³•ã€‚

    Cygwinå®ç°ï¼Œä¸æ˜¯ kvm è™šæ‹Ÿæœºç¯å¢ƒï¼Œä¹Ÿä¸æ˜¯ QEMU é‚£ç§è¿è¡Œæ—¶æ¨¡æ‹Ÿï¼Œå®ƒæä¾›çš„æ˜¯ç¨‹åºç¼–è¯‘æ—¶çš„æ¨¡æ‹Ÿå±‚ç¯å¢ƒï¼šexeè°ƒç”¨é€šè¿‡å®ƒçš„ä¸­é—´å±‚dllè½¬æ¢ä¸ºå¯¹windowsæ“ä½œç³»ç»Ÿçš„è°ƒç”¨ã€‚

    å€ŸåŠ©å®ƒä¸ä»…å¯ä»¥åœ¨ Windows å¹³å°ä¸Šä½¿ç”¨ GCC ç¼–è¯‘å™¨ï¼Œç†è®ºä¸Šå¯ä»¥åœ¨ç¼–è¯‘åè¿è¡Œ Linux å¹³å°ä¸Šæ‰€æœ‰çš„ç¨‹åºï¼šGNUã€UNIXã€Linuxè½¯ä»¶çš„c++æºä»£ç å‡ ä¹ä¸ç”¨ä¿®æ”¹å°±å¯ä»¥åœ¨Cygwinç¯å¢ƒä¸­ç¼–è¯‘æ„å»ºï¼Œä»è€Œåœ¨windowsç¯å¢ƒä¸‹è¿è¡Œã€‚

    å¯¹äºWindowså¼€å‘è€…ï¼Œç¨‹åºä»£ç æ—¢å¯ä»¥è°ƒç”¨Win32 APIï¼Œåˆå¯ä»¥è°ƒç”¨Cygwin APIï¼Œç”šè‡³æ··åˆï¼Œå€ŸåŠ©Cygwinçš„äº¤å‰ç¼–è¯‘æ„å»ºç¯å¢ƒï¼ŒWindowsç‰ˆçš„ä»£ç æ”¹åŠ¨å¾ˆå°‘å°±å¯ä»¥ç¼–è¯‘åè¿è¡Œåœ¨Linuxä¸‹ã€‚

    ç”¨ MingW ç¼–è¯‘çš„ç¨‹åºæ€§èƒ½ä¼šé«˜ä¸€ç‚¹ï¼Œè€Œä¸”ä¹Ÿä¸ç”¨å¸¦ç€é‚£ä¸ªæ¥è¿‘ä¸¤å…†çš„ cygwin1.dll æ–‡ä»¶ã€‚
    ä½† Cygwin å¯¹ Linux çš„æ¨¡æ‹Ÿæ¯”è¾ƒå®Œæ•´ï¼Œç”šè‡³æœ‰ä¸€ä¸ª Cygwin X çš„é¡¹ç›®ï¼Œå¯ä»¥ç›´æ¥ç”¨ Cygwin è·‘ Xã€‚

    å¦å¤– Cygwin å¯ä»¥è®¾ç½® -mno-cygwin çš„ flagï¼Œæ¥ä½¿ç”¨ MingW ç¼–è¯‘ã€‚

å–èˆï¼šé€‰ MSYS2

    å¦‚æœä»…éœ€è¦åœ¨ Windows å¹³å°ä¸Šä½¿ç”¨ GCCï¼Œå¯ä»¥ä½¿ç”¨ MinGW æˆ–è€… Cygwinã€‚

    å¦‚æœè¿˜æœ‰æ›´é«˜çš„éœ€æ±‚ï¼ˆä¾‹å¦‚è¿è¡Œ POSIX åº”ç”¨ç¨‹åºï¼‰ï¼Œå°±åªèƒ½é€‰æ‹©å®‰è£… Cygwinã€‚

    ç›¸å¯¹çš„ MingW ä¹Ÿæœ‰ä¸€ä¸ªå« MSYSï¼ˆMinimal SYStemï¼‰çš„å­é¡¹ç›®ï¼Œä¸»è¦æ˜¯æä¾›äº†ä¸€ä¸ªæ¨¡æ‹Ÿ Linux çš„ Shell å’Œä¸€äº›åŸºæœ¬çš„ Linux å·¥å…·ã€‚

    ç›®å‰æµè¡Œçš„ MSYS2 æ˜¯ MSYS çš„ä¸€ä¸ªå‡çº§ç‰ˆï¼Œå‡†ç¡®çš„è¯´æ˜¯é›†æˆäº† pacman å’Œ Mingw-w64 çš„ Cygwin å‡çº§ç‰ˆã€‚

    å¦‚æœä½ åªæ˜¯æƒ³åœ¨ Windows ä¸‹ä½¿ç”¨ä¸€äº› Linux å°å·¥å…·ï¼Œå»ºè®®ç”¨ MSYS2ï¼ŒæŠŠ /usr/bin åŠ è¿›ç¯å¢ƒå˜é‡ path ä»¥åï¼Œå¯ä»¥ç›´æ¥åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨ Linux å‘½ä»¤ã€‚

å¦æœ‰ Linux ä¸‹è¿è¡Œ Windows ç¨‹åºçš„ä¸­é—´å±‚ wineï¼Œä¹Ÿæ˜¯è¿™ä¸ªæ€è·¯

    https://www.winehq.org/

#### MinGW

æ­¤é¡¹ç›®å·²åœæ­¢ç»´æŠ¤

    https://www.ics.uci.edu/~pattis/common/handouts/mingweclipse/mingw.html

#### MinGW64

MinGW-w64 å®‰è£…é…ç½®å•ï¼Œgcc æ˜¯ 6.2.0 ç‰ˆæœ¬ï¼Œç³»ç»Ÿæ¶æ„æ˜¯ 64ä½ï¼Œæ¥å£åè®®æ˜¯ win32ï¼Œå¼‚å¸¸å¤„ç†æ¨¡å‹æ˜¯ sehï¼ŒBuild revision æ˜¯ 1 ã€‚

ç®€å•æ“ä½œçš„è¯ï¼Œå®‰è£…å¼€æºçš„ gcc IDEå¼€å‘ç¯å¢ƒå³å¯ï¼Œå·²ç»éƒ½æ†ç»‘äº†Mingw64ã€‚æ¯”å¦‚ CodeLiteï¼ŒCodeBlocksï¼ŒEclipse CDTï¼ŒApache NetBeansï¼ˆJDK 8ï¼‰ã€‚

æ”¶è´¹çš„æœ‰JetBrains Clionï¼ŒAppCode ï¼ˆmacï¼‰ã€‚

#### MSYSã€MSYS2

    https://www.msys2.org/

    https://msys2.github.io/

MinGW ä»…ä»…æ˜¯å·¥å…·é“¾ï¼ŒWindows ä¸‹çš„ cmd ä½¿ç”¨èµ·æ¥ä¸å¤Ÿæ–¹ä¾¿ï¼ŒMSYS æ˜¯ç”¨äºè¾…åŠ© Windows ç‰ˆ MinGW è¿›è¡Œå‘½ä»¤è¡Œå¼€å‘çš„é…å¥—è½¯ä»¶åŒ…ï¼šæä¾›äº†éƒ¨åˆ† Unix å·¥å…·ä»¥ä½¿å¾— MinGW çš„å·¥å…·ä½¿ç”¨èµ·æ¥æ–¹ä¾¿ä¸€äº›ã€‚ç›¸æ¯”åŸºäºåºå¤§çš„ Cygwin ä¸‹çš„ MinGW ä¼šè½»å·§ä¸å°‘ã€‚

MSYS2 æ˜¯ MSYS çš„ç¬¬äºŒä»£ï¼Œæœ‰å¤§é‡é¢„ç¼–è¯‘çš„è½¯ä»¶åŒ…ï¼Œå¹¶ä¸”å…·æœ‰åŒ…ç®¡ç†å™¨ pacman (Arch Linux)ã€‚

åœ¨ Windows ä¸Šä½¿ç”¨ Linux ç¨‹åº

    å¦‚æœåªæ˜¯éœ€è¦ä¸€ä¸ªç¼–è¯‘å™¨çš„è¯ï¼Œå¯ä»¥ç”¨MinGW64ã€‚

    å¦‚æœä½¿ç”¨å·¥å…·è½¯ä»¶å±…å¤šï¼Œè¿˜æ˜¯ Msys2 èƒ½åº”ä»˜ä¸€åˆ‡æƒ…å†µï¼Œå®ƒé›†åˆäº† cygwinã€mingw64 ä»¥åŠ mingw32ï¼ˆä¸ç­‰äºè€ç‰ˆçš„é‚£ä¸ªMinGWï¼‰ï¼Œshellã€gitã€å¤šç§ç¯å¢ƒçš„ gccï¼ˆé€‚ç”¨äº cygwin ç¯å¢ƒæˆ–åŸç”Ÿ Windowsï¼‰ï¼Œè€Œä¸”æœ‰ pacman(ArcLinux) ä½œä¸ºåŒ…ç®¡ç†å™¨ã€‚

#### Windows 10+ æœ¬åœ°åŒ– Linux ç¼–ç¨‹æ¥å£

Windows 10 åœ¨ 2022 å¹´åï¼Œå·²ç»æ¯”è¾ƒå®Œæ•´çš„æä¾›äº†å¯¹ Linux çš„å­—ç¬¦ç¨‹åºå’Œ GUI ç¨‹åºçš„ç›¸åº”ç¼–ç¨‹æ¥å£

    å¯¹ Linux å­—ç¬¦ç¨‹åºï¼Œé€šè¿‡ ConPty æ¥å£æ”¯æŒ unix pty åº”ç”¨

    å¯¹ Linux GUI ç¨‹åºï¼Œé€šè¿‡ WSLg æ¥å£æ”¯æŒ x-window/wayland ç­‰æ¡†æ¶ä¸‹çš„åº”ç”¨

> ConPty

    https://zhuanlan.zhihu.com/p/102393122

    https://devblogs.microsoft.com/commandline/windows-command-line-introducing-the-windows-pseudo-console-conpty/

    https://learn.microsoft.com/en-us/windows/console/creating-a-pseudoconsole-session
    https://learn.microsoft.com/en-us/windows/terminal/samples
            https://github.com/microsoft/terminal/tree/main/samples/ConPTY/EchoCon

    https://www.zhihu.com/question/303307670

åŸºäº ConPTY çš„ç»ˆç«¯ï¼Œæ—¢èƒ½è¿è¡Œ POSIX å‘½ä»¤è¡Œç¨‹åºï¼Œä¹Ÿèƒ½è¿è¡ŒåŸºäº Windows ConHost çš„å‘½ä»¤è¡Œç¨‹åºï¼Œéœ€è¦ Windows version >= 10 / 2019 1809 (build >= 10.0.17763)ã€‚

ç›®å‰æ”¯æŒ Conpty æ¥å£çš„ç»ˆç«¯ä¸»è¦æœ‰

    Windows Terminal (from the people who wrote conpty)

    VSCodeã€IDEAã€Eclipse ç­‰ integrated terminal using ConPTY

    PowerShell 7+ ä½¿ç”¨ conpty æ¥å£è¿è¡Œ cmd å­—ç¬¦ç¨‹åº

    åœ¨ 2022-10-28 MSYS2ã€mintty æ”¯æŒä½¿ç”¨ ConPty æ¥å£äº†ï¼š

        MSYS2 çš„é…ç½®æ–‡ä»¶ /etc/git-bash.config ä¸­è®¾ç½®å˜é‡ `MSYS=enable_pcon`

        mintty é…ç½®æ–‡ä»¶ .minttyrc ä¸­è®¾ç½® `ConPTY=on`

    æœ€ç›´æ¥çš„å¥½å¤„æ˜¯ï¼Œåœ¨ mintty ä¸­æ‰§è¡Œ Windows çš„ cmd å­—ç¬¦ç¨‹åºï¼Œä¸å†éœ€è¦å€ŸåŠ© winpty å»åŠ è½½è°ƒç”¨äº† https://github.com/mintty/mintty/wiki/Tips#inputoutput-interaction-with-alien-programs

æœ‰ä¸ªæ€§èƒ½å¯¹æ¯”æµ‹è¯•

    https://kichwacoders.com/2021/05/24/conpty-performance-in-eclipse-terminal

> WSLg

    https://github.com/microsoft/wslg

ç›®å‰å·²ç»å¯ä»¥æ”¯æŒåœ¨å‘½ä»¤è¡Œå¯åŠ¨è¿è¡Œ Linux GUI ç¨‹åºäº†ï¼Œå¦‚ï¼š gvimã€gedit ç­‰ï¼Œç”šè‡³æ”¯æŒ GPU åŠ é€Ÿçš„ 3D ç¨‹åºã€‚

WSLg å…¶å®æ˜¯ä¸ªéƒ¨ç½²äº† X Server çš„ Linuxï¼Œæ·»åŠ äº†æ”¯æŒ Windows è¿œç¨‹æ¡Œé¢çš„ FreeRDP æœåŠ¡ï¼Œå³ä½œä¸º X-window åº”ç”¨å’Œ  Windows çª—å£åº”ç”¨çš„æ¡¥æ¢å­˜åœ¨ã€‚

é€šè¿‡ Windows è¿œç¨‹æ¡Œé¢çš„æ¥å£å®ç°äº†ç”¨æˆ·åœ¨ Windows æ¡Œé¢ç›´æ¥ä½¿ç”¨ Linux GUI ç¨‹åºï¼š

    Windows ç”¨æˆ·ç•Œé¢ <-> RDP <-> X Server <-> Linux GUI ç¨‹åºã€‚

è€Œä¸” WSLg ç”¨åˆ°çš„å…¶å®æ˜¯æ›¿ä»£ X Window System çš„ Wayland Compositorï¼Œä¹Ÿå°±æ˜¯ Wayland å®˜æ–¹ç»™å‡ºçš„å‚è€ƒå®ç° Westonã€‚è¿™ç§ç±»ä¼¼äºæ·»åŠ äº†ä¸ªä¸­é—´ä»£ç†çš„è§£å†³æ–¹å¼ï¼Œæœ‰åˆ©äºå®Œç¾é€‚é…å„å¤§ Linux å‘è¡Œç‰ˆå’Œå„ç§ Linux GUI ç¨‹åºã€‚

WSLgï¼ˆWindows Subsystem for Linux GUIï¼‰ æ˜¯å¾®è½¯å®˜æ–¹æä¾›çš„åŠŸèƒ½ï¼Œå…è®¸ WSL 2 ç›´æ¥è¿è¡Œ Linux GUI åº”ç”¨ç¨‹åºï¼ˆåŒ…æ‹¬å®Œæ•´çš„æ¡Œé¢ç¯å¢ƒï¼‰ï¼Œå¹¶è‡ªåŠ¨é›†æˆåˆ° Windows æ¡Œé¢ã€‚

    æ— éœ€é¢å¤– X Serverï¼ˆå¦‚ VcXsrv/X410ï¼‰ã€‚

    é»˜è®¤ä½¿ç”¨ Waylandï¼Œæ”¯æŒ X11ï¼Œéœ€è¦é¢å¤–å®‰è£…

    æ”¯æŒå‰ªè´´æ¿å…±äº«ã€éŸ³é¢‘ã€GPU åŠ é€Ÿï¼ˆé€‚ç”¨äº OpenGL/Vulkanï¼‰ã€‚

    é€‚ç”¨äº Windows 11ï¼ˆ21H2+ï¼‰æˆ–æœ€æ–° Win10ï¼ˆéœ€æ‰‹åŠ¨å¯ç”¨ï¼‰ã€‚

åœ¨ Windows Subsystem for Linux (WSL) ä¸‹ä½¿ç”¨ GNOME + WSLg æ˜¯ä¸€ç§æ›´ç°ä»£ã€æ›´ä¾¿æ·çš„æ–¹å¼ï¼Œå¯ä»¥ç›´æ¥åœ¨ Windows ä¸Šè¿è¡Œå®Œæ•´çš„ Linux æ¡Œé¢ç¯å¢ƒï¼Œè€Œæ— éœ€é¢å¤–é…ç½® X Serverã€‚

å‚è§ç« èŠ‚ [åœ¨ WSL å®ä¾‹ä¸Šè¿è¡Œå®Œæ•´çš„ Linux æ¡Œé¢ç¯å¢ƒ](Windows 10+ é‚£äº›äº‹å„¿.md)ã€‚

## Windowså­—ç¬¦ç»ˆç«¯

Windows 10 2018å¹´ä¹‹å‰çš„ç‰ˆæœ¬ CMD ç»ˆç«¯ä¸åŒäº Linux çš„ä¼ªç»ˆç«¯æœºåˆ¶ï¼š

    ç»ˆç«¯æ¨¡æ‹Ÿå™¨çš„è§’è‰²æ˜¯ conhost.exeï¼Œé€šè¿‡å¤–å£³ç¨‹åº cmdã€powershellï¼Œä»–ä»¬åœ¨å¯åŠ¨æ—¶è¿æ¥æœ¬æœºçš„ conhostã€‚

    conhost å®ç°æœºåˆ¶è·Ÿ Linux ä¼ªç»ˆç«¯ä¸åŒï¼Œä¸€ä¸ªæ˜¯è°ƒç”¨ Windows APIï¼Œä¸€ä¸ªæ˜¯å‘é€æ–‡æœ¬å­—ç¬¦ä½œä¸ºæ˜¾ç¤ºæ•ˆæœçš„æ§åˆ¶ï¼Œæ‰€ä»¥æŒ‰ç…§ Linux ç»ˆç«¯åŸç†å·¥ä½œçš„ç»ˆç«¯æ¨¡æ‹Ÿå™¨åŠå„ç§ç»ˆç«¯åº”ç”¨ç¨‹åºå…¶å®æ— æ³•è¿æ¥ conhostã€‚

    ç»ˆç«¯æ¦‚å¿µå‚è§ç« èŠ‚ [Linux å­—ç¬¦ç»ˆç«¯]ã€‚

Windows ä¸‹å®ç° Linux ä¼ªç»ˆç«¯æœºåˆ¶çš„æ˜¯ Msys2 é¡¹ç›®ï¼ŒåŸºäº putty åˆ¶ä½œäº† mintty.exe ä½œä¸ºæœ¬åœ°ç»ˆç«¯æ¨¡æ‹Ÿå™¨ï¼Œå€ŸåŠ©å®ƒå°±å¯ä»¥ä½¿ç”¨ unix pty çš„ç¨‹åºå¦‚ bashã€zsh ç­‰ï¼Œè¯¦è§ç« èŠ‚ [mintty ç»ˆç«¯æ¨¡æ‹Ÿå™¨]ã€‚

2018å¹´ Windows 10 æ–°çš„ ConPTY æ¥å£å®ç°äº† *NIX çš„ä¼ªç»ˆç«¯åŠŸèƒ½ï¼Œä½¿å¾—å„ç§ç»ˆç«¯æ¨¡æ‹Ÿå™¨å¯ä»¥ç”¨æ–‡æœ¬çš„æ–¹å¼è¿æ¥æœ¬æœº Windows æ¥å£çš„å­—ç¬¦æ˜¾ç¤ºæ¥å£ï¼Œå‚è§ç« èŠ‚ [Windows 10 æœ¬åœ°åŒ– Linux ç¼–ç¨‹æ¥å£]ï¼Œä¸‹åˆ—ä¸‰ä¸ªå¸¸ç”¨å·¥å…·ç¨‹åºä¼°è®¡ç”¨å¤„ä¸å¤§äº†ï¼š

    clink è¾…åŠ©å·¥å…·ï¼Œåœ¨ cmd ä¸‹æ¨¡ä»¿ bashï¼ŒæŒ‰ tab é”®è‡ªåŠ¨å®Œæˆï¼Œåƒ emacs ä¸€æ ·ç¼–è¾‘è¾“å…¥çš„å‘½ä»¤ï¼Œå¾ˆå¤šæ”¯æŒç»ˆç«¯å¤šè·¯å¤ç”¨çš„è½¯ä»¶åœ¨ Windows ä¸‹è°ƒç”¨ cmd éƒ½ä½¿ç”¨äº† clink

        https://github.com/chrisant996/clink
            ä¸å†æ›´æ–°äº† https://github.com/mridgers/clink

    winpty è¾…åŠ©å·¥å…·ï¼Œæä¾›äº† unix pty æ¥å£ä¸ cmd conhost æ¥å£çš„äº’é€šï¼Œæ˜¯ mintty è¿™ç§ MSYS2 ç¯å¢ƒä¸‹æ‰§è¡Œ Windows CMD/PowerShell ç¨‹åºçš„ä¸­ä»‹ï¼Œå‚è§ç« èŠ‚ [winpty è¿è¡Œ cmd å­—ç¬¦ç»ˆç«¯ç¨‹åº]

        https://github.com/rprichard/winpty

        https://gitforwindows.org/faq.html#some-native-console-programs-dont-work-when-run-from-git-bash-how-to-fix-it

    wslbridge è¾…åŠ©å·¥å…·ï¼Œæä¾›äº† unix pty æ¥å£ä¸ WSL(Windows Subsystem for Linux) çš„äº’é€šï¼Œå¾ˆå¤šæ”¯æŒç»ˆç«¯å¤šè·¯å¤ç”¨çš„è½¯ä»¶åœ¨ Windows ä¸‹éƒ½é€šè¿‡è¯¥ç»„ä»¶ä½¿ç”¨ WSL ä¼šè¯

        wslbridge2 https://github.com/Biswa96/wslbridge2
            wslbridge ä¸æ›´æ–°äº†2018 https://github.com/rprichard/wslbridge/

æœ‰å¾ˆå¤šå›¾å½¢åŒ–çš„ç»ˆç«¯æ¨¡æ‹Ÿå™¨ï¼Œå¦‚æœæƒ³ç»Ÿä¸€åœ¨ä¸€ä¸ªçª—å£ç¨‹åºä¸‹æ ‡ç­¾åŒ–ç®¡ç†å„ä¸ªè¿æ¥ï¼Œè¿™æ ·çš„ç¨‹åºç§°ä¸ºç»ˆç«¯å¤šè·¯å¤ç”¨å™¨ terminal multiplexerï¼Œæ¨èä½¿ç”¨ [Windows Terminal]ã€‚

Windows ä¸‹çš„å­—ç¬¦ç»ˆç«¯ï¼Œå¦‚æœè¦æ˜¾ç¤ºå›¾æ ‡åŒ–å­—ç¬¦ï¼Œéœ€è¦ Windows å®‰è£…æ”¯æŒå¤šç§ç¬¦å·çš„å­—ä½“ï¼Œè§ç« èŠ‚ [Nerd Font]ã€‚

### putty ç»ˆç«¯æ¨¡æ‹Ÿå™¨

putty å®Œç¾çš„å®ç°äº†åœ¨ Windows ä¸‹ä½¿ç”¨ ssh è¿œç¨‹è¿æ¥ Linux æœåŠ¡å™¨ï¼Œè¿æ¥åç”¨æˆ·ä½¿ç”¨ä½“éªŒè·Ÿ Linux ä¸‹çš„æœ¬åœ°ç»ˆç«¯æ¨¡æ‹Ÿå™¨å®Œå…¨ä¸€è‡´

    https://www.chiark.greenend.org.uk/~sgtatham/putty/

    ç«å“ KiTTY https://github.com/cyd01/KiTTY

        ä» putty æ‹‰çš„åˆ†æ”¯è€Œæ¥ï¼Œæ˜¯å¯¹ putty çš„æ˜“ç”¨æ€§æ”¹è¿›ï¼Œå…±ç”¨puttyçš„ç«™ç‚¹é…ç½®ï¼Œå¢åŠ äº†èƒŒæ™¯é€æ˜ã€æ”¯æŒç«™ç‚¹åˆ—è¡¨çš„æ–‡ä»¶å¤¹ã€è‡ªåŠ¨åŒ–æ“ä½œè„šæœ¬ï¼Œå¯ä»¥ç»™ç«™ç‚¹åŠ æ³¨é‡Šï¼Œè¿˜æœ‰ä¾¿æºç‰ˆ

        æ³¨æ„ï¼ŒåŒºåˆ«äº https://sw.kovidgoyal.net/kittyï¼Œé‚£ä¸ªæ˜¯ Linux ä¸‹çš„ GPU åŠ é€Ÿç»ˆç«¯æ¨¡æ‹Ÿå™¨

    ç«å“ bitvise https://www.bitvise.com/

putty è¿æ¥è¿œç¨‹æœåŠ¡å™¨ï¼Œå®ç°äº† ssh çš„å…¨éƒ¨åŠŸèƒ½ï¼Œä½¿ç”¨ PUTTYGEN.EXE ç”Ÿæˆå¹¶ç®¡ç†å¯†é’¥ï¼Œä½¿ç”¨ PAGEANT.EXE ä½œä¸ºå¯†é’¥ä»£ç†ï¼Œå¹¶åœ¨ä¸€ä¸ªå•ä¸€çª—å£ä¸‹å¡«å†™è¿œç¨‹æœåŠ¡å™¨çš„å‚æ•°é…ç½®ï¼Œè¿œç¨‹æœåŠ¡å™¨çš„ç»ˆç«¯æ˜¾ç¤ºä¹Ÿæ˜¯ä¸€ä¸ªå•ä¸€çª—å£ã€‚

æœ¯è¯­ï¼šä¼šè¯ Session

    å› ä¸ºåŠŸèƒ½æ˜¯è¿æ¥è¿œç¨‹ç«™ç‚¹ç„¶åæ‰§è¡Œå‘½ä»¤è¡Œæ“ä½œï¼Œputty æŠŠæ¯ä¸ªè¿æ¥ä¿å­˜ä¸ºä¼šè¯ï¼Œè®¾ç½®ä¼šè¯å°±æ˜¯è®¾ç½®è¿æ¥æŸç«™ç‚¹çš„å‚æ•°ï¼Œé™¤äº†ç»ˆç«¯æ˜¾ç¤ºçš„å‚æ•°ï¼Œè¿˜æœ‰å„ç§è¿æ¥åè®®çš„å‚æ•°ç­‰å¤šç§è®¾ç½®

putty ç™»å½•ç«™ç‚¹åçš„ä½¿ç”¨å¾ˆç®€å•

    ç‚¹å‡»å¹¶æ‹–åŠ¨é¼ æ ‡å·¦é”®æ˜¯é€‰æ‹©æ–‡å­—å¹¶å¤åˆ¶åˆ°æ“ä½œç³»ç»Ÿå‰ªè´´æ¿ï¼ˆè¿è¡Œ putty çš„æ“ä½œç³»ç»Ÿï¼Œä¸æ˜¯è¿œç¨‹ç«™ç‚¹çš„ï¼‰

    ç‚¹å‡»é¼ æ ‡å³é”®ï¼Œä»æ“ä½œç³»ç»Ÿå‰ªè´´æ¿ç²˜è´´åˆ°å½“å‰çš„å‘½ä»¤æç¤ºç¬¦åé¢

putty çš„åˆå§‹ç•Œé¢åªæœ‰ä¸€ä¸ªï¼Œé€‰æ‹©ä¼šè¯å’Œä¼šè¯è®¾ç½®ä¸¤ä¸ªåŠŸèƒ½åŒºæ··åˆï¼Œä½¿ç”¨é€»è¾‘æœ‰ç‚¹ç»•ï¼š

    ä¼šè¯è®¾ç½®çš„ç±»åˆ«ç•Œé¢â€œCategoryâ€åœ¨å·¦ä¾§æ ‘å½¢å±•ç¤º

    ä¼šè¯é€‰æ‹©ç•Œé¢åœ¨å³ä¾§ï¼Œå¯¹åº”å·¦ä¾§ç•Œé¢â€œCategoryâ€çš„æ ‘å½¢åˆ—è¡¨ç¬¬ä¸€é¡¹â€œSessionâ€

    ä¼šè¯é€‰æ‹©ç•Œé¢çš„ä¸ŠåŠéƒ¨åˆ†æ˜¯ç«™ç‚¹çš„ipåœ°å€å’Œç«¯å£ç­‰å‚æ•°è®¾ç½®ï¼Œä¸‹åŠéƒ¨åˆ†æ˜¯ä¼šè¯åˆ—è¡¨ä¾›é€‰æ‹©

    ä¼šè¯å‚æ•°çš„å„é¡¹è®¾ç½®ç•Œé¢åœ¨å³ä¾§ï¼Œå¯¹åº”å·¦ä¾§ç•Œé¢â€œCategoryâ€çš„æ ‘å½¢åˆ—è¡¨çš„å…¶å®ƒå„åˆ†æ”¯é¡¹

    è¿æ¥ä¼šè¯çš„â€œOpenâ€æŒ‰é’®åœ¨æœ€ä¸‹æ–¹ï¼Œé€‰æ‹©ä¸€ä¸ªå·²æœ‰ä¼šè¯åç‚¹å‡»è¯¥æŒ‰é’®å³å¯è¿æ¥ç™»å½•ç«™ç‚¹

    å·¦ä¾§ç•Œé¢â€œCategoryâ€çš„æ ‘å½¢åˆ—è¡¨çš„å…¶å®ƒéƒ¨åˆ†ï¼Œæ˜¯å½“å‰é€‰æ‹©çš„ä¼šè¯çš„å‚æ•°ï¼Œç‚¹å‡»å„ä¸ªåˆ†æ”¯æ—¶å³ä¾§ç•Œé¢ä¼šåˆ‡æ¢ä¸ºè¯¥ä¼šè¯å„å‚æ•°çš„è®¾ç½®ç•Œé¢ï¼ˆéœ€è¦å…ˆåœ¨ä¼šè¯é€‰æ‹©ç•Œé¢é€‰æ‹©ä¼šè¯ï¼Œç‚¹â€œLoadâ€æŒ‰é’®ï¼Œå¦åˆ™æ˜¯é»˜è®¤çš„åˆå§‹å‚æ•°ï¼‰

    å¦‚æœå³ä¾§ç•Œé¢éœ€è¦åˆ‡æ¢åˆ°ä¼šè¯é€‰æ‹©ç•Œé¢ï¼Œç‚¹å‡»å·¦ä¾§ç•Œé¢â€œCategoryâ€çš„æ ‘å½¢åˆ—è¡¨ç¬¬ä¸€é¡¹â€œSessionâ€

ç®€æ˜“è¿æ¥ç«™ç‚¹ï¼š

    åœ¨å·¦ä¾§ç•Œé¢â€œCategoryâ€ï¼Œç‚¹å‡»çš„æ ‘å½¢åˆ—è¡¨ç¬¬ä¸€é¡¹â€œSessionâ€ï¼Œå³ä¾§å‡ºç°ä¼šè¯é€‰æ‹©ç•Œé¢ï¼Œè¿™ä¹Ÿæ˜¯ putty å¯åŠ¨åçš„åˆå§‹ç•Œé¢

    å³ä¾§ä¼šè¯é€‰æ‹©ç•Œé¢ï¼Œåœ¨â€œHost Name(or IP address)â€è¾“å…¥åœ°å€å’Œç«¯å£ï¼Œç‚¹å‡»ä¸‹æ–¹çš„â€œOpenâ€æŒ‰é’®ï¼Œè¿™æ ·ä¼šä½¿ç”¨é»˜è®¤çš„åˆå§‹å‚æ•°è¿›è¡Œè¿æ¥

    å¯ç‚¹å‡»å·¦ä¾§ç•Œé¢çš„æ ‘å½¢åˆ—è¡¨ï¼Œè®¾ç½®æœ¬æ¬¡è¿æ¥ä½¿ç”¨çš„å‚æ•°ï¼Œç„¶åå†ç‚¹å‡»â€œOpenâ€æŒ‰é’®

è¿æ¥å·²æœ‰ç«™ç‚¹ï¼š

    åœ¨å·¦ä¾§ç•Œé¢â€œCategoryâ€ï¼Œç‚¹å‡»çš„æ ‘å½¢åˆ—è¡¨ç¬¬ä¸€é¡¹â€œSessionâ€ï¼Œå³ä¾§å‡ºç°ä¼šè¯é€‰æ‹©ç•Œé¢ï¼Œè¿™ä¹Ÿæ˜¯ putty å¯åŠ¨åçš„åˆå§‹ç•Œé¢

    åœ¨å³ä¾§ä¼šè¯é€‰æ‹©ç•Œé¢ï¼Œæ“ä½œå¦‚ä¸‹ï¼š

        åœ¨â€œSaved Sessionsâ€åˆ—è¡¨é€‰æ‹©ä¸€ä¸ªä¼šè¯ï¼ŒåŒå‡»å³å¯ã€‚

        æˆ–åœ¨â€œSaved Sessionsâ€åˆ—è¡¨ç‚¹å‡»ä¸€ä¸ªä¼šè¯ï¼Œä½¿å…¶å˜ä¸ºè“è‰²å·²é€‰ï¼Œç„¶åç‚¹å‡»ä¸‹æ–¹çš„â€œOpenâ€æŒ‰é’®

        æˆ–åœ¨â€œSaved Sessionsâ€ä¸‹æ–¹çš„ç¼–è¾‘æ¡†æ‰‹åŠ¨è¾“å…¥ä¼šè¯åç§°ï¼Œç„¶åç‚¹å‡»ä¸‹æ–¹çš„â€œOpenâ€æŒ‰é’®

å»ºç«‹æ–°çš„ä¼šè¯

    åœ¨å·¦ä¾§ç•Œé¢â€œCategoryâ€ï¼Œç‚¹å‡»çš„æ ‘å½¢åˆ—è¡¨ç¬¬ä¸€é¡¹â€œSessionâ€ï¼Œå³ä¾§å‡ºç°ä¼šè¯é€‰æ‹©ç•Œé¢ï¼Œè¿™ä¹Ÿæ˜¯ putty å¯åŠ¨åçš„åˆå§‹ç•Œé¢

    åœ¨å³ä¾§ä¼šè¯é€‰æ‹©ç•Œé¢ï¼Œæ“ä½œå¦‚ä¸‹ï¼š

        åœ¨â€œHost Name(or IP address)â€ã€â€œPortâ€è¾“å…¥åœ°å€å’Œç«¯å£

        åœ¨â€œSaved Sessionsâ€è¾“å…¥æ–°çš„ä¼šè¯åç§°

        ç‚¹å‡»å³ä¾§çš„â€œSaveâ€æŒ‰é’®

    å¦‚æœæ–°ä¼šè¯æœ‰æŸäº›å‚æ•°éœ€è¦è®¾ç½®ï¼Œæ‰§è¡Œä¸‹é¢çš„â€œç¼–è¾‘å·²æœ‰ä¼šè¯â€æ­¥éª¤ã€‚

ç¼–è¾‘å·²æœ‰ä¼šè¯

    åœ¨å·¦ä¾§ç•Œé¢â€œCategoryâ€ï¼Œç‚¹å‡»çš„æ ‘å½¢åˆ—è¡¨ç¬¬ä¸€é¡¹â€œSessionâ€ï¼Œå³ä¾§å‡ºç°ä¼šè¯é€‰æ‹©ç•Œé¢ï¼Œè¿™ä¹Ÿæ˜¯ putty å¯åŠ¨åçš„åˆå§‹ç•Œé¢

    1ã€åœ¨å³ä¾§ä¼šè¯é€‰æ‹©ç•Œé¢ï¼Œæ“ä½œå¦‚ä¸‹ï¼š

    åœ¨ â€œSaved Sessionsâ€ åˆ—è¡¨é€‰æ‹©ä¸€ä¸ªä¼šè¯ï¼Œç‚¹å‡»å³ä¾§çš„ â€œLoadâ€ æŒ‰é’®ï¼Œè¿™æ—¶ä¼šè¯åç§°ä¼šè‡ªåŠ¨å¡«å……â€œSaved Sessionsâ€ ä¸‹æ–¹çš„ç¼–è¾‘æ¡†ï¼Œè€Œä¸” â€œHost Name(or IP address)â€ã€â€œPortâ€ å’Œ â€œconnection typeâ€ æ ç›®éƒ½ä¼šæ˜¾ç¤ºè¯¥ä¼šè¯çš„ç«™ç‚¹å‚æ•°

        å¦‚æœæƒ³å¤åˆ¶è¯¥ä¼šè¯ï¼Œç¼–è¾‘æ–°çš„ä¼šè¯åç§°ï¼Œç„¶åç‚¹å‡»å³ä¾§çš„ â€œSaveâ€ æŒ‰é’®ï¼Œè½¬ä¸‹é¢ç¬¬4æ­¥ã€‚

        å¦‚æœæƒ³åˆ é™¤è¯¥ä¼šè¯ï¼Œç‚¹å‡»å³ä¾§çš„ â€œDeleteâ€ æŒ‰é’®ï¼Œè½¬ä¸‹é¢ç¬¬4æ­¥ã€‚

    ä¸‹é¢çš„ç¬¬2ã€3æ­¥å¯éƒ½åšï¼Œæˆ–åªåšä¸€ä¸ªã€‚

    2ã€åŸºæœ¬ä¼šè¯å‚æ•°çš„ä¿®æ”¹ï¼š

    åœ¨å³ä¾§ä¼šè¯é€‰æ‹©ç•Œé¢ï¼Œå¯ä¿®æ”¹â€œHost Name(or IP address)â€ã€â€œPortâ€ å’Œ â€œconnection typeâ€ æ ç›®ã€‚

    ç‚¹å‡»å³ä¾§æŒ‰é’® â€œSaveâ€ ä¿å­˜ä½ çš„ä¿®æ”¹ã€‚å¦‚æœä¸ä¿å­˜ï¼Œç›´æ¥ç‚¹å‡»ä¸‹æ–¹çš„ â€œOpenâ€ æŒ‰é’®ï¼Œç›¸å½“äºç”¨ä½ ä¿®æ”¹çš„å‚æ•°ä¸´æ—¶è¿æ¥å½“å‰ç«™ç‚¹ã€‚

    ç„¶åå¯è½¬ä¸‹é¢ç¬¬4æ­¥ã€‚

    3ã€é«˜çº§ä¼šè¯å‚æ•°çš„ä¿®æ”¹ï¼šï¼ˆè¿™é‡Œæ¯”è¾ƒç»•ï¼Œä¹ æƒ¯ä¹ æƒ¯å°±å¥½ï¼‰

    ç‚¹å‡»å·¦ä¾§ â€œCategoryâ€ ç•Œé¢çš„æ ‘å½¢åˆ—è¡¨çš„å„ä¸ªåˆ†æ”¯ï¼Œå³ä¾§ç•Œé¢ä¼šè·Ÿéšæ”¹å˜ï¼Œä¸å†æ˜¯ä¼šè¯é€‰æ‹©ç•Œé¢äº†ï¼Œå˜æˆäº†ä½ å½“å‰é€‰æ‹©ä¼šè¯çš„ç›¸å…³å‚æ•°çš„è®¾ç½®ç•Œé¢ã€‚å¦‚æœæœªé€‰æ‹©ä¼šè¯ï¼Œåˆ™æ˜¯ putty å¯åŠ¨åä½¿ç”¨çš„é»˜è®¤åˆå§‹å‚æ•°ã€‚

        åˆ‡æ¢å·¦ä¾§é€‰æ‹©æ ‘å½¢åˆ—è¡¨çš„å„ä¸ªåˆ†æ”¯ï¼Œåˆ™å³ä¾§ç•Œé¢è·Ÿéšå˜ä¸ºç›¸å…³å‚æ•°çš„è®¾ç½®ï¼Œè‡ªè¡Œè°ƒæ•´å³å¯ã€‚

        æ¯”å¦‚â€œConnection->Dataâ€é‡Œé¢„è®¾è¯¥ç«™ç‚¹çš„ç™»å½•ç”¨æˆ·åï¼Œâ€œConnection->SSH-Authâ€é‡Œè®¾ç½®è¯¥ç«™ç‚¹å¯†é’¥ç™»å½•çš„å¯†é’¥æ–‡ä»¶ç­‰ç­‰ã€‚

        æœ‰äº›å‚æ•°æ˜¯å½±å“ç»ˆç«¯å‘ˆç°æ•ˆæœçš„ï¼Œæ¯”å¦‚ç»ˆç«¯ç±»å‹å¯ä»¥é€‰æ‹© xterm-256color ç­‰æ•ˆäºåœ¨ç™»å½•ç«™ç‚¹åçš„shellé‡Œè®¾ç½®ç¯å¢ƒå˜é‡ Term=xterm-256colorã€‚

        æœ‰äº›å‚æ•°å½±å“ putty çš„çª—å£ï¼Œæ¯”å¦‚çª—å£æ»šåŠ¨æ¡ç¼“å­˜å±å¹•å†…å®¹12000è¡Œï¼Œé…Œæƒ…è®¾ç½®ã€‚

    ä¿å­˜ä½ çš„ä¿®æ”¹ï¼šè°ƒæ•´å®Œæˆåï¼Œç‚¹å‡»å·¦ä¾§ç•Œé¢â€œCategoryâ€çš„æ ‘å½¢åˆ—è¡¨ç¬¬ä¸€é¡¹â€œSessionâ€ï¼Œå³ä¾§ä¼šé‡æ–°å‡ºç°ä½ çš„ä¼šè¯é€‰æ‹©ç•Œé¢

        æ£€æŸ¥ä¸‹â€œSaved Sessionsâ€ä¸‹æ–¹çš„ç¼–è¾‘æ¡†ï¼ŒåŠ¡å¿…ç¡®è®¤è‡ªåŠ¨å¡«å……çš„è¿˜æ˜¯ä½ åˆšæ‰é€‰æ‹©çš„é‚£ä¸ªä¼šè¯åç§°ï¼Œå¦‚æœæ˜¯æ–°çš„åç§°ä¼šè¢«ä¿å­˜ä¸ºæ–°çš„ä¼šè¯ã€‚

        ç‚¹å‡»å³ä¾§æŒ‰é’®â€œSaveâ€ä¿å­˜ä½ çš„ä¿®æ”¹ã€‚å¦‚æœä¸ä¿å­˜ï¼Œç›´æ¥ç‚¹å‡»ä¸‹æ–¹çš„â€œOpenâ€æŒ‰é’®ï¼Œç›¸å½“äºç”¨ä½ ä¿®æ”¹çš„å‚æ•°ä¸´æ—¶è¿æ¥å½“å‰ç«™ç‚¹ã€‚

    å¦‚æœæ”¹ä¹±äº†ä¸æƒ³ä¿å­˜ï¼Œè½¬ç¬¬1æ­¥é‡æ–°åŠ è½½ä¼šè¯è®¾ç½®å³å¯ã€‚

    4ã€æ‰§è¡Œä¸Šé¢â€œè¿æ¥å·²æœ‰ä¼šè¯â€çš„æ­¥éª¤ï¼Œè¿æ¥ä½ çš„ä¼šè¯ã€‚

å¦‚æœåœ¨å³ä¾§çš„ä¼šè¯é€‰æ‹©ç•Œé¢ï¼Œä¸é€‰æ‹©å·²æœ‰ä¼šè¯ï¼Œç›´æ¥åœ¨å·¦ä¾§ â€œCategoryâ€ ç•Œé¢çš„æ ‘å½¢åˆ—è¡¨è¿›è¡Œäº†å„ç§è°ƒæ•´

    ä¸æ¨èè¿™æ ·åšï¼Œå¯èƒ½ä¼šä¹±ã€‚

    è¿™æ ·éœ€è¦åç»­å†è¾“å…¥ipåœ°å€å’Œç«¯å£

        ç‚¹å‡»OpenæŒ‰é’®å°±æ˜¯â€œç®€æ˜“è¿æ¥â€

        å¦‚æœç»™å‡ºç«™ç‚¹åç§°åç‚¹å‡»â€œSaveâ€æŒ‰é’®ï¼Œè¿™æ ·ä¼šä¿å­˜ä¸€ä¸ªä¼šè¯ã€‚

å¤‡ä»½ä¼šè¯

puttyæŠŠä¼šè¯çš„å‚æ•°å†™å…¥äº† Windows æ³¨å†Œè¡¨ï¼Œéœ€è¦æ‰‹å·¥å¯¼å…¥ï¼Œæ–°å»ºä¸€ä¸ª exp_session.bat

```bat
REG EXPORT HKEY_CURRENT_USER\Software\SimonTatham SESSION.REG
```

æ‰§è¡Œè¯¥ bat æ–‡ä»¶ï¼Œä¼šåœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªåä¸º session.reg çš„æ–‡ä»¶ã€‚
å¦‚æœéœ€è¦æ¢å¤ç«™ç‚¹è®¾ç½®ï¼Œç›´æ¥åŒå‡»è¯¥æ–‡ä»¶å³ä¼šè¢« Windows å¯¼å…¥æ³¨å†Œè¡¨ã€‚

> putty ç¾åŒ–

    ä»¿æ•ˆæœ¬åœ°ç»ˆç«¯æ¨¡æ‹Ÿå™¨æ ¹æ®å˜é‡ $TERM è‡ªåŠ¨æ¨¡æ‹Ÿä¸ºæŒ‡å®šçš„ç»ˆç«¯ç±»å‹ï¼Œputty å¯ä»¥åœ¨ç«™ç‚¹é€‰é¡¹é‡Œè®¾ç½®ç»ˆç«¯ç±»å‹ï¼Œè¿™æ ·åœ¨ç™»å½•è¿œç¨‹æœåŠ¡å™¨åå°±æŒ‰ç…§æŒ‡å®šçš„ç±»å‹æ˜¾ç¤ºäº†ï¼Œä¸€èˆ¬é»˜è®¤ä¸º xterm å°±æ˜¯å½©è‰²ã€‚

å¼€å¯ Putty ç»ˆç«¯ 256è‰² çš„æ”¯æŒ: Putty->loadä½ çš„session->Window->Colours->å‹¾é€‰ â€œGeneral options for colour usageâ€ ä¸‹çš„å‡ ä¸ªé€‰é¡¹ã€‚

å³ä½¿ä½ è®¾ç½®ä¼šè¯æ—¶å‹¾é€‰äº†ä½¿ç”¨ 256color å’Œ true color çœŸå½©è‰²ï¼Œputty é»˜è®¤çš„ä¸»é¢˜æ¯”è¾ƒä¿å®ˆï¼Œåªä½¿ç”¨ 16 ç§é¢œè‰²ï¼ˆç”¨ rgb è®¾ç½®ï¼Œå…¶å®æ”¯æŒçœŸå½©è‰²ï¼‰ï¼Œä½ sshç™»å½•åˆ°æœåŠ¡å™¨ä¼šå‘ç°æ–‡å­—è‰²å½©æ¯”è¾ƒåˆºçœ¼ã€‚

å¯ä»¥è‡ªå®šä¹‰é¢œè‰²ï¼Œåœ¨è®¾ç½®ä¼šè¯æ—¶ custom colorï¼Œå¦‚æœæ„Ÿè§‰æŒ¨ä¸ªè®¾ç½®å¤ªéº»çƒ¦ï¼Œè¯•è¯•åˆ«äººåšå¥½çš„

    https://github.com/AlexAkulov/putty-color-themes

    åŒ—æä¸»é¢˜é¢œè‰² https://github.com/arcticicestudio/nord-putty

    è¶…å¤šä¸»é¢˜é¢œè‰²ï¼Œæœ‰ putty çš„

        https://github.com/mbadolato/iTerm2-Color-Schemes

    è‡ªå®šä¹‰ä¸»é¢˜é¢œè‰²ï¼Œè‡ªå·±è®¾è®¡

        https://ciembor.github.io/4bit/ ç‚¹å‡»å³ä¸Šè§’â€œGet Schemeâ€ï¼Œé€‰å¤åˆ¶å¹¶ç²˜è´´

æ¨èä½¿ç”¨ nord ä¸»é¢˜

    curl -fsSLO https://github.com/arcticicestudio/nord-putty/raw/develop/src/nord.reg

åŒå‡»è¯¥ reg æ–‡ä»¶ï¼Œç¡®è®¤å¯¼å…¥ï¼Œç„¶åä½ çš„ putty ä¼šè¯åˆ—è¡¨é‡Œæ–°å¢ä¸€ä¸ª â€œNORDâ€ ä¼šè¯ï¼Œç‚¹å‡» â€œloadâ€ æŒ‰é’®åŠ è½½è¯¥ä¼šè¯ï¼Œå¯ä»¥çœ‹åˆ°åªè®¾ç½®äº†é¢œè‰²ï¼Œå¹¶æ²¡æœ‰ç«™ç‚¹ ipï¼Œå¡«å†™è‡ªå·±çš„ ip åœ°å€å’Œç«¯å£ï¼Œè¿æ¥çœ‹çœ‹ï¼Œä¼šå‘ç°é¢œè‰²æ•ˆæœæŸ”å’Œå¤šäº†ã€‚å¦‚æœæ»¡æ„ï¼Œå°±å¦å­˜è¯¥ä¼šè¯ä¸ºä½ çš„ç«™ç‚¹åç§°å³å¯ã€‚

### mintty ç»ˆç«¯æ¨¡æ‹Ÿå™¨

ç®€å•ä½¿ç”¨å»ºè®®ç›´æ¥å®‰è£… git for Windowsï¼Œå®ƒçš„ git bash å°±æ˜¯ minttyï¼Œè€Œä¸”è‡ªå¸¦ git è¿è¡Œéœ€è¦çš„ç›¸å…³ gnu å·¥å…·ç¨‹åºï¼Œéå¸¸æ–¹ä¾¿ã€‚è¯¦è§ç« èŠ‚ [mintty ç®€å•ä½¿ç”¨ï¼šGit for Windows]ã€‚

    https://github.com/mintty/mintty
        https://github.com/mintty/mintty/wiki/Tips
        http://mintty.github.io/
        å¸®åŠ© https://mintty.github.io/mintty.1.html

æºç æ¥è‡ª putty æ‹‰åˆ†æ”¯ï¼Œç›®å‰å½’å± MSYS2 é¡¹ç›®ï¼Œè‡ªå¸¦ bashï¼Œæ¨¡æ‹Ÿ unix pty æ•ˆæœåˆå¿«åˆå¥½

    å¦‚æœè¿è¡Œ cmd ä¸‹çš„ Windows å­—ç¬¦å‘½ä»¤ï¼Œæœ‰äº›å­—ç¬¦è§£é‡Šçš„æ˜¾ç¤ºæ•ˆæœä¸ä¸€è‡´ï¼Œå»ºè®®ä¸ cmd åˆ†åˆ«ä½¿ç”¨ï¼Œä¸åœ¨ mintty ä¸‹ä½¿ç”¨ cmd çš„å‘½ä»¤ã€‚æˆ–è€…ä½¿ç”¨ winpty è°ƒåº¦ï¼Œå‚è§ç« èŠ‚ [winpty è¿è¡Œ cmd å­—ç¬¦ç»ˆç«¯ç¨‹åº]ã€‚

    ctrl/shift + ins å¤åˆ¶/ç²˜è´´ï¼Œå…¶å®ç³»ç»Ÿé»˜è®¤ç”¨é¼ æ ‡æ‹–åŠ¨é€‰æ‹©çš„æ–‡å­—å¤åˆ¶åˆ°ç³»ç»Ÿå‰ªè´´æ¿

    åœ¨ tmux çš„é¼ æ ‡æ¨¡å¼ä¸‹ï¼ŒæŒ‰ä¸‹ shift å°±å¯ä»¥ä½¿ç”¨é¼ æ ‡é€‰æ‹©æ–‡å­—ï¼Œè‡ªåŠ¨å¤åˆ¶åˆ°ç³»ç»Ÿå‰ªè´´æ¿

    ctrl + plus/minus/zero æ”¾å¤§ã€ç¼©å°ã€è¿˜åŸ

    æ‹–æ‹½èµ„æºç®¡ç†å™¨é‡Œçš„æ–‡ä»¶/æ–‡ä»¶å¤¹åˆ° mintty å¯ä»¥å¾—åˆ°å…¶è·¯å¾„

mintty å¯ä»¥åœ¨ç»ˆç«¯æ˜¾ç¤ºå›¾ç‰‡ï¼Œä¸‹è½½ä»–çš„æºä»£ç ä¸‹ utils ç›®å½•ä¸‹çš„è„šæœ¬ showimg å³å¯

    $ curl -fsSL https://github.com/mintty/utils/raw/master/showimg |sudo tee /usr/local/bin/showimg && sudo chmod 755 /usr/local/bin/showimg

    å¦å¤–è¿˜æœ‰ catimg/SDL2_imageï¼ˆshowimage2ï¼‰ ç­‰è½¯ä»¶åŒ…æ”¯æŒåœ¨ç»ˆç«¯ä¸‹æ˜¾ç¤ºå›¾ç‰‡

å»ºè®®æ”¾åˆ°æœ¬åœ° /usr/bin/ ä¸‹ï¼Œä»¥åæ‰§è¡Œ `showimg xxx.jpg` å°±å¯ä»¥åœ¨ mintty ä¸‹æ˜¾ç¤ºæœ¬åœ°å›¾ç‰‡ï¼›å¦‚æœ ssh ç™»å½•åˆ°æœåŠ¡å™¨ä¸Šï¼Œåœ¨æœåŠ¡å™¨çš„ /usr/local/bin/ ä¸‹ä¹Ÿå®‰è£…è¿™ä¸ªè„šæœ¬ï¼Œåˆ™ mintty ä¹Ÿå¯ä»¥å“åº”æœåŠ¡å™¨ä¸Šæ‰§è¡Œçš„ `showimg xxx.jpg`ï¼Œæ˜¾ç¤ºæœåŠ¡å™¨ä¸Šçš„å›¾ç‰‡ã€‚

æˆ–å®‰è£…ä¸ª lsix è„šæœ¬ï¼Œå› ä¸º mintty æ”¯æŒ Sixel æ ¼å¼çš„å›¾ç‰‡æ˜¾ç¤º

        https://www.linuxprobe.com/sixel-linux.html

    å…ˆåœ¨æœåŠ¡å™¨ç«¯å®‰è£…ä¾èµ–åŒ…ï¼Œä¼šå®‰è£…ä¸€å †çš„åº“

        sudo apt install imagemagick

    ç„¶åæŠŠè„šæœ¬ lsix æ‹·è´åˆ°ä½ çš„ç»ˆç«¯çš„ /usr/bin/ ç›®å½•ä¸‹å³å¯

        # åªè¦ä½ çš„ç»ˆç«¯æ”¯æŒ Sixel å›¾å½¢æ ¼å¼å³å¯
        git clone --depth=1 https://github.com/hackerb9/lsix

    å°±åƒ ls å‘½ä»¤é‚£æ ·ä½¿ç”¨ lsixã€‚

#### winpty è¿è¡Œ cmd å­—ç¬¦ç¨‹åº

    https://github.com/mintty/mintty/wiki/Tips#inputoutput-interaction-with-alien-programs

    https://github.com/git-for-windows/git/wiki/FAQ#some-native-console-programs-dont-work-when-run-from-git-bash-how-to-fix-it

åœ¨ mintty æˆ– Cygwin çš„å‘½ä»¤è¡Œç¯å¢ƒä¸‹ï¼Œå¦‚æœæ‰§è¡ŒWindows æ§åˆ¶å°ç¨‹åº ï¼ˆWindows CMD ç¨‹åºæˆ– PowerShellï¼‰ï¼Œå¦‚ python ä¼šæŒ‚æ­»æ— æ³•è¿›å…¥ã€‚è¿™æ˜¯å› ä¸º python ä½¿ç”¨çš„æ˜¯ native Windows API for command-line user interactionï¼Œè€Œ mintty æ”¯æŒçš„æ˜¯ unix ptyï¼Œæˆ–ç§° Cygwin/MSYS ptyã€‚

ä¹Ÿå°±æ˜¯è¯´ï¼ŒWindows æ§åˆ¶å°ç¨‹åºåœ¨ MSYS2 mintty ä¸‹ç›´æ¥æ‰§è¡Œä¼šæŒ‚æ­»ï¼Œéœ€è¦æœ‰ä¸ª Cygwin/MSYS adapter æä¾›ç±»ä¼¼ wslbridge çš„è§’è‰²ã€‚

å®‰è£… winpty ä½œä¸º mintty ä»£ç†ï¼ˆgit for windows è‡ªå¸¦ï¼‰

    pacman -S winpty

ç„¶åæ‰§è¡Œ `winpty python` å³å¯æ­£å¸¸è¿›å…¥ python è§£é‡Šå™¨ç¯å¢ƒäº†

æœ€å¥½åœ¨ç”¨æˆ·ç™»å½•è„šæœ¬æ–‡ä»¶ ~/.bashrcã€~/.zshrc é‡Œæ·»åŠ  alias æ–¹ä¾¿ä½¿ç”¨

    alias python="winpty python"
    alias ipython="winpty ipython"
    alias mysql="winpty mysql"
    alias psql="winpty psql"
    alias redis-cli="winpty redis-cli"
    alias node="winpty node"
    alias vue='winpty vue'

    # Windows æ§åˆ¶å°ç¨‹åºéƒ½å¯ä»¥åœ¨ bash ä¸‹ç”¨ winpty æ¥è°ƒç”¨
    alias ping='winpty ping'

å¦‚æœ Windows version >= 10.2019.1809ï¼Œæ–°å¢çš„ ConPty æ¥å£å…¼å®¹äº†è€çš„æ§åˆ¶å°åº”ç”¨ç¨‹åº ConHost æ¥å£ï¼Œæ”¯æŒ ConPty æ¥å£çš„åº”ç”¨å¯ä»¥æ”¯æŒ unix ptyï¼Œå°±ä¸éœ€è¦ä½¿ç”¨ winpty åšè°ƒåº¦äº†ï¼Œè§ç« èŠ‚ [Windows 10 æœ¬åœ°åŒ– Linux ç¼–ç¨‹æ¥å£]ã€‚

#### mintty ç¾åŒ–

mintty æ”¯æŒå¯¹ 16 è‰²ä»£ç è¡¨çš„å®é™…å±•ç°æ•ˆæœè¿›è¡Œè‡ªå®šä¹‰ï¼Œåœ¨ mintty çª—å£å³é”®é€‰é¡¹é€‰æ‹©â€œå¤–è§‚->é¢œè‰²æ ·å¼è®¾è®¡å·¥å…·â€ï¼Œä¼šæ‰“å¼€å¦‚ä¸‹ç½‘å€è‡ªå®šä¹‰å³å¯

    https://ciembor.github.io/4bit/ ç‚¹å‡»å³ä¸Šè§’â€œGet Schemeâ€ï¼Œå¼¹å‡ºé¡µé¢çš„é“¾æ¥ä¸Šç‚¹å³é”®é€‰å¤åˆ¶ï¼Œåœ¨åœ°å€æ ç²˜è´´åå›è½¦

ä¸»é¢˜é¢œè‰²

    https://github.com/hsab/WSL-config/tree/master/mintty/themes

    https://github.com/oumu/mintty-color-schemes

å°†ä¸»é¢˜æ–‡ä»¶ä¿å­˜åˆ° mintty å®‰è£…ç›®å½•çš„ msys64/usr/share/mintty/themes ç›®å½•ä¸‹ï¼ˆC:\Program Files\Git\usr\share\mintty\themesï¼‰ï¼Œé€šè¿‡å³é”® mintty çª—å£æ ‡é¢˜æ çš„ option è¿›è¡Œé€‰æ‹©ã€‚

mintty é»˜è®¤çš„ä¸»é¢˜æ¯”è¾ƒä¿å®ˆï¼Œåªä½¿ç”¨256è‰²ï¼Œå¦‚æœä½ æƒ³çœ‹åˆ°çœŸå½©è‰²çš„æ•ˆæœï¼Œå°è¯•ä¸‹é€‰æ‹©è‡ªå®šä¹‰ä¸»é¢˜ï¼Œä¼šçœ‹åˆ°é¢œè‰²æŸ”å’Œå¤šäº†ï¼Œæ¨è nord ä¸»é¢˜ã€‚æ–‡å­—å½©è‰²è®¾ç½®ï¼Œè¯¦è§ç« èŠ‚ [ç»ˆç«¯æ¨¡æ‹Ÿå™¨å’Œè½¯ä»¶çš„çœŸå½©è‰²è®¾ç½®]ã€‚

ä¹Ÿå¯ä»¥ç¼–è¾‘ ~/.minttyrc æ–‡ä»¶ï¼Œè‡ªè¡Œè®¾ç½®å„ç§é¢œè‰²ã€‚

#### .minttyrc é…ç½®æ–‡ä»¶æ ·ä¾‹

```config
# å¯è‡ªå®šä¹‰è¡¨æƒ…æ ‡ç­¾ https://github.com/mintty/mintty/wiki/Tips#installing-emoji-resources
# https://mintty.github.io/mintty.1.html
# https://github.com/mintty/mintty/wiki/Tips#configuring-mintty
# åªæ”¯æŒç­‰å®½å­—ä½“
Font=MesloLGS Nerd Font Mono
FontHeight=11
FontSmoothing=full
# FontWeight=700
# FontIsBold=yes

Columns=130
Rows=40
ScrollbackLines=12000

CursorType=block
CursorBlinks=yes

# è¯­è¨€è®¾ç½®
# minttyç•Œé¢çš„æ˜¾ç¤ºè¯­è¨€ï¼Œzh_CNæ˜¯ä¸­æ–‡ï¼ŒLanguage=@è·ŸéšWindows
Language=@

# ç»ˆç«¯è¯­è¨€è®¾ç½®é€‰é¡¹ï¼Œåœ¨ Windows 10 ä¸‹å¥½åƒéƒ½ä¸éœ€è¦è®¾ç½®ï¼Œä¸‹é¢çš„æ˜¯ Windows 7 ä¸‹çš„ï¼Œæ˜¯å¦å› ä¸ºæ“ä½œç³»ç»Ÿé»˜è®¤ç¼–ç æ˜¯ ANSI ï¼Ÿ
# https://www.cnblogs.com/LCcnblogs/p/6208110.html
# bashä¸‹è®¾ç½®ï¼Œè¿™ä¸ªå˜é‡è®¾ç½®åŒºåŸŸï¼Œå½±å“è¯­è¨€ã€è¯æ±‡ã€æ—¥æœŸæ ¼å¼ç­‰ï¼Œå‚è§ç« èŠ‚ [å­—ç¬¦ç»ˆç«¯çš„åŒºåŸŸã€ç¼–ç ã€è¯­è¨€]

# bash ä¸‹æ˜¾ç¤ºä¸­æ–‡
Locale=zh_CN

# ä¸­æ–‡ç‰ˆ Windows ä½¿ç”¨ ansi å­—ç¬¦é›†ï¼Œ
# ä½†ä½¿ç”¨ UTF-8 çš„å‘½ä»¤å¦‚ tailã€ls ä¼šæ²¡æ³•éƒ½è®¾ç½®å®Œç¾æ˜¾ç¤ºä¸­æ–‡ï¼Œ
# æˆ–ä½¿ç”¨ uinx pty çš„å‘½ä»¤å¦‚ pythonå¡æ­»ï¼Œéœ€è¦å€ŸåŠ© winptyã€‚
# è®¾ç½®ä¸º UTF-8 è¿˜èƒ½æ­£ç¡®å±•ç°é‚£äº›å¸¦å›¾æ ‡çš„å­—ä½“
#Charset=GBK
Charset=UTF-8

# LANG åªå½±å“å­—ç¬¦çš„æ˜¾ç¤ºè¯­è¨€
# win7ä¸‹æ˜¾ç¤ºutf-8æ–‡ä»¶å†…å®¹, å¯å…ˆæ‰§è¡Œå‘½ä»¤ `locale` æŸ¥çœ‹sshæ‰€åœ¨æœåŠ¡å™¨æ˜¯å¦æ”¯æŒ
#LANG=zh_CN.UTF-8

# çª—ä½“é€æ˜æ•ˆæœï¼Œä¸é€‚ç”¨äºåµŒå…¥å¤šçª—å£ç»ˆç«¯å·¥å…·
# Transparency=low

# ä¸ºäº†ä½¿ç”¨æ›´å¤šçš„é¢œè‰²ï¼Œç¡®ä¿ç»ˆç«¯è®¾ç½®æ°å½“
Term=xterm-256color

# éé€šç”¨æ ‡å‡†çš„é¡¹ç›®
UnderlineColour=153,241,219
AllowBlinking=yes
BoldAsFont=yes

# Windows version >= 10 / 2019 1809 (build >= 10.0.17763)
# 2023.2 è„šæœ¬æ‰§è¡Œé€Ÿåº¦æ…¢äº mintty æœ¬åœ°å¤„ç†
# 2025.3 è¿›å…¥ tmux åæ‰“å°ä¹±ç 
#ConPTY=on

# è‡ªå®šä¹‰é¢œè‰²æ–¹æ¡ˆï¼Œè·Ÿæ·±è‰²èƒŒæ™¯æ­é…
# https://github.com/mintty/mintty/wiki/Tips#background-image
# è‡ªå®šä¹‰é¢œè‰²æ–¹æ¡ˆ https://ciembor.github.io/4bit/ ç‚¹å‡»å³ä¸Šè§’â€œGet Schemeâ€ï¼Œé€‰å¤åˆ¶å¹¶ç²˜è´´
# æ ¹æ®å›¾ç‰‡ç”Ÿæˆé¢œè‰²æ–¹æ¡ˆ https://github.com/thefryscorer/schemer2 å‚è§ç« èŠ‚ [base16é¢œè‰²æ–¹æ¡ˆ](gnu_tools.md okletsgo)
Background=C:\tools\111dark.jpg,225
#0D1926
BackgroundColour=13,25,38
#839496 #B6CDD0
ForegroundColour=131,148,150
CursorColour=236,255,255
#353535
Black=53,53,53
#5C5C5C
BoldBlack=92,92,92
#FD6666
Red=253,102,102
#F38F8D
BoldRed=243,143,141
#3BC077
Green=59,192,119
#37B58B
BoldGreen=55,181,139
#CFBE74
Yellow=207,190,116
#DFD877
BoldYellow=223,216,149
#377AB0
Blue=55,122,176
#68A0CC
BoldBlue=104,160,204
#AD5136
Magenta=173,81,54
#CA7055
BoldMagenta=202,112,85
#4FC4B5
Cyan=79,196,181
#74CFBE
BoldCyan=116,207,190
#EEE8D5
White=238,232,213
#FDF6E3
BoldWhite=253,246,227

# è‡ªå®šä¹‰é¢œè‰²æ–¹æ¡ˆï¼Œè·Ÿæ·±è‰²èƒŒæ™¯æ­é…ï¼Œnord çš„æš—æ·¡æ–¹æ¡ˆ
# https://github.com/arcticicestudio/nord-alacritty/blob/main/src/nord.yml
#Background=C:\tools\DR_6.jpg
#BackgroundColour=46,52,64
#ForegroundColour=216,222,233
#CursorColour=216,222,233
#Black=55,62,77
#BoldBlack=55,62,77
#Red=148,84,93
#BoldRed=148,84,93
#Green=128,149,117
#BoldGreen=128,149,117
#Yellow=178,158,117
#BoldYellow=178,158,117
#Blue=104,128,154
#BoldBlue=104,128,154
#Magenta=140,115,140
#BoldMagenta=140,115,140
#Cyan=109,150,165
#BoldCyan=109,150,165
#White=174,179,187
#BoldWhite=174,179,187

# è‡ªå®šä¹‰é¢œè‰²æ–¹æ¡ˆï¼Œè·Ÿæµ…è‰²èƒŒæ™¯æ­é…-é»„è‰²
#Background=C:\tools\222yellow.jpg,225
#BackgroundColour=250,234,182
#ForegroundColour=0,61,121
#CursorColour=217,230,242
#Black=80,80,80
#BoldBlack=103,103,103
#Red=243,37,20
#BoldRed=238,83,83
#Green=67,156,57
#BoldGreen=91,191,80
#Yellow=207,190,35
#BoldYellow=220,203,48
#Blue=3,82,139
#BoldBlue=10,123,184
#Magenta=133,41,39
#BoldMagenta=176,38,38
#Cyan=38,176,166
#BoldCyan=80,191,180
#White=205,175,175
#BoldWhite=176,182,204

# è‡ªå®šä¹‰é¢œè‰²æ–¹æ¡ˆï¼Œè·Ÿæµ…è‰²èƒŒæ™¯æ­é…-ç»¿è‰²
#Background=C:\tools\333green.jpg,128
#BackgroundColour=250,234,182
#ForegroundColour=47,47,47
#CursorColour=217,230,242
#Black=0,0,0
#BoldBlack=38,38,38
#Red=255,30,18
#BoldRed=255,153,147
#Green=82,173,58
#BoldGreen=65,136,47
#Yellow=193,117,40
#BoldYellow=213,179,60
#Blue=11,80,155
#BoldBlue=17,120,234
#Magenta=255,18,243
#BoldMagenta=255,147,250
#Cyan=32,138,115
#BoldCyan=36,162,133
#White=235,235,235
#BoldWhite=255,255,255

# åŒ—æä¸»é¢˜é¢œè‰² https://github.com/arcticicestudio/nord-mintty
# papercolor https://github.com/NLKNguyen/papercolor-theme
# https://github.com/mavnn/mintty-colors-solarized/blob/master/.minttyrc.light
# https://github.com/mavnn/mintty-colors-solarized/blob/master/.minttyrc.dark
#
# ä½¿ç”¨å†…ç½®é¢œè‰²æ–¹æ¡ˆï¼Œå»ºè®®æ”¾åœ¨æœ€ä¸‹é¢ä»¥è¦†ç›–ä¸Šé¢çš„é¢œè‰²è®¾ç½®
# ThemeFile=nord

```

#### mintty ç®€å•ä½¿ç”¨ï¼šGit for Windows

Git åœ¨ Windows ä¸‹è¿è¡Œï¼Œä¸“é—¨èµ·äº†ä¸€ä¸ªé¡¹ç›® git for Windowsï¼Œä¸»è¦æ˜¯å› ä¸º git åœ¨ Linux ä¸‹è¿è¡Œä¾èµ– bash ç¯å¢ƒï¼Œåœ¨ Windows ä¸‹ä½¿ç”¨äº† GNU tools çš„ MinGW(Msys2) å®ç°äº† git bashï¼Œå¹¶é›†æˆäº† git bash éœ€è¦çš„éƒ¨åˆ†å·¥å…·è½¯ä»¶ï¼Œæˆ‘ä»¬ä¸»è¦ä½¿ç”¨ä»–çš„ git bashã€ mintty.exe ç»ˆç«¯æ¨¡æ‹Ÿå™¨å’Œ gitã€sshã€gpgã€winpty ç­‰å‘½ä»¤è¡Œå·¥å…·ã€‚

å®‰è£… git for Windows æˆ– MSYS2 åå°±æœ‰äº†ï¼Œä¸ºäº†ç®€å•å®‰è£… git for windows å°±å¯ä»¥äº†

    https://git-scm.com/download/win
        https://gitforwindows.org/

é…ç½®æ–‡ä»¶æ ·ä¾‹å‚è§ç« èŠ‚ [mintty ç¾åŒ–]

    git for Windows ä¸‹çš„ mintty é…ç½®æ–‡ä»¶åœ¨ ~\.minttyrc

    MSYS2 çš„ mintty çš„é…ç½®æ–‡ä»¶ä¸ git for Windows ä¸åŒï¼Œè¯¦è§ç« èŠ‚[å…¨å¥—ä½¿ç”¨ï¼šå®‰è£… MSYS2(Cygwin/Msys)]

å¦‚æœä½¿ç”¨ mintty.exeï¼Œéœ€è¦æ·»åŠ é¢å¤–çš„å¯åŠ¨å‚æ•°ï¼ŒæŒ‡å®šä½¿ç”¨ä½•ç§shell

    mintty.exe /bin/bash --login -i

    --login åŠ è½½é…ç½®æ–‡ä»¶ ~/.bash_profile ç­‰ï¼Œä¸ç„¶ä½ è¿›å…¥çš„æ˜¯ä¸ªå¹²å·´çš„ shell

    -i      åˆ›å»ºä¸€ä¸ªäº¤äº’å¼çš„shell

git-bash.exe

    è‡ªç§° git bashï¼Œå…¶å®æ˜¯ `mintty.exe /bin/bash --login -i` çš„å°è£…ï¼Œå¯ç›´æ¥åŒå‡»æ‰§è¡Œã€‚ç”¨äºæ‰§è¡Œ unix pty çš„å‘½ä»¤ï¼Œæ˜¾ç¤ºå…¼å®¹æ€§æœ€å¥½ã€‚

    å¦‚æœä½¿ç”¨ git-bash.exeï¼Œä¸€èˆ¬ä½¿ç”¨ `git-bash.exe --cd-to-home` æ‰“å¼€å³è¿›å…¥ $HOME ç›®å½•ï¼Œæ¯”è¾ƒæ–¹ä¾¿

git-cmd.exe

    å…¶å®æ˜¯ cmd çš„ä¸€ä¸ªå°è£…ï¼Œå¯ç›´æ¥åŒå‡»æ‰§è¡Œã€‚ç”¨äºæ‰§è¡Œ cmd ä¸‹çš„å‘½ä»¤ï¼Œæ˜¾ç¤ºå…¼å®¹æ€§æœ€å¥½ã€‚è·¯å¾„ path ä¼˜å…ˆæŒ‡å‘äº† git for windows çš„ç›®å½•ã€‚

å¯¹è·¯å¾„çš„è¡¨ç¤ºæœ‰ç‚¹ç‰¹æ®Šï¼Œå¦‚ç£ç›˜è·¯å¾„éœ€è¦ä½¿ç”¨ /c/ æ¥ä»£æ›¿ cï¼šæ¥è®¿é—®å…·ä½“è·¯å¾„

    cd /c/tools è¡¨ç¤ºè®¿é—® Windows çš„ c:\tools ç›®å½•

å…¶å®ƒçš„å‡ ä¸ªçš„ Linux ç›®å½•ç»“æ„è·Ÿ Windows ç›®å½•çš„å¯¹åº”å…³ç³»

    $HOME ç›®å½•      %USERPROFILE%

    / ç›®å½•          gitå®‰è£…ç›®å½• C:\Program Files\Git
    /usr ç›®å½•       C:\Program Files\Git\usr
    /bin ç›®å½•       C:\Program Files\Git\bin
    /dev ç›®å½•       C:\Program Files\Git\dev
    /etc ç›®å½•       C:\Program Files\Git\etc

    /tmp ç›®å½•       C:\Users\%USERNAME%\AppData\Local\Temp

    /proc ç›®å½•      è¿™ä¸ªæ˜¯ git è‡ªå·±è™šå‡ºæ¥çš„ï¼Œåªèƒ½åœ¨ git bash(mintty) ä¸‹çœ‹åˆ°

    /cmd ç›®å½•       C:\Program Files\Git\cmdï¼Œç”¨äº cmd å‘½ä»¤è¡Œçª—å£ä¸‹è¿è¡Œ git å’Œ ssh ç”¨çš„å‡ ä¸ªè„šæœ¬

    $HOME           C:\Users\%USERNAME%

    C:\Users\ç”¨æˆ·å\AppData\Roamingï¼Œé€šè¿‡ç¯å¢ƒå˜é‡ %AppData% å¯ä»¥è®¿é—®ï¼Œè¿™é‡Œç”¨æ¥å­˜æ”¾å½“å‰ç™»å½•ç”¨æˆ·æ‰€äº§ç”Ÿçš„æ•°æ®ï¼Œå¯¹å…¶ä»–çš„ç”¨æˆ·ä¸å¯è§ã€‚å¦‚æœä½ åœ¨å…¬å¸ç½‘ç»œï¼ŒåŠ å…¥äº†åŸŸï¼Œè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé€šè¿‡ç½‘è·¯åŒæ­¥ï¼Œè®©ä½ çš„æ•°æ®åœ¨ä¸åŒçš„è®¡ç®—æœºä¸Šæ¼«æ¸¸ã€‚

    C:\Users\ç”¨æˆ·å\AppData\Localï¼Œé€šè¿‡ç¯å¢ƒå˜é‡ %LocalAppData% å¯ä»¥è®¿é—®ï¼Œè¿™ä¸ªç›®å½•å’Œä¸Šé¢çš„åŸºæœ¬ä¸€æ ·ï¼Œä¸è¿‡ä»…é™æœ¬åœ°ï¼ŒåŠ å…¥äº†åŸŸä¹Ÿä¸ä¼šåŒæ­¥ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¦‚æœä¸åŠ å…¥åŸŸï¼ŒRoamingå’ŒLocalå¹¶æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«

    C:\ProgramDataï¼Œå’ŒAppDataçš„åŒºåˆ«åœ¨äºï¼Œè¿™é‡Œå­˜æ”¾çš„æ•°æ®æ˜¯å…¬ç”¨çš„ï¼Œå¦‚æœä½ å¸Œæœ›è½¯ä»¶çš„æ•°æ®åœ¨æ‰€æœ‰çš„ç”¨æˆ·ä¹‹é—´ä¿æŒä¸€è‡´ï¼Œé‚£ä¹ˆç¨‹åºç”Ÿæˆçš„æ•°æ®åº”å½“å­˜æ”¾åœ¨è¿™é‡Œã€‚

é€€å‡ºbashæ—¶ï¼Œæœ€å¥½ä¸è¦ç›´æ¥å…³é—­çª—å£ï¼Œä½¿ç”¨å‘½ä»¤exitæˆ–^Dï¼Œä¸ç„¶ä¼šæç¤ºæœ‰è¿›ç¨‹æœªå…³é—­ã€‚

puttyçš„é€€å‡ºä¹Ÿæ˜¯åŒæ ·çš„å»ºè®®ã€‚

#### mintty ç»„åˆä½¿ç”¨ï¼šgit for Windows + MSYS2

æ‹·è´ MSYS2 çš„å·¥å…·åˆ° git é‡Œï¼Œè¿™æ ·åªä½¿ç”¨ git bash(mintty) å°±å¯ä»¥äº†ã€‚

äºŒè€…æ··ç”¨æ˜¯ä¸ªå‡‘åˆçš„è§£å†³åŠæ³•ï¼Œå› ä¸ºå¦‚æœé‡åˆ°äºŒè€…çš„è°ƒç”¨åº“ç‰ˆæœ¬ä¸ä¸€è‡´ä¼šå¯¼è‡´æŠ¥é”™ï¼Œæ‰€ä»¥æœ€å¥½æ˜¯å®‰è£… MSYS2ï¼Œç„¶åä½¿ç”¨å®ƒè‡ªå¸¦çš„ minttyã€gitã€sshã€zsh ç­‰å·¥å…·ï¼Œè¯¦è§ä¸‹é¢ç« èŠ‚ [mintty å…¨å¥—ä½¿ç”¨]ã€‚

å‡è®¾ git çš„å®‰è£…ç›®å½•åœ¨ D:\Gitï¼Œå¯æ‰§è¡Œæ–‡ä»¶åœ¨ D:\Git\usr\bin\ ç›®å½•ï¼š

ä»¥è¿ç§» tmux.exe ä¸ºä¾‹ï¼Œå¯æ‰§è¡Œæ–‡ä»¶æ”¾åœ¨ D:\Git\usr\bin\ï¼š

    tmux.exe
    event_rpcgen.py
    msys-event-2-1-7.dll
    msys-event_core-2-1-7.dll
    msys-event_extra-2-1-7.dll
    msys-event_openssl-2-1-7.dll
    msys-event_pthreads-2-1-7.dll

å…¶å®ƒæ”¾åœ¨ D:\Git\usr\share\ ä¸‹ï¼š

    licenses\libevent
    licenses\tmux
    man\man1\tmux.1.gz

ä½¿äºŒè€…å…±äº«ä¸€å¥— HOME ç›®å½•ï¼š

MSYS2 çš„ mintty çš„é…ç½®æ–‡ä»¶ä¸ä½¿ç”¨æ“ä½œç³»ç»Ÿå½“å‰ç”¨æˆ·çš„ home ç›®å½•ï¼Œè¯¦è§ç« èŠ‚[å…¨å¥—ä½¿ç”¨ï¼šå®‰è£… MSYS2(Cygwin/Msys)]ã€‚

git for windows ä½¿ç”¨æ“ä½œç³»ç»Ÿå½“å‰ç”¨æˆ·çš„ home ç›®å½•ï¼Œé»˜è®¤ä¸º %USERPROFILE% ï¼ˆC:\Users\%USERNAME%\ï¼‰ã€‚

home ç›®å½•çš„éš”ç¦»è™½ç„¶ä½¿ä¸¤ä¸ªè½¯ä»¶çš„è®¾ç½®äº’ä¸å¹²æ‰°ï¼Œä½†ä¹Ÿä½¿å¾— sshã€gpgã€gitã€vimã€tmux ç­‰å·¥å…·çš„é…ç½®æ–‡ä»¶ä¸èƒ½å…±äº«ã€‚

    ä¿æŒéš”ç¦»çš„è§£å†³åŠæ³•

        å¦‚æœåœ¨å®‰è£… MSYS2 ä¹‹å‰å·²ç»å®‰è£…äº† git for windowsï¼Œå¯ä»¥å°†ä¹‹å‰ sshã€git ã€vimã€tmux ç­‰å·¥å…·çš„é…ç½®æ–‡ä»¶æ‹·è´åˆ° MSYS2 çš„ home ç›®å½•ä¸‹ã€‚

    å…±äº«çš„è§£å†³åŠæ³•

        åœ¨ Windows ä¸Šé…ç½®ç¯å¢ƒå˜é‡ HOME ä¸º C:\you-path\msys64\home\your-nameï¼Œå¢åŠ è¿™ä¸ªç¯å¢ƒå˜é‡çš„ç›®çš„æ˜¯ä¸ºäº†è®© git for windows çš„ home ç›®å½•æŒ‡å‘ MSYS2 çš„ home ç›®å½•ã€‚

#### mintty å…¨å¥—ä½¿ç”¨ï¼šå®‰è£… MSYS2(Cygwin/Msys) + pacman

å‚è€ƒæ–‡ç« 

    MSYS2 å’Œ mintty æ‰“é€  Windows ä¸‹ Linux å·¥å…·ä½“éªŒ
        https://creaink.github.io/post/Computer/Windows/win-msys2.html

    Windows ä¸‹ MSYS2 é…ç½®åŠå¡«å‘ https://hustlei.github.io/2018/11/msys2-for-win.html

ä¸‹è½½å®‰è£… MSYS2

    https://www.msys2.org/

    https://msys2.github.io/

ä½¿ç”¨ pacman å®‰è£…å„ç§åŒ…ï¼Œè¯¦è§ä¸‹é¢ç« èŠ‚ [è½¯ä»¶ä»“åº“ pacman]ã€‚

pacman æ›´æ¢æ¸…åæº <https://mirrors.tuna.tsinghua.edu.cn/help/msys2/> ä¸­ç§‘å¤§ <https://mirrors.ustc.edu.cn/help/msys2.html>ï¼Œé…ç½®æ–‡ä»¶åœ¨ msys çš„å®‰è£…ç›®å½•ä¸‹çš„æ–‡ä»¶å¤¹ msys64\etc\pacman.d\ ä¸‹ã€‚

ä¾æ¬¡æ·»åŠ 

    ç¼–è¾‘ /etc/pacman.d/mirrorlist.msysï¼Œåœ¨æ–‡ä»¶å¼€å¤´æ·»åŠ ï¼š

        Server = https://mirrors.tuna.tsinghua.edu.cn/msys2/msys/$arch/
        Server = http://mirrors.ustc.edu.cn/msys2/msys/$arch/

    ç¼–è¾‘ /etc/pacman.d/mirrorlist.mingw32ï¼Œåœ¨æ–‡ä»¶å¼€å¤´æ·»åŠ ï¼š

        Server = https://mirrors.tuna.tsinghua.edu.cn/msys2/mingw/i686/
        Server = http://mirrors.ustc.edu.cn/msys2/mingw/i686/

    ç¼–è¾‘ /etc/pacman.d/mirrorlist.mingw64ï¼Œåœ¨æ–‡ä»¶å¼€å¤´æ·»åŠ ï¼š

        Server = https://mirrors.tuna.tsinghua.edu.cn/msys2/mingw/x86_64/
        Server = http://mirrors.ustc.edu.cn/msys2/mingw/x86_64/

    ç¼–è¾‘ /etc/pacman.d/mirrorlist.ucrt64ï¼Œåœ¨æ–‡ä»¶å¼€å¤´æ·»åŠ ï¼š

        Server = https://mirrors.tuna.tsinghua.edu.cn/msys2/mingw/ucrt64/
        Server = http://mirrors.ustc.edu.cn/msys2/mingw/ucrt64/

    ç¼–è¾‘ /etc/pacman.d/mirrorlist.clang64ï¼Œåœ¨æ–‡ä»¶å¼€å¤´æ·»åŠ ï¼š

        Server = https://mirrors.tuna.tsinghua.edu.cn/msys2/mingw/clang64/
        Server = http://mirrors.ustc.edu.cn/msys2/mingw/clang64/

ç„¶å Windows æ‰§è¡Œå¼€å§‹èœå•çš„å¿«æ·æ–¹å¼ "MSYS2 MSYS" ä»¥æ‰“å¼€å‘½ä»¤è¡Œï¼Œæ›´æ–°è½¯ä»¶åŒ…æ•°æ®ï¼Œä¹‹åå¯ä»¥ä½¿ç”¨ "MSYS2 MinGW X64"ï¼Œ

    # pacman -Sy
    :: Synchronizing package databases...
    mingw32              1594.6 KiB   729 KiB/s 00:02 [#####################] 100%
    mingw64              1604.5 KiB   494 KiB/s 00:03 [#####################] 100%
    ucrt64               1663.1 KiB   985 KiB/s 00:02 [#####################] 100%
    clang32              1556.7 KiB   400 KiB/s 00:04 [#####################] 100%
    clang64              1587.3 KiB   532 KiB/s 00:03 [#####################] 100%
    msys                  384.9 KiB   293 KiB/s 00:01 [#####################] 100%

    # æ›´æ–°æ ¸å¿ƒè½¯ä»¶åŒ…
    # pacman -Su

å®‰è£…æ—¶ç»™å‡ºäº†ä¸€äº›æ–‡ä»¶é“¾æ¥çš„æç¤º

    './.bashrc' -> '/home/%USERNAME%/.bashrc'
    './.bash_logout' -> '/home/%USERNAME%/.bash_logout'
    './.bash_profile' -> '/home/%USERNAME%/.bash_profile'
    './.inputrc' -> '/home/%USERNAME%/.inputrc'
    './.profile' -> '/home/%USERNAME%/.profile'

    'C:\Windows\system32\drivers\etc\hosts' -> '/etc/hosts'
    'C:\Windows\system32\drivers\etc\protocol' -> '/etc/protocols'
    'C:\Windows\system32\drivers\etc\services' -> '/etc/services'
    'C:\Windows\system32\drivers\etc\networks' -> '/etc/networks'

è¯¥è½¯ä»¶å®‰è£…åï¼Œä½¿ç”¨çš„Linuxç›®å½•ç»“æ„è·ŸWindowsç›®å½•çš„å¯¹åº”å…³ç³»

    home ç›®å½•      ä½äºmsys2çš„å®‰è£…ç›®å½• msys64\ ä¸‹çš„ home\%USERNAME%

    / ç›®å½•          ä½äºmsys2çš„å®‰è£…ç›®å½• msys64\ ä¸‹
    /usr ç›®å½•       åŒä¸Š
    /tmp ç›®å½•       åŒä¸Š

ç¯å¢ƒçš„éš”ç¦»åšçš„æ¯”è¾ƒå¥½ï¼Œä¸ä¼šå¹²æ‰°Windowså½“å‰ç”¨æˆ·ç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶

    å¦‚æœä½ çš„ç³»ç»Ÿä¸­ç‹¬ç«‹å®‰è£…äº†å¦‚ git for Windows ã€ Anaconda for Windows ç­‰ï¼Œä»–ä»¬ä½¿ç”¨ C:\Users\%USERNAME% ä¸‹çš„ bash_profileã€mintty ç­‰é…ç½®æ–‡ä»¶ï¼Œæ³¨æ„åŒºåˆ†ã€‚

msys2åœ¨å¼€å§‹èœå•ä¸‹çš„å¥½å‡ ä¸ªç‰ˆæœ¬çš„è¯´æ˜

    æ˜¯å› ä¸ºç¼–è¯‘å™¨å’Œé“¾æ¥çš„windowsçš„cåº“ä¸åŒï¼Œè€Œæ•…æ„åˆ†å¼€ç¼–è¯‘çš„ã€‚ä½œä¸ºä¸€ä¸ªè½¯ä»¶è¿è¡Œå¹³å°ï¼Œä¸ºäº†é€‚åº”ä¸åŒç¼–è¯‘å™¨ç¼–è¯‘å‡ºæ¥çš„ç¨‹åºï¼ˆWindows å¯¹ CRT è¿è¡Œåº“çš„æ”¯æŒä¸ä¸€æ ·ï¼‰ï¼Œè€Œä¸å¾—ä¸åŒºåˆ†å¼€æ¥ã€‚

    LLVM/Clang å’Œ MINGW(GCC) æ˜¯ä¸¤ä¸ªä¸åŒçš„ C/C++ ç¼–è¯‘å™¨ï¼Œ mingw64ã€ucrt64ã€clang64 éƒ½æ˜¯ Windows åŸç”Ÿç¨‹åºï¼ˆä¸ä¾èµ– cygwin.dllï¼‰ï¼Œä¸è¿‡ mingw64 æ˜¯å¾ˆæ—©å°±æœ‰çš„ï¼Œåä¸¤è€…æ˜¯æœ€è¿‘æ‰æ–°åŠ çš„ï¼Œæ‰€ä»¥åªæ˜¯é€‰ä¸€ä¸ªçš„è¯å°±ç”¨ mingw64ã€‚

å…·ä½“åŒºåˆ«æ˜¯ï¼š

    mingw64 ä¸ ucrt64 éƒ½æ˜¯ç”¨ mingw64 ç¼–è¯‘å™¨ç¼–è¯‘çš„ Windows 64ä½ç¨‹åºï¼Œåªä¸è¿‡å®ƒä»¬é“¾æ¥åˆ°çš„ crtï¼ˆC runtimeï¼‰ä¸åŒï¼Œ mingw64 æ˜¯é“¾æ¥åˆ°äº† msvcrt ï¼Œè€Œ ucrt64 åˆ™æ˜¯é“¾æ¥åˆ°äº† Windows 10+ ä¸Šæ–°çš„ ucrt ä¸Šã€‚

    è€Œ clang64 å¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯ç”¨ clang è€Œé mingw æ¥ç¼–è¯‘å„ç§åº“ï¼Œå¦å¤–å®ƒä¹Ÿæ˜¯é“¾æ¥åˆ°äº† ucrt è€Œé msvcrtã€‚

    å¼•è‡ª <https://www.zhihu.com/question/463666011/answer/1927907983>

    å®˜æ–¹è§£é‡Š <https://www.msys2.org/docs/environments/>

msys2çš„å¯åŠ¨æ–¹å¼éƒ½æ˜¯é€šè¿‡è°ƒç”¨ msys2_shell.cmdï¼Œä¸åŒä»…åœ¨äºä¼ é€’äº†å˜é‡ set MSYSTEM=xxxxï¼Œmsys2_shell.cmd å¯åŠ¨æ—¶ï¼Œéƒ½é»˜è®¤ä½¿ç”¨ mintty

    # c:\msys64ä¸ºmsys2å®‰è£…ç›®å½•ï¼Œbash ä¸ºé»˜è®¤ shellï¼Œå¯ä»¥ç”¨ zsh,csh ç­‰æ›¿æ¢
    set MSYSTEM=MINGW64
    "c:\msys64\usr\bin\mintty" "c:\msys64\usr\bin\bash" --login

è‡ªå·±è¿è¡Œ Msys2 æ—¶å¯ä»¥ä¸ä½¿ç”¨ minttyï¼Œç›´æ¥è¿è¡Œå¦‚ä¸‹å‘½ä»¤å°±OKï¼š

```bat

rem å¯åŠ¨MSYS2 MSYS
set MSYSTEM=MSYS
"c:\msys64\usr\bin\mintty" "c:\msys64\usr\bin\bash" --login

rem å¯åŠ¨MSYS2 MINGW32
set MSYSTEM=MINGW32
"c:\msys64\usr\bin\bash" --login

rem å¯åŠ¨MSYS2 MINGW64
set MSYSTEM=MINGW64
"c:\msys64\usr\bin\bash" --login

```

##### è½¯ä»¶ä»“åº“ pacman

åŸºäº Arch Linux çš„ pacman æä¾›è½¯ä»¶ä»“åº“ï¼Œé‡‡ç”¨æ»šåŠ¨å‡çº§æ¨¡å¼ï¼Œåˆå§‹å®‰è£…ä»…æä¾›å‘½ä»¤è¡Œç¯å¢ƒï¼šé«˜æ‰‹ç”¨æˆ·ä¸éœ€è¦åˆ é™¤å¤§é‡ä¸éœ€è¦çš„è½¯ä»¶åŒ…ï¼Œè€Œæ˜¯å¯ä»¥ä»å®˜æ–¹è½¯ä»¶ä»“åº“æˆåƒä¸Šä¸‡çš„é«˜è´¨é‡è½¯ä»¶åŒ…ä¸­è¿›è¡Œé€‰æ‹©ï¼Œæ­å»ºè‡ªå·±çš„ç³»ç»Ÿã€‚

pacman å‘½ä»¤è¾ƒå¤šï¼Œå¸¸ç”¨çš„å‘½ä»¤å¦‚ä¸‹ï¼š

    pacman -Sy           æ›´æ–°è½¯ä»¶åŒ…æ•°æ®
    pacman -Su           æ›´æ–°æ ¸å¿ƒè½¯ä»¶åŒ…
    # pacman -Syu        å‡çº§ç³»ç»ŸåŠæ‰€æœ‰å·²ç»å®‰è£…çš„è½¯ä»¶ã€‚
    pacman -S è½¯ä»¶å      å®‰è£…è½¯ä»¶ã€‚ä¹Ÿå¯ä»¥åŒæ—¶å®‰è£…å¤šä¸ªåŒ…ï¼Œåªéœ€ä»¥ç©ºæ ¼åˆ†éš”åŒ…åå³å¯ã€‚
    pacman -Rs è½¯ä»¶å     åˆ é™¤è½¯ä»¶ï¼ŒåŒæ—¶åˆ é™¤æœ¬æœºä¸Šåªæœ‰è¯¥è½¯ä»¶ä¾èµ–çš„è½¯ä»¶ã€‚
    pacman -Ru è½¯ä»¶å     åˆ é™¤è½¯ä»¶ï¼ŒåŒæ—¶åˆ é™¤ä¸å†è¢«ä»»ä½•è½¯ä»¶æ‰€éœ€è¦çš„ä¾èµ–ã€‚
    pacman -Ssq å…³é”®å­—    åœ¨ä»“åº“ä¸­æœç´¢å«å…³é”®å­—çš„è½¯ä»¶åŒ…ï¼Œå¹¶ç”¨ç®€æ´æ–¹å¼æ˜¾ç¤ºã€‚
    pacman -Qs å…³é”®å­—     æœç´¢å·²å®‰è£…çš„è½¯ä»¶åŒ…ã€‚
    pacman -Qi è½¯ä»¶å     æŸ¥çœ‹æŸä¸ªè½¯ä»¶åŒ…ä¿¡æ¯ï¼Œæ˜¾ç¤ºè½¯ä»¶ç®€ä»‹,æ„æ¶,ä¾èµ–,å¤§å°ç­‰è¯¦ç»†ä¿¡æ¯ã€‚
    pacman -Sg           åˆ—å‡ºè½¯ä»¶ä»“åº“ä¸Šæ‰€æœ‰çš„è½¯ä»¶åŒ…ç»„ã€‚
    pacman -Sg è½¯ä»¶åŒ…ç»„    æŸ¥çœ‹æŸè½¯ä»¶åŒ…ç»„æ‰€åŒ…å«çš„æ‰€æœ‰è½¯ä»¶åŒ…ã€‚
    pacman -Sc           æ¸…ç†æœªå®‰è£…çš„åŒ…æ–‡ä»¶ï¼ŒåŒ…æ–‡ä»¶ä½äº /var/cache/pacman/pkg/ ç›®å½•ã€‚
    pacman -Scc          æ¸…ç†æ‰€æœ‰çš„ç¼“å­˜æ–‡ä»¶ã€‚

å®‰è£…å¸¸ç”¨è½¯ä»¶

    ä¸è¦å®‰è£… msys2 ç‰ˆçš„ pythonï¼Œè¿˜æ˜¯ç”¨ anaconda æœ€æ–¹ä¾¿

    pacman -S openssh opengpg vim git tmux winpty

    pacman -S sed awk tree curl time nano tar gzip rsync

    # netcat çš„ç‰ˆæœ¬é€‰æ‹©ï¼š gnu nc æ²¡æœ‰ proxy å‚æ•°(-x), å› æ­¤æˆ‘ä»¬è¦é€‰æ‹© openbsd ç‰ˆ
    pacman -S openbsd-netcat

    # ä¸‹é¢çš„å‘½ä»¤å¤§éƒ¨åˆ†åœ¨ bash ä¸­å†…ç½®äº†

    # å¸¸ç”¨çš„ç³»ç»Ÿå‘½ä»¤ cat cut chmod echo mv tail ç­‰ï¼Œhttp://gnu.org/software/coreutils
    pacman -S coreutils

    # è¿›ç¨‹ç®¡ç† psã€killã€topã€watch ç­‰ï¼Œhttps://gitlab.com/procps-ng/procps/
    pacman -S procps-ng

    # å¸¸ç”¨çš„ç½‘ç»œå‘½ä»¤ ping, ping6, traceroute, whois, rsh ç­‰ï¼Œhttps://www.gnu.org/software/inetutils/
    pacman -S inetutils

    # find xargs
    pacman -S Findutils

    # diff
    pacman -S diffutils

    # å®‰è£… zsh ä¸»è¦æ˜¯ä¸ºäº†å®ƒå¤šå½©çš„å‘½ä»¤è¡Œæç¤ºç¬¦ç­‰æ‰©å±•æ’ä»¶ï¼Œè¯¦è§ä¸‹é¢ç« èŠ‚ [ä½¿ç”¨ zsh]
    pacman -S zsh

å¦‚æœéœ€è¦å®‰è£…ä»€ä¹ˆå‘½ä»¤ä¸çŸ¥é“è¾“å…¥ä½•ç§åŒ…åï¼Œä¸€èˆ¬å¯ä»¥åœ¨æœç´¢å¼•æ“é‡Œä»¥ `MSYS2 xxx` çš„å½¢å¼å¾—åˆ°ç»“æœã€‚

å¦å¤–ï¼Œ Cygwinä¸‹è¿˜æœ‰ apt-cyg å‘½ä»¤è¡ŒåŒ…ç®¡ç†å™¨ <https://zhuanlan.zhihu.com/p/66930502>ï¼Œæ“ä½œè½¯ä»¶ä»“åº“ <https://zhuanlan.zhihu.com/p/65482014>ã€‚

### å…¶ä»–ç»ˆç«¯æ¨¡æ‹Ÿå™¨

ä¸å¸¸ç”¨ç»ˆç«¯ä¼šé‡åˆ° terminfo é—®é¢˜

    https://ttys3.dev/post/kitty/

    å¦‚æœä½ å°è¯• ssh åˆ°è¿œç¨‹æœºå™¨, å¯èƒ½ä¼šå‘ç°ä½ æœ¬æœºçš„ zsh æŠ¥é”™:

    /home/user007/.zsh_compatible:bindkey:2: cannot bind to an empty key sequence

    è¿™ä¸ªé—®é¢˜å…¶å®ä¸åªå­˜åœ¨äº kitty, ä»»ä½•æœ‰è‡ªå·±ç‹¬ç«‹çš„ terminfo çš„ terminal (ä¸”å…¶ä¿¡æ¯æ²¡æœ‰åœ¨ ncurses ä¸­å†…ç½®), åŸºæœ¬ä¸Šéƒ½ä¼šæœ‰è¿™ä¸ªé—®é¢˜. æ¯”å¦‚ Alacritty ä¹Ÿæœ‰è¿™ä¸ªé—®é¢˜.

    è¿™ä¸ªé—®é¢˜åœ¨å®˜æ–¹faqæ–‡æ¡£é‡Œé¢ä¹Ÿæœ‰è¯´æ˜:

    I get errors about the terminal being unknown or opening the terminal failing when SSHing into a different computer?

    This happens because the kitty terminfo files are not available on the server. You can ssh in using the following command which will automatically copy the terminfo files to the server:

        kitty +kitten ssh myserver

    This ssh kitten takes all the same command line arguments as ssh, you can alias it to ssh in your shellâ€™s rc files to avoid having to type it each time:

        alias ssh="kitty +kitten ssh"

Contour Terminal Emulator è¿™ä¸ªæ˜¯çœŸæ­£çš„é€Ÿåº¦æå¿«ï¼Œè€Œä¸”è·¨å¹³å°

    è¿˜åœ¨å‘å±•ä¸­ï¼Œä¸è¶³è¾ƒå¤šï¼šä¸æ”¯æŒä¸­æ–‡å­—ä½“å›è½

    https://contour-terminal.org/configuration/
    https://zhuanlan.zhihu.com/p/505530480

        $ sudo dnf install contour-terminal

    å¿«æ·æ“ä½œ

        Ctrl+Shift+Space å½“å‰å±å¹•è¿›å…¥vimæ¨¡å¼ï¼Œæ–¹ä¾¿ç”¨é”®ç›˜é€‰æ‹©å±å¹•æ–‡å­—å¤åˆ¶ç²˜è´´ç­‰æ“ä½œã€‚
        æŒ‰ a æˆ– i è¿›å…¥ç¼–è¾‘æ¨¡å¼ä¼šè‡ªåŠ¨é€€å‡ºåˆ°å‘½ä»¤è¡Œè¿›è¡Œæ™®é€šçš„ç¼–è¾‘ã€‚

    é…ç½®æ–‡ä»¶åœ¨

        # flatpakï¼š~/.var/app/org.contourterminal.Contour/config/contour/contour.yml
        ~/.config/contour/contour.yml

    ç›®å‰åªèƒ½æ‰‹åŠ¨ä¿®æ”¹ï¼š

    ```yml
    # ä¸»é…ç½®
    profiles:
        main:
            # æ‰“å¼€ç»ˆç«¯åä½œä¸ºç™»å½•shell
            shell: "/bin/bash"
            arguments: ["-l"]

            # æŒ‰å­—ç¬¦æ•°çš„çª—å£å¤§å°
            terminal_size:
                columns: 80
                lines: 25

            scrollbar:
                position: Right

            # å­—ä½“
            font:
                regular:
                    # ä¸æ”¯æŒä¸­æ–‡å­—ä½“å›è½ ["MesloLGS Nerd Font", "Noto Serif CJK SC"]
                    family: "MesloLGS Nerd Font"

            # å…‰æ ‡æ ·å¼å’Œé—ªåŠ¨
            cursor:
                blinking: true

            # èƒŒæ™¯é€æ˜å’Œæ¨¡ç³Š
            background:
                opacity: 0.95
                blur: false

            # é¢œè‰²æ–¹æ¡ˆï¼Œåœ¨ä¸‹é¢çš„ color_schemes å¤„é…ç½®
            # Specifies a colorscheme to use (alternatively the colors can be inlined).
            colors: "default"

    # é¢œè‰²æ–¹æ¡ˆ
    color_schemes:
        # ç³»ç»Ÿé»˜è®¤çš„é¢œè‰²æ–¹æ¡ˆ
        default:

            background_image:
                # flatpak ä¸‹ä¸çŸ¥é“æ€ä¹ˆæ‰¾è·¯å¾„ã€‚ã€‚ã€‚
                path: '/Pictures/78883229_UHD.jpg'
                opacity: 0.5
                blur: false

    # å¿«æ·é”®
    input_mapping:
        # é€‰æ‹©æ–‡å­—åæŒ‰ ctrl+c æ˜¯å¤åˆ¶åˆ°å†…éƒ¨å‰ªè´´æ¿ï¼Œä¸­é”®å¯ç²˜è´´
    ```

WindTerm åŸºäº C å¼€å‘çš„å¼€æºç»ˆç«¯æ¨¡æ‹Ÿå™¨ï¼Œæ”¯æŒå¤šä¸ªå¹³å°ï¼Œæ”¯æŒç»ˆç«¯å¤šè·¯å¤ç”¨ï¼Œç»¿è‰²ä¸éœ€è¦å®‰è£…ã€‚é€Ÿåº¦å¿«ï¼Œå…¼å®¹æ€§è¾ƒå¥½ï¼Œå·¦ä¾§å°±æ˜¯æ–‡ä»¶å¤¹æ ‘æ–¹ä¾¿ sftpï¼Œæ”¯æŒ lrzsz çš„æ–‡ä»¶æ‹–æ”¾ä¼ é€ï¼Œå‘½ä»¤è¡Œè¾“å‡ºè¿˜æ”¯æŒæ ‡ç­¾æŠ˜å 

    https://github.com/kingToolbox/WindTerm
        https://kingtoolbox.github.io/

    https://zhuanlan.zhihu.com/p/550149638

    åˆæ¬¡ä½¿ç”¨æ³¨æ„å…³é—­ä¸»å¯†ç ã€å…³é—­è‡ªåŠ¨é”å±çš„åŠŸèƒ½ã€‚å¦åˆ™ä¸€æ—¦é”å±äº†ï¼Œåªèƒ½ç¼–è¾‘ user.config æ–‡ä»¶ï¼š

        å¹²æ‰ application.fingerprint å’Œ application.masterPassword

        å†æ‰¾åˆ° .wind/profiles/default.v10/terminal/user.sessions æ–‡ä»¶åˆ é™¤ session.autoLoginï¼Œ å°±å¯ä»¥å°†ä¸»å¯†ç è®¾ç½®ä¸ºç©ºå­—ç¬¦ä¸²äº†ï¼Œä¹‹åå†æ¥ä¿®æ”¹ä¸»å¯†ç ï¼Œå°± OK äº†ã€‚

nyagos ç±» Unix ç»ˆç«¯ï¼Œä½†æ˜¯æ”¯æŒ Windows æ ¼å¼çš„è·¯å¾„

    https://github.com/nyaosorg/nyagos

        nyagoså¢åŠ zoxideçš„æ”¯æŒ https://wentao.org/post/2023-04-27-zoxide-with-nyagos/

edex-ui åˆ›Â·æˆ˜çºª é£æ ¼çš„ç»ˆç«¯æ¨¡æ‹Ÿå™¨ï¼Œè¿˜å¸¦ä¸€ä¸ªç®€å•çš„æ–‡ä»¶æµè§ˆå™¨ï¼Œç³»ç»Ÿèµ„æºç›‘è§†å™¨ï¼Œè™½ç„¶åŸºäº Electron çš„åº”ç”¨ç¨‹åºæ¯”è¾ƒç¬¨é‡ï¼Œä½†æ•ˆæœå¤ªé…·äº†

    https://github.com/GitSquared/edex-ui

    é…ç½®æ–‡ä»¶è¯´æ˜ https://github.com/GitSquared/edex-ui/wiki/settings.json

    è‡ªå®šä¹‰ä¸»é¢˜è¯´æ˜ https://github.com/GitSquared/edex-ui/wiki/Themes

Alacritty ä½¿ç”¨ OpenGL è¿›è¡Œæ˜¾ç¤ºåŠ é€Ÿï¼ˆé€Ÿåº¦ä¸€èˆ¬ï¼‰çš„ç»ˆç«¯æ¨¡æ‹Ÿå™¨ï¼Œåœ¨ Linux ä¸‹åˆ·æ–°é€Ÿåº¦å¿«ï¼Œåœ¨ Windows ä¸‹ä½¿ç”¨ powershell ä¸æ¨è

    https://github.com/alacritty/alacritty

    ä¸»é¢˜é¢œè‰²ä½¿ç”¨ Nord theme

        curl -fsSL https://github.com/nordtheme/alacritty/raw/main/src/nord.yaml | tee $HOME/.alacritty.toml

WezTerm GPU åŠ é€Ÿï¼ˆå…¶å®ä¸å¿«ï¼‰è·¨å¹³å°ç»ˆç«¯ä»¿çœŸå™¨ï¼Œæ”¯æŒç»ˆç«¯å¤šè·¯å¤ç”¨ï¼Œè‡³ä»Šæœªè§£å†³å¶å‘çš„å¡é¡¿é—®é¢˜

    https://github.com/wez/wezterm
        https://wezfurlong.org/

cmder æ¨èäº†å‡ ä¸ªæœ¬åœ°ç»ˆç«¯æ¨¡æ‹Ÿå™¨ï¼Œå¯ä»¥åµŒå…¥ cmder ä»£æ›¿ ConEmu

    https://github.com/cmderdev/cmder/wiki/Seamless-Terminus-integration

        Tabbyï¼ˆåŸåTerminusï¼‰è·¨å¹³å°çš„ç»ˆç«¯æ¨¡æ‹Ÿå™¨ï¼Œelectron + nodejs å†™çš„ï¼Œæ”¯æŒç»ˆç«¯å¤šè·¯å¤ç”¨ï¼Œä¸æ”¯æŒå¯¼å…¥ putty çš„ç«™ç‚¹ï¼Œç›®å‰ä½¿ç”¨szä¼ è¾“å¤§æ–‡ä»¶æ—¶æ–‡ä»¶ä¼šæŸåï¼Œè€è€å®å®çš„ç”¨ sftp å§
            https://github.com/Eugeny/tabby
            ä½¿ç”¨ä»‹ç» https://zhuanlan.zhihu.com/p/447977207

    https://github.com/cmderdev/cmder/wiki/Seamless-Hyper-integration

        hyper åŸºäº xterm.js å’Œ Electron å®ç°
            https://hyper.is/

    https://github.com/cmderdev/cmder/wiki/Seamless-FluentTerminal-Integration

        FluentTerminal åŸºäº xterm.js çš„ UWP åº”ç”¨
            https://github.com/felixse/FluentTerminal

Nushell æ—¢æ˜¯ä¸€ç§ç¼–ç¨‹è¯­è¨€ï¼Œä¹Ÿæ˜¯ä¸€ç§ Shellï¼Œæ‰§è¡Œ `help commands` æŸ¥çœ‹å¸¸ç”¨å‘½ä»¤ã€‚è‡ªå·±çš„è„šæœ¬è¯­è¨€å¯ä»¥åŸºäºè‡ªå·±çš„æŒ‡ä»¤å®šä¹‰å‡½æ•°ã€åŸºäºå‡½æ•°å®šä¹‰è„šæœ¬ã€‚å¯ä»¥å¼€å‘ rust æ’ä»¶ç»™ä»–æ‰©å±•åŠŸèƒ½ã€‚

    https://github.com/nushell/nushell
        https://www.nushell.sh/zh-CN/book/thinking_in_nu.html

å¦è§ç« èŠ‚ [Linux æ¡Œé¢ä¸‹çš„ç»ˆç«¯æ¨¡æ‹Ÿå™¨]ã€‚

Supper Putty

    åˆ«ç”¨äº†ï¼šæœ€æ–°çš„ç‰ˆæœ¬è°ƒç”¨ git bashï¼Œç²˜è´´è„šæœ¬æ–‡ä»¶å†…å®¹ï¼Œéšæœºæ·»åŠ å­—ç¬¦ï¼Œåœ¨ tmux ä¸‹å‘ç”Ÿçš„æ›´é¢‘ç¹ã€‚

    https://github.com/jimradford/superputty

#### ConEmu å’Œ Cmder

ConEmu ç”¨é…ç½® Taskï¼ˆä»»åŠ¡ï¼‰çš„å½¢å¼ï¼Œæ”¯æŒæ ‡ç­¾åŒ–çª—å£ä½¿ç”¨ cmd, powershell, msys2, bash, putty ç­‰ç­‰ç»ˆç«¯æ¨¡æ‹Ÿå™¨ã€‚ä¸æ­¢æ˜¯ä¸ªç»ˆç«¯å¤šè·¯å¤ç”¨å™¨ï¼Œä»–è¿˜è‡ªå·±å®ç°äº†å¯¹ cmd å’Œ unix pty ä¸¤ç§ç±»å‹çš„ç»ˆç«¯æ¨¡æ‹Ÿã€‚

    https://conemu.github.io/

    console ç±»ä¼¼ConEmuçš„è½¯ä»¶
        console2 ä¸æ›´æ–°äº†2021 https://github.com/cbucher/console
            console ä¸æ›´æ–°äº†2013 https://sourceforge.net/projects/console/

ConEmu æœ€å¤§çš„ç¼ºç‚¹æ˜¯ä¸ç¨³å®šï¼Œååº”é€Ÿåº¦å¶å°”å¾ˆæ…¢ï¼Œä¼°è®¡è·Ÿå®ƒåŸºäº Windows conhostï¼Œè¿å¸¦æ”¯æŒ unix pty è¿™æ ·åŒ…æ‰“ä¸€åˆ‡çš„å®ç°æœºåˆ¶æœ‰å…³ã€‚

ConEmu ç”¨é…ç½® Taskï¼ˆä»»åŠ¡ï¼‰çš„å½¢å¼ï¼Œæ”¯æŒæ ‡ç­¾åŒ–çª—å£ä½¿ç”¨ cmd, powershell, msys2, bash, putty ç­‰ç­‰ç»ˆç«¯æ¨¡æ‹Ÿå™¨ã€‚

ConEmu\ConEmu ç›®å½•ä¸‹é›†æˆäº†å‡ ä¸ªå¸¸ç”¨å·¥å…·

    clink ä½¿ cmd åƒ bash æŒ‰ tab é”®è‡ªåŠ¨å®Œæˆ

    wslbridge ä½¿ mintty æˆ– ConEmu å¯ä»¥æ”¯æŒ WSL(Windows Subsystem for Linux)

ConEmu è‰²å½©æ–¹æ¡ˆ

    https://github.com/joonro/ConEmu-Color-Themes

Cmder æ˜¯ä¸€ä¸ªè½¯ä»¶åŒ…ï¼Œæ•´åˆä¸Šè¿°å‡ ä¸ªå·¥å…·æ— éœ€å®‰è£…ç›´æ¥ä½¿ç”¨çš„è½¯ä»¶åŒ…

    https://github.com/cmderdev/cmder

    å®ƒæ•´åˆäº†ï¼š

        æœ¬åœ°ç»ˆç«¯æ¨¡æ‹Ÿå™¨ï¼šConemu ï¼ˆå®ƒæ˜¯Cmderçš„åŸºç¡€ï¼‰ï¼Œå¯æ¢ä¸ºåˆ«çš„
            https://zhuanlan.zhihu.com/p/71706782

        clink ä½¿ cmd åƒ bash æŒ‰tabé”®è‡ªåŠ¨å®Œæˆ

        git for windows ä½¿ç”¨å®ƒè‡ªå¸¦çš„ unix tools

##### åŸºæœ¬çš„ ConEmu ä»»åŠ¡é…ç½®ç¤ºä¾‹

ConEmu å®‰è£…æ—¶ä¼šè‡ªåŠ¨æ£€æµ‹å½“å‰å¯ç”¨çš„shellå¹¶é…ç½®é»˜è®¤çš„ä»»åŠ¡åˆ—è¡¨

    https://conemu.github.io/en/Tasks.html#add-default-tasks

ç”šè‡³ Windows ä¸‹çš„æ™®é€šè½¯ä»¶éƒ½å¯ä»¥åµŒå¥—åˆ°ConEmuçš„çª—å£ä¸‹

    é€‰æ‹©æ–°å»ºä»»åŠ¡çš„é€‰é¡¹ 'New console dialog'

    åœ¨å¼¹å‡ºçª—å£çš„æ ç›® 'Startup command or {Task} name...'ä¸‹è¾“å…¥ï¼š notepad

    å¯åŠ¨è¯¥ä»»åŠ¡ä¼šçœ‹åˆ°æ–°å»ºäº†ä¸€ä¸ªæ ‡ç­¾æ‰“å¼€äº† Windows çš„è®°äº‹æœ¬ã€‚

å¯ä»¥è°ƒç”¨æ™®é€šçš„ Windows ç¨‹åº

å¦‚æœæ˜¯è°ƒç”¨ putty.exeã€mintty.exeã€notepad.exe ç­‰ Windows ç¨‹åºï¼ŒConEmu ä¼šåˆ©ç”¨è‡ªå·±çš„ ChildGUI åŠŸèƒ½ï¼Œå†…åµŒæ˜¾ç¤ºçª—ä½“ï¼Œæ˜¾ç¤ºæ•ˆæœå®Œç¾ï¼Œä½†ä¸èƒ½ä½¿ç”¨ ConEmu çš„é¢œè‰²å’ŒèƒŒæ™¯æ–¹æ¡ˆ <https://conemu.github.io/en/ChildGui.html>ã€‚

å¯¹ bash.exe/tmux.exe ç­‰ unix pty çš„è¿æ¥ï¼ŒConemu æ˜¯é€šè¿‡ cmd å®ç°çš„ï¼Œæ”¯æŒ ConEmu çš„é¢œè‰²å’ŒèƒŒæ™¯æ–¹æ¡ˆç›®å‰çš„å®ç°æ–¹å¼ï¼Œæ˜¾ç¤ºå…¼å®¹æ€§å¹¶ä¸å®Œç¾ï¼Œè§ Conemu å®‰è£…åç”Ÿæˆçš„é»˜è®¤ä»»åŠ¡ {Bash::Git bash}ã€‚ä¸çŸ¥ä½•æ—¶åˆ‡æ¢åˆ° Windows æ–°çš„ Conpty æ¥å£ã€‚

1ã€å…³äº ConEmu å®‰è£…åè‡ªåŠ¨ç”Ÿæˆçš„ä»»åŠ¡ {Bash::Git bash}

    ä½¿ç”¨æ™®é€šçš„ linux å‘½ä»¤æ˜¾ç¤ºæ•ˆæœæ­£å¸¸ï¼Œè€Œä¸”æ”¯æŒ ConEmu çš„é¢œè‰²å’ŒèƒŒæ™¯æ–¹æ¡ˆã€‚ä½†å¦‚æœä½¿ç”¨ tmux/zsh çŠ¶æ€æ å·¥å…·ï¼Œå› ä¸ºä¸Šé¢æ‰€è¿°åŸå› ï¼Œæ˜¾ç¤ºæ•ˆæœæœ‰ç¼ºé™·ï¼šåœ¨åˆ·æ–°åä¼šå‡ºç°åº•éƒ¨æ é‡å ï¼Œè¿˜æœ‰å…‰æ ‡é”™ä½çš„é—®é¢˜ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå»ºè®®è§ä¸‹é¢çš„ç¤ºä¾‹ 2ã€‚

        set "PATH=%ProgramFiles%\Git\usr\bin;%PATH%" & %ProgramFiles%\Git\git-cmd.exe --no-cd --command=%ConEmuBaseDirShort%\conemu-msys2-64.exe /usr/bin/bash.exe -l -i -new_console:p

    å»ºè®®ç”¨ä¸‹é¢çš„ç¤ºä¾‹2é…ç½®åŸç”Ÿçš„ git-bash.exe ä»»åŠ¡

2ã€é…ç½® git-bash ä»»åŠ¡

    ç®€å•ä½¿ç”¨ï¼Œå®‰è£… git for Windowsï¼Œé…ç½®ä»»åŠ¡ä¸ºç›´æ¥è°ƒç”¨ git-bash.exeï¼Œæˆ–ç›´æ¥è°ƒç”¨ mintty.exeï¼Œç”¨å‚æ•°åŠ è½½ bashï¼Œåœ¨ bash ä¸­ä½¿ç”¨ ssh/tmux æ•ˆæœæ˜¯å®Œç¾çš„ã€‚å¤æ‚ç‚¹çš„å¯ä»¥å®‰è£… MSYS2ï¼ˆMinGW64)å·¥å…·åŒ…ï¼Œè§ä¸‹é¢ç¤ºä¾‹ 5ã€‚

        ç‚¹å‡»+å·ï¼Œæ–°å»ºä¸€ä¸ªTaskåä¸º {Bash::git-bash}ï¼Œå‘½ä»¤æ–‡æœ¬æ¡†è¾“å…¥

        set "PATH=%ProgramFiles%\Git\usr\bin;%PATH%" & %ProgramFiles%\Git\git-bash.exe --cd-to-home

        æ³¨ï¼šgit-bash.exe å…¶å®æ˜¯å°è£…æ‰§è¡Œ `mintty.exe /bin/bash -l`

3ã€é…ç½® Anaconda ä»»åŠ¡

    ç‚¹å‡»+å·ï¼Œæ–°å»ºä¸€ä¸ªTaskåä¸º {cmd::Anaconda}ï¼Œå‘½ä»¤æ–‡æœ¬æ¡†è¾“å…¥

    cmd /k "C:\ProgramData\Anaconda3\Scripts\activate.bat C:\ProgramData\Anaconda3"  -new_console:d:%USERPROFILE%

4ã€é…ç½® putty ä»»åŠ¡

    ç›´æ¥è°ƒç”¨ putty.exe

        ç‚¹å‡»+å·ï¼Œæ–°å»ºä¸€ä¸ªTaskåä¸º {putty::your_putty_session}ï¼Œå‘½ä»¤æ–‡æœ¬æ¡†è¾“å…¥å¦‚ä¸‹

        C:\tools\PuTTY\putty.exe -load "your_putty_session_name"

        å¦‚æœä¸ä½¿ç”¨å‚æ•°æŒ‡å®š putty ä¼šè¯åï¼Œä»»åŠ¡å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨å¼¹å‡º putty çš„çª—å£ä¾›ç”¨æˆ·é€‰æ‹©

5ã€ConEmu é…ç½® MSYS2 ä»»åŠ¡

    ç›´æ¥è°ƒç”¨ mintty.exeï¼Œç”±å®ƒè°ƒç”¨ shell ç¨‹åºï¼Œè¿™æ ·æ˜¾ç¤ºæ•ˆæœç”± mintty å†³å®šï¼Œç­‰æ•ˆäºä¸Šé¢çš„ç¤ºä¾‹2ã€‚

        C:\msys64\usr\bin\mintty.exe -i /msys2.ico -t "%CONTITLE%" "/usr/bin/zsh" -new_console:C:"%D%\msys2.ico"

        C:\msys64\usr\bin\mintty.exe -i /msys2.ico -t "%CONTITLE%" "/usr/bin/bash -l" -new_console:C:"%D%\msys2.ico"

    ç›´æ¥è°ƒç”¨ bash.exe

        æ˜¾ç¤ºä¼šå…‰æ ‡é”™è¡Œï¼Œä¼°è®¡ä¹Ÿæ˜¯å› ä¸º ConEmu é€šè¿‡ cmd å®ç°å¯¹ bash.exe çš„è¿æ¥å¯¼è‡´çš„ã€‚

        æ‰“å¼€ conemu çš„ settings å¯¹è¯æ¡†ï¼Œé€‰æ‹© Startup>>Tasks é€‰é¡¹
        ç‚¹å‡»+å·ï¼Œæ–°å»ºä¸€ä¸ª Task åå­—ä¸º Msys2::MingGW64ï¼Œåœ¨ commands ä¸‹æ–‡æœ¬æ¡†å†…è¾“å…¥å¦‚ä¸‹ä»£ç ï¼š

            set MSYS2_PATH_TYPE=inherit & set MSYSTEM=mingw64 & set "D=C:\msys64" & %D%\usr\bin\bash.exe --login -i -new_console:C:"%D%\msys2.ico"

        MSYS2_PATH_TYPE=inherit è¡¨ç¤ºåˆå¹¶ Windows ç³»ç»Ÿçš„ path å˜é‡ã€‚æ³¨æ„ä¿®æ”¹å˜é‡å€¼ `D=` ä¸ºä½ çš„msys2çš„å®‰è£…ç›®å½•ã€‚

        æ‰“å¼€åä¼šè‡ªåŠ¨æŠŠå·¥ä½œç›®å½•è®¾ç½®ä¸º msys64/home/%user% ä¸‹ã€‚

#### Windows Terminal

    WIndows Terminal æ–‡æ¡£
        https://learn.microsoft.com/zh-cn/windows/terminal/

    Windows Terminal ä¸ MSYS2 MinGW64 é›†æˆ
        https://ttys3.dev/post/windows-terminal-msys2-mingw64-setup/

Windows 10 v1809 æ¨å‡ºçš„ ConPTY æ¥å£ä¹Ÿæ”¯æŒç¬¬ä¸‰æ–¹ç»ˆç«¯æ¨¡æ‹Ÿå™¨äº†ï¼Œå¾®è½¯ç‰ˆçš„å®ç°å°±æ˜¯ Windows Terminalï¼ŒåŒæ—¶æ”¯æŒä¹‹å‰ cmd çš„ Console APIï¼Œå¤šæ ‡ç­¾åŒ–çª—å£åŒæ—¶æ‰“å¼€ cmdã€powershellã€wslã€bash ç­‰å¤šä¸ªç»ˆç«¯çª—å£ï¼Œè‡ªåŠ¨æ·»åŠ å½“å‰è¯†åˆ«åˆ°çš„ git bash ç­‰ mintty åº”ç”¨ï¼ˆå¯¹ MSYS2 åº”ç”¨é€šè¿‡ ConPty æ¥å£å®ç°çš„å…¼å®¹ <https://github.com/msys2/MSYS2-packages/issues/1684>ï¼‰ã€‚

    C:\> winget install --id=Microsoft.WindowsTerminal -e

ç›´æ¥å®‰è£…ä» github ä¸‹è½½çš„ .msixbundle æ–‡ä»¶ï¼Œåœ¨ powershell ä¸‹è¿è¡Œå¦‚ä¸‹å‘½ä»¤å³å¯å®‰è£…ï¼š

    # https://github.com/microsoft/terminal/releases

    PS C:\> Add-AppxPackage .\xxx.msixbundle

ç„¶åç›´æ¥åœ¨ç»ˆç«¯ä¸­æ‰§è¡Œ wt å‘½ä»¤å¯åŠ¨å³å¯ï¼š

    C:\> wt

åœ¨ Windows çš„åº”ç”¨åˆ—è¡¨ä¸­ï¼Œè¿™ä¸ª Windows Terminal åå­—å°±å« â€œç»ˆç«¯â€ã€‚

Fail safe:

å¦‚æœå®‰è£…æ—¶æç¤ºæ— æ³•å®‰è£…ï¼Œç¼ºå°‘æ¡†æ¶ï¼Œä¸‹è½½ github å‘å¸ƒé¡µçš„é‚£ä¸ª xxxx_Windows10_PreinstallKit.zipï¼Œè§£å‹ï¼Œå…ˆå®‰è£… Microsoft.UI.Xaml å’Œ Microsoft.VCLibs.140 ç­‰åŒ…ã€‚

å¦‚æœå®‰è£…åæ— æ³•æ­£å¸¸å¯åŠ¨ Windows Terminalï¼Œç»è¿‡ä¸€é¡¿æ“ä½œï¼Œç»ˆäºæ‰¾åˆ°äº†è§£å†³æ–¹æ³•ï¼Œç”¨é­”æ³•æ‰“è´¥äº†é­”æ³•ï¼

    https://www.cnblogs.com/albelt/p/15253147.html

    è¦æ±‚ï¼š

        Windows 10 1903 ç‰ˆæœ¬åŠä»¥ä¸Š

    æ­¥éª¤ï¼š

        åˆ° Windows Terminal çš„ Github ä»“åº“ä¸‹è½½æœ€æ–°çš„ release åŒ…ï¼Œå³ä»¥ .msixbundle ä¸ºåç¼€çš„æ–‡ä»¶

        å°†æ–‡ä»¶åç¼€åæ”¹ä¸º .zip åè§£å‹ç¼©æ–‡ä»¶

        åœ¨è§£å‹åçš„æ–‡ä»¶å¤¹ä¸­æ‰¾åˆ°åä¸º CascadiaPackage***.msix çš„æ–‡ä»¶ï¼Œæœ‰ x86ã€x64 å’Œ ARM64 ç‰ˆæœ¬çš„ï¼Œé€‰æ‹© x64 é‚£ä¸ªæ–‡ä»¶ï¼Œä¿®æ”¹åç¼€åä¸º .zipï¼Œç„¶åè§£å‹

        åœ¨è§£å‹åçš„æ–‡ä»¶å¤¹ä¸­ï¼Œæ‰¾åˆ° WindowsTerminal.exe çš„æ–‡ä»¶ï¼Œç›´æ¥åŒå‡»å°±èƒ½è¿è¡Œäº†ï¼Œè¿˜æ˜¯ç»¿è‰²å…å®‰è£…ç‰ˆçš„ï¼Œæ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼Ÿ

        å¯ä»¥æŠŠè¿™ä¸ªæ–‡ä»¶å¤¹æ‹·è´åˆ°å®‰å…¨çš„ä½ç½®ï¼Œç„¶åå°† .exe æ–‡ä»¶æ·»åŠ åˆ°æ¡Œé¢å¿«æ·æ–¹å¼ï¼Œå°±èƒ½æ„‰å¿«åœ°ä½¿ç”¨ Windows Terminal å•¦ï¼

##### Quake æ¨¡å¼

Quake æ¨¡å¼æå¤§çš„ä¼˜åŒ–äº† Windows ç»ˆç«¯çš„ä½¿ç”¨ä½“éªŒã€‚åœ¨è¯¥æ¨¡å¼ä¸‹ï¼Œç»ˆç«¯ä¸å†æ˜¯ä¼ ç»Ÿçš„çª—å£å½¢å¼ï¼Œè€Œæ˜¯è‡ªåŠ¨è´´é åœ¨å±å¹•çš„ä¸ŠåŠéƒ¨åˆ†

    https://learn.microsoft.com/en-us/windows/terminal/tips-and-tricks#quake-mode

    https://www.sysgeek.cn/windows-terminal-customize/

1ã€åœ¨ Windows è¿è¡Œå¯¹è¯æ¡†æˆ–å·²æœ‰çš„ Windows Terminal ä¼šè¯ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå¯åŠ¨ä¸€ä¸ªæ–°çš„ Quake æ¨¡å¼ä¼šè¯ï¼š

    C:\> wt -w _quake

å»ºè®®ç›´æ¥åˆ›å»ºä¸€ä¸ªå¿«æ·æ–¹å¼ï¼Œå›ºå®šåˆ°å¼€å§‹èœå•æ–¹ä¾¿ä½¿ç”¨ã€‚

2ã€æ˜¾ç¤º/éšè—è¿™ä¸ªå®ä¾‹çª—å£çš„å¿«æ·é”®é»˜è®¤æ˜¯ Win + ` ï¼Œè¦è‡ªå®šä¹‰å¯ä»¥åœ¨ç»ˆç«¯çš„ JSON é…ç½®æ–‡ä»¶ä¸­çš„actionséƒ¨åˆ†ï¼Œæ·»åŠ å¦‚ä¸‹è®¾ç½®ï¼š

    { "command": { "action": "quakeMode" }, "keys": "ctrl+f12" }

åœ¨å·²æœ‰çš„ Windows Terminal ä¼šè¯ä¸‹æŒ‰çƒ­é”®ï¼Œä¹Ÿä¼šæ–°å»ºä¸€ä¸ª quake æ¨¡å¼çš„ä¼šè¯å¹¶å¼¹å‡ºçª—å£ã€‚

3ã€Quake æ¨¡å¼å¯åŠ¨çš„æ˜¯ä¸€ä¸ªæ–°çš„åº”ç”¨å®ä¾‹ï¼Œè¦å…³é—­åªéœ€è¦åœ¨ä¼šè¯ä¸­æ‰§è¡Œé€€å‡ºå‘½ä»¤å³å¯ï¼š `exit`

##### é…ç½® Windows Terminal

> ç»™å„ä¸ªç»ˆç«¯ç”Ÿæˆé…ç½®æ–‡ä»¶

ç‚¹å‡»æŒ‰é’®â€œæ·»åŠ æ–°é…ç½®æ–‡ä»¶â€ï¼Œé€‰æ‹©åŸºäºå“ªä¸ªç°æœ‰çš„é…ç½®æ–‡ä»¶è¿›è¡Œç”Ÿæˆï¼Œç„¶åä¿®æ”¹å¯åŠ¨å‚æ•°å°±å¯ä»¥äº†ã€‚

wslï¼Œå¯åŠ¨å‚æ•°

    %SystemRoot%\System32\cmd.exe /c wsl --cd ~

Git Bashï¼Œå¯åŠ¨å‚æ•°

    "C:/Program Files/Git/bin/bash.exe" -i -l

å¤åˆ¶ Anaconda çš„å‘½ä»¤è¡Œå¯åŠ¨å‚æ•°ï¼Œåœ¨ cmd ä½¿ç”¨ anaconda

    %WINDIR%\System32\cmd.exe "/K" %USERPROFILE%\anaconda3\Scripts\activate.bat %USERPROFILE%\anaconda3

å¦‚æœè¿½æ±‚ååº”é€Ÿåº¦ï¼Œä½¿ç”¨ cmd ç»ˆç«¯(conhost)ç›®å‰æ˜¯æœ€å¿«çš„

    æŒ‰ä½å›è½¦é”®ä¸æ”¾å¯¹æ¯”ä¸‹åˆ·å±é€Ÿåº¦å°±çŸ¥é“äº†

    cmd åˆ©ç”¨ ConPTY å¯ä»¥æ— ç¼æ”¯æŒ Linux ç¨‹åºçš„æ˜¾ç¤ºï¼Œå…¼å®¹æ€§æ²¡é—®é¢˜äº†ï¼Œæˆ‘ç”¨ cmd ç»ˆç«¯è¿è¡Œ git bash è‡ªå¸¦çš„ `ssh` è¿æ¥è¿œç¨‹æœåŠ¡å™¨ã€è¿è¡Œ `wsl` ä½¿ç”¨ WSL å®ä¾‹ï¼Œéƒ½éå¸¸å¿«ï¼Œæœªé‡åˆ°ä»»ä½•é”™è¯¯ã€‚

    è€Œä¸”ï¼Œå¯ä»¥åœ¨ Windows Terminal ä¸­ç»™ cmd ç»ˆç«¯å¯ä»¥è®¾ç½®è‡ªå®šä¹‰èƒŒæ™¯å’Œå­—ä½“ï¼Œä½¿ç”¨èµ·æ¥æ‰‹æ„Ÿè·Ÿ git bash æ²¡æœ‰å·®åˆ«äº†ã€‚

> é…ç½® Windows Terminal çš„ä¸»é¢˜ã€ç»ˆç«¯é…è‰²æ–¹æ¡ˆç­‰

Windows Terminal æœ‰è‡ªå·±çš„ä¸»é¢˜ï¼Œé¢œè‰²æ–¹æ¡ˆèƒŒæ™¯ç­‰é…ç½®ä¿®æ”¹ setting.jsonã€‚ç›®å‰ç‰ˆæœ¬çš„ Windows Terminal å¯ä»¥åœ¨ç”¨æˆ·ç•Œé¢é€‰æ‹©è®¾ç½®ï¼Œå¦‚é€‰æ‹©èƒŒæ™¯å›¾ç‰‡ã€å¼€å¯æ¯›ç»ç’ƒæ•ˆæœã€å¼€å¯å¤å¤çš„åƒç´ åŒ–ç»ˆç«¯æ•ˆæœç­‰ã€‚

å¤æ‚ç‚¹çš„è®¾ç½®ï¼Œæ¯”å¦‚ç»ˆç«¯é…è‰²æ–¹æ¡ˆï¼Œéœ€è¦æ‰‹åŠ¨ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œç‚¹å‡» Windows Terminal çª—å£å·¦ä¸‹æ–¹çš„æŒ‰é’® â€œæ‰“å¼€jsonæ–‡ä»¶â€ å³å¯æ‰“å¼€æ–‡æœ¬ç¼–è¾‘ï¼Œé…ç½®æ–‡ä»¶çš„ä½ç½®ä¸€èˆ¬åœ¨ %USERPROFILE%\AppData\Local\Microsoft\Windows Terminalã€‚

å››éƒ¨åˆ†ï¼š

    Global Windows Terminal APP æ•´ä½“çš„é…ç½®ï¼Œå¯åŠ¨å‚æ•°ã€æ ·å¼ç­‰ï¼Œå¯¹åº”ä¸‹å›¾çš„ Global Config

    profiles é…ç½®æ¯ä¸ªç»ˆç«¯çš„æ ·å¼

    schemes ç»ˆç«¯é…è‰²æ–¹æ¡ˆ

    actions å®šä¹‰å¿«æ·é”®æ“ä½œï¼Œä¸€èˆ¬é»˜è®¤å³å¯

å¦‚æœä¸çŸ¥é“å¦‚ä½•é…ç½® setting.jsonï¼Œå¯ä»¥å‚è€ƒ default.json æ¯ä¸€ä¸ªèŠ‚ç‚¹çš„ key-value å€¼ã€‚ä¸»é¢˜é…ç½®ä¸»è¦æ˜¯ Globalã€profiles å’Œ schemes èŠ‚ç‚¹ã€‚

list æ®µæ˜¯åŸºæœ¬è®¾ç½®

    "list":
    [
        {
            "guid": "{574e775e-4f2a-5b96-ac1e-a2962a402336}",
            "hidden": false,
            "name": "PowerShell",
            "source": "Windows.Terminal.PowershellCore",
            "colorScheme":"Zhuang B",
            "fontFace":"Cascadia Code PL",
            // å¼€å¯æ¯›ç»ç’ƒæ•ˆæœ
            "useAcrylic":true,
            // æ¯›ç»ç’ƒé€æ˜åº¦
            "acrylicOpacity":0.5
            // åªè¦åŠ ä¸Šè¿™ä¸€å¥ï¼Œå³å¯å¼€å¯äº®ççœ¼çš„æ•ˆæœã€‚
            "experimental.retroTerminalEffect":true
        }
    ]

schemes æ®µè®¾ç½®é…è‰²æ–¹æ¡ˆï¼ŒåŒæ ·æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ¯ç§é…è‰²æ–¹æ¡ˆä¼šæœ‰ä¸€ä¸ªåå­— nameï¼Œå¼•ç”¨é…è‰²æ–¹æ¡ˆå°±æ˜¯é€šè¿‡ name çš„å€¼ã€‚é»˜è®¤é¢„è®¾äº†å‡ ç§é…è‰²æ–¹æ¡ˆï¼Œå¯åœ¨ default.json æŸ¥çœ‹

```json

    // å…¸å‹çš„ schemes æ ¼å¼
    {
        "schemes":[
            {
                "name": "Campbell", // é…è‰²æ–¹æ¡ˆåç§°ï¼Œå¿…é¡»çš„
                "foreground": "#CCCCCC", // è¾“å‡ºæ˜¾ç¤ºå­—ä½“é¢œè‰²
                "background": "#0C0C0C", // èƒŒæ™¯è‰²
                "cursorColor": "#FFFFFF", // å…‰æ ‡é¢œè‰²
                "black": "#0C0C0C", // ç®­å¤´å·¦è¾¹ä¸‰è§’ï¼Œgit ç›®å½•çš„ .git ç›®å½•ä¸‹æç¤ºç®­å¤´èƒŒæ™¯æç¤ºæ–‡å­—
                "red": "#C50F1F", // ssh å vim æ‰“å¼€æ–‡æœ¬æ–‡ä»¶å·²è¾“å…¥è¡Œæ™®é€šå­—ç¬¦æ˜¾ç¤ºæ–‡å­—
                "green": "#13A10E", // git ç›®å½•çš„ .git ç›®å½•ä¸‹æç¤ºç®­å¤´èƒŒæ™¯æç¤º
                "yellow": "#C19C00", // git ç›®å½•çš„åˆ†æ”¯ç®­å¤´èƒŒæ™¯æç¤º
                "blue": "#0037DA", // ç›®å½•ç®­å¤´æœ¬ä½“
                "purple": "#881798", // ssh å vim ç­‰å·¥å…·æ‰“å¼€æ–‡ä»¶åçš„ { å’Œ }ç­‰ç¬¦å·æœ¬ä½“ï¼Œgit æ›´æ–°å®Œåæ˜¾ç¤ºçš„åˆ†æ”¯ç®­å¤´èƒŒæ™¯æç¤º
                "cyan": "#3A96DD", // å¼•å·åŠå†…éƒ¨å­—ç¬¦
                "white": "#CCCCCC", // æœªçŸ¥
                "brightBlack": "#767676", // cd ç­‰ å‘½ä»¤åé¢çš„ .. å’Œ * ç­‰ç‰¹æ®Šç¬¦å·ï¼Œä»¥åŠå‘½ä»¤å‚æ•°å­—ç¬¦é¢œè‰²
                "brightRed": "#E74856", // ç³»ç»Ÿæç¤ºå­—ç¬¦é¢œè‰²ï¼šé”™è¯¯çš„å‘½ä»¤ï¼Œgit status æ˜¾ç¤º
                "brightGreen": "#16C60C", // ssh ç”¨æˆ·æƒé™æ˜¾ç¤º
                "brightYellow": "#F9F1A5", // è¾“å…¥çš„å‘½ä»¤å­—ç¬¦
                "brightBlue": "#3B78FF", // ssh æ–‡ä»¶å¤¹ç­‰é«˜äº®æ˜¾ç¤ºï¼Œssh ç›®å½•ï¼Œvim æ‰“å¼€æ–‡æœ¬æ–‡ä»¶æœªè¾“å…¥è¡Œ ~ å­—ç¬¦æ˜¾ç¤º
                "brightPurple": "#B4009E", // æœªçŸ¥
                "brightCyan": "#61D6D6", // ssh vim ç­‰å·¥å…·æ‰“å¼€æ–‡ä»¶åçš„ { å’Œ } ç­‰ç¬¦å·èƒŒæ™¯
                "brightWhite": "#F2F2F2" // ç›®å½•ç®­å¤´å·¦è¾¹å’Œä¸­é—´çš„æç¤ºæ–‡å­—
            }
        ]
    }

```

è‡ªå®šä¹‰ nord æ–¹æ¡ˆï¼Œæ¥è‡ªç« èŠ‚ [é…è‰²æ–¹æ¡ˆï¼šæ•´å¥—æ”¯æŒç»ˆç«¯æ¨¡æ‹Ÿå™¨å’Œå‘½ä»¤è¡Œè½¯ä»¶çš„ä¸»é¢˜]çš„ä¸‰ç§æ¨¡å¼

    https://compiledexperience.com/blog/posts/windows-terminal-nord

```json

    "schemes": [
        {
            "name": "Nord",
            "foreground": "#d8dee9",
            "background": "#2e3440",
            "cursorColor": "#d8dee9",
            "black": "#3b4252",
            "red": "#bf616a",
            "green": "#a3be8c",
            "yellow": "#ebcb8b",
            "blue": "#81a1c1",
            "purple": "#b48ead",
            "cyan": "#88c0d0",
            "white": "#e5e9f0",
            "brightBlack": "#4c566a",
            "brightRed": "#bf616a",
            "brightGreen": "#a3be8c",
            "brightYellow": "#ebcb8b",
            "brightBlue": "#81a1c1",
            "brightPurple": "#b48ead",
            "brightCyan": "#8fbcbb",
            "brightWhite": "#eceff4",
            "selectionBackground": "#FFFFFF"
        },
    ],

```

åœ¨å¦‚ä¸‹å‡ ä¸ªç½‘ç«™åˆ«å·²æœ‰çš„é¢œè‰²æ–¹æ¡ˆ

    https://github.com/mbadolato/iTerm2-Color-Schemes

    https://windowsterminalthemes.dev/

    http://terminal.sexy/

#### PowerShell 7+ å‘½ä»¤æç¤ºç¬¦å·¥å…·åŠç¾åŒ–

    https://yqc.im/windows-terminal-using-windows-terminal/

    https://zhuanlan.zhihu.com/p/352882990

Windows ç³»ç»Ÿè‡ªå¸¦çš„ Windows PowerShell 5.x å’Œä¸‹è½½å®‰è£…çš„ PowerShell 7.x æ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„ Shellï¼Œæ³¨æ„åˆ° 5.x å¸¦æœ‰ Windows å‰ç¼€ï¼Œè€Œ 7.x æ²¡æœ‰ã€‚ä¸¤è€…çš„é…ç½®ä¹Ÿæ˜¯ç‹¬ç«‹çš„ï¼Œäº’ä¸å½±å“ï¼Œæ‰€ä»¥å¦‚æœä½ åœ¨ 7.x åšé…ç½®ï¼Œæ‰“å¼€ 5.x å¹¶ä¸ä¼šç”Ÿæ•ˆã€‚

ä¸€ã€å…ˆå®‰è£…ç‹¬ç«‹çš„ Powershell 7ï¼Œä»è¿™ä¸ªç‰ˆæœ¬å¼€å§‹ä¸è·Ÿéš Windows å‘å¸ƒäº†

    https://learn.microsoft.com/zh-cn/powershell/scripting/install/installing-powershell-on-windows?view=powershell-7.3

Powershell 7 æœ‰è‡ªå·±çš„è½¯ä»¶åŒ…ä»“åº“

        https://learn.microsoft.com/zh-cn/powershell/scripting/gallery/overview?view=powershell-7.3

        https://www.powershellgallery.com/packages/

å…¶å®ä½¿ç”¨ PowerShell æœ€å¤§çš„é—®é¢˜æ˜¯

    æ‰§è¡Œ `ssh` ä½¿ç”¨ Windows è‡ªå¸¦çš„ C:\Windows\System32\OpenSSHï¼Œç‰ˆæœ¬å¤ªè€äº†

    æ‰§è¡Œ `curl` ç­‰å·¥å…·è¢« alias æŒ‡å‘ wslï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä½ å¾—å…ˆåœ¨ wsl é‡Œè£…ä¸ª Linuxã€‚

ä¸ºäº†å‡å°‘ç–‘æƒ‘ï¼Œæ¥ä¸‹æ¥å°†ç»Ÿä¸€ä½¿ç”¨åŸç”Ÿçš„ PowerShell 7.xã€‚

Powershell ä¼˜åŒ–

    https://www.dejavu.moe/posts/windows-terminal/
    ä¸€èˆ¬æˆ‘ä»¬ä¸ç”¨ Azure ç›¸å…³æœåŠ¡çš„è¯ï¼Œå»ºè®®ç¦ç”¨ Azure è´¦æˆ·æ¨¡å—

    $env:AZ_ENABLE=$false

PowerShell ç¾åŒ–ï¼š

    æ›´æ”¹æ•´ä½“é…è‰²ï¼Œæ”¹å˜è¾“å‡ºæ ·å¼ï¼Œæç¤ºç¬¦å‰æ˜¾ç¤ºç”¨æˆ·åå’Œè®¡ç®—æœºåç­‰

    å¢å¼º Git å‘½ä»¤åŠŸèƒ½å’Œ Git åˆ†æ”¯çŠ¶æ€æ˜¾ç¤º

    è‡ªåŠ¨è¡¥é½åŠŸèƒ½ï¼Œå¯æ ¹æ®å†å²å‘½ä»¤å’Œå½“å‰ç›®å½•è¡¥é½

    ls å‘½ä»¤æ˜¾ç¤ºè‰²å½©

1ã€å®‰è£…å›¾æ ‡å­—ä½“ï¼Œå‚è§ç« èŠ‚ [å›¾æ ‡å­—ä½“]ã€‚

ä¹Ÿå¯ä»¥ç”¨ scoop å®‰è£…

    > scoop search FantasqueSansMono-NF
    > scoop bucket add 'nerd-fonts'

    # ä¸‹é¢ä¸€ä¸ªå‘½ä»¤è¦åŠ  sudo ææƒ
    > sudo scoop install FantasqueSansMono-NF

2ã€å®‰è£… posh-git

posh-git å¯ä»¥å®ç°å‘½ä»¤æç¤ºç¬¦ Git å‘½ä»¤å¢å¼ºï¼ˆå‘½ä»¤åˆ«åå’Œæ˜¾ç¤ºåˆ†æ”¯ä¿¡æ¯ç­‰ï¼‰ã€‚

å¯ä»¥é€šè¿‡ [PowerShell Gallery](https://www.powershellgallery.com) å®‰è£…ï¼Œæ–¹æ³•ï¼šæ‰“å¼€ PowerShell 7ï¼ˆä¸æ˜¯ Windows PowerShellï¼‰ï¼Œè¾“å…¥å‘½ä»¤ï¼š

    > Install-Module posh-git

æ›´æ”¹å‘½ä»¤æç¤ºç¬¦æ˜¾ç¤ºçš„ oh-my-posh é…ç½®å¤æ‚ï¼Œä¸ç©äº†

    https://ohmyposh.dev/docs/installation/windows

3ã€å¢å¼º PowerShell çš„ ls åŠŸèƒ½

dircolors æ˜¯ Linux ä¸‹çš„å‘½ä»¤ï¼Œå¯ä»¥è®¾ç½® ls æŒ‡ä»¤ç”¨å½©è‰²æ˜¾ç¤ºç›®å½•æˆ–æ–‡ä»¶ã€‚PowerShell ç”¨æ’ä»¶ DirColors å®ç°åŒæ ·çš„æ•ˆæœã€‚

    # å®‰è£… DirColors
    > Install-Module DirColors

4ã€ä½¿ç”¨ ColorTool æ›´æ”¹ PowerShell æ–‡å­—é¢œè‰²ï¼Œè¿™ä¸ªå¯ä»¥çœç•¥

    # å®‰è£…æ›´æ”¹æ–‡å­—é¢œè‰²å·¥å…·
    > scoop install colortool

    # æŸ¥çœ‹å†…ç½®çš„é…è‰²æ–¹æ¡ˆï¼Œå…±æœ‰ 8 ç§
    > colortool --schemes

    # è®¾ç½®ä¸»é¢˜ï¼Œåé¢æ˜¯é…è‰²æ–¹æ¡ˆåç§°
    > colortool OneHalfDark.itermcolors

5ã€æœ€åï¼ŒæŠŠé…ç½®å†™å…¥ PowerShell çš„é…ç½®æ–‡ä»¶

    # if (!(Test-Path -Path $PROFILE )) { New-Item -Type File -Path $PROFILE -Force } notepad $PROFILE

    PS C:\Users\your_name> $PROFILE
    C:\Users\your_name\Documents\PowerShell\Microsoft.PowerShell_profile.ps1

    > code $PROFILE

å†…å®¹è§ä¸‹ã€‚

##### PowerShell 7 é…ç½®æ–‡ä»¶æ ·ä¾‹

```powershell

# å‘½ä»¤è¡Œæç¤ºç¬¦gitå¢å¼º
Import-Module posh-git

# ls ç»“æœä½¿ç”¨å½©è‰²
Import-Module DirColors

# è®¾ç½®é¢„æµ‹æ–‡æœ¬æ¥æºä¸ºå†å²è®°å½•
Set-PSReadLineOption -PredictionSource History

# è®¾ç½® Tab é”®è¡¥å…¨
Set-PSReadlineKeyHandler -Key Tab -Function Complete

# è®¾ç½® Ctrl+d ä¸ºèœå•è¡¥å…¨å’Œ Intellisense
Set-PSReadLineKeyHandler -Key "Ctrl+d" -Function MenuComplete

# è®¾ç½® Ctrl+z ä¸ºæ’¤é”€
Set-PSReadLineKeyHandler -Key "Ctrl+z" -Function Undo

# è®¾ç½®å‘ä¸Šé”®ä¸ºåå‘æœç´¢å†å²è®°å½•
Set-PSReadLineKeyHandler -Key UpArrow -Function HistorySearchBackward

# è®¾ç½®å‘ä¸‹é”®ä¸ºå‰å‘æœç´¢å†å²çºªå½•
Set-PSReadLineKeyHandler -Key DownArrow -Function HistorySearchForward

# æ¸…é™¤ scoop ç¼“å­˜å’Œè½¯ä»¶æ—§ç‰ˆæœ¬ | åˆ«å: scoopwipe
#function scoopwipe{sudo scoop cleanup -gk * && sudo scoop cleanup * -g && scoop cache rm * && scoop cleanup * && Write-Host "Scoop ç¼“å­˜æ¸…ç†å®Œæˆå•¦~ğŸ‘Œ" }

# å…³è” conda å‘½ä»¤ï¼Œæ¥è‡ª Ananconda çš„å¼€å§‹èœå•å¿«æ·æ–¹å¼
C:\ProgramData\Anaconda3\shell\condabin\conda-hook.ps1

```
